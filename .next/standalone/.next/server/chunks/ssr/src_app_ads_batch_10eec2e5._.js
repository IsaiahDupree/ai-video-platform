module.exports=[94666,a=>{a.v({actions:"batch-module__XCvZ4W__actions",buttonOutline:"batch-module__XCvZ4W__buttonOutline",buttonPrimary:"batch-module__XCvZ4W__buttonPrimary",buttonSecondary:"batch-module__XCvZ4W__buttonSecondary",container:"batch-module__XCvZ4W__container",error:"batch-module__XCvZ4W__error",fileInput:"batch-module__XCvZ4W__fileInput",fileName:"batch-module__XCvZ4W__fileName",fileSize:"batch-module__XCvZ4W__fileSize",header:"batch-module__XCvZ4W__header",section:"batch-module__XCvZ4W__section",sectionHeader:"batch-module__XCvZ4W__sectionHeader",sectionTitle:"batch-module__XCvZ4W__sectionTitle",select:"batch-module__XCvZ4W__select",stepNumber:"batch-module__XCvZ4W__stepNumber",subtitle:"batch-module__XCvZ4W__subtitle",title:"batch-module__XCvZ4W__title",uploadArea:"batch-module__XCvZ4W__uploadArea",uploadIcon:"batch-module__XCvZ4W__uploadIcon",uploadLabel:"batch-module__XCvZ4W__uploadLabel"})},49299,a=>{a.v({actions:"ColumnMappingForm-module__Mt7egW__actions",buttonSmall:"ColumnMappingForm-module__Mt7egW__buttonSmall",clearButton:"ColumnMappingForm-module__Mt7egW__clearButton",compact:"ColumnMappingForm-module__Mt7egW__compact",container:"ColumnMappingForm-module__Mt7egW__container",defaultValue:"ColumnMappingForm-module__Mt7egW__defaultValue",fieldDescription:"ColumnMappingForm-module__Mt7egW__fieldDescription",fieldName:"ColumnMappingForm-module__Mt7egW__fieldName",helpText:"ColumnMappingForm-module__Mt7egW__helpText",sampleValue:"ColumnMappingForm-module__Mt7egW__sampleValue",select:"ColumnMappingForm-module__Mt7egW__select",summary:"ColumnMappingForm-module__Mt7egW__summary",summaryItem:"ColumnMappingForm-module__Mt7egW__summaryItem",table:"ColumnMappingForm-module__Mt7egW__table",tableBody:"ColumnMappingForm-module__Mt7egW__tableBody",tableCell:"ColumnMappingForm-module__Mt7egW__tableCell",tableHeader:"ColumnMappingForm-module__Mt7egW__tableHeader",tableHeaderCell:"ColumnMappingForm-module__Mt7egW__tableHeaderCell",tableRow:"ColumnMappingForm-module__Mt7egW__tableRow",tableRowMapped:"ColumnMappingForm-module__Mt7egW__tableRowMapped"})},90126,a=>{a.v({card:"PreviewGrid-module__L5-mUa__card",cardFooter:"PreviewGrid-module__L5-mUa__cardFooter",empty:"PreviewGrid-module__L5-mUa__empty",error:"PreviewGrid-module__L5-mUa__error",errorDetails:"PreviewGrid-module__L5-mUa__errorDetails",errorIcon:"PreviewGrid-module__L5-mUa__errorIcon",errorText:"PreviewGrid-module__L5-mUa__errorText",grid:"PreviewGrid-module__L5-mUa__grid",image:"PreviewGrid-module__L5-mUa__image",imageContainer:"PreviewGrid-module__L5-mUa__imageContainer",loading:"PreviewGrid-module__L5-mUa__loading",rowLabel:"PreviewGrid-module__L5-mUa__rowLabel"})},81347,a=>{a.v({actions:"BatchJobStatus-module__UNPJba__actions",container:"BatchJobStatus-module__UNPJba__container",downloadButton:"BatchJobStatus-module__UNPJba__downloadButton",error:"BatchJobStatus-module__UNPJba__error",manifestButton:"BatchJobStatus-module__UNPJba__manifestButton",progress:"BatchJobStatus-module__UNPJba__progress",progressBar:"BatchJobStatus-module__UNPJba__progressBar",progressFill:"BatchJobStatus-module__UNPJba__progressFill",progressText:"BatchJobStatus-module__UNPJba__progressText",spin:"BatchJobStatus-module__UNPJba__spin",statError:"BatchJobStatus-module__UNPJba__statError",statItem:"BatchJobStatus-module__UNPJba__statItem",statLabel:"BatchJobStatus-module__UNPJba__statLabel",statValue:"BatchJobStatus-module__UNPJba__statValue",stats:"BatchJobStatus-module__UNPJba__stats",statusBadge:"BatchJobStatus-module__UNPJba__statusBadge",statusDefault:"BatchJobStatus-module__UNPJba__statusDefault",statusError:"BatchJobStatus-module__UNPJba__statusError",statusIcon:"BatchJobStatus-module__UNPJba__statusIcon",statusProcessing:"BatchJobStatus-module__UNPJba__statusProcessing",statusSuccess:"BatchJobStatus-module__UNPJba__statusSuccess",statusText:"BatchJobStatus-module__UNPJba__statusText"})},26334,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(94666),e=a.i(49299);let f=[{key:"headline",label:"Headline",description:"Main headline text",required:!1},{key:"subheadline",label:"Subheadline",description:"Secondary headline text",required:!1},{key:"body",label:"Body Text",description:"Main body content",required:!1},{key:"cta",label:"Call-to-Action",description:"CTA button text",required:!1},{key:"backgroundImage",label:"Background Image",description:"URL or path to background image",required:!1},{key:"productImage",label:"Product Image",description:"URL or path to product/feature image",required:!1},{key:"logo",label:"Logo",description:"URL or path to logo image",required:!1},{key:"backgroundColor",label:"Background Color",description:"Hex color code (e.g., #3b82f6)",required:!1},{key:"primaryColor",label:"Primary Color",description:"Hex color code for primary brand color",required:!1},{key:"uniqueId",label:"Unique ID",description:"Unique identifier (SKU, product ID, etc.)",required:!1}];function g({headers:a,sampleRows:d,template:g,columnMapping:h,onMappingUpdate:i,disabled:j=!1}){let[k,l]=(0,c.useState)(h),[m,n]=(0,c.useState)(!0);return(0,c.useEffect)(()=>{i(k)},[k,i]),(0,b.jsxs)("div",{className:e.default.container,children:[(0,b.jsxs)("div",{className:e.default.actions,children:[(0,b.jsx)("button",{onClick:()=>{let b={};f.forEach(c=>{let d=a.find(a=>{let b=a.toLowerCase().replace(/[_\s-]/g,""),d=c.key.toLowerCase().replace(/[_\s-]/g,"");return b===d||b.includes(d)||d.includes(b)});d&&(b[c.key]=d)}),l(b)},className:e.default.buttonSmall,disabled:j,children:"Auto-detect"}),(0,b.jsx)("button",{onClick:()=>{l({})},className:e.default.buttonSmall,disabled:j,children:"Clear All"}),(0,b.jsxs)("button",{onClick:()=>n(!m),className:e.default.buttonSmall,children:[m?"Hide":"Show"," Samples"]})]}),(0,b.jsxs)("div",{className:e.default.table,children:[(0,b.jsxs)("div",{className:e.default.tableHeader,children:[(0,b.jsx)("div",{className:e.default.tableHeaderCell,children:"Template Field"}),(0,b.jsx)("div",{className:e.default.tableHeaderCell,children:"CSV Column"}),m&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:e.default.tableHeaderCell,children:"Sample Value"}),(0,b.jsx)("div",{className:e.default.tableHeaderCell,children:"Current Default"})]}),(0,b.jsx)("div",{className:e.default.tableHeaderCell,children:"Actions"})]}),(0,b.jsx)("div",{className:e.default.tableBody,children:f.map(c=>{var f;let h=k[c.key],i=!!h;return(0,b.jsxs)("div",{className:`${e.default.tableRow} ${i?e.default.tableRowMapped:""}`,children:[(0,b.jsxs)("div",{className:e.default.tableCell,children:[(0,b.jsx)("div",{className:e.default.fieldName,children:c.label}),(0,b.jsx)("div",{className:e.default.fieldDescription,children:c.description})]}),(0,b.jsx)("div",{className:e.default.tableCell,children:(0,b.jsxs)("select",{value:h||"",onChange:a=>{var b,d;return b=c.key,d=a.target.value,void l(a=>({...a,[b]:d||void 0}))},className:e.default.select,disabled:j,children:[(0,b.jsx)("option",{value:"",children:"â€” Not mapped â€”"}),a.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})}),m&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:e.default.tableCell,children:(0,b.jsx)("div",{className:e.default.sampleValue,children:h&&0!==d.length&&d[0][h]||"â€”"})}),(0,b.jsx)("div",{className:e.default.tableCell,children:(0,b.jsx)("div",{className:e.default.defaultValue,children:"primaryColor"===(f=c.key)?g.style.primaryColor||"â€”":g.content[f]||"â€”"})})]}),(0,b.jsx)("div",{className:e.default.tableCell,children:i&&(0,b.jsx)("button",{onClick:()=>{var a;return a=c.key,void l(b=>{let c={...b};return delete c[a],c})},className:e.default.clearButton,disabled:j,title:"Clear mapping",children:"âœ•"})})]},c.key)})})]}),(0,b.jsxs)("div",{className:e.default.summary,children:[(0,b.jsxs)("div",{className:e.default.summaryItem,children:[(0,b.jsx)("strong",{children:"CSV Columns:"})," ",a.length]}),(0,b.jsxs)("div",{className:e.default.summaryItem,children:[(0,b.jsx)("strong",{children:"Mapped Fields:"})," ",Object.keys(k).length]}),(0,b.jsxs)("div",{className:e.default.summaryItem,children:[(0,b.jsx)("strong",{children:"Sample Rows:"})," ",d.length]})]}),(0,b.jsx)("div",{className:e.default.helpText,children:(0,b.jsxs)("p",{children:["ðŸ’¡ ",(0,b.jsx)("strong",{children:"Tip:"}),' Click "Auto-detect" to automatically match column names to template fields. Unmapped fields will use the template\'s default values.']})})]})}var h=a.i(90126);function i({jobId:a}){let[d,e]=(0,c.useState)([]),[f,g]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{a?fetch(`/api/ads/batch/preview-assets/${a}`).then(a=>a.json()).then(a=>{e(a.assets||[]),g(!1)}).catch(a=>{console.error("Error loading preview assets:",a),g(!1)}):g(!1)},[a]),f)?(0,b.jsx)("div",{className:h.default.loading,children:"Loading previews..."}):0===d.length?(0,b.jsx)("div",{className:h.default.empty,children:"No preview assets available. Generate a preview to see results."}):(0,b.jsx)("div",{className:h.default.grid,children:d.map(c=>(0,b.jsx)("div",{className:h.default.card,children:"completed"===c.status?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:h.default.imageContainer,children:(0,b.jsx)("img",{src:`/api/ads/batch/asset/${a}/${c.filePath}`,alt:`Preview ${c.rowIndex}`,className:h.default.image})}),(0,b.jsx)("div",{className:h.default.cardFooter,children:(0,b.jsxs)("span",{className:h.default.rowLabel,children:["Row ",c.rowIndex]})})]}):(0,b.jsxs)("div",{className:h.default.error,children:[(0,b.jsx)("div",{className:h.default.errorIcon,children:"âœ•"}),(0,b.jsxs)("div",{className:h.default.errorText,children:["Failed to render row ",c.rowIndex]}),c.error&&(0,b.jsx)("div",{className:h.default.errorDetails,children:c.error})]})},c.id))})}var j=a.i(81347);function k({job:a}){return(0,b.jsxs)("div",{className:j.default.container,children:[(0,b.jsxs)("div",{className:`${j.default.statusBadge} ${(()=>{switch(a.status){case"completed":return j.default.statusSuccess;case"error":return j.default.statusError;case"rendering":return j.default.statusProcessing;default:return j.default.statusDefault}})()}`,children:[(0,b.jsx)("span",{className:j.default.statusIcon,children:(()=>{switch(a.status){case"completed":return"âœ“";case"error":return"âœ•";case"rendering":return"âŸ³";case"previewing":return"ðŸ‘";case"mapping":return"ðŸ—º";default:return"â—‹"}})()}),(0,b.jsx)("span",{className:j.default.statusText,children:(()=>{switch(a.status){case"mapping":return"Mapping columns...";case"previewing":return"Generating preview...";case"rendering":return"Rendering ads...";case"completed":return"Batch complete!";case"error":return"Error occurred";default:return"Ready"}})()})]}),"rendering"===a.status&&(0,b.jsxs)("div",{className:j.default.progress,children:[(0,b.jsx)("div",{className:j.default.progressBar,children:(0,b.jsx)("div",{className:j.default.progressFill,style:{width:`${a.progress}%`}})}),(0,b.jsxs)("div",{className:j.default.progressText,children:[a.progress,"% (",a.completedAssets," / ",a.totalAssets,")"]})]}),("completed"===a.status||"previewing"===a.status)&&(0,b.jsxs)("div",{className:j.default.stats,children:[(0,b.jsxs)("div",{className:j.default.statItem,children:[(0,b.jsx)("div",{className:j.default.statValue,children:a.totalAssets}),(0,b.jsx)("div",{className:j.default.statLabel,children:"Total Assets"})]}),(0,b.jsxs)("div",{className:j.default.statItem,children:[(0,b.jsx)("div",{className:j.default.statValue,children:a.completedAssets}),(0,b.jsx)("div",{className:j.default.statLabel,children:"Completed"})]}),a.failedAssets>0&&(0,b.jsxs)("div",{className:j.default.statItem,children:[(0,b.jsx)("div",{className:`${j.default.statValue} ${j.default.statError}`,children:a.failedAssets}),(0,b.jsx)("div",{className:j.default.statLabel,children:"Failed"})]})]}),a.error&&(0,b.jsxs)("div",{className:j.default.error,children:[(0,b.jsx)("strong",{children:"Error:"})," ",a.error]}),a.jobId&&"completed"===a.status&&(0,b.jsxs)("div",{className:j.default.actions,children:[(0,b.jsx)("a",{href:`/api/ads/batch/download/${a.jobId}`,className:j.default.downloadButton,download:!0,children:"ðŸ“¦ Download ZIP"}),(0,b.jsx)("a",{href:`/api/ads/batch/manifest/${a.jobId}`,className:j.default.manifestButton,target:"_blank",rel:"noopener noreferrer",children:"ðŸ“„ View Manifest"})]})]})}let l=["example-hero-ad","example-quote-ad","example-minimal-ad","example-text-only-ad"];function m(){let[a,e]=(0,c.useState)({file:null,headers:[],sampleRows:[],error:null}),[f,h]=(0,c.useState)("example-hero-ad"),[j,m]=(0,c.useState)(null),[n,o]=(0,c.useState)({}),[p,q]=(0,c.useState)({jobId:null,status:"idle",progress:0,totalAssets:0,completedAssets:0,failedAssets:0,error:null}),r=async a=>{try{let b=await fetch(`/data/ads/${a}.json`),c=await b.json();m(c)}catch(a){console.error("Error loading template:",a)}},s=(0,c.useCallback)(async a=>{let b=a.target.files?.[0];if(b)try{let a=(await b.text()).split("\n").filter(a=>a.trim());if(0===a.length)throw Error("CSV file is empty");let c=a[0].split(",").map(a=>a.trim().replace(/^"|"$/g,"")),d=a.slice(1,4).map(a=>{let b=a.split(",").map(a=>a.trim().replace(/^"|"$/g,"")),d={};return c.forEach((a,c)=>{d[a]=b[c]||""}),d});e({file:b,headers:c,sampleRows:d,error:null}),q(a=>({...a,status:"mapping"}))}catch(a){e({file:null,headers:[],sampleRows:[],error:a instanceof Error?a.message:"Failed to parse CSV"})}},[]),t=async()=>{if(a.file&&j){q(a=>({...a,status:"previewing",progress:0}));try{let b=new FormData;b.append("csv",a.file),b.append("template",JSON.stringify(j)),b.append("columnMapping",JSON.stringify(n)),b.append("previewCount","3");let c=await fetch("/api/ads/batch/preview",{method:"POST",body:b});if(!c.ok)throw Error("Failed to generate preview");let d=await c.json();q(a=>({...a,status:"previewing",totalAssets:d.assets.length,completedAssets:d.assets.filter(a=>"completed"===a.status).length,failedAssets:d.assets.filter(a=>"failed"===a.status).length}))}catch(a){q(b=>({...b,status:"error",error:a instanceof Error?a.message:"Preview generation failed"}))}}},u=async()=>{if(a.file&&j){q(a=>({...a,status:"rendering",progress:0}));try{let b=new FormData;b.append("csv",a.file),b.append("template",JSON.stringify(j)),b.append("columnMapping",JSON.stringify(n)),b.append("format","png"),b.append("createZip","true");let c=await fetch("/api/ads/batch/render",{method:"POST",body:b});if(!c.ok)throw Error("Failed to start batch render");let d=await c.json();q(a=>({...a,jobId:d.jobId,status:"rendering",totalAssets:d.totalAssets})),v(d.jobId)}catch(a){q(b=>({...b,status:"error",error:a instanceof Error?a.message:"Batch render failed"}))}}},v=async a=>{let b=setInterval(async()=>{try{let c=await fetch(`/api/ads/batch/status/${a}`);if(!c.ok)throw Error("Failed to fetch job status");let d=await c.json();q(a=>({...a,status:"completed"===d.status?"completed":"rendering",progress:d.progress,completedAssets:d.completedCount,failedAssets:d.failedCount})),("completed"===d.status||"failed"===d.status)&&clearInterval(b)}catch(a){console.error("Error polling job status:",a),clearInterval(b)}},2e3)};return(0,b.jsxs)("div",{className:d.default.container,children:[(0,b.jsxs)("header",{className:d.default.header,children:[(0,b.jsx)("h1",{className:d.default.title,children:"Batch Ad Generator"}),(0,b.jsx)("p",{className:d.default.subtitle,children:"Upload CSV and generate hundreds of ad creatives"})]}),(0,b.jsxs)("section",{className:d.default.section,children:[(0,b.jsx)("div",{className:d.default.sectionHeader,children:(0,b.jsxs)("h2",{className:d.default.sectionTitle,children:[(0,b.jsx)("span",{className:d.default.stepNumber,children:"1"}),"Upload CSV File"]})}),(0,b.jsxs)("div",{className:d.default.uploadArea,children:[(0,b.jsx)("input",{type:"file",accept:".csv",onChange:s,className:d.default.fileInput,id:"csv-upload",disabled:"rendering"===p.status}),(0,b.jsx)("label",{htmlFor:"csv-upload",className:d.default.uploadLabel,children:a.file?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:d.default.fileName,children:a.file.name}),(0,b.jsxs)("span",{className:d.default.fileSize,children:["(",Math.round(a.file.size/1024)," KB)"]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:d.default.uploadIcon,children:"ðŸ“"}),(0,b.jsx)("span",{children:"Choose CSV file or drag and drop"})]})}),a.error&&(0,b.jsx)("div",{className:d.default.error,children:a.error})]})]}),a.file&&(0,b.jsxs)("section",{className:d.default.section,children:[(0,b.jsx)("div",{className:d.default.sectionHeader,children:(0,b.jsxs)("h2",{className:d.default.sectionTitle,children:[(0,b.jsx)("span",{className:d.default.stepNumber,children:"2"}),"Select Template"]})}),(0,b.jsx)("select",{value:f,onChange:a=>{var b;h(b=a.target.value),r(b)},className:d.default.select,disabled:"rendering"===p.status,children:l.map(a=>(0,b.jsx)("option",{value:a,children:a.replace("example-","").replace(/-/g," ")},a))})]}),a.file&&j&&(0,b.jsxs)("section",{className:d.default.section,children:[(0,b.jsx)("div",{className:d.default.sectionHeader,children:(0,b.jsxs)("h2",{className:d.default.sectionTitle,children:[(0,b.jsx)("span",{className:d.default.stepNumber,children:"3"}),"Map CSV Columns to Template Fields"]})}),(0,b.jsx)(g,{headers:a.headers,sampleRows:a.sampleRows,template:j,columnMapping:n,onMappingUpdate:a=>{o(a)},disabled:"rendering"===p.status})]}),a.file&&j&&(0,b.jsxs)("section",{className:d.default.actions,children:[(0,b.jsx)("button",{onClick:t,className:d.default.buttonSecondary,disabled:"rendering"===p.status,children:"Generate Preview (3 rows)"}),(0,b.jsx)("button",{onClick:u,className:d.default.buttonPrimary,disabled:"rendering"===p.status,children:"rendering"===p.status?"Rendering...":"Start Batch Render"}),(0,b.jsx)("button",{onClick:()=>{e({file:null,headers:[],sampleRows:[],error:null}),o({}),q({jobId:null,status:"idle",progress:0,totalAssets:0,completedAssets:0,failedAssets:0,error:null})},className:d.default.buttonOutline,disabled:"rendering"===p.status,children:"Reset"})]}),"idle"!==p.status&&(0,b.jsx)("section",{className:d.default.section,children:(0,b.jsx)(k,{job:p})}),"previewing"===p.status&&(0,b.jsxs)("section",{className:d.default.section,children:[(0,b.jsx)("h2",{className:d.default.sectionTitle,children:"Preview"}),(0,b.jsx)(i,{jobId:p.jobId})]})]})}a.s(["default",()=>m],26334)}];

//# sourceMappingURL=src_app_ads_batch_10eec2e5._.js.map