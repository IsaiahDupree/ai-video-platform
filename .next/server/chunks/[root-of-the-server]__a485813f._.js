module.exports=[844376,(e,t,r)=>{t.exports=e.x("node:module",()=>require("node:module"))},233405,(e,t,r)=>{t.exports=e.x("child_process",()=>require("child_process"))},202058,(e,t,r)=>{t.exports=a,a.sync=function(e,t){return n(i.statSync(e),t)};var i=e.r(522734);function a(e,t,r){i.stat(e,function(e,i){r(e,!e&&n(i,t))})}function n(e,t){var r,i,a,n,o,s,l,u,c;return e.isFile()&&(r=e,i=t,a=r.mode,n=r.uid,o=r.gid,s=void 0!==i.uid?i.uid:process.getuid&&process.getuid(),l=void 0!==i.gid?i.gid:process.getgid&&process.getgid(),u=parseInt("100",8),c=parseInt("010",8),a&parseInt("001",8)||a&c&&o===l||a&u&&n===s||a&(u|c)&&0===s)}},129507,(e,t,r)=>{t.exports=n,n.sync=function(e,t){return a(i.statSync(e),e,t)};var i=e.r(522734);function a(e,t,r){if(!e.isSymbolicLink()&&!e.isFile())return!1;var i=void 0!==r.pathExt?r.pathExt:process.env.PATHEXT;if(!i||-1!==(i=i.split(";")).indexOf(""))return!0;for(var a=0;a<i.length;a++){var n=i[a].toLowerCase();if(n&&t.substr(-n.length).toLowerCase()===n)return!0}return!1}function n(e,t,r){i.stat(e,function(i,n){r(i,!i&&a(n,e,t))})}},24214,(e,t,r)=>{var i;function a(e,t,r){if("function"==typeof t&&(r=t,t={}),!r){if("function"!=typeof Promise)throw TypeError("callback not provided");return new Promise(function(r,i){a(e,t||{},function(e,t){e?i(e):r(t)})})}i(e,t||{},function(e,i){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,i=!1),r(e,i)})}e.r(522734),i="win32"===process.platform||e.g.TESTING_WINDOWS?e.r(129507):e.r(202058),t.exports=a,a.sync=function(e,t){try{return i.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}}},319932,(e,t,r)=>{let i="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,a=e.r(814747),n=i?";":":",o=e.r(24214),s=e=>Object.assign(Error(`not found: ${e}`),{code:"ENOENT"}),l=(e,t)=>{let r=t.colon||n,a=e.match(/\//)||i&&e.match(/\\/)?[""]:[...i?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],o=i?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",s=i?o.split(r):[""];return i&&-1!==e.indexOf(".")&&""!==s[0]&&s.unshift(""),{pathEnv:a,pathExt:s,pathExtExe:o}},u=(e,t,r)=>{"function"==typeof t&&(r=t,t={}),t||(t={});let{pathEnv:i,pathExt:n,pathExtExe:u}=l(e,t),c=[],d=r=>new Promise((n,o)=>{if(r===i.length)return t.all&&c.length?n(c):o(s(e));let l=i[r],u=/^".*"$/.test(l)?l.slice(1,-1):l,d=a.join(u,e);n(p(!u&&/^\.[\\\/]/.test(e)?e.slice(0,2)+d:d,r,0))}),p=(e,r,i)=>new Promise((a,s)=>{if(i===n.length)return a(d(r+1));let l=n[i];o(e+l,{pathExt:u},(n,o)=>{if(!n&&o)if(!t.all)return a(e+l);else c.push(e+l);return a(p(e,r,i+1))})});return r?d(0).then(e=>r(null,e),r):d(0)};t.exports=u,u.sync=(e,t)=>{let{pathEnv:r,pathExt:i,pathExtExe:n}=l(e,t=t||{}),u=[];for(let s=0;s<r.length;s++){let l=r[s],c=/^".*"$/.test(l)?l.slice(1,-1):l,d=a.join(c,e),p=!c&&/^\.[\\\/]/.test(e)?e.slice(0,2)+d:d;for(let e=0;e<i.length;e++){let r=p+i[e];try{if(o.sync(r,{pathExt:n}))if(!t.all)return r;else u.push(r)}catch(e){}}}if(t.all&&u.length)return u;if(t.nothrow)return null;throw s(e)}},625881,(e,t,r)=>{"use strict";let i=(e={})=>{let t=e.env||process.env;return"win32"!==(e.platform||process.platform)?"PATH":Object.keys(t).reverse().find(e=>"PATH"===e.toUpperCase())||"Path"};t.exports=i,t.exports.default=i},81463,(e,t,r)=>{"use strict";let i=e.r(814747),a=e.r(319932),n=e.r(625881);function o(e,t){let r,o=e.options.env||process.env,s=process.cwd(),l=null!=e.options.cwd,u=l&&void 0!==process.chdir&&!process.chdir.disabled;if(u)try{process.chdir(e.options.cwd)}catch(e){}try{r=a.sync(e.command,{path:o[n({env:o})],pathExt:t?i.delimiter:void 0})}catch(e){}finally{u&&process.chdir(s)}return r&&(r=i.resolve(l?e.options.cwd:"",r)),r}t.exports=function(e){return o(e)||o(e,!0)}},502977,(e,t,r)=>{"use strict";let i=/([()\][%!^"`<>&|;, *?])/g;t.exports.command=function(e){return e.replace(i,"^$1")},t.exports.argument=function(e,t){return e=(e=(e=`${e}`).replace(/(?=(\\+?)?)\1"/g,'$1$1\\"')).replace(/(?=(\\+?)?)\1$/,"$1$1"),e=(e=`"${e}"`).replace(i,"^$1"),t&&(e=e.replace(i,"^$1")),e}},831804,(e,t,r)=>{"use strict";t.exports=/^#!(.*)/},469231,(e,t,r)=>{"use strict";let i=e.r(831804);t.exports=(e="")=>{let t=e.match(i);if(!t)return null;let[r,a]=t[0].replace(/#! ?/,"").split(" "),n=r.split("/").pop();return"env"===n?a:a?`${n} ${a}`:n}},385328,(e,t,r)=>{"use strict";let i=e.r(522734),a=e.r(469231);t.exports=function(e){let t,r=Buffer.alloc(150);try{t=i.openSync(e,"r"),i.readSync(t,r,0,150,0),i.closeSync(t)}catch(e){}return a(r.toString())}},207546,(e,t,r)=>{"use strict";e.r(814747),e.r(81463),e.r(502977),e.r(385328),process.platform,t.exports=function(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null);let i={command:e,args:t=t?t.slice(0):[],options:r=Object.assign({},r),file:void 0,original:{command:e,args:t}};return r.shell,i}},245750,(e,t,r)=>{"use strict";process.platform,t.exports={hookChildProcess:function(e,t){},verifyENOENT:function(e,t){return null},verifyENOENTSync:function(e,t){return null},notFoundError:function(e,t){return Object.assign(Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}}},465887,(e,t,r)=>{"use strict";let i=e.r(233405),a=e.r(207546),n=e.r(245750);function o(e,t,r){let o=a(e,t,r),s=i.spawn(o.command,o.args,o.options);return n.hookChildProcess(s,o),s}t.exports=o,t.exports.spawn=o,t.exports.sync=function(e,t,r){let o=a(e,t,r),s=i.spawnSync(o.command,o.args,o.options);return s.error=s.error||n.verifyENOENTSync(s.status,o),s},t.exports._parse=a,t.exports._enoent=n},364162,(e,t,r)=>{"use strict";t.exports=e=>{let t="string"==typeof e?"\n":"\n".charCodeAt(),r="string"==typeof e?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,e.length-1)),e[e.length-1]===r&&(e=e.slice(0,e.length-1)),e}},905590,(e,t,r)=>{"use strict";let i=e.r(814747),a=e.r(625881),n=e=>{let t;e={cwd:process.cwd(),path:process.env[a()],execPath:process.execPath,...e};let r=i.resolve(e.cwd),n=[];for(;t!==r;)n.push(i.join(r,"node_modules/.bin")),t=r,r=i.resolve(r,"..");return n.push(i.resolve(e.cwd,e.execPath,"..")),n.concat(e.path).join(i.delimiter)};t.exports=n,t.exports.default=n,t.exports.env=e=>{let r={...(e={env:process.env,...e}).env},i=a({env:r});return e.path=r[i],r[i]=t.exports(e),r}},331876,(e,t,r)=>{"use strict";let i=(e,t)=>{for(let r of Reflect.ownKeys(t))Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));return e};t.exports=i,t.exports.default=i},218418,(e,t,r)=>{"use strict";let i=e.r(331876),a=new WeakMap,n=(e,t={})=>{let r;if("function"!=typeof e)throw TypeError("Expected a function");let n=0,o=e.displayName||e.name||"<anonymous>",s=function(...i){if(a.set(s,++n),1===n)r=e.apply(this,i),e=null;else if(!0===t.throw)throw Error(`Function \`${o}\` can only be called once`);return r};return i(s,e),a.set(s,n),s};t.exports=n,t.exports.default=n,t.exports.callCount=e=>{if(!a.has(e))throw Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return a.get(e)}},446786,(e,t,r)=>{t.exports=e.x("os",()=>require("os"))},131424,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SIGNALS=void 0,r.SIGNALS=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}]},994117,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SIGRTMAX=r.getRealtimeSignals=void 0,r.getRealtimeSignals=function(){return Array.from({length:n-a+1},i)};let i=function(e,t){return{name:`SIGRT${t+1}`,number:a+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},a=34,n=64;r.SIGRTMAX=64},680422,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSignals=void 0;var i=e.r(446786),a=e.r(131424),n=e.r(994117);r.getSignals=function(){let e=(0,n.getRealtimeSignals)();return[...a.SIGNALS,...e].map(o)};let o=function({name:e,number:t,description:r,action:a,forced:n=!1,standard:o}){let{signals:{[e]:s}}=i.constants,l=void 0!==s;return{name:e,number:l?s:t,description:r,supported:l,action:a,forced:n,standard:o}}},326958,(e,t,r)=>{"use strict";let i;Object.defineProperty(r,"__esModule",{value:!0}),r.signalsByNumber=r.signalsByName=void 0;var a=e.r(446786),n=e.r(680422),o=e.r(994117);r.signalsByName=(0,n.getSignals)().reduce(function(e,{name:t,number:r,description:i,supported:a,action:n,forced:o,standard:s}){return{...e,[t]:{name:t,number:r,description:i,supported:a,action:n,forced:o,standard:s}}},{});let s=function(e,t){let r=l(e,t);if(void 0===r)return{};let{name:i,description:a,supported:n,action:o,forced:s,standard:u}=r;return{[e]:{name:i,number:e,description:a,supported:n,action:o,forced:s,standard:u}}},l=function(e,t){let r=t.find(({name:t})=>a.constants.signals[t]===e);return void 0!==r?r:t.find(t=>t.number===e)};i=(0,n.getSignals)(),r.signalsByNumber=Object.assign({},...Array.from({length:o.SIGRTMAX+1},(e,t)=>s(t,i)))},984153,(e,t,r)=>{"use strict";let{signalsByName:i}=e.r(326958);t.exports=({stdout:e,stderr:t,all:r,error:a,signal:n,exitCode:o,command:s,escapedCommand:l,timedOut:u,isCanceled:c,killed:d,parsed:{options:{timeout:p}}})=>{o=null===o?void 0:o;let f=void 0===(n=null===n?void 0:n)?void 0:i[n].description,h=(({timedOut:e,timeout:t,errorCode:r,signal:i,signalDescription:a,exitCode:n,isCanceled:o})=>e?`timed out after ${t} milliseconds`:o?"was canceled":void 0!==r?`failed with ${r}`:void 0!==i?`was killed with ${i} (${a})`:void 0!==n?`failed with exit code ${n}`:"failed")({timedOut:u,timeout:p,errorCode:a&&a.code,signal:n,signalDescription:f,exitCode:o,isCanceled:c}),m=`Command ${h}: ${s}`,g="[object Error]"===Object.prototype.toString.call(a),v=g?`${m}
${a.message}`:m,y=[v,t,e].filter(Boolean).join("\n");return g?(a.originalMessage=a.message,a.message=y):a=Error(y),a.shortMessage=v,a.command=s,a.escapedCommand=l,a.exitCode=o,a.signal=n,a.signalDescription=f,a.stdout=e,a.stderr=t,void 0!==r&&(a.all=r),"bufferedData"in a&&delete a.bufferedData,a.failed=!0,a.timedOut=!!u,a.isCanceled=c,a.killed=d&&!u,a}},557635,(e,t,r)=>{"use strict";let i=["stdin","stdout","stderr"],a=e=>{if(!e)return;let{stdio:t}=e;if(void 0===t)return i.map(t=>e[t]);if(i.some(t=>void 0!==e[t]))throw Error(`It's not possible to provide \`stdio\` in combination with one of ${i.map(e=>`\`${e}\``).join(", ")}`);if("string"==typeof t)return t;if(!Array.isArray(t))throw TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);return Array.from({length:Math.max(t.length,i.length)},(e,r)=>t[r])};t.exports=a,t.exports.node=e=>{let t=a(e);return"ipc"===t?"ipc":void 0===t||"string"==typeof t?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]}},449719,(e,t,r)=>{t.exports=e.x("assert",()=>require("assert"))},270684,(e,t,r)=>{t.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"],t.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT")},427699,(e,t,r)=>{t.exports=e.x("events",()=>require("events"))},942356,(e,t,r)=>{var i=e.g.process;let a=function(e){return e&&"object"==typeof e&&"function"==typeof e.removeListener&&"function"==typeof e.emit&&"function"==typeof e.reallyExit&&"function"==typeof e.listeners&&"function"==typeof e.kill&&"number"==typeof e.pid&&"function"==typeof e.on};if(a(i)){var n,o=e.r(449719),s=e.r(270684),l=/^win/i.test(i.platform),u=e.r(427699);"function"!=typeof u&&(u=u.EventEmitter),i.__signal_exit_emitter__?n=i.__signal_exit_emitter__:((n=i.__signal_exit_emitter__=new u).count=0,n.emitted={}),n.infinite||(n.setMaxListeners(1/0),n.infinite=!0),t.exports=function(t,r){if(!a(e.g.process))return function(){};o.equal(typeof t,"function","a callback must be provided for exit handler"),!1===f&&h();var i="exit";return r&&r.alwaysLast&&(i="afterexit"),n.on(i,t),function(){n.removeListener(i,t),0===n.listeners("exit").length&&0===n.listeners("afterexit").length&&c()}};var c=function(){f&&a(e.g.process)&&(f=!1,s.forEach(function(e){try{i.removeListener(e,p[e])}catch(e){}}),i.emit=v,i.reallyExit=m,n.count-=1)};t.exports.unload=c;var d=function(e,t,r){n.emitted[e]||(n.emitted[e]=!0,n.emit(e,t,r))},p={};s.forEach(function(t){p[t]=function(){a(e.g.process)&&i.listeners(t).length===n.count&&(c(),d("exit",null,t),d("afterexit",null,t),l&&"SIGHUP"===t&&(t="SIGINT"),i.kill(i.pid,t))}}),t.exports.signals=function(){return s};var f=!1,h=function(){!f&&a(e.g.process)&&(f=!0,n.count+=1,s=s.filter(function(e){try{return i.on(e,p[e]),!0}catch(e){return!1}}),i.emit=y,i.reallyExit=g)};t.exports.load=h;var m=i.reallyExit,g=function(t){a(e.g.process)&&(i.exitCode=t||0,d("exit",i.exitCode,null),d("afterexit",i.exitCode,null),m.call(i,i.exitCode))},v=i.emit,y=function(t,r){if(!("exit"===t&&a(e.g.process)))return v.apply(this,arguments);void 0!==r&&(i.exitCode=r);var n=v.apply(this,arguments);return d("exit",i.exitCode,null),d("afterexit",i.exitCode,null),n}}else t.exports=function(){return function(){}}},724248,(e,t,r)=>{"use strict";let i=e.r(446786),a=e.r(942356),n=(e,{forceKillAfterTimeout:t},r)=>o(e)&&!1!==t&&r,o=e=>e===i.constants.signals.SIGTERM||"string"==typeof e&&"SIGTERM"===e.toUpperCase(),s=({forceKillAfterTimeout:e=!0})=>{if(!0===e)return 5e3;if(!Number.isFinite(e)||e<0)throw TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e};t.exports={spawnedKill:(e,t="SIGTERM",r={})=>{let i=e(t);return((e,t,r,i)=>{if(!n(t,r,i))return;let a=setTimeout(()=>{e("SIGKILL")},s(r));a.unref&&a.unref()})(e,t,r,i),i},spawnedCancel:(e,t)=>{e.kill()&&(t.isCanceled=!0)},setupTimeout:(e,{timeout:t,killSignal:r="SIGTERM"},i)=>{let a;return 0===t||void 0===t?i:Promise.race([new Promise((i,n)=>{a=setTimeout(()=>{e.kill(r),n(Object.assign(Error("Timed out"),{timedOut:!0,signal:r}))},t)}),i.finally(()=>{clearTimeout(a)})])},validateTimeout:({timeout:e})=>{if(void 0!==e&&(!Number.isFinite(e)||e<0))throw TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},setExitHandler:async(e,{cleanup:t,detached:r},i)=>{if(!t||r)return i;let n=a(()=>{e.kill()});return i.finally(()=>{n()})}}},136745,(e,t,r)=>{"use strict";let i=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;i.writable=e=>i(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState,i.readable=e=>i(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState,i.duplex=e=>i.writable(e)&&i.readable(e),i.transform=e=>i.duplex(e)&&"function"==typeof e._transform,t.exports=i},500874,(e,t,r)=>{t.exports=e.x("buffer",()=>require("buffer"))},976527,(e,t,r)=>{"use strict";let{PassThrough:i}=e.r(688947);t.exports=e=>{let{array:t}=e={...e},{encoding:r}=e,a="buffer"===r,n=!1;t?n=!(r||a):r=r||"utf8",a&&(r=null);let o=new i({objectMode:n});r&&o.setEncoding(r);let s=0,l=[];return o.on("data",e=>{l.push(e),n?s=l.length:s+=e.length}),o.getBufferedValue=()=>t?l:a?Buffer.concat(l,s):l.join(""),o.getBufferedLength=()=>s,o}},333399,(e,t,r)=>{"use strict";let{constants:i}=e.r(500874),a=e.r(688947),{promisify:n}=e.r(224361),o=e.r(976527),s=n(a.pipeline);class l extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function u(e,t){if(!e)throw Error("Expected a stream");let{maxBuffer:r}=t={maxBuffer:1/0,...t},a=o(t);return await new Promise((t,n)=>{let o=e=>{e&&a.getBufferedLength()<=i.MAX_LENGTH&&(e.bufferedData=a.getBufferedValue()),n(e)};(async()=>{try{await s(e,a),t()}catch(e){o(e)}})(),a.on("data",()=>{a.getBufferedLength()>r&&o(new l)})}),a.getBufferedValue()}t.exports=u,t.exports.buffer=(e,t)=>u(e,{...t,encoding:"buffer"}),t.exports.array=(e,t)=>u(e,{...t,array:!0}),t.exports.MaxBufferError=l},835188,(e,t,r)=>{"use strict";let{PassThrough:i}=e.r(688947);t.exports=function(){var e=[],t=new i({objectMode:!0});return t.setMaxListeners(0),t.add=r,t.isEmpty=function(){return 0==e.length},t.on("unpipe",a),Array.prototype.slice.call(arguments).forEach(r),t;function r(i){return Array.isArray(i)?i.forEach(r):(e.push(i),i.once("end",a.bind(null,i)),i.once("error",t.emit.bind(t,"error")),i.pipe(t,{end:!1})),this}function a(r){!(e=e.filter(function(e){return e!==r})).length&&t.readable&&t.end()}}},416219,(e,t,r)=>{"use strict";let i=e.r(136745),a=e.r(333399),n=e.r(835188),o=async(e,t)=>{if(e){e.destroy();try{return await t}catch(e){return e.bufferedData}}},s=(e,{encoding:t,buffer:r,maxBuffer:i})=>{if(e&&r)return t?a(e,{encoding:t,maxBuffer:i}):a.buffer(e,{maxBuffer:i})};t.exports={handleInput:(e,t)=>{void 0!==t&&void 0!==e.stdin&&(i(t)?t.pipe(e.stdin):e.stdin.end(t))},makeAllStream:(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;let r=n();return e.stdout&&r.add(e.stdout),e.stderr&&r.add(e.stderr),r},getSpawnedResult:async({stdout:e,stderr:t,all:r},{encoding:i,buffer:a,maxBuffer:n},l)=>{let u=s(e,{encoding:i,buffer:a,maxBuffer:n}),c=s(t,{encoding:i,buffer:a,maxBuffer:n}),d=s(r,{encoding:i,buffer:a,maxBuffer:2*n});try{return await Promise.all([l,u,c,d])}catch(i){return Promise.all([{error:i,signal:i.signal,timedOut:i.timedOut},o(e,u),o(t,c),o(r,d)])}},validateInputSync:({input:e})=>{if(i(e))throw TypeError("The `input` option cannot be a stream in sync mode")}}},629015,(e,t,r)=>{"use strict";let i=(async()=>{})().constructor.prototype,a=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(i,e)]);t.exports={mergePromise:(e,t)=>{for(let[r,i]of a){let a="function"==typeof t?(...e)=>Reflect.apply(i.value,t(),e):i.value.bind(t);Reflect.defineProperty(e,r,{...i,value:a})}return e},getSpawnedPromise:e=>new Promise((t,r)=>{e.on("exit",(e,r)=>{t({exitCode:e,signal:r})}),e.on("error",e=>{r(e)}),e.stdin&&e.stdin.on("error",e=>{r(e)})})}},565024,(e,t,r)=>{"use strict";let i=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],a=/^[\w.-]+$/,n=/"/g,o=/ +/g;t.exports={joinCommand:(e,t)=>i(e,t).join(" "),getEscapedCommand:(e,t)=>i(e,t).map(e=>"string"!=typeof e||a.test(e)?e:`"${e.replace(n,'\\"')}"`).join(" "),parseCommand:e=>{let t=[];for(let r of e.trim().split(o)){let e=t[t.length-1];e&&e.endsWith("\\")?t[t.length-1]=`${e.slice(0,-1)} ${r}`:t.push(r)}return t}}},611838,(e,t,r)=>{"use strict";let i=e.r(814747),a=e.r(233405),n=e.r(465887),o=e.r(364162),s=e.r(905590),l=e.r(218418),u=e.r(984153),c=e.r(557635),{spawnedKill:d,spawnedCancel:p,setupTimeout:f,validateTimeout:h,setExitHandler:m}=e.r(724248),{handleInput:g,getSpawnedResult:v,makeAllStream:y,validateInputSync:b}=e.r(416219),{mergePromise:x,getSpawnedPromise:w}=e.r(629015),{joinCommand:S,parseCommand:k,getEscapedCommand:C}=e.r(565024),E=(e,t,r={})=>{let a=n._parse(e,t,r);return e=a.command,t=a.args,(r={maxBuffer:1e8,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:(r=a.options).cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...r}).env=(({env:e,extendEnv:t,preferLocal:r,localDir:i,execPath:a})=>{let n=t?{...process.env,...e}:e;return r?s.env({env:n,cwd:i,execPath:a}):n})(r),r.stdio=c(r),"win32"===process.platform&&i.basename(e,".exe"),{file:e,args:t,options:r,parsed:a}},_=(e,t,r)=>"string"==typeof t||Buffer.isBuffer(t)?e.stripFinalNewline?o(t):t:void 0===r?void 0:"",T=(e,t,r)=>{let i,n=E(e,t,r),o=S(e,t),s=C(e,t);h(n.options);try{i=a.spawn(n.file,n.args,n.options)}catch(e){return x(new a.ChildProcess,Promise.reject(u({error:e,stdout:"",stderr:"",all:"",command:o,escapedCommand:s,parsed:n,timedOut:!1,isCanceled:!1,killed:!1})))}let c=w(i),b=f(i,n.options,c),k=m(i,n.options,b),T={isCanceled:!1};i.kill=d.bind(null,i.kill.bind(i)),i.cancel=p.bind(null,i,T);let P=l(async()=>{let[{error:e,exitCode:t,signal:r,timedOut:a},l,c,d]=await v(i,n.options,k),p=_(n.options,l),f=_(n.options,c),h=_(n.options,d);if(e||0!==t||null!==r){let l=u({error:e,exitCode:t,signal:r,stdout:p,stderr:f,all:h,command:o,escapedCommand:s,parsed:n,timedOut:a,isCanceled:T.isCanceled,killed:i.killed});if(!n.options.reject)return l;throw l}return{command:o,escapedCommand:s,exitCode:0,stdout:p,stderr:f,all:h,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return g(i,n.options.input),i.all=y(i,n.options),x(i,P)};t.exports=T,t.exports.sync=(e,t,r)=>{let i,n=E(e,t,r),o=S(e,t),s=C(e,t);b(n.options);try{i=a.spawnSync(n.file,n.args,n.options)}catch(e){throw u({error:e,stdout:"",stderr:"",all:"",command:o,escapedCommand:s,parsed:n,timedOut:!1,isCanceled:!1,killed:!1})}let l=_(n.options,i.stdout,i.error),c=_(n.options,i.stderr,i.error);if(i.error||0!==i.status||null!==i.signal){let e=u({stdout:l,stderr:c,error:i.error,signal:i.signal,exitCode:i.status,command:o,escapedCommand:s,parsed:n,timedOut:i.error&&"ETIMEDOUT"===i.error.code,isCanceled:!1,killed:null!==i.signal});if(!n.options.reject)return e;throw e}return{command:o,escapedCommand:s,exitCode:0,stdout:l,stderr:c,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}},t.exports.command=(e,t)=>{let[r,...i]=k(e);return T(r,i,t)},t.exports.commandSync=(e,t)=>{let[r,...i]=k(e);return T.sync(r,i,t)},t.exports.node=(e,t,r={})=>{t&&!Array.isArray(t)&&"object"==typeof t&&(r=t,t=[]);let i=c.node(r),a=process.execArgv.filter(e=>!e.startsWith("--inspect")),{nodePath:n=process.execPath,nodeOptions:o=a}=r;return T(n,[...o,e,...Array.isArray(t)?t:[]],{...r,stdin:void 0,stdout:void 0,stderr:void 0,stdio:i,shell:!1})}},750227,(e,t,r)=>{t.exports=e.x("node:path",()=>require("node:path"))},870722,(e,t,r)=>{t.exports=e.x("tty",()=>require("tty"))},874533,(e,t,r)=>{t.exports=e.x("node:child_process",()=>require("node:child_process"))},660526,(e,t,r)=>{t.exports=e.x("node:os",()=>require("node:os"))},440264,e=>{"use strict";e.s(["VERSION",()=>"4.0.410"])},347299,(e,t,r)=>{t.exports=e.x("node:http",()=>require("node:http"))},758927,e=>{"use strict";function t(e,t){if(t.length<2)throw Error(e+" must have at least 2 elements");for(let r of t){if("number"!=typeof r)throw Error(`${e} must contain only numbers`);if(!Number.isFinite(r))throw Error(`${e} must contain only finite numbers, but got [${t.join(",")}]`)}}function r(e,r,i,a){if(void 0===e)throw Error("input can not be undefined");if(void 0===r)throw Error("inputRange can not be undefined");if(void 0===i)throw Error("outputRange can not be undefined");if(r.length!==i.length)throw Error("inputRange ("+r.length+") and outputRange ("+i.length+") must have the same length");t("inputRange",r),t("outputRange",i);for(let e=1;e<r.length;++e)if(!(r[e]>r[e-1]))throw Error(`inputRange must be strictly monotonically increasing but got [${r.join(",")}]`);let n=a?.easing??(e=>e),o="extend";a?.extrapolateLeft!==void 0&&(o=a.extrapolateLeft);let s="extend";if(a?.extrapolateRight!==void 0&&(s=a.extrapolateRight),"number"!=typeof e)throw TypeError("Cannot interpolate an input which is not a number");let l=function(e,t){let r;for(r=1;r<t.length-1&&!(t[r]>=e);++r);return r-1}(e,r);return function(e,t,r,i){let{extrapolateLeft:a,extrapolateRight:n,easing:o}=i,s=e,[l,u]=t,[c,d]=r;if(s<l){if("identity"===a)return s;if("clamp"===a)s=l;else if("wrap"===a){let e=u-l;s=((s-l)%e+e)%e+l}}if(s>u){if("identity"===n)return s;if("clamp"===n)s=u;else if("wrap"===n){let e=u-l;s=((s-l)%e+e)%e+l}}return c===d?c:s=(s=o(s=(s-l)/(u-l)))*(d-c)+c}(e,[r[l],r[l+1]],[i[l],i[l+1]],{easing:n,extrapolateLeft:o,extrapolateRight:s})}function i(e){let t=e+0x6d2b79f5;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/0x100000000}var a=(e,t)=>{if(void 0!==t)throw TypeError("random() takes only one argument");if(null===e)return Math.random();if("string"==typeof e)return i(function(e){let t=0,r=0;for(t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return r}(e));if("number"==typeof e)return i(1e10*e);throw Error("random() argument must be a number or a string")},n="remotion-date:",o="remotion-file:",s="[-+]?\\d*\\.?\\d+",l=s+"%";function u(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}function c(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function d(e,t,r){let i=r<.5?r*(1+t):r+t-r*t,a=2*r-i;return Math.round(255*c(a,i,e+1/3))<<24|Math.round(255*c(a,i,e))<<16|Math.round(255*c(a,i,e-1/3))<<8}function p(e){let t=Number.parseInt(e,10);return t<0?0:t>255?255:t}function f(e){return(Number.parseFloat(e)%360+360)%360/360}function h(e){let t=Number.parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function m(e){let t=Number.parseFloat(e);return t<0?0:t>100?1:t/100}var g={transparent:0,aliceblue:0xf0f8ffff,antiquewhite:0xfaebd7ff,aqua:0xffffff,aquamarine:0x7fffd4ff,azure:0xf0ffffff,beige:0xf5f5dcff,bisque:0xffe4c4ff,black:255,blanchedalmond:0xffebcdff,blue:65535,blueviolet:0x8a2be2ff,brown:0xa52a2aff,burlywood:0xdeb887ff,burntsienna:0xea7e5dff,cadetblue:0x5f9ea0ff,chartreuse:0x7fff00ff,chocolate:0xd2691eff,coral:0xff7f50ff,cornflowerblue:0x6495edff,cornsilk:0xfff8dcff,crimson:0xdc143cff,cyan:0xffffff,darkblue:35839,darkcyan:9145343,darkgoldenrod:0xb8860bff,darkgray:0xa9a9a9ff,darkgreen:6553855,darkgrey:0xa9a9a9ff,darkkhaki:0xbdb76bff,darkmagenta:0x8b008bff,darkolivegreen:0x556b2fff,darkorange:0xff8c00ff,darkorchid:0x9932ccff,darkred:0x8b0000ff,darksalmon:0xe9967aff,darkseagreen:0x8fbc8fff,darkslateblue:0x483d8bff,darkslategray:0x2f4f4fff,darkslategrey:0x2f4f4fff,darkturquoise:0xced1ff,darkviolet:0x9400d3ff,deeppink:0xff1493ff,deepskyblue:0xbfffff,dimgray:0x696969ff,dimgrey:0x696969ff,dodgerblue:0x1e90ffff,firebrick:0xb22222ff,floralwhite:0xfffaf0ff,forestgreen:0x228b22ff,fuchsia:0xff00ffff,gainsboro:0xdcdcdcff,ghostwhite:0xf8f8ffff,gold:0xffd700ff,goldenrod:0xdaa520ff,gray:0x808080ff,green:8388863,greenyellow:0xadff2fff,grey:0x808080ff,honeydew:0xf0fff0ff,hotpink:0xff69b4ff,indianred:0xcd5c5cff,indigo:0x4b0082ff,ivory:0xfffff0ff,khaki:0xf0e68cff,lavender:0xe6e6faff,lavenderblush:0xfff0f5ff,lawngreen:0x7cfc00ff,lemonchiffon:0xfffacdff,lightblue:0xadd8e6ff,lightcoral:0xf08080ff,lightcyan:0xe0ffffff,lightgoldenrodyellow:0xfafad2ff,lightgray:0xd3d3d3ff,lightgreen:0x90ee90ff,lightgrey:0xd3d3d3ff,lightpink:0xffb6c1ff,lightsalmon:0xffa07aff,lightseagreen:0x20b2aaff,lightskyblue:0x87cefaff,lightslategray:0x778899ff,lightslategrey:0x778899ff,lightsteelblue:0xb0c4deff,lightyellow:0xffffe0ff,lime:0xff00ff,limegreen:0x32cd32ff,linen:0xfaf0e6ff,magenta:0xff00ffff,maroon:0x800000ff,mediumaquamarine:0x66cdaaff,mediumblue:52735,mediumorchid:0xba55d3ff,mediumpurple:0x9370dbff,mediumseagreen:0x3cb371ff,mediumslateblue:0x7b68eeff,mediumspringgreen:0xfa9aff,mediumturquoise:0x48d1ccff,mediumvioletred:0xc71585ff,midnightblue:0x191970ff,mintcream:0xf5fffaff,mistyrose:0xffe4e1ff,moccasin:0xffe4b5ff,navajowhite:0xffdeadff,navy:33023,oldlace:0xfdf5e6ff,olive:0x808000ff,olivedrab:0x6b8e23ff,orange:0xffa500ff,orangered:0xff4500ff,orchid:0xda70d6ff,palegoldenrod:0xeee8aaff,palegreen:0x98fb98ff,paleturquoise:0xafeeeeff,palevioletred:0xdb7093ff,papayawhip:0xffefd5ff,peachpuff:0xffdab9ff,peru:0xcd853fff,pink:0xffc0cbff,plum:0xdda0ddff,powderblue:0xb0e0e6ff,purple:0x800080ff,rebeccapurple:0x663399ff,red:0xff0000ff,rosybrown:0xbc8f8fff,royalblue:0x4169e1ff,saddlebrown:0x8b4513ff,salmon:0xfa8072ff,sandybrown:0xf4a460ff,seagreen:0x2e8b57ff,seashell:0xfff5eeff,sienna:0xa0522dff,silver:0xc0c0c0ff,skyblue:0x87ceebff,slateblue:0x6a5acdff,slategray:0x708090ff,slategrey:0x708090ff,snow:0xfffafaff,springgreen:0xff7fff,steelblue:0x4682b4ff,tan:0xd2b48cff,teal:8421631,thistle:0xd8bfd8ff,tomato:0xff6347ff,turquoise:0x40e0d0ff,violet:0xee82eeff,wheat:0xf5deb3ff,white:0xffffffff,whitesmoke:0xf5f5f5ff,yellow:0xffff00ff,yellowgreen:0x9acd32ff},v=["h264","h265","vp8","vp9","mp3","aac","wav","prores","h264-mkv","h264-ts","gif"],y={processColor:function(e){let t=function(e){let t,r,i=(void 0===(r={rgb:void 0,rgba:void 0,hsl:void 0,hsla:void 0,hex3:void 0,hex4:void 0,hex5:void 0,hex6:void 0,hex8:void 0}).rgb&&(r.rgb=RegExp("rgb"+u(s,s,s)),r.rgba=RegExp("rgba"+u(s,s,s,s)),r.hsl=RegExp("hsl"+u(s,l,l)),r.hsla=RegExp("hsla"+u(s,l,l,s)),r.hex3=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,r.hex4=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,r.hex6=/^#([0-9a-fA-F]{6})$/,r.hex8=/^#([0-9a-fA-F]{8})$/),r);if(i.hex6&&(t=i.hex6.exec(e)))return Number.parseInt(t[1]+"ff",16)>>>0;if(void 0!==g[e])return g[e];if(i.rgb&&(t=i.rgb.exec(e)))return(p(t[1])<<24|p(t[2])<<16|p(t[3])<<8|255)>>>0;if(i.rgba&&(t=i.rgba.exec(e)))return(p(t[1])<<24|p(t[2])<<16|p(t[3])<<8|h(t[4]))>>>0;if(i.hex3&&(t=i.hex3.exec(e)))return Number.parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0;if(i.hex8&&(t=i.hex8.exec(e)))return Number.parseInt(t[1],16)>>>0;if(i.hex4&&(t=i.hex4.exec(e)))return Number.parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0;if(i.hsl&&(t=i.hsl.exec(e)))return(255|d(f(t[1]),m(t[2]),m(t[3])))>>>0;if(i.hsla&&(t=i.hsla.exec(e)))return(d(f(t[1]),m(t[2]),m(t[3]))|h(t[4]))>>>0;throw Error(`invalid color string ${e} provided`)}(e);return(t<<24|t>>>8)>>>0},truthy:function(e){return!!e},validateFps:function(e,t,r){if("number"!=typeof e)throw Error(`"fps" must be a number, but you passed a value of type ${typeof e} ${t}`);if(!Number.isFinite(e))throw Error(`"fps" must be a finite, but you passed ${e} ${t}`);if(isNaN(e))throw Error(`"fps" must not be NaN, but got ${e} ${t}`);if(e<=0)throw TypeError(`"fps" must be positive, but got ${e} ${t}`);if(r&&e>50)throw TypeError("The FPS for a GIF cannot be higher than 50. Use the --every-nth-frame option to lower the FPS: https://remotion.dev/docs/render-as-gif")},validateDimension:function(e,t,r){if("number"!=typeof e)throw Error(`The "${t}" prop ${r} must be a number, but you passed a value of type ${typeof e}`);if(isNaN(e))throw TypeError(`The "${t}" prop ${r} must not be NaN, but is NaN.`);if(!Number.isFinite(e))throw TypeError(`The "${t}" prop ${r} must be finite, but is ${e}.`);if(e%1!=0)throw TypeError(`The "${t}" prop ${r} must be an integer, but is ${e}.`);if(e<=0)throw TypeError(`The "${t}" prop ${r} must be positive, but got ${e}.`)},validateDurationInFrames:function(e,t){let{allowFloats:r,component:i}=t;if(void 0===e)throw Error(`The "durationInFrames" prop ${i} is missing.`);if("number"!=typeof e)throw Error(`The "durationInFrames" prop ${i} must be a number, but you passed a value of type ${typeof e}`);if(e<=0)throw TypeError(`The "durationInFrames" prop ${i} must be positive, but got ${e}.`);if(!r&&e%1!=0)throw TypeError(`The "durationInFrames" prop ${i} must be an integer, but got ${e}.`);if(!Number.isFinite(e))throw TypeError(`The "durationInFrames" prop ${i} must be finite, but got ${e}.`)},validateDefaultAndInputProps:(e,t,r)=>{if(e){if("object"!=typeof e)throw Error(`"${t}" must be an object, but you passed a value of type ${typeof e}`);if(Array.isArray(e))throw Error(`"${t}" must be an object, an array was passed ${r?`for composition "${r}"`:""}`)}},validateFrame:({allowFloats:e,durationInFrames:t,frame:r})=>{if(void 0===r)throw TypeError('Argument missing for parameter "frame"');if("number"!=typeof r)throw TypeError(`Argument passed for "frame" is not a number: ${r}`);if(!Number.isFinite(r))throw RangeError(`Frame ${r} is not finite`);if(r%1!=0&&!e)throw RangeError(`Argument for frame must be an integer, but got ${r}`);if(r<0&&r<-t)throw RangeError(`Cannot use frame ${r}: Duration of composition is ${t}, therefore the lowest frame that can be rendered is ${-t}`);if(r>t-1)throw RangeError(`Cannot use frame ${r}: Duration of composition is ${t}, therefore the highest frame that can be rendered is ${t-1}`)},serializeJSONWithSpecialTypes:({data:e,indent:t,staticBase:r})=>{let i=!1,a=!1,s=!1,l=!1;try{return{serializedString:JSON.stringify(e,function(e,t){let u=this[e];return u instanceof Date?(i=!0,`${n}${u.toISOString()}`):u instanceof Map?(s=!0,t):u instanceof Set?(l=!0,t):"string"==typeof u&&null!==r&&u.startsWith(r)?(a=!0,`${o}${u.replace(r+"/","")}`):t},t),customDateUsed:i,customFileUsed:a,mapUsed:s,setUsed:l}}catch(e){throw Error("Could not serialize the passed input props to JSON: "+e.message)}},bundleName:"bundle.js",bundleMapName:"bundle.js.map",deserializeJSONWithSpecialTypes:e=>JSON.parse(e,(e,t)=>"string"==typeof t&&t.startsWith(n)?new Date(t.replace(n,"")):"string"==typeof t&&t.startsWith(o)?`${window.remotion_staticBase}/${t.replace(o,"")}`:t),DELAY_RENDER_CALLSTACK_TOKEN:"The delayRender was called:",DELAY_RENDER_RETRY_TOKEN:"- Rendering the frame will be retried.",DELAY_RENDER_CLEAR_TOKEN:"handle was cleared after",DELAY_RENDER_ATTEMPT_TOKEN:"Retries left: ",getOffthreadVideoSource:({src:e,transparent:t,currentTime:r,toneMapped:i})=>`http://localhost:${window.remotion_proxyPort}/proxy?src=${encodeURIComponent(e)}&time=${encodeURIComponent(Math.max(0,r))}&transparent=${String(t)}&toneMapped=${String(i)}`,getExpectedMediaFrameUncorrected:({frame:e,playbackRate:t,startFrom:i})=>r(e,[-1,i,i+1],[-1,i,i+t]),ENABLE_V5_BREAKING_CHANGES:!1,MIN_NODE_VERSION:16,MIN_BUN_VERSION:"1.0.3",colorNames:g,DATE_TOKEN:n,FILE_TOKEN:o,validateCodec:function(e,t,r){if(void 0!==e){if("string"!=typeof e)throw TypeError(`The "${r}" prop ${t} must be a string, but you passed a value of type ${typeof e}.`);if(!v.includes(e))throw Error(`The "${r}" prop ${t} must be one of ${v.join(", ")}, but you passed ${e}.`)}},proResProfileOptions:["4444-xq","4444","hq","standard","light","proxy"]};e.s(["NoReactInternals",()=>y,"interpolate",()=>r,"random",()=>a])},495879,(e,t,r)=>{t.exports=e.x("node:dns",()=>require("node:dns"))},857764,(e,t,r)=>{t.exports=e.x("node:url",()=>require("node:url"))},583420,(e,t,r)=>{"use strict";let{Duplex:i}=e.r(688947);function a(e){e.emit("close")}function n(){!this.destroyed&&this._writableState.finished&&this.destroy()}function o(e){this.removeListener("error",o),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}t.exports=function(e,t){let r=!0,s=new i({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",function(t,r){let i=!r&&s._readableState.objectMode?t.toString():t;s.push(i)||e.pause()}),e.once("error",function(e){s.destroyed||(r=!1,s.destroy(e))}),e.once("close",function(){s.destroyed||s.push(null)}),s._destroy=function(t,i){if(e.readyState===e.CLOSED){i(t),process.nextTick(a,s);return}let n=!1;e.once("error",function(e){n=!0,i(e)}),e.once("close",function(){n||i(t),process.nextTick(a,s)}),r&&e.terminate()},s._final=function(t){e.readyState===e.CONNECTING?e.once("open",function(){s._final(t)}):null!==e._socket&&(e._socket._writableState.finished?(t(),s._readableState.endEmitted&&s.destroy()):(e._socket.once("finish",function(){t()}),e.close()))},s._read=function(){e.isPaused&&e.resume()},s._write=function(t,r,i){e.readyState===e.CONNECTING?e.once("open",function(){s._write(t,r,i)}):e.send(t,i)},s.on("end",n),s.on("error",o),s}},262161,(e,t,r)=>{"use strict";t.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},636295,(e,t,r)=>{"use strict";let{EMPTY_BUFFER:i}=e.r(262161),a=Buffer[Symbol.species];function n(e,t,r,i,a){for(let n=0;n<a;n++)r[i+n]=e[n]^t[3&n]}function o(e,t){for(let r=0;r<e.length;r++)e[r]^=t[3&r]}function s(e){let t;return(s.readOnly=!0,Buffer.isBuffer(e))?e:(e instanceof ArrayBuffer?t=new a(e):ArrayBuffer.isView(e)?t=new a(e.buffer,e.byteOffset,e.byteLength):(t=Buffer.from(e),s.readOnly=!1),t)}if(t.exports={concat:function(e,t){if(0===e.length)return i;if(1===e.length)return e[0];let r=Buffer.allocUnsafe(t),n=0;for(let t=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return n<t?new a(r.buffer,r.byteOffset,n):r},mask:n,toArrayBuffer:function(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)},toBuffer:s,unmask:o},!process.env.WS_NO_BUFFER_UTIL)try{let e=(()=>{let e=Error("Cannot find module 'bufferutil'");throw e.code="MODULE_NOT_FOUND",e})();t.exports.mask=function(t,r,i,a,o){o<48?n(t,r,i,a,o):e.mask(t,r,i,a,o)},t.exports.unmask=function(t,r){t.length<32?o(t,r):e.unmask(t,r)}}catch(e){}},519705,(e,t,r)=>{"use strict";let i=Symbol("kDone"),a=Symbol("kRun");t.exports=class{constructor(e){this[i]=()=>{this.pending--,this[a]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[a]()}[a](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[i])}}}},453625,(e,t,r)=>{"use strict";let i,a=e.r(406461),n=e.r(636295),o=e.r(519705),{kStatusCode:s}=e.r(262161),l=Buffer[Symbol.species],u=Buffer.from([0,0,255,255]),c=Symbol("permessage-deflate"),d=Symbol("total-length"),p=Symbol("callback"),f=Symbol("buffers"),h=Symbol("error");function m(e){this[f].push(e),this[d]+=e.length}function g(e){(this[d]+=e.length,this[c]._maxPayload<1||this[d]<=this[c]._maxPayload)?this[f].push(e):(this[h]=RangeError("Max payload size exceeded"),this[h].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[h][s]=1009,this.removeListener("data",g),this.reset())}function v(e){this[c]._inflate=null,e[s]=1007,this[p](e)}t.exports=class{constructor(e,t,r){this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,i||(i=new o(void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10))}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[p];this._deflate.close(),this._deflate=null,e&&e(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let t=this._options,r=e.find(e=>(!1!==t.serverNoContextTakeover||!e.server_no_context_takeover)&&(!e.server_max_window_bits||!1!==t.serverMaxWindowBits&&("number"!=typeof t.serverMaxWindowBits||!(t.serverMaxWindowBits>e.server_max_window_bits)))&&("number"!=typeof t.clientMaxWindowBits||!!e.client_max_window_bits));if(!r)throw Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:(!0===r.client_max_window_bits||!1===t.clientMaxWindowBits)&&delete r.client_max_window_bits,r}acceptAsClient(e){let t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{let r=e[t];if(r.length>1)throw Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){let e=+r;if(!Number.isInteger(e)||e<8||e>15)throw TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){let e=+r;if(!Number.isInteger(e)||e<8||e>15)throw TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if("client_no_context_takeover"===t||"server_no_context_takeover"===t){if(!0!==r)throw TypeError(`Invalid value for parameter "${t}": ${r}`)}else throw Error(`Unknown parameter "${t}"`);e[t]=r})}),e}decompress(e,t,r){i.add(i=>{this._decompress(e,t,(e,t)=>{i(),r(e,t)})})}compress(e,t,r){i.add(i=>{this._compress(e,t,(e,t)=>{i(),r(e,t)})})}_decompress(e,t,r){let i=this._isServer?"client":"server";if(!this._inflate){let e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?a.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=a.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[c]=this,this._inflate[d]=0,this._inflate[f]=[],this._inflate.on("error",v),this._inflate.on("data",g)}this._inflate[p]=r,this._inflate.write(e),t&&this._inflate.write(u),this._inflate.flush(()=>{let e=this._inflate[h];if(e){this._inflate.close(),this._inflate=null,r(e);return}let a=n.concat(this._inflate[f],this._inflate[d]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[d]=0,this._inflate[f]=[],t&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),r(null,a)})}_compress(e,t,r){let i=this._isServer?"server":"client";if(!this._deflate){let e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?a.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=a.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[d]=0,this._deflate[f]=[],this._deflate.on("data",m)}this._deflate[p]=r,this._deflate.write(e),this._deflate.flush(a.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let e=n.concat(this._deflate[f],this._deflate[d]);t&&(e=new l(e.buffer,e.byteOffset,e.length-4)),this._deflate[p]=null,this._deflate[d]=0,this._deflate[f]=[],t&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),r(null,e)})}}},801692,(e,t,r)=>{"use strict";let{isUtf8:i}=e.r(500874);function a(e){let t=e.length,r=0;for(;r<t;)if((128&e[r])==0)r++;else if((224&e[r])==192){if(r+1===t||(192&e[r+1])!=128||(254&e[r])==192)return!1;r+=2}else if((240&e[r])==224){if(r+2>=t||(192&e[r+1])!=128||(192&e[r+2])!=128||224===e[r]&&(224&e[r+1])==128||237===e[r]&&(224&e[r+1])==160)return!1;r+=3}else{if((248&e[r])!=240||r+3>=t||(192&e[r+1])!=128||(192&e[r+2])!=128||(192&e[r+3])!=128||240===e[r]&&(240&e[r+1])==128||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}return!0}if(t.exports={isValidStatusCode:function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:a,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},i)t.exports.isValidUTF8=function(e){return e.length<24?a(e):i(e)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let e=(()=>{let e=Error("Cannot find module 'utf-8-validate'");throw e.code="MODULE_NOT_FOUND",e})();t.exports.isValidUTF8=function(t){return t.length<32?a(t):e(t)}}catch(e){}},924966,(e,t,r)=>{"use strict";let{Writable:i}=e.r(688947),a=e.r(453625),{BINARY_TYPES:n,EMPTY_BUFFER:o,kStatusCode:s,kWebSocket:l}=e.r(262161),{concat:u,toArrayBuffer:c,unmask:d}=e.r(636295),{isValidStatusCode:p,isValidUTF8:f}=e.r(801692),h=Buffer[Symbol.species];t.exports=class extends i{constructor(e={}){super(),this._allowSynchronousEvents=void 0===e.allowSynchronousEvents||e.allowSynchronousEvents,this._binaryType=e.binaryType||n[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[l]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let t=this._buffers[0];return this._buffers[0]=new h(t.buffer,t.byteOffset+e,t.length-e),new h(t.buffer,t.byteOffset,e)}let t=Buffer.allocUnsafe(e);do{let r=this._buffers[0],i=t.length-e;e>=r.length?t.set(this._buffers.shift(),i):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),i),this._buffers[0]=new h(r.buffer,r.byteOffset+e,r.length-e)),e-=r.length}while(e>0)return t}startLoop(e){this._loop=!0;do switch(this._state){case 0:this.getInfo(e);break;case 1:this.getPayloadLength16(e);break;case 2:this.getPayloadLength64(e);break;case 3:this.getMask();break;case 4:this.getData(e);break;case 5:case 6:this._loop=!1;return}while(this._loop)this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let t=this.consume(2);if((48&t[0])!=0)return void e(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));let r=(64&t[0])==64;if(r&&!this._extensions[a.extensionName])return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._fin=(128&t[0])==128,this._opcode=15&t[0],this._payloadLength=127&t[1],0===this._opcode){if(r)return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(!this._fragmented)return void e(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));this._compressed=r}else{if(!(this._opcode>7)||!(this._opcode<11))return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));if(!this._fin)return void e(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));if(r)return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return void e(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=(128&t[1])==128,this._isServer){if(!this._masked)return void e(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}else if(this._masked)return void e(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let t=this.consume(8),r=t.readUInt32BE(0);r>2097151?e(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=0x100000000*r+t.readUInt32BE(4),this.haveLength(e))}haveLength(e){this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)?e(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH")):this._masked?this._state=3:this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(e){let t=o;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}t=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!=0&&d(t,this._mask)}if(this._opcode>7)return void this.controlMessage(t,e);if(this._compressed){this._state=5,this.decompress(t,e);return}t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage(e)}decompress(e,t){this._extensions[a.extensionName].decompress(e,this._fin,(e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return void t(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(r)}this.dataMessage(t),0===this._state&&this.startLoop(t)})}dataMessage(e){if(!this._fin){this._state=0;return}let t=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let i;i="nodebuffer"===this._binaryType?u(r,t):"arraybuffer"===this._binaryType?c(u(r,t)):r,this._allowSynchronousEvents?(this.emit("message",i,!0),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",i,!0),this._state=0,this.startLoop(e)}))}else{let i=u(r,t);if(!this._skipUTF8Validation&&!f(i))return void e(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));5===this._state||this._allowSynchronousEvents?(this.emit("message",i,!1),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",i,!1),this._state=0,this.startLoop(e)}))}}controlMessage(e,t){if(8===this._opcode){if(0===e.length)this._loop=!1,this.emit("conclude",1005,o),this.end();else{let r=e.readUInt16BE(0);if(!p(r))return void t(this.createError(RangeError,`invalid status code ${r}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE"));let i=new h(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!f(i))return void t(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));this._loop=!1,this.emit("conclude",r,i),this.end()}this._state=0;return}this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",e),this._state=0):(this._state=6,setImmediate(()=>{this.emit(9===this._opcode?"ping":"pong",e),this._state=0,this.startLoop(t)}))}createError(e,t,r,i,a){this._loop=!1,this._errored=!0;let n=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(n,this.createError),n.code=a,n[s]=i,n}}},991014,(e,t,r)=>{"use strict";let i,{Duplex:a}=e.r(688947),{randomFillSync:n}=e.r(254799),o=e.r(453625),{EMPTY_BUFFER:s}=e.r(262161),{isValidStatusCode:l}=e.r(801692),{mask:u,toBuffer:c}=e.r(636295),d=Symbol("kByteLength"),p=Buffer.alloc(4),f=8192;class h{constructor(e,t,r){this._extensions=t||{},r&&(this._generateMask=r,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){let r,a,o=!1,s=2,l=!1;t.mask&&(r=t.maskBuffer||p,t.generateMask?t.generateMask(r):(8192===f&&(void 0===i&&(i=Buffer.alloc(8192)),n(i,0,8192),f=0),r[0]=i[f++],r[1]=i[f++],r[2]=i[f++],r[3]=i[f++]),l=(r[0]|r[1]|r[2]|r[3])==0,s=6),"string"==typeof e?a=(!t.mask||l)&&void 0!==t[d]?t[d]:(e=Buffer.from(e)).length:(a=e.length,o=t.mask&&t.readOnly&&!l);let c=a;a>=65536?(s+=8,c=127):a>125&&(s+=2,c=126);let h=Buffer.allocUnsafe(o?a+s:s);return(h[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(h[0]|=64),h[1]=c,126===c?h.writeUInt16BE(a,2):127===c&&(h[2]=h[3]=0,h.writeUIntBE(a,4,6)),t.mask)?(h[1]|=128,h[s-4]=r[0],h[s-3]=r[1],h[s-2]=r[2],h[s-1]=r[3],l)?[h,e]:o?(u(e,r,h,s,a),[h]):(u(e,r,e,0,a),[h,e]):[h,e]}close(e,t,r,i){let a;if(void 0===e)a=s;else if("number"==typeof e&&l(e))if(void 0!==t&&t.length){let r=Buffer.byteLength(t);if(r>123)throw RangeError("The message must not be greater than 123 bytes");(a=Buffer.allocUnsafe(2+r)).writeUInt16BE(e,0),"string"==typeof t?a.write(t,2):a.set(t,2)}else(a=Buffer.allocUnsafe(2)).writeUInt16BE(e,0);else throw TypeError("First argument must be a valid error code number");let n={[d]:a.length,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,a,!1,n,i]):this.sendFrame(h.frame(a,n),i)}ping(e,t,r){let i,a;if("string"==typeof e?(i=Buffer.byteLength(e),a=!1):(i=(e=c(e)).length,a=c.readOnly),i>125)throw RangeError("The data size must not be greater than 125 bytes");let n={[d]:i,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:a,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,n,r]):this.sendFrame(h.frame(e,n),r)}pong(e,t,r){let i,a;if("string"==typeof e?(i=Buffer.byteLength(e),a=!1):(i=(e=c(e)).length,a=c.readOnly),i>125)throw RangeError("The data size must not be greater than 125 bytes");let n={[d]:i,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:a,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,n,r]):this.sendFrame(h.frame(e,n),r)}send(e,t,r){let i,a,n=this._extensions[o.extensionName],s=t.binary?2:1,l=t.compress;if("string"==typeof e?(i=Buffer.byteLength(e),a=!1):(i=(e=c(e)).length,a=c.readOnly),this._firstFragment?(this._firstFragment=!1,l&&n&&n.params[n._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(l=i>=n._threshold),this._compress=l):(l=!1,s=0),t.fin&&(this._firstFragment=!0),n){let n={[d]:i,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:a,rsv1:l};this._deflating?this.enqueue([this.dispatch,e,this._compress,n,r]):this.dispatch(e,this._compress,n,r)}else this.sendFrame(h.frame(e,{[d]:i,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:a,rsv1:!1}),r)}dispatch(e,t,r,i){if(!t)return void this.sendFrame(h.frame(e,r),i);let a=this._extensions[o.extensionName];this._bufferedBytes+=r[d],this._deflating=!0,a.compress(e,r.fin,(e,t)=>{if(this._socket.destroyed){let e=Error("The socket was closed while data was being compressed");"function"==typeof i&&i(e);for(let t=0;t<this._queue.length;t++){let r=this._queue[t],i=r[r.length-1];"function"==typeof i&&i(e)}return}this._bufferedBytes-=r[d],this._deflating=!1,r.readOnly=!1,this.sendFrame(h.frame(t,r),i),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][d],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][d],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}t.exports=h},504446,(e,t,r)=>{t.exports=e.x("net",()=>require("net"))},755004,(e,t,r)=>{t.exports=e.x("tls",()=>require("tls"))},587042,(e,t,r)=>{"use strict";let{kForOnEventAttribute:i,kListener:a}=e.r(262161),n=Symbol("kCode"),o=Symbol("kData"),s=Symbol("kError"),l=Symbol("kMessage"),u=Symbol("kReason"),c=Symbol("kTarget"),d=Symbol("kType"),p=Symbol("kWasClean");class f{constructor(e){this[c]=null,this[d]=e}get target(){return this[c]}get type(){return this[d]}}Object.defineProperty(f.prototype,"target",{enumerable:!0}),Object.defineProperty(f.prototype,"type",{enumerable:!0});class h extends f{constructor(e,t={}){super(e),this[n]=void 0===t.code?0:t.code,this[u]=void 0===t.reason?"":t.reason,this[p]=void 0!==t.wasClean&&t.wasClean}get code(){return this[n]}get reason(){return this[u]}get wasClean(){return this[p]}}Object.defineProperty(h.prototype,"code",{enumerable:!0}),Object.defineProperty(h.prototype,"reason",{enumerable:!0}),Object.defineProperty(h.prototype,"wasClean",{enumerable:!0});class m extends f{constructor(e,t={}){super(e),this[s]=void 0===t.error?null:t.error,this[l]=void 0===t.message?"":t.message}get error(){return this[s]}get message(){return this[l]}}Object.defineProperty(m.prototype,"error",{enumerable:!0}),Object.defineProperty(m.prototype,"message",{enumerable:!0});class g extends f{constructor(e,t={}){super(e),this[o]=void 0===t.data?null:t.data}get data(){return this[o]}}function v(e,t,r){"object"==typeof e&&e.handleEvent?e.handleEvent.call(e,r):e.call(t,r)}Object.defineProperty(g.prototype,"data",{enumerable:!0}),t.exports={CloseEvent:h,ErrorEvent:m,Event:f,EventTarget:{addEventListener(e,t,r={}){let n;for(let n of this.listeners(e))if(!r[i]&&n[a]===t&&!n[i])return;if("message"===e)n=function(e,r){let i=new g("message",{data:r?e:e.toString()});i[c]=this,v(t,this,i)};else if("close"===e)n=function(e,r){let i=new h("close",{code:e,reason:r.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});i[c]=this,v(t,this,i)};else if("error"===e)n=function(e){let r=new m("error",{error:e,message:e.message});r[c]=this,v(t,this,r)};else{if("open"!==e)return;n=function(){let e=new f("open");e[c]=this,v(t,this,e)}}n[i]=!!r[i],n[a]=t,r.once?this.once(e,n):this.on(e,n)},removeEventListener(e,t){for(let r of this.listeners(e))if(r[a]===t&&!r[i]){this.removeListener(e,r);break}}},MessageEvent:g}},124501,(e,t,r)=>{"use strict";let{tokenChars:i}=e.r(801692);function a(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}t.exports={format:function(e){return Object.keys(e).map(t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>[t].concat(Object.keys(e).map(t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(e){let t,r,n=Object.create(null),o=Object.create(null),s=!1,l=!1,u=!1,c=-1,d=-1,p=-1,f=0;for(;f<e.length;f++)if(d=e.charCodeAt(f),void 0===t)if(-1===p&&1===i[d])-1===c&&(c=f);else if(0!==f&&(32===d||9===d))-1===p&&-1!==c&&(p=f);else if(59===d||44===d){if(-1===c)throw SyntaxError(`Unexpected character at index ${f}`);-1===p&&(p=f);let r=e.slice(c,p);44===d?(a(n,r,o),o=Object.create(null)):t=r,c=p=-1}else throw SyntaxError(`Unexpected character at index ${f}`);else if(void 0===r)if(-1===p&&1===i[d])-1===c&&(c=f);else if(32===d||9===d)-1===p&&-1!==c&&(p=f);else if(59===d||44===d){if(-1===c)throw SyntaxError(`Unexpected character at index ${f}`);-1===p&&(p=f),a(o,e.slice(c,p),!0),44===d&&(a(n,t,o),o=Object.create(null),t=void 0),c=p=-1}else if(61===d&&-1!==c&&-1===p)r=e.slice(c,f),c=p=-1;else throw SyntaxError(`Unexpected character at index ${f}`);else if(l){if(1!==i[d])throw SyntaxError(`Unexpected character at index ${f}`);-1===c?c=f:s||(s=!0),l=!1}else if(u)if(1===i[d])-1===c&&(c=f);else if(34===d&&-1!==c)u=!1,p=f;else if(92===d)l=!0;else throw SyntaxError(`Unexpected character at index ${f}`);else if(34===d&&61===e.charCodeAt(f-1))u=!0;else if(-1===p&&1===i[d])-1===c&&(c=f);else if(-1!==c&&(32===d||9===d))-1===p&&(p=f);else if(59===d||44===d){if(-1===c)throw SyntaxError(`Unexpected character at index ${f}`);-1===p&&(p=f);let i=e.slice(c,p);s&&(i=i.replace(/\\/g,""),s=!1),a(o,r,i),44===d&&(a(n,t,o),o=Object.create(null),t=void 0),r=void 0,c=p=-1}else throw SyntaxError(`Unexpected character at index ${f}`);if(-1===c||u||32===d||9===d)throw SyntaxError("Unexpected end of input");-1===p&&(p=f);let h=e.slice(c,p);return void 0===t?a(n,h,o):(void 0===r?a(o,h,!0):s?a(o,r,h.replace(/\\/g,"")):a(o,r,h),a(n,t,o)),n}}},792789,(e,t,r)=>{"use strict";let i=e.r(427699),a=e.r(524836),n=e.r(921517),o=e.r(504446),s=e.r(755004),{randomBytes:l,createHash:u}=e.r(254799),{Duplex:c,Readable:d}=e.r(688947),{URL:p}=e.r(792509),f=e.r(453625),h=e.r(924966),m=e.r(991014),{BINARY_TYPES:g,EMPTY_BUFFER:v,GUID:y,kForOnEventAttribute:b,kListener:x,kStatusCode:w,kWebSocket:S,NOOP:k}=e.r(262161),{EventTarget:{addEventListener:C,removeEventListener:E}}=e.r(587042),{format:_,parse:T}=e.r(124501),{toBuffer:P}=e.r(636295),I=Symbol("kAborted"),A=[8,13],O=["CONNECTING","OPEN","CLOSING","CLOSED"],M=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class F extends i{constructor(e,t,r){super(),this._binaryType=g[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=v,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=F.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(r=t,t=[]):t=[t]),function e(t,r,i,o){let s,c,d,h,m={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:A[1],maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...o,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(t._autoPong=m.autoPong,!A.includes(m.protocolVersion))throw RangeError(`Unsupported protocol version: ${m.protocolVersion} (supported versions: ${A.join(", ")})`);if(r instanceof p)s=r;else try{s=new p(r)}catch(e){throw SyntaxError(`Invalid URL: ${r}`)}"http:"===s.protocol?s.protocol="ws:":"https:"===s.protocol&&(s.protocol="wss:"),t._url=s.href;let g="wss:"===s.protocol,v="ws+unix:"===s.protocol;if("ws:"===s.protocol||g||v?v&&!s.pathname?c="The URL's pathname is empty":s.hash&&(c="The URL contains a fragment identifier"):c='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"',c){let e=SyntaxError(c);if(0!==t._redirects)return void R(t,e);throw e}let b=g?443:80,x=l(16).toString("base64"),w=g?a.request:n.request,S=new Set;if(m.createConnection=m.createConnection||(g?j:D),m.defaultPort=m.defaultPort||b,m.port=s.port||b,m.host=s.hostname.startsWith("[")?s.hostname.slice(1,-1):s.hostname,m.headers={...m.headers,"Sec-WebSocket-Version":m.protocolVersion,"Sec-WebSocket-Key":x,Connection:"Upgrade",Upgrade:"websocket"},m.path=s.pathname+s.search,m.timeout=m.handshakeTimeout,m.perMessageDeflate&&(d=new f(!0!==m.perMessageDeflate?m.perMessageDeflate:{},!1,m.maxPayload),m.headers["Sec-WebSocket-Extensions"]=_({[f.extensionName]:d.offer()})),i.length){for(let e of i){if("string"!=typeof e||!M.test(e)||S.has(e))throw SyntaxError("An invalid or duplicated subprotocol was specified");S.add(e)}m.headers["Sec-WebSocket-Protocol"]=i.join(",")}if(m.origin&&(m.protocolVersion<13?m.headers["Sec-WebSocket-Origin"]=m.origin:m.headers.Origin=m.origin),(s.username||s.password)&&(m.auth=`${s.username}:${s.password}`),v){let e=m.path.split(":");m.socketPath=e[0],m.path=e[1]}if(m.followRedirects){if(0===t._redirects){t._originalIpc=v,t._originalSecure=g,t._originalHostOrSocketPath=v?m.socketPath:s.host;let e=o&&o.headers;if(o={...o,headers:{}},e)for(let[t,r]of Object.entries(e))o.headers[t.toLowerCase()]=r}else if(0===t.listenerCount("redirect")){let e=v?!!t._originalIpc&&m.socketPath===t._originalHostOrSocketPath:!t._originalIpc&&s.host===t._originalHostOrSocketPath;e&&(!t._originalSecure||g)||(delete m.headers.authorization,delete m.headers.cookie,e||delete m.headers.host,m.auth=void 0)}m.auth&&!o.headers.authorization&&(o.headers.authorization="Basic "+Buffer.from(m.auth).toString("base64")),h=t._req=w(m),t._redirects&&t.emit("redirect",t.url,h)}else h=t._req=w(m);m.timeout&&h.on("timeout",()=>{L(t,h,"Opening handshake has timed out")}),h.on("error",e=>{null===h||h[I]||(h=t._req=null,R(t,e))}),h.on("response",a=>{let n=a.headers.location,s=a.statusCode;if(n&&m.followRedirects&&s>=300&&s<400){let a;if(++t._redirects>m.maxRedirects)return void L(t,h,"Maximum redirects exceeded");h.abort();try{a=new p(n,r)}catch(e){R(t,SyntaxError(`Invalid URL: ${n}`));return}e(t,a,i,o)}else t.emit("unexpected-response",h,a)||L(t,h,`Unexpected server response: ${a.statusCode}`)}),h.on("upgrade",(e,r,i)=>{let a;if(t.emit("upgrade",e),t.readyState!==F.CONNECTING)return;h=t._req=null;let n=e.headers.upgrade;if(void 0===n||"websocket"!==n.toLowerCase())return void L(t,r,"Invalid Upgrade header");let o=u("sha1").update(x+y).digest("base64");if(e.headers["sec-websocket-accept"]!==o)return void L(t,r,"Invalid Sec-WebSocket-Accept header");let s=e.headers["sec-websocket-protocol"];if(void 0!==s?S.size?S.has(s)||(a="Server sent an invalid subprotocol"):a="Server sent a subprotocol but none was requested":S.size&&(a="Server sent no subprotocol"),a)return void L(t,r,a);s&&(t._protocol=s);let l=e.headers["sec-websocket-extensions"];if(void 0!==l){let e;if(!d)return void L(t,r,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");try{e=T(l)}catch(e){L(t,r,"Invalid Sec-WebSocket-Extensions header");return}let i=Object.keys(e);if(1!==i.length||i[0]!==f.extensionName)return void L(t,r,"Server indicated an extension that was not requested");try{d.accept(e[f.extensionName])}catch(e){L(t,r,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[f.extensionName]=d}t.setSocket(r,i,{allowSynchronousEvents:m.allowSynchronousEvents,generateMask:m.generateMask,maxPayload:m.maxPayload,skipUTF8Validation:m.skipUTF8Validation})}),m.finishRequest?m.finishRequest(h,t):h.end()}(this,e,t,r)):(this._autoPong=r.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){g.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){let i=new h({allowSynchronousEvents:r.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation});this._sender=new m(e,this._extensions,r.generateMask),this._receiver=i,this._socket=e,i[S]=this,e[S]=this,i.on("conclude",N),i.on("drain",$),i.on("error",z),i.on("message",V),i.on("ping",H),i.on("pong",W),e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",G),e.on("data",Z),e.on("end",K),e.on("error",Q),this._readyState=F.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=F.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[f.extensionName]&&this._extensions[f.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=F.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==F.CLOSED){if(this.readyState===F.CONNECTING)return void L(this,this._req,"WebSocket was closed before the connection was established");if(this.readyState===F.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=F.CLOSING,this._sender.close(e,t,!this._isServer,e=>{!e&&(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)}}pause(){this.readyState!==F.CONNECTING&&this.readyState!==F.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,r){if(this.readyState===F.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");("function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState!==F.OPEN)?B(this,e,r):(void 0===t&&(t=!this._isServer),this._sender.ping(e||v,t,r))}pong(e,t,r){if(this.readyState===F.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");("function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState!==F.OPEN)?B(this,e,r):(void 0===t&&(t=!this._isServer),this._sender.pong(e||v,t,r))}resume(){this.readyState!==F.CONNECTING&&this.readyState!==F.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,r){if(this.readyState===F.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==F.OPEN)return void B(this,e,r);let i={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[f.extensionName]||(i.compress=!1),this._sender.send(e||v,i,r)}terminate(){if(this.readyState!==F.CLOSED){if(this.readyState===F.CONNECTING)return void L(this,this._req,"WebSocket was closed before the connection was established");this._socket&&(this._readyState=F.CLOSING,this._socket.destroy())}}}function R(e,t){e._readyState=F.CLOSING,e.emit("error",t),e.emitClose()}function D(e){return e.path=e.socketPath,o.connect(e)}function j(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=o.isIP(e.host)?"":e.host),s.connect(e)}function L(e,t,r){e._readyState=F.CLOSING;let i=Error(r);Error.captureStackTrace(i,L),t.setHeader?(t[I]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(R,e,i)):(t.destroy(i),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function B(e,t,r){if(t){let r=P(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}if(r){let t=Error(`WebSocket is not open: readyState ${e.readyState} (${O[e.readyState]})`);process.nextTick(r,t)}}function N(e,t){let r=this[S];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,void 0!==r._socket[S]&&(r._socket.removeListener("data",Z),process.nextTick(q,r._socket),1005===e?r.close():r.close(e,t))}function $(){let e=this[S];e.isPaused||e._socket.resume()}function z(e){let t=this[S];void 0!==t._socket[S]&&(t._socket.removeListener("data",Z),process.nextTick(q,t._socket),t.close(e[w])),t.emit("error",e)}function U(){this[S].emitClose()}function V(e,t){this[S].emit("message",e,t)}function H(e){let t=this[S];t._autoPong&&t.pong(e,!this._isServer,k),t.emit("ping",e)}function W(e){this[S].emit("pong",e)}function q(e){e.resume()}function G(){let e,t=this[S];this.removeListener("close",G),this.removeListener("data",Z),this.removeListener("end",K),t._readyState=F.CLOSING,this._readableState.endEmitted||t._closeFrameReceived||t._receiver._writableState.errorEmitted||null===(e=t._socket.read())||t._receiver.write(e),t._receiver.end(),this[S]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",U),t._receiver.on("finish",U))}function Z(e){this[S]._receiver.write(e)||this.pause()}function K(){let e=this[S];e._readyState=F.CLOSING,e._receiver.end(),this.end()}function Q(){let e=this[S];this.removeListener("error",Q),this.on("error",k),e&&(e._readyState=F.CLOSING,this.destroy())}Object.defineProperty(F,"CONNECTING",{enumerable:!0,value:O.indexOf("CONNECTING")}),Object.defineProperty(F.prototype,"CONNECTING",{enumerable:!0,value:O.indexOf("CONNECTING")}),Object.defineProperty(F,"OPEN",{enumerable:!0,value:O.indexOf("OPEN")}),Object.defineProperty(F.prototype,"OPEN",{enumerable:!0,value:O.indexOf("OPEN")}),Object.defineProperty(F,"CLOSING",{enumerable:!0,value:O.indexOf("CLOSING")}),Object.defineProperty(F.prototype,"CLOSING",{enumerable:!0,value:O.indexOf("CLOSING")}),Object.defineProperty(F,"CLOSED",{enumerable:!0,value:O.indexOf("CLOSED")}),Object.defineProperty(F.prototype,"CLOSED",{enumerable:!0,value:O.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(e=>{Object.defineProperty(F.prototype,e,{enumerable:!0})}),["open","error","close","message"].forEach(e=>{Object.defineProperty(F.prototype,`on${e}`,{enumerable:!0,get(){for(let t of this.listeners(e))if(t[b])return t[x];return null},set(t){for(let t of this.listeners(e))if(t[b]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[b]:!0})}})}),F.prototype.addEventListener=C,F.prototype.removeEventListener=E,t.exports=F},727544,(e,t,r)=>{"use strict";let{tokenChars:i}=e.r(801692);t.exports={parse:function(e){let t=new Set,r=-1,a=-1,n=0;for(;n<e.length;n++){let o=e.charCodeAt(n);if(-1===a&&1===i[o])-1===r&&(r=n);else if(0!==n&&(32===o||9===o))-1===a&&-1!==r&&(a=n);else if(44===o){if(-1===r)throw SyntaxError(`Unexpected character at index ${n}`);-1===a&&(a=n);let i=e.slice(r,a);if(t.has(i))throw SyntaxError(`The "${i}" subprotocol is duplicated`);t.add(i),r=a=-1}else throw SyntaxError(`Unexpected character at index ${n}`)}if(-1===r||-1!==a)throw SyntaxError("Unexpected end of input");let o=e.slice(r,n);if(t.has(o))throw SyntaxError(`The "${o}" subprotocol is duplicated`);return t.add(o),t}}},619173,(e,t,r)=>{"use strict";let i=e.r(427699),a=e.r(921517),{Duplex:n}=e.r(688947),{createHash:o}=e.r(254799),s=e.r(124501),l=e.r(453625),u=e.r(727544),c=e.r(792789),{GUID:d,kWebSocket:p}=e.r(262161),f=/^[+/0-9A-Za-z]{22}==$/;function h(e){e._state=2,e.emit("close")}function m(){this.destroy()}function g(e,t,r,i){r=r||a.STATUS_CODES[t],i={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...i},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${a.STATUS_CODES[t]}\r
`+Object.keys(i).map(e=>`${e}: ${i[e]}`).join("\r\n")+"\r\n\r\n"+r)}function v(e,t,r,i,a){if(e.listenerCount("wsClientError")){let i=Error(a);Error.captureStackTrace(i,v),e.emit("wsClientError",i,r,t)}else g(r,i,a)}t.exports=class extends i{constructor(e,t){if(super(),null==(e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:c,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=a.createServer((e,t)=>{let r=a.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(let r of Object.keys(t))e.on(r,t[r]);return function(){for(let r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,i)=>{this.handleUpgrade(t,r,i,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state){e&&this.once("close",()=>{e(Error("The server is not running"))}),process.nextTick(h,this);return}if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(h,this);else{let e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close(()=>{h(this)})}}shouldHandle(e){if(this.options.path){let t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,i){t.on("error",m);let a=e.headers["sec-websocket-key"],n=e.headers.upgrade,o=+e.headers["sec-websocket-version"];if("GET"!==e.method)return void v(this,e,t,405,"Invalid HTTP method");if(void 0===n||"websocket"!==n.toLowerCase())return void v(this,e,t,400,"Invalid Upgrade header");if(void 0===a||!f.test(a))return void v(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");if(8!==o&&13!==o)return void v(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");if(!this.shouldHandle(e))return void g(t,400);let c=e.headers["sec-websocket-protocol"],d=new Set;if(void 0!==c)try{d=u.parse(c)}catch(r){v(this,e,t,400,"Invalid Sec-WebSocket-Protocol header");return}let p=e.headers["sec-websocket-extensions"],h={};if(this.options.perMessageDeflate&&void 0!==p){let r=new l(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let e=s.parse(p);e[l.extensionName]&&(r.accept(e[l.extensionName]),h[l.extensionName]=r)}catch(r){v(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let n={origin:e.headers[`${8===o?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(n,(n,o,s,l)=>{if(!n)return g(t,o||401,s,l);this.completeUpgrade(h,a,d,e,t,r,i)});if(!this.options.verifyClient(n))return g(t,401)}this.completeUpgrade(h,a,d,e,t,r,i)}completeUpgrade(e,t,r,i,a,n,u){if(!a.readable||!a.writable)return a.destroy();if(a[p])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return g(a,503);let c=o("sha1").update(t+d).digest("base64"),f=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${c}`],v=new this.options.WebSocket(null,void 0,this.options);if(r.size){let e=this.options.handleProtocols?this.options.handleProtocols(r,i):r.values().next().value;e&&(f.push(`Sec-WebSocket-Protocol: ${e}`),v._protocol=e)}if(e[l.extensionName]){let t=e[l.extensionName].params,r=s.format({[l.extensionName]:[t]});f.push(`Sec-WebSocket-Extensions: ${r}`),v._extensions=e}this.emit("headers",f,i),a.write(f.concat("\r\n").join("\r\n")),a.removeListener("error",m),v.setSocket(a,n,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(v),v.on("close",()=>{this.clients.delete(v),this._shouldEmitClose&&!this.clients.size&&process.nextTick(h,this)})),u(v,i)}}},586051,(e,t,r)=>{let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");r.encode=function(e){if(0<=e&&e<i.length)return i[e];throw TypeError("Must be between 0 and 63: "+e)}},604307,(e,t,r)=>{let i=e.r(586051);r.encode=function(e){let t,r="",a=e<0?(-e<<1)+1:(e<<1)+0;do t=31&a,(a>>>=5)>0&&(t|=32),r+=i.encode(t);while(a>0)return r}},309865,(e,t,r)=>{"use strict";t.exports="function"==typeof URL?URL:e.r(792509).URL},180578,(e,t,r)=>{let i=e.r(309865);r.getArg=function(e,t,r){if(t in e)return e[t];if(3==arguments.length)return r;throw Error('"'+t+'" is a required argument.')};let a=!("__proto__"in Object.create(null));function n(e){return e}function o(e){if(!e)return!1;let t=e.length;if(t<9||95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(let r=t-10;r>=0;r--)if(36!==e.charCodeAt(r))return!1;return!0}function s(e,t){return e===t?0:null===e?1:null===t?-1:e>t?1:-1}r.toSetString=a?n:function(e){return o(e)?"$"+e:e},r.fromSetString=a?n:function(e){return o(e)?e.slice(1):e},r.compareByGeneratedPositionsInflated=function(e,t){let r=e.generatedLine-t.generatedLine;return 0!==r||0!=(r=e.generatedColumn-t.generatedColumn)||0!==(r=s(e.source,t.source))||0!=(r=e.originalLine-t.originalLine)||0!=(r=e.originalColumn-t.originalColumn)?r:s(e.name,t.name)},r.parseSourceMapInput=function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))};let l="http:",u=`${l}//host`;function c(e){return t=>{let r=h(t),a=p(t),n=new i(t,a);e(n);let o=n.toString();return"absolute"===r?o:"scheme-relative"===r?o.slice(l.length):"path-absolute"===r?o.slice(u.length):m(a,o)}}function d(e,t){return new i(e,t).toString()}function p(e){let t=e.split("..").length-1,r=function(e,t){let r=0;for(;;){let e="p"+r++;if(-1===t.indexOf(e))return e}}(0,e),i=`${u}/`;for(let e=0;e<t;e++)i+=`${r}/`;return i}let f=/^[A-Za-z0-9\+\-\.]+:/;function h(e){return"/"===e[0]?"/"===e[1]?"scheme-relative":"path-absolute":f.test(e)?"absolute":"path-relative"}function m(e,t){"string"==typeof e&&(e=new i(e)),"string"==typeof t&&(t=new i(t));let r=t.pathname.split("/"),a=e.pathname.split("/");for(a.length>0&&!a[a.length-1]&&a.pop();r.length>0&&a.length>0&&r[0]===a[0];)r.shift(),a.shift();return a.map(()=>"..").concat(r).join("/")+t.search+t.hash}let g=c(e=>{e.pathname=e.pathname.replace(/\/?$/,"/")}),v=c(e=>{e.href=new i(".",e.toString()).toString()}),y=c(e=>{});function b(e,t){let r=h(t),i=h(e);if(e=g(e),"absolute"===r)return d(t,void 0);if("absolute"===i)return d(t,e);if("scheme-relative"===r)return y(t);if("scheme-relative"===i)return d(t,d(e,u)).slice(l.length);if("path-absolute"===r)return y(t);if("path-absolute"===i)return d(t,d(e,u)).slice(u.length);let a=p(t+e),n=d(t,d(e,a));return m(a,n)}r.normalize=y,r.join=b,r.relative=function(e,t){let r=function(e,t){if(h(e)!==h(t))return null;let r=p(e+t),a=new i(e,r),n=new i(t,r);try{new i("",n.toString())}catch(e){return null}return n.protocol!==a.protocol||n.user!==a.user||n.password!==a.password||n.hostname!==a.hostname||n.port!==a.port?null:m(a,n)}(e,t);return"string"==typeof r?r:y(t)},r.computeSourceURL=function(e,t,r){e&&"path-absolute"===h(t)&&(t=t.replace(/^\//,""));let i=y(t||"");return e&&(i=b(e,i)),r&&(i=b(v(r),i)),i}},637897,(e,t,r)=>{class i{constructor(){this._array=[],this._set=new Map}static fromArray(e,t){let r=new i;for(let i=0,a=e.length;i<a;i++)r.add(e[i],t);return r}size(){return this._set.size}add(e,t){let r=this.has(e),i=this._array.length;(!r||t)&&this._array.push(e),r||this._set.set(e,i)}has(e){return this._set.has(e)}indexOf(e){let t=this._set.get(e);if(t>=0)return t;throw Error('"'+e+'" is not in the set.')}at(e){if(e>=0&&e<this._array.length)return this._array[e];throw Error("No element indexed by "+e)}toArray(){return this._array.slice()}}r.ArraySet=i},374481,(e,t,r)=>{let i=e.r(180578);r.MappingList=class{constructor(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}unsortedForEach(e,t){this._array.forEach(e,t)}add(e){var t;let r,a,n,o;(t=this._last,r=t.generatedLine,a=e.generatedLine,n=t.generatedColumn,o=e.generatedColumn,a>r||a==r&&o>=n||0>=i.compareByGeneratedPositionsInflated(t,e))?this._last=e:this._sorted=!1,this._array.push(e)}toArray(){return this._sorted||(this._array.sort(i.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}}},170150,(e,t,r)=>{let i=e.r(604307),a=e.r(180578),n=e.r(637897).ArraySet,o=e.r(374481).MappingList;class s{constructor(e){e||(e={}),this._file=a.getArg(e,"file",null),this._sourceRoot=a.getArg(e,"sourceRoot",null),this._skipValidation=a.getArg(e,"skipValidation",!1),this._sources=new n,this._names=new n,this._mappings=new o,this._sourcesContents=null}static fromSourceMap(e){let t=e.sourceRoot,r=new s({file:e.file,sourceRoot:t});return e.eachMapping(function(e){let i={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(i.source=e.source,null!=t&&(i.source=a.relative(t,i.source)),i.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(i.name=e.name)),r.addMapping(i)}),e.sources.forEach(function(i){let n=i;null!==t&&(n=a.relative(t,i)),r._sources.has(n)||r._sources.add(n);let o=e.sourceContentFor(i);null!=o&&r.setSourceContent(i,o)}),r}addMapping(e){let t=a.getArg(e,"generated"),r=a.getArg(e,"original",null),i=a.getArg(e,"source",null),n=a.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,r,i,n),null!=i&&(i=String(i),this._sources.has(i)||this._sources.add(i)),null!=n&&(n=String(n),this._names.has(n)||this._names.add(n)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=r&&r.line,originalColumn:null!=r&&r.column,source:i,name:n})}setSourceContent(e,t){let r=e;null!=this._sourceRoot&&(r=a.relative(this._sourceRoot,r)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[a.toSetString(r)]=t):this._sourcesContents&&(delete this._sourcesContents[a.toSetString(r)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))}applySourceMap(e,t,r){let i=t;if(null==t){if(null==e.file)throw Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');i=e.file}let o=this._sourceRoot;null!=o&&(i=a.relative(o,i));let s=this._mappings.toArray().length>0?new n:this._sources,l=new n;this._mappings.unsortedForEach(function(t){if(t.source===i&&null!=t.originalLine){let i=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=i.source&&(t.source=i.source,null!=r&&(t.source=a.join(r,t.source)),null!=o&&(t.source=a.relative(o,t.source)),t.originalLine=i.line,t.originalColumn=i.column,null!=i.name&&(t.name=i.name))}let n=t.source;null==n||s.has(n)||s.add(n);let u=t.name;null==u||l.has(u)||l.add(u)},this),this._sources=s,this._names=l,e.sources.forEach(function(t){let i=e.sourceContentFor(t);null!=i&&(null!=r&&(t=a.join(r,t)),null!=o&&(t=a.relative(o,t)),this.setSourceContent(t,i))},this)}_validateMapping(e,t,r,i){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!t&&!r&&!i);else if(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&r);else throw Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:t,name:i}))}_serializeMappings(){let e,t,r,n,o=0,s=1,l=0,u=0,c=0,d=0,p="",f=this._mappings.toArray();for(let h=0,m=f.length;h<m;h++){if(t=f[h],e="",t.generatedLine!==s)for(o=0;t.generatedLine!==s;)e+=";",s++;else if(h>0){if(!a.compareByGeneratedPositionsInflated(t,f[h-1]))continue;e+=","}e+=i.encode(t.generatedColumn-o),o=t.generatedColumn,null!=t.source&&(n=this._sources.indexOf(t.source),e+=i.encode(n-d),d=n,e+=i.encode(t.originalLine-1-u),u=t.originalLine-1,e+=i.encode(t.originalColumn-l),l=t.originalColumn,null!=t.name&&(r=this._names.indexOf(t.name),e+=i.encode(r-c),c=r)),p+=e}return p}_generateSourcesContent(e,t){return e.map(function(e){if(!this._sourcesContents)return null;null!=t&&(e=a.relative(t,e));let r=a.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,r)?this._sourcesContents[r]:null},this)}toJSON(){let e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e}toString(){return JSON.stringify(this.toJSON())}}s.prototype._version=3,r.SourceMapGenerator=s},715591,(e,t,r)=>{r.GREATEST_LOWER_BOUND=1,r.LEAST_UPPER_BOUND=2,r.search=function(e,t,i,a){if(0===t.length)return -1;let n=function e(t,i,a,n,o,s){let l=Math.floor((i-t)/2)+t,u=o(a,n[l],!0);return 0===u?l:u>0?i-l>1?e(l,i,a,n,o,s):s==r.LEAST_UPPER_BOUND?i<n.length?i:-1:l:l-t>1?e(t,l,a,n,o,s):s==r.LEAST_UPPER_BOUND?l:t<0?-1:t}(-1,t.length,e,t,i,a||r.GREATEST_LOWER_BOUND);if(n<0)return -1;for(;n-1>=0&&0===i(t[n],t[n-1],!0);)--n;return n}},819443,(e,t,r)=>{"use strict";let i=e.r(522734),a=e.r(814747);t.exports=function(){return new Promise((e,t)=>{let r=a.join("/ROOT/node_modules/@remotion/renderer/node_modules/source-map/lib","mappings.wasm");i.readFile(r,null,(r,i)=>{r?t(r):e(i.buffer)})})},t.exports.initialize=e=>{console.debug("SourceMapConsumer.initialize is a no-op when running in node.js")}},292037,(e,t,r)=>{let i=e.r(819443);function a(){this.generatedLine=0,this.generatedColumn=0,this.lastGeneratedColumn=null,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}let n=null;t.exports=function(){if(n)return n;let e=[];return n=i().then(t=>WebAssembly.instantiate(t,{env:{mapping_callback(t,r,i,n,o,s,l,u,c,d){let p=new a;p.generatedLine=t+1,p.generatedColumn=r,i&&(p.lastGeneratedColumn=n-1),o&&(p.source=s,p.originalLine=l+1,p.originalColumn=u,c&&(p.name=d)),e[e.length-1](p)},start_all_generated_locations_for(){console.time("all_generated_locations_for")},end_all_generated_locations_for(){console.timeEnd("all_generated_locations_for")},start_compute_column_spans(){console.time("compute_column_spans")},end_compute_column_spans(){console.timeEnd("compute_column_spans")},start_generated_location_for(){console.time("generated_location_for")},end_generated_location_for(){console.timeEnd("generated_location_for")},start_original_location_for(){console.time("original_location_for")},end_original_location_for(){console.timeEnd("original_location_for")},start_parse_mappings(){console.time("parse_mappings")},end_parse_mappings(){console.timeEnd("parse_mappings")},start_sort_by_generated_location(){console.time("sort_by_generated_location")},end_sort_by_generated_location(){console.timeEnd("sort_by_generated_location")},start_sort_by_original_location(){console.time("sort_by_original_location")},end_sort_by_original_location(){console.timeEnd("sort_by_original_location")}}})).then(t=>({exports:t.instance.exports,withMappingCallback:(t,r)=>{e.push(t);try{r()}finally{e.pop()}}})).then(null,e=>{throw n=null,e})}},416043,(e,t,r)=>{let i=e.r(180578),a=e.r(715591),n=e.r(637897).ArraySet;e.r(604307);let o=e.r(819443),s=e.r(292037),l=Symbol("smcInternal");class u{constructor(e,t){if(e==l)return Promise.resolve(this);return function(e,t){let r=e;return"string"==typeof e&&(r=i.parseSourceMapInput(e)),Promise.resolve(null!=r.sections?new d(r,t):new c(r,t))}(e,t)}static initialize(e){o.initialize(e["lib/mappings.wasm"])}static fromSourceMap(e,t){var r,i;return r=e,i=t,c.fromSourceMap(r,i)}static async with(e,t,r){let i=await new u(e,t);try{return await r(i)}finally{i.destroy()}}eachMapping(e,t,r){throw Error("Subclasses must implement eachMapping")}allGeneratedPositionsFor(e){throw Error("Subclasses must implement allGeneratedPositionsFor")}destroy(){throw Error("Subclasses must implement destroy")}}u.prototype._version=3,u.GENERATED_ORDER=1,u.ORIGINAL_ORDER=2,u.GREATEST_LOWER_BOUND=1,u.LEAST_UPPER_BOUND=2,r.SourceMapConsumer=u;class c extends u{constructor(e,t){return super(l).then(r=>{let a=e;"string"==typeof e&&(a=i.parseSourceMapInput(e));let o=i.getArg(a,"version"),l=i.getArg(a,"sources").map(String),u=i.getArg(a,"names",[]),c=i.getArg(a,"sourceRoot",null),d=i.getArg(a,"sourcesContent",null),p=i.getArg(a,"mappings"),f=i.getArg(a,"file",null);if(o!=r._version)throw Error("Unsupported version: "+o);return r._sourceLookupCache=new Map,r._names=n.fromArray(u.map(String),!0),r._sources=n.fromArray(l,!0),r._absoluteSources=n.fromArray(r._sources.toArray().map(function(e){return i.computeSourceURL(c,e,t)}),!0),r.sourceRoot=c,r.sourcesContent=d,r._mappings=p,r._sourceMapURL=t,r.file=f,r._computedColumnSpans=!1,r._mappingsPtr=0,r._wasm=null,s().then(e=>(r._wasm=e,r))})}_findSourceIndex(e){let t=this._sourceLookupCache.get(e);if("number"==typeof t)return t;let r=i.computeSourceURL(null,e,this._sourceMapURL);if(this._absoluteSources.has(r)){let t=this._absoluteSources.indexOf(r);return this._sourceLookupCache.set(e,t),t}let a=i.computeSourceURL(this.sourceRoot,e,this._sourceMapURL);if(this._absoluteSources.has(a)){let t=this._absoluteSources.indexOf(a);return this._sourceLookupCache.set(e,t),t}return -1}static fromSourceMap(e,t){return new c(e.toString())}get sources(){return this._absoluteSources.toArray()}_getMappingsPtr(){return 0===this._mappingsPtr&&this._parseMappings(),this._mappingsPtr}_parseMappings(){let e=this._mappings,t=e.length,r=this._wasm.exports.allocate_mappings(t),i=new Uint8Array(this._wasm.exports.memory.buffer,r,t);for(let r=0;r<t;r++)i[r]=e.charCodeAt(r);let a=this._wasm.exports.parse_mappings(r);if(!a){let e=this._wasm.exports.get_last_error(),t=`Error parsing mappings (code ${e}): `;switch(e){case 1:t+="the mappings contained a negative line, column, source index, or name index";break;case 2:t+="the mappings contained a number larger than 2**32";break;case 3:t+="reached EOF while in the middle of parsing a VLQ";break;case 4:t+="invalid base 64 character while parsing a VLQ";break;default:t+="unknown error code"}throw Error(t)}this._mappingsPtr=a}eachMapping(e,t,r){let i=t||null,a=r||u.GENERATED_ORDER;this._wasm.withMappingCallback(t=>{null!==t.source&&(t.source=this._absoluteSources.at(t.source),null!==t.name&&(t.name=this._names.at(t.name))),this._computedColumnSpans&&null===t.lastGeneratedColumn&&(t.lastGeneratedColumn=1/0),e.call(i,t)},()=>{switch(a){case u.GENERATED_ORDER:this._wasm.exports.by_generated_location(this._getMappingsPtr());break;case u.ORIGINAL_ORDER:this._wasm.exports.by_original_location(this._getMappingsPtr());break;default:throw Error("Unknown order of iteration.")}})}allGeneratedPositionsFor(e){let t=i.getArg(e,"source"),r=i.getArg(e,"line"),a=e.column||0;if((t=this._findSourceIndex(t))<0)return[];if(r<1)throw Error("Line numbers must be >= 1");if(a<0)throw Error("Column numbers must be >= 0");let n=[];return this._wasm.withMappingCallback(e=>{let t=e.lastGeneratedColumn;this._computedColumnSpans&&null===t&&(t=1/0),n.push({line:e.generatedLine,column:e.generatedColumn,lastColumn:t})},()=>{this._wasm.exports.all_generated_locations_for(this._getMappingsPtr(),t,r-1,"column"in e,a)}),n}destroy(){0!==this._mappingsPtr&&(this._wasm.exports.free_mappings(this._mappingsPtr),this._mappingsPtr=0)}computeColumnSpans(){this._computedColumnSpans||(this._wasm.exports.compute_column_spans(this._getMappingsPtr()),this._computedColumnSpans=!0)}originalPositionFor(e){let t,r={generatedLine:i.getArg(e,"line"),generatedColumn:i.getArg(e,"column")};if(r.generatedLine<1)throw Error("Line numbers must be >= 1");if(r.generatedColumn<0)throw Error("Column numbers must be >= 0");let a=i.getArg(e,"bias",u.GREATEST_LOWER_BOUND);if(null==a&&(a=u.GREATEST_LOWER_BOUND),this._wasm.withMappingCallback(e=>t=e,()=>{this._wasm.exports.original_location_for(this._getMappingsPtr(),r.generatedLine-1,r.generatedColumn,a)}),t&&t.generatedLine===r.generatedLine){let e=i.getArg(t,"source",null);null!==e&&(e=this._absoluteSources.at(e));let r=i.getArg(t,"name",null);return null!==r&&(r=this._names.at(r)),{source:e,line:i.getArg(t,"originalLine",null),column:i.getArg(t,"originalColumn",null),name:r}}return{source:null,line:null,column:null,name:null}}hasContentsOfAllSources(){return!!this.sourcesContent&&this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e})}sourceContentFor(e,t){if(!this.sourcesContent)return null;let r=this._findSourceIndex(e);if(r>=0)return this.sourcesContent[r];if(t)return null;throw Error('"'+e+'" is not in the SourceMap.')}generatedPositionFor(e){let t,r=i.getArg(e,"source");if((r=this._findSourceIndex(r))<0)return{line:null,column:null,lastColumn:null};let a={source:r,originalLine:i.getArg(e,"line"),originalColumn:i.getArg(e,"column")};if(a.originalLine<1)throw Error("Line numbers must be >= 1");if(a.originalColumn<0)throw Error("Column numbers must be >= 0");let n=i.getArg(e,"bias",u.GREATEST_LOWER_BOUND);if(null==n&&(n=u.GREATEST_LOWER_BOUND),this._wasm.withMappingCallback(e=>t=e,()=>{this._wasm.exports.generated_location_for(this._getMappingsPtr(),a.source,a.originalLine-1,a.originalColumn,n)}),t&&t.source===a.source){let e=t.lastGeneratedColumn;return this._computedColumnSpans&&null===e&&(e=1/0),{line:i.getArg(t,"generatedLine",null),column:i.getArg(t,"generatedColumn",null),lastColumn:e}}return{line:null,column:null,lastColumn:null}}}c.prototype.consumer=u,r.BasicSourceMapConsumer=c;class d extends u{constructor(e,t){return super(l).then(r=>{let a=e;"string"==typeof e&&(a=i.parseSourceMapInput(e));let n=i.getArg(a,"version"),o=i.getArg(a,"sections");if(n!=r._version)throw Error("Unsupported version: "+n);let s={line:-1,column:0};return Promise.all(o.map(e=>{if(e.url)throw Error("Support for url field in sections not implemented.");let r=i.getArg(e,"offset"),a=i.getArg(r,"line"),n=i.getArg(r,"column");if(a<s.line||a===s.line&&n<s.column)throw Error("Section offsets must be ordered and non-overlapping.");return s=r,new u(i.getArg(e,"map"),t).then(e=>({generatedOffset:{generatedLine:a+1,generatedColumn:n+1},consumer:e}))})).then(e=>(r._sections=e,r))})}get sources(){let e=[];for(let t=0;t<this._sections.length;t++)for(let r=0;r<this._sections[t].consumer.sources.length;r++)e.push(this._sections[t].consumer.sources[r]);return e}originalPositionFor(e){let t={generatedLine:i.getArg(e,"line"),generatedColumn:i.getArg(e,"column")},r=a.search(t,this._sections,function(e,t){let r=e.generatedLine-t.generatedOffset.generatedLine;return r||e.generatedColumn-t.generatedOffset.generatedColumn}),n=this._sections[r];return n?n.consumer.originalPositionFor({line:t.generatedLine-(n.generatedOffset.generatedLine-1),column:t.generatedColumn-(n.generatedOffset.generatedLine===t.generatedLine?n.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}}hasContentsOfAllSources(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})}sourceContentFor(e,t){for(let t=0;t<this._sections.length;t++){let r=this._sections[t].consumer.sourceContentFor(e,!0);if(r)return r}if(t)return null;throw Error('"'+e+'" is not in the SourceMap.')}_findSectionIndex(e){for(let t=0;t<this._sections.length;t++){let{consumer:r}=this._sections[t];if(-1!==r._findSourceIndex(e))return t}return -1}generatedPositionFor(e){let t=this._findSectionIndex(i.getArg(e,"source")),r=t>=0?this._sections[t]:null,a=t>=0&&t+1<this._sections.length?this._sections[t+1]:null,n=r&&r.consumer.generatedPositionFor(e);if(n&&null!==n.line){let e=r.generatedOffset.generatedLine-1,t=r.generatedOffset.generatedColumn-1;return 1===n.line&&(n.column+=t,"number"==typeof n.lastColumn&&(n.lastColumn+=t)),n.lastColumn===1/0&&a&&n.line===a.generatedOffset.generatedLine&&(n.lastColumn=a.generatedOffset.generatedColumn-2),n.line+=e,n}return{line:null,column:null,lastColumn:null}}allGeneratedPositionsFor(e){let t=this._findSectionIndex(i.getArg(e,"source")),r=t>=0?this._sections[t]:null,a=t>=0&&t+1<this._sections.length?this._sections[t+1]:null;return r?r.consumer.allGeneratedPositionsFor(e).map(e=>{let t=r.generatedOffset.generatedLine-1,i=r.generatedOffset.generatedColumn-1;return 1===e.line&&(e.column+=i,"number"==typeof e.lastColumn&&(e.lastColumn+=i)),e.lastColumn===1/0&&a&&e.line===a.generatedOffset.generatedLine&&(e.lastColumn=a.generatedOffset.generatedColumn-2),e.line+=t,e}):[]}eachMapping(e,t,r){this._sections.forEach((i,a)=>{let n=a+1<this._sections.length?this._sections[a+1]:null,{generatedOffset:o}=i,s=o.generatedLine-1,l=o.generatedColumn-1;i.consumer.eachMapping(function(t){1===t.generatedLine&&(t.generatedColumn+=l,"number"==typeof t.lastGeneratedColumn&&(t.lastGeneratedColumn+=l)),t.lastGeneratedColumn===1/0&&n&&t.generatedLine===n.generatedOffset.generatedLine&&(t.lastGeneratedColumn=n.generatedOffset.generatedColumn-2),t.generatedLine+=s,e.call(this,t)},t,r)})}computeColumnSpans(){for(let e=0;e<this._sections.length;e++)this._sections[e].consumer.computeColumnSpans()}destroy(){for(let e=0;e<this._sections.length;e++)this._sections[e].consumer.destroy()}}r.IndexedSourceMapConsumer=d},949236,(e,t,r)=>{let i=e.r(170150).SourceMapGenerator,a=e.r(180578),n=/(\r?\n)/,o="$$$isSourceNode$$$";class s{constructor(e,t,r,i,a){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==r?null:r,this.name=null==a?null:a,this[o]=!0,null!=i&&this.add(i)}static fromStringWithSourceMap(e,t,r){let i,o=new s,l=e.split(n),u=0,c=function(){return e()+(e()||"");function e(){return u<l.length?l[u++]:void 0}},d=1,p=0,f=null;return t.eachMapping(function(e){if(null!==f)if(d<e.generatedLine)h(f,c()),d++,p=0;else{let t=(i=l[u]||"").substr(0,e.generatedColumn-p);l[u]=i.substr(e.generatedColumn-p),p=e.generatedColumn,h(f,t),f=e;return}for(;d<e.generatedLine;)o.add(c()),d++;p<e.generatedColumn&&(i=l[u]||"",o.add(i.substr(0,e.generatedColumn)),l[u]=i.substr(e.generatedColumn),p=e.generatedColumn),f=e},this),u<l.length&&(f&&h(f,c()),o.add(l.splice(u).join(""))),t.sources.forEach(function(e){let i=t.sourceContentFor(e);null!=i&&(null!=r&&(e=a.join(r,e)),o.setSourceContent(e,i))}),o;function h(e,t){if(null===e||void 0===e.source)o.add(t);else{let i=r?a.join(r,e.source):e.source;o.add(new s(e.originalLine,e.originalColumn,i,t,e.name))}}}add(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else if(e[o]||"string"==typeof e)e&&this.children.push(e);else throw TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this}prepend(e){if(Array.isArray(e))for(let t=e.length-1;t>=0;t--)this.prepend(e[t]);else if(e[o]||"string"==typeof e)this.children.unshift(e);else throw TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this}walk(e){let t;for(let r=0,i=this.children.length;r<i;r++)(t=this.children[r])[o]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})}join(e){let t,r,i=this.children.length;if(i>0){for(r=0,t=[];r<i-1;r++)t.push(this.children[r]),t.push(e);t.push(this.children[r]),this.children=t}return this}replaceRight(e,t){let r=this.children[this.children.length-1];return r[o]?r.replaceRight(e,t):"string"==typeof r?this.children[this.children.length-1]=r.replace(e,t):this.children.push("".replace(e,t)),this}setSourceContent(e,t){this.sourceContents[a.toSetString(e)]=t}walkSourceContents(e){for(let t=0,r=this.children.length;t<r;t++)this.children[t][o]&&this.children[t].walkSourceContents(e);let t=Object.keys(this.sourceContents);for(let r=0,i=t.length;r<i;r++)e(a.fromSetString(t[r]),this.sourceContents[t[r]])}toString(){let e="";return this.walk(function(t){e+=t}),e}toStringWithSourceMap(e){let t={code:"",line:1,column:0},r=new i(e),a=!1,n=null,o=null,s=null,l=null;return this.walk(function(e,i){t.code+=e,null!==i.source&&null!==i.line&&null!==i.column?((n!==i.source||o!==i.line||s!==i.column||l!==i.name)&&r.addMapping({source:i.source,original:{line:i.line,column:i.column},generated:{line:t.line,column:t.column},name:i.name}),n=i.source,o=i.line,s=i.column,l=i.name,a=!0):a&&(r.addMapping({generated:{line:t.line,column:t.column}}),n=null,a=!1);for(let o=0,s=e.length;o<s;o++)10===e.charCodeAt(o)?(t.line++,t.column=0,o+1===s?(n=null,a=!1):a&&r.addMapping({source:i.source,original:{line:i.line,column:i.column},generated:{line:t.line,column:t.column},name:i.name})):t.column++}),this.walkSourceContents(function(e,t){r.setSourceContent(e,t)}),{code:t.code,map:r}}}r.SourceNode=s},981318,(e,t,r)=>{r.SourceMapGenerator=e.r(170150).SourceMapGenerator,r.SourceMapConsumer=e.r(416043).SourceMapConsumer,r.SourceNode=e.r(949236).SourceNode},916525,(e,t,r)=>{t.exports=function(t){function r(e){let t,a,n,o=null;function s(...e){if(!s.enabled)return;let i=Number(new Date);s.diff=i-(t||i),s.prev=t,s.curr=i,t=i,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(t,i)=>{if("%%"===t)return"%";a++;let n=r.formatters[i];if("function"==typeof n){let r=e[a];t=n.call(s,r),e.splice(a,1),a--}return t}),r.formatArgs.call(s,e),(s.log||r.log).apply(s,e)}return s.namespace=e,s.useColors=r.useColors(),s.color=r.selectColor(e),s.extend=i,s.destroy=r.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(a!==r.namespaces&&(a=r.namespaces,n=r.enabled(e)),n),set:e=>{o=e}}),"function"==typeof r.init&&r.init(s),s}function i(e,t){let i=r(this.namespace+(void 0===t?":":t)+e);return i.log=this.log,i}function a(e,t){let r=0,i=0,a=-1,n=0;for(;r<e.length;)if(i<t.length&&(t[i]===e[r]||"*"===t[i]))"*"===t[i]?(a=i,n=r):r++,i++;else{if(-1===a)return!1;i=a+1,r=++n}for(;i<t.length&&"*"===t[i];)i++;return i===t.length}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){let e=[...r.names,...r.skips.map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){for(let t of(r.save(e),r.namespaces=e,r.names=[],r.skips=[],("string"==typeof e?e:"").trim().replace(/\s+/g,",").split(",").filter(Boolean)))"-"===t[0]?r.skips.push(t.slice(1)):r.names.push(t)},r.enabled=function(e){for(let t of r.skips)if(a(e,t))return!1;for(let t of r.names)if(a(e,t))return!0;return!1},r.humanize=e.r(141528),r.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(e=>{r[e]=t[e]}),r.names=[],r.skips=[],r.formatters={},r.selectColor=function(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return r.colors[Math.abs(t)%r.colors.length]},r.enable(r.load()),r}},855225,(e,t,r)=>{"use strict";t.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":1===e.length?"-":"--",i=t.indexOf(r+e),a=t.indexOf("--");return -1!==i&&(-1===a||i<a)}},181042,(e,t,r)=>{"use strict";let i;e.r(446786);let a=e.r(870722),n=e.r(855225),{env:o}=process;function s(e,t={}){var r;return 0!==(r=function(e,{streamIsTTY:t,sniffFlags:r=!0}={}){let a=function(){if("FORCE_COLOR"in o)return"true"===o.FORCE_COLOR?1:"false"===o.FORCE_COLOR?0:0===o.FORCE_COLOR.length?1:Math.min(Number.parseInt(o.FORCE_COLOR,10),3)}();void 0!==a&&(i=a);let s=r?i:a;if(0===s)return 0;if(r){if(n("color=16m")||n("color=full")||n("color=truecolor"))return 3;if(n("color=256"))return 2}if(e&&!t&&void 0===s)return 0;let l=s||0;if("dumb"===o.TERM)return l;if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(e=>e in o)||"codeship"===o.CI_NAME?1:l;if("TEAMCITY_VERSION"in o)return+!!/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION);if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){let e=Number.parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:l}(e,{streamIsTTY:e&&e.isTTY,...t}))&&{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}n("no-color")||n("no-colors")||n("color=false")||n("color=never")?i=0:(n("color")||n("colors")||n("color=true")||n("color=always"))&&(i=1),t.exports={supportsColor:s,stdout:s({isTTY:a.isatty(1)}),stderr:s({isTTY:a.isatty(2)})}},523440,(e,t,r)=>{let i=e.r(870722),a=e.r(224361);r.init=function(e){e.inspectOpts={};let t=Object.keys(r.inspectOpts);for(let i=0;i<t.length;i++)e.inspectOpts[t[i]]=r.inspectOpts[t[i]]},r.log=function(...e){return process.stderr.write(a.formatWithOptions(r.inspectOpts,...e)+"\n")},r.formatArgs=function(e){let{namespace:i,useColors:a}=this;if(a){let r=this.color,a="\x1b[3"+(r<8?r:"8;5;"+r),n=`  ${a};1m${i} \u001B[0m`;e[0]=n+e[0].split("\n").join("\n"+n),e.push(a+"m+"+t.exports.humanize(this.diff)+"\x1b[0m")}else e[0]=(r.inspectOpts.hideDate?"":new Date().toISOString()+" ")+i+" "+e[0]},r.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},r.load=function(){return process.env.DEBUG},r.useColors=function(){return"colors"in r.inspectOpts?!!r.inspectOpts.colors:i.isatty(process.stderr.fd)},r.destroy=a.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),r.colors=[6,2,3,4,5,1];try{let t=e.r(181042);t&&(t.stderr||t).level>=2&&(r.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}r.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase()),i=process.env[t];return i=!!/^(yes|on|true|enabled)$/i.test(i)||!/^(no|off|false|disabled)$/i.test(i)&&("null"===i?null:Number(i)),e[r]=i,e},{}),t.exports=e.r(916525)(r);let{formatters:n}=t.exports;n.o=function(e){return this.inspectOpts.colors=this.useColors,a.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},n.O=function(e){return this.inspectOpts.colors=this.useColors,a.inspect(e,this.inspectOpts)}},328452,(e,t,r)=>{let i;r.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let i=0,a=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(i++,"%c"===e&&(a=i))}),e.splice(a,0,r)},r.save=function(e){try{e?r.storage.setItem("debug",e):r.storage.removeItem("debug")}catch(e){}},r.load=function(){let e;try{e=r.storage.getItem("debug")||r.storage.getItem("DEBUG")}catch(e){}return!e&&"u">typeof process&&"env"in process&&(e=process.env.DEBUG),e},r.useColors=function(){let e;return!("u">typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("u">typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"u">typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"u">typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},r.storage=function(){try{return localStorage}catch(e){}}(),i=!1,r.destroy=()=>{i||(i=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))},r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],r.log=console.debug||console.log||(()=>{}),t.exports=e.r(916525)(r);let{formatters:a}=t.exports;a.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},817293,(e,t,r)=>{"u"<typeof process||"renderer"===process.type||process.__nwjs?t.exports=e.r(328452):t.exports=e.r(523440)},899636,(e,t,r)=>{t.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw TypeError("need wrapper function");return Object.keys(t).forEach(function(e){i[e]=t[e]}),i;function i(){for(var e=Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var i=t.apply(this,e),a=e[e.length-1];return"function"==typeof i&&i!==a&&Object.keys(a).forEach(function(e){i[e]=a[e]}),i}}},548727,(e,t,r)=>{var i=e.r(899636);function a(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function n(e){var t=function(){if(t.called)throw Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)};return t.onceError=(e.name||"Function wrapped with `once`")+" shouldn't be called more than once",t.called=!1,t}t.exports=i(a),t.exports.strict=i(n),a.proto=a(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return a(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return n(this)},configurable:!0})})},691682,(e,t,r)=>{var i=e.r(548727),a=function(){},n=e.g.Bare?queueMicrotask:process.nextTick.bind(process),o=function(e,t,r){if("function"==typeof t)return o(e,null,t);t||(t={}),r=i(r||a);var s=e._writableState,l=e._readableState,u=t.readable||!1!==t.readable&&e.readable,c=t.writable||!1!==t.writable&&e.writable,d=!1,p=function(){e.writable||f()},f=function(){c=!1,u||r.call(e)},h=function(){u=!1,c||r.call(e)},m=function(t){r.call(e,t?Error("exited with error code: "+t):null)},g=function(t){r.call(e,t)},v=function(){n(y)},y=function(){if(!d&&(u&&!(l&&l.ended&&!l.destroyed)||c&&!(s&&s.ended&&!s.destroyed)))return r.call(e,Error("premature close"))},b=function(){e.req.on("finish",f)};return e.setHeader&&"function"==typeof e.abort?(e.on("complete",f),e.on("abort",v),e.req?b():e.on("request",b)):c&&!s&&(e.on("end",p),e.on("close",p)),e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length&&e.on("exit",m),e.on("end",h),e.on("finish",f),!1!==t.error&&e.on("error",g),e.on("close",v),function(){d=!0,e.removeListener("complete",f),e.removeListener("abort",v),e.removeListener("request",b),e.req&&e.req.removeListener("finish",f),e.removeListener("end",p),e.removeListener("close",p),e.removeListener("finish",f),e.removeListener("exit",m),e.removeListener("end",h),e.removeListener("error",g),e.removeListener("close",v)}};t.exports=o},612121,(e,t,r)=>{var i,a=e.r(548727),n=e.r(691682);try{i=e.r(522734)}catch(e){}var o=function(){},s="u">typeof process&&/^v?\.0/.test(process.version),l=function(e){return"function"==typeof e},u=function(e,t,r,u){u=a(u);var c=!1;e.on("close",function(){c=!0}),n(e,{readable:t,writable:r},function(e){if(e)return u(e);c=!0,u()});var d=!1;return function(t){if(!c&&!d){if(d=!0,s&&i&&(e instanceof(i.ReadStream||o)||e instanceof(i.WriteStream||o))&&l(e.close))return e.close(o);if(e.setHeader&&l(e.abort))return e.abort();if(l(e.destroy))return e.destroy();u(t||Error("stream was destroyed"))}}},c=function(e){e()},d=function(e,t){return e.pipe(t)};t.exports=function(){var e,t=Array.prototype.slice.call(arguments),r=l(t[t.length-1]||o)&&t.pop()||o;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw Error("pump requires two streams per minimum");var i=t.map(function(a,n){var o=n<t.length-1;return u(a,o,n>0,function(t){e||(e=t),t&&i.forEach(c),o||(i.forEach(c),r(e))})});return t.reduce(d)}},228184,(e,t,r)=>{"use strict";let{PassThrough:i}=e.r(688947);t.exports=e=>{let{array:t}=e={...e},{encoding:r}=e,a="buffer"===r,n=!1;t?n=!(r||a):r=r||"utf8",a&&(r=null);let o=new i({objectMode:n});r&&o.setEncoding(r);let s=0,l=[];return o.on("data",e=>{l.push(e),n?s=l.length:s+=e.length}),o.getBufferedValue=()=>t?l:a?Buffer.concat(l,s):l.join(""),o.getBufferedLength=()=>s,o}},497399,(e,t,r)=>{"use strict";let{constants:i}=e.r(500874),a=e.r(612121),n=e.r(228184);class o extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function s(e,t){let r;if(!e)return Promise.reject(Error("Expected a stream"));let{maxBuffer:s}=t={maxBuffer:1/0,...t};return await new Promise((l,u)=>{let c=e=>{e&&r.getBufferedLength()<=i.MAX_LENGTH&&(e.bufferedData=r.getBufferedValue()),u(e)};(r=a(e,n(t),e=>{e?c(e):l()})).on("data",()=>{r.getBufferedLength()>s&&c(new o)})}),r.getBufferedValue()}t.exports=s,t.exports.default=s,t.exports.buffer=(e,t)=>s(e,{...t,encoding:"buffer"}),t.exports.array=(e,t)=>s(e,{...t,array:!0}),t.exports.MaxBufferError=o},913090,(e,t,r)=>{function i(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}function a(e){e.pending+=1;var t=!1;return function(i){if(t)throw Error("callback called twice");if(t=!0,e.error=e.error||i,e.pending-=1,e.waiting.length>0&&e.pending<e.max){var n;n=e,e.waiting.shift()(a(n))}else if(0===e.pending){var o=e.listeners;e.listeners=[],o.forEach(r)}};function r(t){t(e.error)}}t.exports=i,i.prototype.go=function(e){var t;this.pending<this.max?(t=this,e(a(t))):this.waiting.push(e)},i.prototype.wait=function(e){0===this.pending?e(this.error):this.listeners.push(e)},i.prototype.hold=function(){return a(this)}},716187,(e,t,r)=>{var i=e.r(522734),a=e.r(224361),n=e.r(688947),o=n.Readable,s=n.Writable,l=n.PassThrough,u=e.r(913090),c=e.r(427699).EventEmitter;function d(e,t){t=t||{},c.call(this),this.fd=e,this.pend=new u,this.pend.max=1,this.refCount=0,this.autoClose=!!t.autoClose}function p(e,t){t=t||{},o.call(this,t),this.context=e,this.context.ref(),this.start=t.start||0,this.endOffset=t.end,this.pos=this.start,this.destroyed=!1}function f(e,t){t=t||{},s.call(this,t),this.context=e,this.context.ref(),this.start=t.start||0,this.endOffset=null==t.end?1/0:+t.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}function h(e,t){c.call(this),t=t||{},this.refCount=0,this.buffer=e,this.maxChunkSize=t.maxChunkSize||Number.MAX_SAFE_INTEGER}r.createFromBuffer=function(e,t){return new h(e,t)},r.createFromFd=function(e,t){return new d(e,t)},r.BufferSlicer=h,r.FdSlicer=d,a.inherits(d,c),d.prototype.read=function(e,t,r,a,n){var o=this;o.pend.go(function(s){i.read(o.fd,e,t,r,a,function(e,t,r){s(),n(e,t,r)})})},d.prototype.write=function(e,t,r,a,n){var o=this;o.pend.go(function(s){i.write(o.fd,e,t,r,a,function(e,t,r){s(),n(e,t,r)})})},d.prototype.createReadStream=function(e){return new p(this,e)},d.prototype.createWriteStream=function(e){return new f(this,e)},d.prototype.ref=function(){this.refCount+=1},d.prototype.unref=function(){var e=this;if(e.refCount-=1,!(e.refCount>0)){if(e.refCount<0)throw Error("invalid unref");e.autoClose&&i.close(e.fd,function(t){t?e.emit("error",t):e.emit("close")})}},a.inherits(p,o),p.prototype._read=function(e){var t=this;if(!t.destroyed){var r=Math.min(t._readableState.highWaterMark,e);if(null!=t.endOffset&&(r=Math.min(r,t.endOffset-t.pos)),r<=0){t.destroyed=!0,t.push(null),t.context.unref();return}t.context.pend.go(function(e){if(t.destroyed)return e();var a=new Buffer(r);i.read(t.context.fd,a,0,r,t.pos,function(r,i){r?t.destroy(r):0===i?(t.destroyed=!0,t.push(null),t.context.unref()):(t.pos+=i,t.push(a.slice(0,i))),e()})})}},p.prototype.destroy=function(e){this.destroyed||(e=e||Error("stream destroyed"),this.destroyed=!0,this.emit("error",e),this.context.unref())},a.inherits(f,s),f.prototype._write=function(e,t,r){var a=this;if(!a.destroyed){if(a.pos+e.length>a.endOffset){var n=Error("maximum file length exceeded");n.code="ETOOBIG",a.destroy(),r(n);return}a.context.pend.go(function(t){if(a.destroyed)return t();i.write(a.context.fd,e,0,e.length,a.pos,function(e,i){e?(a.destroy(),t(),r(e)):(a.bytesWritten+=i,a.pos+=i,a.emit("progress"),t(),r())})})}},f.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())},a.inherits(h,c),h.prototype.read=function(e,t,r,i,a){var n=i+r,o=n-this.buffer.length,s=o>0?o:r;this.buffer.copy(e,t,i,n),setImmediate(function(){a(null,s)})},h.prototype.write=function(e,t,r,i,a){e.copy(this.buffer,i,t,t+r),setImmediate(function(){a(null,r,e)})},h.prototype.createReadStream=function(e){var t=new l(e=e||{});t.destroyed=!1,t.start=e.start||0,t.endOffset=e.end,t.pos=t.endOffset||this.buffer.length;for(var r=this.buffer.slice(t.start,t.pos),i=0;;){var a=i+this.maxChunkSize;if(a>=r.length){i<r.length&&t.write(r.slice(i,r.length));break}t.write(r.slice(i,a)),i=a}return t.end(),t.destroy=function(){t.destroyed=!0},t},h.prototype.createWriteStream=function(e){var t=this,r=new s(e=e||{});return r.start=e.start||0,r.endOffset=null==e.end?this.buffer.length:+e.end,r.bytesWritten=0,r.pos=r.start,r.destroyed=!1,r._write=function(e,i,a){if(!r.destroyed){var n=r.pos+e.length;if(n>r.endOffset){var o=Error("maximum file length exceeded");o.code="ETOOBIG",r.destroyed=!0,a(o);return}e.copy(t.buffer,r.pos,0,e.length),r.bytesWritten+=e.length,r.pos=n,r.emit("progress"),a()}},r.destroy=function(){r.destroyed=!0},r},h.prototype.ref=function(){this.refCount+=1},h.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw Error("invalid unref")}},709858,(e,t,r)=>{var i=e.r(500874).Buffer,a=[0,0x77073096,0xee0e612c,0x990951ba,0x76dc419,0x706af48f,0xe963a535,0x9e6495a3,0xedb8832,0x79dcb8a4,0xe0d5e91e,0x97d2d988,0x9b64c2b,0x7eb17cbd,0xe7b82d07,0x90bf1d91,0x1db71064,0x6ab020f2,0xf3b97148,0x84be41de,0x1adad47d,0x6ddde4eb,0xf4d4b551,0x83d385c7,0x136c9856,0x646ba8c0,0xfd62f97a,0x8a65c9ec,0x14015c4f,0x63066cd9,0xfa0f3d63,0x8d080df5,0x3b6e20c8,0x4c69105e,0xd56041e4,0xa2677172,0x3c03e4d1,0x4b04d447,0xd20d85fd,0xa50ab56b,0x35b5a8fa,0x42b2986c,0xdbbbc9d6,0xacbcf940,0x32d86ce3,0x45df5c75,0xdcd60dcf,0xabd13d59,0x26d930ac,0x51de003a,0xc8d75180,0xbfd06116,0x21b4f4b5,0x56b3c423,0xcfba9599,0xb8bda50f,0x2802b89e,0x5f058808,0xc60cd9b2,0xb10be924,0x2f6f7c87,0x58684c11,0xc1611dab,0xb6662d3d,0x76dc4190,0x1db7106,0x98d220bc,0xefd5102a,0x71b18589,0x6b6b51f,0x9fbfe4a5,0xe8b8d433,0x7807c9a2,0xf00f934,0x9609a88e,0xe10e9818,0x7f6a0dbb,0x86d3d2d,0x91646c97,0xe6635c01,0x6b6b51f4,0x1c6c6162,0x856530d8,0xf262004e,0x6c0695ed,0x1b01a57b,0x8208f4c1,0xf50fc457,0x65b0d9c6,0x12b7e950,0x8bbeb8ea,0xfcb9887c,0x62dd1ddf,0x15da2d49,0x8cd37cf3,0xfbd44c65,0x4db26158,0x3ab551ce,0xa3bc0074,0xd4bb30e2,0x4adfa541,0x3dd895d7,0xa4d1c46d,0xd3d6f4fb,0x4369e96a,0x346ed9fc,0xad678846,0xda60b8d0,0x44042d73,0x33031de5,0xaa0a4c5f,0xdd0d7cc9,0x5005713c,0x270241aa,0xbe0b1010,0xc90c2086,0x5768b525,0x206f85b3,0xb966d409,0xce61e49f,0x5edef90e,0x29d9c998,0xb0d09822,0xc7d7a8b4,0x59b33d17,0x2eb40d81,0xb7bd5c3b,0xc0ba6cad,0xedb88320,0x9abfb3b6,0x3b6e20c,0x74b1d29a,0xead54739,0x9dd277af,0x4db2615,0x73dc1683,0xe3630b12,0x94643b84,0xd6d6a3e,0x7a6a5aa8,0xe40ecf0b,0x9309ff9d,0xa00ae27,0x7d079eb1,0xf00f9344,0x8708a3d2,0x1e01f268,0x6906c2fe,0xf762575d,0x806567cb,0x196c3671,0x6e6b06e7,0xfed41b76,0x89d32be0,0x10da7a5a,0x67dd4acc,0xf9b9df6f,0x8ebeeff9,0x17b7be43,0x60b08ed5,0xd6d6a3e8,0xa1d1937e,0x38d8c2c4,0x4fdff252,0xd1bb67f1,0xa6bc5767,0x3fb506dd,0x48b2364b,0xd80d2bda,0xaf0a1b4c,0x36034af6,0x41047a60,0xdf60efc3,0xa867df55,0x316e8eef,0x4669be79,0xcb61b38c,0xbc66831a,0x256fd2a0,0x5268e236,0xcc0c7795,0xbb0b4703,0x220216b9,0x5505262f,0xc5ba3bbe,0xb2bd0b28,0x2bb45a92,0x5cb36a04,0xc2d7ffa7,0xb5d0cf31,0x2cd99e8b,0x5bdeae1d,0x9b64c2b0,0xec63f226,0x756aa39c,0x26d930a,0x9c0906a9,0xeb0e363f,0x72076785,0x5005713,0x95bf4a82,0xe2b87a14,0x7bb12bae,0xcb61b38,0x92d28e9b,0xe5d5be0d,0x7cdcefb7,0xbdbdf21,0x86d3d2d4,0xf1d4e242,0x68ddb3f8,0x1fda836e,0x81be16cd,0xf6b9265b,0x6fb077e1,0x18b74777,0x88085ae6,0xff0f6a70,0x66063bca,0x11010b5c,0x8f659eff,0xf862ae69,0x616bffd3,0x166ccf45,0xa00ae278,0xd70dd2ee,0x4e048354,0x3903b3c2,0xa7672661,0xd06016f7,0x4969474d,0x3e6e77db,0xaed16a4a,0xd9d65adc,0x40df0b66,936918e3,0xa9bcae53,0xdebb9ec5,0x47b2cf7f,0x30b5ffe9,0xbdbdf21c,0xcabac28a,0x53b39330,0x24b4a3a6,0xbad03605,0xcdd70693,0x54de5729,0x23d967bf,0xb3667a2e,0xc4614ab8,0x5d681b02,0x2a6f2b94,0xb40bbe37,0xc30c8ea1,0x5a05df1b,0x2d02ef8d];function n(e){if(i.isBuffer(e))return e;var t="function"==typeof i.alloc&&"function"==typeof i.from;if("number"==typeof e)return t?i.alloc(e):new i(e);if("string"==typeof e)return t?i.from(e):new i(e);throw Error("input must be buffer, number, or string, received "+typeof e)}function o(e,t){e=n(e),i.isBuffer(t)&&(t=t.readUInt32BE(0));for(var r=-1^~~t,o=0;o<e.length;o++)r=a[(r^e[o])&255]^r>>>8;return -1^r}function s(){var e,t;return e=o.apply(null,arguments),(t=n(4)).writeInt32BE(e,0),t}"u">typeof Int32Array&&(a=new Int32Array(a)),s.signed=function(){return o.apply(null,arguments)},s.unsigned=function(){return o.apply(null,arguments)>>>0},t.exports=s},473228,(e,t,r)=>{var i,a=e.r(522734),n=e.r(406461),o=e.r(716187),s=e.r(709858),l=e.r(224361),u=e.r(427699).EventEmitter,c=e.r(688947).Transform,d=e.r(688947).PassThrough,p=e.r(688947).Writable;function f(e,t,r){"function"==typeof t&&(r=t,t=null),null==t&&(t={}),null==t.autoClose&&(t.autoClose=!1),null==t.lazyEntries&&(t.lazyEntries=!1),null==t.decodeStrings&&(t.decodeStrings=!0),null==t.validateEntrySizes&&(t.validateEntrySizes=!0),null==t.strictFileNames&&(t.strictFileNames=!1),null==r&&(r=T),a.fstat(e,function(i,a){if(i)return r(i);h(o.createFromFd(e,{autoClose:!0}),a.size,t,r)})}function h(e,t,r,a){"function"==typeof r&&(a=r,r=null),null==r&&(r={}),null==r.autoClose&&(r.autoClose=!0),null==r.lazyEntries&&(r.lazyEntries=!1),null==r.decodeStrings&&(r.decodeStrings=!0);var n=!!r.decodeStrings;if(null==r.validateEntrySizes&&(r.validateEntrySizes=!0),null==r.strictFileNames&&(r.strictFileNames=!1),null==a&&(a=T),"number"!=typeof t)throw Error("expected totalSize parameter to be a number");if(t>Number.MAX_SAFE_INTEGER)throw Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");e.ref();var o=Math.min(65557,t),s=i(o),l=t-s.length;w(e,s,0,o,l,function(u){if(u)return a(u);for(var c=o-22;c>=0;c-=1)if(0x6054b50===s.readUInt32LE(c)){var d=s.slice(c),p=d.readUInt16LE(4);if(0!==p)return a(Error("multi-disk zip files are not supported: found disk number: "+p));var f=d.readUInt16LE(10),h=d.readUInt32LE(16),g=d.readUInt16LE(20),v=d.length-22;if(g!==v)return a(Error("invalid comment length. expected: "+v+". found: "+g));var y=n?E(d,22,d.length,!1):d.slice(22);if(65535!==f&&0xffffffff!==h)return a(null,new m(e,h,t,f,y,r.autoClose,r.lazyEntries,n,r.validateEntrySizes,r.strictFileNames));var b=i(20),x=l+c-b.length;w(e,b,0,b.length,x,function(o){if(o)return a(o);if(0x7064b50!==b.readUInt32LE(0))return a(Error("invalid zip64 end of central directory locator signature"));var s=_(b,8),l=i(56);w(e,l,0,l.length,s,function(i){return i?a(i):0x6064b50!==l.readUInt32LE(0)?a(Error("invalid zip64 end of central directory record signature")):(f=_(l,32),h=_(l,48),a(null,new m(e,h,t,f,y,r.autoClose,r.lazyEntries,n,r.validateEntrySizes,r.strictFileNames)))})});return}a(Error("end of central directory record signature not found"))})}function m(e,t,r,i,a,n,o,s,l,c){var d=this;u.call(d),d.reader=e,d.reader.on("error",function(e){v(d,e)}),d.reader.once("close",function(){d.emit("close")}),d.readEntryCursor=t,d.fileSize=r,d.entryCount=i,d.comment=a,d.entriesRead=0,d.autoClose=!!n,d.lazyEntries=!!o,d.decodeStrings=!!s,d.validateEntrySizes=!!l,d.strictFileNames=!!c,d.isOpen=!0,d.emittedError=!1,d.lazyEntries||d._readEntry()}function g(e,t){e.autoClose&&e.close(),v(e,t)}function v(e,t){e.emittedError||(e.emittedError=!0,e.emit("error",t))}function y(){}function b(e,t){return new Date((e>>9&127)+1980,(e>>5&15)-1,31&e,t>>11&31,t>>5&63,(31&t)*2,0)}function x(e){return -1!==e.indexOf("\\")?"invalid characters in fileName: "+e:/^[a-zA-Z]:/.test(e)||/^\//.test(e)?"absolute path: "+e:-1!==e.split("/").indexOf("..")?"invalid relative path: "+e:null}function w(e,t,r,a,n,o){if(0===a)return setImmediate(function(){o(null,i(0))});e.read(t,r,a,n,function(e,t){return e?o(e):t<a?o(Error("unexpected EOF")):void o()})}function S(e){c.call(this),this.actualByteCount=0,this.expectedByteCount=e}function k(){u.call(this),this.refCount=0}function C(e){d.call(this),this.context=e,this.context.ref(),this.unreffedYet=!1}function E(e,t,r,i){if(i)return e.toString("utf8",t,r);for(var a="",n=t;n<r;n++)a+="\0 !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"[e[n]];return a}function _(e,t){var r=e.readUInt32LE(t);return 0x100000000*e.readUInt32LE(t+4)+r}function T(e){if(e)throw e}r.open=function(e,t,r){"function"==typeof t&&(r=t,t=null),null==t&&(t={}),null==t.autoClose&&(t.autoClose=!0),null==t.lazyEntries&&(t.lazyEntries=!1),null==t.decodeStrings&&(t.decodeStrings=!0),null==t.validateEntrySizes&&(t.validateEntrySizes=!0),null==t.strictFileNames&&(t.strictFileNames=!1),null==r&&(r=T),a.open(e,"r",function(e,i){if(e)return r(e);f(i,t,function(e,t){e&&a.close(i,T),r(e,t)})})},r.fromFd=f,r.fromBuffer=function(e,t,r){"function"==typeof t&&(r=t,t=null),null==t&&(t={}),t.autoClose=!1,null==t.lazyEntries&&(t.lazyEntries=!1),null==t.decodeStrings&&(t.decodeStrings=!0),null==t.validateEntrySizes&&(t.validateEntrySizes=!0),null==t.strictFileNames&&(t.strictFileNames=!1),h(o.createFromBuffer(e,{maxChunkSize:65536}),e.length,t,r)},r.fromRandomAccessReader=h,r.dosDateTimeToDate=b,r.validateFileName=x,r.ZipFile=m,r.Entry=y,r.RandomAccessReader=k,l.inherits(m,u),m.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.reader.unref())},m.prototype.readEntry=function(){if(!this.lazyEntries)throw Error("readEntry() called without lazyEntries:true");this._readEntry()},m.prototype._readEntry=function(){var e=this;if(e.entryCount===e.entriesRead)return void setImmediate(function(){e.autoClose&&e.close(),e.emittedError||e.emit("end")});if(!e.emittedError){var t=i(46);w(e.reader,t,0,t.length,e.readEntryCursor,function(r){if(r)return g(e,r);if(!e.emittedError){var a=new y,n=t.readUInt32LE(0);if(0x2014b50!==n)return g(e,Error("invalid central directory file header signature: 0x"+n.toString(16)));if(a.versionMadeBy=t.readUInt16LE(4),a.versionNeededToExtract=t.readUInt16LE(6),a.generalPurposeBitFlag=t.readUInt16LE(8),a.compressionMethod=t.readUInt16LE(10),a.lastModFileTime=t.readUInt16LE(12),a.lastModFileDate=t.readUInt16LE(14),a.crc32=t.readUInt32LE(16),a.compressedSize=t.readUInt32LE(20),a.uncompressedSize=t.readUInt32LE(24),a.fileNameLength=t.readUInt16LE(28),a.extraFieldLength=t.readUInt16LE(30),a.fileCommentLength=t.readUInt16LE(32),a.internalFileAttributes=t.readUInt16LE(36),a.externalFileAttributes=t.readUInt32LE(38),a.relativeOffsetOfLocalHeader=t.readUInt32LE(42),64&a.generalPurposeBitFlag)return g(e,Error("strong encryption is not supported"));e.readEntryCursor+=46,t=i(a.fileNameLength+a.extraFieldLength+a.fileCommentLength),w(e.reader,t,0,t.length,e.readEntryCursor,function(r){if(r)return g(e,r);if(!e.emittedError){var n=(2048&a.generalPurposeBitFlag)!=0;a.fileName=e.decodeStrings?E(t,0,a.fileNameLength,n):t.slice(0,a.fileNameLength);var o=a.fileNameLength+a.extraFieldLength,l=t.slice(a.fileNameLength,o);a.extraFields=[];for(var u=0;u<l.length-3;){var c=l.readUInt16LE(u+0),d=l.readUInt16LE(u+2),p=u+4,f=p+d;if(f>l.length)return g(e,Error("extra field length exceeds extra field buffer size"));var h=i(d);l.copy(h,0,p,f),a.extraFields.push({id:c,data:h}),u=f}if(a.fileComment=e.decodeStrings?E(t,o,o+a.fileCommentLength,n):t.slice(o,o+a.fileCommentLength),a.comment=a.fileComment,e.readEntryCursor+=t.length,e.entriesRead+=1,0xffffffff===a.uncompressedSize||0xffffffff===a.compressedSize||0xffffffff===a.relativeOffsetOfLocalHeader){for(var m=null,u=0;u<a.extraFields.length;u++){var v=a.extraFields[u];if(1===v.id){m=v.data;break}}if(null==m)return g(e,Error("expected zip64 extended information extra field"));var y=0;if(0xffffffff===a.uncompressedSize){if(y+8>m.length)return g(e,Error("zip64 extended information extra field does not include uncompressed size"));a.uncompressedSize=_(m,y),y+=8}if(0xffffffff===a.compressedSize){if(y+8>m.length)return g(e,Error("zip64 extended information extra field does not include compressed size"));a.compressedSize=_(m,y),y+=8}if(0xffffffff===a.relativeOffsetOfLocalHeader){if(y+8>m.length)return g(e,Error("zip64 extended information extra field does not include relative header offset"));a.relativeOffsetOfLocalHeader=_(m,y),y+=8}}if(e.decodeStrings)for(var u=0;u<a.extraFields.length;u++){var v=a.extraFields[u];if(28789===v.id){if(v.data.length<6||1!==v.data.readUInt8(0))continue;var b=v.data.readUInt32LE(1);if(s.unsigned(t.slice(0,a.fileNameLength))!==b)continue;a.fileName=E(v.data,5,v.data.length,!0);break}}if(e.validateEntrySizes&&0===a.compressionMethod){var w=a.uncompressedSize;if(a.isEncrypted()&&(w+=12),a.compressedSize!==w)return g(e,Error("compressed/uncompressed size mismatch for stored file: "+a.compressedSize+" != "+a.uncompressedSize))}if(e.decodeStrings){e.strictFileNames||(a.fileName=a.fileName.replace(/\\/g,"/"));var S=x(a.fileName,e.validateFileNameOptions);if(null!=S)return g(e,Error(S))}e.emit("entry",a),e.lazyEntries||e._readEntry()}})}})}},m.prototype.openReadStream=function(e,t,r){var a=this,o=0,s=e.compressedSize;if(null==r)r=t,t={};else{if(null!=t.decrypt){if(!e.isEncrypted())throw Error("options.decrypt can only be specified for encrypted entries");if(!1!==t.decrypt)throw Error("invalid options.decrypt value: "+t.decrypt);if(e.isCompressed()&&!1!==t.decompress)throw Error("entry is encrypted and compressed, and options.decompress !== false")}if(null!=t.decompress){if(!e.isCompressed())throw Error("options.decompress can only be specified for compressed entries");if(!1!==t.decompress&&!0!==t.decompress)throw Error("invalid options.decompress value: "+t.decompress)}if(null!=t.start||null!=t.end){if(e.isCompressed()&&!1!==t.decompress)throw Error("start/end range not allowed for compressed entry without options.decompress === false");if(e.isEncrypted()&&!1!==t.decrypt)throw Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(null!=t.start){if((o=t.start)<0)throw Error("options.start < 0");if(o>e.compressedSize)throw Error("options.start > entry.compressedSize")}if(null!=t.end){if((s=t.end)<0)throw Error("options.end < 0");if(s>e.compressedSize)throw Error("options.end > entry.compressedSize");if(s<o)throw Error("options.end < options.start")}}if(!a.isOpen)return r(Error("closed"));if(e.isEncrypted()&&!1!==t.decrypt)return r(Error("entry is encrypted, and options.decrypt !== false"));a.reader.ref();var l=i(30);w(a.reader,l,0,l.length,e.relativeOffsetOfLocalHeader,function(i){try{if(i)return r(i);var u,c=l.readUInt32LE(0);if(0x4034b50!==c)return r(Error("invalid local file header signature: 0x"+c.toString(16)));var d=l.readUInt16LE(26),p=l.readUInt16LE(28),f=e.relativeOffsetOfLocalHeader+l.length+d+p;if(0===e.compressionMethod)u=!1;else{if(8!==e.compressionMethod)return r(Error("unsupported compression method: "+e.compressionMethod));u=null==t.decompress||t.decompress}var h=f+e.compressedSize;if(0!==e.compressedSize&&h>a.fileSize)return r(Error("file data overflows file bounds: "+f+" + "+e.compressedSize+" > "+a.fileSize));var m=a.reader.createReadStream({start:f+o,end:f+s}),g=m;if(u){var v=!1,y=n.createInflateRaw();m.on("error",function(e){setImmediate(function(){v||y.emit("error",e)})}),m.pipe(y),a.validateEntrySizes?(g=new S(e.uncompressedSize),y.on("error",function(e){setImmediate(function(){v||g.emit("error",e)})}),y.pipe(g)):g=y,g.destroy=function(){v=!0,y!==g&&y.unpipe(g),m.unpipe(y),m.destroy()}}r(null,g)}finally{a.reader.unref()}})},y.prototype.getLastModDate=function(){return b(this.lastModFileDate,this.lastModFileTime)},y.prototype.isEncrypted=function(){return(1&this.generalPurposeBitFlag)!=0},y.prototype.isCompressed=function(){return 8===this.compressionMethod},l.inherits(S,c),S.prototype._transform=function(e,t,r){if(this.actualByteCount+=e.length,this.actualByteCount>this.expectedByteCount)return r(Error("too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount));r(null,e)},S.prototype._flush=function(e){if(this.actualByteCount<this.expectedByteCount)return e(Error("not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount));e()},l.inherits(k,u),k.prototype.ref=function(){this.refCount+=1},k.prototype.unref=function(){var e=this;if(e.refCount-=1,!(e.refCount>0)){if(e.refCount<0)throw Error("invalid unref");e.close(function(t){if(t)return e.emit("error",t);e.emit("close")})}},k.prototype.createReadStream=function(e){var t=e.start,r=e.end;if(t===r){var i=new d;return setImmediate(function(){i.end()}),i}var a=this._readStreamForRange(t,r),n=!1,o=new C(this);a.on("error",function(e){setImmediate(function(){n||o.emit("error",e)})}),o.destroy=function(){a.unpipe(o),o.unref(),a.destroy()};var s=new S(r-t);return o.on("error",function(e){setImmediate(function(){n||s.emit("error",e)})}),s.destroy=function(){n=!0,o.unpipe(s),o.destroy()},a.pipe(o).pipe(s)},k.prototype._readStreamForRange=function(e,t){throw Error("not implemented")},k.prototype.read=function(e,t,r,i,a){var n=this.createReadStream({start:i,end:i+r}),o=new p,s=0;o._write=function(r,i,a){r.copy(e,t+s,0,r.length),s+=r.length,a()},o.on("finish",a),n.on("error",function(e){a(e)}),n.pipe(o)},k.prototype.close=function(e){setImmediate(e)},l.inherits(C,d),C.prototype._flush=function(e){this.unref(),e()},C.prototype.unref=function(e){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())},i="function"==typeof Buffer.allocUnsafe?function(e){return Buffer.allocUnsafe(e)}:function(e){return new Buffer(e)}},466560,(e,t,r)=>{let i=e.r(817293)("extract-zip"),{createWriteStream:a,promises:n}=e.r(522734),o=e.r(497399),s=e.r(814747),{promisify:l}=e.r(224361),u=e.r(688947),c=l(e.r(473228).open),d=l(u.pipeline);class p{constructor(e,t){this.zipPath=e,this.opts=t}async extract(){return i("opening",this.zipPath,"with opts",this.opts),this.zipfile=await c(this.zipPath,{lazyEntries:!0}),this.canceled=!1,new Promise((e,t)=>{this.zipfile.on("error",e=>{this.canceled=!0,t(e)}),this.zipfile.readEntry(),this.zipfile.on("close",()=>{this.canceled||(i("zip extraction complete"),e())}),this.zipfile.on("entry",async e=>{if(this.canceled)return void i("skipping entry",e.fileName,{cancelled:this.canceled});if(i("zipfile entry",e.fileName),e.fileName.startsWith("__MACOSX/"))return void this.zipfile.readEntry();let r=s.dirname(s.join(this.opts.dir,e.fileName));try{await n.mkdir(r,{recursive:!0});let t=await n.realpath(r);if(s.relative(this.opts.dir,t).split(s.sep).includes(".."))throw Error(`Out of bound path "${t}" found while processing file ${e.fileName}`);await this.extractEntry(e),i("finished processing",e.fileName),this.zipfile.readEntry()}catch(e){this.canceled=!0,this.zipfile.close(),t(e)}})})}async extractEntry(e){if(this.canceled)return void i("skipping entry extraction",e.fileName,{cancelled:this.canceled});this.opts.onEntry&&this.opts.onEntry(e,this.zipfile);let t=s.join(this.opts.dir,e.fileName),r=e.externalFileAttributes>>16&65535,u=(61440&r)==40960,c=(61440&r)==16384;!c&&e.fileName.endsWith("/")&&(c=!0);let p=e.versionMadeBy>>8;c||(c=0===p&&16===e.externalFileAttributes),i("extracting entry",{filename:e.fileName,isDir:c,isSymlink:u});let f=511&this.getExtractedMode(r,c),h=c?t:s.dirname(t),m={recursive:!0};if(c&&(m.mode=f),i("mkdir",{dir:h,...m}),await n.mkdir(h,m),c)return;i("opening read stream",t);let g=await l(this.zipfile.openReadStream.bind(this.zipfile))(e);if(u){let e=await o(g);i("creating symlink",e,t),await n.symlink(e,t)}else await d(g,a(t,{mode:f}))}getExtractedMode(e,t){let r=e;return 0===r&&(t?(this.opts.defaultDirMode&&(r=parseInt(this.opts.defaultDirMode,10)),r||(r=493)):(this.opts.defaultFileMode&&(r=parseInt(this.opts.defaultFileMode,10)),r||(r=420))),r}}t.exports=async function(e,t){if(i("creating target directory",t.dir),!s.isAbsolute(t.dir))throw Error("Target directory is expected to be absolute");return await n.mkdir(t.dir,{recursive:!0}),t.dir=await n.realpath(t.dir),new p(e,t).extract()}},812057,(e,t,r)=>{t.exports=e.x("node:util",()=>require("node:util"))},222260,(e,t,r)=>{"use strict";t.exports=e.r(442315).vendored["react-rsc"].ReactJsxRuntime},57328,(e,t,r)=>{t.exports=e.x("node:assert",()=>require("node:assert"))},59948,(e,t,r)=>{r.dir="/ROOT/node_modules/@remotion/compositor-darwin-arm64"},900275,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.stripAnsi=void 0,r.splitAnsi=function(e){let t=e.match(RegExp("[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)|(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))","g"));if(!t)return[e];let r=[],i=0,a=0;for(let n=0;n<t.length;n++){if(-1===(i=e.indexOf(t[n],i)))throw Error("Could not split string");a!==i&&r.push(e.slice(a,i)),a===i&&r.length?r[r.length-1]+=t[n]:(0===i&&r.push(""),r.push(t[n])),a=i+t[n].length}return r.push(e.slice(a)),r},r.stripAnsi=e=>{if("string"!=typeof e)throw TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(RegExp("[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)|(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))","g"),"")}},513210,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_BUFFER_STATE_DELAY_IN_MILLISECONDS=void 0,r.DEFAULT_BUFFER_STATE_DELAY_IN_MILLISECONDS=300},889599,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.formatBytes=void 0;let i=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],a=["B","kiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],n=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],o=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],s=(e,t,r)=>"string"==typeof t||Array.isArray(t)?e.toLocaleString(t,r):!0===t||void 0!==r?e.toLocaleString(void 0,r):String(e);r.formatBytes=(e,t={locale:"en-US",signed:!1,maximumFractionDigits:1})=>{let r;if(!Number.isFinite(e))throw TypeError(`Expected a finite number, got ${typeof e}: ${e}`);let l=(t={bits:!1,binary:!1,...t}).bits?t.binary?o:n:t.binary?a:i;if(t.signed&&0===e)return`0 $ {
            UNITS[0]
        }`;let u=e<0,c=u?"-":t.signed?"+":"";if(u&&(e=-e),void 0!==t.minimumFractionDigits&&(r={minimumFractionDigits:t.minimumFractionDigits}),void 0!==t.maximumFractionDigits&&(r={maximumFractionDigits:t.maximumFractionDigits,...r}),e<1)return c+s(e,t.locale,r)+" "+l[0];let d=Math.min(Math.floor(t.binary?Math.log(e)/Math.log(1024):Math.log10(e)/3),l.length-1);return c+s(Number(e/=(t.binary?1024:1e3)**d),t.locale,r)+" "+l[d]}},519677,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getDefaultOutLocation=void 0,r.getDefaultOutLocation=({compositionName:e,defaultExtension:t,type:r,compositionDefaultOutName:i,clientSideRender:a})=>{let n=null!=i?i:e;return"sequence"===r?a?n:`out/${n}`:a?`${n}.${t}`:`out/${n}.${t}`}},238570,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getLocationFromBuildError=void 0;let i=e.r(758927);r.getLocationFromBuildError=e=>{var t;if(!e.stack||!e.stack.startsWith("Error: Module build failed")&&!e.stack.startsWith("Error: Cannot find module"))return null;let r=e.stack.split("\n");return null!=(t=r.map(e=>{if(e.startsWith("Error"))return null;let t=e.match(/(.*):([0-9]+):([0-9]+): (.*)/);if(t)return{fileName:t[1],lineNumber:Number(t[2]),columnNumber:Number(t[3]),message:t[4]};let i=e.match(/\s+at(.*)\s\((.*)\)/);if(!i||e.includes("webpackMissingModule"))return null;let[,a]=i;return{columnNumber:0,lineNumber:1,message:r[0],fileName:a.trim()}}).filter(i.NoReactInternals.truthy)[0])?t:null}},441276,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getProjectName=void 0,r.getProjectName=({gitSource:e,resolvedRemotionRoot:t,basename:r})=>e?e.relativeFromGitRoot.trim()?r(e.relativeFromGitRoot.trim()):e.name:r(t)},754957,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hotMiddlewareOptions=void 0,r.hotMiddlewareOptions={path:"/__webpack_hmr",timeout:2e4,reload:!0,warn:!0,heartbeat:1e4}},655575,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_TIMELINE_TRACKS=void 0,r.DEFAULT_TIMELINE_TRACKS=90},275098,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.apiDocs=r.installableMap=r.descriptions=r.extraPackages=r.packages=void 0,r.packages=["svg-3d-engine","ai-improvements","animation-utils","animated-emoji","astro-example","babel-loader","bugs","bundler","cli","cloudrun","compositor-darwin-arm64","compositor-darwin-x64","compositor-linux-arm64-gnu","compositor-linux-arm64-musl","compositor-linux-x64-gnu","compositor-linux-x64-musl","compositor-win32-x64-msvc","core","create-video","discord-poster","docusaurus-plugin","docs","enable-scss","eslint-config","eslint-config-flat","eslint-config-internal","eslint-plugin","example-without-zod","example","fonts","gif","google-fonts","install-whisper-cpp","it-tests","react18-tests","lambda-go-example","lambda-go","lambda-php","lambda-ruby","lambda-python","lambda","lambda-client","layout-utils","rounded-text-box","licensing","lottie","mcp","media-utils","motion-blur","noise","paths","player-example","player","preload","renderer","rive","shapes","skia","promo-pages","streaming","serverless","serverless-client","skills","studio-server","studio-shared","studio","tailwind","tailwind-v4","test-utils","three","transitions","media-parser","zod-types","webcodecs","convert","captions","openai-whisper","compositor","example-videos","whisper-web","media","web-renderer","design"],r.extraPackages=[{name:"zod",version:"3.22.3",description:"Schema validation library for defining component props",docsUrl:"https://www.remotion.dev/docs/schemas"},{name:"mediabunny",version:"1.29.0",description:"Multimedia library used by Remotion",docsUrl:"https://www.remotion.dev/docs/mediabunny/version"}],r.descriptions={compositor:"Rust binary for Remotion",player:"React component for embedding a Remotion preview into your app",cloudrun:"Render Remotion videos on Google Cloud Run",renderer:"Render Remotion videos using Node.js or Bun",cli:"Control Remotion features using the `npx remotion` command",core:"Make videos programmatically",lambda:"Render Remotion videos on AWS Lambda",bundler:"Bundle Remotion compositions using Webpack","studio-server":"Run a Remotion Studio with a server backend","install-whisper-cpp":"Helpers for installing and using Whisper.cpp","whisper-web":"Helpers for using Whisper.cpp in browser using WASM","google-fonts":"Use Google Fonts in Remotion",mcp:"Remotion's Model Context Protocol","media-utils":"Utilities for working with media files",lottie:"Include Lottie animations in Remotion",licensing:"Manage your Remotion.pro license","layout-utils":"Utilities for working with layouts","rounded-text-box":"Create a TikTok-like multiline text box SVG path with rounded corners",noise:"Noise generation functions","motion-blur":"Motion blur effect for Remotion",preload:"Preloads assets for use in Remotion",shapes:"Generate SVG shapes","zod-types":"Zod types for Remotion",gif:"Embed GIFs in a Remotion video","eslint-plugin":"Rules for writing Remotion code","eslint-config":"Default configuration for Remotion templates (ESLint <= 8)","eslint-config-flat":"Default configuration for Remotion templates (ESLint >= 9)","compositor-linux-x64-gnu":"Linux x64 binary for the Remotion Rust code","compositor-linux-x64-musl":"Linux x64 binary for the Remotion Rust code","compositor-darwin-x64":"MacOS x64 binary for the Remotion Rust code","compositor-darwin-arm64":"MacOS Apple Silicon binary for the Remotion Rust code","compositor-linux-arm64-gnu":"Linux ARM64 binary for the Remotion Rust code","compositor-linux-arm64-musl":"Linux ARM64 binary for the Remotion Rust code","babel-loader":"Babel loader for Remotion",fonts:"Helpers for loading local fonts into Remotion",transitions:"Library for creating transitions in Remotion","enable-scss":"Enable SCSS support in Remotion","create-video":"Create a new Remotion project","studio-shared":"Internal package for shared objects between the Studio backend and frontend",tailwind:"Enable TailwindCSS support in Remotion (TailwindCSS v3)","tailwind-v4":"Enable TailwindCSS support in Remotion (TailwindCSS v4)",streaming:"Utilities for streaming data between programs","media-parser":"A pure JavaScript library for parsing video files",rive:"Embed Rive animations in a Remotion video",paths:"Utilities for working with SVG paths",studio:"APIs for interacting with the Remotion Studio",skia:"Include React Native Skia components in a Remotion video",three:"Include React Three Fiber components in a Remotion video","astro-example":null,"lambda-go-example":null,"compositor-win32-x64-msvc":null,"animation-utils":"Helpers for animating CSS properties","test-utils":null,"example-without-zod":null,"lambda-go":null,example:null,"lambda-php":null,"lambda-client":null,bugs:null,docs:null,"it-tests":null,"react18-tests":null,"lambda-python":null,"lambda-ruby":null,"player-example":null,"ai-improvements":null,skills:null,"discord-poster":null,"docusaurus-plugin":null,"animated-emoji":"Google Fonts Animated Emojis as Remotion components",serverless:"A runtime for distributed rendering",webcodecs:"Media conversion in the browser",convert:"Video conversion tool - convert.remotion.dev",captions:"Primitives for dealing with captions","openai-whisper":"Work with the output of the OpenAI Whisper API","eslint-config-internal":"ESLint condig for Remotion's internal packages","example-videos":null,"promo-pages":null,"svg-3d-engine":"3D SVG extrusion effects","serverless-client":null,media:"Experimental WebCodecs-based media tags","web-renderer":"Render videos in the browser (not yet released)",design:"Design system"},r.installableMap={"svg-3d-engine":!1,"ai-improvements":!1,"animation-utils":!0,"animated-emoji":!0,"astro-example":!1,"babel-loader":!1,bugs:!1,bundler:!1,cli:!1,cloudrun:!0,"lambda-client":!1,"serverless-client":!1,"compositor-darwin-arm64":!1,"compositor-darwin-x64":!1,"compositor-linux-arm64-gnu":!1,"compositor-linux-arm64-musl":!1,"compositor-linux-x64-gnu":!1,"compositor-linux-x64-musl":!1,"compositor-win32-x64-msvc":!1,core:!1,"create-video":!1,"discord-poster":!1,"docusaurus-plugin":!1,docs:!1,"enable-scss":!0,"eslint-config":!1,"eslint-config-flat":!1,"eslint-config-internal":!1,"eslint-plugin":!1,"example-without-zod":!1,example:!1,fonts:!0,gif:!0,"google-fonts":!0,"install-whisper-cpp":!0,"whisper-web":!0,"it-tests":!1,"react18-tests":!1,"lambda-go-example":!1,"lambda-go":!1,"lambda-php":!1,"lambda-ruby":!1,"lambda-python":!1,lambda:!0,mcp:!0,"layout-utils":!0,"rounded-text-box":!0,licensing:!0,lottie:!0,"media-utils":!0,"motion-blur":!0,noise:!0,paths:!0,"player-example":!1,player:!0,preload:!0,renderer:!0,rive:!0,shapes:!0,skia:!0,skills:!1,"promo-pages":!1,streaming:!1,serverless:!1,"studio-server":!1,"studio-shared":!1,studio:!0,tailwind:!0,"tailwind-v4":!0,"test-utils":!1,three:!0,transitions:!0,"media-parser":!0,"zod-types":!0,webcodecs:!0,convert:!1,captions:!0,"openai-whisper":!0,compositor:!1,"example-videos":!1,media:!0,"web-renderer":!1,design:!1},r.apiDocs={player:"https://www.remotion.dev/docs/player",cloudrun:"https://www.remotion.dev/docs/cloudrun",renderer:"https://www.remotion.dev/docs/renderer",cli:"https://www.remotion.dev/docs/cli",core:"https://www.remotion.dev/docs/remotion",lambda:"https://www.remotion.dev/docs/lambda",bundler:"https://www.remotion.dev/docs/bundler","lambda-client":null,"serverless-client":null,"studio-server":null,"install-whisper-cpp":"https://www.remotion.dev/docs/install-whisper-cpp","whisper-web":"https://www.remotion.dev/docs/whisper-web","google-fonts":"https://www.remotion.dev/docs/google-fonts","media-utils":"https://www.remotion.dev/docs/media-utils",lottie:"https://www.remotion.dev/docs/lottie",licensing:"https://www.remotion.dev/docs/licensing","layout-utils":"https://www.remotion.dev/docs/layout-utils","rounded-text-box":"https://www.remotion.dev/docs/rounded-text-box",noise:"https://www.remotion.dev/docs/noise",mcp:"https://www.remotion.dev/docs/ai/mcp","motion-blur":"https://www.remotion.dev/docs/motion-blur",preload:"https://www.remotion.dev/docs/preload",shapes:"https://www.remotion.dev/docs/shapes","zod-types":"https://www.remotion.dev/docs/zod-types",gif:"https://www.remotion.dev/docs/gif","eslint-plugin":"https://www.remotion.dev/docs/brownfield#install-the-eslint-plugin","eslint-config":"https://www.remotion.dev/docs/brownfield#install-the-eslint-plugin","eslint-config-flat":"https://www.remotion.dev/docs/brownfield#install-the-eslint-plugin","compositor-linux-x64-gnu":null,"compositor-linux-x64-musl":null,"compositor-darwin-x64":null,"ai-improvements":null,"discord-poster":null,"docusaurus-plugin":null,"animation-utils":"https://www.remotion.dev/docs/animation-utils/","example-without-zod":null,"lambda-go":null,example:null,"lambda-php":null,bugs:null,docs:null,"it-tests":null,"react18-tests":null,"lambda-python":null,"lambda-ruby":"https://www.remotion.dev/docs/lambda/ruby","player-example":null,"astro-example":null,"lambda-go-example":null,"test-utils":null,"babel-loader":"https://www.remotion.dev/docs/legacy-babel","compositor-darwin-arm64":null,"compositor-linux-arm64-gnu":null,"compositor-linux-arm64-musl":null,"compositor-win32-x64-msvc":null,"enable-scss":"https://www.remotion.dev/docs/enable-scss/overview","create-video":"https://remotion.dev/templates","studio-shared":null,"media-parser":"https://www.remotion.dev/docs/media-parser",fonts:"https://www.remotion.dev/docs/fonts-api",paths:"https://www.remotion.dev/paths",rive:"https://www.remotion.dev/docs/rive",tailwind:"https://www.remotion.dev/docs/tailwind/tailwind","tailwind-v4":"https://www.remotion.dev/docs/tailwind/tailwind",skia:"https://www.remotion.dev/docs/skia",three:"https://www.remotion.dev/docs/three",streaming:null,serverless:null,skills:null,studio:"https://www.remotion.dev/docs/studio/api",transitions:"https://www.remotion.dev/transitions","animated-emoji":"https://www.remotion.dev/docs/animated-emoji",webcodecs:"https://remotion.dev/webcodecs",convert:"https://convert.remotion.dev",captions:"https://remotion.dev/docs/captions/api","openai-whisper":"https://www.remotion.dev/docs/openai-whisper","eslint-config-internal":null,compositor:null,"example-videos":null,"promo-pages":null,"svg-3d-engine":null,media:"https://remotion.dev/docs/media","web-renderer":"https://www.remotion.dev/docs/web-renderer/",design:"https://www.remotion.dev/design"}},419637,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SOURCE_MAP_ENDPOINT=void 0,r.SOURCE_MAP_ENDPOINT="/source-map-helper.wasm"},323405,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.stringifyDefaultProps=void 0;let i=e.r(758927),a=(e,t)=>t.some(t=>e.length===t.length&&e.every((e,r)=>!("[]"!==t[r]||Number.isNaN(Number(e)))||"{}"===t[r]&&"string"==typeof e||e===t[r]));r.stringifyDefaultProps=({props:e,enumPaths:t})=>{var r;let n;return JSON.stringify(e,(r=function(e,r,n){let o=this[e];return"string"==typeof o&&a(n,t)?`${o}__ADD_AS_CONST__`:a(n,t)?`__REMOVEQUOTE__${JSON.stringify(o)}__ADD_AS_LITERAL_CONST__`:"string"==typeof o&&o.startsWith(i.NoReactInternals.FILE_TOKEN)?`__REMOVEQUOTE____WRAP_IN_STATIC_FILE_START__${decodeURIComponent(o.replace(i.NoReactInternals.FILE_TOKEN,""))}__WRAP_IN_STATIC_FILE_END____REMOVEQUOTE__`:"string"==typeof o&&o.startsWith(i.NoReactInternals.DATE_TOKEN)?`__REMOVEQUOTE____WRAP_IN_DATE_START__${decodeURIComponent(o.replace(i.NoReactInternals.DATE_TOKEN,""))}__WRAP_IN_DATE_END____REMOVEQUOTE__`:r},n=new Map,function(e,t){let i=[n.get(this),e].flat(1);return t===Object(t)&&n.set(t,i),r.call(this,e,t,i.filter(e=>void 0!==e&&""!==e))})).replace(/"__REMOVEQUOTE__/g,"").replace(/__REMOVEQUOTE__"/g,"").replace(/__ADD_AS_CONST__"/g,'" as const').replace(/__ADD_AS_LITERAL_CONST__"/g," as const").replace(/__WRAP_IN_STATIC_FILE_START__/g,'staticFile("').replace(/__WRAP_IN_STATIC_FILE_END__/g,'")').replace(/__WRAP_IN_DATE_START__/g,'new Date("').replace(/__WRAP_IN_DATE_END__/g,'")')}},213637,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.stringifyDefaultProps=r.SOURCE_MAP_ENDPOINT=r.packages=r.installableMap=r.extraPackages=r.descriptions=r.apiDocs=r.DEFAULT_TIMELINE_TRACKS=r.hotMiddlewareOptions=r.getProjectName=r.getLocationFromBuildError=r.getDefaultOutLocation=r.formatBytes=r.DEFAULT_BUFFER_STATE_DELAY_IN_MILLISECONDS=r.stripAnsi=r.splitAnsi=void 0;var i=e.r(900275);Object.defineProperty(r,"splitAnsi",{enumerable:!0,get:function(){return i.splitAnsi}}),Object.defineProperty(r,"stripAnsi",{enumerable:!0,get:function(){return i.stripAnsi}});var a=e.r(513210);Object.defineProperty(r,"DEFAULT_BUFFER_STATE_DELAY_IN_MILLISECONDS",{enumerable:!0,get:function(){return a.DEFAULT_BUFFER_STATE_DELAY_IN_MILLISECONDS}});var n=e.r(889599);Object.defineProperty(r,"formatBytes",{enumerable:!0,get:function(){return n.formatBytes}});var o=e.r(519677);Object.defineProperty(r,"getDefaultOutLocation",{enumerable:!0,get:function(){return o.getDefaultOutLocation}});var s=e.r(238570);Object.defineProperty(r,"getLocationFromBuildError",{enumerable:!0,get:function(){return s.getLocationFromBuildError}});var l=e.r(441276);Object.defineProperty(r,"getProjectName",{enumerable:!0,get:function(){return l.getProjectName}});var u=e.r(754957);Object.defineProperty(r,"hotMiddlewareOptions",{enumerable:!0,get:function(){return u.hotMiddlewareOptions}});var c=e.r(655575);Object.defineProperty(r,"DEFAULT_TIMELINE_TRACKS",{enumerable:!0,get:function(){return c.DEFAULT_TIMELINE_TRACKS}});var d=e.r(275098);Object.defineProperty(r,"apiDocs",{enumerable:!0,get:function(){return d.apiDocs}}),Object.defineProperty(r,"descriptions",{enumerable:!0,get:function(){return d.descriptions}}),Object.defineProperty(r,"extraPackages",{enumerable:!0,get:function(){return d.extraPackages}}),Object.defineProperty(r,"installableMap",{enumerable:!0,get:function(){return d.installableMap}}),Object.defineProperty(r,"packages",{enumerable:!0,get:function(){return d.packages}});var p=e.r(419637);Object.defineProperty(r,"SOURCE_MAP_ENDPOINT",{enumerable:!0,get:function(){return p.SOURCE_MAP_ENDPOINT}});var f=e.r(323405);Object.defineProperty(r,"stringifyDefaultProps",{enumerable:!0,get:function(){return f.stringifyDefaultProps}})},925127,(e,t,r)=>{t.exports=e.x("node:worker_threads",()=>require("node:worker_threads"))},167530,(e,t,r)=>{t.exports=e.x("webpack-4283c545f21cca1c",()=>require("webpack-4283c545f21cca1c"))},695338,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.copyDir=o;let a=i(e.r(902157)),n=i(e.r(750227));async function o({src:e,dest:t,onSymlinkDetected:r,onProgress:i,copiedBytes:s=0,lastReportedProgress:l=0}){for(let u of(await a.default.promises.mkdir(t,{recursive:!0}),await a.default.promises.readdir(e,{withFileTypes:!0}))){let c=n.default.join(e,u.name),d=n.default.join(t,u.name);if(u.isDirectory())s=await o({src:c,dest:d,onSymlinkDetected:r,onProgress:i,copiedBytes:s,lastReportedProgress:l});else if(u.isSymbolicLink()){let t=await a.default.promises.realpath(c);r(u,e),await a.default.promises.symlink(t,d)}else{let[,{size:e}]=await Promise.all([a.default.promises.copyFile(c,d),a.default.promises.stat(c)]);(s+=e)-l>0xa00000&&(i(s),l=s)}}return s}},149579,(e,t,r)=>{"use strict";t.exports=e.r(442315).vendored["react-rsc"].ReactDOM},49019,e=>{"use strict";var t=e.i(347540),r=e.i(222260),i=e.i(149579),a=Object.defineProperty,n=(e,t)=>{for(var r in t)a(e,r,{get:t[r],enumerable:!0,configurable:!0,set:e=>t[r]=()=>e})};if("function"!=typeof t.createContext)throw Error(['Remotion requires React.createContext, but it is "undefined".','If you are in a React Server Component, turn it into a client component by adding "use client" at the top of the file.',"","Before:",'  import {useCurrentFrame} from "remotion";',"","After:",'  "use client";','  import {useCurrentFrame} from "remotion";'].join(`
`));var o=()=>({isStudio:!1,isRendering:!1,isPlayer:!1,isReadOnlyStudio:!1,isClientSideRendering:!1}),s=t.default.createElement,l=r.default.jsx,u=[],c=e=>new Proxy(e,{apply(e,t,r){if(u.includes(r[0])){let[i,a,...n]=r;return Reflect.apply(e,t,[i,{...a??{},stack:Error().stack},...n])}return Reflect.apply(e,t,r)}}),d=()=>{o().isStudio&&(t.default.createElement=c(s),r.default.jsx=c(l))},p=e=>{u.push(e),d()},f=(0,t.createContext)(!1),h=()=>(0,t.useContext)(f);function m(e){return!!e}var g="4.0.410",v=({className:e,classPrefix:t,type:r})=>{if(!e)return!1;if("exact"===r){let r=e.split(" ");return t.some(e=>r.some(t=>t.trim()===e||t.trim().endsWith(`:${e}`)||t.trim().endsWith(`!${e}`)))}return t.some(t=>e.startsWith(t)||e.includes(` ${t}`)||e.includes(`!${t}`)||e.includes(`:${t}`))},y=(0,t.forwardRef)((e,i)=>{let{style:a,...n}=e,o=(0,t.useMemo)(()=>({position:"absolute",top:v({className:n.className,classPrefix:["top-","inset-"],type:"prefix"})?void 0:0,left:v({className:n.className,classPrefix:["left-","inset-"],type:"prefix"})?void 0:0,right:v({className:n.className,classPrefix:["right-","inset-"],type:"prefix"})?void 0:0,bottom:v({className:n.className,classPrefix:["bottom-","inset-"],type:"prefix"})?void 0:0,width:v({className:n.className,classPrefix:["w-"],type:"prefix"})?void 0:"100%",height:v({className:n.className,classPrefix:["h-"],type:"prefix"})?void 0:"100%",display:v({className:n.className,classPrefix:["block","inline-block","inline","flex","inline-flex","flow-root","grid","inline-grid","contents","list-item","hidden"],type:"exact"})?void 0:"flex",flexDirection:v({className:n.className,classPrefix:["flex-row","flex-col","flex-row-reverse","flex-col-reverse"],type:"exact"})?void 0:"column",...a}),[n.className,a]);return(0,r.jsx)("div",{ref:i,style:o,...n})}),b=(0,t.createContext)(null),x=t.default.createContext({registerSequence:()=>{throw Error("SequenceManagerContext not initialized")},unregisterSequence:()=>{throw Error("SequenceManagerContext not initialized")},sequences:[]}),w=t.default.createContext({hidden:{},setHidden:()=>{throw Error("SequenceVisibilityToggle not initialized")}}),S=({children:e})=>{let[i,a]=(0,t.useState)([]),[n,o]=(0,t.useState)({}),s=(0,t.useCallback)(e=>{a(t=>[...t,e])},[]),l=(0,t.useCallback)(e=>{a(t=>t.filter(t=>t.id!==e))},[]),u=(0,t.useMemo)(()=>({registerSequence:s,sequences:i,unregisterSequence:l}),[s,i,l]),c=(0,t.useMemo)(()=>({hidden:n,setHidden:o}),[n]);return(0,r.jsx)(x.Provider,{value:u,children:(0,r.jsx)(w.Provider,{value:c,children:e})})};function k(e){let t=e+0x6d2b79f5;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/0x100000000}var C=(e,t)=>{if(void 0!==t)throw TypeError("random() takes only one argument");if(null===e)return Math.random();if("string"==typeof e)return k(function(e){let t=0,r=0;for(t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return r}(e));if("number"==typeof e)return k(1e10*e);throw Error("random() argument must be a number or a string")},E={};n(E,{useTimelineSetFrame:()=>ei,useTimelinePosition:()=>er,usePlayingState:()=>ea,persistCurrentFrame:()=>Y,getInitialFrameState:()=>ee,getFrameForComposition:()=>et});var _=t.default.createContext(null),T=()=>{let e=(0,t.useContext)(_),[r]=(0,t.useState)(()=>o());return e??r},P=(0,t.createContext)({compositions:[],folders:[],currentCompositionMetadata:null,canvasContent:null}),I=(0,t.createContext)({registerComposition:()=>{},unregisterComposition:()=>{},registerFolder:()=>{},unregisterFolder:()=>{},setCanvasContent:()=>{},updateCompositionDefaultProps:()=>{},onlyRenderComposition:null}),A=(0,t.createContext)({props:{},updateProps:()=>{throw Error("Not implemented")},resetUnsaved:()=>{throw Error("Not implemented")}}),O=t.default.createRef(),M=t.default.createRef(),F=({children:e})=>{let[i,a]=t.default.useState({}),n=(0,t.useCallback)(({defaultProps:e,id:t,newProps:r})=>{a(i=>({...i,[t]:"function"==typeof r?r(i[t]??e):r}))},[]),o=(0,t.useCallback)(e=>{a(t=>{if(t[e]){let r={...t};return delete r[e],r}return t})},[]);(0,t.useImperativeHandle)(O,()=>({getProps:()=>i,setProps:a}),[i]);let s=(0,t.useMemo)(()=>({props:i,updateProps:n,resetUnsaved:o}),[i,o,n]);return(0,r.jsx)(A.Provider,{value:s,children:e})},R="remotion-date:",D="remotion-file:",j=e=>o().isStudio?JSON.parse((({data:e,indent:t,staticBase:r})=>{let i=!1,a=!1,n=!1,o=!1;try{return{serializedString:JSON.stringify(e,function(e,t){let s=this[e];return s instanceof Date?(i=!0,`${R}${s.toISOString()}`):s instanceof Map?(n=!0,t):s instanceof Set?(o=!0,t):"string"==typeof s&&null!==r&&s.startsWith(r)?(a=!0,`${D}${s.replace(r+"/","")}`):t},t),customDateUsed:i,customFileUsed:a,mapUsed:n,setUsed:o}}catch(e){throw Error("Could not serialize the passed input props to JSON: "+e.message)}})({data:e,indent:2,staticBase:window.remotion_staticBase}).serializedString,(e,t)=>"string"==typeof t&&t.startsWith(R)?new Date(t.replace(R,"")):"string"==typeof t&&t.startsWith(D)?`${window.remotion_staticBase}/${t.replace(D,"")}`:t):e,L=!1,B=()=>(L||(L=!0,console.warn("Called `getInputProps()` on the server. This function is not available server-side and has returned an empty object."),console.warn("To hide this warning, don't call this function on the server:"),console.warn("  typeof window === 'undefined' ? {} : getInputProps()")),{}),N=(0,t.createContext)({getNonce:()=>0,fastRefreshes:0,manualRefreshes:0}),$=(0,t.createContext)({increaseManualRefreshes:()=>{}}),z=()=>{let e=(0,t.useContext)(N),[r,i]=(0,t.useState)(()=>e.getNonce()),a=(0,t.useRef)(e);return(0,t.useEffect)(()=>{a.current!==e&&(a.current=e,i(e.getNonce))},[e]),r},U=["h264","h265","vp8","vp9","mp3","aac","wav","prores","h264-mkv","h264-ts","gif"];function V(e,t,r){if("number"!=typeof e)throw Error(`The "${t}" prop ${r} must be a number, but you passed a value of type ${typeof e}`);if(isNaN(e))throw TypeError(`The "${t}" prop ${r} must not be NaN, but is NaN.`);if(!Number.isFinite(e))throw TypeError(`The "${t}" prop ${r} must be finite, but is ${e}.`);if(e%1!=0)throw TypeError(`The "${t}" prop ${r} must be an integer, but is ${e}.`);if(e<=0)throw TypeError(`The "${t}" prop ${r} must be positive, but got ${e}.`)}function H(e,t){let{allowFloats:r,component:i}=t;if(void 0===e)throw Error(`The "durationInFrames" prop ${i} is missing.`);if("number"!=typeof e)throw Error(`The "durationInFrames" prop ${i} must be a number, but you passed a value of type ${typeof e}`);if(e<=0)throw TypeError(`The "durationInFrames" prop ${i} must be positive, but got ${e}.`);if(!r&&e%1!=0)throw TypeError(`The "durationInFrames" prop ${i} must be an integer, but got ${e}.`);if(!Number.isFinite(e))throw TypeError(`The "durationInFrames" prop ${i} must be finite, but got ${e}.`)}function W(e,t,r){if("number"!=typeof e)throw Error(`"fps" must be a number, but you passed a value of type ${typeof e} ${t}`);if(!Number.isFinite(e))throw Error(`"fps" must be a finite, but you passed ${e} ${t}`);if(isNaN(e))throw Error(`"fps" must not be NaN, but got ${e} ${t}`);if(e<=0)throw TypeError(`"fps" must be positive, but got ${e} ${t}`);if(r&&e>50)throw TypeError("The FPS for a GIF cannot be higher than 50. Use the --every-nth-frame option to lower the FPS: https://remotion.dev/docs/render-as-gif")}var q=({calculated:e,compositionId:t,compositionFps:r,compositionHeight:i,compositionWidth:a,compositionDurationInFrames:n})=>{let o=`calculated by calculateMetadata() for the composition "${t}"`,s=`of the "<Composition />" component with the id "${t}"`,l=e?.width??a??void 0;V(l,"width",e?.width?o:s);let u=e?.height??i??void 0;V(u,"height",e?.height?o:s);let c=e?.fps??r??null;W(c,e?.fps?o:s,!1);let d=e?.durationInFrames??n??null;H(d,{allowFloats:!1,component:`of the "<Composition />" component with the id "${t}"`});let p=e?.defaultCodec;var f="defaultCodec";if(void 0!==p){if("string"!=typeof p)throw TypeError(`The "${f}" prop ${o} must be a string, but you passed a value of type ${typeof p}.`);if(!U.includes(p))throw Error(`The "${f}" prop ${o} must be one of ${U.join(", ")}, but you passed ${p}.`)}let h=e?.defaultOutName,m=e?.defaultVideoImageFormat;return{width:l,height:u,fps:c,durationInFrames:d,defaultCodec:p,defaultOutName:h,defaultVideoImageFormat:m,defaultPixelFormat:e?.defaultPixelFormat,defaultProResProfile:e?.defaultProResProfile}},G=({calculateMetadata:e,signal:t,defaultProps:r,inputProps:i,compositionId:a,compositionDurationInFrames:n,compositionFps:s,compositionHeight:l,compositionWidth:u})=>{let c=e?e({defaultProps:r,props:i,abortSignal:t,compositionId:a,isRendering:o().isRendering}):null;if(null!==c&&"object"==typeof c&&"then"in c)return c.then(e=>{let{height:t,width:o,durationInFrames:c,fps:d,defaultCodec:p,defaultOutName:f,defaultVideoImageFormat:h,defaultPixelFormat:m,defaultProResProfile:g}=q({calculated:e,compositionDurationInFrames:n,compositionFps:s,compositionHeight:l,compositionWidth:u,compositionId:a});return{width:o,height:t,fps:d,durationInFrames:c,id:a,defaultProps:j(r),props:j(e.props??i),defaultCodec:p??null,defaultOutName:f??null,defaultVideoImageFormat:h??null,defaultPixelFormat:m??null,defaultProResProfile:g??null}});let d=q({calculated:c,compositionDurationInFrames:n,compositionFps:s,compositionHeight:l,compositionWidth:u,compositionId:a});return null===c?{...d,id:a,defaultProps:j(r??{}),props:j(i),defaultCodec:null,defaultOutName:null,defaultVideoImageFormat:null,defaultPixelFormat:null,defaultProResProfile:null}:{...d,id:a,defaultProps:j(r??{}),props:j(c.props??i),defaultCodec:c.defaultCodec??null,defaultOutName:c.defaultOutName??null,defaultVideoImageFormat:c.defaultVideoImageFormat??null,defaultPixelFormat:c.defaultPixelFormat??null,defaultProResProfile:c.defaultProResProfile??null}},Z=(0,t.createContext)(null),K=(0,t.createRef)(),Q="remotion.propsUpdatedExternally",X=e=>{let r=(0,t.useContext)(Z),{props:i}=(0,t.useContext)(A),{compositions:a,canvasContent:n,currentCompositionMetadata:o}=(0,t.useContext)(P),s=n?.type==="composition"?n.compositionId:null,l=e??s,u=a.find(e=>e.id===l),c=(0,t.useMemo)(()=>u?i[u.id]??{}:{},[i,u]),d=T();return(0,t.useMemo)(()=>u?o?{type:"success",result:{...o,id:u.id,defaultProps:u.defaultProps??{}}}:u.calculateMetadata?r&&r[u.id]?r[u.id]:null:(H(u.durationInFrames,{allowFloats:!1,component:`in <Composition id="${u.id}">`}),W(u.fps,`in <Composition id="${u.id}">`,!1),V(u.width,"width",`in <Composition id="${u.id}">`),V(u.height,"height",`in <Composition id="${u.id}">`),{type:"success",result:{width:u.width,height:u.height,fps:u.fps,id:u.id,durationInFrames:u.durationInFrames,defaultProps:u.defaultProps??{},props:{...u.defaultProps??{},...c??{}},defaultCodec:null,defaultOutName:null,defaultVideoImageFormat:null,defaultPixelFormat:null,defaultProResProfile:null}}):null,[u,r,o,c,d.isPlayer])},J=()=>{let{canvasContent:e,compositions:r,currentCompositionMetadata:i}=(0,t.useContext)(P),a=r.find(t=>e?.type==="composition"&&t.id===e.compositionId),n=X(a?.id??null);return(0,t.useMemo)(()=>n&&"error"!==n.type&&"loading"!==n.type&&a?{...n.result,defaultProps:a.defaultProps??{},id:a.id,...i??{},component:a.component}:null,[i,n,a])},Y=e=>{localStorage.setItem("remotion.time-all",JSON.stringify(e))},ee=()=>JSON.parse(localStorage.getItem("remotion.time-all")??"{}"),et=e=>{let t=JSON.parse(localStorage.getItem("remotion.time-all")??"{}");return void 0!==t[e]?Number(t[e]):0},er=()=>{let e=J(),r=(0,t.useContext)(ex),i=T();if(!e)return 0;let a=r.frame[e.id]??(i.isPlayer?0:et(e.id));return Math.min(e.durationInFrames-1,a)},ei=()=>{let{setFrame:e}=(0,t.useContext)(eb);return e},ea=()=>{let{playing:e,imperativePlaying:r}=(0,t.useContext)(ex),{setPlaying:i}=(0,t.useContext)(eb);return(0,t.useMemo)(()=>[e,i,r],[r,e,i])},en=e=>{let t=e.stack??"";return t.startsWith("Error:")?t:`${e.message}
${t}`};function eo(e,t){let r;throw(t instanceof Error?0:+(null===t||"object"!=typeof t||!("stack"in t)||"string"!=typeof t.stack||!("message"in t)||"string"!=typeof t.message))?r="string"==typeof t?Error(t):Error("Rendering was cancelled"):(r=t).stack||(r.stack=Error(r.message).stack),e&&(e.remotion_cancelledError=en(r)),r}function es(e){return eo(void 0,e)}var el=["trace","verbose","info","warn","error"],eu=(e,t)=>el.indexOf(e)<=el.indexOf(t),ec=({args:e,logLevel:t,tag:r})=>{let i=[...e];return o().isRendering&&!o().isClientSideRendering&&i.unshift(Symbol.for(`__remotion_level_${t}`)),r&&o().isRendering&&!o().isClientSideRendering&&i.unshift(Symbol.for(`__remotion_tag_${r}`)),i},ed={trace:(e,...t)=>{if(eu(e.logLevel,"trace"))return console.debug(...ec({args:t,logLevel:"trace",tag:e.tag}))},verbose:(e,...t)=>{if(eu(e.logLevel,"verbose"))return console.debug(...ec({args:t,logLevel:"verbose",tag:e.tag}))},info:(e,...t)=>{if(eu(e.logLevel,"info"))return console.log(...ec({args:t,logLevel:"info",tag:e.tag}))},warn:(e,...t)=>{if(eu(e.logLevel,"warn"))return console.warn(...ec({args:t,logLevel:"warn",tag:e.tag}))},error:(e,...t)=>console.error(...ec({args:t,logLevel:"error",tag:e.tag}))},ep=(e,t)=>Math.random(),ef=e=>{},eh=(0,t.createContext)({logLevel:"info",mountTime:0}),em=()=>{let{logLevel:e}=t.useContext(eh);if(null===e)throw Error("useLogLevel must be used within a LogLevelProvider");return e},eg=()=>{let{mountTime:e}=t.useContext(eh);if(null===e)throw Error("useMountTime must be used within a LogLevelProvider");return e},ev=(0,t.createContext)(null),ey=()=>{let e=T(),r=(0,t.useContext)(ev)??void 0,i=em();return{delayRender:(0,t.useCallback)((t,i)=>r?(({scope:e,environment:t,label:r,options:i})=>{if("string"!=typeof r&&null!==r)throw Error("The label parameter of delayRender() must be a string or undefined, got: "+JSON.stringify(r));let a=Math.random();e.remotion_delayRenderHandles.push(a);let n=Error().stack?.replace(/^Error/g,"")??"";if(t.isRendering){let o=(i?.timeoutInMilliseconds??e.remotion_puppeteerTimeout??3e4)-2e3,s=(i?.retries??0)-(e.remotion_attempt-1);e.remotion_delayRenderTimeouts[a]={label:r??null,startTime:Date.now(),timeout:setTimeout(()=>{let i=["A delayRender()",r?`"${r}"`:null,`was called but not cleared after ${o}ms. See https://remotion.dev/docs/timeout for help.`,s>0?"Retries left: "+s:null,s>0?"- Rendering the frame will be retried.":null,"The delayRender was called:",n].filter(m).join(" ");t.isClientSideRendering?e.remotion_cancelledError=en(Error(i)):eo(e,Error(i))},o)}}return e.remotion_renderReady=!1,a})({scope:r,environment:e,label:t??null,options:i??{}}):Math.random(),[e,r]),continueRender:(0,t.useCallback)(t=>{r&&(({scope:e,handle:t,environment:r,logLevel:i})=>{if(void 0===t)throw TypeError("The continueRender() method must be called with a parameter that is the return value of delayRender(). No value was passed.");if("number"!=typeof t)throw TypeError("The parameter passed into continueRender() must be the return value of delayRender() which is a number. Got: "+JSON.stringify(t));e.remotion_delayRenderHandles=e.remotion_delayRenderHandles.filter(a=>{if(a===t){if(r.isRendering&&void 0!==e){if(!e.remotion_delayRenderTimeouts[t])return!1;let{label:r,startTime:a,timeout:n}=e.remotion_delayRenderTimeouts[t];clearTimeout(n);let o=[r?`"${r}"`:"A handle","handle was cleared after",`${Date.now()-a}ms`].filter(m).join(" ");ed.verbose({logLevel:i,tag:"delayRender()"},o),delete e.remotion_delayRenderTimeouts[t]}return!1}return!0}),0===e.remotion_delayRenderHandles.length&&(e.remotion_renderReady=!0)})({scope:r,handle:t,environment:e,logLevel:i})},[e,i,r]),cancelRender:(0,t.useCallback)(e=>eo(r??void 0,e),[r])}},eb=(0,t.createContext)({setFrame:()=>{throw Error("default")},setPlaying:()=>{throw Error("default")}}),ex=(0,t.createContext)({frame:{},playing:!1,playbackRate:1,rootId:"",imperativePlaying:{current:!1},setPlaybackRate:()=>{throw Error("default")},audioAndVideoTags:{current:[]}}),ew=({children:e,frameState:i})=>{let[a,n]=(0,t.useState)(!1),o=(0,t.useRef)(!1),[s,l]=(0,t.useState)(1),u=(0,t.useRef)([]),[c]=(0,t.useState)(()=>String(C(null))),[d,p]=(0,t.useState)(()=>ee()),f=i??d,{delayRender:h,continueRender:m}=ey(),g=(0,t.useMemo)(()=>({frame:f,playing:a,imperativePlaying:o,rootId:c,playbackRate:s,setPlaybackRate:l,audioAndVideoTags:u}),[f,s,a,c]),v=(0,t.useMemo)(()=>({setFrame:p,setPlaying:n}),[]);return(0,r.jsx)(ex.Provider,{value:g,children:(0,r.jsx)(eb.Provider,{value:v,children:e})})},eS=(0,t.createContext)(!1),ek=({children:e})=>(0,r.jsx)(eS.Provider,{value:!0,children:e}),eC=()=>{let e=(0,t.useContext)(b),r=e?.width??null,i=e?.height??null,a=e?.durationInFrames??null,n=J();return(0,t.useMemo)(()=>{if(!n)return null;let{id:e,durationInFrames:t,fps:o,height:s,width:l,defaultProps:u,props:c,defaultCodec:d,defaultOutName:p,defaultVideoImageFormat:f,defaultPixelFormat:h,defaultProResProfile:m}=n;return{id:e,width:r??l,height:i??s,fps:o,durationInFrames:a??t,defaultProps:u,props:c,defaultCodec:d,defaultOutName:p,defaultVideoImageFormat:f,defaultPixelFormat:h,defaultProResProfile:m}},[a,i,r,n])},eE=()=>{let e=eC(),r=(0,t.useContext)(eS),i=h();if(!e){if(i)throw Error("No video config found. Likely reasons:-- You are probably calling useVideoConfig() from outside the component passed to <Player />. See https://www.remotion.dev/docs/player/examples for how to set up the Player correctly.-- You have multiple versions of Remotion installed which causes the React context to get lost.");throw Error("No video config found. You are probably calling useVideoConfig() from a component which has not been registered as a <Composition />. See https://www.remotion.dev/docs/the-fundamentals#defining-compositions for more information.")}if(!r)throw Error("Called useVideoConfig() outside a Remotion composition.");return e},e_=()=>{let e=(0,t.useContext)(eS),r=T();if(!e){if(r.isPlayer)throw Error("useCurrentFrame can only be called inside a component that was passed to <Player>. See: https://www.remotion.dev/docs/player/examples");throw Error("useCurrentFrame() can only be called inside a component that was registered as a composition. See https://www.remotion.dev/docs/the-fundamentals#defining-compositions")}let i=er(),a=(0,t.useContext)(b);return i-(a?a.cumulatedFrom+a.relativeFrom:0)},eT=({frame:e,children:i,active:a=!0})=>{let n=e_(),o=eE();if(void 0===e)throw Error("The <Freeze /> component requires a 'frame' prop, but none was passed.");if("number"!=typeof e)throw Error(`The 'frame' prop of <Freeze /> must be a number, but is of type ${typeof e}`);if(Number.isNaN(e))throw Error("The 'frame' prop of <Freeze /> must be a real number, but it is NaN.");if(!Number.isFinite(e))throw Error(`The 'frame' prop of <Freeze /> must be a finite number, but it is ${e}.`);let s=(0,t.useMemo)(()=>"boolean"==typeof a?a:"function"==typeof a?a(n):void 0,[a,n]),l=(0,t.useContext)(ex),u=(0,t.useContext)(b),c=u?.relativeFrom??0,d=(0,t.useMemo)(()=>s?{...l,playing:!1,imperativePlaying:{current:!1},frame:{[o.id]:e+c}}:l,[s,l,o.id,e,c]),p=(0,t.useMemo)(()=>u?s?{...u,cumulatedFrom:0}:u:null,[u,s]);return(0,r.jsx)(ex.Provider,{value:d,children:(0,r.jsx)(b.Provider,{value:p,children:i})})},eP=(0,t.forwardRef)(({from:e=0,durationInFrames:i=1/0,children:a,name:n,height:o,width:s,showInTimeline:l=!0,_remotionInternalLoopDisplay:u,_remotionInternalStack:c,_remotionInternalPremountDisplay:d,_remotionInternalPostmountDisplay:p,...f},h)=>{let{layout:m="absolute-fill"}=f,[g]=(0,t.useState)(()=>String(Math.random())),v=(0,t.useContext)(b),{rootId:S}=(0,t.useContext)(ex),k=v?v.cumulatedFrom+v.relativeFrom:0,C=z();if("absolute-fill"!==m&&"none"!==m)throw TypeError(`The layout prop of <Sequence /> expects either "absolute-fill" or "none", but you passed: ${m}`);if("none"===m&&void 0!==f.style)throw TypeError('If layout="none", you may not pass a style.');if("number"!=typeof i)throw TypeError(`You passed to durationInFrames an argument of type ${typeof i}, but it must be a number.`);if(i<=0)throw TypeError(`durationInFrames must be positive, but got ${i}`);if("number"!=typeof e)throw TypeError(`You passed to the "from" props of your <Sequence> an argument of type ${typeof e}, but it must be a number.`);if(!Number.isFinite(e))throw TypeError(`The "from" prop of a sequence must be finite, but got ${e}.`);let E=er(),_=eE(),P=v?Math.min(v.durationInFrames-e,i):i,I=Math.max(0,Math.min(_.durationInFrames-e,P)),{registerSequence:A,unregisterSequence:O}=(0,t.useContext)(x),{hidden:M}=(0,t.useContext)(w),F=(0,t.useMemo)(()=>v?.premounting||!!f._remotionInternalIsPremounting,[f._remotionInternalIsPremounting,v?.premounting]),R=(0,t.useMemo)(()=>v?.postmounting||!!f._remotionInternalIsPostmounting,[f._remotionInternalIsPostmounting,v?.postmounting]),D=(0,t.useMemo)(()=>({cumulatedFrom:k,relativeFrom:e,durationInFrames:I,parentFrom:v?.relativeFrom??0,id:g,height:o??v?.height??null,width:s??v?.width??null,premounting:F,postmounting:R,premountDisplay:d??null,postmountDisplay:p??null}),[k,e,I,v,g,o,s,F,R,d,p]),j=(0,t.useMemo)(()=>n??"",[n]),L=T();(0,t.useEffect)(()=>{if(L.isStudio)return A({from:e,duration:I,id:g,displayName:j,parent:v?.id??null,type:"sequence",rootId:S,showInTimeline:l,nonce:C,loopDisplay:u,stack:c??null,premountDisplay:d??null,postmountDisplay:p??null}),()=>{O(g)}},[i,g,n,A,j,O,v?.id,I,S,e,l,C,u,c,d,p,L.isStudio]);let B=Math.ceil(k+e+i-1),N=E<k+e||E>B?null:a,$="none"===f.layout?void 0:f.style,U=(0,t.useMemo)(()=>({flexDirection:void 0,...s?{width:s}:{},...o?{height:o}:{},...$??{}}),[o,$,s]);if(null!==h&&"none"===m)throw TypeError('It is not supported to pass both a `ref` and `layout="none"` to <Sequence />.');return M[g]?null:(0,r.jsx)(b.Provider,{value:D,children:null===N?null:"none"===f.layout?N:(0,r.jsx)(y,{ref:h,style:U,className:f.className,children:N})})}),eI=(0,t.forwardRef)((e,i)=>{let a=e_();if("none"===e.layout)throw Error('`<Sequence>` with `premountFor` and `postmountFor` props does not support layout="none"');let{style:n,from:o=0,durationInFrames:s=1/0,premountFor:l=0,postmountFor:u=0,styleWhilePremounted:c,styleWhilePostmounted:d,...p}=e,f=Math.ceil(o+s-1),h=a<o&&a>=o-l,m=a>f&&a<=f+u,g=h?o:m?o+s-1:0,v=h||m,y=(0,t.useMemo)(()=>({...n,opacity:h||m?0:1,pointerEvents:h||m?"none":n?.pointerEvents??void 0,...h?c:{},...m?d:{}}),[n,h,m,c,d]);return(0,r.jsx)(eT,{frame:g,active:v,children:(0,r.jsx)(eA,{ref:i,from:o,durationInFrames:s,style:y,_remotionInternalPremountDisplay:l,_remotionInternalPostmountDisplay:u,_remotionInternalIsPremounting:h,_remotionInternalIsPostmounting:m,...p})})}),eA=(0,t.forwardRef)((e,t)=>{let i=T();return"none"!==e.layout&&!i.isRendering&&(e.premountFor||e.postmountFor)?(0,r.jsx)(eI,{...e,ref:t}):(0,r.jsx)(eP,{...e,ref:t})}),eO=t.default.forwardRef(({width:e,height:i,fit:a,className:n,style:o},s)=>{let l=(0,t.useRef)(null),u=(0,t.useCallback)(t=>{let r=l.current,n=e??t.displayWidth,o=i??t.displayHeight;if(!r)throw Error("Canvas ref is not set");let s=l.current?.getContext("2d");if(!s)throw Error("Could not get 2d context");r.width=n,r.height=o,s.drawImage(t,...((e,t,r)=>{switch(e){case"fill":return[0,0,t.width,t.height,0,0,r.width,r.height];case"contain":{let e=Math.min(r.width/t.width,r.height/t.height),i=(r.width-t.width*e)/2,a=(r.height-t.height*e)/2;return[0,0,t.width,t.height,i,a,t.width*e,t.height*e]}case"cover":{let e=Math.max(r.width/t.width,r.height/t.height),i=(r.width-t.width*e)/2,a=(r.height-t.height*e)/2;return[0,0,t.width,t.height,i,a,t.width*e,t.height*e]}default:throw Error("Unknown fit: "+e)}})(a,{height:t.displayHeight,width:t.displayWidth},{width:n,height:o}))},[a,i,e]);return(0,t.useImperativeHandle)(s,()=>({draw:u,getCanvas:()=>{if(!l.current)throw Error("Canvas ref is not set");return l.current},clear:()=>{let e=l.current?.getContext("2d");if(!e)throw Error("Could not get 2d context");e.clearRect(0,0,l.current.width,l.current.height)}}),[u]),(0,r.jsx)("canvas",{ref:l,className:n,style:o})}),eM=({loopBehavior:e,durationFound:t,timeInSec:r})=>"loop"===e?t?r%t:r:Math.min(r,t||1/0),eF=async({resolvedSrc:e,signal:t,currentTime:r,initialLoopBehavior:i})=>{if("u"<typeof ImageDecoder)throw Error("Your browser does not support the WebCodecs ImageDecoder API.");let a=await fetch(e,{signal:t}),{body:n}=a;if(!n)throw Error("Got no body");let o=new ImageDecoder({data:n,type:a.headers.get("Content-Type")||"image/gif"});await o.completed;let{selectedTrack:s}=o.tracks;if(!s)throw Error("No selected track");let l=[],u=null,c=async e=>{let t=l.find(t=>t.frameIndex===e);if(t&&t.frame)return t;let r=await o.decode({frameIndex:e,completeFramesOnly:!0});return t?t.frame=r.image:l.push({frame:r.image,frameIndex:e,timeInSeconds:r.image.timestamp/1e6}),{frame:r.image,frameIndex:e,timeInSeconds:r.image.timestamp/1e6}},d=async({timeInSec:e,loopBehavior:t})=>{let r=eM({durationFound:u,loopBehavior:t,timeInSec:e}),i=l.filter(e=>e.timeInSeconds<=r).map(e=>e.frameIndex).reduce((e,t)=>Math.max(e,t),0),a=i;for(;;){let e=await c(a);if(a++,!e.frame)throw Error("No frame found");if(!e.frame.duration||(a===s.frameCount&&null===u&&(u=(e.frame.timestamp+e.frame.duration)/1e6),e.timeInSeconds>r||a===s.frameCount))break}s.frameCount-i<3&&"loop"===t&&await c(0);let n=l.filter(e=>e.frame).sort((e,t)=>Math.abs(e.timeInSeconds-r)-Math.abs(t.timeInSeconds-r));for(let e=0;e<n.length;e++)e<5||(n[e].frame=null)};return await d({timeInSec:r,loopBehavior:i}),await d({timeInSec:r,loopBehavior:i}),{getFrame:async(e,t)=>{if(null!==u&&e>u&&"clear-after-finish"===t)return null;let r=eM({loopBehavior:t,durationFound:u,timeInSec:e});await d({timeInSec:r,loopBehavior:t});let i=l.filter(e=>e.frame).reduce((e,t)=>Math.abs(e.timeInSeconds-r)<Math.abs(t.timeInSeconds-r)?e:t);if(!i.frame)throw Error("No frame found");return i},frameCount:s.frameCount}},eR=(0,t.forwardRef)(({src:e,width:i,height:a,onError:n,loopBehavior:o="loop",playbackRate:s=1,fit:l="fill",...u},c)=>{let d=(0,t.useRef)({isMounted:!0});(0,t.useEffect)(()=>{let{current:e}=d;return e.isMounted=!0,()=>{e.isMounted=!1}},[]);let[p,f]=(0,t.useState)(null),{delayRender:h,continueRender:m}=ey(),[g]=(0,t.useState)(()=>h(`Rendering <AnimatedImage/> with src="${e}"`)),v=e_(),{fps:y}=eE(),b=v/s/y,x=(0,t.useRef)(b);x.current=b;let w=(0,t.useRef)(null);(0,t.useImperativeHandle)(c,()=>{let e=w.current?.getCanvas();if(!e)throw Error("Canvas ref is not set");return e},[]);let[S]=(0,t.useState)(()=>o);return(0,t.useEffect)(()=>{let t=new AbortController;return eF({resolvedSrc:e,signal:t.signal,currentTime:x.current,initialLoopBehavior:S}).then(e=>{f(e),m(g)}).catch(e=>{"AbortError"===e.name?m(g):n?(n?.(e),m(g)):es(e)}),()=>{t.abort()}},[e,g,n,S,m]),(0,t.useLayoutEffect)(()=>{if(!p)return;let t=h(`Rendering frame at ${b} of <AnimatedImage src="${e}"/>`);p.getFrame(b,o).then(e=>{d.current.isMounted&&(null===e?w.current?.clear():w.current?.draw(e.frame)),m(t)}).catch(e=>{n?(n(e),m(t)):es(e)})},[b,p,o,n,e,m,h]),(0,r.jsx)(eO,{ref:w,width:i,height:a,fit:l,...u})}),eD=e=>{if("artifact"===e.type){var t=e.filename;if("string"!=typeof t)throw TypeError(`The "filename" must be a string, but you passed a value of type ${typeof t}`);if(""===t.trim())throw Error("The `filename` must not be empty");if(!t.match(/^([0-9a-zA-Z-!_.*'()/:&$@=;+,?]+)/g))throw Error('The `filename` must match "/^([0-9a-zA-Z-!_.*\'()/:&$@=;+,?]+)/g". Use forward slashes only, even on Windows.');if("thumbnail"!==e.contentType){var r=e.content;if("string"!=typeof r&&!(r instanceof Uint8Array))throw TypeError(`The "content" must be a string or Uint8Array, but you passed a value of type ${typeof r}`);if("string"==typeof r&&""===r.trim())throw Error("The `content` must not be empty")}}},ej=(0,t.createContext)({registerRenderAsset:()=>{},unregisterRenderAsset:()=>{},renderAssets:[]}),eL=Symbol("Thumbnail"),eB=({filename:e,content:r,downloadBehavior:i})=>{let{registerRenderAsset:a,unregisterRenderAsset:n}=(0,t.useContext)(ej),o=T(),s=e_(),[l]=(0,t.useState)(()=>String(Math.random()));return(0,t.useLayoutEffect)(()=>{if(o.isRendering)return r instanceof Uint8Array?a({type:"artifact",id:l,content:btoa(new TextDecoder("utf8").decode(r)),filename:e,frame:s,contentType:"binary",downloadBehavior:i??null}):r===eL?a({type:"artifact",id:l,filename:e,frame:s,contentType:"thumbnail",downloadBehavior:i??null}):a({type:"artifact",id:l,content:r,filename:e,frame:s,contentType:"text",downloadBehavior:i??null}),()=>n(l)},[r,o.isRendering,e,s,l,a,n,i]),null};eB.Thumbnail=eL;var eN=e=>e,e$=({trimAfter:e,mediaDurationInFrames:t,playbackRate:r,trimBefore:i})=>{let a=t;return void 0!==e&&(a=e),void 0!==i&&(a-=i),Math.floor(a/r)},ez=(0,t.createContext)(null),eU=({durationInFrames:e,times:i=1/0,children:a,name:n,...o})=>{let s=e_(),{durationInFrames:l}=eE();if(H(e,{component:"of the <Loop /> component",allowFloats:!0}),"number"!=typeof i)throw TypeError(`You passed to "times" an argument of type ${typeof i}, but it must be a number.`);if(i!==1/0&&i%1!=0)throw TypeError(`The "times" prop of a loop must be an integer, but got ${i}.`);if(i<0)throw TypeError(`The "times" prop of a loop must be at least 0, but got ${i}`);let u=Math.min(Math.ceil(l/e),i),c="none"===o.layout?void 0:o.style,d=e*(u-1),p=Math.min(Math.floor(s/e)*e,d),f=(0,t.useMemo)(()=>({numberOfTimes:u,startOffset:-p,durationInFrames:e}),[u,e,p]),h=(0,t.useMemo)(()=>({iteration:Math.floor(s/e),durationInFrames:e}),[s,e]);return(0,r.jsx)(ez.Provider,{value:h,children:(0,r.jsx)(eA,{durationInFrames:e,from:p,name:n??"<Loop>",_remotionInternalLoopDisplay:f,layout:o.layout,style:c,children:a})})};eU.useLoop=()=>t.default.useContext(ez);var eV=({logLevel:e,tag:t,message:r,mountTime:i})=>{let a=[i?Date.now()-i+"ms ":null,t].filter(Boolean).join(" ");ed.trace({logLevel:e,tag:null},`[${a}]`,r)},eH=(0,t.createContext)({}),eW={},eq=[],eG=e=>{eW=e(eW),eq.forEach(e=>e())},eZ=({children:e})=>{let[i,a]=(0,t.useState)(()=>eW);return(0,t.useEffect)(()=>{let e=()=>{a(eW)};return eq.push(e),()=>{eq=eq.filter(t=>t!==e)}},[]),(0,r.jsx)(eH.Provider,{value:i,children:e})},eK=e=>{let t=e.indexOf("#");return -1===t?null:t},eQ=e=>{let t=eK(e);return null===t?e:e.slice(0,t)},eX=e=>{let r=(0,t.useContext)(eH),i=eK(e),a=eQ(e);return r[a]?null!==i?r[a]+e.slice(i):r[a]:e},eJ=function(e){let t=new FileReader;return new Promise((r,i)=>{t.onload=function(){r(t.result)},t.onerror=e=>i(e),t.readAsDataURL(e)})},eY=async({reader:e,contentType:t,contentLength:r,onProgress:i})=>{let a=0,n=[];for(;;){let{done:t,value:o}=await e.read();if(t)break;n.push(o),a+=o.length,i&&i({loadedBytes:a,totalBytes:r})}let o=new Uint8Array(a),s=0;for(let e of n)o.set(e,s),s+=e.length;return new Blob([o],{type:t??void 0})},e0=(e,t)=>{let r=t?.method??"blob-url",i=t?.logLevel??"info",a=eQ(e);if(o().isRendering)return{free:()=>{},waitUntilDone:()=>Promise.resolve(a)};ed.verbose({logLevel:i,tag:"prefetch"},`Starting prefetch ${a}`);let n=!1,s=null,l=()=>{},u=()=>{},c=new Promise((e,t)=>{l=e,u=t}),d=new AbortController,p=!0;return fetch(a,{signal:d.signal,credentials:t?.credentials??void 0}).then(e=>{if(p=!1,n)return null;if(!e.ok)throw Error(`HTTP error, status = ${e.status}`);let r=e.headers.get("Content-Type"),i=t?.contentType??r;if(i&&(i.startsWith("video/")||i.startsWith("audio/")||i.startsWith("image/"))||console.warn(`Called prefetch() on ${a} which returned a "Content-Type" of ${r}. Prefetched content should have a proper content type (video/... or audio/...) or a contentType passed the options of prefetch(). Otherwise, prefetching will not work properly in all browsers.`),!e.body)throw Error(`HTTP response of ${a} has no body`);return eY({reader:e.body.getReader(),contentType:t?.contentType??r??null,contentLength:e.headers.get("Content-Length")?parseInt(e.headers.get("Content-Length"),10):null,onProgress:t?.onProgress})}).then(e=>{if(!e)return;let i=t?.contentType?new Blob([e],{type:t.contentType}):e;return"base64"===r?eJ(i):URL.createObjectURL(i)}).then(e=>{n||(eV({logLevel:i,tag:"prefetch",message:`Finished prefetch ${a} with method ${r}`,mountTime:null}),s=e,eG(e=>({...e,[a]:s})),l(s))}).catch(e=>{e?.message.includes("free() called")||u(e)}),{free:()=>{if(eV({logLevel:i,tag:"prefetch",message:`Freeing ${a}`,mountTime:null}),s)"blob-url"===r&&URL.revokeObjectURL(s),eG(e=>{let t={...e};return delete t[a],t});else if(n=!0,p)try{d.abort(Error("free() called"))}catch{}},waitUntilDone:()=>c}},e1=(e,t)=>{if("number"!=typeof e.volume&&"function"!=typeof e.volume&&void 0!==e.volume)throw TypeError(`You have passed a volume of type ${typeof e.volume} to your <${t} /> component. Volume must be a number or a function with the signature '(frame: number) => number' undefined.`);if("number"==typeof e.volume&&e.volume<0)throw TypeError(`You have passed a volume below 0 to your <${t} /> component. Volume must be between 0 and 1`);if("number"!=typeof e.playbackRate&&void 0!==e.playbackRate)throw TypeError(`You have passed a playbackRate of type ${typeof e.playbackRate} to your <${t} /> component. Playback rate must a real number or undefined.`);if("number"==typeof e.playbackRate&&(isNaN(e.playbackRate)||!Number.isFinite(e.playbackRate)||e.playbackRate<=0))throw TypeError(`You have passed a playbackRate of ${e.playbackRate} to your <${t} /> component. Playback rate must be a real number above 0.`)},e2=({startFrom:e,endAt:t,trimBefore:r,trimAfter:i})=>{if(void 0!==e&&void 0!==r)throw TypeError("Cannot use both startFrom and trimBefore props. Use trimBefore instead as startFrom is deprecated.");if(void 0!==t&&void 0!==i)throw TypeError("Cannot use both endAt and trimAfter props. Use trimAfter instead as endAt is deprecated.");let a=void 0!==e||void 0!==t;if(void 0!==r||void 0!==i){if(void 0!==r){if("number"!=typeof r)throw TypeError(`type of trimBefore prop must be a number, instead got type ${typeof r}.`);if(isNaN(r)||r===1/0)throw TypeError("trimBefore prop can not be NaN or Infinity.");if(r<0)throw TypeError(`trimBefore must be greater than equal to 0 instead got ${r}.`)}if(void 0!==i){if("number"!=typeof i)throw TypeError(`type of trimAfter prop must be a number, instead got type ${typeof i}.`);if(isNaN(i))throw TypeError("trimAfter prop can not be NaN.");if(i<=0)throw TypeError(`trimAfter must be a positive number, instead got ${i}.`)}if(i<=r)throw TypeError("trimAfter prop must be greater than trimBefore prop.")}else a&&((e,t)=>{if(void 0!==e){if("number"!=typeof e)throw TypeError(`type of startFrom prop must be a number, instead got type ${typeof e}.`);if(isNaN(e)||e===1/0)throw TypeError("startFrom prop can not be NaN or Infinity.");if(e<0)throw TypeError(`startFrom must be greater than equal to 0 instead got ${e}.`)}if(void 0!==t){if("number"!=typeof t)throw TypeError(`type of endAt prop must be a number, instead got type ${typeof t}.`);if(isNaN(t))throw TypeError("endAt prop can not be NaN.");if(t<=0)throw TypeError(`endAt must be a positive number, instead got ${t}.`)}if(t<e)throw TypeError("endAt prop must be greater than startFrom prop.")})(e,t)},e4=({startFrom:e,endAt:t,trimBefore:r,trimAfter:i})=>({trimBeforeValue:r??e??void 0,trimAfterValue:i??t??void 0}),e3=(e,t)=>{if("got-duration"!==t.type)return e;{let r=eN(t.src);return e[r]===t.durationInSeconds?e:{...e,[r]:t.durationInSeconds}}},e6=(0,t.createContext)({durations:{},setDurations:()=>{throw Error("context missing")}}),e8=({children:e})=>{let[i,a]=(0,t.useReducer)(e3,{}),n=(0,t.useMemo)(()=>({durations:i,setDurations:a}),[i]);return(0,r.jsx)(e6.Provider,{value:n,children:e})},e5=({crossOrigin:e,requestsVideoFrame:t,isClientSideRendering:r})=>null!=e?e:r||t?"anonymous":void 0,e7=({mediaRef:e,mediaType:t,onAutoPlayError:r,logLevel:i,mountTime:a,reason:n,isPlayer:o})=>{let{current:s}=e;if(!s)return;eV({logLevel:i,tag:"play",message:`Attempting to play ${s.src}. Reason: ${n}`,mountTime:a});let l=s.play();l.catch&&l.catch(e=>{if(!(!s||e.message.includes("request was interrupted by a call to pause")||e.message.includes("The operation was aborted.")||e.message.includes("The fetching process for the media resource was aborted by the user agent")||e.message.includes("request was interrupted by a new load request")||e.message.includes("because the media was removed from the document"))&&(!e.message.includes("user didn't interact with the document")||!s.muted)&&(console.log(`Could not play ${t} due to following error: `,e),!s.muted)){if(r)return void r();"video"===t&&o&&(ed.info({logLevel:i,tag:"<"+t+">"},"The video will be muted and we'll retry playing it."),ed.info({logLevel:i,tag:"<"+t+">"},"Use onAutoPlayError() to handle this error yourself."),s.muted=!0,s.play())}})},e9=({audioContext:e,ref:t})=>{let r=null,i=!1;return{attemptToConnect:()=>{if(i)throw Error("SharedElementSourceNode has been disposed");!r&&t.current&&(r=e.createMediaElementSource(t.current))},get:()=>{if(!r)throw Error("Audio element not connected");return r},cleanup:()=>{r&&(r.disconnect(),r=null),i=!0}}},te=!1,tt="data:audio/mp3;base64,/+MYxAAJcAV8AAgAABn//////+/gQ5BAMA+D4Pg+BAQBAEAwD4Pg+D4EBAEAQDAPg++hYBH///hUFQVBUFREDQNHmf///////+MYxBUGkAGIMAAAAP/29Xt6lUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV/+MYxDUAAANIAAAAAFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",tr=(0,t.createContext)(null),ti=({children:e,numberOfAudioTags:i,audioLatencyHint:a,audioEnabled:n})=>{let o=(0,t.useRef)([]),[s]=(0,t.useState)(i);if(i!==s)throw Error("The number of shared audio tags has changed dynamically. Once you have set this property, you cannot change it afterwards.");let l=em(),u=(({logLevel:e,latencyHint:r,audioEnabled:i})=>{let a=T();return(0,t.useMemo)(()=>{if(a.isRendering||!i)return null;if("u"<typeof AudioContext)return te||(te=!0),null;return new AudioContext({latencyHint:r,sampleRate:48e3})},[e,r,a.isRendering,i])})({logLevel:l,latencyHint:a,audioEnabled:n}),c=(0,t.useMemo)(()=>Array(i).fill(!0).map(()=>{let e=(0,t.createRef)();return{id:Math.random(),ref:e,mediaElementSourceNode:u?e9({audioContext:u,ref:e}):null}}),[u,i]);(t.default.useInsertionEffect??t.default.useLayoutEffect)(()=>()=>{requestAnimationFrame(()=>{c.forEach(({mediaElementSourceNode:e})=>{e?.cleanup()})})},[c]);let d=(0,t.useRef)(Array(i).fill(!1)),p=(0,t.useCallback)(()=>{c.forEach(({ref:e,id:t})=>{let r=o.current?.find(e=>e.id===t),{current:i}=e;if(i){if(void 0===r){i.src=tt;return}if(!r)throw TypeError("Expected audio data to be there");Object.keys(r.props).forEach(e=>{var t,a;t=r.props[e],a=i[e],("src"!==e||a.startsWith("data:")||t.startsWith("data:")?a===t||0:new URL(a,window.origin).toString()===new URL(t,window.origin).toString())||(i[e]=r.props[e])})}})},[c]),f=(0,t.useCallback)(e=>{let{aud:t,audioId:r,premounting:a,postmounting:n}=e,s=o.current?.find(e=>e.audioId===r);if(s)return s;let l=d.current.findIndex(e=>!1===e);if(-1===l)throw Error(`Tried to simultaneously mount ${i+1} <Html5Audio /> tags at the same time. With the current settings, the maximum amount of <Html5Audio /> tags is limited to ${i} at the same time. Remotion pre-mounts silent audio tags to help avoid browser autoplay restrictions. See https://remotion.dev/docs/player/autoplay#using-the-numberofsharedaudiotags-prop for more information on how to increase this limit.`);let{id:u,ref:f,mediaElementSourceNode:h}=c[l],m=[...d.current];m[l]=u,d.current=m;let g={props:t,id:u,el:f,audioId:r,mediaElementSourceNode:h,premounting:a,audioMounted:!!f.current,postmounting:n,cleanupOnMediaTagUnmount:()=>{}};return o.current?.push(g),p(),g},[i,c,p]),h=(0,t.useCallback)(e=>{let t=[...d.current],r=c.findIndex(t=>t.id===e);if(-1===r)throw TypeError("Error occured in ");t[r]=!1,d.current=t,o.current=o.current?.filter(t=>t.id!==e),p()},[c,p]),m=(0,t.useCallback)(({aud:e,audioId:t,id:r,premounting:i,postmounting:a})=>{let n=!1;o.current=o.current?.map(o=>{let s=!!o.el.current;return(o.audioMounted!==s&&(n=!0),o.id===r)?((e,t)=>{let r=Object.keys(e).sort(),i=Object.keys(t).sort();if(r.length!==i.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!==i[a]||e[r[a]]!==t[i[a]])return!1;return!0})(e,o.props)&&o.premounting===i&&o.postmounting===a?o:(n=!0,{...o,props:e,premounting:i,postmounting:a,audioId:t,audioMounted:s}):o}),n&&p()},[p]),g=eg(),v=T(),y=(0,t.useCallback)(()=>{c.forEach(e=>{let t=o.current.find(t=>t.el===e.ref);t?.premounting||e7({mediaRef:e.ref,mediaType:"audio",onAutoPlayError:null,logLevel:l,mountTime:g,reason:"playing all audios",isPlayer:v.isPlayer})}),u?.resume()},[u,l,g,c,v.isPlayer]),b=(0,t.useMemo)(()=>({registerAudio:f,unregisterAudio:h,updateAudio:m,playAllAudios:y,numberOfAudioTags:i,audioContext:u}),[i,y,f,h,m,u]);return(0,r.jsxs)(tr.Provider,{value:b,children:[c.map(({id:e,ref:t})=>(0,r.jsx)("audio",{ref:t,preload:"metadata",src:tt},e)),e]})},ta=(e,t)=>1e-5>Math.abs(e-t),tn=(e,t)=>Math.round(e/t*100)/100,to=()=>!1,ts=({actualFrom:e,fps:t})=>tn(Math.max(0,-e),t),tl=({mediaRef:e,volume:r,logLevel:i,source:a,shouldUseWebAudioApi:n})=>{let o=(0,t.useRef)(null);(0,t.useRef)(r).current=r;let s=(0,t.useContext)(tr);if(!s)throw Error("useAmplification must be used within a SharedAudioContext");let{audioContext:l}=s;return o.current&&(ta(o.current.gainNode.gain.value,r)||(o.current.gainNode.gain.value=r,ed.trace({logLevel:i,tag:null},`Setting gain to ${r} for ${e.current?.src}`))),n||!e.current||ta(r,e.current?.volume)||(e.current.volume=Math.min(r,1)),o},tu=()=>{let e=(0,t.useContext)(b);return Math.min(0,e?.relativeFrom??0)},tc=e=>{let t=eU.useLoop(),r=e_(),i=tu();return"repeat"===e||null===t?r+i:r+i+t.durationInFrames*t.iteration},td=({frame:e,volume:t,mediaVolume:r=1})=>{if("number"==typeof t)return t*r;if(void 0===t)return Number(r);let i=t(e)*r;if("number"!=typeof i)throw TypeError(`You passed in a a function to the volume prop but it did not return a number but a value of type ${typeof i} for frame ${e}`);if(Number.isNaN(i))throw TypeError(`You passed in a function to the volume prop but it returned NaN for frame ${e}.`);if(!Number.isFinite(i))throw TypeError(`You passed in a function to the volume prop but it returned a non-finite number for frame ${e}.`);return Math.max(0,i)},tp={},tf=({volume:e,mediaVolume:r,mediaType:i,src:a,displayName:n,trimBefore:o,trimAfter:s,playbackRate:l})=>{if(!a)throw Error("No src passed");let u=tu(),c=(0,t.useContext)(b),d=eE(),[p]=(0,t.useState)(()=>e),f=e$({mediaDurationInFrames:d.durationInFrames,playbackRate:l,trimBefore:o,trimAfter:s}),h=c?Math.min(c.durationInFrames,f):f,m=(0,t.useMemo)(()=>"number"==typeof e?e:Array(Math.floor(Math.max(0,h+u))).fill(!0).map((t,i)=>td({frame:i+u,volume:e,mediaVolume:r})).join(","),[h,u,e,r]);(0,t.useEffect)(()=>{var t;"number"==typeof e&&e!==p&&(tp[t=`Remotion: The ${i} with src ${a} has changed it's volume. Prefer the callback syntax for setting volume to get better timeline display: https://www.remotion.dev/docs/audio/volume`]||(console.warn(t),tp[t]=!0))},[p,i,a,e]);let g="function"==typeof e,v=z(),{rootId:y}=(0,t.useContext)(ex);return{volumes:m,duration:h,doesVolumeChange:g,nonce:v,rootId:y,isStudio:T().isStudio,finalDisplayName:n??(e=>{if(/data:|blob:/.test(e.substring(0,5)))return"Data URL";let t=e.split("/").map(e=>e.split("\\")).flat(1);return t[t.length-1]})(a)}},th=({volume:e,mediaVolume:r,src:i,mediaType:a,playbackRate:n,displayName:o,id:s,stack:l,showInTimeline:u,premountDisplay:c,postmountDisplay:d,loopDisplay:p})=>{let f=(0,t.useContext)(b),h=tu(),{registerSequence:m,unregisterSequence:g}=(0,t.useContext)(x),{volumes:v,duration:y,doesVolumeChange:w,nonce:S,rootId:k,isStudio:C,finalDisplayName:E}=tf({volume:e,mediaVolume:r,mediaType:a,src:i,displayName:o,trimAfter:void 0,trimBefore:void 0,playbackRate:n});(0,t.useEffect)(()=>{if(!i)throw Error("No src passed");if((C||window.process?.env?.NODE_ENV==="test")&&u)return m({type:a,src:i,id:s,duration:y,from:0,parent:f?.id??null,displayName:E,rootId:k,volume:v,showInTimeline:!0,nonce:S,startMediaFrom:0-h,doesVolumeChange:w,loopDisplay:p,playbackRate:n,stack:l,premountDisplay:c,postmountDisplay:d}),()=>{g(s)}},[y,s,f,i,m,g,v,w,S,a,h,n,l,u,c,d,C,p,k,E])},tm=t.default.createContext(null),tg=({children:e})=>{let{logLevel:i,mountTime:a}=(0,t.useContext)(eh),n=((e,r)=>{let[i,a]=(0,t.useState)([]),[n,o]=(0,t.useState)([]),[s,l]=(0,t.useState)([]),u=T().isRendering,c=(0,t.useRef)(!1),d=(0,t.useCallback)(e=>u?{unblock:()=>{}}:(a(t=>[...t,e]),{unblock:()=>{a(t=>{let r=t.filter(t=>t!==e);return r.length===t.length?t:r})}}),[u]),p=(0,t.useCallback)(e=>(o(t=>[...t,e]),{remove:()=>{o(t=>t.filter(t=>t!==e))}}),[]),f=(0,t.useCallback)(e=>(l(t=>[...t,e]),{remove:()=>{l(t=>t.filter(t=>t!==e))}}),[]);return(0,t.useEffect)(()=>{!u&&i.length>0&&(n.forEach(e=>e()),eV({logLevel:e,message:"Player is entering buffer state",mountTime:r,tag:"player"}))},[i]),(0,t.useMemo)(()=>({addBlock:d,listenForBuffering:p,listenForResume:f,buffering:c}),[d,c,p,f])})(i??"info",a);return(0,r.jsx)(tm.Provider,{value:n,children:e})},tv=e=>{let[r,i]=(0,t.useState)(e.buffering.current);return(0,t.useEffect)(()=>(e.listenForBuffering(()=>{i(!0)}),e.listenForResume(()=>{i(!1)}),()=>{e.listenForBuffering(()=>{}),e.listenForResume(()=>{})}),[e]),r},ty=()=>{let e=(0,t.useContext)(tm),r=e?e.addBlock:null;return(0,t.useMemo)(()=>({delayPlayback:()=>{if(!r)throw Error("Tried to enable the buffering state, but a Remotion context was not found. This API can only be called in a component that was passed to the Remotion Player or a <Composition>. Or you might have experienced a version mismatch - run `npx remotion versions` and ensure all packages have the same version. This error is thrown by the buffer state https://remotion.dev/docs/player/buffer-state");let{unblock:e}=r({id:String(Math.random())});return{unblock:e}}}),[r])},tb=({mediaRef:e,time:t,logLevel:r,why:i,mountTime:a})=>{let n=to()?Number(t.toFixed(1)):t;return eV({logLevel:r,tag:"seek",message:`Seeking from ${e.currentTime} to ${n}. src= ${e.src} Reason: ${i}`,mountTime:a}),e.currentTime=n,n};function tx(e,t){if(t.length<2)throw Error(e+" must have at least 2 elements");for(let r of t){if("number"!=typeof r)throw Error(`${e} must contain only numbers`);if(!Number.isFinite(r))throw Error(`${e} must contain only finite numbers, but got [${t.join(",")}]`)}}function tw(e,t,r,i){if(void 0===e)throw Error("input can not be undefined");if(void 0===t)throw Error("inputRange can not be undefined");if(void 0===r)throw Error("outputRange can not be undefined");if(t.length!==r.length)throw Error("inputRange ("+t.length+") and outputRange ("+r.length+") must have the same length");tx("inputRange",t),tx("outputRange",r);for(let e=1;e<t.length;++e)if(!(t[e]>t[e-1]))throw Error(`inputRange must be strictly monotonically increasing but got [${t.join(",")}]`);let a=i?.easing??(e=>e),n="extend";i?.extrapolateLeft!==void 0&&(n=i.extrapolateLeft);let o="extend";if(i?.extrapolateRight!==void 0&&(o=i.extrapolateRight),"number"!=typeof e)throw TypeError("Cannot interpolate an input which is not a number");let s=function(e,t){let r;for(r=1;r<t.length-1&&!(t[r]>=e);++r);return r-1}(e,t);return function(e,t,r,i){let{extrapolateLeft:a,extrapolateRight:n,easing:o}=i,s=e,[l,u]=t,[c,d]=r;if(s<l){if("identity"===a)return s;if("clamp"===a)s=l;else if("wrap"===a){let e=u-l;s=((s-l)%e+e)%e+l}}if(s>u){if("identity"===n)return s;if("clamp"===n)s=u;else if("wrap"===n){let e=u-l;s=((s-l)%e+e)%e+l}}return c===d?c:s=(s=o(s=(s-l)/(u-l)))*(d-c)+c}(e,[t[s],t[s+1]],[r[s],r[s+1]],{easing:a,extrapolateLeft:n,extrapolateRight:o})}var tS=({frame:e,playbackRate:t,startFrom:r})=>tw(e,[-1,r,r+1],[-1,r,r+t]),tk=({fps:e,frame:t,playbackRate:r,startFrom:i})=>1e3/e*tS({frame:t,playbackRate:r,startFrom:i})/1e3,tC={},tE=({mediaRef:e,src:r,mediaType:i,playbackRate:a,onlyWarnForMediaSeekingError:n,acceptableTimeshift:o,pauseWhenBuffering:s,isPremounting:l,isPostmounting:u,onAutoPlayError:c})=>{let d,p,{playbackRate:f}=(0,t.useContext)(ex),h=e_(),m=er(),[g]=ea(),v=(0,t.useContext)(tm),{fps:y}=eE(),b=tu(),x=(0,t.useRef)(null),w=(0,t.useRef)(null),S=em(),k=eg();if(!v)throw Error("useMediaPlayback must be used inside a <BufferingContext>");let C=(0,t.useRef)({}),E=(0,t.useCallback)(()=>{!r||C.current[r]||(ed.verbose({logLevel:S,tag:null},`Detected ${r} as a variable FPS video. Disabling buffering while seeking.`),C.current[r]=!0)},[S,r]),_=(({mediaRef:e,mediaType:r,lastSeek:i,onVariableFpsVideoDetected:a})=>{let n=(0,t.useRef)(null);return(0,t.useEffect)(()=>{let{current:t}=e;if(t)n.current={time:t.currentTime,lastUpdate:performance.now()};else{n.current=null;return}if("video"!==r){n.current=null;return}if(!t.requestVideoFrameCallback)return;let o=()=>{},s=()=>{if(!t)return;let e=t.requestVideoFrameCallback((e,t)=>{if(null!==n.current){let e=Math.abs(n.current.time-t.mediaTime),r=Math.abs(null===i.current?1/0:t.mediaTime-i.current);e>.5&&r>.5&&t.mediaTime>n.current.time&&a()}n.current={time:t.mediaTime,lastUpdate:performance.now()},s()});o=()=>{t.cancelVideoFrameCallback(e),o=()=>{}}};return s(),()=>{o()}},[i,e,r,a]),n})({mediaRef:e,mediaType:i,lastSeek:w,onVariableFpsVideoDetected:E}),P=(d=t.default.useRef({time:e.current?.currentTime??0,lastUpdate:performance.now()}),null!==(p=e.current?.currentTime??null)&&d.current.time!==p&&(d.current.time=p,d.current.lastUpdate=performance.now()),d),I=tk({frame:h,playbackRate:a,startFrom:-b,fps:y}),A=(({element:e,shouldBuffer:r,isPremounting:i,isPostmounting:a,logLevel:n,mountTime:o,src:s})=>{let l=ty(),[u,c]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{let t=[],{current:u}=e;if(!u||!r)return;if(i||a){if((i||a)&&u.readyState<u.HAVE_FUTURE_DATA&&!navigator.userAgent.includes("Firefox/")){eV({logLevel:n,message:`Calling .load() on ${u.src} because readyState is ${u.readyState} and it is not Firefox. Element is premounted ${u.playbackRate}`,tag:"load",mountTime:o});let e=u.playbackRate;u.load(),u.playbackRate=e}return}let d=e=>{let r=!1;t.forEach(t=>{t(e),r=!0}),t=[],c(e=>(e&&(r=!0),!1)),r&&eV({logLevel:n,message:`Unmarking as buffering: ${u.src}. Reason: ${e}`,tag:"buffer",mountTime:o})},p=e=>{c(!0),eV({logLevel:n,message:`Marking as buffering: ${u.src}. Reason: ${e}`,tag:"buffer",mountTime:o});let{unblock:r}=l.delayPlayback(),i=()=>{d('"canplay" was fired'),f()},a=()=>{d('"error" event was occurred'),f()};u.addEventListener("canplay",i,{once:!0}),t.push(()=>{u.removeEventListener("canplay",i)}),u.addEventListener("error",a,{once:!0}),t.push(()=>{u.removeEventListener("error",a)}),t.push(e=>{eV({logLevel:n,message:`Unblocking ${u.src} from buffer. Reason: ${e}`,tag:"buffer",mountTime:o}),r()})},f=()=>{if(u.readyState<u.HAVE_FUTURE_DATA){if(p(`readyState is ${u.readyState}, which is less than HAVE_FUTURE_DATA`),!navigator.userAgent.includes("Firefox/")){eV({logLevel:n,message:`Calling .load() on ${s} because readyState is ${u.readyState} and it is not Firefox. ${u.playbackRate}`,tag:"load",mountTime:o});let e=u.playbackRate;u.load(),u.playbackRate=e}}else{let e=()=>{p('"waiting" event was fired')};u.addEventListener("waiting",e),t.push(()=>{u.removeEventListener("waiting",e)})}};return f(),()=>{d("element was unmounted or prop changed")}},[l,s,e,i,a,n,r,o]),u})({element:e,shouldBuffer:s,isPremounting:l,isPostmounting:u,logLevel:S,mountTime:k,src:r??null}),{bufferUntilFirstFrame:O,isBuffering:M}=(({mediaRef:e,mediaType:r,onVariableFpsVideoDetected:i,pauseWhenBuffering:a,logLevel:n,mountTime:o})=>{let s=(0,t.useRef)(!1),{delayPlayback:l}=ty(),u=(0,t.useCallback)(t=>{if("video"!==r||!a)return;let u=e.current;if(!u)return;if(u.readyState>=u.HAVE_FUTURE_DATA&&!/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent))return void eV({logLevel:n,message:`Not using buffer until first frame, because readyState is ${u.readyState} and is not Safari or Desktop Chrome`,mountTime:o,tag:"buffer"});if(!u.requestVideoFrameCallback)return void eV({logLevel:n,message:"Not using buffer until first frame, because requestVideoFrameCallback is not supported",mountTime:o,tag:"buffer"});s.current=!0,eV({logLevel:n,message:`Buffering ${e.current?.src} until the first frame is received`,mountTime:o,tag:"buffer"});let c=l(),d=()=>{c.unblock(),u.removeEventListener("ended",d,{once:!0}),u.removeEventListener("pause",d,{once:!0}),s.current=!1},p=()=>{d()};u.requestVideoFrameCallback((e,r)=>{Math.abs(r.mediaTime-t)>.5&&i(),d()}),u.addEventListener("ended",p,{once:!0}),u.addEventListener("pause",p,{once:!0}),u.addEventListener("canplay",p,{once:!0})},[l,n,e,r,o,i,a]);return(0,t.useMemo)(()=>({isBuffering:()=>s.current,bufferUntilFirstFrame:u}),[u])})({mediaRef:e,mediaType:i,onVariableFpsVideoDetected:E,pauseWhenBuffering:s,logLevel:S,mountTime:k}),F=a*f,R=e.current?.duration?Math.min(e.current.duration,o??.65):o??.65,D=tv(v);(0,t.useEffect)(()=>{if(e.current?.paused)return;if(!g){eV({logLevel:S,tag:"pause",message:`Pausing ${e.current?.src} because ${l?"media is premounting":u?"media is postmounting":"Player is not playing"}`,mountTime:k}),e.current?.pause();return}let t=A||M();v.buffering.current&&!t&&(eV({logLevel:S,tag:"pause",message:`Pausing ${e.current?.src} because player is buffering but media tag is not`,mountTime:k}),e.current?.pause())},[M,A,v,D,l,S,e,i,k,g,u]);let j=T();(0,t.useLayoutEffect)(()=>{let t=Math.max(0,F);e.current&&e.current.playbackRate!==t&&(e.current.playbackRate=t)},[e,F]),(0,t.useEffect)(()=>{let t="audio"===i?"<Html5Audio>":"<Html5Video>";if(!e.current)throw Error(`No ${i} ref found`);if(!r)throw Error(`No 'src' attribute was passed to the ${t} element.`);let{duration:a}=e.current,o=!Number.isNaN(a)&&Number.isFinite(a)?Math.min(a,I):I,d=P.current.time,p=_.current?.time??null,f=C.current[r],h=Math.abs(o-d),y=p?Math.abs(o-p):null,b=_.current?.lastUpdate&&_.current.time>P.current.lastUpdate?y:h,E=y&&!f?b:h;if(E>R&&x.current!==o){w.current=tb({mediaRef:e.current,time:o,logLevel:S,why:`because time shift is too big. shouldBeTime = ${o}, isTime = ${d}, requestVideoCallbackTime = ${p}, timeShift = ${E}${f?", isVariableFpsVideo = true":""}, isPremounting = ${l}, isPostmounting = ${u}, pauseWhenBuffering = ${s}`,mountTime:k}),x.current=w.current,g&&(F>0&&O(o),e.current.paused&&e7({mediaRef:e,mediaType:i,onAutoPlayError:c,logLevel:S,mountTime:k,reason:"player is playing but media tag is paused, and just seeked",isPlayer:j.isPlayer})),n||((e,t)=>{if(null===e||0===e.seekable.length||e.seekable.length>1||tC[e.src])return;let r={start:e.seekable.start(0),end:e.seekable.end(0)};if(0===r.start&&0===r.end){let r=[`The media ${e.src} cannot be seeked. This could be one of few reasons:`,"1) The media resource was replaced while the video is playing but it was not loaded yet.","2) The media does not support seeking.","3) The media was loaded with security headers prventing it from being included.","Please see https://remotion.dev/docs/non-seekable-media for assistance."].join(`
`);if("console-error"===t)console.error(r);else if("console-warning"===t)console.warn(`The media ${e.src} does not support seeking. The video will render fine, but may not play correctly in the Remotion Studio and in the <Player>. See https://remotion.dev/docs/non-seekable-media for an explanation.`);else throw Error(r);tC[e.src]=!0}})(e.current,n?"console-warning":"console-error");return}let T=g?.15:.01,D=Math.abs(e.current.currentTime-o)>T,L=A||M(),B=v.buffering.current&&!L;if(!g||B){D&&(w.current=tb({mediaRef:e.current,time:o,logLevel:S,why:`not playing or something else is buffering. time offset is over seek threshold (${T})`,mountTime:k}));return}if(!g||v.buffering.current)return;let N=e.current.paused&&!e.current.ended,$=0===m;if(N||$){let t=N?"media tag is paused":"absolute frame is 0";D&&(w.current=tb({mediaRef:e.current,time:o,logLevel:S,why:`is over timeshift threshold (threshold = ${T}) and ${t}`,mountTime:k})),e7({mediaRef:e,mediaType:i,onAutoPlayError:c,logLevel:S,mountTime:k,reason:`player is playing and ${t}`,isPlayer:j.isPlayer}),!f&&F>0&&O(o)}},[m,R,O,v.buffering,_,S,I,M,A,e,i,n,F,g,r,c,l,u,s,k,P,j.isPlayer])},t_=({mediaRef:e,id:r,mediaType:i,onAutoPlayError:a,isPremounting:n,isPostmounting:o})=>{let{audioAndVideoTags:s,imperativePlaying:l}=(0,t.useContext)(ex),u=em(),c=eg(),d=T();(0,t.useEffect)(()=>(s.current.push({id:r,play:t=>{if(l.current&&!n&&!o)return e7({mediaRef:e,mediaType:i,onAutoPlayError:a,logLevel:u,mountTime:c,reason:t,isPlayer:d.isPlayer})}}),()=>{s.current=s.current.filter(e=>e.id!==r)}),[s,r,e,i,a,l,n,o,u,c,d.isPlayer])},tT=(0,t.createContext)({mediaMuted:!1,mediaVolume:1}),tP=(0,t.createContext)({setMediaMuted:()=>{throw Error("default")},setMediaVolume:()=>{throw Error("default")}}),tI=()=>{let{mediaVolume:e}=(0,t.useContext)(tT),{setMediaVolume:r}=(0,t.useContext)(tP);return(0,t.useMemo)(()=>[e,r],[e,r])},tA=()=>{let{mediaMuted:e}=(0,t.useContext)(tT),{setMediaMuted:r}=(0,t.useContext)(tP);return(0,t.useMemo)(()=>[e,r],[e,r])},tO=e=>{if(e>=100)throw Error(`Volume was set to ${e}, but regular volume is 1, not 100. Did you forget to divide by 100? Set a volume of less than 100 to dismiss this error.`)},tM=(0,t.forwardRef)((e,i)=>{let[a]=(0,t.useState)(e.shouldPreMountAudioTags);if(e.shouldPreMountAudioTags!==a)throw Error("Cannot change the behavior for pre-mounting audio tags dynamically.");let n=em(),{volume:o,muted:s,playbackRate:l,shouldPreMountAudioTags:u,src:c,onDuration:d,acceptableTimeShiftInSeconds:p,_remotionInternalNeedsDurationCalculation:f,_remotionInternalNativeLoopPassed:h,_remotionInternalStack:m,allowAmplificationDuringRender:g,name:v,pauseWhenBuffering:y,showInTimeline:x,loopVolumeCurveBehavior:S,stack:k,crossOrigin:E,delayRenderRetries:_,delayRenderTimeoutInMilliseconds:T,toneFrequency:P,useWebAudioApi:I,onError:A,onNativeError:O,audioStreamIndex:M,...F}=e,[R]=tI(),[D]=tA(),j=tc(S??"repeat"),{hidden:L}=(0,t.useContext)(w);if(!c)throw TypeError("No 'src' was passed to <Html5Audio>.");let B=eX(c),N=(0,t.useContext)(b),[$]=(0,t.useState)(()=>String(Math.random())),z=L[$]??!1,U=td({frame:j,volume:o,mediaVolume:R});tO(U);let V=e5({crossOrigin:E,requestsVideoFrame:!1,isClientSideRendering:!1}),H=(0,t.useMemo)(()=>({muted:s||D||z||U<=0,src:B,loop:h,crossOrigin:V,...F}),[h,z,D,s,F,B,U,V]),{el:W,mediaElementSourceNode:q,cleanupOnMediaTagUnmount:G}=(({aud:e,audioId:r,premounting:i,postmounting:a})=>{let n=(0,t.useContext)(tr),[o]=(0,t.useState)(()=>{if(n&&n.numberOfAudioTags>0)return n.registerAudio({aud:e,audioId:r,premounting:i,postmounting:a});let o=t.default.createRef(),s=n?.audioContext?e9({audioContext:n.audioContext,ref:o}):null;return{el:o,id:Math.random(),props:e,audioId:r,mediaElementSourceNode:s,premounting:i,audioMounted:!!o.current,postmounting:a,cleanupOnMediaTagUnmount:()=>{s?.cleanup()}}}),s=t.default.useInsertionEffect??t.default.useLayoutEffect;return"u">typeof document&&(s(()=>{n&&n.numberOfAudioTags>0&&n.updateAudio({id:o.id,aud:e,audioId:r,premounting:i,postmounting:a})},[e,n,o.id,r,i,a]),s(()=>()=>{n&&n.numberOfAudioTags>0&&n.unregisterAudio(o.id)},[n,o.id])),o})({aud:H,audioId:(0,t.useMemo)(()=>`audio-${C(c??"")}-${N?.relativeFrom}-${N?.cumulatedFrom}-${N?.durationInFrames}-muted:${e.muted}-loop:${e.loop}`,[c,N?.relativeFrom,N?.cumulatedFrom,N?.durationInFrames,e.muted,e.loop]),premounting:!!N?.premounting,postmounting:!!N?.postmounting});th({volume:o,mediaVolume:R,src:c,mediaType:"audio",playbackRate:l??1,displayName:v??null,id:$,stack:m,showInTimeline:x,premountDisplay:N?.premountDisplay??null,postmountDisplay:N?.postmountDisplay??null,loopDisplay:void 0}),tE({mediaRef:W,src:c,mediaType:"audio",playbackRate:l??1,onlyWarnForMediaSeekingError:!1,acceptableTimeshift:p??null,isPremounting:!!N?.premounting,isPostmounting:!!N?.postmounting,pauseWhenBuffering:y,onAutoPlayError:null}),t_({id:$,isPostmounting:!!N?.postmounting,isPremounting:!!N?.premounting,mediaRef:W,mediaType:"audio",onAutoPlayError:null}),tl({logLevel:n,mediaRef:W,source:q,volume:U,shouldUseWebAudioApi:I??!1}),(t.default.useInsertionEffect??t.default.useLayoutEffect)(()=>()=>{requestAnimationFrame(()=>{G()})},[G]),(0,t.useImperativeHandle)(i,()=>W.current,[W]);let Z=(0,t.useRef)(d);return(Z.current=d,(0,t.useEffect)(()=>{let{current:e}=W;if(!e)return;if(e.duration)return void Z.current?.(e.src,e.duration);let t=()=>{Z.current?.(e.src,e.duration)};return e.addEventListener("loadedmetadata",t),()=>{e.removeEventListener("loadedmetadata",t)}},[W,c]),a)?null:(0,r.jsx)("audio",{ref:W,preload:"metadata",crossOrigin:V,...H})}),tF=(0,t.forwardRef)((e,i)=>{let a=(0,t.useRef)(null),{volume:n,playbackRate:o,allowAmplificationDuringRender:s,onDuration:l,toneFrequency:u,_remotionInternalNeedsDurationCalculation:c,_remotionInternalNativeLoopPassed:d,acceptableTimeShiftInSeconds:p,name:f,onNativeError:h,delayRenderRetries:m,delayRenderTimeoutInMilliseconds:g,loopVolumeCurveBehavior:v,pauseWhenBuffering:y,audioStreamIndex:x,...w}=e,S=er(),k=tc(v??"repeat"),E=e_(),_=(0,t.useContext)(b),{registerRenderAsset:T,unregisterRenderAsset:P}=(0,t.useContext)(ej),{delayRender:I,continueRender:A}=ey(),O=(0,t.useMemo)(()=>`audio-${C(e.src??"")}-${_?.relativeFrom}-${_?.cumulatedFrom}-${_?.durationInFrames}`,[e.src,_?.relativeFrom,_?.cumulatedFrom,_?.durationInFrames]),M=td({volume:n,frame:k,mediaVolume:1});tO(M),(0,t.useImperativeHandle)(i,()=>a.current,[]),(0,t.useEffect)(()=>{if(!e.src)throw Error("No src passed");if(window.remotion_audioEnabled&&!e.muted&&!(M<=0))return T({type:"audio",src:eN(e.src),id:O,frame:S,volume:M,mediaFrame:E,playbackRate:e.playbackRate??1,toneFrequency:u??1,audioStartFrame:Math.max(0,-(_?.relativeFrom??0)),audioStreamIndex:x??0}),()=>P(O)},[e.muted,e.src,T,S,O,P,M,k,E,o,e.playbackRate,u,_?.relativeFrom,x]);let{src:F}=e,R=i||c;return((0,t.useLayoutEffect)(()=>{if(window.process?.env?.NODE_ENV==="test"||!R)return;let e=I("Loading <Html5Audio> duration with src="+F,{retries:m??void 0,timeoutInMilliseconds:g??void 0}),{current:t}=a,r=()=>{t?.duration&&l(t.src,t.duration),A(e)};return t?.duration?(l(t.src,t.duration),A(e)):t?.addEventListener("loadedmetadata",r,{once:!0}),()=>{t?.removeEventListener("loadedmetadata",r),A(e)}},[F,l,R,m,g,A,I]),R)?(0,r.jsx)("audio",{ref:a,...w,onError:h}):null}),tR=(0,t.forwardRef)((e,i)=>{let a=(0,t.useContext)(tr),{startFrom:n,endAt:o,trimBefore:s,trimAfter:l,name:u,stack:c,pauseWhenBuffering:d,showInTimeline:p,onError:f,...h}=e,{loop:m,...g}=e,{fps:v}=eE(),y=T();if(y.isClientSideRendering)throw Error("<Html5Audio> is not supported in @remotion/web-renderer. Use <Audio> from @remotion/media instead. See https://remotion.dev/docs/client-side-rendering/limitations");let{durations:b,setDurations:x}=(0,t.useContext)(e6);if("string"!=typeof e.src)throw TypeError(`The \`<Html5Audio>\` tag requires a string for \`src\`, but got ${JSON.stringify(e.src)} instead.`);let w=eX(e.src),S=(0,t.useCallback)(e=>{console.log(e.currentTarget.error);let t=`Could not play audio with src ${w}: ${e.currentTarget.error}. See https://remotion.dev/docs/media-playback-error for help.`;if(m){if(f)return void f(Error(t));es(Error(t))}else f?.(Error(t)),console.warn(t)},[m,f,w]),k=(0,t.useCallback)((e,t)=>{x({type:"got-duration",durationInSeconds:t,src:e})},[x]),C=b[eN(w)]??b[eN(e.src)];e2({startFrom:n,endAt:o,trimBefore:s,trimAfter:l});let{trimBeforeValue:E,trimAfterValue:_}=e4({startFrom:n,endAt:o,trimBefore:s,trimAfter:l});return m&&void 0!==C?Number.isFinite(C)?(0,r.jsx)(eU,{layout:"none",durationInFrames:e$({trimAfter:_,mediaDurationInFrames:C*v,playbackRate:e.playbackRate??1,trimBefore:E}),children:(0,r.jsx)(tR,{...g,ref:i,_remotionInternalNativeLoopPassed:!0})}):(0,r.jsx)(tR,{...g,ref:i,_remotionInternalNativeLoopPassed:!0}):void 0!==E||void 0!==_?(0,r.jsx)(eA,{layout:"none",from:0-(E??0),showInTimeline:!1,durationInFrames:_,name:u,children:(0,r.jsx)(tR,{_remotionInternalNeedsDurationCalculation:!!m,pauseWhenBuffering:d??!1,...h,ref:i})}):(e1({playbackRate:e.playbackRate,volume:e.volume},"Html5Audio"),y.isRendering)?(0,r.jsx)(tF,{onDuration:k,...e,ref:i,onNativeError:S,_remotionInternalNeedsDurationCalculation:!!m}):(0,r.jsx)(tM,{_remotionInternalNativeLoopPassed:e._remotionInternalNativeLoopPassed??!1,_remotionInternalStack:c??null,shouldPreMountAudioTags:null!==a&&a.numberOfAudioTags>0,...e,ref:i,onNativeError:S,onDuration:k,pauseWhenBuffering:d??!1,_remotionInternalNeedsDurationCalculation:!!m,showInTimeline:p??!0})});p(tR),String(/^([a-zA-Z0-9-\u4E00-\u9FFF])+$/g);var tD=(0,t.createContext)({folderName:null,parentName:null}),tj=({name:e,children:i})=>{let a=(0,t.useContext)(tD),{registerFolder:n,unregisterFolder:o}=(0,t.useContext)(I);if(null==e)throw TypeError("You must pass a name to a <Folder />.");if("string"!=typeof e)throw TypeError(`The "name" you pass into <Folder /> must be a string. Got: ${typeof e}`);if(!e.match(/^([a-zA-Z0-9-\u4E00-\u9FFF])+$/g))throw Error(`Folder name can only contain a-z, A-Z, 0-9 and -. You passed ${e}`);let s=[a.parentName,a.folderName].filter(m),l=0===s.length?null:s.join("/"),u=(0,t.useMemo)(()=>({folderName:e,parentName:l}),[e,l]);return(0,t.useEffect)(()=>(n(e,l),()=>{o(e,l)}),[e,a.folderName,l,n,o]),(0,r.jsx)(tD.Provider,{value:u,children:i})},tL={transform:"rotate(90deg)"},tB={color:"white",fontSize:14,fontFamily:"sans-serif"},tN={justifyContent:"center",alignItems:"center"},t$=()=>(0,r.jsxs)(y,{style:tN,id:"remotion-comp-loading",children:[(0,r.jsx)("style",{type:"text/css",children:`
				@keyframes anim {
					from {
						opacity: 0
					}
					to {
						opacity: 1
					}
				}
				#remotion-comp-loading {
					animation: anim 2s;
					animation-fill-mode: forwards;
				}
			`}),(0,r.jsx)("svg",{width:40,height:40,viewBox:"-100 -100 400 400",style:tL,children:(0,r.jsx)("path",{fill:"#555",stroke:"#555",strokeWidth:"100",strokeLinejoin:"round",d:"M 2 172 a 196 100 0 0 0 195 5 A 196 240 0 0 0 100 2.259 A 196 240 0 0 0 2 172 z"})}),(0,r.jsxs)("p",{style:tB,children:["Resolving ","<Suspense>","..."]})]}),tz=null,tU=()=>{if(!tz){if("u"<typeof document)throw Error("Tried to call an API that only works in the browser from outside the browser");(tz=document.createElement("div")).style.position="absolute",tz.style.top="0px",tz.style.left="0px",tz.style.right="0px",tz.style.bottom="0px",tz.style.width="100%",tz.style.height="100%",tz.style.display="flex",tz.style.flexDirection="column";let e=document.createElement("div");e.style.position="fixed",e.style.top="-999999px",e.appendChild(tz),document.body.appendChild(e)}return tz},tV=({compProps:e,componentName:r,noSuspense:i})=>(0,t.useMemo)(()=>{if("component"in e){if("u"<typeof document||i)return e.component;if(void 0===e.component)throw Error(`A value of \`undefined\` was passed to the \`component\` prop. Check the value you are passing to the <${r}/> component.`);return e.component}if("lazyComponent"in e&&void 0!==e.lazyComponent){if(void 0===e.lazyComponent)throw Error(`A value of \`undefined\` was passed to the \`lazyComponent\` prop. Check the value you are passing to the <${r}/> component.`);return t.default.lazy(e.lazyComponent)}throw Error("You must pass either 'component' or 'lazyComponent'")},[e.component,e.lazyComponent]),tH=e=>e.match(/^([a-zA-Z0-9-\u4E00-\u9FFF])+$/g),tW=`Composition ID must match ${String(/^([a-zA-Z0-9-\u4E00-\u9FFF])+$/g)}`,tq=()=>{let{continueRender:e,delayRender:r}=ey();return(0,t.useEffect)(()=>{let t=r("Waiting for Root component to unsuspend");return()=>e(t)},[e,r]),null},tG=({width:e,height:a,fps:n,durationInFrames:o,id:s,defaultProps:l,schema:u,...c})=>{let{registerComposition:d,unregisterComposition:p}=(0,t.useContext)(I),f=J(),m=tV({compProps:c,componentName:"Composition",noSuspense:!1}),g=z(),v=h(),y=T();if((0,t.useContext)(eS)){if(v)throw Error("<Composition> was mounted inside the `component` that was passed to the <Player>. See https://remotion.dev/docs/wrong-composition-mount for help.");throw Error("<Composition> mounted inside another composition. See https://remotion.dev/docs/wrong-composition-mount for help.")}let{folderName:b,parentName:x}=(0,t.useContext)(tD);(0,t.useEffect)(()=>{if(!s)throw Error("No id for composition passed.");if(!tH(s))throw Error(`Composition id can only contain a-z, A-Z, 0-9, CJK characters and -. You passed ${s}`);var t="defaultProps";if(l){if("object"!=typeof l)throw Error(`"${t}" must be an object, but you passed a value of type ${typeof l}`);if(Array.isArray(l))throw Error(`"${t}" must be an object, an array was passed ${s?`for composition "${s}"`:""}`)}return d({durationInFrames:o??void 0,fps:n??void 0,height:a??void 0,width:e??void 0,id:s,folderName:b,component:m,defaultProps:j(l??{}),nonce:g,parentFolderName:x,schema:u??null,calculateMetadata:c.calculateMetadata??null}),()=>{p(s)}},[o,n,a,m,s,b,l,e,g,x,u,c.calculateMetadata,d,p]),(0,t.useEffect)(()=>{window.dispatchEvent(new CustomEvent(Q,{detail:{resetUnsaved:s}}))},[l,s]);let w=X(s);return y.isStudio&&f&&f.component===m&&f.id===s?null===w||"success"!==w.type&&"success-and-refreshing"!==w.type?null:(0,i.createPortal)((0,r.jsx)(ek,{children:(0,r.jsx)(t.Suspense,{fallback:(0,r.jsx)(t$,{}),children:(0,r.jsx)(m,{...w.result.props??{}})})}),tU()):y.isRendering&&f&&f.component===m&&f.id===s?null===w||"success"!==w.type&&"success-and-refreshing"!==w.type?null:(0,i.createPortal)((0,r.jsx)(ek,{children:(0,r.jsx)(t.Suspense,{fallback:(0,r.jsx)(tq,{}),children:(0,r.jsx)(m,{...w.result.props??{}})})}),tU()):null},tZ=e=>{let{onlyRenderComposition:i}=(0,t.useContext)(I);return i&&i!==e.id?null:(0,r.jsx)(tG,{...e})},tK="function"==typeof Float32Array;function tQ(e,t,r){return(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e}function tX(e,t,r){return 3*(1-3*r+3*t)*e*e+2*(3*r-6*t)*e+3*t}class tJ{static step0(e){return+(e>0)}static step1(e){return+(e>=1)}static linear(e){return e}static ease(e){return tJ.bezier(.42,0,1,1)(e)}static quad(e){return e*e}static cubic(e){return e*e*e}static poly(e){return t=>t**e}static sin(e){return 1-Math.cos(e*Math.PI/2)}static circle(e){return 1-Math.sqrt(1-e*e)}static exp(e){return 2**(10*(e-1))}static elastic(e=1){let t=e*Math.PI;return e=>1-Math.cos(e*Math.PI/2)**3*Math.cos(e*t)}static back(e=1.70158){return t=>t*t*((e+1)*t-e)}static bounce(e){if(e<1/2.75)return 7.5625*e*e;if(e<2/2.75){let t=e-1.5/2.75;return 7.5625*t*t+.75}if(e<2.5/2.75){let t=e-2.25/2.75;return 7.5625*t*t+.9375}let t=e-2.625/2.75;return 7.5625*t*t+.984375}static bezier(e,t,r,i){if(!(e>=0&&e<=1&&r>=0&&r<=1))throw Error("bezier x values must be in [0, 1] range");let a=tK?new Float32Array(11):Array(11);if(e!==t||r!==i)for(let t=0;t<11;++t)a[t]=tQ(.1*t,e,r);return function(n){return e===t&&r===i?n:0===n?0:1===n?1:tQ(function(t){let i=0,n=1;for(;10!==n&&a[n]<=t;++n)i+=.1;let o=i+(t-a[--n])/(a[n+1]-a[n])*.1,s=tX(o,e,r);if(s>=.001){let i=o;for(let a=0;a<4;++a){let a=tX(i,e,r);if(0===a)break;let n=tQ(i,e,r)-t;i-=n/a}return i}return 0===s?o:function({aX:e,_aA:t,_aB:r,mX1:i,mX2:a}){let n,o,s=0,l=t,u=r;do(n=tQ(o=l+(u-l)/2,i,a)-e)>0?u=o:l=o;while(Math.abs(n)>1e-7&&++s<10)return o}({aX:t,_aA:i,_aB:i+.1,mX1:e,mX2:r})}(n),t,i)}}static in(e){return e}static out(e){return t=>1-e(1-t)}static inOut(e){return t=>t<.5?e(2*t)/2:1-e((1-t)*2)/2}}var tY=!1,t0=!1,t1=()=>"u"<typeof document?(tY||(tY=!0,console.warn("Called getStaticFiles() on the server. The API is only available in the browser. An empty array was returned.")),[]):window.remotion_isPlayer?(t0||(t0=!0,console.warn("Called getStaticFiles() while using the Remotion Player. The API is only available while using the Remotion Studio. An empty array was returned.")),[]):window.remotion_staticFiles,t2=(0,t.forwardRef)(({onLoad:e,onError:i,delayRenderRetries:a,delayRenderTimeoutInMilliseconds:n,...o},s)=>{let{delayRender:l,continueRender:u}=ey(),[c]=(0,t.useState)(()=>l(`Loading <IFrame> with source ${o.src}`,{retries:a??void 0,timeoutInMilliseconds:n??void 0})),d=(0,t.useCallback)(t=>{u(c),e?.(t)},[c,e,u]),p=(0,t.useCallback)(e=>{u(c),i?i(e):console.error("Error loading iframe:",e,"Handle the event using the onError() prop to make this message disappear.")},[c,i,u]);return(0,r.jsx)("iframe",{referrerPolicy:"strict-origin-when-cross-origin",...o,ref:s,onError:p,onLoad:d})}),t4=(0,t.forwardRef)(({onError:e,maxRetries:i=2,src:a,pauseWhenLoading:n,delayRenderRetries:o,delayRenderTimeoutInMilliseconds:s,onImageFrame:l,crossOrigin:u,...c},d)=>{let p=(0,t.useRef)(null),f=(0,t.useRef)({}),{delayPlayback:h}=ty();if((0,t.useContext)(b),!a)throw Error('No "src" prop was passed to <Img>.');(0,t.useImperativeHandle)(d,()=>p.current,[]),eX(a);let m=(0,t.useCallback)(e=>{if(!p.current)return;let t=p.current.src;setTimeout(()=>{if(!p.current)return;let e=p.current?.src;e===t&&(p.current.removeAttribute("src"),p.current.setAttribute("src",e))},e)},[]),g=(0,t.useCallback)(t=>{if(f.current){if(f.current[p.current?.src]=(f.current[p.current?.src]??0)+1,e&&(f.current[p.current?.src]??0)>i)return void e(t);if((f.current[p.current?.src]??0)<=i){var r;let e=(r=f.current[p.current?.src]??0,1e3*2**(r-1));console.warn(`Could not load image with source ${p.current?.src}, retrying again in ${e}ms`),m(e);return}es("Error loading image with src: "+p.current?.src)}},[i,e,m]),{delayRender:v,continueRender:y}=ey(),{isClientSideRendering:x}=T(),w=e5({crossOrigin:u,requestsVideoFrame:!1,isClientSideRendering:x});return(0,r.jsx)("img",{...c,ref:p,crossOrigin:w,onError:g,decoding:"sync"})}),t3=t.default.createRef(),t6={};n(t6,{makeDefaultPreviewCSS:()=>t9,injectCSS:()=>t5,OBJECTFIT_CONTAIN_CLASS_NAME:()=>t7});var t8={},t5=e=>{if("u"<typeof document||t8[e])return()=>{};let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");return r.appendChild(document.createTextNode(e)),t.prepend(r),t8[e]=r,()=>{let t=t8[e];t&&(t.parentNode&&t.parentNode.removeChild(t),delete t8[e])}},t7="__remotion_objectfitcontain",t9=(e,t)=>e?`
    ${e} * {
      box-sizing: border-box;
    }
    ${e} *:-webkit-full-screen {
      width: 100%;
      height: 100%;
    }
    ${e} .${t7} {
      object-fit: contain;
    }
  `:`
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
	    background-color: ${t};
    }
    .${t7} {
      object-fit: contain;
    }
    `,re="__remotion-studio-container",rt=t.default.createContext(null),rr=null,ri=[],ra=e=>{if(!e)throw Error(`You must pass a React component to registerRoot(), but ${JSON.stringify(e)} was passed.`);if(rr)throw Error("registerRoot() was called more than once.");rr=e,ri.forEach(t=>{t(e)})},rn=(0,t.createContext)(null),ro=({children:e,videoEnabled:i,audioEnabled:a})=>{let n=(0,t.useMemo)(()=>({videoEnabled:i,audioEnabled:a}),[i,a]);return(0,r.jsx)(rn.Provider,{value:n,children:e})},rs=t.default.createContext(null),rl=(0,t.createContext)({setSize:()=>{},size:{size:"auto",translation:{x:0,y:0}}}),ru=({canvasSize:e,compositionHeight:t,compositionWidth:r,previewSize:i})=>{let a=Math.min(e.height/t,e.width/r);return"auto"===i?0===a?1:a:Number(i)},rc=e=>{let r=t.default.useContext(rs),i=t.default.useContext(rl),a=eC(),n=T();if(null===r||null===a||null===i){if(e?.dontThrowIfOutsideOfRemotion||n.isRendering)return 1;throw Error(["useCurrentScale() was called outside of a Remotion context.","This hook can only be called in a component that is being rendered by Remotion.","If you want to this hook to return 1 outside of Remotion, pass {dontThrowIfOutsideOfRemotion: true} as an option.","If you think you called this hook in a Remotion component, make sure all versions of Remotion are aligned."].join(`
`))}return"scale"===r.type?r.scale:ru({canvasSize:r.canvasSize,compositionHeight:a.height,compositionWidth:a.width,previewSize:i.size.size})},rd=({onError:e,volume:i,playbackRate:a,src:n,muted:o,allowAmplificationDuringRender:s,transparent:l,toneMapped:u,toneFrequency:c,name:d,loopVolumeCurveBehavior:p,delayRenderRetries:f,delayRenderTimeoutInMilliseconds:h,onVideoFrame:g,crossOrigin:v,audioStreamIndex:y,...x})=>{let w=er(),S=e_(),k=tc(p),E=eC(),_=(0,t.useContext)(b),T=tu(),{registerRenderAsset:P,unregisterRenderAsset:I}=(0,t.useContext)(ej);if(!n)throw TypeError("No `src` was passed to <OffthreadVideo>.");let A=(0,t.useMemo)(()=>`offthreadvideo-${C(n)}-${_?.cumulatedFrom}-${_?.relativeFrom}-${_?.durationInFrames}`,[n,_?.cumulatedFrom,_?.relativeFrom,_?.durationInFrames]);if(!E)throw Error("No video config found");let O=td({volume:i,frame:k,mediaVolume:1});tO(O),(0,t.useEffect)(()=>{if(!n)throw Error("No src passed");if(window.remotion_audioEnabled&&!o&&!(O<=0))return P({type:"video",src:eN(n),id:A,frame:w,volume:O,mediaFrame:S,playbackRate:a,toneFrequency:c,audioStartFrame:Math.max(0,-(_?.relativeFrom??0)),audioStreamIndex:y}),()=>I(A)},[o,n,P,A,I,O,S,w,a,c,_?.relativeFrom,y]);let M=(0,t.useMemo)(()=>tS({frame:S,playbackRate:a||1,startFrom:-T})/E.fps,[S,T,a,E.fps]),F=(0,t.useMemo)(()=>(({src:e,transparent:t,currentTime:r,toneMapped:i})=>`http://localhost:${window.remotion_proxyPort}/proxy?src=${encodeURIComponent(eN(e))}&time=${encodeURIComponent(Math.max(0,r))}&transparent=${String(t)}&toneMapped=${String(i)}`)({src:n,currentTime:M,transparent:l,toneMapped:u}),[u,M,n,l]),[R,D]=(0,t.useState)(null),{delayRender:j,continueRender:L}=ey();(0,t.useLayoutEffect)(()=>{if(!window.remotion_videoEnabled)return;let t=[];D(null);let r=new AbortController,i=j(`Fetching ${F} from server`,{retries:f??void 0,timeoutInMilliseconds:h??void 0});return(async()=>{try{let e=await fetch(F,{signal:r.signal,cache:"no-store"});if(200!==e.status){if(500===e.status){let t=await e.json();if(t.error){let e=t.error.replace(/^Error: /,"");throw Error(e)}}throw Error(`Server returned status ${e.status} while fetching ${F}`)}let a=await e.blob(),n=URL.createObjectURL(a);t.push(()=>URL.revokeObjectURL(n)),D({src:n,handle:i})}catch(t){if(t.message.includes("aborted")||r.signal.aborted)return void L(i);t.message.includes("Failed to fetch")&&(t=Error(`Failed to fetch ${F}. This could be caused by Chrome rejecting the request because the disk space is low. Consider increasing the disk size of your environment.`,{cause:t})),e?e(t):es(t)}})(),t.push(()=>{r.signal.aborted||r.abort()}),()=>{t.forEach(e=>e())}},[F,f,h,e,L,j]);let B=(0,t.useCallback)(()=>{e?e?.(Error("Failed to load image with src "+R)):es("Failed to load image with src "+R)},[R,e]),N=(0,t.useMemo)(()=>[t7,x.className].filter(m).join(" "),[x.className]),$=(0,t.useCallback)(e=>{g&&g(e)},[g]);return R&&window.remotion_videoEnabled?(L(R.handle),(0,r.jsx)(t4,{src:R.src,delayRenderRetries:f,delayRenderTimeoutInMilliseconds:h,onImageFrame:$,...x,onError:B,className:N})):null},rp=(0,t.forwardRef)((e,i)=>{let a=(0,t.useContext)(tr);if(!a)throw Error("SharedAudioContext not found");let n=(0,t.useRef)(null),o=(0,t.useMemo)(()=>a.audioContext?e9({audioContext:a.audioContext,ref:n}):null,[a.audioContext]);(t.default.useInsertionEffect??t.default.useLayoutEffect)(()=>()=>{requestAnimationFrame(()=>{o?.cleanup()})},[o]);let{volume:s,muted:l,playbackRate:u,onlyWarnForMediaSeekingError:c,src:d,onDuration:p,acceptableTimeShift:f,acceptableTimeShiftInSeconds:h,toneFrequency:m,name:v,_remotionInternalNativeLoopPassed:y,_remotionInternalStack:x,style:S,pauseWhenBuffering:k,showInTimeline:C,loopVolumeCurveBehavior:E,onError:_,onAutoPlayError:T,onVideoFrame:P,crossOrigin:I,delayRenderRetries:A,delayRenderTimeoutInMilliseconds:O,allowAmplificationDuringRender:M,useWebAudioApi:F,audioStreamIndex:R,...D}=e,j=tc(E??"repeat"),{fps:L,durationInFrames:B}=eE(),N=(0,t.useContext)(b),{hidden:$}=(0,t.useContext)(w),z=em(),U=eg(),[V]=(0,t.useState)(()=>String(Math.random())),H=$[V]??!1;if(void 0!==f)throw Error("acceptableTimeShift has been removed. Use acceptableTimeShiftInSeconds instead.");let[W]=tI(),[q]=tA(),G=td({frame:j,volume:s,mediaVolume:W});tO(G),th({volume:s,mediaVolume:W,mediaType:"video",src:d,playbackRate:e.playbackRate??1,displayName:v??null,id:V,stack:x,showInTimeline:C,premountDisplay:N?.premountDisplay??null,postmountDisplay:N?.postmountDisplay??null,loopDisplay:void 0}),tE({mediaRef:n,src:d,mediaType:"video",playbackRate:e.playbackRate??1,onlyWarnForMediaSeekingError:c,acceptableTimeshift:h??null,isPremounting:!!N?.premounting,isPostmounting:!!N?.postmounting,pauseWhenBuffering:k,onAutoPlayError:T??null}),t_({id:V,isPostmounting:!!N?.postmounting,isPremounting:!!N?.premounting,mediaRef:n,mediaType:"video",onAutoPlayError:T??null}),tl({logLevel:z,mediaRef:n,volume:G,source:o,shouldUseWebAudioApi:F??!1});let Z=N?N.relativeFrom:0,K=N?Math.min(N.durationInFrames,B):B,Q=(({actualSrc:e,actualFrom:r,duration:i,fps:a})=>{let n=(0,t.useRef)(r),o=(0,t.useRef)(i),s=(0,t.useRef)(e);return(({prevStartFrom:e,newStartFrom:t,prevDuration:r,newDuration:i,fps:a})=>{let n=ts({actualFrom:e,fps:a}),o=ts({actualFrom:t,fps:a}),s=(({duration:e,fps:t})=>tn(e,t))({duration:r,fps:a}),l=(({duration:e,fps:t})=>tn(e,t))({duration:i,fps:a});return!(o<n)&&!(l>s)})({prevStartFrom:n.current,newStartFrom:r,prevDuration:o.current,newDuration:i,fps:a})&&e===s.current||(n.current=r,o.current=i,s.current=e),(({actualSrc:e,actualFrom:t,duration:r,fps:i})=>{if(to()&&e.startsWith("blob:")||e.startsWith("data:")||new URL(e,"http://localhost:3000").hash||!Number.isFinite(t))return e;let a=`${e}#t=${ts({actualFrom:t,fps:i})}`;return Number.isFinite(r)?`${a},${(({duration:e,fps:t})=>tn(e,t))({duration:r,fps:i})}`:a})({actualSrc:s.current,actualFrom:n.current,duration:o.current,fps:a})})({actualSrc:eX(d),actualFrom:Z,duration:K,fps:L});(0,t.useImperativeHandle)(i,()=>n.current,[]),(0,t.useState)(()=>eV({logLevel:z,message:`Mounting video with source = ${Q}, v=${g}, user agent=${"u"<typeof navigator?"server":navigator.userAgent}`,tag:"video",mountTime:U})),(0,t.useEffect)(()=>{let{current:e}=n;if(!e)return;let t=()=>{if(e.error){if(console.error("Error occurred in video",e?.error),_)return void _(Error(`Code ${e.error.code}: ${e.error.message}`));throw Error(`The browser threw an error while playing the video ${d}: Code ${e.error.code} - ${e?.error?.message}. See https://remotion.dev/docs/media-playback-error for help. Pass an onError() prop to handle the error.`)}if(_)return void _(Error(`The browser threw an error while playing the video ${d}`));throw Error("The browser threw an error while playing the video")};return e.addEventListener("error",t,{once:!0}),()=>{e.removeEventListener("error",t)}},[_,d]);let X=(0,t.useRef)(p);X.current=p,(({ref:e,onVideoFrame:r})=>{(0,t.useEffect)(()=>{let{current:t}=e;if(!t||!r)return;let i=0,a=()=>{e.current&&(r(e.current),i=e.current.requestVideoFrameCallback(a))};return a(),()=>{t.cancelVideoFrameCallback(i)}},[r,e])})({ref:n,onVideoFrame:P}),(0,t.useEffect)(()=>{let{current:e}=n;if(!e)return;if(e.duration)return void X.current?.(d,e.duration);let t=()=>{X.current?.(d,e.duration)};return e.addEventListener("loadedmetadata",t),()=>{e.removeEventListener("loadedmetadata",t)}},[d]),(0,t.useEffect)(()=>{let{current:e}=n;e&&(to()?e.preload="metadata":e.preload="auto")},[]);let J=(0,t.useMemo)(()=>({...S,opacity:H?0:S?.opacity??1}),[H,S]),Y=e5({crossOrigin:I,requestsVideoFrame:!!P,isClientSideRendering:!1});return(0,r.jsx)("video",{ref:n,muted:l||q||H||G<=0,playsInline:!0,src:Q,loop:y,style:J,disableRemotePlayback:!0,crossOrigin:Y,...D})}),rf=e=>{let{startFrom:i,endAt:a,trimBefore:n,trimAfter:o,name:s,pauseWhenBuffering:l,stack:u,showInTimeline:c,...d}=e,p=T();if(p.isClientSideRendering)throw Error("<OffthreadVideo> is not supported in @remotion/web-renderer. Use <Video> from @remotion/media instead. See https://remotion.dev/docs/client-side-rendering/limitations");let f=(0,t.useCallback)(()=>{},[]);if("string"!=typeof e.src)throw TypeError(`The \`<OffthreadVideo>\` tag requires a string for \`src\`, but got ${JSON.stringify(e.src)} instead.`);e2({startFrom:i,endAt:a,trimBefore:n,trimAfter:o});let{trimBeforeValue:h,trimAfterValue:m}=e4({startFrom:i,endAt:a,trimBefore:n,trimAfter:o});if(void 0!==h||void 0!==m)return(0,r.jsx)(eA,{layout:"none",from:0-(h??0),showInTimeline:!1,durationInFrames:m,name:s,children:(0,r.jsx)(rf,{pauseWhenBuffering:l??!1,...d,trimAfter:void 0,name:void 0,showInTimeline:c,trimBefore:void 0,stack:void 0,startFrom:void 0,endAt:void 0})});if(e1(e,"Video"),p.isRendering)return(0,r.jsx)(rd,{pauseWhenBuffering:l??!1,...d,trimAfter:void 0,name:void 0,showInTimeline:c,trimBefore:void 0,stack:void 0,startFrom:void 0,endAt:void 0});let{transparent:g,toneMapped:v,onAutoPlayError:y,onVideoFrame:b,crossOrigin:x,delayRenderRetries:w,delayRenderTimeoutInMilliseconds:S,...k}=d;return(0,r.jsx)(rp,{_remotionInternalStack:u??null,onDuration:f,onlyWarnForMediaSeekingError:!0,pauseWhenBuffering:l??!1,showInTimeline:c??!0,onAutoPlayError:y??void 0,onVideoFrame:b??null,crossOrigin:x,...k,_remotionInternalNativeLoopPassed:!1})},rh=({src:e,acceptableTimeShiftInSeconds:t,allowAmplificationDuringRender:i,audioStreamIndex:a,className:n,crossOrigin:o,delayRenderRetries:s,delayRenderTimeoutInMilliseconds:l,id:u,loopVolumeCurveBehavior:c,muted:d,name:p,onAutoPlayError:f,onError:h,onVideoFrame:m,pauseWhenBuffering:g,playbackRate:v,showInTimeline:y,style:b,toneFrequency:x,toneMapped:w,transparent:S,trimAfter:k,trimBefore:C,useWebAudioApi:E,volume:_,_remotionInternalNativeLoopPassed:T,endAt:P,stack:I,startFrom:A,imageFormat:O})=>{if(O)throw TypeError("The `<OffthreadVideo>` tag does no longer accept `imageFormat`. Use the `transparent` prop if you want to render a transparent video.");return(0,r.jsx)(rf,{acceptableTimeShiftInSeconds:t,allowAmplificationDuringRender:i??!0,audioStreamIndex:a??0,className:n,crossOrigin:o,delayRenderRetries:s,delayRenderTimeoutInMilliseconds:l,id:u,loopVolumeCurveBehavior:c??"repeat",muted:d??!1,name:p,onAutoPlayError:f??null,onError:h,onVideoFrame:m,pauseWhenBuffering:g??!0,playbackRate:v??1,toneFrequency:x??1,showInTimeline:y??!0,src:e,stack:I,startFrom:A,_remotionInternalNativeLoopPassed:T??!1,endAt:P,style:b,toneMapped:w??!0,transparent:S??!1,trimAfter:k,trimBefore:C,useWebAudioApi:E??!1,volume:_})};p(rh);var rm="remotion_staticFilesChanged",rg=(e,t)=>{if(!o().isStudio)return console.warn("The watchStaticFile() API is only available while using the Remotion Studio."),{cancel:()=>{}};let r=e.startsWith(window.remotion_staticBase)?e.replace(window.remotion_staticBase,""):e,i=r.startsWith("/")?r.slice(1):r,a=window.remotion_staticFiles.find(e=>e.name===i),n=e=>{let r=e.detail.files.find(e=>e.name===i);if(!r){void 0!==a&&t(null),a=void 0;return}(void 0===a||a.lastModified!==r.lastModified)&&(t(r),a=r)};return window.addEventListener(rm,n),{cancel:()=>window.removeEventListener(rm,n)}},rv={MaxMediaCacheSizeContext:rt,useUnsafeVideoConfig:eC,useFrameForVolumeProp:tc,useTimelinePosition:er,evaluateVolume:td,getAbsoluteSrc:eN,Timeline:E,validateMediaTrimProps:e2,validateMediaProps:e1,resolveTrimProps:e4,VideoForPreview:rp,CompositionManager:P,CompositionSetters:I,SequenceManager:x,SequenceVisibilityToggleContext:w,RemotionRootContexts:({children:e,numberOfAudioTags:i,logLevel:a,audioLatencyHint:n,videoEnabled:o,audioEnabled:s,frameState:l})=>{let[u,c]=(0,t.useState)(0),[d,p]=(0,t.useState)(0),f=(0,t.useMemo)(()=>{let e=0;return{getNonce:()=>e++,fastRefreshes:u,manualRefreshes:d}},[u,d]),h=(0,t.useMemo)(()=>({increaseManualRefreshes:()=>{p(e=>e+1)}}),[]);(0,t.useEffect)(()=>{"u">typeof __webpack_module__&&__webpack_module__.hot&&__webpack_module__.hot.addStatusHandler(e=>{"idle"===e&&c(e=>e+1)})},[]);let m=(0,t.useMemo)(()=>({logLevel:a,mountTime:Date.now()}),[a]);return(0,r.jsx)(eh.Provider,{value:m,children:(0,r.jsx)(N.Provider,{value:f,children:(0,r.jsx)($.Provider,{value:h,children:(0,r.jsx)(ew,{frameState:l,children:(0,r.jsx)(ro,{videoEnabled:o,audioEnabled:s,children:(0,r.jsx)(F,{children:(0,r.jsx)(eZ,{children:(0,r.jsx)(S,{children:(0,r.jsx)(ti,{numberOfAudioTags:i,audioLatencyHint:n,audioEnabled:s,children:(0,r.jsx)(e8,{children:(0,r.jsx)(tg,{children:e})})})})})})})})})})})},CompositionManagerProvider:({children:e,onlyRenderComposition:i,currentCompositionMetadata:a,initialCompositions:n,initialCanvasContent:o})=>{let[s,l]=(0,t.useState)([]),[u,c]=(0,t.useState)(o),[d,p]=(0,t.useState)(n),f=(0,t.useRef)(d),h=(0,t.useCallback)(e=>{p(t=>{let r=e(t);return f.current=r,r})},[]),m=(0,t.useCallback)(e=>{h(t=>{if(t.find(t=>t.id===e.id))throw Error(`Multiple composition with id ${e.id} are registered.`);return[...t,e].slice().sort((e,t)=>e.nonce-t.nonce)})},[h]),g=(0,t.useCallback)(e=>{p(t=>t.filter(t=>t.id!==e))},[]),v=(0,t.useCallback)((e,t)=>{l(r=>[...r,{name:e,parent:t}])},[]),y=(0,t.useCallback)((e,t)=>{l(r=>r.filter(r=>r.name!==e||r.parent!==t))},[]);(0,t.useImperativeHandle)(t3,()=>({getCompositions:()=>f.current}),[]);let b=(0,t.useCallback)((e,t)=>{p(r=>r.map(r=>r.id===e?{...r,defaultProps:t}:r))},[]),x=(0,t.useMemo)(()=>({registerComposition:m,unregisterComposition:g,registerFolder:v,unregisterFolder:y,setCanvasContent:c,updateCompositionDefaultProps:b,onlyRenderComposition:i}),[m,v,g,y,b,i]),w=(0,t.useMemo)(()=>({compositions:d,folders:s,currentCompositionMetadata:a,canvasContent:u}),[d,s,a,u]);return(0,r.jsx)(P.Provider,{value:w,children:(0,r.jsx)(I.Provider,{value:x,children:e})})},useVideo:J,getRoot:()=>rr,useMediaVolumeState:tI,useMediaMutedState:tA,useMediaInTimeline:th,useLazyComponent:tV,truthy:m,SequenceContext:b,useRemotionContexts:function(){let e=t.default.useContext(P),r=t.default.useContext(ex),i=t.default.useContext(eb),a=t.default.useContext(b),n=t.default.useContext(N),o=t.default.useContext(eS),s=t.default.useContext(eH),l=t.default.useContext(Z),u=t.default.useContext(ej),c=t.default.useContext(x),d=t.default.useContext(tm),p=t.default.useContext(eh);return(0,t.useMemo)(()=>({compositionManagerCtx:e,timelineContext:r,setTimelineContext:i,sequenceContext:a,nonceContext:n,canUseRemotionHooksContext:o,preloadContext:s,resolveCompositionContext:l,renderAssetManagerContext:u,sequenceManagerContext:c,bufferManagerContext:d,logLevelContext:p}),[e,n,a,i,r,o,s,l,u,c,d,p])},RemotionContextProvider:e=>{let{children:t,contexts:i}=e;return(0,r.jsx)(eh.Provider,{value:i.logLevelContext,children:(0,r.jsx)(eS.Provider,{value:i.canUseRemotionHooksContext,children:(0,r.jsx)(N.Provider,{value:i.nonceContext,children:(0,r.jsx)(eH.Provider,{value:i.preloadContext,children:(0,r.jsx)(P.Provider,{value:i.compositionManagerCtx,children:(0,r.jsx)(x.Provider,{value:i.sequenceManagerContext,children:(0,r.jsx)(ej.Provider,{value:i.renderAssetManagerContext,children:(0,r.jsx)(Z.Provider,{value:i.resolveCompositionContext,children:(0,r.jsx)(ex.Provider,{value:i.timelineContext,children:(0,r.jsx)(eb.Provider,{value:i.setTimelineContext,children:(0,r.jsx)(b.Provider,{value:i.sequenceContext,children:(0,r.jsx)(tm.Provider,{value:i.bufferManagerContext,children:t})})})})})})})})})})})})},CSSUtils:t6,setupEnvVariables:()=>{let e=(()=>{if(o().isRendering){let e=window.remotion_envVariables;return e?{...JSON.parse(e),NODE_ENV:"production"}:{}}return{NODE_ENV:"production"}})();window.process||(window.process={}),window.process.env||(window.process.env={}),Object.keys(e).forEach(t=>{window.process.env[t]=e[t]})},MediaVolumeContext:tT,SetMediaVolumeContext:tP,getRemotionEnvironment:o,SharedAudioContext:tr,SharedAudioContextProvider:ti,invalidCompositionErrorMessage:tW,calculateMediaDuration:e$,isCompositionIdValid:tH,getPreviewDomElement:()=>document.getElementById(re),compositionsRef:t3,portalNode:tU,waitForRoot:e=>rr?(e(rr),()=>{}):(ri.push(e),()=>{ri=ri.filter(t=>t!==e)}),SetTimelineContext:eb,CanUseRemotionHooksProvider:ek,CanUseRemotionHooks:eS,PrefetchProvider:eZ,DurationsContextProvider:e8,IsPlayerContextProvider:({children:e})=>(0,r.jsx)(f.Provider,{value:!0,children:e}),useIsPlayer:h,EditorPropsProvider:F,EditorPropsContext:A,usePreload:eX,NonceContext:N,SetNonceContext:$,resolveVideoConfig:G,useResolvedVideoConfig:X,resolveCompositionsRef:K,ResolveCompositionConfigInStudio:({children:e})=>{let[i,a]=(0,t.useState)(null),{compositions:n,canvasContent:o,currentCompositionMetadata:s}=(0,t.useContext)(P),{fastRefreshes:l,manualRefreshes:u}=(0,t.useContext)(N),c=(0,t.useMemo)(()=>n.find(e=>o&&"composition"===o.type&&o.compositionId===e.id),[o,n]),d=n.find(e=>e.id===i),{props:p}=(0,t.useContext)(A),f=T(),h=(0,t.useMemo)(()=>({}),[f.isPlayer]),[m,g]=(0,t.useState)({}),v=(0,t.useMemo)(()=>c?p[c.id]??{}:{},[p,c]),y=(0,t.useMemo)(()=>d?p[d.id]??{}:{},[p,d]),b=!!s,x=(0,t.useCallback)(({calculateMetadata:e,combinedProps:t,compositionDurationInFrames:r,compositionFps:i,compositionHeight:a,compositionId:n,compositionWidth:o,defaultProps:s})=>{let l=new AbortController;if(b)return l;let{signal:u}=l,c=(e=>{try{let t=G(e);return{type:"success",result:t}}catch(e){return{type:"error",error:e}}})({compositionId:n,calculateMetadata:e,inputProps:t,signal:u,defaultProps:s,compositionDurationInFrames:r,compositionFps:i,compositionHeight:a,compositionWidth:o});if("error"===c.type)return g(e=>({...e,[n]:{type:"error",error:c.error}})),l;let d=c.result;return"object"==typeof d&&"then"in d?(g(e=>{let t=e[n];return t?.type==="success"||t?.type==="success-and-refreshing"?{...e,[n]:{type:"success-and-refreshing",result:t.result}}:{...e,[n]:{type:"loading"}}}),d.then(e=>{l.signal.aborted||g(t=>({...t,[n]:{type:"success",result:e}}))}).catch(e=>{l.signal.aborted||g(t=>({...t,[n]:{type:"error",error:e}}))})):g(e=>({...e,[n]:{type:"success",result:d}})),l},[b]),w=o?.type==="composition"?o.compositionId:null;(0,t.useImperativeHandle)(K,()=>({setCurrentRenderModalComposition:e=>{a(e)},reloadCurrentlySelectedComposition:()=>{if(!w)return;let e=n.find(e=>e.id===w);if(!e)throw Error(`Could not find composition with id ${w}`);let t=p[w]??{},r={...e.defaultProps??{},...t??{}},i={...r,...h??{}};x({defaultProps:r,calculateMetadata:e.calculateMetadata,combinedProps:i,compositionDurationInFrames:e.durationInFrames??null,compositionFps:e.fps??null,compositionHeight:e.height??null,compositionWidth:e.width??null,compositionId:e.id})}}),[p,n,w,x,h]);let S=c?.id===d?.id,k=(0,t.useMemo)(()=>({...c?.defaultProps??{},...v??{}}),[c?.defaultProps,v]),C=(0,t.useMemo)(()=>({...k,...h??{}}),[k,h]),E=c&&!!c.calculateMetadata;(0,t.useEffect)(()=>{if(E){let e=x({calculateMetadata:c.calculateMetadata,combinedProps:C,compositionDurationInFrames:c.durationInFrames??null,compositionFps:c.fps??null,compositionHeight:c.height??null,compositionWidth:c.width??null,defaultProps:k,compositionId:c.id});return()=>{e.abort()}}},[E,k,x,C,c?.calculateMetadata,c?.durationInFrames,c?.fps,c?.height,c?.id,c?.width,!1]),(0,t.useEffect)(()=>{if(d&&!S){let e={...d.defaultProps??{},...y??{},...h??{}},t=x({calculateMetadata:d.calculateMetadata,compositionDurationInFrames:d.durationInFrames??null,compositionFps:d.fps??null,compositionHeight:d.height??null,compositionId:d.id,compositionWidth:d.width??null,defaultProps:k,combinedProps:e});return()=>{t.abort()}}},[k,x,h,S,d,y]);let _=(0,t.useMemo)(()=>{let e=n.filter(e=>null===e.calculateMetadata);return{...m,...e.reduce((e,t)=>({...e,[t.id]:{type:"success",result:{...t,defaultProps:t.defaultProps??{}}}}),{})}},[n,m]);return(0,r.jsx)(Z.Provider,{value:_,children:e})},REMOTION_STUDIO_CONTAINER_ELEMENT:re,RenderAssetManager:ej,persistCurrentFrame:Y,useTimelineSetFrame:ei,isIosSafari:to,WATCH_REMOTION_STATIC_FILES:rm,addSequenceStackTraces:p,useMediaStartsAt:tu,BufferingProvider:tg,BufferingContextReact:tm,enableSequenceStackTraces:d,CurrentScaleContext:rs,PreviewSizeContext:rl,calculateScale:ru,editorPropsProviderRef:O,PROPS_UPDATED_EXTERNALLY:Q,validateRenderAsset:eD,Log:ed,LogLevelContext:eh,useLogLevel:em,playbackLogging:eV,timeValueRef:M,compositionSelectorRef:(0,t.createRef)(),RemotionEnvironmentContext:_,warnAboutTooHighVolume:tO,AudioForPreview:tM,OBJECTFIT_CONTAIN_CLASS_NAME:t7,InnerOffthreadVideo:rf,useBasicMediaInTimeline:tf,getInputPropsOverride:()=>{if("u"<typeof localStorage)return null;let e=localStorage.getItem("remotion_inputPropsOverride"+window.location.origin);return e?JSON.parse(e):null},setInputPropsOverride:e=>{if("u">typeof localStorage){if(null===e)return void localStorage.removeItem("remotion_inputPropsOverride"+window.location.origin);localStorage.setItem("remotion_inputPropsOverride"+window.location.origin,JSON.stringify(e))}},useVideoEnabled:()=>{let e=(0,t.useContext)(rn);return e&&null!==e.videoEnabled?e.videoEnabled:window.remotion_videoEnabled},useAudioEnabled:()=>{let e=(0,t.useContext)(rn);return e&&null!==e.audioEnabled?e.audioEnabled:window.remotion_audioEnabled},useIsPlayerBuffering:tv,TimelinePosition:E,DelayRenderContextType:ev,TimelineContext:ex,RenderAssetManagerProvider:({children:e,collectAssets:i})=>{let[a,n]=(0,t.useState)([]),o=(0,t.useRef)([]),s=(0,t.useCallback)(e=>{eD(e),o.current=[...o.current,e],n(o.current)},[]);i&&(0,t.useImperativeHandle)(i,()=>({collectAssets:()=>{let e=o.current;return o.current=[],n([]),e}}),[]);let l=(0,t.useCallback)(e=>{o.current=o.current.filter(t=>t.id!==e),n(o.current)},[]);(0,t.useLayoutEffect)(()=>{},[]);let u=(0,t.useMemo)(()=>({registerRenderAsset:s,unregisterRenderAsset:l,renderAssets:a}),[a,s,l]);return(0,r.jsx)(ej.Provider,{value:u,children:e})}},ry="[-+]?\\d*\\.?\\d+",rb=ry+"%";function rx(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}function rw(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function rS(e,t,r){let i=r<.5?r*(1+t):r+t-r*t,a=2*r-i;return Math.round(255*rw(a,i,e+1/3))<<24|Math.round(255*rw(a,i,e))<<16|Math.round(255*rw(a,i,e-1/3))<<8}function rk(e){let t=Number.parseInt(e,10);return t<0?0:t>255?255:t}function rC(e){return(Number.parseFloat(e)%360+360)%360/360}function rE(e){let t=Number.parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function r_(e){let t=Number.parseFloat(e);return t<0?0:t>100?1:t/100}var rT={transparent:0,aliceblue:0xf0f8ffff,antiquewhite:0xfaebd7ff,aqua:0xffffff,aquamarine:0x7fffd4ff,azure:0xf0ffffff,beige:0xf5f5dcff,bisque:0xffe4c4ff,black:255,blanchedalmond:0xffebcdff,blue:65535,blueviolet:0x8a2be2ff,brown:0xa52a2aff,burlywood:0xdeb887ff,burntsienna:0xea7e5dff,cadetblue:0x5f9ea0ff,chartreuse:0x7fff00ff,chocolate:0xd2691eff,coral:0xff7f50ff,cornflowerblue:0x6495edff,cornsilk:0xfff8dcff,crimson:0xdc143cff,cyan:0xffffff,darkblue:35839,darkcyan:9145343,darkgoldenrod:0xb8860bff,darkgray:0xa9a9a9ff,darkgreen:6553855,darkgrey:0xa9a9a9ff,darkkhaki:0xbdb76bff,darkmagenta:0x8b008bff,darkolivegreen:0x556b2fff,darkorange:0xff8c00ff,darkorchid:0x9932ccff,darkred:0x8b0000ff,darksalmon:0xe9967aff,darkseagreen:0x8fbc8fff,darkslateblue:0x483d8bff,darkslategray:0x2f4f4fff,darkslategrey:0x2f4f4fff,darkturquoise:0xced1ff,darkviolet:0x9400d3ff,deeppink:0xff1493ff,deepskyblue:0xbfffff,dimgray:0x696969ff,dimgrey:0x696969ff,dodgerblue:0x1e90ffff,firebrick:0xb22222ff,floralwhite:0xfffaf0ff,forestgreen:0x228b22ff,fuchsia:0xff00ffff,gainsboro:0xdcdcdcff,ghostwhite:0xf8f8ffff,gold:0xffd700ff,goldenrod:0xdaa520ff,gray:0x808080ff,green:8388863,greenyellow:0xadff2fff,grey:0x808080ff,honeydew:0xf0fff0ff,hotpink:0xff69b4ff,indianred:0xcd5c5cff,indigo:0x4b0082ff,ivory:0xfffff0ff,khaki:0xf0e68cff,lavender:0xe6e6faff,lavenderblush:0xfff0f5ff,lawngreen:0x7cfc00ff,lemonchiffon:0xfffacdff,lightblue:0xadd8e6ff,lightcoral:0xf08080ff,lightcyan:0xe0ffffff,lightgoldenrodyellow:0xfafad2ff,lightgray:0xd3d3d3ff,lightgreen:0x90ee90ff,lightgrey:0xd3d3d3ff,lightpink:0xffb6c1ff,lightsalmon:0xffa07aff,lightseagreen:0x20b2aaff,lightskyblue:0x87cefaff,lightslategray:0x778899ff,lightslategrey:0x778899ff,lightsteelblue:0xb0c4deff,lightyellow:0xffffe0ff,lime:0xff00ff,limegreen:0x32cd32ff,linen:0xfaf0e6ff,magenta:0xff00ffff,maroon:0x800000ff,mediumaquamarine:0x66cdaaff,mediumblue:52735,mediumorchid:0xba55d3ff,mediumpurple:0x9370dbff,mediumseagreen:0x3cb371ff,mediumslateblue:0x7b68eeff,mediumspringgreen:0xfa9aff,mediumturquoise:0x48d1ccff,mediumvioletred:0xc71585ff,midnightblue:0x191970ff,mintcream:0xf5fffaff,mistyrose:0xffe4e1ff,moccasin:0xffe4b5ff,navajowhite:0xffdeadff,navy:33023,oldlace:0xfdf5e6ff,olive:0x808000ff,olivedrab:0x6b8e23ff,orange:0xffa500ff,orangered:0xff4500ff,orchid:0xda70d6ff,palegoldenrod:0xeee8aaff,palegreen:0x98fb98ff,paleturquoise:0xafeeeeff,palevioletred:0xdb7093ff,papayawhip:0xffefd5ff,peachpuff:0xffdab9ff,peru:0xcd853fff,pink:0xffc0cbff,plum:0xdda0ddff,powderblue:0xb0e0e6ff,purple:0x800080ff,rebeccapurple:0x663399ff,red:0xff0000ff,rosybrown:0xbc8f8fff,royalblue:0x4169e1ff,saddlebrown:0x8b4513ff,salmon:0xfa8072ff,sandybrown:0xf4a460ff,seagreen:0x2e8b57ff,seashell:0xfff5eeff,sienna:0xa0522dff,silver:0xc0c0c0ff,skyblue:0x87ceebff,slateblue:0x6a5acdff,slategray:0x708090ff,slategrey:0x708090ff,snow:0xfffafaff,springgreen:0xff7fff,steelblue:0x4682b4ff,tan:0xd2b48cff,teal:8421631,thistle:0xd8bfd8ff,tomato:0xff6347ff,turquoise:0x40e0d0ff,violet:0xee82eeff,wheat:0xf5deb3ff,white:0xffffffff,whitesmoke:0xf5f5f5ff,yellow:0xffff00ff,yellowgreen:0x9acd32ff},rP=e=>(e>>24&255)/255,rI=e=>e>>16&255,rA=e=>e>>8&255,rO=e=>255&e,rM=(e,t,r)=>{if(void 0===e)throw TypeError("input can not be undefined");if(void 0===t)throw TypeError("inputRange can not be undefined");if(void 0===r)throw TypeError("outputRange can not be undefined");if(t.length!==r.length)throw TypeError("inputRange ("+t.length+" values provided) and outputRange ("+r.length+" values provided) must have the same length");return((e,t,r)=>{let[i,a,n,o]=[rI,rA,rO,rP].map(i=>{let a=tw(e,t,r.map(e=>i(e)),{extrapolateLeft:"clamp",extrapolateRight:"clamp"});return i===rP?Number(a.toFixed(3)):Math.round(a)});return`rgba(${i}, ${a}, ${n}, ${o})`})(e,t,r.map(e=>{let t;return((t=function(e){let t,r,i=(void 0===(r={rgb:void 0,rgba:void 0,hsl:void 0,hsla:void 0,hex3:void 0,hex4:void 0,hex5:void 0,hex6:void 0,hex8:void 0}).rgb&&(r.rgb=RegExp("rgb"+rx(ry,ry,ry)),r.rgba=RegExp("rgba"+rx(ry,ry,ry,ry)),r.hsl=RegExp("hsl"+rx(ry,rb,rb)),r.hsla=RegExp("hsla"+rx(ry,rb,rb,ry)),r.hex3=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,r.hex4=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,r.hex6=/^#([0-9a-fA-F]{6})$/,r.hex8=/^#([0-9a-fA-F]{8})$/),r);if(i.hex6&&(t=i.hex6.exec(e)))return Number.parseInt(t[1]+"ff",16)>>>0;if(void 0!==rT[e])return rT[e];if(i.rgb&&(t=i.rgb.exec(e)))return(rk(t[1])<<24|rk(t[2])<<16|rk(t[3])<<8|255)>>>0;if(i.rgba&&(t=i.rgba.exec(e)))return(rk(t[1])<<24|rk(t[2])<<16|rk(t[3])<<8|rE(t[4]))>>>0;if(i.hex3&&(t=i.hex3.exec(e)))return Number.parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0;if(i.hex8&&(t=i.hex8.exec(e)))return Number.parseInt(t[1],16)>>>0;if(i.hex4&&(t=i.hex4.exec(e)))return Number.parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0;if(i.hsl&&(t=i.hsl.exec(e)))return(255|rS(rC(t[1]),r_(t[2]),r_(t[3])))>>>0;if(i.hsla&&(t=i.hsla.exec(e)))return(rS(rC(t[1]),r_(t[2]),r_(t[3]))|rE(t[4]))>>>0;throw Error(`invalid color string ${e} provided`)}(e))<<24|t>>>8)>>>0}))},rF=e=>t.default.Children.toArray(e).reduce((e,r)=>r.type===t.default.Fragment?e.concat(rF(r.props.children)):(e.push(r),e),[]),rR=(0,t.createContext)(!1),rD=({children:e})=>(0,r.jsx)(rR.Provider,{value:!0,children:e}),rj=({children:e})=>(0,r.jsx)(rR.Provider,{value:!1,children:e}),rL=(0,t.forwardRef)(({children:e},i)=>{if(!t.default.useContext(rR))throw Error("This component must be inside a <Series /> component.");return(0,r.jsx)(rj,{children:e})}),rB=e=>{let i=(0,t.useMemo)(()=>{let i=0,a=rF(e.children);return t.Children.map(a,(e,t)=>{if("string"==typeof e){if(""===e.trim())return null;throw TypeError(`The <Series /> component only accepts a list of <Series.Sequence /> components as its children, but you passed a string "${e}"`)}if(e.type!==rL)throw TypeError(`The <Series /> component only accepts a list of <Series.Sequence /> components as its children, but got ${e} instead`);let n=`index = ${t}, duration = ${e.props.durationInFrames}`;if(!e?.props.children)throw TypeError(`A <Series.Sequence /> component (${n}) was detected to not have any children. Delete it to fix this error.`);let o=e.props.durationInFrames,{durationInFrames:s,children:l,from:u,name:c,...d}=e.props;(t!==a.length-1||o!==1/0)&&H(o,{component:"of a <Series.Sequence /> component",allowFloats:!0});let p=e.props.offset??0;if(Number.isNaN(p))throw TypeError(`The "offset" property of a <Series.Sequence /> must not be NaN, but got NaN (${n}).`);if(!Number.isFinite(p)||p%1!=0)throw TypeError(`The "offset" property of a <Series.Sequence /> must be finite, but got ${p} (${n}).`);let f=i+p;return i+=o+p,(0,r.jsx)(eA,{name:c||"<Series.Sequence>",from:f,durationInFrames:o,...d,ref:e.ref,children:e})})},[e.children]);return(0,r.jsx)(rD,{children:i})};rB.Sequence=rL,p(rL);var rN={damping:10,mass:1,stiffness:100,overshootClamping:!1},r$={},rz={};function rU({frame:e,fps:t,config:r={}}){let i=[e,t,r.damping,r.mass,r.overshootClamping,r.stiffness].join("-");if(rz[i])return rz[i];let a={lastTimestamp:0,current:0,toValue:1,velocity:0,prevPosition:0},n=Math.max(0,e),o=n%1;for(let e=0;e<=Math.floor(n);e++)e===Math.floor(n)&&(e+=o),a=function({animation:e,now:t,config:r}){let{toValue:i,lastTimestamp:a,current:n,velocity:o}=e,s=Math.min(t-a,64);if(r.damping<=0)throw Error("Spring damping must be greater than 0, otherwise the spring() animation will never end, causing an infinite loop.");let l=r.damping,u=r.mass,c=r.stiffness,d=[i,a,n,o,l,u,c,t].join("-");if(r$[d])return r$[d];let p=-o,f=i-n,h=l/(2*Math.sqrt(c*u)),m=Math.sqrt(c/u),g=m*Math.sqrt(1-h**2),v=s/1e3,y=Math.sin(g*v),b=Math.cos(g*v),x=Math.exp(-h*m*v),w=x*((p+h*m*f)/g*y+f*b),S=i-w,k=h*m*w-x*(b*(p+h*m*f)-g*f*y),C=Math.exp(-m*v),E=i-C*(f+(p+m*f)*v),_={toValue:i,prevPosition:n,lastTimestamp:t,current:h<1?S:E,velocity:h<1?k:C*(p*(v*m-1)+v*f*m*m)};return r$[d]=_,_}({animation:a,now:e/t*1e3,config:{...rN,...r}});return rz[i]=a,a}var rV=new Map;function rH({fps:e,config:t={},threshold:r=.005}){if("number"!=typeof r)throw TypeError(`threshold must be a number, got ${r} of type ${typeof r}`);if(0===r)return 1/0;if(1===r)return 0;if(isNaN(r))throw TypeError("Threshold is NaN");if(!Number.isFinite(r))throw TypeError("Threshold is not finite");if(r<0)throw TypeError("Threshold is below 0");let i=[e,t.damping,t.mass,t.overshootClamping,t.stiffness,r].join("-");if(rV.has(i))return rV.get(i);W(e,"to the measureSpring() function",!1);let a=0,n=0,o=()=>rU({fps:e,frame:a,config:t}),s=o(),l=()=>Math.abs(s.current-s.toValue),u=l();for(;u>=r;)a++,s=o(),u=l();n=a;for(let e=0;e<20;e++)a++,s=o(),(u=l())>=r&&(e=0,n=a+1);return rV.set(i,n),n}function rW({frame:e,fps:t,config:r={},from:i=0,to:a=1,durationInFrames:n,durationRestThreshold:o,delay:s=0,reverse:l=!1}){if(void 0!==n){if("number"!=typeof n)throw TypeError(`A "duration" of a spring must be a "number" but is "${typeof n}"`);if(Number.isNaN(n))throw TypeError('A "duration" of a spring is NaN, which it must not be');if(!Number.isFinite(n))throw TypeError('A "duration" of a spring must be finite, but is '+n);if(n<=0)throw TypeError('A "duration" of a spring must be positive, but is '+n)}(({allowFloats:e,durationInFrames:t,frame:r})=>{if(void 0===r)throw TypeError('Argument missing for parameter "frame"');if("number"!=typeof r)throw TypeError(`Argument passed for "frame" is not a number: ${r}`);if(!Number.isFinite(r))throw RangeError(`Frame ${r} is not finite`);if(r%1!=0&&!e)throw RangeError(`Argument for frame must be an integer, but got ${r}`);if(r<0&&r<-t)throw RangeError(`Cannot use frame ${r}: Duration of composition is ${t}, therefore the lowest frame that can be rendered is ${-t}`);if(r>t-1)throw RangeError(`Cannot use frame ${r}: Duration of composition is ${t}, therefore the highest frame that can be rendered is ${t-1}`)})({frame:e,durationInFrames:1/0,allowFloats:!0}),W(t,"to spring()",!1);let u=l||void 0!==n,c=u?rH({fps:t,config:r,threshold:o}):void 0,d=u?{get:()=>c}:{get:()=>{throw Error("did not calculate natural duration, this is an error with Remotion. Please report")}},p=(l?(n??d.get())-e:e)+(l?s:-s),f=void 0===n?p:p/(n/d.get());if(n&&p>n)return a;let h=rU({fps:t,frame:f,config:r}),m=r.overshootClamping?a>=i?Math.min(h.current,a):Math.max(h.current,a):h.current;return 0===i&&1===a?m:tw(m,[0,1],[i,a])}var rq={"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";"},rG={},rZ=e=>e.startsWith("/")?rZ(e.substring(1)):e,rK=e=>{var t,r;if(null===e)throw TypeError("null was passed to staticFile()");if(void 0===e)throw TypeError("undefined was passed to staticFile()");if(e.startsWith("http://")||e.startsWith("https://"))throw TypeError(`staticFile() does not support remote URLs - got "${e}". Instead, pass the URL without wrapping it in staticFile(). See: https://remotion.dev/docs/staticfile-remote-urls`);if(e.startsWith("..")||e.startsWith("./"))throw TypeError(`staticFile() does not support relative paths - got "${e}". Instead, pass the name of a file that is inside the public/ folder. See: https://remotion.dev/docs/staticfile-relative-paths`);if(e.startsWith("/Users")||e.startsWith("/home")||e.startsWith("/tmp")||e.startsWith("/etc")||e.startsWith("/opt")||e.startsWith("/var")||e.startsWith("C:")||e.startsWith("D:")||e.startsWith("E:"))throw TypeError(`staticFile() does not support absolute paths - got "${e}". Instead, pass the name of a file that is inside the public/ folder. See: https://remotion.dev/docs/staticfile-relative-paths`);if(e.startsWith("public/"))throw TypeError(`Do not include the public/ prefix when using staticFile() - got "${e}". See: https://remotion.dev/docs/staticfile-relative-paths`);let i=(e=>{for(let t of Object.keys(rq))if(e.includes(t))return{containsHex:!0,hexCode:t};return{containsHex:!1}})(e);i.containsHex&&(rG[t=`WARNING: You seem to pass an already encoded path (path contains ${i.hexCode}). Since Remotion 4.0, the encoding is done by staticFile() itself. You may want to remove a encodeURIComponent() wrapping.`]||(console.warn(t),rG[t]=!0));let a=(r=e.split("/").map(e=>encodeURIComponent(e)).join("/"),`/${rZ(r)}`);return a.startsWith("/")?a:`/${a}`},rQ=e=>{let r={...e,durationInFrames:1,fps:1};return t.default.createElement(tZ,r)},rX=e=>Math.round(1e5*e)/1e5,rJ=({element:e,desiredTime:t,logLevel:r,mountTime:i})=>{let a;if(ta(e.currentTime,t))return{wait:Promise.resolve(t),cancel:()=>{}};tb({logLevel:r,mediaRef:e,time:t,why:"Seeking during rendering",mountTime:i});let n=null;return{wait:Promise.all([new Promise(t=>{a=e.requestVideoFrameCallback((e,r)=>{let i=r.expectedDisplayTime-e;i<=0?t(r.mediaTime):setTimeout(()=>{t(r.mediaTime)},i+150)})}),new Promise(t=>{let r=()=>{t()};e.addEventListener("seeked",r,{once:!0}),n=()=>{e.removeEventListener("seeked",r)}})]).then(([e])=>e),cancel:()=>{n?.(),e.cancelVideoFrameCallback(a)}}},rY=(0,t.forwardRef)(({onError:e,volume:i,allowAmplificationDuringRender:a,playbackRate:n,onDuration:o,toneFrequency:s,name:l,acceptableTimeShiftInSeconds:u,delayRenderRetries:c,delayRenderTimeoutInMilliseconds:d,loopVolumeCurveBehavior:p,audioStreamIndex:f,onVideoFrame:h,...m},g)=>{let v=er(),y=e_(),x=tc(p??"repeat"),w=eC(),S=(0,t.useRef)(null),k=(0,t.useContext)(b),E=tu(),_=T(),P=em(),I=eg(),{delayRender:A,continueRender:O}=ey(),{registerRenderAsset:M,unregisterRenderAsset:F}=(0,t.useContext)(ej),R=(0,t.useMemo)(()=>`video-${C(m.src??"")}-${k?.cumulatedFrom}-${k?.relativeFrom}-${k?.durationInFrames}`,[m.src,k?.cumulatedFrom,k?.relativeFrom,k?.durationInFrames]);if(!w)throw Error("No video config found");let D=td({volume:i,frame:x,mediaVolume:1});tO(D),(0,t.useEffect)(()=>{if(!m.src)throw Error("No src passed");if(!m.muted&&!(D<=0)&&window.remotion_audioEnabled)return M({type:"video",src:eN(m.src),id:R,frame:v,volume:D,mediaFrame:y,playbackRate:n??1,toneFrequency:s??1,audioStartFrame:Math.max(0,-(k?.relativeFrom??0)),audioStreamIndex:f??0}),()=>F(R)},[m.muted,m.src,M,R,F,D,y,v,n,s,k?.relativeFrom,f]),(0,t.useImperativeHandle)(g,()=>S.current,[]),(0,t.useEffect)(()=>{if(!window.remotion_videoEnabled)return;let{current:t}=S;if(!t)return;let r=tk({frame:y,playbackRate:n||1,startFrom:-E,fps:w.fps}),i=A(`Rendering <Html5Video /> with src="${m.src}" at time ${r}`,{retries:c??void 0,timeoutInMilliseconds:d??void 0});if(window.process?.env?.NODE_ENV==="test")return void O(i);if(ta(t.currentTime,r)){if(t.readyState>=2)return void O(i);let e=()=>{O(i)};return t.addEventListener("loadeddata",e,{once:!0}),()=>{t.removeEventListener("loadeddata",e)}}let a=()=>{O(i)},o=(({element:e,desiredTime:t,fps:r,logLevel:i,mountTime:a})=>{let n=1/r/2,o=()=>{};return Number.isFinite(e.duration)&&e.currentTime>=e.duration&&t>=e.duration?{prom:Promise.resolve(),cancel:()=>{}}:{prom:new Promise((r,s)=>{let l=rJ({element:e,desiredTime:t+n,logLevel:i,mountTime:a});l.wait.then(l=>{if(Math.abs(t-l)<=n)return r();let u=rJ({element:e,desiredTime:l+n*(t>l?1:-1),logLevel:i,mountTime:a});o=u.cancel,u.wait.then(l=>{if(rX(Math.abs(t-l))<=rX(n))return r();let u=rJ({element:e,desiredTime:t+n,logLevel:i,mountTime:a});return o=u.cancel,u.wait.then(()=>{r()}).catch(e=>{s(e)})}).catch(e=>{s(e)})}),o=l.cancel}),cancel:()=>{o()}}})({element:t,desiredTime:r,fps:w.fps,logLevel:P,mountTime:I});o.prom.then(()=>{O(i)}),t.addEventListener("ended",a,{once:!0});let s=()=>{if(t?.error){if(console.error("Error occurred in video",t?.error),!e)throw Error(`The browser threw an error while playing the video ${m.src}: Code ${t.error.code} - ${t?.error?.message}. See https://remotion.dev/docs/media-playback-error for help. Pass an onError() prop to handle the error.`)}else throw Error("The browser threw an error")};return t.addEventListener("error",s,{once:!0}),()=>{o.cancel(),t.removeEventListener("ended",a),t.removeEventListener("error",s),O(i)}},[x,m.src,n,w.fps,y,E,e,c,d,P,I,O,A]);let{src:j}=m;return _.isRendering&&(0,t.useLayoutEffect)(()=>{if(window.process?.env?.NODE_ENV==="test")return;let e=A("Loading <Html5Video> duration with src="+j,{retries:c??void 0,timeoutInMilliseconds:d??void 0}),{current:t}=S,r=()=>{t?.duration&&o(j,t.duration),O(e)};return t?.duration?(o(j,t.duration),O(e)):t?.addEventListener("loadedmetadata",r,{once:!0}),()=>{t?.removeEventListener("loadedmetadata",r),O(e)}},[j,o,c,d,O,A]),(0,r.jsx)("video",{ref:S,disableRemotePlayback:!0,...m})}),r0=(0,t.forwardRef)((e,i)=>{let{startFrom:a,endAt:n,trimBefore:o,trimAfter:s,name:l,pauseWhenBuffering:u,stack:c,_remotionInternalNativeLoopPassed:d,showInTimeline:p,onAutoPlayError:f,...h}=e,{loop:m,...g}=e,{fps:v}=eE(),y=T();if(y.isClientSideRendering)throw Error("<Html5Video> is not supported in @remotion/web-renderer. Use <Video> from @remotion/media instead. See https://remotion.dev/docs/client-side-rendering/limitations");let{durations:b,setDurations:x}=(0,t.useContext)(e6);if("string"==typeof i)throw Error("string refs are not supported");if("string"!=typeof e.src)throw TypeError(`The \`<Html5Video>\` tag requires a string for \`src\`, but got ${JSON.stringify(e.src)} instead.`);let w=eX(e.src),S=(0,t.useCallback)((e,t)=>{x({type:"got-duration",durationInSeconds:t,src:e})},[x]),k=(0,t.useCallback)(()=>{},[]),C=b[eN(w)]??b[eN(e.src)];e2({startFrom:a,endAt:n,trimBefore:o,trimAfter:s});let{trimBeforeValue:E,trimAfterValue:_}=e4({startFrom:a,endAt:n,trimBefore:o,trimAfter:s});return m&&void 0!==C?Number.isFinite(C)?(0,r.jsx)(eU,{durationInFrames:e$({trimAfter:_,mediaDurationInFrames:C*v,playbackRate:e.playbackRate??1,trimBefore:E}),layout:"none",name:l,children:(0,r.jsx)(r0,{...g,ref:i,_remotionInternalNativeLoopPassed:!0})}):(0,r.jsx)(r0,{...g,ref:i,_remotionInternalNativeLoopPassed:!0}):void 0!==E||void 0!==_?(0,r.jsx)(eA,{layout:"none",from:0-(E??0),showInTimeline:!1,durationInFrames:_,name:l,children:(0,r.jsx)(r0,{pauseWhenBuffering:u??!1,...h,ref:i})}):(e1({playbackRate:e.playbackRate,volume:e.volume},"Html5Video"),y.isRendering)?(0,r.jsx)(rY,{onDuration:S,onVideoFrame:k??null,...h,ref:i}):(0,r.jsx)(rp,{onlyWarnForMediaSeekingError:!1,...h,ref:i,onVideoFrame:null,pauseWhenBuffering:u??!1,onDuration:S,_remotionInternalStack:c??null,_remotionInternalNativeLoopPassed:d??!1,showInTimeline:p??!0,onAutoPlayError:f??void 0})});p(r0),(()=>{if("u"<typeof globalThis)return;let e=()=>{globalThis.remotion_imported=g},t=globalThis.remotion_imported||!1;if(t){if(t===g)return;if("string"==typeof t&&t.includes("webcodecs"))return e();throw TypeError(`\uD83D\uDEA8 Multiple versions of Remotion detected: ${[g,"string"==typeof t?t:"an older version"].filter(m).join(" and ")}. This will cause things to break in an unexpected way.
Check that all your Remotion packages are on the same version. If your dependencies depend on Remotion, make them peer dependencies. You can also run \`npx remotion versions\` from your terminal to see which versions are mismatching.`)}e()})();var r1={Clipper:()=>{throw Error("<Clipper> has been removed as of Remotion v4.0.228. The native clipping APIs were experimental and subject to removal at any time. We removed them because they were sparingly used and made rendering often slower rather than faster.")},Null:()=>{throw Error("<Null> has been removed as of Remotion v4.0.228. The native clipping APIs were experimental and subject to removal at any time. We removed them because they were sparingly used and made rendering often slower rather than faster.")},useIsPlayer:h},r2=new Proxy({},{get:(e,t)=>"Bundling"===t||"Rendering"===t||"Log"===t||"Puppeteer"===t||"Output"===t?r2:()=>{console.warn("  The CLI configuration has been extracted from Remotion Core."),console.warn("Update the import from the config file:"),console.warn(),console.warn("- Delete:"),console.warn('import {Config} from "remotion";'),console.warn("+ Replace:"),console.warn('import {Config} from "@remotion/cli/config";'),console.warn(),console.warn("For more information, see https://www.remotion.dev/docs/4-0-migration."),process.exit(1)}});p(eA),e.s(["AbsoluteFill",()=>y,"AnimatedImage",()=>eR,"Artifact",()=>eB,"Audio",()=>tR,"Composition",()=>tZ,"Config",()=>r2,"Easing",()=>tJ,"Experimental",()=>r1,"Folder",()=>tj,"FolderContext",()=>tD,"Freeze",()=>eT,"Html5Audio",()=>tR,"Html5Video",()=>r0,"IFrame",()=>t2,"Img",()=>t4,"Internals",()=>rv,"Loop",()=>eU,"OffthreadVideo",()=>rh,"Sequence",()=>eA,"Series",()=>rB,"Still",()=>rQ,"VERSION",()=>g,"Video",()=>r0,"cancelRender",()=>es,"continueRender",()=>ef,"delayRender",()=>ep,"getInputProps",()=>B,"getRemotionEnvironment",()=>o,"getStaticFiles",()=>t1,"interpolate",()=>tw,"interpolateColors",()=>rM,"measureSpring",()=>rH,"prefetch",()=>e0,"random",()=>C,"registerRoot",()=>ra,"spring",()=>rW,"staticFile",()=>rK,"useBufferState",()=>ty,"useCurrentFrame",()=>e_,"useCurrentScale",()=>rc,"useDelayRender",()=>ey,"useRemotionEnvironment",()=>T,"useVideoConfig",()=>eE,"watchStaticFile",()=>rg])},449852,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.indexHtml=void 0;let i=e.r(49019);r.indexHtml=({publicPath:e,editorName:t,inputProps:r,envVariables:a,staticHash:n,remotionRoot:o,studioServerCommand:s,renderQueue:l,numberOfAudioTags:u,publicFiles:c,includeFavicon:d,title:p,renderDefaults:f,publicFolderExists:h,gitSource:m,projectName:g,installedDependencies:v,packageManager:y,audioLatencyHint:b,logLevel:x,mode:w})=>`
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		${d?`<link id="__remotion_favicon" rel="icon" type="image/png" href="${e}favicon.ico" />`:""}
		<title>${p}</title>
	</head>
	<body>
		<script>window.remotion_numberOfAudioTags = ${u};</script>
		<script>window.remotion_audioLatencyHint = "${b}";</script>
		${"dev"===w?`<script>window.remotion_logLevel = "${x}";</script>`:""}
		<script>window.remotion_staticBase = "${n}";</script>
		${t?`<script>window.remotion_editorName = "${t}";</script>`:"<script>window.remotion_editorName = null;</script>"}
		<script>window.remotion_projectName = ${JSON.stringify(g)};</script>
		<script>window.remotion_publicPath = ${JSON.stringify(e)};</script>
		<script>window.remotion_audioEnabled = true;</script>
		<script>window.remotion_videoEnabled = true;</script>
		<script>window.remotion_renderDefaults = ${JSON.stringify(f)};</script>
		<script>window.remotion_cwd = ${JSON.stringify(o)};</script>
		<script>window.remotion_studioServerCommand = ${s?JSON.stringify(s):"null"};</script>
		${r?`<script>window.remotion_inputProps = ${JSON.stringify(JSON.stringify(r))};</script>`:""}
		${l?`<script>window.remotion_initialRenderQueue = ${JSON.stringify(l)};</script>`:""}
		${a?`<script>window.process = {env: ${JSON.stringify(a)}};</script>`:""}
		${m?`<script>window.remotion_gitSource = ${JSON.stringify(m)};</script>`:""}
		${"dev"===w?`
		<script>window.remotion_isStudio = true;</script>
		<script>window.remotion_isReadOnlyStudio = false;</script>`.trimStart():""}
		<script>window.remotion_staticFiles = ${JSON.stringify(c)}</script>
		<script>window.remotion_installedPackages = ${JSON.stringify(v)}</script>
		<script>window.remotion_packageManager = ${JSON.stringify(y)}</script>
		<script>window.remotion_publicFolderExists = ${h?`"${h}"`:"null"};</script>
		<script>
				window.siteVersion = '11';
				window.remotion_version = '${i.VERSION}';
		</script>
		
		<div id="video-container"></div>
		<div id="${i.Internals.REMOTION_STUDIO_CONTAINER_ELEMENT}"></div>
		<div id="menuportal-0"></div>
		<div id="menuportal-1"></div>
		<div id="menuportal-2"></div>
		<div id="menuportal-3"></div>
		<div id="menuportal-4"></div>
		<div id="menuportal-5"></div>
		<div id="remotion-error-overlay"></div>
		<div id="server-disconnected-overlay"></div>
		<script src="${e}bundle.js"></script>
	</body>
</html>
`.trim()},920011,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t}),s=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.readRecursively=void 0;let l=o(e.r(902157)),u=s(e.r(750227)),c=e=>{try{return(0,l.statSync)(e)}catch(e){return null}},d=e=>e.split(u.default.sep).map(e=>encodeURIComponent(e)).join("/");r.readRecursively=({folder:e,output:t=[],startPath:i,staticHash:a,limit:n})=>{let o=u.default.join(i,e);if(!l.default.existsSync(o))return[];for(let s of l.default.readdirSync(o)){if(t.length>=n)break;if(s.startsWith(".DS_Store"))continue;let p=c(u.default.join(o,s));if(p){if(p.isDirectory())(0,r.readRecursively)({startPath:i,folder:u.default.join(e,s),output:t,staticHash:a,limit:n});else if(p.isFile())t.push({name:u.default.join(e,s),lastModified:Math.floor(p.mtimeMs),sizeInBytes:p.size,src:a+"/"+d(u.default.join(e,s))});else if(p.isSymbolicLink()){let r=l.default.realpathSync(u.default.join(e,s)),i=c(r);if(!i)continue;i.isFile()&&t.push({name:r,lastModified:Math.floor(i.mtimeMs),sizeInBytes:i.size,src:a+"/"+d(r)})}}}return t.sort((e,t)=>e.name.localeCompare(t.name))}},11192,(e,t,r)=>{"use strict";throw Error("React Refresh runtime should not be included in the production bundle.")},480021,(e,t,r)=>{"use strict";t.exports=e.r(11192)},800629,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(480021);function a(e){return"__esModule"===e||"__N_SSG"===e||"__N_SSP"===e||"config"===e}function n(e){let t=[];if(t.push(i.getFamilyByType(e)),null==e||"object"!=typeof e)return t;for(let r in e){if(a(r))continue;let n=e[r];t.push(r),t.push(i.getFamilyByType(n))}return t}r.default={registerExportsForReactRefresh:function(e,t){if(i.register(e,t+" %exports%"),null!=e&&"object"==typeof e)for(let r in e){if(a(r))continue;let n=e[r],o=t+" %exports% "+r;i.register(n,o)}},isReactRefreshBoundary:function(e){if(i.isLikelyComponentType(e))return!0;if(null==e||"object"!=typeof e)return!1;let t=!1,r=!0;for(let n in e){if(t=!0,a(n))continue;let o=e[n];i.isLikelyComponentType(o)||(r=!1)}return t&&r},shouldInvalidateReactRefreshBoundary:function(e,t){let r=n(e),i=n(t);if(r.length!==i.length)return!0;for(let e=0;e<i.length;e++)if(r[e]!==i[e])return!0;return!1},getRefreshBoundarySignature:n,scheduleUpdate:function(){var e,t;(null==(e=__webpack_module__.hot)?void 0:e.status())!=="idle"&&(null==(t=__webpack_module__.hot)||t.addStatusHandler(e=>{"idle"===e&&(()=>{try{i.performReactRefresh()}catch(e){console.warn("Warning: Failed to re-render. We will retry on the next Fast Refresh event.\n"+e)}})()}))}}},188012,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let a=e.r(480021),n=i(e.r(800629));a.injectIntoGlobalHook(self),self.$RefreshReg$=()=>void 0,self.$RefreshSig$=()=>e=>e,self.$RefreshHelpers$=n.default,self.$RefreshInterceptModuleExecution$=function(e){let t=self.$RefreshReg$,r=self.$RefreshSig$;return self.$RefreshReg$=(t,r)=>{a.register(t,e+" "+r)},self.$RefreshSig$=a.createSignatureFunctionForTransform,()=>{self.$RefreshReg$=t,self.$RefreshSig$=r}}},746523,(e,t,r)=>{"use strict";let i;Object.defineProperty(r,"__esModule",{value:!0}),r.injectCSS=void 0,i=(()=>{if(window.remotion_isStudio)return{NODE_ENV:"production"};let e=window.remotion_envVariables;return e?{...JSON.parse(e),NODE_ENV:"production"}:{}})(),window.process||(window.process={}),window.process.env||(window.process.env={}),Object.keys(i).forEach(e=>{window.process.env[e]=i[e]});let a={};r.injectCSS=e=>{if("u"<typeof document||a[e])return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.appendChild(document.createTextNode(e)),t.prepend(r),a[e]=!0},(0,r.injectCSS)(`
  .css-reset, .css-reset * {
    font-size: 16px;
    line-height: 1.5;
    color: white;
    font-family: Arial, Helvetica, sans-serif;
    background: transparent;
    box-sizing: border-box;
  }

  .algolia-docsearch-suggestion--highlight {
    font-size: 15px;
    line-height: 1.25;
  }

  .__remotion-info-button-container code {
    font-family: monospace;
    font-size: 14px;
    color: #0584f2
  }

  .__remotion-vertical-scrollbar::-webkit-scrollbar {
      width: 6px;
  }
  .__remotion-vertical-scrollbar::-webkit-scrollbar-thumb {
    background-color: rgba(0, 0, 0, 0.0);
  }
  .__remotion-vertical-scrollbar:hover::-webkit-scrollbar-thumb {
    background-color: rgba(0, 0, 0, 0.6);
  }
  .__remotion-vertical-scrollbar:hover::-webkit-scrollbar-thumb:hover {
    background-color: rgba(0, 0, 0, 1);
  }


  .__remotion-horizontal-scrollbar::-webkit-scrollbar {
    height: 6px;
  }
  .__remotion-horizontal-scrollbar::-webkit-scrollbar-thumb {
    background-color: rgba(0, 0, 0, 0.0);
  }
  .__remotion-horizontal-scrollbar:hover::-webkit-scrollbar-thumb {
    background-color: rgba(0, 0, 0, 0.6);
  }
  .__remotion-horizontal-scrollbar:hover::-webkit-scrollbar-thumb:hover {
    background-color: rgba(0, 0, 0, 1);
  }


  @-moz-document url-prefix() {
    .__remotion-vertical-scrollbar {
      scrollbar-width: thin;
      scrollbar-color: rgba(0, 0, 0, 0.6) rgba(0, 0, 0, 0);
    }

    .__remotion-vertical-scrollbar:hover {
      scrollbar-color: rgba(0, 0, 0, 1) rgba(0, 0, 0, 0);
    }

    .__remotion-horizontal-scrollbar {
      scrollbar-width: thin;
      scrollbar-color: rgba(0, 0, 0, 0.6) rgba(0, 0, 0, 0);
    }

    .__remotion-horizontal-scrollbar:hover {
      scrollbar-width: thin;
      scrollbar-color: rgba(0, 0, 0, 1) rgba(0, 0, 0, 0);
    }
  }


  .__remotion-timeline-slider {
    appearance: none;
    width: 100px;
    border-radius: 3px;
    height: 6px;
    background-color: rgba(255, 255, 255, 0.1);
    accent-color: #ffffff;
  }
  
  .__remotion-timeline-slider::-moz-range-thumb {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    background-color: #ffffff;
    appearance: none;
  }
`)},652088,e=>{"use strict";var t=e.i(347540);"u"<typeof globalThis?window.React=t:globalThis.React=t,e.s([])},234997,(e,t,r)=>{"use strict";t.exports=e.r(442315).vendored["react-rsc"].ReactJsxDevRuntime},442521,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mapAudioObjectTypeToCodecString=r.parseAacCodecPrivate=r.createAacCodecPrivate=r.getSampleRateFromSampleFrequencyIndex=void 0,r.getSampleRateFromSampleFrequencyIndex=e=>{switch(e){case 0:return 96e3;case 1:return 88200;case 2:return 64e3;case 3:return 48e3;case 4:return 44100;case 5:return 32e3;case 6:return 24e3;case 7:return 22050;case 8:return 16e3;case 9:return 12e3;case 10:return 11025;case 11:return 8e3;case 12:return 7350;default:throw Error(`Unexpected sampling frequency index ${e}`)}},r.createAacCodecPrivate=({audioObjectType:e,sampleRate:t,channelConfiguration:r,codecPrivate:i})=>{if(null!==i&&i.length>2)return i;let a=`${e.toString(2).padStart(5,"0")}${(e=>{if(96e3===e)return 0;if(88200===e)return 1;if(64e3===e)return 2;if(48e3===e)return 3;if(44100===e)return 4;if(32e3===e)return 5;if(24e3===e)return 6;if(22050===e)return 7;if(16e3===e)return 8;if(12e3===e)return 9;if(11025===e)return 10;if(8e3===e)return 11;if(7350===e)return 12;throw Error(`Unexpected sample rate ${e}`)})(t).toString(2).padStart(4,"0")}${r.toString(2).padStart(4,"0")}000`;if(16!==a.length)throw Error("Invalid AAC codec private "+a.length);if(0===r||r>7)throw Error("Invalid channel configuration "+r);return new Uint8Array([parseInt(a.slice(0,8),2),parseInt(a.slice(8,16),2)])},r.parseAacCodecPrivate=e=>{if(e.length<2)throw Error("Invalid AAC codec private length");let t=[...e].map(e=>e.toString(2).padStart(8,"0")).join(""),i=0,a=parseInt(t.slice(i,i+5),2);i+=5;let n=parseInt(t.slice(i,i+4),2);i+=4,15===n&&(i+=24);let o=parseInt(t.slice(i,i+4),2);if(i+=4,5===a){let e=parseInt(t.slice(i,i+4),2);i+=4;let a=parseInt(t.slice(i,i+5),2);return i+=5,{audioObjectType:a,sampleRate:(0,r.getSampleRateFromSampleFrequencyIndex)(e),channelConfiguration:o}}return{audioObjectType:a,sampleRate:(0,r.getSampleRateFromSampleFrequencyIndex)(n),channelConfiguration:o}},r.mapAudioObjectTypeToCodecString=e=>{switch(e){case 1:return"mp4a.40.2";case 2:return"mp4a.40.5";case 3:return"mp4a.40.29";case 4:return"mp4a.40.1";case 5:return"mp4a.40.3";case 6:return"mp4a.40.4";case 17:return"mp4a.40.17";case 23:return"mp4a.40.23";default:throw Error(`Unexpected audio object type ${e}`)}}},24168,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseFtyp=void 0,r.parseFtyp=({iterator:e,size:t,offset:r})=>{let i=e.getByteString(4,!1),a=e.getFourByteNumber(),n=(t-e.counter.getOffset())/4,o=[];for(let t=0;t<n;t++)o.push(e.getByteString(4,!1).trim());return{type:"ftyp-box",majorBrand:i,minorVersion:a,compatibleBrands:o,offset:r,boxSize:e.counter.getOffset()-r}}},48037,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.range=r.primaries=r.matrixCoefficients=r.transferCharacteristics=r.color=r.trackUID=r.trackNumber=r.tags=r.tagSegment=r.flagLacing=r.displayUnit=r.displayHeight=r.displayWidth=r.bitDepth=r.interlaced=r.alphaMode=r.channels=r.samplingFrequency=r.tagTrackUidType=r.titleType=r.infoType=r.writingApp=r.timestampScale=r.duration=r.muxingApp=r.heightType=r.widthType=r.trackType=r.codecID=r.voidHeader=r.seekHead=r.seek=r.seekPosition=r.maxCache=r.minCache=r._name=r.seekId=r.matroskaHeader=r.docTypeReadVersion=r.docTypeVersion=r.docType=r.ebmlMaxSizeLength=r.ebmlMaxIdLength=r.ebmlReadVersion=r.ebmlVersion=r.getSegmentName=r.knownIdsWithThreeLength=r.knownIdsWithTwoLength=r.knownIdsWithOneLength=r.matroskaElements=void 0,r.ebmlMap=r.tagStringType=r.tagNameType=r.simpleTagType=r.targetsType=r.cluster=r.segment=r.blockGroup=r.simpleBlock=r.block=r.timestampEntry=r.tracks=r.trackEntry=r.trackTimestampScale=r.codecName=r.blockElement=r.blockDurationSegment=r.referenceBlock=r.flagDefault=r.videoSegment=r.audioSegment=r.maxBlockAdditionIdSegment=r.blockAdditionsSegment=r.codecPrivate=r.defaultDuration=r.language=r.ChromaSitingVert=r.ChromaSitingHorz=void 0,r.matroskaElements={Header:"0x1a45dfa3",EBMLMaxIDLength:"0x42f2",EBMLVersion:"0x4286",EBMLReadVersion:"0x42f7",EBMLMaxSizeLength:"0x42f3",DocType:"0x4282",DocTypeVersion:"0x4287",DocTypeReadVersion:"0x4285",Segment:"0x18538067",SeekHead:"0x114d9b74",Seek:"0x4dbb",SeekID:"0x53ab",SeekPosition:"0x53ac",Info:"0x1549a966",SegmentUUID:"0x73a4",SegmentFilename:"0x7384",PrevUUID:"0x3cb923",PrevFilename:"0x3c83ab",NextUUID:"0x3eb923",NextFilename:"0x3e83bb",SegmentFamily:"0x4444",ChapterTranslate:"0x6924",ChapterTranslateID:"0x69a5",ChapterTranslateCodec:"0x69bf",ChapterTranslateEditionUID:"0x69fc",TimestampScale:"0x2ad7b1",Duration:"0x4489",DateUTC:"0x4461",Title:"0x7ba9",MuxingApp:"0x4d80",WritingApp:"0x5741",Cluster:"0x1f43b675",Timestamp:"0xe7",SilentTracks:"0x5854",SilentTrackNumber:"0x58d7",Position:"0xa7",PrevSize:"0xab",SimpleBlock:"0xa3",BlockGroup:"0xa0",Block:"0xa1",BlockVirtual:"0xa2",BlockAdditions:"0x75a1",BlockMore:"0xa6",BlockAdditional:"0xa5",BlockAddID:"0xee",BlockDuration:"0x9b",ReferencePriority:"0xfa",ReferenceBlock:"0xfb",ReferenceVirtual:"0xfd",CodecState:"0xa4",DiscardPadding:"0x75a2",Slices:"0x8e",TimeSlice:"0xe8",LaceNumber:"0xcc",FrameNumber:"0xcd",BlockAdditionID:"0xcb",Delay:"0xce",SliceDuration:"0xcf",ReferenceFrame:"0xc8",ReferenceOffset:"0xc9",ReferenceTimestamp:"0xca",EncryptedBlock:"0xaf",Tracks:"0x1654ae6b",TrackEntry:"0xae",TrackNumber:"0xd7",TrackUID:"0x73c5",TrackType:"0x83",FlagEnabled:"0xb9",FlagDefault:"0x88",FlagForced:"0x55aa",FlagHearingImpaired:"0x55ab",FlagVisualImpaired:"0x55ac",FlagTextDescriptions:"0x55ad",FlagOriginal:"0x55ae",FlagCommentary:"0x55af",FlagLacing:"0x9c",MinCache:"0x6de7",MaxCache:"0x6df8",DefaultDuration:"0x23e383",DefaultDecodedFieldDuration:"0x234e7a",TrackTimestampScale:"0x23314f",TrackOffset:"0x537f",MaxBlockAdditionID:"0x55ee",BlockAdditionMapping:"0x41e4",BlockAddIDValue:"0x41f0",BlockAddIDName:"0x41a4",BlockAddIDType:"0x41e7",BlockAddIDExtraData:"0x41ed",Name:"0x536e",Language:"0x22b59c",LanguageBCP47:"0x22b59d",CodecID:"0x86",CodecPrivate:"0x63a2",CodecName:"0x258688",AttachmentLink:"0x7446",CodecSettings:"0x3a9697",CodecInfoURL:"0x3b4040",CodecDownloadURL:"0x26b240",CodecDecodeAll:"0xaa",TrackOverlay:"0x6fab",CodecDelay:"0x56aa",SeekPreRoll:"0x56bb",TrackTranslate:"0x6624",TrackTranslateTrackID:"0x66a5",TrackTranslateCodec:"0x66bf",TrackTranslateEditionUID:"0x66fc",Video:"0xe0",FlagInterlaced:"0x9a",FieldOrder:"0x9d",StereoMode:"0x53b8",AlphaMode:"0x53c0",OldStereoMode:"0x53b9",PixelWidth:"0xb0",PixelHeight:"0xba",PixelCropBottom:"0x54aa",PixelCropTop:"0x54bb",PixelCropLeft:"0x54cc",PixelCropRight:"0x54dd",DisplayWidth:"0x54b0",DisplayHeight:"0x54ba",DisplayUnit:"0x54b2",AspectRatioType:"0x54b3",UncompressedFourCC:"0x2eb524",GammaValue:"0x2fb523",FrameRate:"0x2383e3",Colour:"0x55b0",MatrixCoefficients:"0x55b1",BitsPerChannel:"0x55b2",ChromaSubsamplingHorz:"0x55b3",ChromaSubsamplingVert:"0x55b4",CbSubsamplingHorz:"0x55b5",CbSubsamplingVert:"0x55b6",ChromaSitingHorz:"0x55b7",ChromaSitingVert:"0x55b8",Range:"0x55b9",TransferCharacteristics:"0x55ba",Primaries:"0x55bb",MaxCLL:"0x55bc",MaxFALL:"0x55bd",MasteringMetadata:"0x55d0",PrimaryRChromaticityX:"0x55d1",PrimaryRChromaticityY:"0x55d2",PrimaryGChromaticityX:"0x55d3",PrimaryGChromaticityY:"0x55d4",PrimaryBChromaticityX:"0x55d5",PrimaryBChromaticityY:"0x55d6",WhitePointChromaticityX:"0x55d7",WhitePointChromaticityY:"0x55d8",LuminanceMax:"0x55d9",LuminanceMin:"0x55da",Projection:"0x7670",ProjectionType:"0x7671",ProjectionPrivate:"0x7672",ProjectionPoseYaw:"0x7673",ProjectionPosePitch:"0x7674",ProjectionPoseRoll:"0x7675",Audio:"0xe1",SamplingFrequency:"0xb5",OutputSamplingFrequency:"0x78b5",Channels:"0x9f",ChannelPositions:"0x7d7b",BitDepth:"0x6264",Emphasis:"0x52f1",TrackOperation:"0xe2",TrackCombinePlanes:"0xe3",TrackPlane:"0xe4",TrackPlaneUID:"0xe5",TrackPlaneType:"0xe6",TrackJoinBlocks:"0xe9",TrackJoinUID:"0xed",TrickTrackUID:"0xc0",TrickTrackSegmentUID:"0xc1",TrickTrackFlag:"0xc6",TrickMasterTrackUID:"0xc7",TrickMasterTrackSegmentUID:"0xc4",ContentEncodings:"0x6d80",ContentEncoding:"0x6240",ContentEncodingOrder:"0x5031",ContentEncodingScope:"0x5032",ContentEncodingType:"0x5033",ContentCompression:"0x5034",ContentCompAlgo:"0x4254",ContentCompSettings:"0x4255",ContentEncryption:"0x5035",ContentEncAlgo:"0x47e1",ContentEncKeyID:"0x47e2",ContentEncAESSettings:"0x47e7",AESSettingsCipherMode:"0x47e8",ContentSignature:"0x47e3",ContentSigKeyID:"0x47e4",ContentSigAlgo:"0x47e5",ContentSigHashAlgo:"0x47e6",Cues:"0x1c53bb6b",CuePoint:"0xbb",CueTime:"0xb3",CueTrackPositions:"0xb7",CueTrack:"0xf7",CueClusterPosition:"0xf1",CueRelativePosition:"0xf0",CueDuration:"0xb2",CueBlockNumber:"0x5378",CueCodecState:"0xea",CueReference:"0xdb",CueRefTime:"0x96",CueRefCluster:"0x97",CueRefNumber:"0x535f",CueRefCodecState:"0xeb",Attachments:"0x1941a469",AttachedFile:"0x61a7",FileDescription:"0x467e",FileName:"0x466e",FileMediaType:"0x4660",FileData:"0x465c",FileUID:"0x46ae",FileReferral:"0x4675",FileUsedStartTime:"0x4661",FileUsedEndTime:"0x4662",Chapters:"0x1043a770",EditionEntry:"0x45b9",EditionUID:"0x45bc",EditionFlagHidden:"0x45bd",EditionFlagDefault:"0x45db",EditionFlagOrdered:"0x45dd",EditionDisplay:"0x4520",EditionString:"0x4521",EditionLanguageIETF:"0x45e4",ChapterAtom:"0xb6",ChapterUID:"0x73c4",ChapterStringUID:"0x5654",ChapterTimeStart:"0x91",ChapterTimeEnd:"0x92",ChapterFlagHidden:"0x98",ChapterFlagEnabled:"0x4598",ChapterSegmentUUID:"0x6e67",ChapterSkipType:"0x4588",ChapterSegmentEditionUID:"0x6ebc",ChapterPhysicalEquiv:"0x63c3",ChapterTrack:"0x8f",ChapterTrackUID:"0x89",ChapterDisplay:"0x80",ChapString:"0x85",ChapLanguage:"0x437c",ChapLanguageBCP47:"0x437d",ChapCountry:"0x437e",ChapProcess:"0x6944",ChapProcessCodecID:"0x6955",ChapProcessPrivate:"0x450d",ChapProcessCommand:"0x6911",ChapProcessTime:"0x6922",ChapProcessData:"0x6933",Tags:"0x1254c367",Tag:"0x7373",Targets:"0x63c0",TargetTypeValue:"0x68ca",TargetType:"0x63ca",TagTrackUID:"0x63c5",TagEditionUID:"0x63c9",TagChapterUID:"0x63c4",TagAttachmentUID:"0x63c6",SimpleTag:"0x67c8",TagName:"0x45a3",TagLanguage:"0x447a",TagLanguageBCP47:"0x447b",TagDefault:"0x4484",TagDefaultBogus:"0x44b4",TagString:"0x4487",TagBinary:"0x4485",Void:"0xec",Crc32:"0xbf"};let i=Object.values(r.matroskaElements);r.knownIdsWithOneLength=i.filter(e=>4===e.length),r.knownIdsWithTwoLength=i.filter(e=>6===e.length),r.knownIdsWithThreeLength=i.filter(e=>8===e.length),r.getSegmentName=e=>{var t;return null==(t=Object.entries(r.matroskaElements).find(([,t])=>t===e))?void 0:t[0]},r.ebmlVersion={name:"EBMLVersion",type:"uint"},r.ebmlReadVersion={name:"EBMLReadVersion",type:"uint"},r.ebmlMaxIdLength={name:"EBMLMaxIDLength",type:"uint"},r.ebmlMaxSizeLength={name:"EBMLMaxSizeLength",type:"uint"},r.docType={name:"DocType",type:"string"},r.docTypeVersion={name:"DocTypeVersion",type:"uint"},r.docTypeReadVersion={name:"DocTypeReadVersion",type:"uint"},r.matroskaHeader={name:"Header",type:"children"},r.seekId={name:"SeekID",type:"hex-string"},r._name={name:"Name",type:"string"},r.minCache={name:"MinCache",type:"uint"},r.maxCache={name:"MaxCache",type:"uint"},r.seekPosition={name:"SeekPosition",type:"uint"},r.seek={name:"Seek",type:"children"},r.seekHead={name:"SeekHead",type:"children"},r.voidHeader={name:"Void",type:"uint8array"},r.codecID={name:"CodecID",type:"string"},r.trackType={name:"TrackType",type:"uint"},r.widthType={name:"PixelWidth",type:"uint"},r.heightType={name:"PixelHeight",type:"uint"},r.muxingApp={name:"MuxingApp",type:"string"},r.duration={name:"Duration",type:"float"},r.timestampScale={name:"TimestampScale",type:"uint"},r.writingApp={name:"WritingApp",type:"string"},r.infoType={name:"Info",type:"children"},r.titleType={name:"Title",type:"string"},r.tagTrackUidType={name:"TagTrackUID",type:"hex-string"},r.samplingFrequency={name:"SamplingFrequency",type:"float"},r.channels={name:"Channels",type:"uint"},r.alphaMode={name:"AlphaMode",type:"uint"},r.interlaced={name:"FlagInterlaced",type:"uint"},r.bitDepth={name:"BitDepth",type:"uint"},r.displayWidth={name:"DisplayWidth",type:"uint"},r.displayHeight={name:"DisplayHeight",type:"uint"},r.displayUnit={name:"DisplayUnit",type:"uint"},r.flagLacing={name:"FlagLacing",type:"uint"},r.tagSegment={name:"Tag",type:"children"},r.tags={name:"Tags",type:"children"},r.trackNumber={name:"TrackNumber",type:"uint"},r.trackUID={name:"TrackUID",type:"hex-string"},r.color={name:"Colour",type:"children"},r.transferCharacteristics={name:"TransferCharacteristics",type:"uint"},r.matrixCoefficients={name:"MatrixCoefficients",type:"uint"},r.primaries={name:"Primaries",type:"uint"},r.range={name:"Range",type:"uint"},r.ChromaSitingHorz={name:"ChromaSitingHorz",type:"uint"},r.ChromaSitingVert={name:"ChromaSitingVert",type:"uint"},r.language={name:"Language",type:"string"},r.defaultDuration={name:"DefaultDuration",type:"uint"},r.codecPrivate={name:"CodecPrivate",type:"uint8array"},r.blockAdditionsSegment={name:"BlockAdditions",type:"uint8array"},r.maxBlockAdditionIdSegment={name:"MaxBlockAdditionID",type:"uint"},r.audioSegment={name:"Audio",type:"children"},r.videoSegment={name:"Video",type:"children"},r.flagDefault={name:"FlagDefault",type:"uint"},r.referenceBlock={name:"ReferenceBlock",type:"uint"},r.blockDurationSegment={name:"BlockDuration",type:"uint"},r.blockElement={name:"Block",type:"uint8array"},r.codecName={name:"CodecName",type:"string"},r.trackTimestampScale={name:"TrackTimestampScale",type:"float"},r.trackEntry={name:"TrackEntry",type:"children"},r.tracks={name:"Tracks",type:"children"},r.timestampEntry={name:"Timestamp",type:"uint"},r.block={name:"Block",type:"uint8array"},r.simpleBlock={name:"SimpleBlock",type:"uint8array"},r.blockGroup={name:"BlockGroup",type:"children"},r.segment={name:"Segment",type:"children"},r.cluster={name:"Cluster",type:"children"},r.targetsType={name:"Targets",type:"children"},r.simpleTagType={name:"SimpleTag",type:"children"},r.tagNameType={name:"TagName",type:"string"},r.tagStringType={name:"TagString",type:"string"},r.ebmlMap={[r.matroskaElements.Header]:r.matroskaHeader,[r.matroskaElements.DocType]:r.docType,[r.matroskaElements.Targets]:r.targetsType,[r.matroskaElements.SimpleTag]:r.simpleTagType,[r.matroskaElements.TagName]:r.tagNameType,[r.matroskaElements.TagString]:r.tagStringType,[r.matroskaElements.DocTypeVersion]:r.docTypeVersion,[r.matroskaElements.DocTypeReadVersion]:r.docTypeReadVersion,[r.matroskaElements.EBMLVersion]:r.ebmlVersion,[r.matroskaElements.EBMLReadVersion]:r.ebmlReadVersion,[r.matroskaElements.EBMLMaxIDLength]:r.ebmlMaxIdLength,[r.matroskaElements.EBMLMaxSizeLength]:r.ebmlMaxSizeLength,[r.matroskaElements.Void]:{name:"Void",type:"uint8array"},[r.matroskaElements.Cues]:{name:"Cues",type:"children"},[r.matroskaElements.CuePoint]:{name:"CuePoint",type:"children"},[r.matroskaElements.CueTime]:{name:"CueTime",type:"uint"},[r.matroskaElements.CueTrackPositions]:{name:"CueTrackPositions",type:"children"},[r.matroskaElements.CueClusterPosition]:{name:"CueClusterPosition",type:"uint"},[r.matroskaElements.CueRelativePosition]:{name:"CueRelativePosition",type:"uint"},[r.matroskaElements.CueBlockNumber]:{name:"CueBlockNumber",type:"uint"},[r.matroskaElements.CueTrack]:{name:"CueTrack",type:"uint"},[r.matroskaElements.DateUTC]:{name:"DateUTC",type:"uint8array"},[r.matroskaElements.TrackTimestampScale]:r.trackTimestampScale,[r.matroskaElements.CodecDelay]:{name:"CodecDelay",type:"uint8array"},[r.matroskaElements.SeekPreRoll]:{name:"SeekPreRoll",type:"uint8array"},[r.matroskaElements.DiscardPadding]:{name:"DiscardPadding",type:"uint8array"},[r.matroskaElements.OutputSamplingFrequency]:{name:"OutputSamplingFrequency",type:"uint8array"},[r.matroskaElements.CodecName]:r.codecName,[r.matroskaElements.Position]:{name:"Position",type:"uint8array"},[r.matroskaElements.SliceDuration]:{name:"SliceDuration",type:"uint8array"},[r.matroskaElements.TagTrackUID]:r.tagTrackUidType,[r.matroskaElements.SeekHead]:r.seekHead,[r.matroskaElements.Seek]:r.seek,[r.matroskaElements.SeekID]:r.seekId,[r.matroskaElements.Name]:r._name,[r.matroskaElements.MinCache]:r.minCache,[r.matroskaElements.MaxCache]:r.maxCache,[r.matroskaElements.SeekPosition]:r.seekPosition,[r.matroskaElements.Crc32]:{name:"Crc32",type:"uint8array"},[r.matroskaElements.MuxingApp]:r.muxingApp,[r.matroskaElements.WritingApp]:{name:"WritingApp",type:"string"},[r.matroskaElements.SegmentUUID]:{name:"SegmentUUID",type:"string"},[r.matroskaElements.Duration]:r.duration,[r.matroskaElements.CodecID]:{name:"CodecID",type:"string"},[r.matroskaElements.TrackType]:r.trackType,[r.matroskaElements.PixelWidth]:r.widthType,[r.matroskaElements.PixelHeight]:r.heightType,[r.matroskaElements.TimestampScale]:r.timestampScale,[r.matroskaElements.Info]:r.infoType,[r.matroskaElements.Title]:r.titleType,[r.matroskaElements.SamplingFrequency]:r.samplingFrequency,[r.matroskaElements.Channels]:r.channels,[r.matroskaElements.AlphaMode]:r.alphaMode,[r.matroskaElements.FlagInterlaced]:r.interlaced,[r.matroskaElements.BitDepth]:r.bitDepth,[r.matroskaElements.DisplayHeight]:r.displayHeight,[r.matroskaElements.DisplayWidth]:r.displayWidth,[r.matroskaElements.DisplayUnit]:r.displayUnit,[r.matroskaElements.FlagLacing]:r.flagLacing,[r.matroskaElements.Tags]:r.tags,[r.matroskaElements.Tag]:r.tagSegment,[r.matroskaElements.TrackNumber]:r.trackNumber,[r.matroskaElements.TrackUID]:r.trackUID,[r.matroskaElements.Colour]:r.color,[r.matroskaElements.Language]:r.language,[r.matroskaElements.DefaultDuration]:r.defaultDuration,[r.matroskaElements.CodecPrivate]:r.codecPrivate,[r.matroskaElements.BlockDuration]:r.blockDurationSegment,[r.matroskaElements.BlockAdditions]:r.blockAdditionsSegment,[r.matroskaElements.MaxBlockAdditionID]:r.maxBlockAdditionIdSegment,[r.matroskaElements.Audio]:r.audioSegment,[r.matroskaElements.Video]:r.videoSegment,[r.matroskaElements.FlagDefault]:r.flagDefault,[r.matroskaElements.ReferenceBlock]:r.referenceBlock,[r.matroskaElements.TrackEntry]:r.trackEntry,[r.matroskaElements.Timestamp]:{name:"Timestamp",type:"uint"},[r.matroskaElements.Tracks]:r.tracks,[r.matroskaElements.Block]:r.block,[r.matroskaElements.SimpleBlock]:r.simpleBlock,[r.matroskaElements.BlockGroup]:r.blockGroup,[r.matroskaElements.Segment]:{name:"Segment",type:"children"},[r.matroskaElements.Cluster]:{name:"Cluster",type:"children"},[r.matroskaElements.TransferCharacteristics]:r.transferCharacteristics,[r.matroskaElements.MatrixCoefficients]:r.matrixCoefficients,[r.matroskaElements.Primaries]:r.primaries,[r.matroskaElements.Range]:r.range,[r.matroskaElements.ChromaSitingHorz]:r.ChromaSitingHorz,[r.matroskaElements.ChromaSitingVert]:r.ChromaSitingVert}},705079,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isM3u=r.isFlac=r.isAac=r.isMp3=r.isTransportStream=r.isIsoBaseMedia=r.isWebm=r.isRiffWave=r.isRiffAvi=r.matchesPattern=void 0;let i=new Uint8Array([26,69,223,163]);r.matchesPattern=e=>t=>e.every((e,r)=>t[r]===e),r.isRiffAvi=e=>{let t=new Uint8Array([82,73,70,70]);if(!(0,r.matchesPattern)(t)(e.subarray(0,4)))return!1;let i=e.subarray(8,12),a=new Uint8Array([65,86,73,32]);return(0,r.matchesPattern)(a)(i)},r.isRiffWave=e=>{let t=new Uint8Array([82,73,70,70]);if(!(0,r.matchesPattern)(t)(e.subarray(0,4)))return!1;let i=e.subarray(8,12),a=new Uint8Array([87,65,86,69]);return(0,r.matchesPattern)(a)(i)},r.isWebm=e=>(0,r.matchesPattern)(i)(e.subarray(0,4)),r.isIsoBaseMedia=e=>{let t=new TextEncoder().encode("ftyp");return(0,r.matchesPattern)(t)(e.subarray(4,8))},r.isTransportStream=e=>71===e[0]&&71===e[188],r.isMp3=e=>{let t=new Uint8Array([255,243]),i=new Uint8Array([255,251]),a=new Uint8Array([73,68,51,4]),n=new Uint8Array([73,68,51,3]),o=new Uint8Array([73,68,51,2]),s=e.subarray(0,4);return(0,r.matchesPattern)(t)(s)||(0,r.matchesPattern)(i)(s)||(0,r.matchesPattern)(a)(s)||(0,r.matchesPattern)(n)(s)||(0,r.matchesPattern)(o)(s)},r.isAac=e=>{let t=new Uint8Array([255,241]);return(0,r.matchesPattern)(t)(e.subarray(0,2))},r.isFlac=e=>{let t=new Uint8Array([102,76,97,67]);return(0,r.matchesPattern)(t)(e.subarray(0,4))},r.isM3u=e=>"#EXTM3U"===new TextDecoder("utf-8").decode(e.slice(0,7))},4608,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isBmp=void 0;let i=e.r(705079);r.isBmp=e=>{let t=new Uint8Array([66,77]);return(0,i.matchesPattern)(t)(e.subarray(0,2))?{dimensions:function(e){if(e.length<26)return null;let t=new DataView(e.buffer,e.byteOffset);return{width:t.getUint32(18,!0),height:Math.abs(t.getInt32(22,!0))}}(e),type:"bmp"}:null}},494978,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isGif=void 0;let i=e.r(705079);r.isGif=e=>{let t=new Uint8Array([71,73,70,56]);if((0,i.matchesPattern)(t)(e.subarray(0,4))){let t;return{type:"gif",dimensions:{width:(t=new DataView(e.buffer,e.byteOffset)).getUint16(6,!0),height:t.getUint16(8,!0)}}}return null}},925437,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isJpeg=void 0,r.getJpegDimensions=a;let i=e.r(705079);function a(e){let t=0;function r(t){return e[t]<<8|e[t+1]}if(65496!==r(0))return null;for(t+=2;t<e.length;)if(255===e[t]){let i=e[t+1];if(192===i||194===i){let e=r(t+5);return{width:r(t+7),height:e}}let a=r(t+2);t+=a+2}else t++;return null}r.isJpeg=e=>{let t=new Uint8Array([255,216]);return(0,i.matchesPattern)(t)(e.subarray(0,2))?{dimensions:a(e),type:"jpeg"}:null}},911317,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPdf=void 0;let i=e.r(705079);r.isPdf=e=>{if(e.length<4)return null;let t=new Uint8Array([37,80,68,70]);return(0,i.matchesPattern)(t)(e.subarray(0,4))?{type:"pdf"}:null}},722489,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPng=void 0,r.getPngDimensions=a;let i=e.r(705079);function a(e){if(e.length<24)return null;let t=new DataView(e.buffer,e.byteOffset),r=[137,80,78,71,13,10,26,10];for(let t=0;t<8;t++)if(e[t]!==r[t])return null;return{width:t.getUint32(16,!1),height:t.getUint32(20,!1)}}r.isPng=e=>{let t=new Uint8Array([137,80,78,71]);return(0,i.matchesPattern)(t)(e.subarray(0,4))?{dimensions:a(e),type:"png"}:null}},606611,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isWebp=void 0;let i=e.r(705079);r.isWebp=e=>{let t=new Uint8Array([82,73,70,70]);if((0,i.matchesPattern)(t)(e.subarray(0,4)))return{type:"webp",dimensions:e.length<30||82!==e[0]||73!==e[1]||70!==e[2]||70!==e[3]||87!==e[8]||69!==e[9]||66!==e[10]||80!==e[11]?null:86===e[12]&&80===e[13]&&56===e[14]&&32===e[15]?{width:e[26]|e[27]<<8&16383,height:e[28]|e[29]<<8&16383}:86===e[12]&&80===e[13]&&56===e[14]&&76===e[15]?{width:1+(e[21]|(63&e[22])<<8),height:1+((192&e[22])>>6|e[23]<<2|(15&e[24])<<10)}:86===e[12]&&80===e[13]&&56===e[14]&&88===e[15]?{width:1+(e[24]|e[25]<<8|e[26]<<16),height:1+(e[27]|e[28]<<8|e[29]<<16)}:null};return null}},527912,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.detectFileType=void 0;let i=e.r(4608),a=e.r(705079),n=e.r(494978),o=e.r(925437),s=e.r(911317),l=e.r(722489),u=e.r(606611);r.detectFileType=e=>{if((0,a.isRiffWave)(e))return{type:"wav"};if((0,a.isRiffAvi)(e))return{type:"riff"};if((0,a.isAac)(e))return{type:"aac"};if((0,a.isFlac)(e))return{type:"flac"};if((0,a.isM3u)(e))return{type:"m3u"};let t=(0,u.isWebp)(e);if(t)return t;if((0,a.isWebm)(e))return{type:"webm"};if((0,a.isIsoBaseMedia)(e))return{type:"iso-base-media"};if((0,a.isTransportStream)(e))return{type:"transport-stream"};if((0,a.isMp3)(e))return{type:"mp3"};let r=(0,n.isGif)(e);if(r)return r;let c=(0,l.isPng)(e);if(c)return c;let d=(0,s.isPdf)(e);if(d)return d;let p=(0,i.isBmp)(e);if(p)return p;let f=(0,o.isJpeg)(e);return f||{type:"unknown"}}},66415,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Log=r.isEqualOrBelowLogLevel=r.logLevels=void 0,r.logLevels=["trace","verbose","info","warn","error"],r.isEqualOrBelowLogLevel=(e,t)=>r.logLevels.indexOf(e)<=r.logLevels.indexOf(t),r.Log={trace:(e,...t)=>{if((0,r.isEqualOrBelowLogLevel)(e,"trace"))return console.log(...t)},verbose:(e,...t)=>{if((0,r.isEqualOrBelowLogLevel)(e,"verbose"))return console.log(...t)},info:(e,...t)=>{if((0,r.isEqualOrBelowLogLevel)(e,"info"))return console.log(...t)},warn:(e,...t)=>{if((0,r.isEqualOrBelowLogLevel)(e,"warn"))return console.warn(...t)},error:(...e)=>console.error(...e)}},462814,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ResizableBuffer=void 0,r.ResizableBuffer=class{constructor(e){this.buffer=e,this.uintarray=new Uint8Array(e)}resize(e){if("function"==typeof this.buffer.resize)this.buffer.resize(e);else{let t=new ArrayBuffer(e);new Uint8Array(t).set(new Uint8Array(this.buffer).subarray(0,Math.min(this.buffer.byteLength,e))),this.buffer=t,this.uintarray=new Uint8Array(t)}}}},222713,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.bufferManager=void 0;let i=e.r(66415),a=e.r(462814);r.bufferManager=({initialData:e,maxBytes:t,counter:r,logLevel:n})=>{let o=((e,t)=>{let r=Math.min(t,0x80000000);try{let t=new ArrayBuffer(e.byteLength,{maxByteLength:r});return new a.ResizableBuffer(t)}catch(r){if(r instanceof RangeError&&t>0x8000000)return new a.ResizableBuffer(new ArrayBuffer(e.byteLength,{maxByteLength:0x8000000}));throw r}})(e,t);o.buffer.resize||i.Log.warn(n,"`ArrayBuffer.resize` is not supported in this Runtime. Using slow polyfill."),o.uintarray.set(e);let s=new DataView(o.uintarray.buffer);return{getView:()=>s,getUint8Array:()=>o.uintarray,destroy:()=>{o.uintarray=new Uint8Array(0),o.resize(0)},addData:e=>{let r=o.buffer.byteLength,i=r+e.byteLength;if(i<r)throw Error("Cannot decrement size");if(i>(null!=t?t:1/0))throw Error(`Exceeded maximum byte length ${t} with ${i}`);o.resize(i),o.uintarray=new Uint8Array(o.buffer),o.uintarray.set(e,r),s=new DataView(o.uintarray.buffer)},skipTo:e=>{if(e<r.getOffset()){let t=r.getOffset()-e;if(t>r.getDiscardedOffset())throw Error("Cannot count backwards, data has already been flushed");r.decrement(t)}let t=r.getOffset();r.increment(e-t)},removeBytesRead:(e,t)=>{let i=r.getDiscardedOffset();if(i<3e6&&!e||s.byteLength<i&&!e)return{bytesRemoved:0,removedData:null};r.discardBytes(i);let a="download"===t?o.uintarray.slice(0,i):null,n=o.uintarray.slice(i);return o.uintarray.set(n),o.resize(n.byteLength),s=new DataView(o.uintarray.buffer),{bytesRemoved:i,removedData:a}},replaceData:(e,t)=>{o.resize(e.byteLength),o.uintarray=new Uint8Array(o.buffer),o.uintarray.set(e),s=new DataView(o.uintarray.buffer),r.setDiscardedOffset(t),r.decrement(r.getOffset()),r.increment(t)}}}},347999,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.makeOffsetCounter=void 0,r.makeOffsetCounter=e=>{let t=e,r=0;return{getOffset:()=>t,discardBytes:e=>{r+=e},increment:e=>{if(e<0)throw Error("Cannot increment by a negative amount: "+e);t+=e},getDiscardedBytes:()=>r,setDiscardedOffset:e=>{r=e},getDiscardedOffset:()=>t-r,decrement:e=>{if(e<0)throw Error("Cannot decrement by a negative amount: "+e);t-=e}}}},77548,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getArrayBufferIterator=void 0;let i=e.r(48037),a=e.r(527912),n=e.r(66415),o=e.r(222713),s=e.r(347999);r.getArrayBufferIterator=({initialData:e,maxBytes:t,logLevel:r})=>{let l=(0,s.makeOffsetCounter)(0),{getUint8Array:u,getView:c,addData:d,destroy:p,removeBytesRead:f,skipTo:h,replaceData:m}=(0,o.bufferManager)({initialData:e,maxBytes:t,counter:l,logLevel:r}),g=e=>{let t=u().slice(l.getDiscardedOffset(),l.getDiscardedOffset()+e);return l.increment(t.length),t},v=e=>{l.increment(e)},y=()=>{let e=c().getUint8(l.getDiscardedOffset());return l.increment(1),e},b=()=>{let e=c().getUint32(l.getDiscardedOffset());return l.increment(4),e},x=()=>{let e=c().getInt32(l.getDiscardedOffset());return l.increment(4),e},w=()=>u().byteLength-l.getDiscardedOffset(),S=0,k=0,C=!1,E=e=>{let t=0,r=0;for(;r<e;){S>=8&&(S=0,k=y());let i=8-S,a=Math.min(e-r,i),n=(1<<a)-1,o=i-a;t<<=a,t|=k>>o&n,r+=a,S+=a}return t};return{startReadingBits:()=>{C=!0,k=y()},stopReadingBits:()=>{S=0,C=!1},skipTo:h,addData:d,counter:l,peekB:e=>{n.Log.info("info",[...g(e)].map(e=>e.toString(16).padStart(2,"0"))),l.decrement(e)},peekD:e=>{n.Log.info("info",[...g(e)].map(e=>e.toString(16).padStart(2,"0"))),l.decrement(e)},getBits:E,bytesRemaining:w,leb128:()=>{let e,t=0,r=0;do t|=(127&(e=E(8)))<<r,r+=7;while(e>=128)return t},removeBytesRead:f,discard:v,getEightByteNumber:(e=!1)=>{if(e){let e=y(),t=y(),r=y(),i=y(),a=y(),n=y(),o=y();return(y()<<56|o<<48|n<<40|a<<32|i<<24|r<<16|t<<8|e)>>>0}return Number(function(e){let t=BigInt(0);for(let r=0;r<e.length;r++)t=(t<<BigInt(8))+BigInt(e[r]);return t}([y(),y(),y(),y(),y(),y(),y(),y()]))},getFourByteNumber:()=>(y()<<24|y()<<16|y()<<8|y())>>>0,getSlice:g,getAtom:()=>{let e=g(4);return new TextDecoder().decode(e)},detectFileType:()=>(0,a.detectFileType)(u()),getPaddedFourByteNumber:()=>{let e=128;for(;128===(e=y()););return e},getMatroskaSegmentId:()=>{if(0===w())return null;let e=g(1),t=`0x${Array.from(new Uint8Array(e)).map(e=>e.toString(16).padStart(2,"0")).join("")}`;if(i.knownIdsWithOneLength.includes(t))return t;if(0===w())return null;let r=g(1),a=`${t}${Array.from(new Uint8Array(r)).map(e=>e.toString(16).padStart(2,"0")).join("")}`;if(i.knownIdsWithTwoLength.includes(a))return a;if(0===w())return null;let n=g(1),o=`${a}${Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")}`;if(i.knownIdsWithThreeLength.includes(o))return o;if(0===w())return null;let s=g(1);return`${o}${Array.from(new Uint8Array(s)).map(e=>e.toString(16).padStart(2,"0")).join("")}`},getVint:()=>{if(0===w())return null;let e=y();if(0===e)return 0;let t=0;for(;(e>>7-t&1)==0;)t++;if(w()<t)return null;let r=[e,...Array.from(new Uint8Array(g(t)))];t+=1;let i=0;i=e&255>>t;for(let e=1;e<t;e++)i=i<<8|r[e];return -1===i?1/0:i},getUint8:y,getEBML:()=>127&y(),getInt8:()=>{let e=c().getInt8(l.getDiscardedOffset());return l.increment(1),e},getUint16:()=>{let e=c().getUint16(l.getDiscardedOffset());return l.increment(2),e},getUint16Le:()=>{let e=c().getUint16(l.getDiscardedOffset(),!0);return l.increment(2),e},getUint24:()=>{let e=c().getUint8(l.getDiscardedOffset()),t=c().getUint8(l.getDiscardedOffset()+1),r=c().getUint8(l.getDiscardedOffset()+2);return l.increment(3),e<<16|t<<8|r},getInt24:()=>{let e=c().getInt8(l.getDiscardedOffset()),t=c().getUint8(l.getDiscardedOffset()+1),r=c().getUint8(l.getDiscardedOffset()+2);return l.increment(3),e<<16|t<<8|r},getInt16:()=>{let e=c().getInt16(l.getDiscardedOffset());return l.increment(2),e},getUint32:b,getUint64:(e=!1)=>{let t=c().getBigUint64(l.getDiscardedOffset(),e);return l.increment(8),t},getInt64:(e=!1)=>{let t=c().getBigInt64(l.getDiscardedOffset(),e);return l.increment(8),t},getFixedPointUnsigned1616Number:()=>b()/65536,getFixedPointSigned1616Number:()=>x()/65536,getFixedPointSigned230Number:()=>x()/0x40000000,getPascalString:()=>[...Array.from(new Uint8Array(g(32)))],getUint(e){let t=[...Array.from(new Uint8Array(g(e)))];return t.reduce((e,r,i)=>e+(r<<8*(t.length-i-1)),0)},getByteString(e,t){let r=g(e);for(;t&&0===r[r.length-1];)r=r.slice(0,-1);return new TextDecoder().decode(r).trim()},planBytes:e=>{let t=l.getOffset();return{discardRest:()=>{let r=e-(l.getOffset()-t);if(r<0)throw Error("read too many bytes");return g(r)}}},getFloat64:()=>{let e=c().getFloat64(l.getDiscardedOffset());return l.increment(8),e},readUntilNullTerminator:()=>{let e,t=[];for(;0!==(e=y());)t.push(e);return l.decrement(1),new TextDecoder().decode(new Uint8Array(t))},getFloat32:()=>{let e=c().getFloat32(l.getDiscardedOffset());return l.increment(4),e},getUint32Le:()=>{let e=c().getUint32(l.getDiscardedOffset(),!0);return l.increment(4),e},getInt32Le:()=>{let e=c().getInt32(l.getDiscardedOffset(),!0);return l.increment(4),e},getInt32:x,destroy:p,startBox:e=>{let t=l.getOffset();return{discardRest:()=>v(e-(l.getOffset()-t)),expectNoMoreBytes:()=>{let r=e-(l.getOffset()-t);if(0!==r)throw Error("expected 0 bytes, got "+r)}}},readExpGolomb:()=>{if(!C)throw Error("Not in bit reading mode");let e=0;for(;0===E(1);)e++;let t=0;for(let r=0;r<e;r++)t=t<<1|E(1);return(1<<e)-1+t},startCheckpoint:()=>{let e=l.getOffset();return{returnToCheckpoint:()=>{l.decrement(l.getOffset()-e)}}},getFlacCodecNumber:()=>{let e=0,t=0;for(;++t,1===E(1);)e++;if(0===e)return E(7);let r=[],i=8-e-1;for(let e=0;e<i;e++)r.unshift(E(1));let a=e-1;for(let e=0;e<a;e++)for(let e=0;e<8;e++){let t=E(1);e<2||r.unshift(t)}return r.reduce((e,t,r)=>e|t<<r,0)},readUntilLineEnd:()=>{let e=[];for(;;){if(0===w())return null;let t=y();if(e.push(t),10===t)break}return new TextDecoder().decode(new Uint8Array(e)).trim()},getSyncSafeInt32:()=>{let e=c().getUint32(l.getDiscardedOffset());return l.increment(4),(0x7f000000&e)>>3|(8323072&e)>>2|(32512&e)>>1|127&e},replaceData:m}}},928801,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.toUnixTimestamp=void 0,r.toUnixTimestamp=e=>0===e?null:1e3*Math.floor(e+new Date("1904-01-01T00:00:00Z").getTime()/1e3)},894368,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseMvhd=void 0;let i=e.r(77548),a=e.r(928801);r.parseMvhd=({iterator:e,offset:t,size:r})=>{let n=e.getUint8();e.discard(3);let o=1===n?e.getUint64():e.getUint32(),s=1===n?e.getUint64():e.getUint32(),l=e.getUint32(),u=1===n?e.getUint64():e.getUint32(),c=Number(u)/l,d=e.getSlice(4),p=(0,i.getArrayBufferIterator)({initialData:d,maxBytes:d.length,logLevel:"error"}),f=10*p.getInt8()+p.getInt8()+.1*p.getInt8()+.01*p.getInt8(),h=e.getSlice(2),m=(0,i.getArrayBufferIterator)({initialData:h,maxBytes:h.length,logLevel:"error"}),g=m.getInt8()+.1*m.getInt8();e.discard(2),e.discard(4),e.discard(4);let v=[e.getFixedPointSigned1616Number(),e.getFixedPointSigned1616Number(),e.getFixedPointSigned230Number(),e.getFixedPointSigned1616Number(),e.getFixedPointSigned1616Number(),e.getFixedPointSigned230Number(),e.getFixedPointSigned1616Number(),e.getFixedPointSigned1616Number(),e.getFixedPointSigned230Number()];e.discard(24);let y=e.getUint32();m.destroy();let b=r-(e.counter.getOffset()-t);if(0!==b)throw Error("expected 0 bytes "+b);return{creationTime:(0,a.toUnixTimestamp)(Number(o)),modificationTime:(0,a.toUnixTimestamp)(Number(s)),timeScale:l,durationInUnits:Number(u),durationInSeconds:c,rate:f,volume:g,matrix:v,nextTrackId:y,type:"mvhd-box",boxSize:r,offset:t}}},951719,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getCodecStringFromSpsAndPps=void 0,r.getCodecStringFromSpsAndPps=e=>`avc1.${e.spsData.profile.toString(16).padStart(2,"0")}${e.spsData.compatibility.toString(16).padStart(2,"0")}${e.spsData.level.toString(16).padStart(2,"0")}`},355194,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.combineUint8Arrays=void 0,r.combineUint8Arrays=e=>{if(0===e.length)return new Uint8Array([]);if(1===e.length)return e[0];let t=0;for(let r of e)t+=r.length;let r=new Uint8Array(t),i=0;for(let t of e)r.set(t,i),i+=t.length;return r}},653909,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.truthy=function(e){return!!e}},567608,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createSpsPpsData=void 0;let i=e.r(355194),a=e.r(653909);function n(e){let t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}r.createSpsPpsData=e=>(0,i.combineUint8Arrays)([new Uint8Array([1,e.sps.spsData.profile,e.sps.spsData.compatibility,e.sps.spsData.level,255,225]),n(e.sps.sps.length),e.sps.sps,new Uint8Array([1]),n(e.pps.pps.length),e.pps.pps,[66,77,88].some(t=>e.sps.spsData.profile===t)?null:new Uint8Array([253,248,248,0])].filter(a.truthy))},172961,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.addAvcProfileToTrack=void 0;let i=e.r(951719),a=e.r(567608);r.addAvcProfileToTrack=(e,t)=>null===t?e:{...e,codec:(0,i.getCodecStringFromSpsAndPps)(t.sps),codecData:{type:"avc-sps-pps",data:(0,a.createSpsPpsData)(t)},description:void 0}},882757,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.registerVideoTrackWhenProfileIsAvailable=r.registerAudioTrack=r.registerVideoTrack=void 0;let i=e.r(172961),a=e.r(66415);r.registerVideoTrack=async({track:e,container:t,logLevel:r,onVideoTrack:i,registerVideoSampleCallback:n,tracks:o})=>{if(o.getTracks().find(t=>t.trackId===e.trackId))return a.Log.trace(r,`Track ${e.trackId} already registered, skipping`),null;if("video"!==e.type)throw Error("Expected video track");if(o.addTrack(e),!i)return null;let s=await i({track:e,container:t});return await n(e.trackId,null!=s?s:null),s},r.registerAudioTrack=async({track:e,container:t,tracks:r,logLevel:i,onAudioTrack:n,registerAudioSampleCallback:o})=>{if(r.getTracks().find(t=>t.trackId===e.trackId))return a.Log.trace(i,`Track ${e.trackId} already registered, skipping`),null;if("audio"!==e.type)throw Error("Expected audio track");if(r.addTrack(e),!n)return null;let s=await n({track:e,container:t});return await o(e.trackId,null!=s?s:null),s},r.registerVideoTrackWhenProfileIsAvailable=({state:e,track:t,container:a})=>{e.riff.registerOnAvcProfileCallback(async n=>{await (0,r.registerVideoTrack)({track:(0,i.addAvcProfileToTrack)(t,n),container:a,logLevel:e.logLevel,onVideoTrack:e.onVideoTrack,registerVideoSampleCallback:e.callbacks.registerVideoSampleCallback,tracks:e.callbacks.tracks})})}},667585,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.makeFetchMoreData=r.makeSkip=void 0,r.makeSkip=e=>({action:"skip",skipTo:e}),r.makeFetchMoreData=e=>({action:"fetch-more-data",bytesNeeded:e})},216484,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseElst=void 0,r.parseElst=({iterator:e,size:t,offset:r})=>{let{discardRest:i}=e.startBox(t-8),a=e.getUint8(),n=e.getUint24(),o=e.getUint32(),s=[];for(let t=0;t<o;t++){let t=Number(1===a?e.getUint64():e.getUint32()),r=Number(1===a?e.getUint64():e.getInt32()),i=e.getUint16(),n=e.getUint16();s.push({editDuration:t,mediaTime:r,mediaRateInteger:i,mediaRateFraction:n})}return i(),{type:"elst-box",version:a,flags:n,entries:s,boxSize:t,offset:r}}},307437,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseDecoderSpecificConfig=void 0,r.parseDecoderSpecificConfig=e=>{let t=e.getUint8(),r=e.getPaddedFourByteNumber(),i=e.counter.getOffset();if(5!==t)return e.discard(r),{type:"unknown-decoder-specific-config"};let a=e.getSlice(r);e.counter.decrement(r),e.startReadingBits();let n=e.getBits(5),o=e.getBits(4);15===o&&e.getBits(24);let s=e.getBits(4);e.stopReadingBits();let l=e.counter.getOffset()-i;return l<r&&e.discard(r-l),{type:"mp4a-specific-config",audioObjectType:n,samplingFrequencyIndex:o,channelConfiguration:s,asBytes:a}}},509792,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseDescriptors=r.processDescriptor=void 0;let i=e.r(307437);r.processDescriptor=({iterator:e})=>{let t=e.getUint8();if(4===t){let t=e.getPaddedFourByteNumber(),r=e.counter.getOffset(),a=e.getUint8();e.startReadingBits();let n=e.getBits(6),o=e.getBits(1);e.getBits(1);let s=e.getBits(24);e.stopReadingBits();let l=e.getUint32(),u=e.getUint32(),c=[];for(;t-(e.counter.getOffset()-r)>0;){let t=(0,i.parseDecoderSpecificConfig)(e);c.push(t)}return{descriptor:{type:"decoder-config-descriptor",objectTypeIndication:64===a?"aac":107===a?"mp3":"unknown",asNumber:a,bufferSizeDB:s,streamType:n,upStream:o,avgBitrate:u,maxBitrate:l,decoderSpecificConfigs:c}}}if(6===t){let t=e.getPaddedFourByteNumber();return e.discard(t),{descriptor:{type:"sl-config-descriptor"}}}return{descriptor:null}},r.parseDescriptors=(e,t)=>{let i=[],a=e.counter.getOffset();for(;e.bytesRemaining()>0&&e.counter.getOffset()-a<t;){let{descriptor:t}=(0,r.processDescriptor)({iterator:e});if(t)i.push(t);else break}return i}},506899,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseEsds=void 0;let i=e.r(509792);r.parseEsds=({data:e,size:t,fileOffset:r})=>{let a=e.getUint8();e.discard(3);let n=e.getUint8(),o=e.getPaddedFourByteNumber(),s=e.getUint16();e.discard(1);let l=t-(e.counter.getOffset()-r),u=(0,i.parseDescriptors)(e,l),c=t-(e.counter.getOffset()-r);return e.discard(c),{type:"esds-box",version:a,tag:n,sizeOfInstance:o,esId:s,descriptors:u}}},475509,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deduplicateMoofBoxesByOffset=r.toMoofBox=r.precomputedMoofState=void 0,r.precomputedMoofState=()=>{let e=[];return{getMoofBoxes:()=>e,setMoofBoxes:t=>{e=t}}},r.toMoofBox=e=>{if("regular-box"!==e.type)throw Error("expected regular bpx");return{offset:e.offset,trafBoxes:e.children.filter(e=>"regular-box"===e.type&&"traf"===e.boxType),size:e.boxSize}},r.deduplicateMoofBoxesByOffset=e=>e.filter((e,t,r)=>t===r.findIndex(t=>t.offset===e.offset))},831097,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getElstBox=r.getTrakBoxByTrackId=r.getTfraBoxes=r.getTfraBoxesFromMfraBoxChildren=r.getTrexBoxes=r.getMvexBox=r.getTrunBoxes=r.getTfhdBox=r.getTfdtBox=r.getStssBox=r.getStscBox=r.getStszBox=r.getCttsBox=r.getSttsBox=r.getStcoBox=r.getVideoDescriptors=r.getStsdBox=r.getStblBox=r.getMdhdBox=r.getMdiaBox=r.getTkhdBox=r.getTraks=r.getMvhdBox=r.getMoofBoxes=r.getMoovBoxFromState=r.getMoovFromFromIsoStructure=r.getFtypBox=void 0;let i=e.r(475509);r.getFtypBox=e=>{let t=e.find(e=>"ftyp-box"===e.type);return t&&"ftyp-box"===t.type?t:null},r.getMoovFromFromIsoStructure=e=>{let t=e.boxes.find(e=>"moov-box"===e.type);return t&&"moov-box"===t.type?t:null},r.getMoovBoxFromState=({structureState:e,isoState:t,mp4HeaderSegment:i,mayUsePrecomputed:a})=>{let n=t.moov.getMoovBoxAndPrecomputed();if(n&&(a||!n.precomputed))return n.moovBox;if(i)return(0,r.getMoovFromFromIsoStructure)(i);let o=e.getIsoStructure();return(0,r.getMoovFromFromIsoStructure)(o)},r.getMoofBoxes=e=>e.filter(e=>"regular-box"===e.type&&"moof"===e.boxType).map(e=>(0,i.toMoofBox)(e)),r.getMvhdBox=e=>{let t=e.children.find(e=>"mvhd-box"===e.type);return t&&"mvhd-box"===t.type?t:null},r.getTraks=e=>e.children.filter(e=>"trak-box"===e.type),r.getTkhdBox=e=>e.children.find(e=>"tkhd-box"===e.type),r.getMdiaBox=e=>{let t=e.children.find(e=>"regular-box"===e.type&&"mdia"===e.boxType);return t&&"regular-box"===t.type?t:null},r.getMdhdBox=e=>{let t=(0,r.getMdiaBox)(e);return t?t.children.find(e=>"mdhd-box"===e.type):null},r.getStblBox=e=>{let t=(0,r.getMdiaBox)(e);if(!t)return null;let i=t.children.find(e=>"regular-box"===e.type&&"minf"===e.boxType);if(!i||"regular-box"!==i.type)return null;let a=i.children.find(e=>"regular-box"===e.type&&"stbl"===e.boxType);return a&&"regular-box"===a.type?a:null},r.getStsdBox=e=>{let t=(0,r.getStblBox)(e);return t&&"regular-box"===t.type?t.children.find(e=>"stsd-box"===e.type):null},r.getVideoDescriptors=e=>{var t;let i=(0,r.getStsdBox)(e);return i&&null!=(t=i.samples.map(e=>"video"===e.type?e.descriptors.map(e=>"avcc-box"===e.type||"hvcc-box"===e.type?e.privateData:null):[]).flat(1).filter(Boolean)[0])?t:null},r.getStcoBox=e=>{let t=(0,r.getStblBox)(e);return t&&"regular-box"===t.type?t.children.find(e=>"stco-box"===e.type):null},r.getSttsBox=e=>{let t=(0,r.getStblBox)(e);return t&&"regular-box"===t.type?t.children.find(e=>"stts-box"===e.type):null},r.getCttsBox=e=>{let t=(0,r.getStblBox)(e);return t&&"regular-box"===t.type?t.children.find(e=>"ctts-box"===e.type):null},r.getStszBox=e=>{let t=(0,r.getStblBox)(e);return t&&"regular-box"===t.type?t.children.find(e=>"stsz-box"===e.type):null},r.getStscBox=e=>{let t=(0,r.getStblBox)(e);return t&&"regular-box"===t.type?t.children.find(e=>"stsc-box"===e.type):null},r.getStssBox=e=>{let t=(0,r.getStblBox)(e);return t&&"regular-box"===t.type?t.children.find(e=>"stss-box"===e.type):null},r.getTfdtBox=e=>{if("regular-box"!==e.type||"traf"!==e.boxType)throw Error("Expected traf-box");let t=e.children.find(e=>"tfdt-box"===e.type);if(!t||"tfdt-box"!==t.type)throw Error("Expected tfhd-box");return t},r.getTfhdBox=e=>{if("regular-box"!==e.type||"traf"!==e.boxType)throw Error("Expected traf-box");let t=e.children.find(e=>"tfhd-box"===e.type);if(!t||"tfhd-box"!==t.type)throw Error("Expected tfhd-box");return t},r.getTrunBoxes=e=>{if("regular-box"!==e.type||"traf"!==e.boxType)throw Error("Expected traf-box");return e.children.filter(e=>"trun-box"===e.type)},r.getMvexBox=e=>{let t=e.children.find(e=>"regular-box"===e.type&&"mvex"===e.boxType);return t&&"regular-box"===t.type?t:null},r.getTrexBoxes=e=>{let t=(0,r.getMvexBox)(e);return t?t.children.filter(e=>"trex-box"===e.type):[]},r.getTfraBoxesFromMfraBoxChildren=e=>e.filter(e=>"tfra-box"===e.type),r.getTfraBoxes=e=>{let t=e.find(e=>"regular-box"===e.type&&"mfra"===e.boxType);return t?(0,r.getTfraBoxesFromMfraBoxChildren)(t.children):[]},r.getTrakBoxByTrackId=(e,t)=>{var i;return null!=(i=(0,r.getTraks)(e).find(e=>{let i=(0,r.getTkhdBox)(e);return!!i&&i.trackId===t}))?i:null},r.getElstBox=e=>{let t=e.children.find(e=>"regular-box"===e.type&&"edts"===e.boxType);return t&&"regular-box"===t.type?t.children.find(e=>"elst-box"===e.type):null}},116506,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.findTrackMediaTimeOffsetInTrackTimescale=r.findTrackStartTimeInSeconds=void 0;let i=e.r(831097);r.findTrackStartTimeInSeconds=({movieTimeScale:e,trakBox:t})=>{let r=(0,i.getElstBox)(t);if(!r)return 0;let{entries:a}=r,n=0;for(let e of a){let{editDuration:t,mediaTime:r}=e;-1===r&&(n+=t)}return n/e},r.findTrackMediaTimeOffsetInTrackTimescale=({trakBox:e})=>{let t=(0,i.getElstBox)(e);if(!t)return 0;let{entries:r}=t,a=0;for(let e of r){let{mediaTime:t}=e;-1!==t&&(a+=t)}return a}},452893,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WEBCODECS_TIMESCALE=void 0,r.WEBCODECS_TIMESCALE=1e6},145497,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MEDIA_PARSER_RIFF_TIMESCALE=void 0,r.MEDIA_PARSER_RIFF_TIMESCALE=1e6},248546,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getStrhBox=r.getStrlBoxes=r.getAvihBox=r.getHdlrBox=r.isRiffAvi=void 0,r.isRiffAvi=e=>e.boxes.some(e=>"riff-header"===e.type&&"AVI"===e.fileType),r.getHdlrBox=e=>e.boxes.find(e=>"list-box"===e.type&&"hdrl"===e.listType),r.getAvihBox=e=>{let t=(0,r.getHdlrBox)(e);return t?t.children.find(e=>"avih-box"===e.type):null},r.getStrlBoxes=e=>{let t=(0,r.getHdlrBox)(e);return t?t.children.filter(e=>"list-box"===e.type&&"strl"===e.listType):[]},r.getStrhBox=e=>e.find(e=>"strh-box"===e.type)},737232,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hasAllTracksFromAvi=r.getTracksFromAvi=r.makeAviVideoTrack=r.makeAviAudioTrack=r.getNumberOfTracks=r.TO_BE_OVERRIDDEN_LATER=void 0;let i=e.r(172961),a=e.r(452893),n=e.r(145497),o=e.r(248546);r.TO_BE_OVERRIDDEN_LATER="to-be-overriden-later",r.getNumberOfTracks=e=>{let t=(0,o.getAvihBox)(e);if(t)return t.streams;throw Error("No avih box found")},r.makeAviAudioTrack=({strf:e,index:t})=>{if(255!==e.formatTag)throw Error(`Unsupported audio format ${e.formatTag}`);return{type:"audio",codec:"mp4a.40.2",codecData:{type:"aac-config",data:new Uint8Array([18,16])},codecEnum:"aac",description:new Uint8Array([18,16]),numberOfChannels:e.numberOfChannels,sampleRate:e.sampleRate,originalTimescale:n.MEDIA_PARSER_RIFF_TIMESCALE,trackId:t,startInSeconds:0,timescale:a.WEBCODECS_TIMESCALE,trackMediaTimeOffsetInTrackTimescale:0}},r.makeAviVideoTrack=({strh:e,strf:t,index:i})=>{if("H264"!==e.handler)throw Error(`Unsupported video codec ${e.handler}`);return{codecData:null,codec:r.TO_BE_OVERRIDDEN_LATER,codecEnum:"h264",codedHeight:t.height,codedWidth:t.width,width:t.width,height:t.height,type:"video",displayAspectHeight:t.height,originalTimescale:n.MEDIA_PARSER_RIFF_TIMESCALE,description:void 0,m3uStreamFormat:null,trackId:i,colorSpace:{fullRange:null,matrix:null,primaries:null,transfer:null},advancedColor:{fullRange:null,matrix:null,primaries:null,transfer:null},displayAspectWidth:t.width,rotation:0,sampleAspectRatio:{numerator:1,denominator:1},fps:e.rate/e.scale,startInSeconds:0,timescale:a.WEBCODECS_TIMESCALE,trackMediaTimeOffsetInTrackTimescale:0}},r.getTracksFromAvi=(e,t)=>{let a=[],n=(0,o.getStrlBoxes)(e),s=0;for(let e of n){let n=(0,o.getStrhBox)(e.children);if(!n)continue;let{strf:l}=n;if("strf-box-video"===l.type)a.push((0,i.addAvcProfileToTrack)((0,r.makeAviVideoTrack)({strh:n,strf:l,index:s}),t.riff.getAvcProfile()));else if("auds"===n.fccType)a.push((0,r.makeAviAudioTrack)({strf:l,index:s}));else throw Error(`Unsupported track type ${n.fccType}`);s++}return a},r.hasAllTracksFromAvi=e=>{try{let t=e.structure.getRiffStructure(),i=(0,r.getNumberOfTracks)(t),a=(0,r.getTracksFromAvi)(t,e);return a.length===i&&!a.find(e=>"video"===e.type&&e.codec===r.TO_BE_OVERRIDDEN_LATER)}catch(e){return!1}}},763854,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getStreamForId=r.getProgramForId=r.findProgramMapTableOrThrow=r.findProgramMapOrNull=void 0,r.findProgramMapOrNull=e=>{let t=e.boxes.find(e=>"transport-stream-pmt-box"===e.type);return t||null},r.findProgramMapTableOrThrow=e=>{let t=(0,r.findProgramMapOrNull)(e);if(!t)throw Error("No PMT box found");return t},r.getProgramForId=(e,t)=>{let r=(e=>{let t=e.boxes.find(e=>"transport-stream-pat-box"===e.type);if(!t)throw Error("No PAT box found");return t})(e).pat.find(e=>e.programMapIdentifier===t);return null!=r?r:null},r.getStreamForId=(e,t)=>{let i=(0,r.findProgramMapTableOrThrow)(e).streams.find(e=>e.pid===t);return null!=i?i:null}},510584,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hasAllTracksFromTransportStream=r.getTracksFromTransportStream=r.filterStreamsBySupportedTypes=void 0;let i=e.r(653909),a=e.r(763854);r.filterStreamsBySupportedTypes=e=>e.filter(e=>27===e.streamType||15===e.streamType),r.getTracksFromTransportStream=e=>{let t=e.structure.getTsStructure(),n=(0,a.findProgramMapTableOrThrow)(t),o=e.callbacks.tracks.getTracks(),s=(0,r.filterStreamsBySupportedTypes)(n.streams).map(e=>o.find(t=>t.trackId===e.pid)).filter(i.truthy);if(s.length!==(0,r.filterStreamsBySupportedTypes)(n.streams).length)throw Error("Not all tracks found");return s},r.hasAllTracksFromTransportStream=e=>{try{return(0,r.getTracksFromTransportStream)(e),!0}catch(e){return!1}}},474443,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getHvc1CodecString=void 0,r.getHvc1CodecString=e=>{let t=e.getUint8();if(1!==t)throw Error(`Unsupported HVCC version ${t}`);let r=e.getUint8(),i=e.getUint32(),a=r>>6,n=e.getSlice(6),o=e.getUint8(),s=0;for(let e=0;e<32&&(s|=1&i,31!==e);e++)s<<=1,i>>=1;let l=!1,u="";for(let e=5;e>=0;e--)(n[e]||l)&&(u=n[e].toString(16)+u,l=!0);return`${0===a?"":1===a?"A":2===a?"B":"C"}${(31&r).toString(16)}.${s.toString(16)}.${0==(32&r)>>5?"L":"H"}${o}${u?".":""}${u}`}},852834,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mediaParserAdvancedColorToWebCodecsColor=void 0,r.mediaParserAdvancedColorToWebCodecsColor=e=>({transfer:e.transfer,matrix:e.matrix,primaries:e.primaries,fullRange:e.fullRange})},464206,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseAv1PrivateData=void 0;let i=e.r(77548);r.parseAv1PrivateData=(e,t)=>{let r=(0,i.getArrayBufferIterator)({initialData:e,maxBytes:e.byteLength,logLevel:"error"});if(r.startReadingBits(),1!==r.getBits(1))throw r.destroy(),Error("Expected av1 private data to be version 1");let a=r.getBits(7);if(1!==a)throw r.destroy(),Error(`Expected av1 private data to be version 1, got ${a}`);let n="av01.",o=r.getBits(3);n+=o,n+=".";let s=r.getBits(5),l=r.getBits(1);n+=String(s).padStart(2,"0"),n+=l?"H":"M",n+=".";let u=r.getBits(1),c=r.getBits(1);n+=(u&&2===o?c?12:10:u?10:8).toString().padStart(2,"0"),n+=".",n+=r.getBits(1)?"1":"0",n+=".";let d=r.getBits(1);n+=d?"1":"0";let p=r.getBits(1);n+=p?"1":"0";let f=r.getBits(2);n+=d&&p&&1===f?"1":"0",n+=".",t&&"transfer-characteristics"===t.colorType?(n+=t.primaries.toString().padStart(2,"0"),n+=".",n+=t.transfer.toString().padStart(2,"0"),n+=".",n+=t.matrixIndex.toString().padStart(2,"0"),n+=".",n+=t.fullRangeFlag?"1":"0"):(n+="01",n+=".",n+="01",n+=".",n+="01",n+=".",n+="0");let h=".0.110.01.01.01.0";return n.endsWith(h)&&(n=n.slice(0,-h.length)),r.destroy(),n}},294190,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getPrimariesFromIndex=r.getTransferCharacteristicsFromIndex=r.getMatrixCoefficientsFromIndex=void 0,r.getMatrixCoefficientsFromIndex=e=>0===e?"rgb":1===e?"bt709":5===e?"bt470bg":6===e?"smpte170m":9===e?"bt2020-ncl":null,r.getTransferCharacteristicsFromIndex=e=>1===e?"bt709":6===e?"smpte170m":8===e?"linear":13===e?"iec61966-2-1":16===e?"pq":18===e?"hlg":null,r.getPrimariesFromIndex=e=>1===e?"bt709":5===e?"bt470bg":6===e?"smpte170m":9===e?"bt2020":12===e?"smpte432":null},125925,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getClusterSegment=r.getPrivateData=r.getBitDepth=r.getNumberOfChannels=r.getSampleRate=r.getAudioSegment=r.getVideoSegment=r.getTimescaleSegment=r.getTrackWithUid=r.getTracksSegment=r.getDisplayWidthSegment=r.getHeightSegment=r.getWidthSegment=r.getTrackTypeSegment=r.getDisplayHeightSegment=r.getRangeSegment=r.getPrimariesSegment=r.getMatrixCoefficientsSegment=r.getTransferCharacteristicsSegment=r.getColourSegment=r.getCodecSegment=r.getTrackId=r.getTrackByNumber=r.getTrackTimestampScale=r.getTrackCodec=r.getTrackNumber=r.getMainSegment=void 0,r.getMainSegment=e=>{var t;return null!=(t=e.find(e=>"Segment"===e.type))?t:null},r.getTrackNumber=e=>{var t;let r=e.value.find(e=>"TrackNumber"===e.type);return null!=(t=null==r?void 0:r.value)?t:null},r.getTrackCodec=e=>{let t=e.value.find(e=>"CodecID"===e.type);return null!=t?t:null},r.getTrackTimestampScale=e=>{let t=e.value.find(e=>"TrackTimestampScale"===e.type);if(!t)return null;if("TrackTimestampScale"!==t.type)throw Error("Expected TrackTimestampScale");return t.value},r.getTrackByNumber=(e,t)=>e.find(e=>{let i=(0,r.getTrackNumber)(e);return(null==i?void 0:i.value)===t}),r.getTrackId=e=>{let t=e.value.find(e=>"TrackNumber"===e.type);if(!t||"TrackNumber"!==t.type)throw Error("Expected track number segment");return t.value.value},r.getCodecSegment=e=>{let t=e.value.find(e=>"CodecID"===e.type);return t&&"CodecID"===t.type?t:null},r.getColourSegment=e=>{let t=(0,r.getVideoSegment)(e);if(!t)return null;let i=t.value.find(e=>"Colour"===e.type);return i&&"Colour"===i.type?i:null},r.getTransferCharacteristicsSegment=e=>{if(!e||"Colour"!==e.type)return null;let t=e.value.find(e=>"TransferCharacteristics"===e.type);return t&&"TransferCharacteristics"===t.type?t:null},r.getMatrixCoefficientsSegment=e=>{if(!e||"Colour"!==e.type)return null;let t=e.value.find(e=>"MatrixCoefficients"===e.type);return t&&"MatrixCoefficients"===t.type?t:null},r.getPrimariesSegment=e=>{if(!e||"Colour"!==e.type)return null;let t=e.value.find(e=>"Primaries"===e.type);return t&&"Primaries"===t.type?t:null},r.getRangeSegment=e=>{if(!e||"Colour"!==e.type)return null;let t=e.value.find(e=>"Range"===e.type);return t&&"Range"===t.type?t:null},r.getDisplayHeightSegment=e=>{let t=(0,r.getVideoSegment)(e);if(!t)return null;let i=t.value.find(e=>"DisplayHeight"===e.type);return i&&"DisplayHeight"===i.type?i:null},r.getTrackTypeSegment=e=>{let t=e.value.find(e=>"TrackType"===e.type);return t&&"TrackType"===t.type?t:null},r.getWidthSegment=e=>{let t=(0,r.getVideoSegment)(e);if(!t)return null;let i=t.value.find(e=>"PixelWidth"===e.type);return i&&"PixelWidth"===i.type?i:null},r.getHeightSegment=e=>{let t=(0,r.getVideoSegment)(e);if(!t)return null;let i=t.value.find(e=>"PixelHeight"===e.type);return i&&"PixelHeight"===i.type?i:null},r.getDisplayWidthSegment=e=>{let t=(0,r.getVideoSegment)(e);if(!t)return null;let i=t.value.find(e=>"DisplayWidth"===e.type);return i&&"DisplayWidth"===i.type?i:null},r.getTracksSegment=e=>{let t=e.value.find(e=>"Tracks"===e.type);return t||null},r.getTrackWithUid=(e,t)=>{var i,a;let n=(0,r.getTracksSegment)(e);if(!n)return null;let o=n.value.filter(e=>"TrackEntry"===e.type).find(e=>null==e?void 0:e.value.find(e=>"TrackUID"===e.type&&e.value===t));return o&&null!=(a=null==(i=o.value.find(e=>"TrackNumber"===e.type))?void 0:i.value.value)?a:null},r.getTimescaleSegment=e=>{let t=e.value.find(e=>"Info"===e.type);if(!t||"Info"!==t.type)return null;let r=t.value.find(e=>"TimestampScale"===e.type);return r&&"TimestampScale"===r.type?r:null},r.getVideoSegment=e=>{let t=e.value.find(e=>"Video"===e.type);return t&&"Video"===t.type&&null!=t?t:null},r.getAudioSegment=e=>{let t=e.value.find(e=>"Audio"===e.type);return t&&"Audio"===t.type&&null!=t?t:null},r.getSampleRate=e=>{let t=(0,r.getAudioSegment)(e);if(!t)return null;let i=t.value.find(e=>"SamplingFrequency"===e.type);return i&&"SamplingFrequency"===i.type?i.value.value:null},r.getNumberOfChannels=e=>{let t=(0,r.getAudioSegment)(e);if(!t)throw Error("Could not find audio segment");let i=t.value.find(e=>"Channels"===e.type);return i&&"Channels"===i.type?i.value.value:1},r.getBitDepth=e=>{let t=(0,r.getAudioSegment)(e);if(!t)return null;let i=t.value.find(e=>"BitDepth"===e.type);return i&&"BitDepth"===i.type?i.value.value:null},r.getPrivateData=e=>{let t=e.value.find(e=>"CodecPrivate"===e.type);return t&&"CodecPrivate"===t.type?t.value:null},r.getClusterSegment=e=>{let t=e.value.find(e=>"Cluster"===e.type);return null!=t?t:null}},664497,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseColorSegment=void 0;let i=e.r(294190),a=e.r(125925);r.parseColorSegment=e=>{let t=(0,a.getTransferCharacteristicsSegment)(e),r=(0,a.getMatrixCoefficientsSegment)(e),n=(0,a.getPrimariesSegment)(e),o=(0,a.getRangeSegment)(e);return{transfer:t?(0,i.getTransferCharacteristicsFromIndex)(t.value.value):null,matrix:r?(0,i.getMatrixCoefficientsFromIndex)(r.value.value):null,primaries:n?(0,i.getPrimariesFromIndex)(n.value.value):null,fullRange:(null==t?void 0:t.value.value)&&(null==r?void 0:r.value.value)?null:o?!!(null==o?void 0:o.value.value):null}}},799931,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getAudioDescription=void 0;let i=e.r(77548),a=e.r(125925);r.getAudioDescription=e=>{let t=(0,a.getCodecSegment)(e);if(!t||"A_VORBIS"!==t.value)return;let r=(0,a.getPrivateData)(e);if(!r)return;if(2!==r[0])throw Error("Expected vorbis private data version 2");let n=1,o=0,s=0;for(;(255&r[n])==255;)o+=255,n++;for(o+=255&r[n++];(255&r[n])==255;)s+=255,n++;if(s+=255&r[n++],1!==r[n])throw Error("Error parsing vorbis codec private");let l=r.slice(n,n+o);if(3!==r[n+=o])throw Error("Error parsing vorbis codec private");let u=r.slice(n,n+s);if(5!==r[n+=s])throw Error("Error parsing vorbis codec private");let c=r.slice(n),d=(0,i.getArrayBufferIterator)({initialData:l.slice(0),maxBytes:l.length,logLevel:"error"});if(d.getUint8(),"vorbis"!==d.getByteString(6,!1)||0!==d.getUint32Le())throw Error("Error parsing vorbis codec private");return new Uint8Array([2,l.length,u.length,...l,...u,...c])}},356843,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.trackTypeToString=void 0,r.trackTypeToString=e=>{switch(e){case 1:return"video";case 2:return"audio";case 3:return"complex";case 4:return"subtitle";case 5:return"button";case 6:return"control";case 7:return"metadata";default:throw Error(`Unknown track type: ${e}`)}}},687470,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getTrack=r.getMatroskaAudioCodecEnum=r.NO_CODEC_PRIVATE_SHOULD_BE_DERIVED_FROM_SPS=void 0;let i=e.r(77548),a=e.r(474443),n=e.r(452893),o=e.r(852834),s=e.r(464206),l=e.r(664497),u=e.r(799931),c=e.r(356843),d=e.r(125925);r.NO_CODEC_PRIVATE_SHOULD_BE_DERIVED_FROM_SPS="no-codec-private-should-be-derived-from-sps",r.getMatroskaAudioCodecEnum=({track:e})=>{let t=(0,d.getCodecSegment)(e);if(!t)throw Error("Expected codec segment");if("A_OPUS"===t.value)return"opus";if("A_VORBIS"===t.value)return"vorbis";if("A_PCM/INT/LIT"===t.value){let t=(0,d.getBitDepth)(e);if(null===t)throw Error("Expected bit depth");if(8===t)return"pcm-u8";if(16===t)return"pcm-s16";if(24===t)return"pcm-s24";throw Error("Unknown audio format")}if("A_AAC"===t.value)return"aac";if("A_MPEG/L3"===t.value)return"mp3";throw Error(`Unknown codec: ${t.value}`)},r.getTrack=({timescale:e,track:t})=>{let p=(0,d.getTrackTypeSegment)(t);if(!p)throw Error("Expected track type segment");let f=(0,d.getTrackId)(t);if("video"===(0,c.trackTypeToString)(p.value.value)){let u=(0,d.getWidthSegment)(t);if(null===u)throw Error("Expected width segment");let c=(0,d.getHeightSegment)(t);if(null===c)throw Error("Expected height segment");let p=(0,d.getDisplayHeightSegment)(t),h=(0,d.getDisplayWidthSegment)(t),m=(0,d.getCodecSegment)(t);if(!m)return null;let g=(0,d.getPrivateData)(t),v=(({track:e,codecSegment:t})=>{if("V_VP8"===t.value)return"vp8";if("V_VP9"===t.value){if((0,d.getPrivateData)(e))throw Error("@remotion/media-parser cannot handle the private data for VP9. Do you have an example file you could send so we can implement it? https://remotion.dev/report");return"vp09.00.10.08"}if("V_MPEG4/ISO/AVC"===t.value){let t=(0,d.getPrivateData)(e);return t?`avc1.${t[1].toString(16).padStart(2,"0")}${t[2].toString(16).padStart(2,"0")}${t[3].toString(16).padStart(2,"0")}`:r.NO_CODEC_PRIVATE_SHOULD_BE_DERIVED_FROM_SPS}if("V_MPEGH/ISO/HEVC"===t.value){let t=(0,d.getPrivateData)(e),r=(0,i.getArrayBufferIterator)({initialData:t,maxBytes:t.length,logLevel:"error"});return"hvc1."+(0,a.getHvc1CodecString)(r)}if("V_AV1"===t.value){let t=(0,d.getPrivateData)(e);if(!t)throw Error("Expected private data in AV1 track");return(0,s.parseAv1PrivateData)(t,null)}throw Error(`Unknown codec: ${t.value}`)})({track:t,codecSegment:m}),y=(0,d.getColourSegment)(t);if(!v)return null;let b=(({codecSegment:e})=>{if("V_VP8"===e.value)return"vp8";if("V_VP9"===e.value)return"vp9";if("V_MPEG4/ISO/AVC"===e.value)return"h264";if("V_AV1"===e.value)return"av1";if("V_MPEGH/ISO/HEVC"===e.value)return"h265";throw Error(`Unknown codec: ${e.value}`)})({codecSegment:m}),x=null===g?null:"h264"===b?{type:"avc-sps-pps",data:g}:"av1"===b?{type:"av1c-data",data:g}:"h265"===b?{type:"hvcc-data",data:g}:"vp8"===b||"vp9"===b?{type:"unknown-data",data:g}:null,w=y?(0,l.parseColorSegment)(y):{fullRange:null,matrix:null,primaries:null,transfer:null};return{m3uStreamFormat:null,type:"video",trackId:f,codec:v,description:(e=>{let t=(0,d.getCodecSegment)(e);if(t&&("V_MPEG4/ISO/AVC"===t.value||"V_MPEGH/ISO/HEVC"===t.value)){let t=(0,d.getPrivateData)(e);if(t)return t}})(t),height:p?p.value.value:c.value.value,width:h?h.value.value:u.value.value,sampleAspectRatio:{numerator:1,denominator:1},originalTimescale:e,codedHeight:c.value.value,codedWidth:u.value.value,displayAspectHeight:p?p.value.value:c.value.value,displayAspectWidth:h?h.value.value:u.value.value,rotation:0,codecData:x,colorSpace:(0,o.mediaParserAdvancedColorToWebCodecsColor)(w),advancedColor:w,codecEnum:b,fps:null,startInSeconds:0,timescale:n.WEBCODECS_TIMESCALE,trackMediaTimeOffsetInTrackTimescale:0}}if("audio"===(0,c.trackTypeToString)(p.value.value)){let a=(0,d.getSampleRate)(t),o=(0,d.getNumberOfChannels)(t),s=(0,d.getPrivateData)(t);if(null===a)throw Error("Could not find sample rate or number of channels");let l=(e=>{let t=(0,d.getCodecSegment)(e);if(!t)throw Error("Expected codec segment");if("A_OPUS"===t.value)return"opus";if("A_VORBIS"===t.value)return"vorbis";if("A_PCM/INT/LIT"===t.value){let t=(0,d.getBitDepth)(e);if(null===t)throw Error("Expected bit depth");return 8===t?"pcm-u8":"pcm-s"+t}if("A_AAC"===t.value){let t=(0,d.getPrivateData)(e),r=(0,i.getArrayBufferIterator)({initialData:t,maxBytes:t.length,logLevel:"error"});r.startReadingBits();let a=r.getBits(5);return r.stopReadingBits(),r.destroy(),`mp4a.40.${a.toString().padStart(2,"0")}`}if("A_MPEG/L3"===t.value)return"mp3";throw Error(`Unknown codec: ${t.value}`)})(t);return{type:"audio",trackId:f,codec:l,originalTimescale:e,numberOfChannels:o,sampleRate:a,description:(0,u.getAudioDescription)(t),codecData:s?"opus"===l?{type:"ogg-identification",data:s}:{type:"unknown-data",data:s}:null,codecEnum:(0,r.getMatroskaAudioCodecEnum)({track:t}),startInSeconds:0,timescale:n.WEBCODECS_TIMESCALE,trackMediaTimeOffsetInTrackTimescale:0}}return null}},292780,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.matroskaHasTracks=r.getTracksFromMatroska=void 0;let i=e.r(951719),a=e.r(687470),n=e.r(125925);r.getTracksFromMatroska=({structureState:e,webmState:t})=>{let r=e.getMatroskaStructure(),o=(0,n.getMainSegment)(r.boxes);if(!o)throw Error("No main segment");let s=(0,n.getTracksSegment)(o);if(!s)throw Error("No tracks segment");let l=[],u=[];for(let e of s.value){if("Crc32"===e.type)continue;if("TrackEntry"!==e.type)throw Error("Expected track entry segment");let r=(0,a.getTrack)({track:e,timescale:t.getTimescale()});if(r)if(r.codec===a.NO_CODEC_PRIVATE_SHOULD_BE_DERIVED_FROM_SPS){let e=t.getAvcProfileForTrackNumber(r.trackId);e?l.push({...r,codec:(0,i.getCodecStringFromSpsAndPps)(e)}):u.push(r)}else l.push(r)}return{missingInfo:u,resolved:l}},r.matroskaHasTracks=({structureState:e,webmState:t})=>{let i=e.getMatroskaStructure(),a=(0,n.getMainSegment)(i.boxes);return!!a&&null!==(0,n.getTracksSegment)(a)&&0===(0,r.getTracksFromMatroska)({structureState:e,webmState:t}).missingInfo.length}},86711,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getTracks=r.defaultHasallTracks=r.defaultGetTracks=r.getTracksFromIsoBaseMedia=r.getTracksFromMoovBox=r.getHasTracks=r.isoBaseMediaHasTracks=r.getNumberOfTracks=void 0;let i=e.r(593847),a=e.r(116506),n=e.r(831097),o=e.r(737232),s=e.r(510584),l=e.r(292780);r.getNumberOfTracks=e=>{let t=(0,n.getMvhdBox)(e);return t?t.nextTrackId-1:0},r.isoBaseMediaHasTracks=(e,t)=>{var r,i;return!!(0,n.getMoovBoxFromState)({structureState:e.structure,isoState:e.iso,mp4HeaderSegment:null!=(i=null==(r=e.m3uPlaylistContext)?void 0:r.mp4HeaderSegment)?i:null,mayUsePrecomputed:t})},r.getHasTracks=(e,t)=>{let i=e.structure.getStructure();if("matroska"===i.type)return(0,l.matroskaHasTracks)({structureState:e.structure,webmState:e.webm});if("iso-base-media"===i.type)return(0,r.isoBaseMediaHasTracks)(e,t);if("riff"===i.type)return(0,o.hasAllTracksFromAvi)(e);if("transport-stream"===i.type)return(0,s.hasAllTracksFromTransportStream)(e);if("mp3"===i.type)return e.callbacks.tracks.getTracks().length>0;if("wav"===i.type||"aac"===i.type||"flac"===i.type||"m3u"===i.type)return e.callbacks.tracks.hasAllTracks();throw Error("Unknown container "+i)},r.getTracksFromMoovBox=e=>{let t=[];for(let r of(0,n.getTraks)(e)){let o=(0,n.getMvhdBox)(e);if(!o)throw Error("Mvhd box is not found");let s=(0,a.findTrackStartTimeInSeconds)({movieTimeScale:o.timeScale,trakBox:r}),l=(0,i.makeBaseMediaTrack)(r,s);l&&t.push(l)}return t},r.getTracksFromIsoBaseMedia=({mayUsePrecomputed:e,structure:t,isoState:i,m3uPlaylistContext:a})=>{var o;let s=(0,n.getMoovBoxFromState)({structureState:t,isoState:i,mp4HeaderSegment:null!=(o=null==a?void 0:a.mp4HeaderSegment)?o:null,mayUsePrecomputed:e});return s?(0,r.getTracksFromMoovBox)(s):[]},r.defaultGetTracks=e=>{let t=e.callbacks.tracks.getTracks();if(0===t.length)throw Error("No tracks found");return t},r.defaultHasallTracks=e=>{try{return(0,r.defaultGetTracks)(e),!0}catch(e){return!1}},r.getTracks=(e,t)=>{let i=e.structure.getStructure();if("matroska"===i.type)return(e=>{let{resolved:t}=(0,l.getTracksFromMatroska)({structureState:e.structure,webmState:e.webm});return t})(e);if("iso-base-media"===i.type)return(0,r.getTracksFromIsoBaseMedia)({isoState:e.iso,m3uPlaylistContext:e.m3uPlaylistContext,structure:e.structure,mayUsePrecomputed:t});if("riff"===i.type)return(0,o.getTracksFromAvi)(i,e);if("transport-stream"===i.type)return(0,s.getTracksFromTransportStream)(e);if("mp3"===i.type||"wav"===i.type||"flac"===i.type||"aac"===i.type||"m3u"===i.type)return(0,r.defaultGetTracks)(e);throw Error(`Unknown container${i}`)}},540360,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getAudioCodecFromTrack=r.getAudioCodecStringFromTrak=r.isTwosAudioCodec=r.isIn24AudioCodec=r.isLpcmAudioCodec=r.getAudioCodecFromTrak=r.getSampleRate=r.getNumberOfChannelsFromTrak=r.getCodecPrivateFromTrak=r.hasAudioCodec=r.getAudioCodec=void 0;let i=e.r(831097),a=e.r(86711);r.getAudioCodec=e=>{let t=(0,a.getTracks)(e,!0);if(0===t.length)throw Error("No tracks yet");let r=t.find(e=>"audio"===e.type);return r&&"audio"===r.type?r.codecEnum:null},r.hasAudioCodec=e=>(0,a.getHasTracks)(e,!0),r.getCodecPrivateFromTrak=e=>{let t=(0,i.getStsdBox)(e);if(!t)return null;let r=t.samples.find(e=>"audio"===e.type);if(!r||"audio"!==r.type)return null;let a=r.children.find(e=>"esds-box"===e.type);if(!a||"esds-box"!==a.type)return null;let n=a.descriptors.find(e=>"decoder-config-descriptor"===e.type);if(!n)return null;let o=n.decoderSpecificConfigs.find(e=>"mp4a-specific-config"===e.type);return o?{type:"aac-config",data:o.asBytes}:null};let n=(e,t)=>{let r=t.find(e=>"esds-box"===e.type);if(r&&"esds-box"===r.type){let t=(({child:e})=>{let t=e.descriptors.find(e=>"decoder-config-descriptor"===e.type);if(!t)throw Error("No decoder-config-descriptor");if("decoder-config-descriptor"!==t.type)throw Error("Expected decoder-config-descriptor");if(64!==t.asNumber)return{primary:t.asNumber,secondary:null,description:void 0};let r=t.decoderSpecificConfigs.find(e=>"mp4a-specific-config"===e.type?e:null);if(!r||"mp4a-specific-config"!==r.type)throw Error("No audio-specific-config");return{primary:t.asNumber,secondary:r.audioObjectType,description:r.asBytes}})({child:r});return{format:e.format,primarySpecificator:t.primary,secondarySpecificator:t.secondary,description:t.description}}return{format:e.format,primarySpecificator:null,secondarySpecificator:null,description:void 0}};r.getNumberOfChannelsFromTrak=e=>{let t=(0,i.getStsdBox)(e);if(!t)return null;let r=t.samples.find(e=>"audio"===e.type);return r&&"audio"===r.type?r.numberOfChannels:null},r.getSampleRate=e=>{let t=(0,i.getStsdBox)(e);if(!t)return null;let r=t.samples.find(e=>"audio"===e.type);return r&&"audio"===r.type?r.sampleRate:null},r.getAudioCodecFromTrak=e=>{let t=(0,i.getStsdBox)(e);if(!t)return null;let r=t.samples.find(e=>"audio"===e.type);if(!r||"audio"!==r.type)return null;let a=r.children.find(e=>"regular-box"===e.type&&"wave"===e.boxType);return a&&"regular-box"===a.type&&"wave"===a.boxType?n(r,a.children):n(r,r.children)},r.isLpcmAudioCodec=e=>{var t;return(null==(t=(0,r.getAudioCodecFromTrak)(e))?void 0:t.format)==="lpcm"},r.isIn24AudioCodec=e=>{var t;return(null==(t=(0,r.getAudioCodecFromTrak)(e))?void 0:t.format)==="in24"},r.isTwosAudioCodec=e=>{var t;return(null==(t=(0,r.getAudioCodecFromTrak)(e))?void 0:t.format)==="twos"},r.getAudioCodecStringFromTrak=e=>{let t=(0,r.getAudioCodecFromTrak)(e);if(!t)throw Error("Expected codec");if("lpcm"===t.format||"twos"===t.format)return{codecString:"pcm-s16",description:t.description?{type:"unknown-data",data:t.description}:void 0};if("in24"===t.format)return{codecString:"pcm-s24",description:t.description?{type:"unknown-data",data:t.description}:void 0};let i=[t.format,t.primarySpecificator?t.primarySpecificator.toString(16):null,t.secondarySpecificator?t.secondarySpecificator.toString().padStart(2,"0"):null].filter(Boolean).join("."),a="mp4a.6b"===i.toLowerCase()||"mp4a.69"===i.toLowerCase()?"mp3":i;return"mp3"===a?{codecString:a,description:t.description?{type:"unknown-data",data:t.description}:void 0}:a.startsWith("mp4a.")?{codecString:a,description:t.description?{type:"aac-config",data:t.description}:void 0}:{codecString:a,description:t.description?{type:"unknown-data",data:t.description}:void 0}},r.getAudioCodecFromTrack=e=>{let t=(0,r.getAudioCodecFromTrak)(e);if(!t)throw Error("Could not find audio sample");if("twos"===t.format)return"pcm-s16";if("in24"===t.format)return"pcm-s24";if("lpcm"===t.format)return"pcm-s16";if("sowt"===t.format)return"aiff";if("ac-3"===t.format)return"ac3";if("Opus"===t.format)return"opus";if("mp4a"===t.format){if(64===t.primarySpecificator)return"aac";if(107===t.primarySpecificator)return"mp3";if(null===t.primarySpecificator)return"aac";throw Error("Unknown mp4a codec: "+t.primarySpecificator)}throw Error(`Unknown audio format: ${t.format}`)}},264964,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isAudioStructure=void 0,r.isAudioStructure=e=>{if("mp3"===e.type||"wav"===e.type||"aac"===e.type||"flac"===e.type)return!0;if("iso-base-media"===e.type||"matroska"===e.type||"transport-stream"===e.type||"riff"===e.type||"m3u"===e.type)return!1;throw Error(`Unhandled structure type: ${e}`)}},758091,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hasFps=r.hasFpsSuitedForSlowFps=r.getFps=r.getFpsFromMp4TrakBox=r.getTimescaleAndDuration=r.trakBoxContainsVideo=r.trakBoxContainsAudio=void 0;let i=e.r(831097),a=e.r(248546),n=e.r(264964);r.trakBoxContainsAudio=e=>{let t=(0,i.getStsdBox)(e);if(!t)return!1;let r=t.samples.find(e=>"audio"===e.type);return!!r&&"audio"===r.type},r.trakBoxContainsVideo=e=>{let t=(0,i.getStsdBox)(e);if(!t)return!1;let r=t.samples.find(e=>"video"===e.type);return!!r&&"video"===r.type},r.getTimescaleAndDuration=e=>{let t=(0,i.getMdhdBox)(e);return t?{timescale:t.timescale,duration:t.duration}:null},r.getFpsFromMp4TrakBox=e=>{let t=(0,r.getTimescaleAndDuration)(e);if(!t)return null;let a=(0,i.getSttsBox)(e);return a?(({sttsBox:e,timeScale:t,durationInSamples:r})=>{let i=0;for(let t of e.sampleDistribution)i+=t.sampleCount;return 0===i?null:i/(r/t)})({sttsBox:a,timeScale:t.timescale,durationInSamples:t.duration}):null},r.getFps=e=>{let t=e.structure.getStructure();if("iso-base-media"===t.type){var n,o;let t=(0,i.getMoovBoxFromState)({structureState:e.structure,isoState:e.iso,mp4HeaderSegment:null!=(o=null==(n=e.m3uPlaylistContext)?void 0:n.mp4HeaderSegment)?o:null,mayUsePrecomputed:!0});if(!t)return null;let a=(0,i.getTraks)(t).find(r.trakBoxContainsVideo);return a?(0,r.getFpsFromMp4TrakBox)(a):null}if("riff"===t.type){for(let e of(0,a.getStrlBoxes)(t)){let t=(0,a.getStrhBox)(e.children);if(!t)throw Error("No strh box");if("auds"!==t.fccType)return t.rate}return null}if("matroska"===t.type||"transport-stream"===t.type||"m3u"===t.type||"mp3"===t.type||"wav"===t.type||"flac"===t.type||"aac"===t.type)return null;throw Error("Cannot get fps, not implemented: "+t)},r.hasFpsSuitedForSlowFps=e=>{try{return null!==(0,r.getFps)(e)}catch(e){return!1}},r.hasFps=e=>{let t=e.structure.getStructure();return!!(0,n.isAudioStructure)(t)||"matroska"===t.type||"transport-stream"===t.type||"m3u"===t.type||(0,r.hasFpsSuitedForSlowFps)(e)}},545518,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getDisplayAspectRatio=r.applyAspectRatios=r.applyTkhdBox=r.getColrBox=r.getSampleAspectRatio=r.getHvccBox=r.getPaspBox=r.getAv1CBox=r.getVpccBox=r.getAvccBox=r.getStsdVideoConfig=void 0;let i=e.r(831097);r.getStsdVideoConfig=e=>{let t=(0,i.getStsdBox)(e);if(!t)return null;let r=t.samples.find(e=>"video"===e.type);return r&&"video"===r.type?r:null},r.getAvccBox=e=>{let t=(0,r.getStsdVideoConfig)(e);if(!t)return null;let i=t.descriptors.find(e=>"avcc-box"===e.type);return i&&"avcc-box"===i.type?i:null},r.getVpccBox=e=>{let t=(0,r.getStsdVideoConfig)(e);if(!t)return null;let i=t.descriptors.find(e=>"vpcc-box"===e.type);return i&&"vpcc-box"===i.type?i:null},r.getAv1CBox=e=>{let t=(0,r.getStsdVideoConfig)(e);if(!t)return null;let i=t.descriptors.find(e=>"av1C-box"===e.type);return i&&"av1C-box"===i.type?i:null},r.getPaspBox=e=>{let t=(0,r.getStsdVideoConfig)(e);if(!t)return null;let i=t.descriptors.find(e=>"pasp-box"===e.type);return i&&"pasp-box"===i.type?i:null},r.getHvccBox=e=>{let t=(0,r.getStsdVideoConfig)(e);if(!t)return null;let i=t.descriptors.find(e=>"hvcc-box"===e.type);return i&&"hvcc-box"===i.type?i:null},r.getSampleAspectRatio=e=>{let t=(0,r.getPaspBox)(e);return t?{numerator:t.hSpacing,denominator:t.vSpacing}:{numerator:1,denominator:1}},r.getColrBox=e=>{let t=e.descriptors.find(e=>"colr-box"===e.type);return t&&"colr-box"===t.type?t:null},r.applyTkhdBox=(e,t)=>null===t||0===t.rotation?{displayAspectWidth:e.width,displayAspectHeight:e.height,width:e.width,height:e.height,rotation:0}:{width:t.width,height:t.height,rotation:t.rotation,displayAspectWidth:e.width,displayAspectHeight:e.height},r.applyAspectRatios=({dimensions:e,sampleAspectRatio:t,displayAspectRatio:r})=>{if(0===r.numerator||0===r.denominator)return e;let i=Math.round(e.width*t.numerator/t.denominator),a=Math.floor(i/(r.numerator/r.denominator));return{width:Math.floor(i),height:a}},r.getDisplayAspectRatio=({sampleAspectRatio:e,nativeDimensions:t})=>{let r,i=Math.round(t.width*e.numerator),a=Math.round(t.height*e.denominator);return r=function e(t,r){return 0===r?t:e(r,t%r)}(Math.abs(i),Math.abs(a)),{numerator:i/r,denominator:a/r}}},788128,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getVideoCodecString=r.getIsoBmColrConfig=r.getVideoPrivateData=r.hasVideoCodec=r.getVideoCodec=void 0;let i=e.r(294190),a=e.r(464206),n=e.r(545518),o=e.r(86711);r.getVideoCodec=e=>{var t,r;return null!=(r=null==(t=(0,o.getTracks)(e,!0).find(e=>"video"===e.type))?void 0:t.codecEnum)?r:null},r.hasVideoCodec=e=>(0,o.getHasTracks)(e,!0),r.getVideoPrivateData=e=>{let t=(0,n.getStsdVideoConfig)(e),r=(0,n.getAvccBox)(e),i=(0,n.getHvccBox)(e),a=(0,n.getAv1CBox)(e);return t?r?{type:"avc-sps-pps",data:r.privateData}:i?{type:"hvcc-data",data:i.privateData}:a?{type:"av1c-data",data:a.privateData}:null:null},r.getIsoBmColrConfig=e=>{let t=(0,n.getStsdVideoConfig)(e);if(!t)return null;let r=(0,n.getColrBox)(t);return r&&"transfer-characteristics"===r.colorType?{fullRange:r.fullRangeFlag,matrix:(0,i.getMatrixCoefficientsFromIndex)(r.matrixIndex),primaries:(0,i.getPrimariesFromIndex)(r.primaries),transfer:(0,i.getTransferCharacteristicsFromIndex)(r.transfer)}:null},r.getVideoCodecString=e=>{let t=(0,n.getStsdVideoConfig)(e),r=(0,n.getAvccBox)(e);if(!t)return null;if(r)return`${t.format}.${r.configurationString}`;let i=(0,n.getHvccBox)(e);if(i)return`${t.format}.${i.configurationString}`;let o=(0,n.getAv1CBox)(e);if(o){let e=(0,n.getColrBox)(t);return(0,a.parseAv1PrivateData)(o.privateData,e)}let s=(0,n.getVpccBox)(e);return s?`${t.format}.${s.codecString}`:t.format}},278782,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.normalizeVideoRotation=void 0,r.normalizeVideoRotation=e=>(e%360+360)%360},886298,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getActualDecoderParameters=void 0;let i=e.r(442521);r.getActualDecoderParameters=({audioCodec:e,codecPrivate:t,numberOfChannels:r,sampleRate:a})=>{if("aac"!==e||null===t)return{numberOfChannels:r,sampleRate:a,codecPrivate:t};if("aac-config"!==t.type)throw Error("Expected AAC codec private data");let n=(0,i.parseAacCodecPrivate)(t.data),o=(0,i.createAacCodecPrivate)({...n,codecPrivate:t.data});return{numberOfChannels:n.channelConfiguration,sampleRate:n.sampleRate,codecPrivate:{type:"aac-config",data:o}}}},73580,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getVideoCodecFromIsoTrak=void 0;let i=e.r(831097);r.getVideoCodecFromIsoTrak=e=>{let t=(0,i.getStsdBox)(e);if(t&&"stsd-box"===t.type){let e=t.samples.find(e=>"video"===e.type);if(e&&"video"===e.type){if("hvc1"===e.format||"hev1"===e.format)return"h265";if("avc1"===e.format)return"h264";if("av01"===e.format)return"av1";if("vp09"===e.format)return"vp9";if("ap4h"===e.format||"ap4x"===e.format||"apch"===e.format||"apcn"===e.format||"apcs"===e.format||"apco"===e.format||"aprh"===e.format||"aprn"===e.format)return"prores"}}throw Error("Could not find video codec")}},593847,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.makeBaseMediaTrack=void 0;let i=e.r(540360),a=e.r(758091),n=e.r(545518),o=e.r(788128),s=e.r(278782),l=e.r(452893),u=e.r(852834),c=e.r(886298),d=e.r(73580),p=e.r(116506),f=e.r(831097);r.makeBaseMediaTrack=(e,t)=>{var r,h,m,g,v;let y=(0,f.getTkhdBox)(e),b=(0,f.getVideoDescriptors)(e),x=(0,a.getTimescaleAndDuration)(e);if(!y)throw Error("Expected tkhd box in trak box");if(!x)throw Error("Expected timescale and duration in trak box");if((0,a.trakBoxContainsAudio)(e)){let a=(0,i.getNumberOfChannelsFromTrak)(e);if(null===a)throw Error("Could not find number of channels");let n=(0,i.getSampleRate)(e);if(null===n)throw Error("Could not find sample rate");let{codecString:o,description:s}=(0,i.getAudioCodecStringFromTrak)(e),u=null!=(h=null!=(r=(0,i.getCodecPrivateFromTrak)(e))?r:s)?h:null,d=(0,i.getAudioCodecFromTrack)(e),f=(0,c.getActualDecoderParameters)({audioCodec:d,codecPrivate:null!=u?u:null,numberOfChannels:a,sampleRate:n});return{type:"audio",trackId:y.trackId,originalTimescale:x.timescale,codec:o,numberOfChannels:f.numberOfChannels,sampleRate:f.sampleRate,description:null!=(g=null==(m=f.codecPrivate)?void 0:m.data)?g:void 0,codecData:f.codecPrivate,codecEnum:d,startInSeconds:t,timescale:l.WEBCODECS_TIMESCALE,trackMediaTimeOffsetInTrackTimescale:(0,p.findTrackMediaTimeOffsetInTrackTimescale)({trakBox:e})}}if(!(0,a.trakBoxContainsVideo)(e))return{type:"other",trackId:y.trackId,originalTimescale:x.timescale,trakBox:e,startInSeconds:t,timescale:l.WEBCODECS_TIMESCALE,trackMediaTimeOffsetInTrackTimescale:(0,p.findTrackMediaTimeOffsetInTrackTimescale)({trakBox:e})};let w=(0,n.getStsdVideoConfig)(e);if(!w)throw Error("No video sample");let S=(0,n.getSampleAspectRatio)(e),k=(0,n.applyAspectRatios)({dimensions:w,sampleAspectRatio:S,displayAspectRatio:(0,n.getDisplayAspectRatio)({sampleAspectRatio:S,nativeDimensions:w})}),{displayAspectHeight:C,displayAspectWidth:E,height:_,rotation:T,width:P}=(0,n.applyTkhdBox)(k,y),I=(0,o.getVideoCodecString)(e);if(!I)throw Error("Could not find video codec");let A=(0,o.getVideoPrivateData)(e),O=null!=(v=(0,o.getIsoBmColrConfig)(e))?v:{fullRange:null,matrix:null,primaries:null,transfer:null};return{m3uStreamFormat:null,type:"video",trackId:y.trackId,description:null!=b?b:void 0,originalTimescale:x.timescale,codec:I,sampleAspectRatio:(0,n.getSampleAspectRatio)(e),width:P,height:_,codedWidth:w.width,codedHeight:w.height,displayAspectWidth:E,displayAspectHeight:C,rotation:(0,s.normalizeVideoRotation)(0-T),codecData:A,colorSpace:(0,u.mediaParserAdvancedColorToWebCodecsColor)(O),advancedColor:O,codecEnum:(0,d.getVideoCodecFromIsoTrak)(e),fps:(0,a.getFpsFromMp4TrakBox)(e),startInSeconds:t,timescale:l.WEBCODECS_TIMESCALE,trackMediaTimeOffsetInTrackTimescale:(0,p.findTrackMediaTimeOffsetInTrackTimescale)({trakBox:e})}}},176980,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseMdhd=void 0,r.parseMdhd=({data:e,size:t,fileOffset:r})=>{let i=e.getUint8();e.discard(3);let a=1===i?Number(e.getUint64()):e.getUint32(),n=1===i?Number(e.getUint64()):e.getUint32(),o=e.getUint32(),s=1===i?e.getUint64():e.getUint32(),l=e.getUint16(),u=e.getUint16(),c=t-(e.counter.getOffset()-r);if(0!==c)throw Error(`Expected remaining bytes to be 0, got ${c}`);return{type:"mdhd-box",duration:Number(s),timescale:o,version:i,language:l,quality:u,creationTime:a,modificationTime:n}}},471984,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseHdlr=void 0,r.parseHdlr=({iterator:e,size:t,offset:r})=>{let i=e.startBox(t-8),a=e.getUint8();if(0!==a)throw Error(`Unsupported hdlr version: ${a}`);e.discard(3),e.discard(4);let n=e.getByteString(4,!1);e.discard(4),e.discard(4),e.discard(4);let o=e.readUntilNullTerminator();return i.discardRest(),Promise.resolve({type:"hdlr-box",boxSize:t,offset:r,hdlrType:n,componentName:o})}},222643,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseIlstBox=void 0;let i=(e,t,r)=>{if(1===e)return{type:"text",value:t.getByteString(r,!1)};if(21===e){if(1===r)return{type:"number",value:t.getInt8()};if(2===r)return{type:"number",value:t.getInt16()};if(3===r)return{type:"number",value:t.getInt24()};if(4===r)return{type:"number",value:t.getInt32()};if(8===r)return{type:"number",value:Number(t.getInt64())};throw Error(`Weird size for number ${r}`)}if(22===e){if(1===r)return{type:"number",value:t.getUint8()};if(2===r)return{type:"number",value:t.getUint16()};if(3===r)return{type:"number",value:t.getUint24()};if(4===r)return{type:"number",value:t.getUint32()};throw Error(`Weird size for number ${r}`)}if(23===e){if(4===r)return{type:"number",value:t.getFloat32()};if(8===r)return{type:"number",value:t.getFloat64()};throw Error(`Weird size for number ${r}`)}return t.discard(r),{type:"unknown",value:null}};r.parseIlstBox=({iterator:e,size:t,offset:r})=>{let a=e.startBox(t-8),n=[];for(;e.counter.getOffset()<t+r;){let t=e.getUint32(),r=e.getAtom();if(!r.startsWith("")&&!r.startsWith("\0")){if("skip"===r||"----"===r){e.discard(t-8);continue}e.discard(t-8);continue}let a=e.getUint32(),o=e.getAtom();if(0!==e.getUint8())throw Error("Expected type indicator to be 0");let s=e.getUint24();e.discard(4);let l=i(s,e,a-16);n.push({index:r,type:o,wellKnownType:s,value:l})}return a.discardRest(),{type:"ilst-box",boxSize:t,offset:r,entries:n}}},425157,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseTfraBox=void 0;let i=(e,t)=>{let r=(t+1)*8;if(8===r)return e.getUint8();if(16===r)return e.getUint16();if(32===r)return e.getUint32();if(64===r)return Number(e.getUint64());throw Error("Invalid traf number size")},a=(e,t)=>{let r=(t+1)*8;if(8===r)return e.getUint8();if(16===r)return e.getUint16();if(32===r)return e.getUint32();if(64===r)return Number(e.getUint64());throw Error("Invalid trun number size")},n=(e,t)=>{let r=(t+1)*8;if(8===r)return e.getUint8();if(16===r)return e.getUint16();if(32===r)return e.getUint32();if(64===r)return Number(e.getUint64());throw Error("Invalid sample number size")},o=(e,t)=>1===t?Number(e.getUint64()):e.getUint32(),s=(e,t)=>1===t?Number(e.getUint64()):e.getUint32();r.parseTfraBox=({iterator:e,size:t,offset:r})=>{let l=e.startBox(t-8),u=e.getUint8();e.discard(3);let c=e.getUint32();e.getUint24();let d=e.getUint8(),p=d>>4&3,f=d>>2&3,h=3&d,m=e.getUint32(),g=[];for(let t=0;t<m;t++){let t=o(e,u),r=s(e,u),l=i(e,p),c=a(e,f),d=n(e,h);g.push({time:t,moofOffset:r,trafNumber:l,trunNumber:c,sampleNumber:d})}return l.expectNoMoreBytes(),{offset:r,boxSize:t,type:"tfra-box",entries:g,trackId:c}}},710914,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseMoov=void 0;let i=e.r(46832);r.parseMoov=async({offset:e,size:t,onlyIfMoovAtomExpected:r,iterator:a,logLevel:n,contentLength:o})=>{let s=await (0,i.getIsoBaseMediaChildren)({onlyIfMoovAtomExpected:r,size:t-8,iterator:a,logLevel:n,contentLength:o});return{offset:e,boxSize:t,type:"moov-box",children:s}}},116691,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseTrex=void 0,r.parseTrex=({iterator:e,offset:t,size:r})=>{let i=e.startBox(r-8),a=e.getUint8();e.discard(3);let n=e.getUint32(),o=e.getUint32(),s=e.getUint32(),l=e.getUint32(),u=e.getUint32();return i.expectNoMoreBytes(),{type:"trex-box",boxSize:r,offset:t,trackId:n,version:a,defaultSampleDescriptionIndex:o,defaultSampleDuration:s,defaultSampleSize:l,defaultSampleFlags:u}}},966173,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseAv1C=void 0,r.parseAv1C=({data:e,size:t})=>({type:"av1C-box",privateData:e.getSlice(t-8)})},215792,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseAvcc=void 0,r.parseAvcc=({data:e,size:t})=>{let r=e.getUint8();if(1!==r)throw Error(`Unsupported AVCC version ${r}`);let i=e.getUint8(),a=e.getUint8(),n=e.getUint8(),o=`${i.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}`;return e.counter.decrement(4),{type:"avcc-box",privateData:e.getSlice(t-8),configurationString:o}}},173258,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseIccProfile=void 0;let i=e.r(77548);r.parseIccProfile=e=>{let t=(0,i.getArrayBufferIterator)({initialData:e,maxBytes:e.length,logLevel:"error"}),r=t.getUint32();if(r!==e.length)throw Error("Invalid ICC profile size");let a=t.getByteString(4,!1),n=t.getByteString(4,!1),o=t.getByteString(4,!1),s=t.getByteString(4,!1),l=t.getByteString(4,!1),u=t.getSlice(12),c=t.getByteString(4,!1);if("acsp"!==c)throw Error("Invalid ICC profile signature");let d=t.getByteString(4,!1),p=t.getUint32(),f=t.getByteString(4,!1),h=t.getByteString(4,!1),m=t.getUint64(),g=t.getUint32(),v=t.getUint32(),y=t.getUint32(),b=t.getUint32(),x=t.getByteString(4,!1),w=t.getByteString(16,!1);t.discard(28);let S=t.getUint32(),k=[];for(let e=0;e<S;e++){let e={tag:t.getByteString(4,!1),offset:t.getUint32(),size:t.getUint32()};k.push(e)}let C=-1,E=null,_=null,T=null,P=null;for(let r of k){let a=e.slice(r.offset,r.offset+r.size);if("rXYZ"===r.tag||"gXYZ"===r.tag||"bXYZ"===r.tag||"wtpt"===r.tag){let e=(0,i.getArrayBufferIterator)({initialData:a,maxBytes:a.length,logLevel:"error"});e.discard(4);let t=e.getInt32()/65536,n=e.getInt32()/65536,o=e.getInt32()/65536;e.destroy();let s={x:t,y:n,z:o};"rXYZ"===r.tag?E=s:"gXYZ"===r.tag?_=s:"bXYZ"===r.tag?T=s:"wtpt"===r.tag&&(P=s)}if(-1!==C){let e=r.offset-C,i=r.size-e;i>0&&t.counter.decrement(i)}C=r.offset}let I={size:r,preferredCMMType:a,profileVersion:n,profileDeviceClass:o,colorSpace:s,pcs:l,dateTime:u,signature:c,primaryPlatform:d,profileFlags:p,deviceManufacturer:f,deviceModel:h,deviceAttributes:m,renderingIntent:g,pcsIlluminant:[v/65536,y/65536,b/65536],profileCreator:x,profileId:w,entries:k,bXYZ:T,gXYZ:_,rXYZ:E,whitePoint:P};return t.destroy(),I}},227375,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseColorParameterBox=void 0;let i=e.r(173258);r.parseColorParameterBox=({iterator:e,size:t})=>{let r=e.getByteString(4,!1);if("nclx"===r){let t=e.getUint16(),r=e.getUint16(),i=e.getUint16();e.startReadingBits();let a=!!e.getBits(1);return e.stopReadingBits(),{type:"colr-box",colorType:"transfer-characteristics",fullRangeFlag:a,matrixIndex:i,primaries:t,transfer:r}}if("nclc"===r){let t=e.getUint16(),r=e.getUint16();return{type:"colr-box",colorType:"transfer-characteristics",fullRangeFlag:!1,matrixIndex:e.getUint16(),primaries:t,transfer:r}}if("prof"===r){let r=e.getSlice(t-12);return{type:"colr-box",colorType:"icc-profile",profile:r,parsed:(0,i.parseIccProfile)(r)}}throw Error("Unexpected box type "+r)}},10786,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseCtts=void 0,r.parseCtts=({iterator:e,offset:t,size:r})=>{let i=e.getUint8();if(0!==i&&1!==i)throw Error(`Unsupported CTTS version ${i}`);let a=e.getSlice(3),n=e.getUint32(),o=[];for(let t=0;t<n;t++){let t=e.getUint32(),r=e.getInt32();o.push({sampleCount:t,sampleOffset:r})}return{type:"ctts-box",boxSize:r,offset:t,version:i,flags:[...a],entryCount:n,entries:o}}},803408,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseHvcc=void 0;let i=e.r(474443);r.parseHvcc=({data:e,size:t,offset:r})=>{let a=e.getSlice(t-8);e.counter.decrement(t-8);let n=(0,i.getHvc1CodecString)(e),o=t-(e.counter.getOffset()-r);return e.discard(o),{type:"hvcc-box",privateData:a,configurationString:n}}},12073,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseKeys=void 0,r.parseKeys=({iterator:e,offset:t,size:r})=>{let i=e.startBox(r-8),a=e.getUint8();e.discard(3);let n=e.getUint32(),o=[];for(let t=0;t<n;t++){let t=e.getUint32(),r=e.getAtom(),i=e.getByteString(t-8,!1),a={keySize:t,namespace:r,value:i};o.push(a)}return i.discardRest(),{type:"keys-box",boxSize:r,offset:t,version:a,entryCount:n,entries:o}}},344637,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseMebx=void 0;let i=e.r(46832);r.parseMebx=async({offset:e,size:t,iterator:r,logLevel:a,contentLength:n})=>{r.discard(6);let o=r.getUint16(),s=await (0,i.getIsoBaseMediaChildren)({iterator:r,size:t-8,logLevel:a,onlyIfMoovAtomExpected:null,contentLength:n});return{type:"mebx-box",boxSize:t,offset:e,dataReferenceIndex:o,format:"mebx",children:s}}},94228,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parsePasp=void 0,r.parsePasp=({iterator:e,offset:t,size:r})=>{let i=e.getUint32(),a=e.getUint32(),n=r-(e.counter.getOffset()-t);return e.discard(n),{type:"pasp-box",boxSize:r,offset:t,hSpacing:i,vSpacing:a}}},554476,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseStco=void 0,r.parseStco=({iterator:e,offset:t,size:r,mode64Bit:i})=>{let a=e.getUint8();if(0!==a)throw Error(`Unsupported STSD version ${a}`);let n=e.getSlice(3),o=e.getUint32(),s=[];for(let a=0;a<o&&!(r-(e.counter.getOffset()-t)<4);a++)s.push(i?e.getUint64():e.getUint32());return e.discard(r-(e.counter.getOffset()-t)),{type:"stco-box",boxSize:r,offset:t,version:a,flags:[...n],entries:s,entryCount:o}}},180215,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseStsc=void 0,r.parseStsc=({iterator:e,offset:t,size:r})=>{let i=e.getUint8();if(0!==i)throw Error(`Unsupported STSD version ${i}`);let a=e.getSlice(3),n=e.getUint32(),o=new Map;for(let t=0;t<n;t++){let t=e.getUint32(),r=e.getUint32(),i=e.getUint32();if(1!==i)throw Error(`Expected sampleDescriptionIndex to be 1, but got ${i}`);o.set(t,r)}return{type:"stsc-box",boxSize:r,offset:t,version:i,flags:[...a],entryCount:n,entries:o}}},155396,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseStsd=void 0;let i=e.r(864161);r.parseStsd=async({offset:e,size:t,iterator:r,logLevel:a,contentLength:n})=>{let o=r.getUint8();if(0!==o)throw Error(`Unsupported STSD version ${o}`);r.discard(3);let s=r.getUint32(),l=t-(r.counter.getOffset()-e),u=await (0,i.parseIsoFormatBoxes)({maxBytes:l,logLevel:a,iterator:r,contentLength:n});if(u.length!==s)throw Error(`Expected ${s} sample descriptions, got ${u.length}`);return{type:"stsd-box",boxSize:t,offset:e,numberOfEntries:s,samples:u}}},592710,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseStss=void 0,r.parseStss=({iterator:e,offset:t,boxSize:r})=>{let i=e.getUint8();if(0!==i)throw Error(`Unsupported STSS version ${i}`);let a=e.getSlice(3),n=e.getUint32(),o=new Set;for(let t=0;t<n;t++)o.add(e.getUint32());let s=r-(e.counter.getOffset()-t);return s>0&&e.discard(s),{type:"stss-box",version:i,flags:[...a],sampleNumber:o,boxSize:r,offset:t}}},126563,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseStsz=void 0,r.parseStsz=({iterator:e,offset:t,size:r})=>{let i=e.getUint8();if(0!==i)throw Error(`Unsupported STSD version ${i}`);let a=e.getSlice(3),n=e.getUint32(),o=e.getUint32();if(0!==n)return{type:"stsz-box",boxSize:r,offset:t,version:i,flags:[...a],sampleCount:o,countType:"fixed",sampleSize:n};let s=[];for(let i=0;i<o&&!(r-(e.counter.getOffset()-t)<4);i++)s.push(e.getUint32());return e.discard(r-(e.counter.getOffset()-t)),{type:"stsz-box",boxSize:r,offset:t,version:i,flags:[...a],sampleCount:o,countType:"variable",entries:s}}},561821,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseStts=void 0,r.parseStts=({data:e,size:t,fileOffset:r})=>{let i=e.counter.getOffset(),a=e.getUint8();if(0!==a)throw Error(`Unsupported STTS version ${a}`);e.discard(3);let n=e.getUint32(),o=[];for(let t=0;t<n;t++){let t={sampleCount:e.getUint32(),sampleDelta:e.getUint32()};o.push(t)}let s=e.counter.getOffset()-i+(i-r);if(s!==t)throw Error(`Expected stts box to be ${t} bytes, but was ${s} bytes`);return{type:"stts-box",sampleDistribution:o}}},270356,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseVpcc=void 0,r.parseVpcc=({data:e,size:t})=>{let r=e.startBox(t-8),i=e.getUint8();if(1!==i)throw Error(`Unsupported AVCC version ${i}`);e.discard(3);let a=e.getUint8(),n=e.getUint8();e.startReadingBits();let o=e.getBits(4),s=e.getBits(3),l=e.getBits(1),u=e.getBits(8),c=e.getBits(8),d=e.getBits(8);e.stopReadingBits();let p=e.getUint16(),f=e.getSlice(p);return r.expectNoMoreBytes(),{type:"vpcc-box",profile:a,level:n,bitDepth:o,chromaSubsampling:s,videoFullRangeFlag:l,videoColorPrimaries:u,videoTransferCharacteristics:c,videoMatrixCoefficients:d,codecInitializationDataSize:p,codecInitializationData:f,codecString:(({profile:e,level:t,bitDepth:r})=>`${String(e).padStart(2,"0")}.${String(t).padStart(2,"0")}.${String(r).padStart(2,"0")}`)({profile:a,level:n,bitDepth:o})}}},421573,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseTfdt=void 0,r.parseTfdt=({iterator:e,size:t,offset:r})=>{let i=e.getUint8();e.discard(3);let a=0===i?e.getUint32():Number(e.getUint64()),n=t-(e.counter.getOffset()-r);if(0!==n)throw Error("expected 0 bytes "+n);return{type:"tfdt-box",version:i,baseMediaDecodeTime:a,offset:r}}},383439,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getTfhd=void 0,r.getTfhd=({iterator:e,offset:t,size:r})=>{let i=e.getUint8(),a=e.getUint24(),n=e.getUint32(),o=1&a?Number(e.getUint64()):0,s=2&a?e.getUint32():0,l=8&a?e.getUint32():0,u=16&a?e.getUint32():0,c=32&a?e.getUint32():0,d=r-(e.counter.getOffset()-t);if(0!==d)throw Error("expected 0 bytes "+d);return{type:"tfhd-box",version:i,trackId:n,baseDataOffset:o,baseSampleDescriptionIndex:s,defaultSampleDuration:l,defaultSampleSize:u,defaultSampleFlags:c}}},834104,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseTkhd=void 0;let i=e.r(928801);r.parseTkhd=({iterator:e,offset:t,size:r})=>{let a=e.getUint8();e.discard(3);let n=1===a?e.getUint64():e.getUint32(),o=1===a?e.getUint64():e.getUint32(),s=e.getUint32();e.discard(4);let l=1===a?e.getUint64():e.getUint32();e.discard(4),e.discard(4);let u=e.getUint16(),c=e.getUint16(),d=e.getUint16();e.discard(2);let p=[e.getFixedPointSigned1616Number(),e.getFixedPointSigned1616Number(),e.getFixedPointSigned230Number(),e.getFixedPointSigned1616Number(),e.getFixedPointSigned1616Number(),e.getFixedPointSigned230Number(),e.getFixedPointSigned1616Number(),e.getFixedPointSigned1616Number(),e.getFixedPointSigned230Number()],f=[p[0],p[1],p[3],p[4]],h=e.getFixedPointUnsigned1616Number(),m=e.getFixedPointSigned1616Number(),{width:g,height:v}=(({matrix:e,width:t,height:r})=>({width:Math.abs(e[0]*t+e[1]*r),height:Math.abs(e[2]*t+e[3]*r)}))({matrix:f,width:h,height:m}),y=function(e){let[t,r,i,a]=e;if(0===t&&0===r&&0===i&&0===a)return 0;if(1!==Math.round(t*t+r*r)||1!==Math.round(i*i+a*a))throw Error("The provided matrix is not a valid rotation matrix.");return 180/Math.PI*Math.atan2(i,t)}(f);return{offset:t,boxSize:r,type:"tkhd-box",creationTime:(0,i.toUnixTimestamp)(Number(n)),modificationTime:(0,i.toUnixTimestamp)(Number(o)),trackId:s,duration:Number(l),layer:u,alternateGroup:c,volume:d,matrix:p,width:g,height:v,version:a,rotation:y,unrotatedWidth:h,unrotatedHeight:m}}},687084,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseTrak=void 0;let i=e.r(46832);r.parseTrak=async({size:e,offsetAtStart:t,iterator:r,logLevel:a,contentLength:n})=>{let o=await (0,i.getIsoBaseMediaChildren)({onlyIfMoovAtomExpected:null,size:e-8,iterator:r,logLevel:a,contentLength:n});return{offset:t,boxSize:e,type:"trak-box",children:o}}},698002,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseTrun=void 0,r.parseTrun=({iterator:e,offset:t,size:r})=>{let i=e.getUint8();if(0!==i&&1!==i)throw Error(`Unsupported TRUN version ${i}`);let a=e.getUint24(),n=e.getUint32(),o=1&a?e.getInt32():null,s=4&a?e.getUint32():null,l=[];for(let t=0;t<n;t++){let t=256&a?e.getUint32():null,r=512&a?e.getUint32():null,n=1024&a?e.getUint32():null,o=2048&a?0===i?e.getUint32():e.getInt32():null;l.push({sampleDuration:t,sampleSize:r,sampleFlags:n,sampleCompositionTimeOffset:o})}let u=r-(e.counter.getOffset()-t);if(0!==u)throw Error(`Unexpected data left in TRUN box: ${u}`);return{type:"trun-box",version:i,sampleCount:n,dataOffset:o,firstSampleFlags:s,samples:l}}},501318,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.processBox=void 0;let i=e.r(66415),a=e.r(882757),n=e.r(667585),o=e.r(216484),s=e.r(506899),l=e.r(24168),u=e.r(46832),c=e.r(593847),d=e.r(116506),p=e.r(176980),f=e.r(471984),h=e.r(222643),m=e.r(425157),g=e.r(710914),v=e.r(894368),y=e.r(116691),b=e.r(966173),x=e.r(215792),w=e.r(227375),S=e.r(10786),k=e.r(803408),C=e.r(12073),E=e.r(344637),_=e.r(94228),T=e.r(554476),P=e.r(180215),I=e.r(155396),A=e.r(592710),O=e.r(126563),M=e.r(561821),F=e.r(270356),R=e.r(421573),D=e.r(383439),j=e.r(834104),L=e.r(687084),B=e.r(698002);r.processBox=async({iterator:e,logLevel:t,onlyIfMoovAtomExpected:r,onlyIfMdatAtomExpected:N,contentLength:$})=>{var z,U;let V=e.counter.getOffset(),{returnToCheckpoint:H}=e.startCheckpoint(),W=e.bytesRemaining(),q=e.counter.getOffset(),G=e.getFourByteNumber();if(0===G)return{type:"box",box:{type:"void-box",boxSize:0}};if(1===G&&12>e.bytesRemaining()||4>e.bytesRemaining())throw e.counter.decrement(e.counter.getOffset()-V),Error(`Expected box size of ${W}, got ${G}. Incomplete boxes are not allowed.`);let Z=e.getByteString(4,!1),K=Math.min(1===G?e.getEightByteNumber():G,$-q),Q=e.counter.getOffset()-q;if("mdat"===Z){if(!N)return{type:"nothing"};let{mediaSectionState:t}=N;return t.addMediaSection({size:K-Q,start:e.counter.getOffset()}),{type:"nothing"}}if(W<K)return H(),{type:"fetch-more-data",bytesNeeded:(0,n.makeFetchMoreData)(K-W)};if("ftyp"===Z)return{type:"box",box:(0,l.parseFtyp)({iterator:e,size:K,offset:V})};if("elst"===Z)return{type:"box",box:(0,o.parseElst)({iterator:e,size:K,offset:V})};if("colr"===Z)return{type:"box",box:(0,w.parseColorParameterBox)({iterator:e,size:K})};if("mvhd"===Z){let t=(0,v.parseMvhd)({iterator:e,offset:V,size:K});if(!r)throw Error("State is required");return r.movieTimeScaleState.setTrackTimescale(t.timeScale),{type:"box",box:t}}if("tkhd"===Z)return{type:"box",box:(0,j.parseTkhd)({iterator:e,offset:V,size:K})};if("trun"===Z)return{type:"box",box:(0,B.parseTrun)({iterator:e,offset:V,size:K})};if("tfdt"===Z)return{type:"box",box:(0,R.parseTfdt)({iterator:e,size:K,offset:V})};if("stsd"===Z)return{type:"box",box:await (0,I.parseStsd)({offset:V,size:K,iterator:e,logLevel:t,contentLength:$})};if("stsz"===Z)return{type:"box",box:(0,O.parseStsz)({iterator:e,offset:V,size:K})};if("stco"===Z||"co64"===Z)return{type:"box",box:(0,T.parseStco)({iterator:e,offset:V,size:K,mode64Bit:"co64"===Z})};if("pasp"===Z)return{type:"box",box:(0,_.parsePasp)({iterator:e,offset:V,size:K})};if("stss"===Z)return{type:"box",box:(0,A.parseStss)({iterator:e,offset:V,boxSize:K})};if("ctts"===Z)return{type:"box",box:(0,S.parseCtts)({iterator:e,offset:V,size:K})};if("stsc"===Z)return{type:"box",box:(0,P.parseStsc)({iterator:e,offset:V,size:K})};if("mebx"===Z)return{type:"box",box:await (0,E.parseMebx)({offset:V,size:K,iterator:e,logLevel:t,contentLength:$})};if("hdlr"===Z)return{type:"box",box:await (0,f.parseHdlr)({iterator:e,size:K,offset:V})};if("keys"===Z)return{type:"box",box:await (0,C.parseKeys)({iterator:e,size:K,offset:V})};if("ilst"===Z)return{type:"box",box:await (0,h.parseIlstBox)({iterator:e,offset:V,size:K})};if("tfra"===Z)return{type:"box",box:await (0,m.parseTfraBox)({iterator:e,offset:V,size:K})};if("moov"===Z){if(!r)throw Error("State is required");let{tracks:a,isoState:n}=r;if(a.hasAllTracks())return e.discard(K-8),{type:"nothing"};if(n&&n.moov.getMoovBoxAndPrecomputed()&&!(null==(z=n.moov.getMoovBoxAndPrecomputed())?void 0:z.precomputed))return i.Log.verbose(t,"Moov box already parsed, skipping"),e.discard(K-8),{type:"nothing"};let o=await (0,g.parseMoov)({offset:V,size:K,onlyIfMoovAtomExpected:r,iterator:e,logLevel:t,contentLength:$});return a.setIsDone(t),{type:"box",box:o}}if("trak"===Z){if(!r)throw Error("State is required");let{tracks:i,onAudioTrack:n,onVideoTrack:o}=r,s=await (0,L.parseTrak)({size:K,offsetAtStart:V,iterator:e,logLevel:t,contentLength:$}),l=r.movieTimeScaleState.getTrackTimescale();if(null===l)throw Error("Movie timescale is not set");let u=(0,d.findTrackStartTimeInSeconds)({movieTimeScale:l,trakBox:s}),p=(0,c.makeBaseMediaTrack)(s,u);return p&&"video"===p.type&&await (0,a.registerVideoTrack)({track:p,container:"mp4",logLevel:t,onVideoTrack:o,registerVideoSampleCallback:r.registerVideoSampleCallback,tracks:i}),p&&"audio"===p.type&&await (0,a.registerAudioTrack)({track:p,container:"mp4",registerAudioSampleCallback:r.registerAudioSampleCallback,tracks:i,logLevel:t,onAudioTrack:n}),{type:"box",box:s}}if("stts"===Z)return{type:"box",box:(0,M.parseStts)({data:e,size:K,fileOffset:V})};if("avcC"===Z)return{type:"box",box:(0,x.parseAvcc)({data:e,size:K})};if("vpcC"===Z)return{type:"box",box:(0,F.parseVpcc)({data:e,size:K})};if("av1C"===Z)return{type:"box",box:(0,b.parseAv1C)({data:e,size:K})};if("hvcC"===Z)return{type:"box",box:(0,k.parseHvcc)({data:e,size:K,offset:V})};if("tfhd"===Z)return{type:"box",box:(0,D.getTfhd)({iterator:e,offset:V,size:K})};if("mdhd"===Z)return{type:"box",box:(0,p.parseMdhd)({data:e,size:K,fileOffset:V})};if("esds"===Z)return{type:"box",box:(0,s.parseEsds)({data:e,size:K,fileOffset:V})};if("trex"===Z)return{type:"box",box:(0,y.parseTrex)({iterator:e,offset:V,size:K})};if("moof"===Z&&await (null==(U=null==r?void 0:r.isoState)?void 0:U.mfra.triggerLoad()),"mdia"===Z||"minf"===Z||"stbl"===Z||"udta"===Z||"moof"===Z||"dims"===Z||"meta"===Z||"wave"===Z||"traf"===Z||"mfra"===Z||"edts"===Z||"mvex"===Z||"stsb"===Z){let i=await (0,u.getIsoBaseMediaChildren)({iterator:e,size:K-8,logLevel:t,onlyIfMoovAtomExpected:r,contentLength:$});return{type:"box",box:{type:"regular-box",boxType:Z,boxSize:K,children:i,offset:V}}}return e.discard(K-8),i.Log.verbose(t,"Unknown ISO Base Media Box:",Z),{type:"box",box:{type:"regular-box",boxType:Z,boxSize:K,children:[],offset:V}}}},46832,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getIsoBaseMediaChildren=void 0;let i=e.r(501318);r.getIsoBaseMediaChildren=async({size:e,iterator:t,logLevel:r,onlyIfMoovAtomExpected:a,contentLength:n})=>{let o=[],s=t.counter.getOffset();for(;t.counter.getOffset()<e+s;){let e=await (0,i.processBox)({iterator:t,logLevel:r,onlyIfMoovAtomExpected:a,onlyIfMdatAtomExpected:null,contentLength:n});if("box"!==e.type)throw Error("Expected box");o.push(e.box)}if(t.counter.getOffset()>e+s)throw Error(`read too many bytes - size: ${e}, read: ${t.counter.getOffset()-s}. initial offset: ${s}`);return o}},864161,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseIsoFormatBoxes=r.processIsoFormatBox=void 0;let i=e.r(46832),a=["cvid","jpeg","smc ","rle ","rpza","kpcd","png ","mjpa","mjpb","SVQ1","SVQ3","mp4v","avc1","dvc ","dvcp","gif ","h263","tiff","raw ","2vuY","yuv2","v308","v408","v216","v410","v210","hvc1","hev1","ap4h","av01","vp08","vp09"],n=[0,"NONE","raw ","twos","sowt","MAC3 ","MAC6 ","ima4","fl32","lpcm","fl64","in24","in32","ulaw","alaw",0x6d730002,0x6d730011,"dvca","QDMC","QDM2","Qclp",0x6d730055,".mp3","mp4a","ac-3","Opus"];r.processIsoFormatBox=async({iterator:e,logLevel:t,contentLength:r})=>{let o=e.counter.getOffset(),s=e.bytesRemaining(),l=e.getUint32();if(s<l)throw Error(`Expected box size of ${s}, got ${l}`);let u=e.getAtom(),c=a.includes(u),d=n.includes(u)||n.includes(Number(u));e.discard(6);let p=e.getUint16();if(!c&&!d){let t=l-(e.counter.getOffset()-o);return e.discard(t),{sample:{type:"unknown",offset:o,dataReferenceIndex:p,size:l,format:u}}}if(d){let a=e.getUint16(),n=e.getUint16(),s=e.getSlice(4);if(0===a){let c=e.getUint16(),d=e.getUint16(),f=e.getUint16(),h=e.getUint16(),m=e.getFixedPointUnsigned1616Number(),g=await (0,i.getIsoBaseMediaChildren)({iterator:e,logLevel:t,size:l-(e.counter.getOffset()-o),onlyIfMoovAtomExpected:null,contentLength:r});return{sample:{format:u,offset:o,dataReferenceIndex:p,version:a,revisionLevel:n,vendor:[...Array.from(new Uint8Array(s))],size:l,type:"audio",numberOfChannels:c,sampleSize:d,compressionId:f,packetSize:h,sampleRate:m,samplesPerPacket:null,bytesPerPacket:null,bytesPerFrame:null,bitsPerSample:null,children:g}}}if(1===a){let c=e.getUint16(),d=e.getUint16(),f=e.getInt16(),h=e.getUint16(),m=e.getFixedPointUnsigned1616Number(),g=e.getUint32(),v=e.getUint32(),y=e.getUint32(),b=e.getUint32(),x=await (0,i.getIsoBaseMediaChildren)({iterator:e,logLevel:t,size:l-(e.counter.getOffset()-o),onlyIfMoovAtomExpected:null,contentLength:r});return{sample:{format:u,offset:o,dataReferenceIndex:p,version:a,revisionLevel:n,vendor:[...Array.from(new Uint8Array(s))],size:l,type:"audio",numberOfChannels:c,sampleSize:d,compressionId:f,packetSize:h,sampleRate:m,samplesPerPacket:g,bytesPerPacket:v,bytesPerFrame:y,bitsPerSample:b,children:x}}}if(2===a){e.getUint16();let c=e.getUint16(),d=e.getUint16(),f=e.getUint16();e.getFixedPointUnsigned1616Number(),e.getUint32();let h=e.getFloat64(),m=e.getUint32();e.getUint32();let g=e.getUint32();e.getUint32();let v=e.getUint32(),y=e.getUint32(),b=await (0,i.getIsoBaseMediaChildren)({iterator:e,logLevel:t,size:l-(e.counter.getOffset()-o),onlyIfMoovAtomExpected:null,contentLength:r});return{sample:{format:u,offset:o,dataReferenceIndex:p,version:a,revisionLevel:n,vendor:[...Array.from(new Uint8Array(s))],size:l,type:"audio",numberOfChannels:m,sampleSize:c,compressionId:d,packetSize:f,sampleRate:h,samplesPerPacket:y,bytesPerPacket:null,bytesPerFrame:v,bitsPerSample:g,children:b}}}throw Error(`Unsupported version ${a}`)}if(c){let a=e.getUint16(),n=e.getUint16(),s=e.getSlice(4),c=e.getUint32(),d=e.getUint32(),f=e.getUint16(),h=e.getUint16(),m=e.getFixedPointUnsigned1616Number(),g=e.getFixedPointUnsigned1616Number(),v=e.getUint32(),y=e.getUint16(),b=e.getPascalString(),x=e.getUint16(),w=e.getInt16(),S=l-(e.counter.getOffset()-o),k=S>8?await (0,i.getIsoBaseMediaChildren)({onlyIfMoovAtomExpected:null,iterator:e,logLevel:t,size:S,contentLength:r}):(e.discard(S),[]);return{sample:{format:u,offset:o,dataReferenceIndex:p,version:a,revisionLevel:n,vendor:[...Array.from(new Uint8Array(s))],size:l,type:"video",width:f,height:h,horizontalResolutionPpi:m,verticalResolutionPpi:g,spacialQuality:d,temporalQuality:c,dataSize:v,frameCountPerSample:y,compressorName:b,depth:x,colorTableId:w,descriptors:k}}}throw Error(`Unknown sample format ${u}`)};let o=async({maxBytes:e,logLevel:t,iterator:i,contentLength:a})=>{let n=[],o=i.counter.getOffset();for(;i.bytesRemaining()>0&&i.counter.getOffset()-o<e;){let{sample:e}=await (0,r.processIsoFormatBox)({iterator:i,logLevel:t,contentLength:a});e&&n.push(e)}return n};r.parseIsoFormatBoxes=o},603063,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseAvc=void 0;let i=e.r(77548),a=(e,t,r,i)=>{let a,{pic_order_cnt_type:n,log2_max_pic_order_cnt_lsb_minus4:o}=t;if(0!==n)return null;let s=r.getPrevPicOrderCntLsb(),l=r.getPrevPicOrderCntMsb();if(null===o)throw Error("log2_max_pic_order_cnt_lsb_minus4 is null");let u=2**(o+4),c=e.getBits(o+4),d=(a=c<s&&s-c>=u/2?l+u:c>s&&c-s>u/2?l-u:l)+c;return i&&(r.setPrevPicOrderCntLsb(c),r.setPrevPicOrderCntMsb(a)),d},n=e=>{let t=0;for(let r=0;r<e.length;r++){let i=e[r];if(0===i){t++;continue}if(t>=2&&1===i)return r-t;t=0}return null},o=(e,t)=>{let r=(0,i.getArrayBufferIterator)({initialData:e,maxBytes:e.byteLength,logLevel:"error"});r.startReadingBits(),r.getBits(1);let o=0!==r.getBits(2),s=r.getBits(5);if(7===s){r.stopReadingBits();let i=n(e),a=(e=>{let t,r,i,a,n,o,s,l,u,c,d=e.getUint8(),p=e.getUint8(),f=e.getUint8();e.startReadingBits();let h=e.readExpGolomb(),m=null,g=null,v=null,y=null,b=null,x=null,w=null,S=null,k=null,C=null,E=null,_=null,T=null,P=null,I=null;if(100===d||110===d||122===d||244===d||44===d||83===d||86===d||118===d||128===d||138===d||139===d||134===d||135===d){let t=e.readExpGolomb();3===t&&(m=e.getBits(1)),g=e.readExpGolomb(),v=e.readExpGolomb(),y=e.getBits(1);let r=e.getBits(1),i=[];if(r){for(let r=0;r<(3!==t?8:12);r++)if(i[r]=e.getBits(1),i[r])if(r<6)throw Error("Not implemented");else throw Error("Not implemented")}}b=e.readExpGolomb();let A=e.readExpGolomb();if(0===A)x=e.readExpGolomb();else if(1===A)throw Error("pic_order_cnt_type = 1 not implemented");w=e.readExpGolomb(),S=e.getBits(1);let O=e.readExpGolomb(),M=e.readExpGolomb();return e.getBits(1)||(k=e.getBits(1)),C=e.getBits(1),e.getBits(1)&&(E=e.readExpGolomb(),_=e.readExpGolomb(),T=e.readExpGolomb(),P=e.readExpGolomb()),e.getBits(1)&&(t=null,r=null,i=null,a=null,n=null,o=null,s=null,l=null,u=null,c=null,e.getBits(1)&&255===e.getBits(8)&&(t=e.getBits(16),r=e.getBits(16)),e.getBits(1)&&(i=e.getBits(1)),e.getBits(1)&&(a=e.getBits(3),n=!!e.getBits(1),e.getBits(1)&&(o=e.getBits(8),s=e.getBits(8),l=e.getBits(8))),e.getBits(1)&&(u=e.readExpGolomb(),c=e.readExpGolomb()),I={sar_width:t,sar_height:r,overscan_appropriate_flag:i,chroma_sample_loc_type_bottom_field:c,chroma_sample_loc_type_top_field:u,colour_primaries:o,matrix_coefficients:l,transfer_characteristics:s,video_format:a,video_full_range_flag:n}),e.stopReadingBits(),{profile:d,compatibility:p,level:f,bit_depth_chroma_minus8:v,bit_depth_luma_minus8:g,gaps_in_frame_num_value_allowed_flag:S,log2_max_frame_num_minus4:b,log2_max_pic_order_cnt_lsb_minus4:x,max_num_ref_frames:w,pic_height_in_map_units_minus1:M,pic_width_in_mbs_minus1:O,qpprime_y_zero_transform_bypass_flag:y,separate_colour_plane_flag:m,seq_parameter_set_id:h,direct_8x8_inference_flag:C,frame_crop_bottom_offset:P,frame_crop_left_offset:E,frame_crop_right_offset:_,frame_crop_top_offset:T,mb_adaptive_frame_field_flag:k,vui_parameters:I,pic_order_cnt_type:A}})(r),s=e.slice(0,null===i?1/0:i);return t.setSps(a),o&&(t.setPrevPicOrderCntLsb(0),t.setPrevPicOrderCntMsb(0)),{spsData:a,sps:s,type:"avc-profile"}}if(5===s){t.setPrevPicOrderCntLsb(0),t.setPrevPicOrderCntMsb(0),r.readExpGolomb(),r.readExpGolomb(),r.readExpGolomb();let e=t.getSps();if(!e)throw Error("SPS not found");let i=e.log2_max_frame_num_minus4+4;r.getBits(i),r.readExpGolomb();let{pic_order_cnt_type:n}=e,s=null;return 0===n&&(s=a(r,e,t,o)),r.stopReadingBits(),{type:"keyframe",poc:s}}if(8===s){r.stopReadingBits();let t=n(e);return{type:"avc-pps",pps:e.slice(0,null===t?1/0:t)}}if(1===s){r.readExpGolomb();let e=r.readExpGolomb();r.readExpGolomb();let i=t.getSps();if(!i)throw Error("SPS not found");let n=i.log2_max_frame_num_minus4+4;r.getBits(n);let{pic_order_cnt_type:s}=i,l=null;return 0===s&&(l=a(r,i,t,o)),r.stopReadingBits(),{type:"delta-frame",isBidirectionalFrame:6===e,poc:l}}return r.destroy(),null};r.parseAvc=(e,t)=>{let r=0,i=[];for(let a=0;a<e.length;a++){let n=e[a];if(0===n){r++;continue}if(r>=2&&1===n){r=0;let n=o(e.slice(a+1,a+100),t);if(n&&(i.push(n),"keyframe"===n.type||"delta-frame"===n.type))break}1!==n&&(r=0)}return i}},815986,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseBlockFlags=void 0;let i=e.r(48037);r.parseBlockFlags=(e,t)=>{if(t===i.matroskaElements.Block){e.startReadingBits(),e.getBits(4);let t=!!e.getBits(1),r=e.getBits(2);return e.getBits(1),e.stopReadingBits(),{invisible:t,lacing:r,keyframe:null}}if(t===i.matroskaElements.SimpleBlock){e.startReadingBits();let t=!!e.getBits(1);e.getBits(3);let r=!!e.getBits(1),i=e.getBits(2);return e.getBits(1),e.stopReadingBits(),{invisible:r,lacing:i,keyframe:t}}throw Error("Unexpected type")}},396147,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSampleFromBlock=void 0;let i=e.r(77548),a=e.r(882757),n=e.r(452893),o=e.r(603063),s=e.r(292780),l=e.r(48037),u=e.r(815986),c=async({partialVideoSample:e,codec:t,structureState:r,webmState:i,trackNumber:n,logLevel:l,callbacks:u,onVideoTrack:c,avcState:d})=>{if("V_MPEG4/ISO/AVC"!==t)return;let p=(0,s.getTracksFromMatroska)({structureState:r,webmState:i}).missingInfo;if(0!==p.length){for(let t of(0,o.parseAvc)(e.data,d))if("avc-profile"===t.type){if(i.setAvcProfileForTrackNumber(n,t),!p.find(e=>e.trackId===n))throw Error("Could not find track "+n);let e=(0,s.getTracksFromMatroska)({structureState:r,webmState:i}).resolved.find(e=>e.trackId===n);if(!e)throw Error("Could not find track "+n);await (0,a.registerVideoTrack)({track:e,container:"webm",logLevel:l,onVideoTrack:c,registerVideoSampleCallback:u.registerVideoSampleCallback,tracks:u.tracks})}}};r.getSampleFromBlock=async({ebml:e,webmState:t,offset:r,structureState:a,callbacks:o,logLevel:s,onVideoTrack:d,avcState:p})=>{let f=(0,i.getArrayBufferIterator)({initialData:e.value,maxBytes:e.value.length,logLevel:"error"}),h=f.getVint();if(null===h)throw Error("Not enough data to get track number, should not happen");let m=f.getInt16(),{keyframe:g}=(0,u.parseBlockFlags)(f,"SimpleBlock"===e.type?l.matroskaElements.SimpleBlock:l.matroskaElements.Block),{codec:v,trackTimescale:y}=t.getTrackInfoByNumber(h),b=t.getTimestampOffsetForByteOffset(r),x=t.getTimescale();if(void 0===b)throw Error("Could not find offset for byte offset "+r);let w=(m+b)*x*(null!=y?y:1)/1e3;if(!v)throw Error(`Could not find codec for track ${h}`);let S=e.value.length-f.counter.getOffset();if(v.startsWith("V_")){let e={data:f.getSlice(S),decodingTimestamp:w,duration:void 0,timestamp:w,offset:r};if(null===g)return f.destroy(),{type:"partial-video-sample",partialVideoSample:e,trackId:h,timescale:n.WEBCODECS_TIMESCALE};await c({codec:v,partialVideoSample:e,structureState:a,webmState:t,trackNumber:h,callbacks:o,logLevel:s,onVideoTrack:d,avcState:p});let i={...e,type:g?"key":"delta"};return f.destroy(),{type:"video-sample",videoSample:i,trackId:h,timescale:n.WEBCODECS_TIMESCALE}}if(v.startsWith("A_")){let e={data:f.getSlice(S),timestamp:w,type:"key",duration:void 0,decodingTimestamp:w,offset:r};return f.destroy(),{type:"audio-sample",audioSample:e,trackId:h,timescale:n.WEBCODECS_TIMESCALE}}return f.destroy(),{type:"no-sample"}}},877580,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.postprocessEbml=r.parseEbml=void 0;let i=e.r(66415),a=e.r(882757),n=e.r(396147),o=e.r(687470),s=e.r(48037),l=async(e,t,a)=>{let n=e.getMatroskaSegmentId();if(null===n)throw Error("Not enough bytes left to parse EBML - this should not happen");let o=e.counter.getOffset(),l=e.getVint(),u=e.counter.getOffset()-o;if(null===l)throw Error("Not enough bytes left to parse EBML - this should not happen");let c=s.ebmlMap[n];if(!c)return i.Log.verbose(a,`Unknown EBML hex ID ${JSON.stringify(n)}`),e.discard(l),null;if("uint"===c.type){let t=e.counter.getOffset(),r=0===l?0:e.getUint(l),{name:i}=c;return{type:i,value:{value:r,byteLength:e.counter.getOffset()-t},minVintWidth:u}}if("string"===c.type){let t=e.getByteString(l,!0);return{type:c.name,value:t,minVintWidth:u}}if("float"===c.type){let t=0===l?0:4===l?e.getFloat32():e.getFloat64();return{type:c.name,value:{value:t,size:4===l?"32":"64"},minVintWidth:u}}if("hex-string"===c.type)return{type:c.name,value:"0x"+[...e.getSlice(l)].map(e=>e.toString(16).padStart(2,"0")).join("").replace(RegExp("^"+n),""),minVintWidth:u};if("uint8array"===c.type)return{type:c.name,value:e.getSlice(l),minVintWidth:u};if("children"===c.type){let i=[],n=e.counter.getOffset();for(;0!==l;){let o=e.counter.getOffset(),s=await (0,r.parseEbml)(e,t,a);if(s){let e=t?await (0,r.postprocessEbml)({offset:o,ebml:s,statesForProcessing:t}):s;i.push(e)}let u=e.counter.getOffset();if(u-n>l)throw Error(`Offset ${u-n} is larger than the length of the hex ${l}`);if(u-n===l)break}return{type:c.name,value:i,minVintWidth:u}}throw Error(`Unknown segment type ${c.type}`)};r.parseEbml=l,r.postprocessEbml=async({offset:e,ebml:t,statesForProcessing:{webmState:r,callbacks:i,logLevel:s,onAudioTrack:l,onVideoTrack:u,structureState:c,avcState:d}})=>{if("TimestampScale"===t.type&&r.setTimescale(t.value.value),"Tracks"===t.type&&i.tracks.setIsDone(s),"TrackEntry"===t.type){r.onTrackEntrySegment(t);let e=(0,o.getTrack)({track:t,timescale:r.getTimescale()});e&&"audio"===e.type&&await (0,a.registerAudioTrack)({track:e,container:"webm",registerAudioSampleCallback:i.registerAudioSampleCallback,tracks:i.tracks,logLevel:s,onAudioTrack:l}),e&&"video"===e.type&&e.codec!==o.NO_CODEC_PRIVATE_SHOULD_BE_DERIVED_FROM_SPS&&await (0,a.registerVideoTrack)({track:e,container:"webm",logLevel:s,onVideoTrack:u,registerVideoSampleCallback:i.registerVideoSampleCallback,tracks:i.tracks})}if("Timestamp"===t.type&&r.setTimestampOffset(e,t.value.value),"Block"===t.type||"SimpleBlock"===t.type){let a=await (0,n.getSampleFromBlock)({ebml:t,webmState:r,offset:e,structureState:c,callbacks:i,logLevel:s,onVideoTrack:u,avcState:d});if("video-sample"===a.type)return await i.onVideoSample({videoSample:a.videoSample,trackId:a.trackId}),{type:"Block",value:new Uint8Array([]),minVintWidth:t.minVintWidth};if("audio-sample"===a.type)return await i.onAudioSample({audioSample:a.audioSample,trackId:a.trackId}),{type:"Block",value:new Uint8Array([]),minVintWidth:t.minVintWidth};if("no-sample"===a.type)return{type:"Block",value:new Uint8Array([]),minVintWidth:t.minVintWidth}}if("BlockGroup"===t.type){let a=t.value.find(e=>"SimpleBlock"===e.type||"Block"===e.type);if(!a||"SimpleBlock"!==a.type&&"Block"!==a.type)throw Error("Expected block segment");let o=t.value.find(e=>"ReferenceBlock"===e.type),l=0===a.value.length?null:await (0,n.getSampleFromBlock)({ebml:a,webmState:r,offset:e,structureState:c,callbacks:i,logLevel:s,onVideoTrack:u,avcState:d});if(l&&"partial-video-sample"===l.type){let e={...l.partialVideoSample,type:o?"delta":"key"};await i.onVideoSample({videoSample:e,trackId:l.trackId})}return{type:"BlockGroup",value:[],minVintWidth:t.minVintWidth}}return t}},634506,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hasBeenAborted=r.MediaParserAbortError=r.IsAnUnsupportedFileTypeError=r.IsAPdfError=r.IsAnImageError=void 0;class i extends Error{constructor({dimensions:e,imageType:t,message:r,mimeType:a,sizeInBytes:n,fileName:o}){super(r),this.name="IsAnImageError",this.imageType=t,this.dimensions=e,this.mimeType=a,this.sizeInBytes=n,this.fileName=o,Error.captureStackTrace&&Error.captureStackTrace(this,i)}}r.IsAnImageError=i;class a extends Error{constructor({message:e,mimeType:t,sizeInBytes:r,fileName:i}){super(e),this.name="IsAPdfError",this.mimeType=t,this.sizeInBytes=r,this.fileName=i,Error.captureStackTrace&&Error.captureStackTrace(this,a)}}r.IsAPdfError=a;class n extends Error{constructor({message:e,mimeType:t,sizeInBytes:r,fileName:i}){super(e),this.name="IsAnUnsupportedFileTypeError",this.mimeType=t,this.sizeInBytes=r,this.fileName=i,Error.captureStackTrace&&Error.captureStackTrace(this,n)}}r.IsAnUnsupportedFileTypeError=n;class o extends Error{constructor(e){super(e),this.name="MediaParserAbortError",this.cause=void 0}}r.MediaParserAbortError=o,r.hasBeenAborted=e=>e instanceof o||"MediaParserAbortError"===e.name||"AbortError"===e.name},725436,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.withResolvers=void 0,r.withResolvers=function(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}},627205,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__classPrivateFieldSet||function(e,t,r,i,a){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!a)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?a.call(e,r):a?a.value=r:t.set(e,r),r},n=e.e&&e.e.__classPrivateFieldGet||function(e,t,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.MediaParserEmitter=void 0;let o=e.r(725436);r.MediaParserEmitter=class{constructor(){this.listeners={pause:[],resume:[],abort:[],seek:[]},i.set(this,void 0),this.markAsReady=()=>{n(this,i,"f").call(this)},this.addEventListener=(e,t)=>{this.listeners[e].push(t)},this.removeEventListener=(e,t)=>{this.listeners[e]=this.listeners[e].filter(e=>e!==t)},this.dispatchPause=()=>{this.readyPromise=this.readyPromise.then(()=>{this.dispatchEvent("pause",void 0)})},this.dispatchResume=()=>{this.readyPromise=this.readyPromise.then(()=>{this.dispatchEvent("resume",void 0)})},this.dispatchAbort=e=>{this.readyPromise=this.readyPromise.then(()=>{this.dispatchEvent("abort",{reason:e})})},this.dispatchSeek=e=>{this.readyPromise=this.readyPromise.then(()=>{this.dispatchEvent("seek",{seek:e})})};const{promise:e,resolve:t}=(0,o.withResolvers)();this.readyPromise=e,a(this,i,t,"f")}dispatchEvent(e,t){this.listeners[e].forEach(e=>{e({detail:t})})}},i=new WeakMap},737490,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.makePauseSignal=void 0,r.makePauseSignal=e=>{let t=[],r=!1;return{pause:()=>{r||(e.dispatchPause(),r=!0)},resume:()=>{if(r){for(let e of(r=!1,t))e();t.length=0,e.dispatchResume()}},waitUntilResume:()=>new Promise(e=>{r?t.push(e):e()})}}},995007,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.performedSeeksStats=void 0,r.performedSeeksStats=()=>{let e=[];return{recordSeek:t=>{e.push(t)},getPerformedSeeks:()=>e,markLastSeekAsUserInitiated:()=>{e.length>0&&(e[e.length-1].type="user-initiated")}}}},43670,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.makeSeekSignal=void 0,r.makeSeekSignal=e=>{let t=null;return{seek:r=>{t=r,e.dispatchSeek(r)},getSeek:()=>t,clearSeekIfStillSame:e=>t===e?(t=null,{hasChanged:!1}):{hasChanged:!0}}}},689127,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mediaParserController=void 0;let i=e.r(634506),a=e.r(627205),n=e.r(737490),o=e.r(995007),s=e.r(43670);r.mediaParserController=()=>{let e=new AbortController,t=new a.MediaParserEmitter,r=(0,n.makePauseSignal)(t),l=(0,s.makeSeekSignal)(t),u=(0,o.performedSeeksStats)(),c=async()=>{if(e.signal.aborted){let t=new i.MediaParserAbortError("Aborted");throw e.signal.reason&&(t.cause=e.signal.reason),t}await r.waitUntilResume()},d=null,p=null;return{abort:r=>{e.abort(r),t.dispatchAbort(r)},seek:l.seek,simulateSeek:e=>{if(!p)throw Error("The mediaParserController() was not yet used in a parseMedia() call");return p(e)},pause:r.pause,resume:r.resume,addEventListener:t.addEventListener,removeEventListener:t.removeEventListener,getSeekingHints:()=>{if(!d)throw Error("The mediaParserController() was not yet used in a parseMedia() call");return d()},_internals:{signal:e.signal,checkForAbortAndPause:c,seekSignal:l,markAsReadyToEmitEvents:t.markAsReady,performedSeeksSignal:u,attachSeekingHintResolution:e=>{if(d)throw Error("The mediaParserController() was used in multiple parseMedia() calls. Create a separate controller for each call.");d=e},attachSimulateSeekResolution:e=>{if(p)throw Error("The mediaParserController() was used in multiple parseMedia() calls. Create a separate controller for each call.");p=e}}}}},345458,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.m3uHasStreams=r.getM3uStreams=r.isIndependentSegments=void 0,r.isIndependentSegments=e=>null!==e&&"m3u"===e.type&&e.boxes.some(e=>"m3u-independent-segments"===e.type||"m3u-stream-info"===e.type),r.getM3uStreams=({structure:e,originalSrc:t,readerInterface:r})=>{if(null===e||"m3u"!==e.type)return null;let i=[];for(let a=0;a<e.boxes.length;a++){let n=e.boxes[a];if("m3u-stream-info"===n.type){let o=e.boxes[a+1];if("m3u-text-value"!==o.type)throw Error("Expected m3u-text-value");let s=[];if(n.audio)for(let i of e.boxes.filter(e=>"m3u-media-info"===e.type&&e.groupId===n.audio))s.push({autoselect:i.autoselect,channels:i.channels,default:i.default,groupId:i.groupId,language:i.language,name:i.name,src:r.createAdjacentFileSource(i.uri,t),id:s.length,isAudio:!0});i.push({src:r.createAdjacentFileSource(o.value,t),averageBandwidthInBitsPerSec:n.averageBandwidthInBitsPerSec,bandwidthInBitsPerSec:n.bandwidthInBitsPerSec,codecs:n.codecs,dimensions:n.dimensions,associatedPlaylists:s})}}return 0===i.length?null:i.slice().sort((e,t)=>{var r,i,a,n;let o=e.dimensions?e.dimensions.width*e.dimensions.height:0,s=t.dimensions?t.dimensions.width*t.dimensions.height:0;if(o===s){let o=null!=(i=null!=(r=e.averageBandwidthInBitsPerSec)?r:e.bandwidthInBitsPerSec)?i:0;return(null!=(n=null!=(a=t.averageBandwidthInBitsPerSec)?a:t.bandwidthInBitsPerSec)?n:0)-o}return s-o}).map((e,t)=>({...e,id:t}))},r.m3uHasStreams=e=>{let t=e.structure.getStructureOrNull();return!!t&&("m3u"!==t.type||e.m3u.hasFinishedManifest())}},359696,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hasContainer=r.getContainer=void 0;let i=e.r(248546);r.getContainer=e=>{if("iso-base-media"===e.type)return"mp4";if("matroska"===e.type)return"webm";if("transport-stream"===e.type)return"transport-stream";if("mp3"===e.type)return"mp3";if("wav"===e.type)return"wav";if("flac"===e.type)return"flac";if("riff"===e.type){if((0,i.isRiffAvi)(e))return"avi";throw Error("Unknown RIFF container "+e.type)}if("aac"===e.type)return"aac";if("m3u"===e.type)return"m3u8";throw Error("Unknown container "+e)},r.hasContainer=e=>{try{return null!==(0,r.getContainer)(e)}catch(e){return!1}}},123378,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hasDimensions=r.getDimensions=void 0;let i=e.r(86711),a=e.r(264964);r.getDimensions=e=>{let t=e.structure.getStructureOrNull();if(t&&(0,a.isAudioStructure)(t))return null;let r=(0,i.getTracks)(e,!0);if(!r.length)return null;let n=r.find(e=>"video"===e.type);return n?{width:n.width,height:n.height,rotation:n.rotation,unrotatedHeight:n.displayAspectHeight,unrotatedWidth:n.displayAspectWidth}:null},r.hasDimensions=e=>{let t=e.structure.getStructureOrNull();if(t&&(0,a.isAudioStructure)(t))return!0;try{return null!==(0,r.getDimensions)(e)}catch(e){return!1}}},566220,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getDurationFromFlac=void 0,r.getDurationFromFlac=e=>{let t=e.structure.getFlacStructure().boxes.find(e=>"flac-streaminfo"===e.type);if(!t)throw Error("Streaminfo not found");return t.totalSamples/t.sampleRate}},880137,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.areSamplesComplete=void 0,r.areSamplesComplete=({moofBoxes:e,tfraBoxes:t})=>0===e.length||t.length>0&&t.every(t=>t.entries.length===e.length)},56355,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSamplesFromMoof=void 0;let i=e.r(831097);r.getSamplesFromMoof=({moofBox:e,trackId:t,trexBoxes:r})=>e.trafBoxes.map(a=>{let n=(0,i.getTfhdBox)(a);return n&&n.trackId===t?((e,t,r)=>{var a,n,o,s,l,u;if("regular-box"!==e.type||"traf"!==e.boxType)throw Error("Expected traf-box");let c=(0,i.getTfhdBox)(e),d=null!=(a=r.find(e=>e.trackId===(null==c?void 0:c.trackId)))?a:null,p=(null==c?void 0:c.defaultSampleDuration)||(null==d?void 0:d.defaultSampleDuration)||null,f=(null==c?void 0:c.defaultSampleSize)||(null==d?void 0:d.defaultSampleSize)||null,h=null!=(o=null!=(n=null==c?void 0:c.defaultSampleFlags)?n:null==d?void 0:d.defaultSampleFlags)?o:null,m=(0,i.getTfdtBox)(e),g=(0,i.getTrunBoxes)(e),v=0,y=0,b=0,x=[];for(let e of g){let r=-1;for(let i of(e.dataOffset&&(b=e.dataOffset,y=0),e.samples)){r++;let a=i.sampleDuration||p;if(null===a)throw Error("Expected duration");let n=null!=(s=i.sampleSize)?s:f;if(null===n)throw Error("Expected size");let o=0===r,c=i.sampleFlags?i.sampleFlags:o&&null!==e.firstSampleFlags?e.firstSampleFlags:h;if(null===c)throw Error("Expected sample flags");let d=!(c>>16&1),g=v+(null!=(l=null==m?void 0:m.baseMediaDecodeTime)?l:0),w={offset:y+(null!=t?t:0)+(null!=b?b:0),decodingTimestamp:g,timestamp:g+(null!=(u=i.sampleCompositionTimeOffset)?u:0),duration:a,isKeyframe:d,size:n,chunk:0,bigEndian:!1,chunkSize:null};x.push(w),y+=n,v+=a}}return x})(a,e.offset,r):[]}).flat(1)},705631,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.collectSamplePositionsFromMoofBoxes=void 0;let i=e.r(56355);r.collectSamplePositionsFromMoofBoxes=({moofBoxes:e,tkhdBox:t,isComplete:r,trexBoxes:a})=>({samplePositions:e.map((n,o)=>({isLastFragment:o===e.length-1&&r,samples:(0,i.getSamplesFromMoof)({moofBox:n,trackId:t.trackId,trexBoxes:a})})),isComplete:r})},63576,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSamplePositions=void 0,r.getSamplePositions=({stcoBox:e,stszBox:t,stscBox:r,stssBox:i,sttsBox:a,cttsBox:n})=>{var o;let s=[];for(let e of a.sampleDistribution)for(let t=0;t<e.sampleCount;t++)s.push(e.sampleDelta);let l=[];for(let e of null!=(o=null==n?void 0:n.entries)?o:[{sampleCount:s.length,sampleOffset:0}])for(let t=0;t<e.sampleCount;t++)l.push(e.sampleOffset);let u=0,c=e.entries,d=[],p=1;for(let e=0;e<c.length;e++){let a=r.entries.get(e+1);void 0!==a&&(p=a);let n=0;for(let r=0;r<p;r++){let r="fixed"===t.countType?t.sampleSize:t.entries[d.length],a=!i||i.sampleNumber.has(d.length+1),o=s[d.length],p=u+l[d.length];d.push({offset:Number(c[e])+n,size:r,isKeyframe:a,decodingTimestamp:u,timestamp:p,duration:o,chunk:e,bigEndian:!1,chunkSize:null}),u+=o,n+=r}}return d}},992123,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getGroupedSamplesPositionsFromMp4=void 0;let i=e.r(831097);r.getGroupedSamplesPositionsFromMp4=({trakBox:e,bigEndian:t})=>{let r=(0,i.getStscBox)(e),a=(0,i.getStszBox)(e),n=(0,i.getStcoBox)(e);if(!r)throw Error("Expected stsc box in trak box");if(!n)throw Error("Expected stco box in trak box");if(!a)throw Error("Expected stsz box in trak box");if("fixed"!==a.countType)throw Error("Only supporting fixed count type in stsz box");let o=[],s=0,l=Array.from(r.entries.keys());for(let e=0;e<n.entries.length;e++){let i=n.entries[e],u=e+1,c=l.findLast(e=>e<=u);if(void 0===c)throw Error("should not be");let d=r.entries.get(c);if(void 0===d)throw Error("should not be");o.push({chunk:u,timestamp:s,decodingTimestamp:s,offset:Number(i),size:a.sampleSize*d,duration:d,isKeyframe:!0,bigEndian:t,chunkSize:a.sampleSize}),s+=d}return o}},953215,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shouldGroupAudioSamples=void 0;let i=e.r(540360);r.shouldGroupAudioSamples=e=>{let t=(0,i.isLpcmAudioCodec)(e),r=(0,i.isIn24AudioCodec)(e),a=(0,i.isTwosAudioCodec)(e);return t||r||a?{bigEndian:a||r}:null}},614872,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.collectSamplePositionsFromTrak=void 0;let i=e.r(758091),a=e.r(63576),n=e.r(992123),o=e.r(953215),s=e.r(831097);r.collectSamplePositionsFromTrak=e=>{let t=(0,o.shouldGroupAudioSamples)(e),r=(0,i.getTimescaleAndDuration)(e);if(t)return(0,n.getGroupedSamplesPositionsFromMp4)({trakBox:e,bigEndian:t.bigEndian});let l=(0,s.getStszBox)(e),u=(0,s.getStcoBox)(e),c=(0,s.getStscBox)(e),d=(0,s.getStssBox)(e),p=(0,s.getSttsBox)(e),f=(0,s.getCttsBox)(e);if(!l)throw Error("Expected stsz box in trak box");if(!u)throw Error("Expected stco box in trak box");if(!c)throw Error("Expected stsc box in trak box");if(!p)throw Error("Expected stts box in trak box");if(!r)throw Error("Expected timescale and duration in trak box");return(0,a.getSamplePositions)({stcoBox:u,stscBox:c,stszBox:l,stssBox:d,sttsBox:p,cttsBox:f})}},968493,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSamplePositionsFromTrack=void 0;let i=e.r(705631),a=e.r(614872),n=e.r(831097);r.getSamplePositionsFromTrack=({trakBox:e,moofBoxes:t,moofComplete:r,trexBoxes:o})=>{let s=(0,n.getTkhdBox)(e);if(!s)throw Error("Expected tkhd box in trak box");if(t.length>0){let{samplePositions:e}=(0,i.collectSamplePositionsFromMoofBoxes)({moofBoxes:t,tkhdBox:s,isComplete:r,trexBoxes:o});return{samplePositions:e.map(e=>e.samples).flat(1),isComplete:r}}return{samplePositions:(0,a.collectSamplePositionsFromTrak)(e),isComplete:!0}}},897508,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getDurationFromPlaylist=r.getPlaylist=r.getAllPlaylists=void 0;let i=e.r(345458);r.getAllPlaylists=({structure:e,src:t})=>{if(!(0,i.isIndependentSegments)(e))return[{type:"m3u-playlist",boxes:e.boxes,src:t}];let r=e.boxes.filter(e=>"m3u-playlist"===e.type);return 0===r.length?[{type:"m3u-playlist",boxes:e.boxes,src:t}]:r},r.getPlaylist=(e,t)=>{let i=(0,r.getAllPlaylists)({structure:e,src:t}).find(e=>e.src===t);if(!i)throw Error(`Expected m3u-playlist with src ${t}`);return i},r.getDurationFromPlaylist=e=>{let t=e.boxes.filter(e=>"m3u-extinf"===e.type);if(0===t.length)throw Error("Expected duration in m3u playlist");return t.reduce((e,t)=>e+t.value,0)}},392962,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getDurationFromM3u=void 0;let i=e.r(897508);r.getDurationFromM3u=e=>Math.max(...(0,i.getAllPlaylists)({structure:e.structure.getM3uStructure(),src:e.src}).map(e=>(0,i.getDurationFromPlaylist)(e)))},381767,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getMpegFrameLength=r.getAverageMpegFrameLength=void 0;let i=({samplesPerFrame:e,bitrateKbit:t,samplingFrequency:r,padding:i,layer:a})=>{if(1===a)throw Error("MPEG Layer I is not supported");return e/8*t/r*1e3+(i?1===a?4:1:0)};r.getAverageMpegFrameLength=({samplesPerFrame:e,bitrateKbit:t,samplingFrequency:r,layer:a})=>{let n=i({bitrateKbit:t,layer:a,padding:!1,samplesPerFrame:e,samplingFrequency:r}),o=Math.floor(n),s=n%1;return s*(o+1)+(1-s)*o},r.getMpegFrameLength=({samplesPerFrame:e,bitrateKbit:t,samplingFrequency:r,padding:a,layer:n})=>Math.floor(i({bitrateKbit:t,layer:n,padding:a,samplesPerFrame:e,samplingFrequency:r}))},270866,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSamplesPerMpegFrame=void 0,r.getSamplesPerMpegFrame=({mpegVersion:e,layer:t})=>{if(1===e){if(1===t)return 384;if(2===t||3===t)return 1152}if(2===e){if(1===t)return 384;if(2===t)return 1152;if(3===t)return 576}throw Error("Invalid MPEG layer")}},918820,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getDurationFromMp3=r.getDurationFromMp3Xing=void 0;let i=e.r(381767),a=e.r(270866);r.getDurationFromMp3Xing=({xingData:e,samplesPerFrame:t})=>{let r=e.numberOfFrames;if(!r)throw Error("Cannot get duration of VBR MP3 file - no frames");let{sampleRate:i}=e;if(!i)throw Error("Cannot get duration of VBR MP3 file - no sample rate");return r*t/i},r.getDurationFromMp3=e=>{let t=e.mp3.getMp3Info(),n=e.mp3.getMp3BitrateInfo();if(!t||!n)return null;let o=(0,a.getSamplesPerMpegFrame)({layer:t.layer,mpegVersion:t.mpegVersion});if("variable"===n.type)return(0,r.getDurationFromMp3Xing)({xingData:n.xingData,samplesPerFrame:o});let s=(0,i.getMpegFrameLength)({bitrateKbit:n.bitrateInKbit,padding:!1,samplesPerFrame:o,samplingFrequency:t.sampleRate,layer:t.layer});return Math.floor((e.contentLength-e.mediaSection.getMediaSectionAssertOnlyOne().start)/s)*o/t.sampleRate}},635940,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSampleRateFromAvi=r.getDurationFromAvi=void 0;let i=e.r(248546);r.getDurationFromAvi=e=>{let t=(0,i.getStrlBoxes)(e),r=[];for(let e of t){let t=(0,i.getStrhBox)(e.children);if(!t)throw Error("No strh box");let a=t.rate/t.scale,n=t.length/a;r.push(n)}return Math.max(...r)},r.getSampleRateFromAvi=e=>{for(let t of(0,i.getStrlBoxes)(e)){let e=(0,i.getStrhBox)(t.children);if(!e)throw Error("No strh box");if("strf-box-audio"===e.strf.type)return e.strf.sampleRate}return null}},427596,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getDurationFromWav=void 0,r.getDurationFromWav=e=>{let t=e.structure.getWavStructure(),r=t.boxes.find(e=>"wav-fmt"===e.type);if(!r)throw Error("Expected fmt box");let i=t.boxes.find(e=>"wav-data"===e.type);if(!i)throw Error("Expected data box");return i.dataSize/(r.sampleRate*r.blockAlign)}},862849,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deduplicateTfraBoxesByOffset=r.precomputedTfraState=void 0,r.precomputedTfraState=()=>{let e=[];return{getTfraBoxes:()=>e,setTfraBoxes:t=>{e=t}}},r.deduplicateTfraBoxesByOffset=e=>e.filter((e,t,r)=>t===r.findIndex(t=>t.offset===e.offset))},853033,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hasSlowDuration=r.hasDuration=r.getDuration=r.isMatroska=void 0;let i=e.r(566220),a=e.r(880137),n=e.r(968493),o=e.r(831097),s=e.r(392962),l=e.r(918820),u=e.r(635940),c=e.r(427596),d=e.r(86711),p=e.r(862849);r.isMatroska=e=>e.find(e=>"Segment"===e.type),r.getDuration=e=>{let t=e.structure.getStructure();if("matroska"===t.type)return(e=>{let t=e.find(e=>"Segment"===e.type);if(!t||"Segment"!==t.type)return null;let{value:r}=t;if(!r)return null;let i=r.find(e=>"Info"===e.type),a=[...t.value,...i&&"Info"===i.type?i.value:[]],n=a.find(e=>"TimestampScale"===e.type);if(!n||"TimestampScale"!==n.type)return null;let o=a.find(e=>"Duration"===e.type);return o&&"Duration"===o.type?o.value.value/n.value.value*1e3:null})(t.boxes);if("iso-base-media"===t.type)return(e=>{var t,r;let i=e.structure.getIsoStructure(),s=(0,o.getMoovBoxFromState)({structureState:e.structure,isoState:e.iso,mp4HeaderSegment:null!=(r=null==(t=e.m3uPlaylistContext)?void 0:t.mp4HeaderSegment)?r:null,mayUsePrecomputed:!0});if(!s)return null;let l=(0,o.getMoofBoxes)(i.boxes),u=e.iso.mfra.getIfAlreadyLoaded(),c=(0,p.deduplicateTfraBoxesByOffset)([...u?(0,o.getTfraBoxesFromMfraBoxChildren)(u):[],...(0,o.getTfraBoxes)(i.boxes)]);if(!(0,a.areSamplesComplete)({moofBoxes:l,tfraBoxes:c}))return null;let f=(0,o.getMvhdBox)(s);if(!f)return null;if("mvhd-box"!==f.type)throw Error("Expected mvhd-box");if(f.durationInSeconds>0)return f.durationInSeconds;let h=(0,d.getTracks)(e,!0).map(e=>{let{originalTimescale:t}=e,r=(0,o.getTrakBoxByTrackId)(s,e.trackId);if(!r)return null;let{samplePositions:i,isComplete:u}=(0,n.getSamplePositionsFromTrack)({trakBox:r,moofBoxes:l,moofComplete:(0,a.areSamplesComplete)({moofBoxes:l,tfraBoxes:c}),trexBoxes:(0,o.getTrexBoxes)(s)});if(!u||0===i.length)return null;let d=null==i?void 0:i.map(e=>(e.timestamp+e.duration)/t).reduce((e,t)=>Math.max(e,t),0);return null!=d?d:0});return h.every(e=>null===e)?null:Math.max(...h.filter(e=>null!==e))})(e);if("riff"===t.type)return(0,u.getDurationFromAvi)(t);if("transport-stream"===t.type)return null;if("mp3"===t.type)return(0,l.getDurationFromMp3)(e);if("wav"===t.type)return(0,c.getDurationFromWav)(e);if("aac"===t.type)return null;if("flac"===t.type)return(0,i.getDurationFromFlac)(e);if("m3u"===t.type)return(0,s.getDurationFromM3u)(e);throw Error("Has no duration "+t)},r.hasDuration=e=>null!==e.structure.getStructureOrNull()&&(0,d.getHasTracks)(e,!0),r.hasSlowDuration=e=>{try{if(!(0,r.hasDuration)(e))return!1;return null!==(0,r.getDuration)(e)}catch(e){return!1}}},880263,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hasHdr=r.getIsHdr=void 0;let i=e.r(86711);r.getIsHdr=e=>(0,i.getTracks)(e,!0).some(e=>"video"===e.type&&"bt2020-ncl"===e.advancedColor.matrix&&("hlg"===e.advancedColor.transfer||"pq"===e.advancedColor.transfer)&&"bt2020"===e.advancedColor.primaries),r.hasHdr=e=>(0,i.getHasTracks)(e,!0)},717707,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getKeyframesFromIsoBaseMedia=void 0;let i=e.r(86711),a=e.r(880137),n=e.r(968493),o=e.r(831097);r.getKeyframesFromIsoBaseMedia=e=>{let t=(0,i.getTracksFromIsoBaseMedia)({isoState:e.iso,m3uPlaylistContext:e.m3uPlaylistContext,structure:e.structure,mayUsePrecomputed:!0}).filter(e=>"video"===e.type),r=e.structure.getIsoStructure(),s=(0,o.getMoofBoxes)(r.boxes),l=(0,o.getTfraBoxes)(r.boxes),u=(0,o.getMoovFromFromIsoStructure)(r);return u?t.map(e=>{let{originalTimescale:t}=e,r=(0,o.getTrakBoxByTrackId)(u,e.trackId);if(!r)return[];let{samplePositions:i,isComplete:c}=(0,n.getSamplePositionsFromTrack)({trakBox:r,moofBoxes:s,moofComplete:(0,a.areSamplesComplete)({moofBoxes:s,tfraBoxes:l}),trexBoxes:(0,o.getTrexBoxes)(u)});return c?i.filter(e=>e.isKeyframe).map(r=>({trackId:e.trackId,presentationTimeInSeconds:r.timestamp/t,decodingTimeInSeconds:r.decodingTimestamp/t,positionInBytes:r.offset,sizeInBytes:r.size})):[]}).flat():[]}},889152,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hasKeyframes=r.getKeyframes=void 0;let i=e.r(717707),a=e.r(86711);r.getKeyframes=e=>"iso-base-media"===e.structure.getStructure().type?(0,i.getKeyframesFromIsoBaseMedia)(e):null,r.hasKeyframes=e=>"iso-base-media"!==e.structure.getStructure().type||(0,a.getHasTracks)(e,!0)},658490,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getMetadataFromFlac=void 0,r.getMetadataFromFlac=e=>{let t=e.boxes.find(e=>"flac-vorbis-comment"===e.type);return t?t.fields:null}},592492,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getMetadataFromMp3=void 0,r.getMetadataFromMp3=e=>{let t=e.boxes.find(e=>"id3-header"===e.type);return t?t.metatags:null}},965296,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getMetadataFromWav=void 0,r.getMetadataFromWav=e=>{let t=e.boxes.find(e=>"wav-list"===e.type);return t?t.metadata:null}},855355,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getMetadataFromIsoBase=r.parseIsoMetaBox=void 0;let i=e.r(831097),a=e.r(653909);r.parseIsoMetaBox=(e,t)=>{let r=e.children.find(e=>"ilst-box"===e.type),i=e.children.find(e=>"keys-box"===e.type);if(!r||!i)return r?r.entries.map(e=>{var t;let r="ART"===(t=e.index)?"artist":"alb"===t?"album":"cmt"===t?"comment":"day"===t?"releaseDate":"gen"===t?"genre":"nam"===t?"title":"too"===t?"encoder":"wrt"===t?"writer":"cpy"===t?"copyright":"dir"===t?"director":"prd"===t?"producer":"des"===t?"description":null;return r&&"unknown"!==e.value.type?{trackId:null,key:r,value:e.value.value}:null}).filter(a.truthy):[];let n=[];for(let e=0;e<r.entries.length;e++){let a=r.entries[e],o=i.entries[e];if("unknown"!==a.value.type){let e="string"==typeof a.value.value&&a.value.value.endsWith("\0")?a.value.value.slice(0,-1):a.value.value;n.push({key:o.value,value:e,trackId:t})}}return n},r.getMetadataFromIsoBase=e=>{var t,n;let o=(0,i.getMoovBoxFromState)({structureState:e.structure,isoState:e.iso,mp4HeaderSegment:null!=(n=null==(t=e.m3uPlaylistContext)?void 0:t.mp4HeaderSegment)?n:null,mayUsePrecomputed:!0});if(!o)return[];let s=(0,i.getTraks)(o),l=o.children.find(e=>"regular-box"===e.type&&"meta"===e.boxType),u=o.children.find(e=>"regular-box"===e.type&&"udta"===e.boxType),c=null==u?void 0:u.children.find(e=>"regular-box"===e.type&&"meta"===e.boxType),d=s.map(e=>{let t=e.children.find(e=>"regular-box"===e.type&&"meta"===e.boxType);if(t){let a=(0,i.getTkhdBox)(e);if(!a)throw Error("No tkhd box found");return(0,r.parseIsoMetaBox)(t,a.trackId)}return null}).filter(a.truthy);return[...l?(0,r.parseIsoMetaBox)(l,null):[],...c?(0,r.parseIsoMetaBox)(c,null):[],...d.flat(1)]}},984896,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getMetadataFromMatroska=void 0;let i=e.r(125925),a=e=>e.endsWith("\0")?a(e.slice(0,-1)):e,n=(e,t)=>{let r=e.find(e=>"TagName"===e.type),i=e.find(e=>"TagString"===e.type);return r&&i?{trackId:t,key:r.value.toLowerCase(),value:a(i.value)}:null};r.getMetadataFromMatroska=e=>{var t;let r=[];for(let a of e.boxes)if("Segment"===a.type)for(let e of a.value.filter(e=>"Tags"===e.type))for(let o of e.value){if("Tag"!==o.type)continue;let e=null,s=o.value.find(e=>"Targets"===e.type);if(s){let r=null==(t=s.value.find(e=>"TagTrackUID"===e.type))?void 0:t.value;r&&(e=(0,i.getTrackWithUid)(a,r))}for(let t of o.value.filter(e=>"SimpleTag"===e.type)){let i=n(t.value,e);i&&r.push(i)}}return r}},339641,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getMetadataFromRiff=void 0;let i=e.r(653909);r.getMetadataFromRiff=e=>{let t=e.boxes.find(e=>"list-box"===e.type&&"INFO"===e.listType);if(!t)return[];let{children:r}=t;return r.map(e=>"isft-box"!==e.type?null:{trackId:null,key:"encoder",value:e.software}).filter(i.truthy)}},583681,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hasMetadata=r.getMetadata=void 0;let i=e.r(658490),a=e.r(592492),n=e.r(965296),o=e.r(855355),s=e.r(984896),l=e.r(339641);r.getMetadata=e=>{var t,r;let u=e.structure.getStructure();if("matroska"===u.type)return(0,s.getMetadataFromMatroska)(u);if("riff"===u.type)return(0,l.getMetadataFromRiff)(u);if("transport-stream"===u.type||"m3u"===u.type)return[];if("mp3"===u.type){let e=(0,a.getMetadataFromMp3)(u);return null!=e?e:[]}if("wav"===u.type)return null!=(t=(0,n.getMetadataFromWav)(u))?t:[];if("aac"===u.type)return[];if("flac"===u.type)return null!=(r=(0,i.getMetadataFromFlac)(u))?r:[];if("iso-base-media"===u.type)return(0,o.getMetadataFromIsoBase)(e);throw Error("Unknown container "+u)},r.hasMetadata=e=>{if("mp3"===e.type)return null!==(0,a.getMetadataFromMp3)(e);if("wav"===e.type)return null!==(0,n.getMetadataFromWav)(e);if("m3u"===e.type||"transport-stream"===e.type||"aac"===e.type)return!0;if("flac"===e.type)return null!==(0,i.getMetadataFromFlac)(e);if("iso-base-media"===e.type||"matroska"===e.type||"riff"===e.type)return!1;throw Error("Unknown container "+e)}},337274,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getLocation=void 0,r.parseLocation=a;let i=e.r(583681);function a(e){let t=e.match(/^([+-]\d{2}\.?\d{0,10})([+-]\d{3}\.?\d{0,10})([+-]\d+(\.\d+)?)?\/$/);if(!t)return null;let r=parseFloat(t[1]);return{latitude:r,longitude:parseFloat(t[2]),altitude:t[3]?parseFloat(t[3]):null}}r.getLocation=e=>{let t=(0,i.getMetadata)(e),r=t.find(e=>"com.apple.quicktime.location.ISO6709"===e.key),n=t.find(e=>"com.apple.quicktime.location.accuracy.horizontal"===e.key);if(r){let e=a(r.value);return null===e?null:{...e,horizontalAccuracy:(null==n?void 0:n.value)?parseFloat(String(n.value)):null}}return null}},716594,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hasNumberOfAudioChannels=r.getNumberOfAudioChannels=void 0,r.getNumberOfAudioChannels=e=>{var t,r;return null!=(r=null==(t=e.callbacks.tracks.getTracks().find(e=>"audio"===e.type))?void 0:t.numberOfChannels)?r:null},r.hasNumberOfAudioChannels=e=>e.callbacks.tracks.hasAllTracks()},710965,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hasSampleRate=r.getSampleRate=void 0,r.getSampleRate=e=>{var t,r;return null!=(r=null==(t=e.callbacks.tracks.getTracks().find(e=>"audio"===e.type))?void 0:t.sampleRate)?r:null},r.hasSampleRate=e=>e.callbacks.tracks.hasAllTracks()},751442,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSeekingByteForAac=void 0,r.getSeekingByteForAac=({time:e,seekingHints:t})=>{let r;for(let i of t.audioSampleMap)if(!(i.timeInSeconds>e)&&(!(i.timeInSeconds+i.durationInSeconds<e)||t.lastSampleObserved)){if(!r){r=i;continue}r.timeInSeconds<i.timeInSeconds&&(r=i)}return r?{type:"do-seek",byte:r.offset,timeInSeconds:r.timeInSeconds}:{type:"valid-but-must-wait"}}},637707,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSeekingByteForFlac=void 0,r.getSeekingByteForFlac=({time:e,seekingHints:t})=>{let r;for(let i of t.audioSampleMap)if(!(i.timeInSeconds>e)&&(!(i.timeInSeconds+i.durationInSeconds<e)||t.lastSampleObserved)){if(!r){r=i;continue}r.timeInSeconds<i.timeInSeconds&&(r=i)}return r||null}},391129,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.findKeyframeBeforeTime=void 0;let i=e.r(66415);r.findKeyframeBeforeTime=({samplePositions:e,time:t,timescale:r,mediaSections:a,logLevel:n,startInSeconds:o})=>{let s=0,l=null;for(let i of e){let e=i.timestamp/r+o,a=i.decodingTimestamp/r+o;i.isKeyframe&&(e<=t||a<=t)&&s<=i.offset&&(s=i.offset,l=i)}if(!l)throw Error("No sample found");return a.find(e=>l.offset>=e.start&&l.offset<e.start+e.size)?l:(i.Log.trace(n,"Found a sample, but the offset has not yet been marked as a video section yet. Not yet able to seek, but probably once we have started reading the next box.",l),null)}},842666,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.findTrackToSeek=r.findAnyTrackWithSamplePositions=void 0;let i=e.r(880137),a=e.r(968493),n=e.r(831097);r.findAnyTrackWithSamplePositions=(e,t)=>{let r=(0,n.getMoovFromFromIsoStructure)(t);if(!r)return null;for(let o of e)if("video"===o.type||"audio"===o.type){let e=(0,n.getTrakBoxByTrackId)(r,o.trackId);if(!e)continue;let{samplePositions:s}=(0,a.getSamplePositionsFromTrack)({trakBox:e,moofBoxes:(0,n.getMoofBoxes)(t.boxes),moofComplete:(0,i.areSamplesComplete)({moofBoxes:(0,n.getMoofBoxes)(t.boxes),tfraBoxes:(0,n.getTfraBoxes)(t.boxes)}),trexBoxes:(0,n.getTrexBoxes)(r)});if(0===s.length)continue;return{track:o,samplePositions:s}}return null},r.findTrackToSeek=(e,t)=>{let o=e.find(e=>"video"===e.type),s=t.getIsoStructure();if(!o)return(0,r.findAnyTrackWithSamplePositions)(e,s);let l=(0,n.getMoovFromFromIsoStructure)(s);if(!l)return null;let u=(0,n.getTrakBoxByTrackId)(l,o.trackId);if(!u)return null;let{samplePositions:c}=(0,a.getSamplePositionsFromTrack)({trakBox:u,moofBoxes:(0,n.getMoofBoxes)(s.boxes),moofComplete:(0,i.areSamplesComplete)({moofBoxes:(0,n.getMoofBoxes)(s.boxes),tfraBoxes:(0,n.getTfraBoxes)(s.boxes)}),trexBoxes:(0,n.getTrexBoxes)(l)});return 0===c.length?(0,r.findAnyTrackWithSamplePositions)(e,s):{track:o,samplePositions:c}}},218294,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mediaSectionState=r.getCurrentMediaSection=r.isByteInMediaSection=void 0,r.isByteInMediaSection=({position:e,mediaSections:t})=>{if(0===t.length)return"no-section-defined";for(let r of t)if(e>=r.start&&e<r.start+r.size)return"in-section";return"outside-section"},r.getCurrentMediaSection=({offset:e,mediaSections:t})=>{for(let r of t)if(e>=r.start&&e<r.start+r.size)return r;return null},r.mediaSectionState=()=>{let e=[];return{addMediaSection:t=>{if(!e.some(e=>t.start<e.start+e.size&&t.start+t.size>e.start)){for(let r=e.length-1;r>=0;r--){let i=e[r];t.start<=i.start&&t.start+t.size>=i.start+i.size&&e.splice(r,1)}e.push(t)}},getMediaSections:()=>e,isCurrentByteInMediaSection:t=>{let i=t.counter.getOffset();return(0,r.isByteInMediaSection)({position:i,mediaSections:e})},isByteInMediaSection:r.isByteInMediaSection,getCurrentMediaSection:r.getCurrentMediaSection,getMediaSectionAssertOnlyOne:()=>{if(1!==e.length)throw Error("Expected only one video section");return e[0]},mediaSections:e}}},362032,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSamplePositionBounds=void 0,r.getSamplePositionBounds=(e,t)=>{var r;let i=1/0,a=-1/0;for(let t of e){let e=Math.min(t.timestamp,t.decodingTimestamp),n=Math.max(t.timestamp,t.decodingTimestamp)+(null!=(r=t.duration)?r:0);e<i&&(i=e),n>a&&(a=n)}return{min:i/t,max:a/t}}},601249,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.findBestSegmentFromTfra=void 0,r.findBestSegmentFromTfra=({mfra:e,time:t,firstTrack:r,timescale:i})=>{let a=e.find(e=>"tfra-box"===e.type&&e.trackId===r.trackId);if(!a)return null;let n=null;for(let e of a.entries)e.time/i<=t&&(n=e);if(!n)return null;let o=a.entries.indexOf(n),s=o===a.entries.length-1?1/0:a.entries[o+1].moofOffset;return{start:n.moofOffset,end:s}}},125779,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSeekingByteFromFragmentedMp4=void 0;let i=e.r(66415),a=e.r(218294),n=e.r(880137),o=e.r(705631),s=e.r(391129),l=e.r(362032),u=e.r(601249),c=e.r(831097);r.getSeekingByteFromFragmentedMp4=async({info:e,time:t,logLevel:r,currentPosition:d,isoState:p,tracks:f,isLastChunkInPlaylist:h,structure:m,mp4HeaderSegment:g})=>{let v=f.find(e=>"video"===e.type),y=null!=v?v:f.find(e=>"audio"===e.type);if(!y)throw Error("no video and no audio tracks");let b=(0,c.getMoovBoxFromState)({structureState:m,isoState:p,mp4HeaderSegment:g,mayUsePrecomputed:!0});if(!b)throw Error("No moov atom found");let x=(0,c.getTrakBoxByTrackId)(b,y.trackId);if(!x)throw Error("No trak box found");let w=(0,c.getTkhdBox)(x);if(!w)throw Error("Expected tkhd box in trak box");let S=(0,n.areSamplesComplete)({moofBoxes:e.moofBoxes,tfraBoxes:e.tfraBoxes}),{samplePositions:k}=(0,o.collectSamplePositionsFromMoofBoxes)({moofBoxes:e.moofBoxes,tkhdBox:w,isComplete:S,trexBoxes:(0,c.getTrexBoxes)(b)});for(let a of(i.Log.trace(r,"Fragmented MP4 - Checking if we have seeking info for this time range"),k)){let{min:n,max:o}=(0,l.getSamplePositionBounds)(a.samples,y.originalTimescale);if(n<=t&&(a.isLastFragment||h||t<=o)){i.Log.trace(r,`Fragmented MP4 - Found that we have seeking info for this time range: ${n} <= ${t} <= ${o}`);let l=(0,s.findKeyframeBeforeTime)({samplePositions:a.samples,time:t,timescale:y.originalTimescale,logLevel:r,mediaSections:e.mediaSections,startInSeconds:y.startInSeconds});if(l)return{type:"do-seek",byte:l.offset,timeInSeconds:Math.min(l.decodingTimestamp,l.timestamp)/y.originalTimescale}}}let C=await (e.mfraAlreadyLoaded?Promise.resolve(e.mfraAlreadyLoaded):p.mfra.triggerLoad());if(C){let e=(0,u.findBestSegmentFromTfra)({mfra:C,time:t,firstTrack:y,timescale:y.originalTimescale});if(null!==e&&!(e.start<=d&&d<e.end))return i.Log.verbose(r,`Fragmented MP4 - Found based on mfra information that we should seek to: ${e.start} ${e.end}`),{type:"intermediary-seek",byte:e.start}}if(i.Log.trace(r,"Fragmented MP4 - No seeking info found for this time range."),"in-section"!==(0,a.isByteInMediaSection)({position:d,mediaSections:e.mediaSections}))return{type:"valid-but-must-wait"};i.Log.trace(r,"Fragmented MP4 - Inside the wrong video section, skipping to the end of the section");let E=(0,a.getCurrentMediaSection)({offset:d,mediaSections:e.mediaSections});if(!E)throw Error("No video section defined");return{type:"intermediary-seek",byte:E.start+E.size}}},527797,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSeekingByteFromIsoBaseMedia=void 0;let i=e.r(86711),a=e.r(66415),n=e.r(391129),o=e.r(842666),s=e.r(125779),l=e.r(831097);r.getSeekingByteFromIsoBaseMedia=({info:e,time:t,logLevel:r,currentPosition:u,isoState:c,m3uPlaylistContext:d,structure:p})=>{var f,h,m;let g=(0,i.getTracksFromIsoBaseMedia)({isoState:c,m3uPlaylistContext:d,structure:p,mayUsePrecomputed:!1});if(!(0,l.getMoovBoxFromState)({structureState:p,isoState:c,mayUsePrecomputed:!1,mp4HeaderSegment:null!=(f=null==d?void 0:d.mp4HeaderSegment)?f:null}))return a.Log.trace(r,"No moov box found, must wait"),Promise.resolve({type:"valid-but-must-wait"});if(e.moofBoxes.length>0)return(0,s.getSeekingByteFromFragmentedMp4)({info:e,time:t,logLevel:r,currentPosition:u,isoState:c,tracks:g,isLastChunkInPlaylist:null!=(h=null==d?void 0:d.isLastChunkInPlaylist)&&h,structure:p,mp4HeaderSegment:null!=(m=null==d?void 0:d.mp4HeaderSegment)?m:null});let v=(0,o.findTrackToSeek)(g,p);if(!v)return Promise.resolve({type:"valid-but-must-wait"});let{track:y,samplePositions:b}=v,x=(0,n.findKeyframeBeforeTime)({samplePositions:b,time:t,timescale:y.originalTimescale,logLevel:r,mediaSections:e.mediaSections,startInSeconds:y.startInSeconds});return x?Promise.resolve({type:"do-seek",byte:x.offset,timeInSeconds:Math.min(x.decodingTimestamp,x.timestamp)/y.originalTimescale}):Promise.resolve({type:"invalid"})}},206699,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSeekingByteForM3u8=r.clearM3uStateInPrepareForSeek=void 0;let i=e.r(66415);r.clearM3uStateInPrepareForSeek=({m3uState:e,logLevel:t})=>{for(let r of e.getSelectedPlaylists()){let a=e.getM3uStreamRun(r);a&&a.abort(),i.Log.trace(t,"Clearing M3U stream run for",r),e.setM3uStreamRun(r,null)}e.clearAllChunksProcessed(),e.sampleSorter.clearSamples()},r.getSeekingByteForM3u8=({time:e,currentPosition:t,m3uState:i,logLevel:a})=>{for(let t of((0,r.clearM3uStateInPrepareForSeek)({m3uState:i,logLevel:a}),i.getSelectedPlaylists()))i.setSeekToSecondsToProcess(t,{targetTime:e});return{type:"do-seek",byte:t,timeInSeconds:e}}},891850,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getApproximateByteFromBitrate=void 0;let i=e.r(381767),a=e.r(270866);r.getApproximateByteFromBitrate=({mp3BitrateInfo:e,timeInSeconds:t,mp3Info:r,mediaSection:n,contentLength:o})=>{if("variable"===e.type)return null;let s=(0,a.getSamplesPerMpegFrame)({layer:r.layer,mpegVersion:r.mpegVersion}),l=(0,i.getMpegFrameLength)({bitrateKbit:e.bitrateInKbit,padding:!1,samplesPerFrame:s,samplingFrequency:r.sampleRate,layer:r.layer}),u=Math.floor(t*r.sampleRate/s);return Math.min(Math.floor((o-n.start)/l)-1,u)*l+n.start}},284144,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getByteFromObservedSamples=void 0,r.getByteFromObservedSamples=({info:e,timeInSeconds:t})=>{let r;for(let i of e.audioSampleMap)if(!(i.timeInSeconds>t)&&(!(i.timeInSeconds+i.durationInSeconds<t)||e.lastSampleObserved)){if(!r){r=i;continue}r.timeInSeconds<i.timeInSeconds&&(r=i)}return r}},513996,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getTimeFromPosition=r.getSeekPointInBytes=r.parseXing=void 0;let i=[44100,48e3,32e3,99999],a=(e,t)=>((e[t]<<8|e[t+1])<<8|e[t+2])<<8|e[t+3];r.parseXing=e=>{let t,r,n,o,s=e[1]>>3&1,l=e[2]>>2&3,u=e[3]>>6&3,c=0;if(s?3!==u?c+=36:c+=21:3!==u?c+=21:c+=13,"Xing"!==new TextDecoder("utf8").decode(e.slice(c,c+4)))throw Error("Invalid Xing header");let d=i[l];0===s&&(d>>=1);let p=c+4,f=a(e,p);if(p+=4,1&f&&(t=a(e,p),p+=4),2&f&&(r=a(e,p),p+=4),4&f&&(n=e.slice(p,p+100),p+=100),8&f&&(o=a(e,p),p+=4),p>e.length)throw Error("xing header was parsed wrong: read beyond available data");return{sampleRate:d,numberOfFrames:null!=t?t:null,fileSize:null!=r?r:null,tableOfContents:n?Array.from(n.slice(0,100)):null,vbrScale:null!=o?o:null}},r.getSeekPointInBytes=({fileSize:e,percentBetween0And100:t,tableOfContents:r})=>{let i=Math.floor(t);i>99&&(i=99);let a=r[i];return Math.floor(1/256*(a+((i<99?r[i+1]:256)-a)*(t-i))*e)},r.getTimeFromPosition=({position:e,fileSize:t,tableOfContents:r,durationInSeconds:i})=>{let a=e/t*256,n=0;for(;n<99&&r[n+1]<=a;)n++;let o=r[n],s=n<99?r[n+1]:256;return(n+(a-o)/(s-o))/100*i}},75917,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSeekPointFromXing=void 0;let i=e.r(918820),a=e.r(513996),n=e.r(270866);r.getSeekPointFromXing=({timeInSeconds:e,xingData:t,mp3Info:r})=>{let o=(0,n.getSamplesPerMpegFrame)({layer:r.layer,mpegVersion:r.mpegVersion}),s=(0,i.getDurationFromMp3Xing)({xingData:t,samplesPerFrame:o}),l=Math.max(0,(e*t.sampleRate-o)/t.sampleRate);if(!t.fileSize||!t.tableOfContents)throw Error("Cannot seek of VBR MP3 file");return(0,a.getSeekPointInBytes)({fileSize:t.fileSize,percentBetween0And100:l/s*100,tableOfContents:t.tableOfContents})}},421731,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSeekingByteForMp3=void 0;let i=e.r(891850),a=e.r(284144),n=e.r(75917);r.getSeekingByteForMp3=({time:e,info:t})=>{var r;if(null===t.mp3BitrateInfo||null===t.mp3Info||null===t.mediaSection)return{type:"valid-but-must-wait"};let o=(0,i.getApproximateByteFromBitrate)({mp3BitrateInfo:t.mp3BitrateInfo,timeInSeconds:e,mp3Info:t.mp3Info,mediaSection:t.mediaSection,contentLength:t.contentLength}),s=(0,a.getByteFromObservedSamples)({info:t,timeInSeconds:e}),l="variable"===t.mp3BitrateInfo.type?(0,n.getSeekPointFromXing)({mp3Info:t.mp3Info,timeInSeconds:e,xingData:t.mp3BitrateInfo.xingData}):null,u=[o,null!=(r=null==s?void 0:s.offset)?r:null,l].filter(e=>null!==e);if(0===u.length)return{type:"valid-but-must-wait"};let c=Math.max(...u),d=c===(null==s?void 0:s.offset)?s.timeInSeconds:e;return{type:"do-seek",byte:c,timeInSeconds:d}}},303312,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.findLastKeyframe=function({keyframes:e,timeInSeconds:t}){let r=null;for(let i of e){if(i.presentationTimeInSeconds>t&&i.decodingTimeInSeconds>t)break;(null===r||i.presentationTimeInSeconds>r.presentationTimeInSeconds)&&(r=i)}return r}},377743,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSeekingByteForRiff=void 0;let i=e.r(303312);r.getSeekingByteForRiff=async({info:e,time:t,riffState:r,avcState:a})=>{let n=await (e.hasIndex?r.lazyIdx1.waitForLoaded():Promise.resolve(null));if(null===n){let n=(0,i.findLastKeyframe)({keyframes:e.observedKeyframes,timeInSeconds:t});return null===n?{type:"valid-but-must-wait"}:(r.sampleCounter.setSamplesFromSeek(n.sampleCounts),r.queuedBFrames.clear(),a.clear(),{type:"do-seek",byte:n.positionInBytes,timeInSeconds:Math.min(n.decodingTimeInSeconds,n.presentationTimeInSeconds)})}if(null===n.videoTrackIndex)throw Error("videoTrackIndex is null");if(null===e.samplesPerSecond)throw Error("samplesPerSecond is null");let o=Math.floor(t*e.samplesPerSecond),s=null;for(let e of n.entries)!(e.sampleCounts[n.videoTrackIndex]>o)&&(s&&e.sampleCounts[n.videoTrackIndex]<s.sampleCounts[n.videoTrackIndex]||(s=e));if(!s)throw Error("No best entry");if(null===e.moviOffset)throw Error("moviOffset is null");return r.sampleCounter.setSamplesFromSeek(s.sampleCounts),r.queuedBFrames.clear(),a.clear(),{type:"do-seek",byte:s.offset+e.moviOffset-4,timeInSeconds:s.sampleCounts[n.videoTrackIndex]/e.samplesPerSecond}}},560247,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.convertAudioOrVideoSampleToWebCodecsTimestamps=void 0;let i=e.r(452893),a=e=>e%1<1e-7?Math.floor(e):e%1>.9999999?Math.ceil(e):e;r.convertAudioOrVideoSampleToWebCodecsTimestamps=({sample:e,timescale:t})=>{if(t===i.WEBCODECS_TIMESCALE)return e;let{decodingTimestamp:r,timestamp:n}=e;return{decodingTimestamp:a(r*(i.WEBCODECS_TIMESCALE/t)),timestamp:a(n*(i.WEBCODECS_TIMESCALE/t)),duration:void 0===e.duration?void 0:a(e.duration*(i.WEBCODECS_TIMESCALE/t)),data:e.data,type:e.type,offset:e.offset,..."avc"in e?{avc:e.avc}:{}}}},163732,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getVideoColorFromSps=r.getSampleAspectRatioFromSps=r.getDimensionsFromSps=void 0;let i=e.r(294190);r.getDimensionsFromSps=e=>{var t,r,i,a;let n=e.pic_height_in_map_units_minus1,o=e.pic_width_in_mbs_minus1;return{height:(n+1)*16-(null!=(t=e.frame_crop_bottom_offset)?t:0)*2-(null!=(r=e.frame_crop_top_offset)?r:0)*2,width:(o+1)*16-(null!=(i=e.frame_crop_right_offset)?i:0)*2-(null!=(a=e.frame_crop_left_offset)?a:0)*2}},r.getSampleAspectRatioFromSps=e=>{var t;return(null==(t=e.vui_parameters)?void 0:t.sar_height)&&e.vui_parameters.sar_width?{width:e.vui_parameters.sar_width,height:e.vui_parameters.sar_height}:{width:1,height:1}},r.getVideoColorFromSps=e=>{var t,r,a,n,o;let s=null==(t=e.vui_parameters)?void 0:t.matrix_coefficients,l=null==(r=e.vui_parameters)?void 0:r.transfer_characteristics,u=null==(a=e.vui_parameters)?void 0:a.colour_primaries;return{matrix:s?(0,i.getMatrixCoefficientsFromIndex)(s):null,transfer:l?(0,i.getTransferCharacteristicsFromIndex)(l):null,primaries:u?(0,i.getPrimariesFromIndex)(u):null,fullRange:null!=(o=null==(n=e.vui_parameters)?void 0:n.video_full_range_flag)?o:null}}},869685,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getKeyFrameOrDeltaFromAvcInfo=void 0,r.getKeyFrameOrDeltaFromAvcInfo=e=>{let t=e.find(e=>"keyframe"===e.type||"delta-frame"===e.type);if(!t)throw Error("expected avc to contain info about key or delta");return"keyframe"===t.type?"key":t.isBidirectionalFrame?"bidirectional":"delta"}},895540,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSpsAndPps=void 0,r.getSpsAndPps=e=>{let t=e.find(e=>"avc-profile"===e.type),r=e.find(e=>"avc-pps"===e.type);if(!t||!r)throw Error("Expected avcProfile and ppsProfile");return{pps:r,sps:t}}},576210,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.handleAvcPacket=r.MPEG_TIMESCALE=void 0;let i=e.r(560247),a=e.r(882757),n=e.r(452893),o=e.r(951719),s=e.r(567608),l=e.r(163732),u=e.r(869685),c=e.r(603063),d=e.r(895540),p=e.r(852834);r.MPEG_TIMESCALE=9e4;let f=async({streamBuffer:e,programId:t,offset:f,sampleCallbacks:h,logLevel:m,onVideoTrack:g,transportStream:v,makeSamplesStartAtZero:y,avcState:b})=>{var x,w;let S=(0,c.parseAvc)(e.getBuffer(),b);if(!h.tracks.getTracks().find(e=>e.trackId===t)){let i=(0,d.getSpsAndPps)(S),u=(0,l.getDimensionsFromSps)(i.sps.spsData),c=(0,l.getSampleAspectRatioFromSps)(i.sps.spsData),f=y?Math.min(e.pesHeader.pts,null!=(x=e.pesHeader.dts)?x:1/0):0;v.startOffset.setOffset({trackId:t,newOffset:f});let b=(0,s.createSpsPpsData)(i),w=(0,l.getVideoColorFromSps)(i.sps.spsData),k={m3uStreamFormat:null,rotation:0,trackId:t,type:"video",originalTimescale:r.MPEG_TIMESCALE,codec:(0,o.getCodecStringFromSpsAndPps)(i.sps),codecData:{type:"avc-sps-pps",data:b},fps:null,codedWidth:u.width,codedHeight:u.height,height:u.height,width:u.width,displayAspectWidth:u.width,displayAspectHeight:u.height,codecEnum:"h264",description:void 0,sampleAspectRatio:{denominator:c.height,numerator:c.width},colorSpace:(0,p.mediaParserAdvancedColorToWebCodecsColor)(w),advancedColor:w,startInSeconds:0,timescale:n.WEBCODECS_TIMESCALE,trackMediaTimeOffsetInTrackTimescale:0};await (0,a.registerVideoTrack)({track:k,container:"transport-stream",logLevel:m,onVideoTrack:g,registerVideoSampleCallback:h.registerVideoSampleCallback,tracks:h.tracks})}let k=(0,u.getKeyFrameOrDeltaFromAvcInfo)(S),C={decodingTimestamp:(null!=(w=e.pesHeader.dts)?w:e.pesHeader.pts)-v.startOffset.getOffset(t),timestamp:e.pesHeader.pts-v.startOffset.getOffset(t),duration:void 0,data:e.getBuffer(),type:"bidirectional"===k?"delta":k,offset:f};"key"===k&&v.observedPesHeaders.markPtsAsKeyframe(e.pesHeader.pts);let E=(0,i.convertAudioOrVideoSampleToWebCodecsTimestamps)({sample:C,timescale:r.MPEG_TIMESCALE});await h.onVideoSample({videoSample:E,trackId:t}),v.lastEmittedSample.setLastEmittedSample(C)};r.handleAvcPacket=f},455859,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSeekingByteFromWav=r.WAVE_SAMPLES_PER_SECOND=void 0,r.WAVE_SAMPLES_PER_SECOND=25,r.getSeekingByteFromWav=({info:e,time:t})=>{let i=e.sampleRate*e.blockAlign,a=Math.floor(Math.min(t,e.mediaSection.size/i-1e-7)*r.WAVE_SAMPLES_PER_SECOND)/r.WAVE_SAMPLES_PER_SECOND;return Promise.resolve({type:"do-seek",byte:i*a+e.mediaSection.start,timeInSeconds:a})}},824510,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSeekingByteFromMatroska=void 0;let i=e.r(66415),a=(e,t)=>e/t.timescale*1e3;r.getSeekingByteFromMatroska=async({time:e,webmState:t,info:r,logLevel:n,mediaSection:o})=>{var s,l,u,c,d;if(!r.track)return i.Log.trace(n,"No video track found, cannot seek yet"),{type:"valid-but-must-wait"};let p=null!=(s=r.loadedCues)?s:await t.cues.getLoadedCues(),f=(({keyframes:e,time:t})=>{let r;for(let i of e)i.decodingTimeInSeconds<t&&(!r||i.decodingTimeInSeconds>r.decodingTimeInSeconds)&&(r=i);return null!=r?r:null})({keyframes:r.keyframes,time:e}),h=(({cuesResponse:e,time:t,info:r,logLevel:n})=>{if(!e)return i.Log.trace(n,"Has no Matroska cues at the moment, cannot use them"),null;let{cues:o,segmentOffset:s}=e;i.Log.trace(n,"Has Matroska cues. Will use them to perform a seek.");let l=(({cues:e,time:t,track:r})=>{let i;for(let n of e){let e=a(n.timeInTimescale,r);e<t&&(!i||e>a(i.timeInTimescale,r))&&(i=n)}return i})({cues:o,time:t,track:r.track});return l?{byte:l.clusterPositionInSegment+s,timeInSeconds:a(l.timeInTimescale,r.track)}:null})({cuesResponse:p,time:e,info:r,logLevel:n}),m=null!=(u=null==(l=t.getFirstCluster())?void 0:l.start)?u:null,g=[null!=(c=null==h?void 0:h.byte)?c:null,null!=(d=null==f?void 0:f.positionInBytes)?d:null,m].filter(e=>null!==e),v=0===g.length?null:Math.max(...g);if(null===v)return{type:"invalid"};o.addMediaSection({start:v,size:1});let y=(()=>{if(v===(null==f?void 0:f.positionInBytes))return Math.min(f.decodingTimeInSeconds,f.presentationTimeInSeconds);if(v===(null==h?void 0:h.byte))return h.timeInSeconds;if(v===m)return 0;throw Error("Should not happen")})();return{type:"do-seek",byte:v,timeInSeconds:y}}},611397,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getLastKeyFrameBeforeTimeInSeconds=r.makeObservedPesHeader=void 0;let i=e.r(576210);r.makeObservedPesHeader=()=>{let e=[],t=[],r=t=>{e.find(e=>e.offset===t.offset)||e.push(t)},i=e=>{t.push(e)};return{pesHeaders:e,addPesHeader:r,markPtsAsKeyframe:i,getPesKeyframeHeaders:()=>e.filter(e=>t.includes(e.pts)),setPesKeyframesFromSeekingHints:e=>{for(let t of e.observedPesHeaders)r(t),i(t.pts)}}},r.getLastKeyFrameBeforeTimeInSeconds=({observedPesHeaders:e,timeInSeconds:t,ptsStartOffset:r})=>e.findLast(e=>(e.pts-r)/i.MPEG_TIMESCALE<=t)},544778,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSeekingByte=void 0;let i=e.r(751442),a=e.r(637707),n=e.r(527797),o=e.r(206699),s=e.r(421731),l=e.r(377743),u=e.r(576210),c=e.r(455859),d=e.r(824510),p=e.r(611397);r.getSeekingByte=({info:e,time:t,logLevel:r,currentPosition:f,isoState:h,transportStream:m,webmState:g,mediaSection:v,m3uPlaylistContext:y,structure:b,riffState:x,m3uState:w,avcState:S})=>{var k;if("iso-base-media-seeking-hints"===e.type)return(0,n.getSeekingByteFromIsoBaseMedia)({info:e,time:t,logLevel:r,currentPosition:f,isoState:h,structure:b,m3uPlaylistContext:y});if("wav-seeking-hints"===e.type)return(0,c.getSeekingByteFromWav)({info:e,time:t});if("webm-seeking-hints"===e.type)return(0,d.getSeekingByteFromMatroska)({info:e,time:t,webmState:g,logLevel:r,mediaSection:v});if("flac-seeking-hints"===e.type){let r=(0,a.getSeekingByteForFlac)({seekingHints:e,time:t});return r?Promise.resolve({type:"do-seek",byte:r.offset,timeInSeconds:r.timeInSeconds}):Promise.resolve({type:"valid-but-must-wait"})}if("transport-stream-seeking-hints"===e.type){let r=(0,p.getLastKeyFrameBeforeTimeInSeconds)({observedPesHeaders:e.observedPesHeaders,timeInSeconds:t,ptsStartOffset:e.ptsStartOffset});if(!r)return m.resetBeforeSeek(),Promise.resolve({type:"do-seek",byte:0,timeInSeconds:0});let i=r.offset;return m.resetBeforeSeek(),Promise.resolve({type:"do-seek",byte:i,timeInSeconds:Math.min(r.pts,null!=(k=r.dts)?k:1/0)/u.MPEG_TIMESCALE})}if("riff-seeking-hints"===e.type)return(0,l.getSeekingByteForRiff)({info:e,time:t,riffState:x,avcState:S});if("mp3-seeking-hints"===e.type)return Promise.resolve((0,s.getSeekingByteForMp3)({info:e,time:t}));if("aac-seeking-hints"===e.type)return Promise.resolve((0,i.getSeekingByteForAac)({time:t,seekingHints:e}));if("m3u8-seeking-hints"===e.type)return Promise.resolve((0,o.getSeekingByteForM3u8)({time:t,currentPosition:f,m3uState:w,logLevel:r}));throw Error(`Unknown seeking info type: ${e}`)}},759046,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setSeekingHintsForAac=r.getSeekingHintsForAac=void 0,r.getSeekingHintsForAac=({aacState:e,samplesObserved:t})=>({type:"aac-seeking-hints",audioSampleMap:e.audioSamples.getSamples(),lastSampleObserved:t.getLastSampleObserved()}),r.setSeekingHintsForAac=()=>{}},21240,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setSeekingHintsForFlac=r.getSeekingHintsForFlac=void 0,r.getSeekingHintsForFlac=({flacState:e,samplesObserved:t})=>{var r;return{type:"flac-seeking-hints",audioSampleMap:e.audioSamples.getSamples(),blockingBitStrategy:null!=(r=e.getBlockingBitStrategy())?r:null,lastSampleObserved:t.getLastSampleObserved()}},r.setSeekingHintsForFlac=({hints:e,state:t})=>{null!==e.blockingBitStrategy&&t.flac.setBlockingBitStrategy(e.blockingBitStrategy),t.flac.audioSamples.setFromSeekingHints(e.audioSampleMap)}},435158,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setSeekingHintsForMp4=r.getSeekingHintsFromMp4=void 0;let i=e.r(475509),a=e.r(862849),n=e.r(831097);r.getSeekingHintsFromMp4=({structureState:e,isoState:t,mp4HeaderSegment:r,mediaSectionState:o})=>{let s=e.getIsoStructure(),l=(0,n.getMoovBoxFromState)({isoState:t,mp4HeaderSegment:r,structureState:e,mayUsePrecomputed:!0}),u=(0,i.deduplicateMoofBoxesByOffset)([...t.moof.getMoofBoxes(),...(0,n.getMoofBoxes)(s.boxes)]),c=(0,a.deduplicateTfraBoxesByOffset)([...t.tfra.getTfraBoxes(),...(0,n.getTfraBoxes)(s.boxes)]);return l?{type:"iso-base-media-seeking-hints",moovBox:l,moofBoxes:u,tfraBoxes:c,mediaSections:o.getMediaSections(),mfraAlreadyLoaded:t.mfra.getIfAlreadyLoaded()}:null},r.setSeekingHintsForMp4=({})=>{}},289223,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSeekingHintsForM3u=void 0,r.getSeekingHintsForM3u=()=>({type:"m3u8-seeking-hints"})},51195,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setSeekingHintsForMp3=r.getSeekingHintsForMp3=void 0,r.getSeekingHintsForMp3=({mp3State:e,samplesObserved:t,mediaSectionState:r,contentLength:i})=>{var a;return{type:"mp3-seeking-hints",audioSampleMap:e.audioSamples.getSamples(),lastSampleObserved:t.getLastSampleObserved(),mp3BitrateInfo:e.getMp3BitrateInfo(),mp3Info:e.getMp3Info(),mediaSection:null!=(a=r.getMediaSections()[0])?a:null,contentLength:i}},r.setSeekingHintsForMp3=({hints:e,state:t})=>{t.mp3.audioSamples.setFromSeekingHints(e.audioSampleMap)}},277652,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.riffHasIndex=void 0,r.riffHasIndex=e=>{var t,r,i;return null!=(i=null==(r=null==(t=e.boxes.find(e=>"list-box"===e.type&&"hdrl"===e.listType))?void 0:t.children.find(e=>"avih-box"===e.type))?void 0:r.hasIndex)&&i}},214849,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setSeekingHintsForRiff=r.getSeekingHintsForRiff=void 0;let i=e.r(277652),a=e.r(248546);r.getSeekingHintsForRiff=({structureState:e,riffState:t,mediaSectionState:r})=>{var n,o;let s=e.getRiffStructure(),l=(0,a.getStrlBoxes)(s),u=null;for(let e of l){let t=(0,a.getStrhBox)(e.children);if(!t)throw Error("No strh box");if("strf-box-video"===t.strf.type){u=t.rate/t.scale;break}}return{type:"riff-seeking-hints",hasIndex:(0,i.riffHasIndex)(s),idx1Entries:t.lazyIdx1.getIfAlreadyLoaded(),samplesPerSecond:u,moviOffset:null!=(o=null==(n=r.getMediaSections()[0])?void 0:n.start)?o:null,observedKeyframes:t.sampleCounter.riffKeys.getKeyframes()}},r.setSeekingHintsForRiff=({hints:e,state:t})=>{t.riff.lazyIdx1.setFromSeekingHints(e),t.riff.sampleCounter.riffKeys.setFromSeekingHints(e.observedKeyframes)}},658370,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setSeekingHintsForTransportStream=r.getSeekingHintsFromTransportStream=void 0,r.getSeekingHintsFromTransportStream=(e,t)=>{let r=t.getTracks().find(e=>"video"===e.type);return r?{type:"transport-stream-seeking-hints",observedPesHeaders:e.observedPesHeaders.getPesKeyframeHeaders(),ptsStartOffset:e.startOffset.getOffset(r.trackId),firstVideoTrackId:r.trackId}:null},r.setSeekingHintsForTransportStream=({hints:e,state:t})=>{t.transportStream.observedPesHeaders.setPesKeyframesFromSeekingHints(e),t.transportStream.startOffset.setOffset({trackId:e.firstVideoTrackId,newOffset:e.ptsStartOffset})}},911737,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setSeekingHintsForWav=r.getSeekingHintsFromWav=void 0,r.getSeekingHintsFromWav=({structure:e,mediaSectionState:t})=>{let r=e.boxes.find(e=>"wav-fmt"===e.type);if(!r)return null;let i=t.getMediaSections();return 1!==i.length?null:{type:"wav-seeking-hints",sampleRate:r.sampleRate,blockAlign:r.blockAlign,mediaSection:i[0]}},r.setSeekingHintsForWav=({hints:e,state:t})=>{t.mediaSection.addMediaSection(e.mediaSection)}},802060,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setSeekingHintsForWebm=r.getSeekingHintsFromMatroska=void 0,r.getSeekingHintsFromMatroska=(e,t,r)=>{let i=e.getTracks().find(e=>"video"===e.type),a=t.getKeyframes(),n=r.cues.getIfAlreadyLoaded();return{type:"webm-seeking-hints",track:i?{timescale:i.originalTimescale,trackId:i.trackId}:null,keyframes:a,loadedCues:n,timestampMap:r.getTimeStampMapForSeekingHints()}},r.setSeekingHintsForWebm=({hints:e,state:t})=>{t.webm.cues.setFromSeekingHints(e),t.keyframes.setFromSeekingHints(e.keyframes),t.webm.setTimeStampMapForSeekingHints(e.timestampMap)}},842258,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSeekingHints=void 0;let i=e.r(759046),a=e.r(21240),n=e.r(435158),o=e.r(289223),s=e.r(51195),l=e.r(214849),u=e.r(658370),c=e.r(911737),d=e.r(802060);r.getSeekingHints=({structureState:e,m3uPlaylistContext:t,mediaSectionState:r,isoState:p,transportStream:f,tracksState:h,keyframesState:m,webmState:g,flacState:v,samplesObserved:y,riffState:b,mp3State:x,contentLength:w,aacState:S})=>{var k;let C=e.getStructureOrNull();if(!C)return null;if("iso-base-media"===C.type)return(0,n.getSeekingHintsFromMp4)({structureState:e,isoState:p,mp4HeaderSegment:null!=(k=null==t?void 0:t.mp4HeaderSegment)?k:null,mediaSectionState:r});if("wav"===C.type)return(0,c.getSeekingHintsFromWav)({structure:C,mediaSectionState:r});if("matroska"===C.type)return(0,d.getSeekingHintsFromMatroska)(h,m,g);if("transport-stream"===C.type)return(0,u.getSeekingHintsFromTransportStream)(f,h);if("flac"===C.type)return(0,a.getSeekingHintsForFlac)({flacState:v,samplesObserved:y});if("riff"===C.type)return(0,l.getSeekingHintsForRiff)({structureState:e,riffState:b,mediaSectionState:r});if("mp3"===C.type)return(0,s.getSeekingHintsForMp3)({mp3State:x,samplesObserved:y,mediaSectionState:r,contentLength:w});if("aac"===C.type)return(0,i.getSeekingHintsForAac)({aacState:S,samplesObserved:y});if("m3u"===C.type)return(0,o.getSeekingHintsForM3u)();throw Error(`Seeking is not supported for this format: ${C}`)}},678943,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.seekBackwards=void 0;let i=e.r(66415);r.seekBackwards=async({iterator:e,seekTo:t,readerInterface:r,src:a,controller:n,logLevel:o,currentReader:s,prefetchCache:l})=>{let u=e.counter.getDiscardedOffset();if(e.counter.getOffset()-u<=t){i.Log.verbose(o,`Seeking back to ${t}`),e.skipTo(t);return}let c=Date.now();i.Log.verbose(o,`Seeking in video from position ${e.counter.getOffset()} -> ${t}. Re-reading because this portion is not available.`),await s.getCurrent().abort();let{reader:d}=await r.read({src:a,range:t,controller:n,logLevel:o,prefetchCache:l});e.replaceData(new Uint8Array([]),t),i.Log.verbose(o,`Re-reading took ${Date.now()-c}ms. New position: ${e.counter.getOffset()}`),s.setCurrent(d)}},434642,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.needsToIterateOverEverySample=r.needsToIterateOverSamples=r.fieldsNeedSamplesMap=void 0,r.fieldsNeedSamplesMap={slowDurationInSeconds:!0,slowFps:!0,slowKeyframes:!0,slowNumberOfFrames:!0,audioCodec:!1,container:!1,dimensions:!1,durationInSeconds:!1,fps:!1,internalStats:!1,isHdr:!1,name:!1,rotation:!1,size:!1,slowStructure:!1,tracks:!1,unrotatedDimensions:!1,videoCodec:!1,metadata:!1,location:!1,mimeType:!1,keyframes:!1,images:!1,numberOfAudioChannels:!1,sampleRate:!1,slowAudioBitrate:!0,slowVideoBitrate:!0,m3uStreams:!1},r.needsToIterateOverSamples=({fields:e,emittedFields:t})=>Object.keys(null!=e?e:{}).filter(t=>e[t]).some(e=>r.fieldsNeedSamplesMap[e]&&!t[e]);let i={...r.fieldsNeedSamplesMap,slowDurationInSeconds:!1};r.needsToIterateOverEverySample=({fields:e,emittedFields:t})=>Object.keys(null!=e?e:{}).filter(t=>e[t]).some(e=>i[e]&&!t[e])},683081,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.disallowForwardSeekIfSamplesAreNeeded=void 0;let i=e.r(434642);r.disallowForwardSeekIfSamplesAreNeeded=({seekTo:e,previousPosition:t,fields:r})=>{let a=Object.entries(r).filter(([,e])=>e).map(([e])=>e).filter(e=>i.fieldsNeedSamplesMap[e]);if(a.length>0)throw Error(`Forward seeking is not allowed when the following fields are requested from parseMedia(): ${a.join(", ")}. Seek was from 0x${t.toString(16)} to 0x${e.toString(16)}. Either don't seek forward, or don't request these fields.`)}},372092,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.seekForward=void 0;let i=e.r(683081),a=e.r(66415);r.seekForward=async({seekTo:e,userInitiated:t,iterator:r,fields:n,logLevel:o,currentReader:s,readerInterface:l,src:u,controller:c,discardReadBytes:d,prefetchCache:p})=>{t&&(0,i.disallowForwardSeekIfSamplesAreNeeded)({fields:n,seekTo:e,previousPosition:r.counter.getOffset()});let f=r.bytesRemaining()>=e-r.counter.getOffset();if(a.Log.verbose(o,`Performing seek from ${r.counter.getOffset()} to ${e}`),f){r.skipTo(e),a.Log.verbose(o,"Already read ahead enough, skipping forward");return}let h=Date.now();a.Log.verbose(o,`Skipping over video data from position ${r.counter.getOffset()} -> ${e}. Re-reading because this portion is not available`),await s.getCurrent().abort();let{reader:m}=await l.read({src:u,range:e,controller:c,logLevel:o,prefetchCache:p});r.skipTo(e),await d(!0),a.Log.verbose(o,`Re-reading took ${Date.now()-h}ms. New position: ${r.counter.getOffset()}`),s.setCurrent(m)}},665572,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.performSeek=void 0;let i=e.r(66415),a=e.r(678943),n=e.r(372092),o=e.r(218294);r.performSeek=async({seekTo:e,userInitiated:t,controller:r,mediaSection:s,iterator:l,seekInfiniteLoop:u,logLevel:c,mode:d,contentLength:p,currentReader:f,readerInterface:h,src:m,discardReadBytes:g,fields:v,prefetchCache:y,isoState:b})=>{if("in-section"!==(0,o.isByteInMediaSection)({position:e,mediaSections:s.getMediaSections()})&&t){let t=s.getMediaSections().map(e=>`start: ${e.start}, end: ${e.size+e.start}`);throw Error(`Cannot seek to a byte that is not in the video section. Seeking to: ${e}, sections: ${t.join(" | ")}`)}if(u.registerSeek(e),e<=l.counter.getOffset()&&"download"===d)throw Error(`Seeking backwards is not supported in parseAndDownloadMedia() mode. Current position: ${l.counter.getOffset()}, seekTo: ${e}`);if(e>p)throw Error(`Cannot seek beyond the end of the file: ${e} > ${p}`);if("download"===d){i.Log.verbose(c,`Skipping over video data from position ${l.counter.getOffset()} -> ${e}. Fetching but not reading all the data inbetween because in download mode`),l.discard(e-l.counter.getOffset());return}if(await r._internals.checkForAbortAndPause(),l.counter.getOffset()===e){i.Log.verbose(c,"Already at the desired position, seeking done"),r._internals.performedSeeksSignal.markLastSeekAsUserInitiated();return}let x=e>l.counter.getOffset();r._internals.performedSeeksSignal.recordSeek({from:l.counter.getOffset(),to:e,type:t?"user-initiated":"internal"}),x?await (0,n.seekForward)({seekTo:e,userInitiated:t,iterator:l,fields:v,logLevel:c,currentReader:f,readerInterface:h,src:m,controller:r,discardReadBytes:g,prefetchCache:y}):await (0,a.seekBackwards)({controller:r,seekTo:e,iterator:l,logLevel:c,currentReader:f,readerInterface:h,src:m,prefetchCache:y}),t&&b.flatSamples.updateAfterSeek(e),await r._internals.checkForAbortAndPause()}},315574,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.workOnSeekRequest=r.getWorkOnSeekRequestOptions=r.turnSeekIntoByte=void 0;let i=e.r(544778),a=e.r(842258),n=e.r(66415),o=e.r(665572);r.turnSeekIntoByte=async({seek:e,mediaSectionState:t,logLevel:r,iterator:o,structureState:s,m3uPlaylistContext:l,isoState:u,transportStream:c,tracksState:d,webmState:p,keyframes:f,flacState:h,samplesObserved:m,riffState:g,mp3State:v,contentLength:y,aacState:b,m3uState:x,avcState:w})=>{if(0===t.getMediaSections().length)return n.Log.trace(r,"No media sections defined, cannot seek yet"),{type:"valid-but-must-wait"};if(e<0)throw Error(`Cannot seek to a negative time: ${JSON.stringify(e)}`);let S=(0,a.getSeekingHints)({riffState:g,samplesObserved:m,structureState:s,mediaSectionState:t,isoState:u,transportStream:c,tracksState:d,keyframesState:f,webmState:p,flacState:h,mp3State:v,contentLength:y,aacState:b,m3uPlaylistContext:l});return S?await (0,i.getSeekingByte)({info:S,time:e,logLevel:r,currentPosition:o.counter.getOffset(),isoState:u,transportStream:c,webmState:p,mediaSection:t,m3uPlaylistContext:l,structure:s,riffState:g,m3uState:x,avcState:w}):(n.Log.trace(r,"No seeking info, cannot seek yet"),{type:"valid-but-must-wait"})},r.getWorkOnSeekRequestOptions=e=>({logLevel:e.logLevel,controller:e.controller,isoState:e.iso,iterator:e.iterator,structureState:e.structure,src:e.src,contentLength:e.contentLength,readerInterface:e.readerInterface,mediaSection:e.mediaSection,m3uPlaylistContext:e.m3uPlaylistContext,mode:e.mode,seekInfiniteLoop:e.seekInfiniteLoop,currentReader:e.currentReader,discardReadBytes:e.discardReadBytes,fields:e.fields,transportStream:e.transportStream,tracksState:e.callbacks.tracks,webmState:e.webm,keyframes:e.keyframes,flacState:e.flac,samplesObserved:e.samplesObserved,riffState:e.riff,mp3State:e.mp3,aacState:e.aac,m3uState:e.m3u,prefetchCache:e.prefetchCache,avcState:e.avc});let s=async e=>{let{logLevel:t,controller:i,mediaSection:a,m3uPlaylistContext:s,isoState:l,iterator:u,structureState:c,src:d,contentLength:p,readerInterface:f,mode:h,seekInfiniteLoop:m,currentReader:g,discardReadBytes:v,fields:y,transportStream:b,tracksState:x,webmState:w,keyframes:S,flacState:k,samplesObserved:C,riffState:E,mp3State:_,aacState:T,prefetchCache:P,m3uState:I,avcState:A}=e,O=i._internals.seekSignal.getSeek();if(null===O)return;n.Log.trace(t,`Has seek request for ${d}: ${JSON.stringify(O)}`);let M=await (0,r.turnSeekIntoByte)({seek:O,mediaSectionState:a,logLevel:t,iterator:u,structureState:c,m3uPlaylistContext:s,isoState:l,transportStream:b,tracksState:x,webmState:w,keyframes:S,flacState:k,samplesObserved:C,riffState:E,mp3State:_,contentLength:p,aacState:T,m3uState:I,avcState:A});if(n.Log.trace(t,`Seek action: ${JSON.stringify(M)}`),"intermediary-seek"===M.type)return void await (0,o.performSeek)({seekTo:M.byte,userInitiated:!1,controller:i,mediaSection:a,iterator:u,logLevel:t,mode:h,contentLength:p,seekInfiniteLoop:m,currentReader:g,readerInterface:f,src:d,discardReadBytes:v,fields:y,prefetchCache:P,isoState:l});if("do-seek"===M.type){await (0,o.performSeek)({seekTo:M.byte,userInitiated:!0,controller:i,mediaSection:a,iterator:u,logLevel:t,mode:h,contentLength:p,seekInfiniteLoop:m,currentReader:g,readerInterface:f,src:d,discardReadBytes:v,fields:y,prefetchCache:P,isoState:l});let{hasChanged:s}=i._internals.seekSignal.clearSeekIfStillSame(O);s&&(n.Log.trace(t,"Seek request has changed while seeking, seeking again"),await (0,r.workOnSeekRequest)(e));return}if("invalid"===M.type)throw Error(`The seek request ${JSON.stringify(O)} cannot be processed`);"valid-but-must-wait"===M.type&&n.Log.trace(t,"Seek request is valid but cannot be processed yet")};r.workOnSeekRequest=s},655828,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.emitAvailableInfo=void 0;let i=e.r(345458),a=e.r(540360),n=e.r(359696),o=e.r(123378),s=e.r(853033),l=e.r(758091),u=e.r(880263),c=e.r(889152),d=e.r(337274),p=e.r(716594),f=e.r(710965),h=e.r(86711),m=e.r(788128),g=e.r(583681),v=e.r(315574);r.emitAvailableInfo=async({hasInfo:e,state:t})=>{var r,y,b,x,w,S,k,C,E,_,T,P,I,A,O,M,F,R,D,j,L,B,N,$,z,U,V,H,W,q,G;let Z=Object.keys(e),{emittedFields:K,fieldsInReturnValue:Q,returnValue:X,name:J,callbackFunctions:Y}=t;for(let ee of Z){if(await (0,v.workOnSeekRequest)((0,v.getWorkOnSeekRequestOptions)(t)),"slowStructure"===ee){e.slowStructure&&!K.slowStructure&&(await (null==(r=Y.onSlowStructure)?void 0:r.call(Y,t.structure.getStructure())),Q.slowStructure&&(X.slowStructure=t.structure.getStructure()),K.slowStructure=!0);continue}if("durationInSeconds"===ee){if(e.durationInSeconds&&!K.durationInSeconds){let e=(0,s.getDuration)(t);await (null==(y=Y.onDurationInSeconds)?void 0:y.call(Y,e)),Q.durationInSeconds&&(X.durationInSeconds=e),K.durationInSeconds=!0}continue}if("slowDurationInSeconds"===ee){if(e.slowDurationInSeconds&&!K.slowDurationInSeconds){let e=null!=(b=(0,s.getDuration)(t))?b:t.samplesObserved.getSlowDurationInSeconds();await (null==(x=Y.onSlowDurationInSeconds)?void 0:x.call(Y,e)),Q.slowDurationInSeconds&&(X.slowDurationInSeconds=e),K.slowDurationInSeconds=!0}continue}if("fps"===ee){if(e.fps){if(!K.fps){let e=(0,l.getFps)(t);await (null==(w=Y.onFps)?void 0:w.call(Y,e)),Q.fps&&(X.fps=e),K.fps=!0}if(!K.slowFps){let e=(0,l.getFps)(t);e&&(await (null==(S=Y.onSlowFps)?void 0:S.call(Y,e)),Q.slowFps&&(X.slowFps=e),K.slowFps=!0)}}continue}if("slowFps"===ee){if(e.slowFps&&!K.slowFps){let e=null!=(k=(0,l.getFps)(t))?k:t.samplesObserved.getFps();await (null==(C=Y.onSlowFps)?void 0:C.call(Y,e)),Q.slowFps&&(X.slowFps=e),K.slowFps=!0}continue}if("dimensions"===ee){if(e.dimensions&&!K.dimensions){let e=(0,o.getDimensions)(t),r=null===e?null:{height:e.height,width:e.width};await (null==(E=Y.onDimensions)?void 0:E.call(Y,r)),Q.dimensions&&(X.dimensions=r),K.dimensions=!0}continue}if("unrotatedDimensions"===ee){if(e.unrotatedDimensions&&!K.unrotatedDimensions){let e=(0,o.getDimensions)(t),r=null===e?null:{height:e.unrotatedHeight,width:e.unrotatedWidth};await (null==(_=Y.onUnrotatedDimensions)?void 0:_.call(Y,r)),Q.unrotatedDimensions&&(X.unrotatedDimensions=r),K.unrotatedDimensions=!0}continue}if("rotation"===ee){if(e.rotation&&!K.rotation){let e=(0,o.getDimensions)(t),r=null!=(T=null==e?void 0:e.rotation)?T:0;await (null==(P=Y.onRotation)?void 0:P.call(Y,r)),Q.rotation&&(X.rotation=r),K.rotation=!0}continue}if("videoCodec"===ee){if(!K.videoCodec&&e.videoCodec){let e=(0,m.getVideoCodec)(t);await (null==(I=Y.onVideoCodec)?void 0:I.call(Y,e)),Q.videoCodec&&(X.videoCodec=e),K.videoCodec=!0}continue}if("audioCodec"===ee){if(!K.audioCodec&&e.audioCodec){let e=(0,a.getAudioCodec)(t);await (null==(A=Y.onAudioCodec)?void 0:A.call(Y,e)),Q.audioCodec&&(X.audioCodec=e),K.audioCodec=!0}continue}if("tracks"===ee){if(!K.tracks&&e.tracks){let e=(0,h.getTracks)(t,!0);await (null==(O=Y.onTracks)?void 0:O.call(Y,e)),Q.tracks&&(X.tracks=e),K.tracks=!0}continue}if("internalStats"===ee){if(e.internalStats){let e=t.getInternalStats();Q.internalStats&&(X.internalStats=e),K.internalStats=!0}continue}if("size"===ee){!K.size&&e.size&&(await (null==(M=Y.onSize)?void 0:M.call(Y,t.contentLength)),Q.size&&(X.size=t.contentLength),K.size=!0);continue}if("mimeType"===ee){!K.mimeType&&e.mimeType&&(await (null==(F=Y.onMimeType)?void 0:F.call(Y,t.mimeType)),Q.mimeType&&(X.mimeType=t.mimeType),K.mimeType=!0);continue}if("name"===ee){!K.name&&e.name&&(await (null==(R=Y.onName)?void 0:R.call(Y,J)),Q.name&&(X.name=J),K.name=!0);continue}if("isHdr"===ee){if(!X.isHdr&&e.isHdr){let e=(0,u.getIsHdr)(t);await (null==(D=Y.onIsHdr)?void 0:D.call(Y,e)),Q.isHdr&&(X.isHdr=e),K.isHdr=!0}continue}if("container"===ee){if(!X.container&&e.container){let e=(0,n.getContainer)(t.structure.getStructure());await (null==(j=Y.onContainer)?void 0:j.call(Y,e)),Q.container&&(X.container=e),K.container=!0}continue}if("metadata"===ee){if(!K.metadata&&e.metadata){let e=(0,g.getMetadata)(t);await (null==(L=Y.onMetadata)?void 0:L.call(Y,e)),Q.metadata&&(X.metadata=e),K.metadata=!0}continue}if("location"===ee){if(!K.location&&e.location){let e=(0,d.getLocation)(t);await (null==(B=Y.onLocation)?void 0:B.call(Y,e)),Q.location&&(X.location=e),K.location=!0}continue}if("slowKeyframes"===ee){!K.slowKeyframes&&e.slowKeyframes&&(await (null==(N=Y.onSlowKeyframes)?void 0:N.call(Y,t.keyframes.getKeyframes())),Q.slowKeyframes&&(X.slowKeyframes=t.keyframes.getKeyframes()),K.slowKeyframes=!0);continue}if("slowNumberOfFrames"===ee){!K.slowNumberOfFrames&&e.slowNumberOfFrames&&(await (null==($=Y.onSlowNumberOfFrames)?void 0:$.call(Y,t.samplesObserved.getSlowNumberOfFrames())),Q.slowNumberOfFrames&&(X.slowNumberOfFrames=t.samplesObserved.getSlowNumberOfFrames()),K.slowNumberOfFrames=!0);continue}if("slowAudioBitrate"===ee){!K.slowAudioBitrate&&e.slowAudioBitrate&&(await (null==(z=Y.onSlowAudioBitrate)?void 0:z.call(Y,t.samplesObserved.getAudioBitrate())),Q.slowAudioBitrate&&(X.slowAudioBitrate=t.samplesObserved.getAudioBitrate()),K.slowAudioBitrate=!0);continue}if("slowVideoBitrate"===ee){!K.slowVideoBitrate&&e.slowVideoBitrate&&(await (null==(U=Y.onSlowVideoBitrate)?void 0:U.call(Y,t.samplesObserved.getVideoBitrate())),Q.slowVideoBitrate&&(X.slowVideoBitrate=t.samplesObserved.getVideoBitrate()),K.slowVideoBitrate=!0);continue}if("keyframes"===ee){!K.keyframes&&e.keyframes&&(await (null==(V=Y.onKeyframes)?void 0:V.call(Y,(0,c.getKeyframes)(t))),Q.keyframes&&(X.keyframes=(0,c.getKeyframes)(t)),K.keyframes=!0);continue}if("images"===ee){!K.images&&e.images&&(await (null==(H=Y.onImages)?void 0:H.call(Y,t.images.images)),Q.images&&(X.images=t.images.images),K.images=!0);continue}if("sampleRate"===ee){if(!K.sampleRate&&e.sampleRate){let e=(0,f.getSampleRate)(t);await (null==(W=Y.onSampleRate)?void 0:W.call(Y,e)),Q.sampleRate&&(X.sampleRate=e),K.sampleRate=!0}continue}if("numberOfAudioChannels"===ee){if(!K.numberOfAudioChannels&&e.numberOfAudioChannels){let e=(0,p.getNumberOfAudioChannels)(t);await (null==(q=Y.onNumberOfAudioChannels)?void 0:q.call(Y,e)),Q.numberOfAudioChannels&&(X.numberOfAudioChannels=e),K.numberOfAudioChannels=!0}continue}if("m3uStreams"===ee){if(!K.m3uStreams&&e.m3uStreams){let e=(0,i.getM3uStreams)({structure:t.structure.getStructureOrNull(),originalSrc:t.src,readerInterface:t.readerInterface});await (null==(G=Y.onM3uStreams)?void 0:G.call(Y,e)),Q.m3uStreams&&(X.m3uStreams=e),K.m3uStreams=!0}continue}throw Error(`Unhandled key: ${ee}`)}await (0,v.workOnSeekRequest)((0,v.getWorkOnSeekRequestOptions)(t))}},275272,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.maySkipOverSamplesInTheMiddle=r.maySkipVideoData=r.missesMatroskaTracks=void 0;let i=e.r(292780),a=e.r(125925),n=e.r(434642),o=e=>(!!e.callbacks.hasAudioTrackHandlers||!!e.callbacks.hasVideoTrackHandlers)&&(!e.callbacks.tracks.hasAllTracks()||Object.values(e.callbacks.videoSampleCallbacks).length>0||Object.values(e.callbacks.audioSampleCallbacks).length>0);r.missesMatroskaTracks=e=>{let t=e.structure.getStructureOrNull();return null!==t&&"matroska"===t.type&&null!==(0,a.getMainSegment)(t.boxes)&&(0,i.getTracksFromMatroska)({structureState:e.structure,webmState:e.webm}).missingInfo.length>0},r.maySkipVideoData=({state:e})=>!o(e)&&!(0,n.needsToIterateOverSamples)({emittedFields:e.emittedFields,fields:e.fields})&&!(0,r.missesMatroskaTracks)(e),r.maySkipOverSamplesInTheMiddle=({state:e})=>!o(e)&&!(0,n.needsToIterateOverEverySample)({emittedFields:e.emittedFields,fields:e.fields})},507590,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hasAllInfo=r.getAvailableInfo=void 0;let i=e.r(345458),a=e.r(540360),n=e.r(359696),o=e.r(123378),s=e.r(853033),l=e.r(758091),u=e.r(880263),c=e.r(889152),d=e.r(716594),p=e.r(710965),f=e.r(86711),h=e.r(788128),m=e.r(583681),g=e.r(275272);r.getAvailableInfo=({state:e})=>{let t=Object.entries(e.fields).filter(([,e])=>e),r=e.structure.getStructureOrNull(),g=t.map(([t])=>{if("slowStructure"===t)return!1;if("durationInSeconds"===t)return!!(r&&(0,s.hasDuration)(e));if("slowDurationInSeconds"===t)return!!(r&&(0,s.hasSlowDuration)(e));if("dimensions"===t||"rotation"===t||"unrotatedDimensions"===t)return!!(r&&(0,o.hasDimensions)(e));if("fps"===t)return!!(r&&(0,l.hasFps)(e));if("slowFps"===t)return!!(r&&(0,l.hasFpsSuitedForSlowFps)(e));if("isHdr"===t)return!!(r&&(0,u.hasHdr)(e));if("videoCodec"===t)return!!(r&&(0,h.hasVideoCodec)(e));if("audioCodec"===t)return!!(r&&(0,a.hasAudioCodec)(e));if("tracks"===t)return!!(r&&(0,f.getHasTracks)(e,!0));if("keyframes"===t)return!!(r&&(0,c.hasKeyframes)(e));if("internalStats"===t||"size"===t||"mimeType"===t||"name"===t)return!0;if("container"===t)return!!(r&&(0,n.hasContainer)(r));if("metadata"===t||"location"===t||"images"===t)return!!(r&&(0,m.hasMetadata)(r));if("slowKeyframes"===t||"slowVideoBitrate"===t||"slowAudioBitrate"===t||"slowNumberOfFrames"===t)return!1;if("numberOfAudioChannels"===t)return(0,d.hasNumberOfAudioChannels)(e);if("sampleRate"===t)return(0,p.hasSampleRate)(e);if("m3uStreams"===t)return(0,i.m3uHasStreams)(e);throw Error(`Unknown field passed: ${t}. Available fields: ${Object.keys(e.fields).join(", ")}`)}),v=[],y=0;for(let[e]of t)v.push([e,g[y++]]);return Object.fromEntries(v)},r.hasAllInfo=({state:e})=>!!Object.values((0,r.getAvailableInfo)({state:e})).every(Boolean)&&!!((0,g.maySkipVideoData)({state:e})||e.callbacks.canSkipTracksState.canSkipTracks())},603281,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.triggerInfoEmit=r.emitAllInfo=void 0;let i=e.r(655828),a=e.r(507590);r.emitAllInfo=async e=>{let t=Object.keys(e.fields).reduce((t,r)=>{var i;return(null==(i=e.fields)?void 0:i[r])&&(t[r]=!0),t},{});await (0,i.emitAvailableInfo)({hasInfo:t,state:e})},r.triggerInfoEmit=async e=>{let t=(0,a.getAvailableInfo)({state:e});await (0,i.emitAvailableInfo)({hasInfo:t,state:e})}},823984,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.checkIfDone=void 0;let i=e.r(507590),a=e.r(66415);r.checkIfDone=async e=>{let t=Date.now(),r=(0,i.hasAllInfo)({state:e});return(e.timings.timeCheckingIfDone+=Date.now()-t,r&&"query"===e.mode)?(a.Log.verbose(e.logLevel,"Got all info, skipping to the end."),e.increaseSkippedBytes(e.contentLength-e.iterator.counter.getOffset()),!0):e.iterator.counter.getOffset()===e.contentLength?("m3u"!==e.structure.getStructure().type||!!e.m3u.getAllChunksProcessedOverall())&&(e.riff.queuedBFrames.flush(),!e.riff.queuedBFrames.hasReleasedFrames()&&(a.Log.verbose(e.logLevel,"Reached end of file"),await e.discardReadBytes(!0),!0)):e.iterator.counter.getOffset()+e.iterator.bytesRemaining()===e.contentLength&&!!e.errored&&(a.Log.verbose(e.logLevel,"Reached end of file and errorred"),!0)}},840093,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.makeProgressObject=void 0,r.makeProgressObject=e=>({bytes:e.iterator.counter.getOffset(),percentage:e.contentLength?e.iterator.counter.getOffset()/e.contentLength:null,totalBytes:e.contentLength})},743882,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseAac=void 0;let i=e.r(442521),a=e.r(560247),n=e.r(882757),o=e.r(452893);r.parseAac=async e=>{let{iterator:t}=e,r=t.counter.getOffset();t.startReadingBits();let s=t.getBits(12);if(4095!==s)throw Error("Invalid syncword: "+s);if(0!==t.getBits(1))throw Error("Only supporting MPEG-4 for .aac");if(0!==t.getBits(2))throw Error("Only supporting layer 0 for .aac");let l=t.getBits(1),u=t.getBits(2),c=t.getBits(4),d=(0,i.getSampleRateFromSampleFrequencyIndex)(c);t.getBits(1);let p=t.getBits(3),f=(0,i.createAacCodecPrivate)({audioObjectType:u,sampleRate:d,channelConfiguration:p,codecPrivate:null});t.getBits(1),t.getBits(1),t.getBits(1),t.getBits(1);let h=t.getBits(13);t.getBits(11),t.getBits(2),l||t.getBits(16),t.stopReadingBits(),t.counter.decrement(t.counter.getOffset()-r);let m=t.getSlice(h);0===e.callbacks.tracks.getTracks().length&&(e.mediaSection.addMediaSection({start:r,size:e.contentLength-r}),await (0,n.registerAudioTrack)({container:"aac",track:{codec:(0,i.mapAudioObjectTypeToCodecString)(u),codecEnum:"aac",codecData:{type:"aac-config",data:f},description:f,numberOfChannels:p,sampleRate:d,originalTimescale:o.WEBCODECS_TIMESCALE,trackId:0,type:"audio",startInSeconds:0,timescale:o.WEBCODECS_TIMESCALE,trackMediaTimeOffsetInTrackTimescale:0},registerAudioSampleCallback:e.callbacks.registerAudioSampleCallback,tracks:e.callbacks.tracks,logLevel:e.logLevel,onAudioTrack:e.onAudioTrack}),e.callbacks.tracks.setIsDone(e.logLevel));let g=1024/d,{index:v}=e.aac.addSample({offset:r,size:h}),y=1024/d*v;e.aac.audioSamples.addSample({timeInSeconds:y,offset:r,durationInSeconds:g});let b=(0,a.convertAudioOrVideoSampleToWebCodecsTimestamps)({sample:{duration:g,type:"key",data:m,offset:r,decodingTimestamp:y,timestamp:y},timescale:1});return await e.callbacks.onAudioSample({audioSample:b,trackId:0}),Promise.resolve(null)}},567706,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getBlockSize=void 0,r.getBlockSize=e=>{let t=e.getBits(4);if(0===t)return null;if(1===t)return 192;if(t>=2&&t<=5)return 144*2**t;if(6===t)return"uncommon-u8";if(7===t)return"uncommon-u16";if(t>=8&&t<=15)return 2**t;throw Error("Invalid block size")}},105464,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getChannelCount=void 0,r.getChannelCount=e=>{let t=e.getBits(4);if(0===t)return 1;if(1===t)return 2;if(2===t)return 3;if(3===t)return 4;if(4===t)return 5;if(5===t)return 6;if(6===t)return 7;if(7===t)return 8;if(8===t||9===t||10===t||t>=11&&t<=15)return 2;throw Error(`Invalid channel count: ${t.toString(2)}`)}},275857,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSampleRate=void 0,r.getSampleRate=(e,t)=>{var r,i;let a=e.getBits(4);if(0===a||15===a){let e=null!=(i=null==(r=t.structure.getFlacStructure().boxes.find(e=>"flac-streaminfo"===e.type))?void 0:r.sampleRate)?i:null;if(null===e)throw Error("Sample rate not found");return e}if(1===a)return 88200;if(2===a)return 176400;if(3===a)return 192e3;if(4===a)return 8e3;if(5===a)return 16e3;if(6===a)return 22050;if(7===a)return 24e3;if(8===a)return 32e3;if(9===a)return 44100;if(10===a)return 48e3;if(11===a)return 96e3;if(12===a)return"uncommon-u8";if(13===a)return"uncommon-u16";if(14===a)return"uncommon-u16-10";throw Error(`Invalid sample rate mode: ${a.toString(2)}`)}},791383,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseFlacFrame=r.parseFrameHeader=void 0;let i=e.r(560247),a=e.r(77548),n=e.r(567706),o=e.r(105464),s=e.r(275857);r.parseFrameHeader=({iterator:e,state:t})=>{if(10>e.bytesRemaining())return null;let r=e.counter.getOffset();e.discard(2),e.startReadingBits();let i=(0,n.getBlockSize)(e);if(null===i)return null;let a=(0,s.getSampleRate)(e,t);(0,o.getChannelCount)(e),e.getBits(3),e.getBits(1);let l=e.getFlacCodecNumber(),u="uncommon-u16"===i?e.getBits(16)+1:"uncommon-u8"===i?e.getBits(8)+1:i,c="uncommon-u16"===a?e.getBits(16):"uncommon-u16-10"===a?10*e.getBits(16):"uncommon-u8"===a?e.getBits(8):a;e.stopReadingBits();let d=e.counter.getOffset()-r,p=e.getUint8();e.counter.decrement(d+1);let f=function(e){let t=0;for(let r of e){t^=r;for(let e=0;e<8;e++)(128&t)!=0?t=t<<1^7:t<<=1,t&=255}return t}(e.getSlice(d));return(e.counter.decrement(d),f!==p)?null:{num:l,blockSize:u,sampleRate:c}};let l=async({state:e,data:t,offset:n})=>{let o=(0,a.getArrayBufferIterator)({initialData:t,maxBytes:t.length,logLevel:"error"}),s=(0,r.parseFrameHeader)({iterator:o,state:e});if(!s)throw Error("Invalid CRC");let{blockSize:l,num:u,sampleRate:c}=s,d=l/c,p=e.structure.getFlacStructure().boxes.find(e=>"flac-streaminfo"===e.type);if(!p)throw Error("Stream info not found");if(p.minimumBlockSize!==p.maximumBlockSize)throw Error("Cannot determine timestamp");let f=u*p.maximumBlockSize/p.sampleRate;e.flac.audioSamples.addSample({timeInSeconds:f,offset:n,durationInSeconds:d});let h=(0,i.convertAudioOrVideoSampleToWebCodecsTimestamps)({sample:{data:t,duration:d,decodingTimestamp:f,timestamp:f,type:"key",offset:n},timescale:1});await e.callbacks.onAudioSample({audioSample:h,trackId:0}),o.destroy()},u=async({state:e,iterator:t})=>{var i,a;let n=e.flac.getBlockingBitStrategy(),o=t.counter.getOffset(),{returnToCheckpoint:s}=t.startCheckpoint();if(t.startReadingBits(),void 0===n){if(32764!==t.getBits(15))throw Error("Invalid sync code");e.flac.setBlockingBitStrategy(t.getBits(1))}else if(1===n){if(65529!==t.getBits(16))throw Error("Blocking bit changed, it should not")}else if(0===n&&65528!==t.getBits(16))throw Error("Blocking bit changed, it should not");let u=e.flac.getBlockingBitStrategy();if(void 0===u)throw Error("Blocking bit should be set");t.stopReadingBits();let c=null!=(a=null==(i=e.structure.getFlacStructure().boxes.find(e=>"flac-streaminfo"===e.type))?void 0:i.minimumFrameSize)?a:null;if(null===c)throw Error("Expected flac-streaminfo");for(0!==c&&t.getSlice(c-2);;){if(t.counter.getOffset()===e.contentLength){let r=t.counter.getOffset()-o;s();let i=t.getSlice(r);await l({state:e,data:i,offset:o});break}if(0===t.bytesRemaining()){s();break}if(255===t.getUint8()){if(t.getUint8()!==(1===u?249:248)){t.counter.decrement(1);continue}if(t.counter.decrement(2),!(0,r.parseFrameHeader)({iterator:t,state:e})){t.discard(1);continue}let i=t.counter.getOffset()-o;s();let a=t.getSlice(i);await l({state:e,data:a,offset:o});break}}return null};r.parseFlacFrame=u},36748,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseFlacHeader=void 0,r.parseFlacHeader=({state:e})=>(e.structure.getFlacStructure().boxes.push({type:"flac-header"}),Promise.resolve(null))},70129,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseVorbisComment=void 0,r.parseVorbisComment=({state:e,iterator:t,size:r})=>{let{expectNoMoreBytes:i}=t.startBox(r),a={type:"flac-vorbis-comment",fields:[]},n=t.getUint32Le(),o=t.getByteString(n,!0),s=t.getUint32Le();a.fields.push({key:"vendor",value:o,trackId:null});for(let e=0;e<s;e++){let e=t.getUint32Le(),[r,i]=t.getByteString(e,!0).split("=");a.fields.push({key:r.toLowerCase(),value:i,trackId:null})}return e.structure.getFlacStructure().boxes.push(a),i(),Promise.resolve(null)}},804342,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseStreamInfo=void 0;let i=e.r(882757),a=e.r(452893);r.parseStreamInfo=async({iterator:e,state:t})=>{let r=e.counter.getOffset(),n=e.getUint16(),o=e.getUint16(),s=e.getUint24(),l=e.getUint24();e.startReadingBits();let u=e.getBits(20),c=e.getBits(3)+1,d=e.getBits(5),p=e.getBits(36);e.getBits(128),e.stopReadingBits();let f=e.counter.getOffset()-r;e.counter.decrement(f);let h=e.getSlice(f);return t.structure.getFlacStructure().boxes.push({type:"flac-streaminfo",bitsPerSample:d,channels:c,maximumBlockSize:o,maximumFrameSize:l,minimumBlockSize:n,minimumFrameSize:s,sampleRate:u,totalSamples:p}),await (0,i.registerAudioTrack)({container:"flac",track:{codec:"flac",type:"audio",description:h,codecData:{type:"flac-description",data:h},codecEnum:"flac",numberOfChannels:c,sampleRate:u,originalTimescale:a.WEBCODECS_TIMESCALE,trackId:0,startInSeconds:0,timescale:a.WEBCODECS_TIMESCALE,trackMediaTimeOffsetInTrackTimescale:0},registerAudioSampleCallback:t.callbacks.registerAudioSampleCallback,tracks:t.callbacks.tracks,logLevel:t.logLevel,onAudioTrack:t.onAudioTrack}),t.callbacks.tracks.setIsDone(t.logLevel),Promise.resolve(null)}},395359,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseFlacUnkownBlock=void 0,r.parseFlacUnkownBlock=({iterator:e,state:t,size:r})=>(e.discard(r),t.structure.getFlacStructure().boxes.push({type:"flac-header"}),Promise.resolve(null))},131323,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseMetaBlock=void 0;let i=e.r(70129),a=e.r(804342),n=e.r(395359);r.parseMetaBlock=({iterator:e,state:t})=>{e.startReadingBits();let r=e.getBits(1),o=e.getBits(7);e.stopReadingBits();let s=e.getUint24();return(r&&t.mediaSection.addMediaSection({start:e.counter.getOffset()+s,size:t.contentLength-e.counter.getOffset()-s}),0===o)?(0,a.parseStreamInfo)({iterator:e,state:t}):4===o?(0,i.parseVorbisComment)({iterator:e,state:t,size:s}):(0,n.parseFlacUnkownBlock)({iterator:e,state:t,size:s})}},572449,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseFlac=void 0;let i=e.r(667585),a=e.r(275272),n=e.r(791383),o=e.r(36748),s=e.r(131323);r.parseFlac=({iterator:e,state:t})=>"in-section"===t.mediaSection.isCurrentByteInMediaSection(e)?(0,a.maySkipVideoData)({state:t})?Promise.resolve((0,i.makeSkip)(t.contentLength)):(0,n.parseFlacFrame)({state:t,iterator:e}):"fLaC"===e.getByteString(4,!0)?(0,o.parseFlacHeader)({state:t,iterator:e}):(e.counter.decrement(4),(0,s.parseMetaBlock)({iterator:e,state:t}))},631713,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSampleWithLowestDts=r.cachedSamplePositionsState=r.calculateSamplePositions=void 0;let i=e.r(880137),a=e.r(968493),n=e.r(831097),o=e.r(86711),s=e.r(66415),l=e.r(862849);r.calculateSamplePositions=({state:e,mediaSectionStart:t,trackIds:r})=>{var u,c;let d=(0,o.getTracks)(e,!0),p=(0,n.getMoofBoxes)(e.structure.getIsoStructure().boxes),f=(0,l.deduplicateTfraBoxesByOffset)([...e.iso.tfra.getTfraBoxes(),...(0,n.getTfraBoxes)(e.structure.getIsoStructure().boxes)]),h=(0,i.areSamplesComplete)({moofBoxes:p,tfraBoxes:f}),m=p.find(e=>e.offset+e.size+8===t);if(p.length>0&&!m)throw Error("No relevant moof box found");let g=(0,n.getMoovBoxFromState)({structureState:e.structure,isoState:e.iso,mp4HeaderSegment:null!=(c=null==(u=e.m3uPlaylistContext)?void 0:u.mp4HeaderSegment)?c:null,mayUsePrecomputed:!0});if(!g)throw Error("No moov box found");let v=[];for(let t of d){let i=(0,n.getTrakBoxByTrackId)(g,t.trackId);if(!r.includes(t.trackId)){s.Log.verbose(e.logLevel,"Skipping calculating sample positions for track",t.trackId);continue}if(!i)throw Error("No trak box found");let{samplePositions:o}=(0,a.getSamplePositionsFromTrack)({trakBox:i,moofBoxes:m?[m]:[],moofComplete:h,trexBoxes:(0,n.getTrexBoxes)(g)});v.push({trackId:t.trackId,samplePositions:o})}return v},r.cachedSamplePositionsState=()=>{let e={},t={};return{getSamples:t=>{var r;return null!=(r=e[t])?r:null},setSamples:(t,r)=>{e[t]=r},setCurrentSampleIndex:(e,r,i)=>{t[e]||(t[e]={}),t[e][r]||(t[e][r]=0),t[e][r]=i},getCurrentSampleIndices:e=>{var r;return null!=(r=t[e])?r:{}},updateAfterSeek:r=>{t=(({samplePositionsForMdatStart:e,seekedByte:t})=>{let r={},i=Object.keys(e).map(Number).sort().find(e=>t>=e);if(!i)return r;let a=e[i];if(!a)return r;for(let e of a){let a=e.samplePositions.findIndex(e=>e.offset>=t);r[i]||(r[i]={}),r[i][e.trackId]||(r[i][e.trackId]=0),-1===a?r[i][e.trackId]=e.samplePositions.length:r[i][e.trackId]=a}return r})({samplePositionsForMdatStart:e,seekedByte:r})}}},r.getSampleWithLowestDts=(e,t)=>{var r;let i=[];for(let a of e){let e=null!=(r=t[a.trackId])?r:0,n=a.samplePositions[e];n&&(0===i.length||n.decodingTimestamp<=i[0].samplePosition.decodingTimestamp)&&i.push({samplePosition:n,trackId:a.trackId,index:e})}return i}},85515,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getMaxFirstMoofOffset=r.getLastMoofBox=void 0;let i=e.r(653909);r.getLastMoofBox=e=>{if(e){let t=e.filter(e=>"tfra-box"===e.type).map(e=>e.entries.length<=1?null:e.entries[e.entries.length-1].moofOffset);return t.length>0?Math.max(...t.filter(i.truthy)):null}},r.getMaxFirstMoofOffset=e=>Math.max(...e.filter(e=>"tfra-box"===e.type).map(e=>e.entries[0].moofOffset).filter(i.truthy))},24915,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.makeCanSkipTracksState=r.needsTracksForField=void 0,r.needsTracksForField=({field:e,structure:t})=>{if("dimensions"===e)return(null==t?void 0:t.type)!=="riff";if("audioCodec"===e||"durationInSeconds"===e||"slowDurationInSeconds"===e||"slowFps"===e||"fps"===e||"isHdr"===e||"rotation"===e||"slowStructure"===e||"tracks"===e||"unrotatedDimensions"===e||"videoCodec"===e||"metadata"===e||"location"===e||"slowKeyframes"===e||"slowNumberOfFrames"===e||"keyframes"===e||"images"===e||"sampleRate"===e||"numberOfAudioChannels"===e||"slowAudioBitrate"===e||"slowVideoBitrate"===e||"m3uStreams"===e)return!0;if("container"===e||"internalStats"===e||"mimeType"===e||"name"===e||"size"===e)return!1;throw Error(`field not implemeted ${e}`)},r.makeCanSkipTracksState=({hasAudioTrackHandlers:e,fields:t,hasVideoTrackHandlers:i,structure:a})=>{let n=()=>Object.keys(null!=t?t:{}).filter(e=>t[e]).some(e=>(0,r.needsTracksForField)({field:e,structure:a.getStructureOrNull()}));return{doFieldsNeedTracks:n,canSkipTracks:()=>!e&&!i&&!n()}}},223706,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.makeTracksSectionState=void 0;let i=e.r(66415);r.makeTracksSectionState=(e,t)=>{let r=[],a=!1;return{hasAllTracks:()=>a,getIsDone:()=>a,setIsDone:e=>{if(a)throw Error("Error in Media Parser: Tracks have already been parsed");i.Log.verbose(e,"All tracks have been parsed"),a=!0},addTrack:e=>{r.push(e)},getTracks:()=>r,ensureHasTracksAtEnd:r=>{if(!e.canSkipTracks()&&r.tracks&&!a)throw Error("Error in Media Parser: End of parsing of "+t+" has been reached, but no tracks have been found ")}}}},288540,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.structureState=void 0,r.structureState=()=>{let e=null,t=()=>{if(null===e)throw Error("Expected structure");return e};return{getStructureOrNull:()=>e,getStructure:t,setStructure:t=>{e=t},getFlacStructure:()=>{let e=t();if("flac"!==e.type)throw Error("Invalid structure type");return e},getIsoStructure:()=>{let e=t();if("iso-base-media"!==e.type)throw Error("Invalid structure type");return e},getMp3Structure:()=>{let e=t();if("mp3"!==e.type)throw Error("Invalid structure type");return e},getM3uStructure:()=>{let e=t();if("m3u"!==e.type)throw Error("Invalid structure type");return e},getRiffStructure:()=>{let e=t();if("riff"!==e.type)throw Error("Invalid structure type");return e},getTsStructure:()=>{let e=t();if("transport-stream"!==e.type)throw Error("Invalid structure type");return e},getWavStructure:()=>{let e=t();if("wav"!==e.type)throw Error("Invalid structure type");return e},getMatroskaStructure:()=>{let e=t();if("matroska"!==e.type)throw Error("Invalid structure type");return e}}}},91241,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getMoovAtom=void 0;let i=e.r(77548),a=e.r(66415),n=e.r(882757),o=e.r(24915),s=e.r(223706),l=e.r(288540),u=e.r(501318),c=e.r(831097);r.getMoovAtom=async({endOfMdat:e,state:t})=>{var r;let d=null==(r=t.m3uPlaylistContext)?void 0:r.mp4HeaderSegment;if(d){let e=(0,c.getMoovFromFromIsoStructure)(d);if(!e)throw Error("No moov box found in header segment");return e}let p=Date.now();a.Log.verbose(t.logLevel,"Starting second fetch to get moov atom");let{reader:f}=await t.readerInterface.read({src:t.src,range:e,controller:t.controller,logLevel:t.logLevel,prefetchCache:t.prefetchCache}),h=t.onAudioTrack?async({track:e,container:r})=>(await (0,n.registerAudioTrack)({track:e,container:r,logLevel:t.logLevel,onAudioTrack:t.onAudioTrack,registerAudioSampleCallback:t.callbacks.registerAudioSampleCallback,tracks:t.callbacks.tracks}),null):null,m=t.onVideoTrack?async({track:e,container:r})=>(await (0,n.registerVideoTrack)({track:e,container:r,logLevel:t.logLevel,onVideoTrack:t.onVideoTrack,registerVideoSampleCallback:t.callbacks.registerVideoSampleCallback,tracks:t.callbacks.tracks}),null):null,g=(0,i.getArrayBufferIterator)({initialData:new Uint8Array([]),maxBytes:t.contentLength-e,logLevel:"error"});for(;;){let e=await f.reader.read();if(e.value&&g.addData(e.value),e.done)break}let v=[],y=(0,o.makeCanSkipTracksState)({hasAudioTrackHandlers:!1,fields:{slowStructure:!0},hasVideoTrackHandlers:!1,structure:(0,l.structureState)()}),b=(0,s.makeTracksSectionState)(y,t.src);for(;;){let r=await (0,u.processBox)({iterator:g,logLevel:t.logLevel,onlyIfMoovAtomExpected:{tracks:b,isoState:null,movieTimeScaleState:t.iso.movieTimeScale,onAudioTrack:h,onVideoTrack:m,registerVideoSampleCallback:()=>Promise.resolve(),registerAudioSampleCallback:()=>Promise.resolve()},onlyIfMdatAtomExpected:null,contentLength:t.contentLength-e});if("box"===r.type&&v.push(r.box),g.counter.getOffset()+e>t.contentLength)throw Error("Read past end of file");if(g.counter.getOffset()+e===t.contentLength)break}let x=v.find(e=>"moov-box"===e.type);if(!x)throw Error("No moov box found");return a.Log.verbose(t.logLevel,`Finished fetching moov atom in ${Date.now()-p}ms`),x}},884567,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.postprocessBytes=void 0,r.postprocessBytes=({bytes:e,bigEndian:t,chunkSize:r})=>{if(!t||null===r)return e;let i=new Uint8Array(e);for(let e=0;e<i.length;e+=r){let t=i.slice(e,e+r);t.reverse(),i.set(t,e)}return i}},825088,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseMdatSection=void 0;let i=e.r(560247),a=e.r(86711),n=e.r(66415),o=e.r(667585),s=e.r(631713),l=e.r(85515),u=e.r(275272),c=e.r(218294),d=e.r(452893),p=e.r(91241),f=e.r(884567),h=async e=>{let t=(0,c.getCurrentMediaSection)({offset:e.iterator.counter.getOffset(),mediaSections:e.mediaSection.getMediaSections()});if(!t)throw Error("No video section defined");let h=t.size+t.start;if((0,u.maySkipVideoData)({state:e})){let t=e.iso.mfra.getIfAlreadyLoaded();if(t){let r=(0,l.getLastMoofBox)(t);if(r&&r>h)return n.Log.verbose(e.logLevel,"Skipping to last moof",r),(0,o.makeSkip)(r)}return(0,o.makeSkip)(h)}if((0,u.maySkipOverSamplesInTheMiddle)({state:e})){let t=e.iso.mfra.getIfAlreadyLoaded();if(t){let r=(0,l.getLastMoofBox)(t),i=(0,l.getMaxFirstMoofOffset)(t);if(e.mediaSection.getMediaSections().filter(e=>e.start>i).length>1&&r&&r>h)return n.Log.verbose(e.logLevel,"Skipping to last moof because only first and last samples are needed"),(0,o.makeSkip)(r)}}if(!(0,a.getHasTracks)(e,!0)){let t=await (0,p.getMoovAtom)({endOfMdat:h,state:e}),i=(0,a.getTracksFromMoovBox)(t);e.iso.moov.setMoovBox({moovBox:t,precomputed:!1});let n=e.callbacks.tracks.getTracks();for(let t of i)n.find(e=>e.trackId===t.trackId)||"other"!==t.type&&e.callbacks.tracks.addTrack(t);return e.callbacks.tracks.setIsDone(e.logLevel),e.structure.getIsoStructure().boxes.push(t),(0,r.parseMdatSection)(e)}let m=e.callbacks.tracks.getTracks();if(!e.iso.flatSamples.getSamples(t.start)){let r=(0,s.calculateSamplePositions)({state:e,mediaSectionStart:t.start,trackIds:m.map(e=>e.trackId)});e.iso.flatSamples.setSamples(t.start,r)}let g=e.iso.flatSamples.getSamples(t.start),v=e.iso.flatSamples.getCurrentSampleIndices(t.start),y=(0,s.getSampleWithLowestDts)(g,v);if(0===y.length)return n.Log.verbose(e.logLevel,"Iterated over all samples.",h),(0,o.makeSkip)(h);let b=y.find(t=>t.samplePosition.offset===e.iterator.counter.getOffset()),x=null!=b?b:y.sort((e,t)=>e.samplePosition.offset-t.samplePosition.offset)[0];if(x.samplePosition.offset!==e.iterator.counter.getOffset())return(0,o.makeSkip)(x.samplePosition.offset);if(x.samplePosition.offset+x.samplePosition.size>e.contentLength)return n.Log.verbose(e.logLevel,"Sample is beyond the end of the file. Don't process it.",x.samplePosition.offset+x.samplePosition.size,h),(0,o.makeSkip)(h);let{iterator:w}=e;if(w.bytesRemaining()<x.samplePosition.size)return(0,o.makeFetchMoreData)(x.samplePosition.size-w.bytesRemaining());let{timestamp:S,decodingTimestamp:k,duration:C,isKeyframe:E,offset:_,bigEndian:T,chunkSize:P}=x.samplePosition,I=m.find(e=>e.trackId===x.trackId),{originalTimescale:A,startInSeconds:O,trackMediaTimeOffsetInTrackTimescale:M,timescale:F}=I,R=S+O*A-M/F*d.WEBCODECS_TIMESCALE,D=k+O*A-M/F*d.WEBCODECS_TIMESCALE,j=(0,f.postprocessBytes)({bytes:w.getSlice(x.samplePosition.size),bigEndian:T,chunkSize:P});if("audio"===I.type){let t=(0,i.convertAudioOrVideoSampleToWebCodecsTimestamps)({sample:{data:j,timestamp:R,duration:C,decodingTimestamp:D,type:E?"key":"delta",offset:_},timescale:A});await e.callbacks.onAudioSample({audioSample:t,trackId:I.trackId})}if("video"===I.type){let t=31&j[4],r=!1;6===t&&(r=6===j[5]);let a=(0,i.convertAudioOrVideoSampleToWebCodecsTimestamps)({sample:{data:j,timestamp:R,duration:C,decodingTimestamp:D,type:E&&!r?"key":"delta",offset:_},timescale:A});await e.callbacks.onVideoSample({videoSample:a,trackId:I.trackId})}return e.iso.flatSamples.setCurrentSampleIndex(t.start,x.trackId,x.index+1),null};r.parseMdatSection=h},471107,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseIsoBaseMedia=void 0;let i=e.r(825088),a=e.r(501318);r.parseIsoBaseMedia=async e=>{if("in-section"===e.mediaSection.isCurrentByteInMediaSection(e.iterator))return await (0,i.parseMdatSection)(e);let t=await (0,a.processBox)({iterator:e.iterator,logLevel:e.logLevel,onlyIfMoovAtomExpected:{tracks:e.callbacks.tracks,isoState:e.iso,movieTimeScaleState:e.iso.movieTimeScale,onAudioTrack:e.onAudioTrack,onVideoTrack:e.onVideoTrack,registerAudioSampleCallback:e.callbacks.registerAudioSampleCallback,registerVideoSampleCallback:e.callbacks.registerVideoSampleCallback},onlyIfMdatAtomExpected:{mediaSectionState:e.mediaSection},contentLength:e.contentLength});return"fetch-more-data"===t.type?t.bytesNeeded:("box"===t.type&&e.structure.getIsoStructure().boxes.push(t.box),null)}},156468,(e,t,r)=>{"use strict";function i(e){let t=[],r="",i=!1;for(let a=0;a<e.length;a++){let n=e[a];'"'===n?(i=!i,r+=n):","!==n||i?r+=n:(t.push(r),r="")}return r&&t.push(r),t}Object.defineProperty(r,"__esModule",{value:!0}),r.parseStreamInf=void 0,r.splitRespectingQuotes=i,r.parseStreamInf=e=>{let t=i(e),r={};for(let e of t){let t=e.indexOf("="),i=-1===t?e:e.slice(0,t),a=-1===t?null:e.slice(t+1);if(null===a)throw Error("Value is null");let n=(null==a?void 0:a.startsWith('"'))&&(null==a?void 0:a.endsWith('"'))?a.slice(1,-1):a;r[i]=n}return{type:"m3u-stream-info",averageBandwidthInBitsPerSec:r["AVERAGE-BANDWIDTH"]?parseInt(r["AVERAGE-BANDWIDTH"],10):null,bandwidthInBitsPerSec:r.BANDWIDTH?parseInt(r.BANDWIDTH,10):null,codecs:r.CODECS?r.CODECS.split(","):null,dimensions:r.RESOLUTION?{width:parseInt(r.RESOLUTION.split("x")[0],10),height:parseInt(r.RESOLUTION.split("x")[1],10)}:null,audio:r.AUDIO||null}}},566532,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseM3uMediaDirective=r.parseM3uKeyValue=void 0;let i=e.r(156468);r.parseM3uKeyValue=e=>{let t=(0,i.splitRespectingQuotes)(e),r={};for(let e of t){let t=e.indexOf("="),i=-1===t?e:e.slice(0,t),a=-1===t?null:e.slice(t+1);if(null===a)throw Error("Value is null");let n=(null==a?void 0:a.startsWith('"'))&&(null==a?void 0:a.endsWith('"'))?a.slice(1,-1):a;r[i]=n}return r},r.parseM3uMediaDirective=e=>{let t=(0,r.parseM3uKeyValue)(e);return{type:"m3u-media-info",autoselect:"YES"===t.AUTOSELECT,channels:t.CHANNELS?parseInt(t.CHANNELS,10):null,default:"YES"===t.DEFAULT,groupId:t["GROUP-ID"],language:t.LANGUAGE||null,name:t.NAME||null,uri:t.URI,mediaType:t.TYPE||null}}},302723,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseM3uDirective=void 0;let i=e.r(566532),a=e.r(156468);r.parseM3uDirective=e=>{let t=e.indexOf(":"),r=(-1===t?e:e.slice(0,t)).trim(),n=-1===t?null:e.slice(t+1);if("#EXT-X-VERSION"===r){if(!n)throw Error("EXT-X-VERSION directive must have a value");return{type:"m3u-version",version:n}}if("#EXT-X-INDEPENDENT-SEGMENTS"===r)return{type:"m3u-independent-segments"};if("#EXT-X-MEDIA"===r){if(!n)throw Error("EXT-X-MEDIA directive must have a value");return(0,i.parseM3uMediaDirective)(n)}if("#EXT-X-TARGETDURATION"===r){if(!n)throw Error("EXT-X-TARGETDURATION directive must have a value");return{type:"m3u-target-duration",duration:parseFloat(n)}}if("#EXTINF"===r){if(!n)throw Error("EXTINF has no value");return{type:"m3u-extinf",value:parseFloat(n)}}if("#EXT-X-ENDLIST"===r)return{type:"m3u-endlist"};if("#EXT-X-PLAYLIST-TYPE"===r){if(!n)throw Error("#EXT-X-PLAYLIST-TYPE. directive must have a value");return{type:"m3u-playlist-type",playlistType:n}}if("#EXT-X-MEDIA-SEQUENCE"===r){if(!n)throw Error("#EXT-X-MEDIA-SEQUENCE directive must have a value");return{type:"m3u-media-sequence",value:Number(n)}}if("#EXT-X-DISCONTINUITY-SEQUENCE"===r){if(!n)throw Error("#EXT-X-DISCONTINUITY-SEQUENCE directive must have a value");return{type:"m3u-discontinuity-sequence",value:Number(n)}}if("#EXT-X-STREAM-INF"===r){if(!n)throw Error("EXT-X-STREAM-INF directive must have a value");return(0,a.parseStreamInf)(n)}if("#EXT-X-I-FRAME-STREAM-INF"===r)return{type:"m3u-i-frame-stream-info"};if("#EXT-X-ALLOW-CACHE"===r){if(!n)throw Error("#EXT-X-ALLOW-CACHE directive must have a value");return{type:"m3u-allow-cache",allowsCache:"YES"===n}}if("#EXT-X-MAP"===r){if(!n)throw Error("#EXT-X-MAP directive must have a value");let e=(0,i.parseM3uKeyValue)(n);if(!e.URI)throw Error("EXT-X-MAP directive must have a URI");return{type:"m3u-map",value:e.URI}}if("#EXT-X-PROGRAM-DATE-TIME"===r){if(!n)throw Error("#EXT-X-PROGRAM-DATE-TIME directive must have a value");return{type:"m3u-program-date-time",dateTime:n}}throw Error(`Unknown directive ${r}. Value: ${n}`)}},770298,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseM3u8Text=void 0;let i=e.r(302723);r.parseM3u8Text=(e,t)=>{"#EXTM3U"===e?t.push({type:"m3u-header"}):e.startsWith("#")?t.push((0,i.parseM3uDirective)(e)):e.trim()&&t.push({type:"m3u-text-value",value:e})}},499394,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fetchM3u8Stream=void 0;let i=e.r(770298);r.fetchM3u8Stream=async({url:e,readerInterface:t})=>{let r=(await t.readWholeAsText(e)).split("\n"),a=[];for(let e of r)(0,i.parseM3u8Text)(e.trim(),a);return a}},547599,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultSelectM3uStreamFn=r.selectStream=r.defaultSelectM3uAssociatedPlaylists=r.selectAssociatedPlaylists=void 0,r.selectAssociatedPlaylists=async({playlists:e,fn:t,skipAudioTracks:r})=>{if(e.length<1)return Promise.resolve([]);let i=await t({associatedPlaylists:e});if(!Array.isArray(i))throw Error("Expected an array of associated playlists");let a=[];for(let t of i)if(!t.isAudio||!r){if(!e.find(e=>e.src===t.src))throw Error(`The associated playlist ${JSON.stringify(i)} cannot be selected because it was not in the list of selectable playlists`);a.push(t)}return a},r.defaultSelectM3uAssociatedPlaylists=({associatedPlaylists:e})=>1===e.length?e:e.filter(e=>e.default),r.selectStream=async({streams:e,fn:t})=>{if(e.length<1)throw Error("No streams found");let r=await t({streams:e}),i=e.find(e=>e.id===r);if(!i)throw Error(`No stream with the id ${r} found`);return Promise.resolve(i)},r.defaultSelectM3uStreamFn=({streams:e})=>Promise.resolve(e[0].id)},790473,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.afterManifestFetch=void 0;let i=e.r(66415),a=e.r(499394),n=e.r(345458),o=e.r(547599);r.afterManifestFetch=async({structure:e,m3uState:t,src:r,selectM3uStreamFn:s,logLevel:l,selectAssociatedPlaylistsFn:u,readerInterface:c,onAudioTrack:d,canSkipTracks:p})=>{let f=(0,n.isIndependentSegments)(e),h=(0,n.getM3uStreams)({structure:e,originalSrc:r,readerInterface:c});if(!f||null===h){if(!r)throw Error("No src");return t.setSelectedMainPlaylist({type:"initial-url",url:r}),t.setReadyToIterateOverM3u()}let m=await (0,o.selectStream)({streams:h,fn:s});if(!m.dimensions)throw Error("Stream does not have a resolution");t.setSelectedMainPlaylist({type:"selected-stream",stream:m});let g=null===d&&!1===p.doFieldsNeedTracks(),v=await (0,o.selectAssociatedPlaylists)({playlists:m.associatedPlaylists,fn:u,skipAudioTracks:g});t.setAssociatedPlaylists(v);let y=[m.src,...v.map(e=>e.src)],b=await Promise.all(y.map(async e=>(i.Log.verbose(l,`Fetching playlist ${e}`),{type:"m3u-playlist",boxes:await (0,a.fetchM3u8Stream)({url:e,readerInterface:c}),src:e})));e.boxes.push(...b),t.setReadyToIterateOverM3u()}},320618,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseM3uManifest=void 0;let i=e.r(770298);r.parseM3uManifest=({iterator:e,structure:t,contentLength:r})=>{let a=e.startCheckpoint(),n=e.readUntilLineEnd();if(e.counter.getOffset()>r)throw Error("Unexpected end of file");return null===n?a.returnToCheckpoint():(0,i.parseM3u8Text)(n.trim(),t.boxes),Promise.resolve(null)}},641269,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.forwardMediaParserControllerPauseResume=void 0,r.forwardMediaParserControllerPauseResume=({parentController:e,childController:t})=>{let r=({detail:e})=>{t.abort(e.reason)},i=()=>{t.resume()},a=()=>{t.pause()};return e.addEventListener("abort",r),e.addEventListener("resume",i),e.addEventListener("pause",a),{cleanup:()=>{e.removeEventListener("abort",r),e.removeEventListener("resume",i),e.removeEventListener("pause",a)}}}},939230,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getLengthAndReader=void 0,r.getLengthAndReader=async({canLiveWithoutContentLength:e,res:t,ownController:r,requestedWithoutRange:i})=>{let a=t.headers.get("content-length"),n=null===a?null:parseInt(a,10);if(i||e&&null===n){let e=new Uint8Array(await t.arrayBuffer()),i=!1,a=new ReadableStream({start(t){if(!r.signal.aborted&&!i)try{t.enqueue(e),t.close()}catch(e){}},cancel(){i=!0}});return{contentLength:e.byteLength,reader:{reader:a.getReader(),abort:()=>(r.abort(),Promise.resolve())},needsContentRange:!1}}if(!t.body)throw Error("No body");return{reader:{reader:t.body.getReader(),abort:()=>(r.abort(),Promise.resolve())},contentLength:n,needsContentRange:!0}}},758965,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.resolveUrl=void 0,r.resolveUrl=e=>{try{return new URL(e)}catch(t){return e}}},869425,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fetchReader=r.fetchCreateAdjacentFileSource=r.fetchReadWholeAsText=r.fetchPreload=r.fetchReadContent=r.makeFetchRequest=void 0,r.parseContentRange=s;let i=e.r(634506),a=e.r(66415),n=e.r(939230),o=e.r(758965);function s(e){let t=e.match(/^(\w+) ((\d+)-(\d+)|\*)\/(\d+|\*)$/);if(!t)return null;let[,r,,i,a,n]=t,o={unit:r,start:null!=i?Number(i):null,end:null!=a?Number(a):null,size:"*"===n?null:Number(n)};return null===o.start&&null===o.end&&null===o.size?null:o}r.makeFetchRequest=async({range:e,src:t,controller:r})=>{var a;let l=(0,o.resolveUrl)(t),u=l.toString();if(!u.startsWith("https://")&&!u.startsWith("blob:")&&!u.startsWith("data:")&&!u.startsWith("http://"))return Promise.reject(Error(`${u} is not a URL - needs to start with http:// or https:// or blob:. If you want to read a local file, pass \`reader: nodeReader\` to parseMedia().`));let c=new AbortController,d="u">typeof navigator&&navigator.userAgent.includes("Cloudflare-Workers")?void 0:"no-store",p=null===e?0:e,f="string"==typeof l?l:l.pathname,h=f.endsWith(".m3u8"),m=f.endsWith(".m3u8")||f.endsWith(".ts"),g=0===p&&h?{}:"number"==typeof p?{Range:`bytes=${p}-`}:{Range:`bytes=${p[0]}-${p[1]}`},v=await fetch(l,{headers:g,signal:c.signal,cache:d}),y=v.headers.get("content-range"),b=y?s(y):null;if(!v.ok)throw Error(`Server returned status code ${v.status} for ${l} and range ${p}`);let{supportsContentRange:x}=(({requestedRange:e,parsedContentRange:t,statusCode:r})=>{if(206===r)return{supportsContentRange:!0};if("number"==typeof e&&(null==t?void 0:t.start)!==e){if(0===e)return{supportsContentRange:!1};throw Error(`Range header (${e}) does not match content-range header (${null==t?void 0:t.start})`)}if(null!==e&&"number"!=typeof e&&((null==t?void 0:t.start)!==e[0]||(null==t?void 0:t.end)!==e[1]))throw Error(`Range header (${e}) does not match content-range header (${null==t?void 0:t.start})`);return{supportsContentRange:!0}})({requestedRange:p,parsedContentRange:b,statusCode:v.status});r&&r._internals.signal.addEventListener("abort",()=>{c.abort(new i.MediaParserAbortError("Aborted by user"))},{once:!0});let w=v.headers.get("content-disposition"),S=null==(a=null==w?void 0:w.match(/filename="([^"]+)"/))?void 0:a[1],{contentLength:k,needsContentRange:C,reader:E}=await (0,n.getLengthAndReader)({canLiveWithoutContentLength:m,res:v,ownController:c,requestedWithoutRange:h});return{contentLength:k,needsContentRange:C,reader:E,name:S,contentType:v.headers.get("content-type"),supportsContentRange:x}};let l=({src:e,range:t})=>`${e}-${JSON.stringify(t)}`,u=({range:e,src:t,controller:i,logLevel:n,prefetchCache:o})=>{let s=l({src:t,range:e}),u=o.get(s);if(u)return a.Log.verbose(n,`Reading from preload cache for ${s}`),u;a.Log.verbose(n,`Fetching ${s}`);let c=(0,r.makeFetchRequest)({range:e,src:t,controller:i});return o.set(s,c),c};r.fetchReadContent=async({src:e,range:t,controller:r,logLevel:i,prefetchCache:a})=>{if("string"!=typeof e&&e instanceof URL==!1)throw Error("src must be a string when using `fetchReader`");let n=e.toString().split("/").pop(),o=u({range:t,src:e,controller:r,logLevel:i,prefetchCache:a}),s=l({src:e,range:t});a.delete(s);let{reader:c,contentLength:d,needsContentRange:p,name:f,supportsContentRange:h,contentType:m}=await o;return r&&r._internals.signal.addEventListener("abort",()=>{c.reader.cancel().catch(()=>{})},{once:!0}),{reader:c,contentLength:d,contentType:m,name:null!=f?f:n,supportsContentRange:h,needsContentRange:p}},r.fetchPreload=({src:e,range:t,logLevel:r,prefetchCache:i})=>{if("string"!=typeof e&&e instanceof URL==!1)throw Error("src must be a string when using `fetchReader`");let a=l({src:e,range:t});if(i.has(a))return i.get(a);u({range:t,src:e,controller:null,logLevel:r,prefetchCache:i})},r.fetchReadWholeAsText=async e=>{if("string"!=typeof e&&e instanceof URL==!1)throw Error("src must be a string when using `fetchReader`");let t=await fetch(e);if(!t.ok)throw Error(`Failed to fetch ${e} (HTTP code: ${t.status})`);return t.text()},r.fetchCreateAdjacentFileSource=(e,t)=>{if("string"!=typeof t&&t instanceof URL==!1)throw Error("src must be a string or URL when using `fetchReader`");return new URL(e,t).toString()},r.fetchReader={read:r.fetchReadContent,readWholeAsText:r.fetchReadWholeAsText,createAdjacentFileSource:r.fetchCreateAdjacentFileSource,preload:r.fetchPreload}},711131,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.webFileReader=r.webFileCreateAdjacentFileSource=r.webFileReadWholeAsText=r.webFileReadContent=void 0,r.webFileReadContent=({src:e,range:t,controller:r})=>{if("string"==typeof e||e instanceof URL)throw Error("`inputTypeFileReader` only supports `File` objects");let i=(null===t?e:"number"==typeof t?e.slice(t):e.slice(t[0],t[1]+1)).stream().getReader();return r&&r._internals.signal.addEventListener("abort",()=>{i.cancel()},{once:!0}),Promise.resolve({reader:{reader:i,async abort(){try{await i.cancel()}catch(e){}return Promise.resolve()}},contentLength:e.size,name:e instanceof File?e.name:e.toString(),supportsContentRange:!0,contentType:e.type,needsContentRange:!0})},r.webFileReadWholeAsText=()=>{throw Error("`webFileReader` cannot read auxiliary files.")},r.webFileCreateAdjacentFileSource=()=>{throw Error("`webFileReader` cannot create adjacent file sources.")},r.webFileReader={read:r.webFileReadContent,readWholeAsText:r.webFileReadWholeAsText,createAdjacentFileSource:r.webFileCreateAdjacentFileSource,preload:()=>{}}},462116,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.webReader=void 0;let i=e.r(869425),a=e.r(711131);r.webReader={read:e=>e.src instanceof Blob?(0,a.webFileReadContent)(e):(0,i.fetchReadContent)(e),createAdjacentFileSource:(e,t)=>t instanceof Blob?(0,a.webFileCreateAdjacentFileSource)(e,t):(0,i.fetchCreateAdjacentFileSource)(e,t),readWholeAsText:e=>e instanceof Blob?(0,a.webFileReadWholeAsText)(e):(0,i.fetchReadWholeAsText)(e),preload:({range:e,src:t,logLevel:r,prefetchCache:a})=>{if(!(t instanceof Blob))return(0,i.fetchPreload)({range:e,src:t,logLevel:r,prefetchCache:a})}}},686841,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.webReader=void 0;var i=e.r(462116);Object.defineProperty(r,"webReader",{enumerable:!0,get:function(){return i.webReader}})},130845,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseMedia=void 0;let i=e.r(547599),a=e.r(263139),n=e.r(686841);r.parseMedia=e=>{var t,r,o,s,l,u,c,d,p,f,h,m,g,v,y,b,x,w,S,k,C,E,_,T,P,I,A,O,M,F,R,D,j,L,B,N,$,z,U,V,H;return e?(0,a.internalParseMedia)({fields:null!=(t=e.fields)?t:null,logLevel:null!=(r=e.logLevel)?r:"info",onAudioCodec:null!=(o=e.onAudioCodec)?o:null,onAudioTrack:null!=(s=e.onAudioTrack)?s:null,onContainer:null!=(l=e.onContainer)?l:null,onDimensions:null!=(u=e.onDimensions)?u:null,onDurationInSeconds:null!=(c=e.onDurationInSeconds)?c:null,onFps:null!=(d=e.onFps)?d:null,onImages:null!=(p=e.onImages)?p:null,onInternalStats:null!=(f=e.onInternalStats)?f:null,onIsHdr:null!=(h=e.onIsHdr)?h:null,onKeyframes:null!=(m=e.onKeyframes)?m:null,onLocation:null!=(g=e.onLocation)?g:null,onMetadata:null!=(v=e.onMetadata)?v:null,onMimeType:null!=(y=e.onMimeType)?y:null,onName:null!=(b=e.onName)?b:null,onNumberOfAudioChannels:null!=(x=e.onNumberOfAudioChannels)?x:null,onParseProgress:null!=(w=e.onParseProgress)?w:null,onRotation:null!=(S=e.onRotation)?S:null,onSampleRate:null!=(k=e.onSampleRate)?k:null,onSize:null!=(C=e.onSize)?C:null,onSlowAudioBitrate:null!=(E=e.onSlowAudioBitrate)?E:null,onSlowDurationInSeconds:null!=(_=e.onSlowDurationInSeconds)?_:null,onSlowFps:null!=(T=e.onSlowFps)?T:null,onSlowKeyframes:null!=(P=e.onSlowKeyframes)?P:null,onSlowNumberOfFrames:null!=(I=e.onSlowNumberOfFrames)?I:null,onSlowVideoBitrate:null!=(A=e.onSlowVideoBitrate)?A:null,onSlowStructure:null!=(O=e.onSlowStructure)?O:null,onM3uStreams:null!=(M=e.onM3uStreams)?M:null,onTracks:null!=(F=e.onTracks)?F:null,onUnrotatedDimensions:null!=(R=e.onUnrotatedDimensions)?R:null,onVideoCodec:null!=(D=e.onVideoCodec)?D:null,onVideoTrack:null!=(j=e.onVideoTrack)?j:null,progressIntervalInMs:null!=(L=e.progressIntervalInMs)?L:null,reader:null!=(B=e.reader)?B:n.webReader,controller:null!=(N=e.controller)?N:void 0,selectM3uStream:null!=($=e.selectM3uStream)?$:i.defaultSelectM3uStreamFn,selectM3uAssociatedPlaylists:null!=(z=e.selectM3uAssociatedPlaylists)?z:i.defaultSelectM3uAssociatedPlaylists,m3uPlaylistContext:null!=(U=e.m3uPlaylistContext)?U:null,src:e.src,mode:"query",onDiscardedData:null,onError:()=>({action:"fail"}),acknowledgeRemotionLicense:!!e.acknowledgeRemotionLicense,apiName:"parseMedia()",makeSamplesStartAtZero:null==(V=e.makeSamplesStartAtZero)||V,seekingHints:null!=(H=e.seekingHints)?H:null}):Promise.reject(Error("No options provided. See https://www.remotion.dev/media-parser for how to get started."))}},85479,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.considerSeekBasedOnChunk=void 0;let i=e.r(452893);r.considerSeekBasedOnChunk=async({sample:e,parentController:t,childController:r,callback:a,m3uState:n,playlistUrl:o,subtractChunks:s,chunkIndex:l})=>{let u=n.getSeekToSecondsToProcess(o);if(null===u)return void await a(e);if(Math.min(e.decodingTimestamp/i.WEBCODECS_TIMESCALE,e.timestamp/i.WEBCODECS_TIMESCALE)>u.targetTime&&null!==l&&l>0){n.setNextSeekShouldSubtractChunks(o,s+1),t.seek(u.targetTime);return}r.seek(u.targetTime),n.setNextSeekShouldSubtractChunks(o,0),n.setSeekToSecondsToProcess(o,null)}},767112,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getChunks=void 0,r.getChunks=e=>{let t=[];for(let r=0;r<e.boxes.length;r++){let i=e.boxes[r];if("m3u-map"===i.type){t.push({duration:0,url:i.value,isHeader:!0});continue}if("m3u-extinf"===i.type){let a=e.boxes[r+1];if(r++,"m3u-text-value"!==a.type)throw Error("Expected m3u-text-value");t.push({duration:i.value,url:a.value,isHeader:!1})}}return t}},131929,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getChunkToSeekTo=void 0,r.getChunkToSeekTo=({chunks:e,seekToSecondsToProcess:t})=>{let r=0;for(let i=0;i<e.length;i++){if(r>=t)return Math.max(0,i-1);r+=e[i].duration}return Math.max(0,e.length-1)}},167553,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.processM3uChunk=void 0;let i=e.r(689127),a=e.r(641269),n=e.r(130845),o=e.r(882757),s=e.r(725436),l=e.r(85479),u=e.r(767112),c=e.r(897508),d=e.r(131929);r.processM3uChunk=({playlistUrl:e,state:t,structure:r,audioDone:p,videoDone:f})=>{let{promise:h,reject:m,resolve:g}=(0,s.withResolvers)(),v=p?null:async r=>{let i=t.callbacks.tracks.getTracks(),{trackId:a}=r;for(;i.find(e=>e.trackId===a);)a++;let n=await (0,o.registerAudioTrack)({container:"m3u8",track:{...r,trackId:a},registerAudioSampleCallback:t.callbacks.registerAudioSampleCallback,tracks:t.callbacks.tracks,logLevel:t.logLevel,onAudioTrack:t.onAudioTrack});return(t.m3u.sampleSorter.addToStreamWithTrack(e),null===n)?null:(t.m3u.sampleSorter.addAudioStreamToConsider(e,n),async r=>{await t.m3u.sampleSorter.addAudioSample(e,r)})},y=f?null:async r=>{let i=t.callbacks.tracks.getTracks(),{trackId:a}=r;for(;i.find(e=>e.trackId===a);)a++;let n=await (0,o.registerVideoTrack)({container:"m3u8",track:{...r,trackId:a},logLevel:t.logLevel,onVideoTrack:t.onVideoTrack,registerVideoSampleCallback:t.callbacks.registerVideoSampleCallback,tracks:t.callbacks.tracks});return(t.m3u.sampleSorter.addToStreamWithTrack(e),null===n)?null:(t.m3u.sampleSorter.addVideoStreamToConsider(e,n),async r=>{await t.m3u.sampleSorter.addVideoSample(e,r)})};return(async()=>{let o=(0,c.getPlaylist)(r,e),p=(0,u.getChunks)(o),f=t.m3u.getSeekToSecondsToProcess(e),h=t.m3u.getNextSeekShouldSubtractChunks(e),b=null;null!==f&&(b=Math.max(0,(0,d.getChunkToSeekTo)({chunks:p,seekToSecondsToProcess:f.targetTime})-h));let x={resolver:()=>void 0,rejector:m},w=p[0].isHeader;for(let r of p){let o=t.m3u.getMp4HeaderSegment(e);if(w&&o&&r.isHeader||null!==b&&p.indexOf(r)<b&&!r.isHeader)continue;x.resolver=r=>{t.m3u.setM3uStreamRun(e,r),g()},x.rejector=m;let u=(0,i.mediaParserController)(),c=(0,a.forwardMediaParserControllerPauseResume)({childController:u,parentController:t.controller}),d=p[p.indexOf(r)+1];if(d){let r=t.readerInterface.createAdjacentFileSource(d.url,e);t.readerInterface.preload({logLevel:t.logLevel,range:null,src:r,prefetchCache:t.prefetchCache})}let f=()=>({continue(){let e=(0,s.withResolvers)();return x.resolver=e.resolve,x.rejector=e.reject,u.resume(),e.promise},abort(){u.abort()}}),S=r===p[p.length-1];await u._internals.checkForAbortAndPause();let k=t.readerInterface.createAdjacentFileSource(r.url,e);try{let i=await (0,n.parseMedia)({src:k,acknowledgeRemotionLicense:!0,logLevel:t.logLevel,controller:u,progressIntervalInMs:0,onParseProgress:()=>{u.pause(),x.resolver(f())},fields:r.isHeader?{slowStructure:!0}:void 0,onTracks:()=>{if(!t.m3u.hasEmittedDoneWithTracks(e))return t.m3u.setHasEmittedDoneWithTracks(e),t.m3u.setTracksDone(e)&&t.callbacks.tracks.setIsDone(t.logLevel),null},onAudioTrack:null===v?null:async({track:r})=>{let i=t.m3u.hasEmittedAudioTrack(e);if(!1===i){let i=await v(r);return i?(t.m3u.setHasEmittedAudioTrack(e,i),async r=>{await (0,l.considerSeekBasedOnChunk)({sample:r,callback:i,parentController:t.controller,childController:u,m3uState:t.m3u,playlistUrl:e,subtractChunks:h,chunkIndex:b})}):(t.m3u.setHasEmittedAudioTrack(e,null),null)}return null===i?null:async r=>{await (0,l.considerSeekBasedOnChunk)({sample:r,m3uState:t.m3u,playlistUrl:e,callback:i,parentController:t.controller,childController:u,subtractChunks:h,chunkIndex:b})}},onVideoTrack:null===y?null:async({track:i})=>{let a=t.m3u.hasEmittedVideoTrack(e);if(!1===a){let a=await y({...i,m3uStreamFormat:r.isHeader||o?"mp4":"ts"});return a?(t.m3u.setHasEmittedVideoTrack(e,a),async r=>{await (0,l.considerSeekBasedOnChunk)({sample:r,m3uState:t.m3u,playlistUrl:e,callback:a,parentController:t.controller,childController:u,subtractChunks:h,chunkIndex:b})}):(t.m3u.setHasEmittedVideoTrack(e,null),null)}return null===a?null:async r=>{await (0,l.considerSeekBasedOnChunk)({sample:r,m3uState:t.m3u,playlistUrl:e,callback:a,parentController:t.controller,childController:u,subtractChunks:h,chunkIndex:b})}},reader:t.readerInterface,makeSamplesStartAtZero:!1,m3uPlaylistContext:{mp4HeaderSegment:o,isLastChunkInPlaylist:S}});if(r.isHeader){if("iso-base-media"!==i.slowStructure.type)throw Error("Expected an mp4 file");t.m3u.setMp4HeaderSegment(e,i.slowStructure)}}catch(e){throw x.rejector(e),e}c.cleanup(),S||(u.pause(),x.resolver(f()))}x.resolver(null)})().catch(e=>{m(e)}),h}},383594,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.runOverM3u=void 0;let i=e.r(66415),a=e.r(167553);r.runOverM3u=async({state:e,structure:t,playlistUrl:r,logLevel:n})=>{let o=e.m3u.getTrackDone(r),s=e.m3u.sampleSorter.hasAudioStreamToConsider(r),l=e.m3u.sampleSorter.hasVideoStreamToConsider(r),u=!s&&o,c=!l&&o;if(u&&c)return void e.m3u.setAllChunksProcessed(r);let d=e.m3u.getM3uStreamRun(r);if(d){i.Log.trace(n,"Existing M3U parsing process found for",r);let t=await d.continue();e.m3u.setM3uStreamRun(r,t),t||e.m3u.setAllChunksProcessed(r);return}i.Log.trace(n,"Starting new M3U parsing process for",r),await (0,a.processM3uChunk)({playlistUrl:r,state:e,structure:t,audioDone:u,videoDone:c})}},957471,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseM3u=void 0;let i=e.r(790473),a=e.r(320618),n=e.r(383594);r.parseM3u=async({state:e})=>{let t=e.structure.getM3uStructure();if(e.m3u.isReadyToIterateOverM3u()){let r=e.m3u.getSelectedPlaylists(),i=e.m3u.sampleSorter.getNextStreamToRun(r);return await (0,n.runOverM3u)({state:e,structure:t,playlistUrl:i,logLevel:e.logLevel}),null}if(e.m3u.hasFinishedManifest()){if("string"!=typeof e.src&&!(e.src instanceof URL))throw Error("Expected src to be a string");return e.mediaSection.addMediaSection({start:0,size:e.contentLength+1}),await (0,i.afterManifestFetch)({structure:t,m3uState:e.m3u,src:e.src.toString(),selectM3uStreamFn:e.selectM3uStreamFn,logLevel:e.logLevel,selectAssociatedPlaylistsFn:e.selectM3uAssociatedPlaylistsFn,readerInterface:e.readerInterface,onAudioTrack:e.onAudioTrack,canSkipTracks:e.callbacks.canSkipTracksState}),null}let r=await (0,a.parseM3uManifest)({iterator:e.iterator,structure:t,contentLength:e.contentLength});return e.iterator.counter.getOffset()===e.contentLength&&e.m3u.setHasFinishedManifest(),r}},525746,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseId3=void 0,r.parseId3=({state:e})=>{var t,r;let{iterator:i}=e;if(9>i.bytesRemaining())return;let{returnToCheckpoint:a}=i.startCheckpoint();i.discard(3);let n=i.getUint8(),o=i.getUint8(),s=i.getUint8(),l=i.getSlice(4),u=(t=l[0],r=l[1],(127&t)<<21|(127&r)<<14|(127&l[2])<<7|127&l[3]);if(i.bytesRemaining()<u)return void a();let c=[],d=i.counter.getOffset();for(;i.counter.getOffset()<u+d;){let t=3===n||4===n?i.getByteString(4,!0):i.getByteString(3,!0);if(""===t){i.discard(u+d-i.counter.getOffset());break}let r=4===n?i.getSyncSafeInt32():3===n?i.getUint32():i.getUint24();(3===n||4===n)&&i.getUint16();let a=0;if(t.startsWith("W")||(i.getUint8(),a+=1),"APIC"===t){let{discardRest:t}=i.planBytes(r-a),n=i.readUntilNullTerminator();i.getUint16();let o=i.readUntilNullTerminator();i.discard(1);let s=t();e.images.addImage({data:s,description:o,mimeType:n})}else{let e=i.getByteString(r-a,!0);c.push({key:t,value:e,trackId:null})}}e.structure.getMp3Structure().boxes.push({type:"id3-header",flags:s,size:u,versionMajor:n,versionMinor:o,metatags:c})}},324557,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseID3V1=void 0,r.parseID3V1=e=>{128>e.bytesRemaining()||e.discard(128)}},278085,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isMp3PacketHeaderHereAndInNext=r.isMp3PacketHeaderHere=r.parseMp3PacketHeader=void 0;let i=e.r(381767),a=e.r(270866),n=e=>{for(let t=0;t<11;t++)if(1!==e.getBits(1))throw Error("Expected 1");let t=e.getBits(2);if(3!==t&&2!==t&&0!==t)throw Error("Expected MPEG Version 1 or 2");let r=3===t?1:2,n=e.getBits(2);if(0===n)throw Error("Expected Layer I, II or III");let o=3===n?1:2===n?2:3;e.getBits(1);let s=function({bits:e,mpegVersion:t,level:r}){return({0:{"V1,L1":"free","V1,L2":"free","V1,L3":"free","V2,L1":"free","V2,L2&L3":"free"},1:{"V1,L1":32,"V1,L2":32,"V1,L3":32,"V2,L1":32,"V2,L2&L3":8},2:{"V1,L1":64,"V1,L2":48,"V1,L3":40,"V2,L1":48,"V2,L2&L3":16},3:{"V1,L1":96,"V1,L2":56,"V1,L3":48,"V2,L1":56,"V2,L2&L3":24},4:{"V1,L1":128,"V1,L2":64,"V1,L3":56,"V2,L1":64,"V2,L2&L3":32},5:{"V1,L1":160,"V1,L2":80,"V1,L3":64,"V2,L1":80,"V2,L2&L3":40},6:{"V1,L1":192,"V1,L2":96,"V1,L3":80,"V2,L1":96,"V2,L2&L3":48},7:{"V1,L1":224,"V1,L2":112,"V1,L3":96,"V2,L1":112,"V2,L2&L3":56},8:{"V1,L1":256,"V1,L2":128,"V1,L3":112,"V2,L1":128,"V2,L2&L3":64},9:{"V1,L1":288,"V1,L2":160,"V1,L3":128,"V2,L1":144,"V2,L2&L3":80},10:{"V1,L1":320,"V1,L2":192,"V1,L3":160,"V2,L1":160,"V2,L2&L3":96},11:{"V1,L1":352,"V1,L2":224,"V1,L3":192,"V2,L1":176,"V2,L2&L3":112},12:{"V1,L1":384,"V1,L2":256,"V1,L3":224,"V2,L1":192,"V2,L2&L3":128},13:{"V1,L1":416,"V1,L2":320,"V1,L3":256,"V2,L1":224,"V2,L2&L3":144},14:{"V1,L1":448,"V1,L2":384,"V1,L3":320,"V2,L1":256,"V2,L2&L3":160},15:{"V1,L1":"bad","V1,L2":"bad","V1,L3":"bad","V2,L1":"bad","V2,L2&L3":"bad"}})[e][2===t&&(2===r||3===r)?"V2,L2&L3":`V${t},L${r}`]}({bits:e.getBits(4),mpegVersion:r,level:o});if("bad"===s)throw Error("Invalid bitrate");if("free"===s)throw Error("Free bitrate not supported");let l=function({bits:e,mpegVersion:t}){let r={0:{MPEG1:44100,MPEG2:22050},1:{MPEG1:48e3,MPEG2:24e3},2:{MPEG1:32e3,MPEG2:16e3},3:{MPEG1:"reserved",MPEG2:"reserved"}}[e][`MPEG${t}`];if("reserved"===r)throw Error("Reserved sampling frequency");if(!r)throw Error("Invalid sampling frequency for MPEG version: "+JSON.stringify({bits:e,version:t}));return r}({bits:e.getBits(2),mpegVersion:r}),u=0===t?l/2:l,c=!!e.getBits(1);e.getBits(1);let d=e.getBits(2);e.getBits(2),e.getBits(1),e.getBits(1),e.getBits(2);let p=(0,a.getSamplesPerMpegFrame)({mpegVersion:r,layer:o});return{frameLength:(0,i.getMpegFrameLength)({bitrateKbit:s,padding:c,samplesPerFrame:p,samplingFrequency:u,layer:o}),bitrateInKbit:s,layer:o,mpegVersion:r,numberOfChannels:3===d?1:2,sampleRate:u,samplesPerFrame:p}};r.parseMp3PacketHeader=e=>{e.startReadingBits();let t=n(e);return e.stopReadingBits(),t},r.isMp3PacketHeaderHere=e=>{let t=e.counter.getOffset();e.startReadingBits();try{let r=n(e);return e.stopReadingBits(),e.counter.decrement(e.counter.getOffset()-t),r}catch(r){return e.stopReadingBits(),e.counter.decrement(e.counter.getOffset()-t),!1}},r.isMp3PacketHeaderHereAndInNext=e=>{let t=e.counter.getOffset(),i=(0,r.isMp3PacketHeaderHere)(e);if(!i)return!1;if(e.bytesRemaining()<=i.frameLength)return!0;e.counter.increment(i.frameLength);let a=(0,r.isMp3PacketHeaderHere)(e);return e.counter.decrement(e.counter.getOffset()-t),a}},929694,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getAudioSampleFromCbr=void 0;let i=e.r(452893),a=e.r(381767);r.getAudioSampleFromCbr=({bitrateInKbit:e,initialOffset:t,layer:r,sampleRate:n,samplesPerFrame:o,data:s,state:l})=>{let u=(0,a.getAverageMpegFrameLength)({bitrateKbit:e,layer:r,samplesPerFrame:o,samplingFrequency:n});if(!l.mp3.getMp3Info())throw Error("No MP3 info");let c=Math.round((t-l.mediaSection.getMediaSectionAssertOnlyOne().start)/u),d=o/n,p=c*o/n,f=Math.floor(p*i.WEBCODECS_TIMESCALE);return{audioSample:{data:s,decodingTimestamp:f,duration:Math.floor(d*i.WEBCODECS_TIMESCALE),offset:t,timestamp:f,type:"key"},timeInSeconds:p,durationInSeconds:d}}},23798,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getAudioSampleFromVbr=void 0;let i=e.r(452893),a=e.r(918820),n=e.r(513996),o=e.r(270866);r.getAudioSampleFromVbr=({info:e,position:t,mp3Info:r,data:s})=>{if(!r)throw Error("No MP3 info");let l=(0,o.getSamplesPerMpegFrame)({layer:r.layer,mpegVersion:r.mpegVersion}),u=(0,a.getDurationFromMp3Xing)({samplesPerFrame:l,xingData:e.xingData});if(!e.xingData.fileSize)throw Error("file size");if(!e.xingData.tableOfContents)throw Error("table of contents");let c=(0,n.getTimeFromPosition)({durationInSeconds:u,fileSize:e.xingData.fileSize,position:t,tableOfContents:e.xingData.tableOfContents}),d=l/e.xingData.sampleRate,p=Math.floor(c*i.WEBCODECS_TIMESCALE);return{timeInSeconds:c,audioSample:{data:s,decodingTimestamp:p,duration:Math.floor(d*i.WEBCODECS_TIMESCALE),offset:t,timestamp:p,type:"key"},durationInSeconds:d}}},392873,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseMpegHeader=void 0;let i=e.r(66415),a=e.r(882757),n=e.r(452893),o=e.r(278085),s=e.r(513996),l=e.r(929694),u=e.r(23798);r.parseMpegHeader=async({state:e})=>{let{iterator:t}=e,r=t.counter.getOffset();if(32>t.bytesRemaining())return;let{frameLength:c,bitrateInKbit:d,layer:p,mpegVersion:f,numberOfChannels:h,sampleRate:m,samplesPerFrame:g}=(0,o.parseMp3PacketHeader)(t),v=e.mp3.getMp3BitrateInfo();if(v&&"constant"===v.type&&d!==v.bitrateInKbit)throw Error(`Bitrate mismatch at offset ${r}: ${d} !== ${v.bitrateInKbit}`);let y=t.counter.getOffset();t.counter.decrement(y-r);let b=t.getSlice(c);if(0===e.callbacks.tracks.getTracks().length){let t=new TextDecoder().decode(b);if(t.includes("VBRI"))throw Error("MP3 files with VBRI are currently unsupported because we have no sample file. Submit this file at remotion.dev/report if you would like us to support this file.");if(t.includes("Info"))return;if(t.includes("Xing")){let t=(0,s.parseXing)(b);i.Log.verbose(e.logLevel,"MP3 has variable bit rate. Requiring whole file to be read"),e.mp3.setMp3BitrateInfo({type:"variable",xingData:t});return}e.mp3.getMp3BitrateInfo()||e.mp3.setMp3BitrateInfo({bitrateInKbit:d,type:"constant"}),e.mp3.setMp3Info({layer:p,mpegVersion:f,sampleRate:m}),await (0,a.registerAudioTrack)({container:"mp3",track:{type:"audio",codec:"mp3",codecData:null,codecEnum:"mp3",description:void 0,numberOfChannels:h,sampleRate:m,originalTimescale:1e6,trackId:0,startInSeconds:0,timescale:n.WEBCODECS_TIMESCALE,trackMediaTimeOffsetInTrackTimescale:0},registerAudioSampleCallback:e.callbacks.registerAudioSampleCallback,tracks:e.callbacks.tracks,logLevel:e.logLevel,onAudioTrack:e.onAudioTrack}),e.callbacks.tracks.setIsDone(e.logLevel),e.mediaSection.addMediaSection({start:r,size:e.contentLength-r})}let x=e.mp3.getMp3BitrateInfo();if(!x)throw Error("No bitrate info");let{audioSample:w,timeInSeconds:S,durationInSeconds:k}="constant"===x.type?(0,l.getAudioSampleFromCbr)({bitrateInKbit:d,data:b,initialOffset:r,layer:p,sampleRate:m,samplesPerFrame:g,state:e}):(0,u.getAudioSampleFromVbr)({data:b,info:x,mp3Info:e.mp3.getMp3Info(),position:r});e.mp3.audioSamples.addSample({timeInSeconds:S,offset:r,durationInSeconds:k}),await e.callbacks.onAudioSample({audioSample:w,trackId:0})}},669893,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.discardUntilSyncword=void 0;let i=e.r(278085);r.discardUntilSyncword=({iterator:e})=>{for(;;){if(255===e.getUint8()){if(0===e.bytesRemaining())break;if((224&e.getUint8())==224){if(e.counter.decrement(2),(0,i.isMp3PacketHeaderHereAndInNext)(e))break;e.counter.increment(2)}}}}},625686,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseMp3=void 0;let i=e.r(525746),a=e.r(324557),n=e.r(392873),o=e.r(669893);r.parseMp3=async e=>{let{iterator:t}=e;if(3>t.bytesRemaining())return null;if("in-section"===e.mediaSection.isCurrentByteInMediaSection(t))return(0,o.discardUntilSyncword)({iterator:t}),await (0,n.parseMpegHeader)({state:e}),null;let{returnToCheckpoint:r}=t.startCheckpoint(),s=t.getSlice(3);if(r(),84===s[0]&&65===s[1]&&71===s[2])return(0,a.parseID3V1)(t),null;if(73===s[0]&&68===s[1]&&51===s[2])return(0,i.parseId3)({state:e}),null;if(255===s[0])return await (0,n.parseMpegHeader)({state:e}),null;throw Error("Unknown MP3 header "+JSON.stringify(s))}},950704,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getStrhForIndex=void 0;let i=e.r(248546);r.getStrhForIndex=(e,t)=>{let r=(0,i.getStrlBoxes)(e)[t];if(!r)throw Error("Expected box");let a=(0,i.getStrhBox)(r.children);if(!a)throw Error("strh");return a}},188380,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.convertQueuedSampleToMediaParserSample=void 0;let i=e.r(560247),a=e.r(950704);r.convertQueuedSampleToMediaParserSample=({sample:e,state:t,trackId:r})=>{let n=(0,a.getStrhForIndex)(t.structure.getRiffStructure(),r),o=n.rate/n.scale,{sampleOffsetAtKeyframe:s,pocsAtKeyframeOffset:l}=(({state:e,sample:t,trackId:r})=>{var i,a;if("key"===t.type)return{sampleOffsetAtKeyframe:e.riff.sampleCounter.getSampleCountForTrack({trackId:r}),pocsAtKeyframeOffset:[null!=(a=null==(i=t.avc)?void 0:i.poc)?a:0]};let n=e.riff.sampleCounter.riffKeys.getKeyframes().findLast(e=>e.positionInBytes<=t.offset);if(!n)throw Error("no keyframe at offset");return{sampleOffsetAtKeyframe:n.sampleCounts[r],pocsAtKeyframeOffset:e.riff.sampleCounter.getPocAtKeyframeOffset({keyframeOffset:n.positionInBytes})}})({sample:e,state:t,trackId:r}),u=l.findIndex(t=>{var r;return t===(null==(r=e.avc)?void 0:r.poc)});if(-1===u)throw Error("poc not found");let c=(u+s)/o;return(0,i.convertAudioOrVideoSampleToWebCodecsTimestamps)({sample:{...e,timestamp:c,decodingTimestamp:c},timescale:1})}},630838,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isMoviAtom=void 0,r.isMoviAtom=(e,t)=>{if("LIST"!==t)return!1;let r=e.getByteString(4,!1);return e.counter.decrement(4),"movi"===r}},7590,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseAvih=void 0,r.parseAvih=({iterator:e,size:t})=>{let{expectNoMoreBytes:r}=e.startBox(t),i=e.getUint32Le(),a=e.getUint32Le(),n=e.getUint32Le(),o=e.getUint32Le(),s=e.getUint32Le(),l=e.getUint32Le(),u=e.getUint32Le(),c=e.getUint32Le(),d=e.getUint32Le(),p=e.getUint32Le();return e.discard(16),r(),{type:"avih-box",hasIndex:(16&o)!=0,microSecPerFrame:i,maxBytesPerSecond:a,paddingGranularity:n,flags:o,totalFrames:s,initialFrames:l,streams:u,suggestedBufferSize:c,height:p,width:d}}},365404,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseIdx1=void 0,r.parseIdx1=({iterator:e,size:t})=>{let r=e.startBox(t),i=e.counter.getOffset(),a=[],n={},o=null;for(;e.counter.getOffset()<i+t;){let t=e.getByteString(4,!1),r=e.getUint32Le(),i=e.getUint32Le(),s=e.getUint32Le(),l=t.match(/^([0-9]{2})(wb|dc)$/);t.endsWith("dc")&&(o=l?parseInt(l[1],10):null);let u=l?parseInt(l[1],10):null;null!==u&&(n[u]||(n[u]=0),(16&r)!=0&&a.push({flags:r,id:t,offset:i,size:s,sampleCounts:{...n}}),n[u]++)}return r.expectNoMoreBytes(),{type:"idx1-box",entries:a,videoTrackIndex:o}}},162026,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseIsft=void 0,r.parseIsft=({iterator:e,size:t})=>{let{expectNoMoreBytes:r}=e.startBox(t),i=e.getByteString(t-1,!1),a=e.getUint8();if(0!==a)throw Error(`Expected 0 byte, got ${a}`);return r(),{type:"isft-box",software:i}}},260151,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseListBox=void 0;let i=e.r(379008);r.parseListBox=async({size:e,iterator:t,stateIfExpectingSideEffects:r})=>{let a=t.counter.getOffset(),n=t.getByteString(4,!1);if("movi"===n)throw Error("should not be handled here");let o=[],s=a+e;for(;t.counter.getOffset()<s;){let e=await (0,i.expectRiffBox)({iterator:t,stateIfExpectingSideEffects:r});if(null===e)throw Error("Unexpected result");r&&await (0,i.postProcessRiffBox)(r,e),o.push(e)}return{type:"list-box",listType:n,children:o}}},748657,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseStrf=void 0,r.parseStrf=({iterator:e,size:t,fccType:r})=>{if("vids"===r)return(({iterator:e,size:t})=>{let r=e.startBox(t),i=e.getUint32Le(),a=e.getInt32Le(),n=e.getInt32Le(),o=e.getUint16Le(),s=e.getUint16Le(),l=e.getByteString(4,!1),u=e.getUint32Le(),c=e.getInt32Le(),d=e.getInt32Le(),p=e.getUint32Le(),f=e.getUint32Le();return r.expectNoMoreBytes(),{type:"strf-box-video",biSize:i,bitCount:s,clrImportant:f,clrUsed:p,compression:l,height:n,planes:o,sizeImage:u,width:a,xPelsPerMeter:c,yPelsPerMeter:d}})({iterator:e,size:t});if("auds"===r)return(({iterator:e,size:t})=>{let r=e.startBox(t),i=e.getUint16Le(),a=e.getUint16Le(),n=e.getUint32Le(),o=e.getUint32Le(),s=e.getUint16Le(),l=e.getUint16Le(),u=e.getUint16Le();return r.expectNoMoreBytes(),{type:"strf-box-audio",avgBytesPerSecond:o,bitsPerSample:l,blockAlign:s,cbSize:u,formatTag:i,numberOfChannels:a,sampleRate:n}})({iterator:e,size:t});throw Error(`Unsupported fccType: ${r}`)}},515367,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseStrh=void 0;let i=e.r(748657);r.parseStrh=({iterator:e,size:t})=>{let r=e.startBox(t),a=e.getByteString(4,!1);if("vids"!==a&&"auds"!==a)throw Error("Expected AVI handler to be vids / auds");let n="vids"===a?e.getByteString(4,!1):e.getUint32Le();if("string"==typeof n&&"H264"!==n)throw Error(`Only H264 is supported as a stream type in .avi, got ${n}`);if("auds"===a&&1!==n)throw Error(`Only "1" is supported as a stream type in .avi, got ${n}`);let o=e.getUint32Le(),s=e.getUint16Le(),l=e.getUint16Le(),u=e.getUint32Le(),c=e.getUint32Le(),d=e.getUint32Le(),p=e.getUint32Le(),f=e.getUint32Le(),h=e.getUint32Le(),m=e.getUint32Le(),g=e.getUint32Le();r.discardRest();let v=e.getByteString(4,!1),y=e.getUint32Le();if("strf"!==v)throw Error(`Expected strf, got ${JSON.stringify(v)}`);if(e.bytesRemaining()<y)throw Error("Expected strf to be complete");let b=(0,i.parseStrf)({iterator:e,size:y,fccType:a});return{type:"strh-box",fccType:a,handler:n,flags:o,priority:s,initialFrames:u,length:f,quality:m,rate:d,sampleSize:g,scale:c,start:p,suggestedBufferSize:h,language:l,strf:b}}},765313,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseRiffBox=void 0;let i=e.r(7590),a=e.r(365404),n=e.r(162026),o=e.r(260151),s=e.r(515367);r.parseRiffBox=({size:e,id:t,iterator:r,stateIfExpectingSideEffects:l})=>"LIST"===t?(0,o.parseListBox)({size:e,iterator:r,stateIfExpectingSideEffects:l}):"ISFT"===t?Promise.resolve((0,n.parseIsft)({iterator:r,size:e})):"avih"===t?Promise.resolve((0,i.parseAvih)({iterator:r,size:e})):"strh"===t?Promise.resolve((0,s.parseStrh)({iterator:r,size:e})):"idx1"===t?Promise.resolve((0,a.parseIdx1)({iterator:r,size:e})):(r.discard(e),Promise.resolve({type:"riff-box",size:e,id:t}))},379008,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.expectRiffBox=r.postProcessRiffBox=void 0;let i=e.r(882757),a=e.r(737232),n=e.r(277652),o=e.r(630838),s=e.r(765313);r.postProcessRiffBox=async(e,t)=>{if("strh-box"===t.type){if("strf-box-audio"===t.strf.type&&e.onAudioTrack){let r=(0,a.makeAviAudioTrack)({index:e.riff.getNextTrackIndex(),strf:t.strf});await (0,i.registerAudioTrack)({track:r,container:"avi",registerAudioSampleCallback:e.callbacks.registerAudioSampleCallback,tracks:e.callbacks.tracks,logLevel:e.logLevel,onAudioTrack:e.onAudioTrack})}if(e.onVideoTrack&&"strf-box-video"===t.strf.type){let r=(0,a.makeAviVideoTrack)({strh:t,index:e.riff.getNextTrackIndex(),strf:t.strf});(0,i.registerVideoTrackWhenProfileIsAvailable)({state:e,track:r,container:"avi"})}e.riff.incrementNextTrackIndex()}},r.expectRiffBox=async({iterator:e,stateIfExpectingSideEffects:t})=>{if(16>e.bytesRemaining())return null;let r=e.startCheckpoint(),i=e.getByteString(4,!1),a=e.getUint32Le();if((0,o.isMoviAtom)(e,i)){if(e.discard(4),!t)throw Error("No state if expecting side effects");return t.mediaSection.addMediaSection({start:e.counter.getOffset(),size:a-4}),(0,n.riffHasIndex)(t.structure.getRiffStructure())&&t.riff.lazyIdx1.triggerLoad(e.counter.getOffset()+a-4),null}return e.bytesRemaining()<a?(r.returnToCheckpoint(),null):await (0,s.parseRiffBox)({id:i,size:a,iterator:e,stateIfExpectingSideEffects:t})}},481036,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseMovi=r.handleChunk=void 0;let i=e.r(452893),a=e.r(869685),n=e.r(603063),o=e.r(188380),s=e.r(950704);r.handleChunk=async({state:e,ckId:t,ckSize:r})=>{var l;let{iterator:u}=e,c=u.counter.getOffset()-8,d=t.match(/^([0-9]{2})dc$/);if(d){let t=parseInt(d[1],10),i=(0,s.getStrhForIndex)(e.structure.getRiffStructure(),t),p=i.rate/i.scale,f=u.getSlice(r),h=(0,n.parseAvc)(f,e.avc),m=(0,a.getKeyFrameOrDeltaFromAvcInfo)(h),g=h.find(e=>"keyframe"===e.type||"delta-frame"===e.type),v=h.find(e=>"avc-profile"===e.type),y=h.find(e=>"avc-pps"===e.type);v&&y&&!e.riff.getAvcProfile()&&(await e.riff.onProfile({pps:y,sps:v}),e.callbacks.tracks.setIsDone(e.logLevel));let b={data:f,duration:1/p,type:"bidirectional"===m?"delta":m,offset:c,avc:g},x=e.avc.getMaxFramesInBuffer();if(null===x)throw Error("maxFramesInBuffer is null");if((null!=(l=null==g?void 0:g.poc)?l:null)===null)throw Error("poc is null");let w=e.riff.sampleCounter.getKeyframeAtOffset(b);null!==w&&e.riff.sampleCounter.setPocAtKeyframeOffset({keyframeOffset:w,poc:g.poc}),e.riff.queuedBFrames.addFrame({frame:b,trackId:t,maxFramesInBuffer:x,timescale:p});let S=e.riff.queuedBFrames.getReleasedFrame();if(!S)return;let k=(0,o.convertQueuedSampleToMediaParserSample)({sample:S.sample,state:e,trackId:S.trackId});e.riff.sampleCounter.onVideoSample({trackId:t,videoSample:k}),await e.callbacks.onVideoSample({videoSample:k,trackId:t})}let p=t.match(/^([0-9]{2})wb$/);if(p){let t=parseInt(p[1],10),a=(0,s.getStrhForIndex)(e.structure.getRiffStructure(),t),{strf:n}=a;if("strf-box-audio"!==n.type)throw Error("audio");let o=a.rate/a.scale*n.numberOfChannels,l=Math.floor(e.riff.sampleCounter.getSampleCountForTrack({trackId:t})/o*i.WEBCODECS_TIMESCALE),d={decodingTimestamp:l,data:u.getSlice(r),duration:void 0,timestamp:l,type:"key",offset:c};e.riff.sampleCounter.onAudioSample(t,d),await e.callbacks.onAudioSample({audioSample:d,trackId:t})}};let l=async({state:e})=>{let{iterator:t}=e;if(8>t.bytesRemaining())return Promise.resolve();let i=t.startCheckpoint(),a=t.getByteString(4,!1),n=t.getUint32Le();if(t.bytesRemaining()<n)return i.returnToCheckpoint(),Promise.resolve();await (0,r.handleChunk)({state:e,ckId:a,ckSize:n});let o=e.mediaSection.getMediaSectionAssertOnlyOne(),s=o.start+o.size;for(;t.counter.getOffset()<s&&t.bytesRemaining()>0;)if(0!==t.getUint8()){t.counter.decrement(1);break}};r.parseMovi=l},675966,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseMediaSection=void 0;let i=e.r(86711),a=e.r(737232),n=e.r(481036);r.parseMediaSection=async e=>{await (0,n.parseMovi)({state:e}),(0,i.getTracks)(e,!1).some(e=>"video"===e.type&&e.codec===a.TO_BE_OVERRIDDEN_LATER)||e.callbacks.tracks.getIsDone()||e.callbacks.tracks.setIsDone(e.logLevel)}},122572,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseRiffBody=void 0;let i=e.r(667585),a=e.r(275272),n=e.r(218294),o=e.r(188380),s=e.r(379008),l=e.r(675966);r.parseRiffBody=async e=>{let t=e.riff.queuedBFrames.getReleasedFrame();if(t){let r=(0,o.convertQueuedSampleToMediaParserSample)({sample:t.sample,state:e,trackId:t.trackId});return e.riff.sampleCounter.onVideoSample({trackId:t.trackId,videoSample:r}),await e.callbacks.onVideoSample({videoSample:r,trackId:t.trackId}),null}if("in-section"===e.mediaSection.isCurrentByteInMediaSection(e.iterator)){if((0,a.maySkipVideoData)({state:e})&&e.riff.getAvcProfile()){let t=(0,n.getCurrentMediaSection)({offset:e.iterator.counter.getOffset(),mediaSections:e.mediaSection.getMediaSections()});if(!t)throw Error("No video section defined");return Promise.resolve((0,i.makeSkip)(t.start+t.size))}return await (0,l.parseMediaSection)(e),null}let r=await (0,s.expectRiffBox)({iterator:e.iterator,stateIfExpectingSideEffects:e});return null!==r&&(await (0,s.postProcessRiffBox)(e,r),e.structure.getRiffStructure().boxes.push(r)),null}},856714,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseRiffHeader=void 0,r.parseRiffHeader=e=>{if("RIFF"!==e.iterator.getByteString(4,!1))throw Error("Not a RIFF file");let t=e.structure.getRiffStructure(),r=e.iterator.getUint32Le(),i=e.iterator.getByteString(4,!1);if("WAVE"!==i&&"AVI"!==i)throw Error(`File type ${i} not supported`);return t.boxes.push({type:"riff-header",fileSize:r,fileType:i}),null}},809943,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseRiff=void 0;let i=e.r(122572),a=e.r(856714);r.parseRiff=e=>0===e.iterator.counter.getOffset()?Promise.resolve((0,a.parseRiffHeader)(e)):(0,i.parseRiffBody)(e)},102548,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getRestOfPacket=r.discardRestOfPacket=void 0,r.discardRestOfPacket=e=>{let t=188-e.counter.getOffset()%188;e.discard(t)},r.getRestOfPacket=e=>{let t=188-e.counter.getOffset()%188;return e.getSlice(t)}},505713,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseSdt=r.parsePat=void 0;let i=e.r(102548);r.parsePat=e=>{e.startReadingBits();let t=e.getBits(8);if(e.getBits(1),e.getBits(1),e.getBits(4),e.getBits(10)>1021)throw Error("Invalid section length");e.stopReadingBits();let r=((e,t)=>{e.getUint16(),e.startReadingBits(),e.getBits(7),e.getBits(1);let r=e.getBits(8),i=e.getBits(8);if(0!==t)throw Error("Invalid table ID: "+t);let a=[];for(let t=r;t<=i;t++){let t=e.getBits(16);e.getBits(3);let r=e.getBits(13);a.push({type:"transport-stream-program-association-table",programNumber:t,programMapIdentifier:r})}return e.stopReadingBits(),{type:"transport-stream-pat-box",tableId:t.toString(16),pat:a}})(e,t);return(0,i.discardRestOfPacket)(e),r},r.parseSdt=e=>{e.startReadingBits(),e.getBits(8),e.getBits(1),e.getBits(1),e.getBits(2);let t=e.getBits(12);return e.stopReadingBits(),e.discard(t),(0,i.discardRestOfPacket)(e),{type:"transport-stream-sdt-box"}}},387316,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parsePes=void 0,r.parsePes=({iterator:e,offset:t})=>{let r=e.getUint24();if(1!==r)throw Error(`Unexpected PES packet start code: ${r.toString(16)}`);let i=e.getUint8();e.getUint16(),e.startReadingBits();let a=e.getBits(2);if(2!==a)throw Error(`Invalid marker bits: ${a}`);if(0!==e.getBits(2))throw Error("Only supporting non-scrambled streams");let n=e.getBits(1);e.getBits(1),e.getBits(1),e.getBits(1);let o=e.getBits(1),s=e.getBits(1);if(!o&&s)throw Error("DTS is present but not PTS, this is not allowed in the spec");e.getBits(1),e.getBits(1),e.getBits(1),e.getBits(1),e.getBits(1),e.getBits(1);let l=e.getBits(8),u=e.counter.getOffset(),c=null;if(!o)throw Error("PTS is required");let d=e.getBits(4);if(3!==d&&2!==d)throw Error(`Invalid PTS marker bits: ${d}`);let p=e.getBits(3);e.getBits(1);let f=e.getBits(15);e.getBits(1);let h=e.getBits(15);e.getBits(1),c=p<<30|f<<15|h;let m=null;if(s){let t=e.getBits(4);if(1!==t)throw Error(`Invalid DTS marker bits: ${t}`);let r=e.getBits(3);e.getBits(1);let i=e.getBits(15);e.getBits(1);let a=e.getBits(15);e.getBits(1),m=r<<30|i<<15|a}return e.stopReadingBits(),e.discard(l-(e.counter.getOffset()-u)),{dts:m,pts:c,streamId:i,priority:n,offset:t}}},774271,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parsePmt=void 0;let i=e.r(102548);r.parsePmt=e=>{e.startReadingBits();let t=e.getBits(8);e.getBits(1),e.getBits(1),e.getBits(4);let r=e.getBits(10);if(r>1021)throw Error("Invalid section length");e.stopReadingBits();let a=(({iterator:e,tableId:t,sectionLength:r})=>{let i=e.counter.getOffset();e.getUint16(),e.startReadingBits(),e.getBits(7),e.getBits(1);let a=e.getBits(8),n=e.getBits(8),o=[];e.getBits(3),e.getBits(13),e.getBits(4);let s=e.getBits(12);e.getBits(8*s);for(let t=a;t<=n;t++){let t=[];for(;;){let a=e.getBits(8);e.getBits(3);let n=e.getBits(13);e.getBits(4);let o=e.getBits(12);if(e.getBits(8*o),t.push({streamType:a,pid:n}),r-(e.counter.getOffset()-i)<=4)break}o.push({type:"transport-stream-program-map-table",streams:t})}if(1!==o.length)throw Error("Does not PMT table with more than 1 entry, uncommon");return e.stopReadingBits(),{type:"transport-stream-pmt-box",tableId:t,streams:o[0].streams}})({iterator:e,tableId:t,sectionLength:r});return(0,i.discardRestOfPacket)(e),a}},202110,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.findNthSubarrayIndex=function({array:e,subarray:t,n:r,startIndex:i,startCount:a}){let n=t.length,o=e.length,s=a,l=i;for(;l<=o-n;l++){let i=!0;for(let r=0;r<n;r++)if(e[l+r]!==t[r]){i=!1;break}if(i&&++s===r)return{type:"found",index:l}}return{type:"not-found",index:l,count:s}}},853502,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.readAdtsHeader=void 0;let i=e.r(442521),a=e.r(77548);r.readAdtsHeader=e=>{if(e.byteLength<9)return null;let t=(0,a.getArrayBufferIterator)({initialData:e,maxBytes:e.byteLength,logLevel:"error"});if(t.startReadingBits(),4095!==t.getBits(12))throw Error("Invalid ADTS header ");if(0!==t.getBits(1))throw Error("Only supporting MPEG-4 for .ts");if(0!==t.getBits(2))throw Error("Only supporting layer 0 for .ts");let r=t.getBits(1),n=t.getBits(2),o=t.getBits(4),s=(0,i.getSampleRateFromSampleFrequencyIndex)(o);t.getBits(1);let l=t.getBits(3),u=(0,i.createAacCodecPrivate)({audioObjectType:n,sampleRate:s,channelConfiguration:l,codecPrivate:null});t.getBits(1),t.getBits(1),t.getBits(1),t.getBits(1);let c=t.getBits(13);return t.getBits(11),t.getBits(2),r||t.getBits(16),t.stopReadingBits(),t.destroy(),{frameLength:c,codecPrivate:u,channelConfiguration:l,sampleRate:s,audioObjectType:n}}},944553,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.handleAacPacket=void 0;let i=e.r(442521),a=e.r(560247),n=e.r(882757),o=e.r(452893),s=e.r(853502),l=e.r(576210);r.handleAacPacket=async({streamBuffer:e,programId:t,offset:r,sampleCallbacks:u,logLevel:c,onAudioTrack:d,transportStream:p,makeSamplesStartAtZero:f})=>{var h,m;let g=(0,s.readAdtsHeader)(e.getBuffer());if(!g)throw Error("Invalid ADTS header - too short");let{channelConfiguration:v,codecPrivate:y,sampleRate:b,audioObjectType:x}=g;if(!u.tracks.getTracks().find(e=>e.trackId===t)){let r=f?Math.min(e.pesHeader.pts,null!=(h=e.pesHeader.dts)?h:1/0):0;p.startOffset.setOffset({trackId:t,newOffset:r});let a={type:"audio",codecData:{type:"aac-config",data:y},trackId:t,originalTimescale:l.MPEG_TIMESCALE,codecEnum:"aac",codec:(0,i.mapAudioObjectTypeToCodecString)(x),description:y,numberOfChannels:v,sampleRate:b,startInSeconds:0,timescale:o.WEBCODECS_TIMESCALE,trackMediaTimeOffsetInTrackTimescale:0};await (0,n.registerAudioTrack)({track:a,container:"transport-stream",registerAudioSampleCallback:u.registerAudioSampleCallback,tracks:u.tracks,logLevel:c,onAudioTrack:d})}let w={decodingTimestamp:(null!=(m=e.pesHeader.dts)?m:e.pesHeader.pts)-p.startOffset.getOffset(t),timestamp:e.pesHeader.pts-p.startOffset.getOffset(t),duration:void 0,data:e.getBuffer(),type:"key",offset:r},S=(0,a.convertAudioOrVideoSampleToWebCodecsTimestamps)({sample:w,timescale:l.MPEG_TIMESCALE});await u.onAudioSample({audioSample:S,trackId:t}),p.lastEmittedSample.setLastEmittedSample(w)}},46323,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.processFinalStreamBuffers=r.processStreamBuffer=r.makeTransportStreamPacketBuffer=void 0;let i=e.r(355194),a=e.r(202110),n=e.r(510584),o=e.r(944553),s=e.r(576210),l=e.r(763854);r.makeTransportStreamPacketBuffer=({buffers:e,pesHeader:t,offset:r})=>{let n=e?[e]:[],o=null,s=()=>0===n.length?new Uint8Array:1===n.length?n[0]:(n=[(0,i.combineUint8Arrays)(n)])[0],l=null;return{pesHeader:t,offset:r,getBuffer:s,addBuffer:e=>{n.push(e),o=null},get2ndSubArrayIndex:()=>{var e,t;if(null===o){let r=(0,a.findNthSubarrayIndex)({array:s(),subarray:new Uint8Array([0,0,1,9]),n:2,startIndex:null!=(e=null==l?void 0:l.index)?e:0,startCount:null!=(t=null==l?void 0:l.count)?t:0});if("found"!==r.type)return l=r,-1;o=r.index,l=null}return o}}},r.processStreamBuffer=async({streamBuffer:e,programId:t,structure:r,sampleCallbacks:i,logLevel:a,onAudioTrack:u,onVideoTrack:c,transportStream:d,makeSamplesStartAtZero:p,avcState:f})=>{let h=(0,l.getStreamForId)(r,t);if(!h)throw Error("No stream found");if(2===h.streamType)throw Error("H.262 video stream not supported");if(27===h.streamType?await (0,s.handleAvcPacket)({programId:t,streamBuffer:e,sampleCallbacks:i,logLevel:a,onVideoTrack:c,offset:e.offset,transportStream:d,makeSamplesStartAtZero:p,avcState:f}):15===h.streamType&&await (0,o.handleAacPacket)({streamBuffer:e,programId:t,offset:e.offset,sampleCallbacks:i,logLevel:a,onAudioTrack:u,transportStream:d,makeSamplesStartAtZero:p}),!i.tracks.hasAllTracks()){let e=i.tracks.getTracks().length,{streams:t}=(0,l.findProgramMapTableOrThrow)(r);(0,n.filterStreamsBySupportedTypes)(t).length===e&&i.tracks.setIsDone(a)}};let u=async({structure:e,sampleCallbacks:t,logLevel:i,onAudioTrack:a,onVideoTrack:n,transportStream:o,makeSamplesStartAtZero:s,avcState:l})=>{for(let[u,c]of o.streamBuffers)c.getBuffer().byteLength>0&&(await (0,r.processStreamBuffer)({streamBuffer:c,programId:u,structure:e,sampleCallbacks:t,logLevel:i,onAudioTrack:a,onVideoTrack:n,transportStream:o,makeSamplesStartAtZero:s,avcState:l}),o.streamBuffers.delete(u))};r.processFinalStreamBuffers=u},267455,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseStream=void 0;let i=e.r(102548),a=e.r(46323);r.parseStream=({transportStreamEntry:e,programId:t,iterator:r,transportStream:n})=>{let o=(0,i.getRestOfPacket)(r),s=r.counter.getOffset(),{streamBuffers:l,nextPesHeaderStore:u}=n;l.has(e.pid)||l.set(t,(0,a.makeTransportStreamPacketBuffer)({pesHeader:u.getNextPesHeader(),buffers:null,offset:s})),l.get(e.pid).addBuffer(o)}},615580,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parsePacket=void 0;let i=e.r(505713),a=e.r(387316),n=e.r(774271),o=e.r(267455),s=e.r(763854);r.parsePacket=({iterator:e,structure:t,transportStream:r})=>{let l=e.counter.getOffset();if(71!==e.getUint8())throw Error("Invalid sync byte");e.startReadingBits(),e.getBits(1);let u=e.getBits(1);e.getBits(1);let c=e.getBits(13);e.getBits(2);let d=e.getBits(1);if(e.getBits(1),e.getBits(4),e.stopReadingBits(),1===d){e.startReadingBits();let t=e.getBits(8),r=e.counter.getOffset();t>0&&(e.getBits(1),e.getBits(1),e.getBits(1),e.getBits(1),e.getBits(1),e.getBits(1),e.getBits(1),e.getBits(1));let i=t-(e.counter.getOffset()-r);e.stopReadingBits();let a=Math.max(0,i);e.discard(a)}if(188==e.counter.getOffset()-l)return null;let p=t.boxes.find(e=>"transport-stream-pmt-box"===e.type);if(u&&(null==p?void 0:p.streams.find(e=>e.pid===c))){let t=(0,a.parsePes)({iterator:e,offset:l});r.nextPesHeaderStore.setNextPesHeader(t),r.observedPesHeaders.addPesHeader(t)}else 1===u&&e.getUint8();if(0===c)return(0,i.parsePat)(e);if(17===c)return(0,i.parseSdt)(e);if(17===c?null:(0,s.getProgramForId)(t,c))return(0,n.parsePmt)(e);let f=(0,s.getStreamForId)(t,c);if(f)return(0,o.parseStream)({transportStreamEntry:f,iterator:e,transportStream:r,programId:c}),null;throw Error("Unknown packet identifier")}},813936,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.processAudio=r.canProcessAudio=void 0;let i=e.r(853502),a=e.r(46323);r.canProcessAudio=({streamBuffer:e})=>{var t,r;let a=null!=(r=null==(t=(0,i.readAdtsHeader)(e.getBuffer()))?void 0:t.frameLength)?r:null;return null!==a&&!(a>e.getBuffer().length)},r.processAudio=async({transportStreamEntry:e,structure:t,offset:r,sampleCallbacks:n,logLevel:o,onAudioTrack:s,onVideoTrack:l,transportStream:u,makeSamplesStartAtZero:c,avcState:d})=>{var p,f;let{streamBuffers:h,nextPesHeaderStore:m}=u,g=h.get(e.pid);if(!g)throw Error("Stream buffer not found");let v=null!=(f=null==(p=(0,i.readAdtsHeader)(g.getBuffer()))?void 0:p.frameLength)?f:null;if(null===v)throw Error("Expected length is null");if(v>g.getBuffer().length)throw Error("Expected length is greater than stream buffer length");await (0,a.processStreamBuffer)({streamBuffer:(0,a.makeTransportStreamPacketBuffer)({buffers:g.getBuffer().slice(0,v),offset:r,pesHeader:g.pesHeader}),programId:e.pid,structure:t,sampleCallbacks:n,logLevel:o,onAudioTrack:s,onVideoTrack:l,transportStream:u,makeSamplesStartAtZero:c,avcState:d});let y=g.getBuffer().slice(v);h.set(e.pid,(0,a.makeTransportStreamPacketBuffer)({buffers:y,pesHeader:m.getNextPesHeader(),offset:r}))}},814903,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.processVideo=r.canProcessVideo=void 0;let i=e.r(46323);r.canProcessVideo=({streamBuffer:e})=>{let t=e.get2ndSubArrayIndex();return -1!==t&&0!==t},r.processVideo=async({programId:e,structure:t,streamBuffer:r,sampleCallbacks:a,logLevel:n,onAudioTrack:o,onVideoTrack:s,transportStream:l,makeSamplesStartAtZero:u,avcState:c})=>{let d=r.get2ndSubArrayIndex();if(-1===d||0===d)throw Error("cannot process avc stream");let p=r.getBuffer(),f=p.slice(0,d),h=p.slice(d);return await (0,i.processStreamBuffer)({streamBuffer:(0,i.makeTransportStreamPacketBuffer)({offset:r.offset,pesHeader:r.pesHeader,buffers:f}),programId:e,structure:t,sampleCallbacks:a,logLevel:n,onAudioTrack:o,onVideoTrack:s,transportStream:l,makeSamplesStartAtZero:u,avcState:c}),h}},122106,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.processSampleIfPossible=void 0;let i=e.r(813936),a=e.r(46323),n=e.r(814903),o=e.r(763854);r.processSampleIfPossible=async e=>{let t=(0,o.findProgramMapOrNull)(e.structure.getTsStructure());if(!t)return;let r=!1;for(let o of t.streams){let t=e.transportStream.streamBuffers.get(o.pid);if(t){if(27===o.streamType&&(0,n.canProcessVideo)({streamBuffer:t})){let i=await (0,n.processVideo)({programId:o.pid,structure:e.structure.getTsStructure(),streamBuffer:t,sampleCallbacks:e.callbacks,logLevel:e.logLevel,onAudioTrack:e.onAudioTrack,onVideoTrack:e.onVideoTrack,transportStream:e.transportStream,makeSamplesStartAtZero:e.makeSamplesStartAtZero,avcState:e.avc});e.transportStream.streamBuffers.delete(o.pid),e.transportStream.streamBuffers.set(o.pid,(0,a.makeTransportStreamPacketBuffer)({pesHeader:e.transportStream.nextPesHeaderStore.getNextPesHeader(),buffers:i,offset:e.iterator.counter.getOffset()})),r=!0;break}if(15===o.streamType&&(0,i.canProcessAudio)({streamBuffer:t})){await (0,i.processAudio)({structure:e.structure.getTsStructure(),offset:e.iterator.counter.getOffset(),sampleCallbacks:e.callbacks,logLevel:e.logLevel,onAudioTrack:e.onAudioTrack,onVideoTrack:e.onVideoTrack,transportStream:e.transportStream,makeSamplesStartAtZero:e.makeSamplesStartAtZero,transportStreamEntry:o,avcState:e.avc}),r=!0;break}}}return r}},672709,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseTransportStream=void 0;let i=e.r(615580),a=e.r(122106),n=e.r(46323);r.parseTransportStream=async e=>{let t=e.structure.getTsStructure();if(await (0,a.processSampleIfPossible)(e))return Promise.resolve(null);let{iterator:r}=e;if(188>r.bytesRemaining())return Promise.resolve(null);let o=(0,i.parsePacket)({iterator:r,structure:t,transportStream:e.transportStream});return o&&t.boxes.push(o),0===r.bytesRemaining()&&await (0,n.processFinalStreamBuffers)({transportStream:e.transportStream,structure:t,sampleCallbacks:e.callbacks,logLevel:e.logLevel,onAudioTrack:e.onAudioTrack,onVideoTrack:e.onVideoTrack,makeSamplesStartAtZero:e.makeSamplesStartAtZero,avcState:e.avc}),Promise.resolve(null)}},231788,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseData=void 0;let i=e.r(667585),a=e.r(275272);r.parseData=({state:e})=>{let{iterator:t}=e,r=t.getUint32Le();return(e.structure.getWavStructure().boxes.push({type:"wav-data",dataSize:r}),e.callbacks.tracks.setIsDone(e.logLevel),e.mediaSection.addMediaSection({size:r,start:t.counter.getOffset()}),(0,a.maySkipVideoData)({state:e}))?Promise.resolve((0,i.makeSkip)(t.counter.getOffset()+r)):Promise.resolve(null)}},326981,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseFact=void 0,r.parseFact=({state:e})=>{let{iterator:t}=e,r=t.getUint32Le();if(4!==r)throw Error(`Expected size 4 for fact box, got ${r}`);let i=t.getUint32Le();return e.structure.getWavStructure().boxes.push({type:"wav-fact",numberOfSamplesPerChannel:i}),Promise.resolve(null)}},787627,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.subformatIsIeeeFloat=r.subformatIsPcm=r.KSDATAFORMAT_SUBTYPE_IEEE_FLOAT=r.WMMEDIASUBTYPE_PCM=void 0,r.WMMEDIASUBTYPE_PCM=[1,0,0,0,0,0,16,0,128,0,0,170,0,56,155,113],r.KSDATAFORMAT_SUBTYPE_IEEE_FLOAT=[3,0,0,0,0,0,16,0,128,0,0,170,0,56,155,113],r.subformatIsPcm=e=>e.every((e,t)=>e===r.WMMEDIASUBTYPE_PCM[t]),r.subformatIsIeeeFloat=e=>e.every((e,t)=>e===r.KSDATAFORMAT_SUBTYPE_IEEE_FLOAT[t])},638228,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseFmt=void 0,r.getChannelsFromMask=s;let i=e.r(882757),a=e.r(452893),n=e.r(787627),o={0:"Front Left",1:"Front Right",2:"Front Center",3:"Low Frequency",4:"Back Left",5:"Back Right",6:"Front Left of Center",7:"Front Right of Center",8:"Back Center",9:"Side Left",10:"Side Right",11:"Top Center",12:"Top Front Left",13:"Top Front Center",14:"Top Front Right",15:"Top Back Left",16:"Top Back Center",17:"Top Back Right"};function s(e){let t=[];for(let r=0;r<18;r++)if((e&1<<r)!=0){let e=o[r];e?t.push(e):t.push(`Unknown Channel (bit ${r})`)}return t}r.parseFmt=async({state:e})=>{let{iterator:t}=e,r=t.getUint32Le(),o=t.startBox(r),l=t.getUint16Le();if(1!==l&&65534!==l)throw Error(`Only supporting WAVE with PCM audio format, but got ${l}`);let u=t.getUint16Le(),c=t.getUint32Le(),d=t.getUint32Le(),p=t.getUint16Le(),f=t.getUint16Le(),h=16===f?"pcm-s16":32===f?"pcm-s32":24===f?"pcm-s24":null;if(null===h)throw Error(`Unsupported bits per sample: ${f}`);let m={bitsPerSample:f,blockAlign:p,byteRate:d,numberOfChannels:u,sampleRate:c,type:"wav-fmt"};if(e.structure.getWavStructure().boxes.push(m),65534===l){let e=t.getUint16Le();if(22!==e)throw Error(`Only supporting WAVE with 22 extra bytes, but got ${e} bytes extra size`);t.getUint16Le();let r=t.getUint32Le(),i=t.getSlice(16);if(16!==i.length)throw Error(`Only supporting WAVE with PCM audio format, but got ${i.length}`);if((0,n.subformatIsPcm)(i));else if((0,n.subformatIsIeeeFloat)(i));else throw Error(`Unsupported subformat: ${i}`);m.numberOfChannels=s(r).length}return await (0,i.registerAudioTrack)({track:{type:"audio",codec:h,codecData:null,description:void 0,codecEnum:h,numberOfChannels:u,sampleRate:c,originalTimescale:1e6,trackId:0,startInSeconds:0,timescale:a.WEBCODECS_TIMESCALE,trackMediaTimeOffsetInTrackTimescale:0},container:"wav",registerAudioSampleCallback:e.callbacks.registerAudioSampleCallback,tracks:e.callbacks.tracks,logLevel:e.logLevel,onAudioTrack:e.onAudioTrack}),o.expectNoMoreBytes(),Promise.resolve(null)}},645195,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseHeader=void 0,r.parseHeader=({state:e})=>{let t=e.iterator.getUint32Le(),r=e.iterator.getByteString(4,!1);if("WAVE"!==r)throw Error(`Expected WAVE, got ${r}`);return e.structure.getWavStructure().boxes.push({type:"wav-header",fileSize:t}),Promise.resolve(null)}},606973,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseId3=void 0,r.parseId3=({state:e})=>{let{iterator:t}=e,r=t.getUint32Le();return t.discard(r),e.structure.getWavStructure().boxes.push({type:"wav-id3"}),Promise.resolve(null)}},184613,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseJunk=void 0;let i=e.r(66415);r.parseJunk=({state:e})=>{let{iterator:t}=e,r=t.getUint32Le();return i.Log.trace(e.logLevel,`Skipping JUNK chunk of size ${r}`),t.discard(r),Promise.resolve(null)}},972829,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseList=void 0,r.parseList=({state:e})=>{let{iterator:t}=e,r=t.getUint32Le(),i=t.startBox(r),a=t.counter.getOffset();if("INFO"!==t.getByteString(4,!1))return t.discard(r-4),Promise.resolve(null);let n=[],o=()=>r-(t.counter.getOffset()-a);for(;o()>0;){if(0===t.getUint8())continue;t.counter.decrement(1);let e=t.getByteString(4,!1),r=t.getUint32Le(),i=t.getByteString(r,!0);n.push({key:e,trackId:null,value:i})}return e.structure.getWavStructure().boxes.push({type:"wav-list",metadata:n}),i.expectNoMoreBytes(),Promise.resolve(null)}},603963,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseMediaSection=void 0;let i=e.r(560247),a=e.r(455859);r.parseMediaSection=async({state:e})=>{let{iterator:t}=e,r=e.structure.getWavStructure(),n=e.mediaSection.getMediaSectionAssertOnlyOne(),o=n.start+n.size-t.counter.getOffset(),s=t.counter.getOffset(),l=r.boxes.find(e=>"wav-fmt"===e.type);if(!l)throw Error("Expected fmt box");let u=Math.min(o,l.sampleRate*l.blockAlign/a.WAVE_SAMPLES_PER_SECOND),c=u/(l.sampleRate*l.blockAlign),d=(s-n.start)/(l.sampleRate*l.blockAlign),p=t.getSlice(u),f=(0,i.convertAudioOrVideoSampleToWebCodecsTimestamps)({sample:{decodingTimestamp:d,data:p,duration:c,timestamp:d,type:"key",offset:s},timescale:1});return await e.callbacks.onAudioSample({audioSample:f,trackId:0}),null}},615077,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseWav=void 0;let i=e.r(66415),a=e.r(231788),n=e.r(326981),o=e.r(638228),s=e.r(645195),l=e.r(606973),u=e.r(184613),c=e.r(972829),d=e.r(603963);r.parseWav=e=>{let{iterator:t}=e;if("in-section"===e.mediaSection.isCurrentByteInMediaSection(t))return(0,d.parseMediaSection)({state:e});let r=t.getByteString(4,!1).toLowerCase();if(i.Log.trace(e.logLevel,`Processing box type ${r}`),"riff"===r)return(0,s.parseHeader)({state:e});if("fmt"===r)return(0,o.parseFmt)({state:e});if("data"===r)return(0,a.parseData)({state:e});if("list"===r)return(0,c.parseList)({state:e});if("id3"===r)return(0,l.parseId3)({state:e});if("junk"===r||"fllr"===r||"bext"===r||"cue"===r)return(0,u.parseJunk)({state:e});if("fact"===r)return(0,n.parseFact)({state:e});if("\0"===r)return Promise.resolve(null);throw Error(`Unknown WAV box type ${r}`)}},613633,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getByteForSeek=void 0;let i=e.r(653909),a=e.r(48037);r.getByteForSeek=({seekHeadSegment:e,offset:t})=>{let r=e.value.map(e=>{if("Seek"!==e.type||!e.value.find(e=>"SeekID"===e.type&&e.value===a.matroskaElements.Cues))return null;let t=e.value.find(e=>"SeekPosition"===e.type);return!!t&&t.value}).filter(i.truthy);return 0===r.length?null:r[0].value+t}},205742,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.expectSegment=void 0;let i=e.r(66415),a=e.r(877580),n=e.r(48037);r.expectSegment=async({statesForProcessing:e,isInsideSegment:t,iterator:r,logLevel:a,mediaSectionState:s})=>{var l;if(0===r.bytesRemaining())throw Error("has no bytes");let u=r.counter.getOffset(),{returnToCheckpoint:c}=r.startCheckpoint(),d=r.getMatroskaSegmentId();if(null===d)return c(),null;let p=r.counter.getOffset(),f=r.getVint(),h=r.counter.getOffset();if(null===f)return c(),null;let m=r.bytesRemaining();if(i.Log.trace(a,"Segment ID:",null==(l=n.ebmlMap[d])?void 0:l.name,"Size:"+f,m),d===n.matroskaElements.Segment){if(!e)throw Error("States for processing are required");return e.webmState.addSegment({start:u,size:f}),{type:"Segment",minVintWidth:h-p,value:[]}}if(d===n.matroskaElements.Cluster){if(null===t)throw Error("Expected to be inside segment");if(!e)throw Error("States for processing are required");return s&&s.addMediaSection({start:u,size:f}),e.webmState.addCluster({start:u,size:f+(h-u),segment:t.index}),{type:"Cluster",minVintWidth:h-p,value:[]}}return m<f?(c(),null):await o({segmentId:d,length:f,headerReadSoFar:r.counter.getOffset()-u,statesForProcessing:e,iterator:r,logLevel:a})};let o=async({segmentId:e,length:t,iterator:r,headerReadSoFar:i,statesForProcessing:n,logLevel:o})=>{if(t<0)throw Error(`Expected length of ${e} to be greater or equal 0`);r.counter.decrement(i);let s=r.counter.getOffset(),l=await (0,a.parseEbml)(r,n,o);return null===l?null:n?await (0,a.postprocessEbml)({offset:s,ebml:l,statesForProcessing:n}):l}},827082,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.selectStatesForProcessing=void 0,r.selectStatesForProcessing=({callbacks:e,logLevel:t,onAudioTrack:r,onVideoTrack:i,structure:a,webm:n,avc:o})=>({webmState:n,callbacks:e,logLevel:t,onAudioTrack:r,onVideoTrack:i,structureState:a,avcState:o})},343329,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseWebm=void 0;let i=e.r(667585),a=e.r(275272),n=e.r(613633),o=e.r(205742),s=e.r(827082);r.parseWebm=async e=>{let t=e.structure.getMatroskaStructure(),{iterator:r}=e,l=r.counter.getOffset(),u=e.webm.isInsideSegment(r),c=e.webm.isInsideCluster(l),d=await (0,o.expectSegment)({iterator:r,logLevel:e.logLevel,statesForProcessing:(0,s.selectStatesForProcessing)(e),isInsideSegment:u,mediaSectionState:e.mediaSection});if((null==d?void 0:d.type)==="SeekHead"){let t=(0,n.getByteForSeek)({seekHeadSegment:d,offset:l});null!==t&&e.webm.cues.triggerLoad(t,l)}if(null===d)return null;if(c){if((0,a.maySkipVideoData)({state:e}))return(0,i.makeSkip)(Math.min(e.contentLength,c.size+c.start));let r=t.boxes.filter(e=>"Segment"===e.type)[c.segment];if(!r)throw Error("Expected segment");let n=r.value.find(e=>"Cluster"===e.type);if(!n)throw Error("Expected cluster");"Block"!==d.type&&"SimpleBlock"!==d.type&&n.value.push(d)}else if(u){let e=t.boxes.filter(e=>"Segment"===e.type)[u.index];if(!e)throw Error("Expected segment");e.value.push(d)}else t.boxes.push(d);return null}},675534,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.initVideo=void 0;let i=e.r(831097),a=e.r(634506),n=e.r(86711),o=e.r(66415),s=e.r(882757);r.initVideo=async({state:e})=>{var t;let r=e.iterator.detectFileType(),{mimeType:l,name:u,contentLength:c}=e;if("riff"===r.type){o.Log.verbose(e.logLevel,"Detected RIFF container"),e.structure.setStructure({type:"riff",boxes:[]});return}if(null==(t=e.m3uPlaylistContext)?void 0:t.mp4HeaderSegment){o.Log.verbose(e.logLevel,"Detected ISO Base Media segment");let t=(0,i.getMoovFromFromIsoStructure)(e.m3uPlaylistContext.mp4HeaderSegment);if(!t)throw Error("No moov box found");let r=(0,n.getTracksFromMoovBox)(t);for(let t of r.filter(e=>"video"===e.type))await (0,s.registerVideoTrack)({track:t,container:"mp4",logLevel:e.logLevel,onVideoTrack:e.onVideoTrack,registerVideoSampleCallback:e.callbacks.registerVideoSampleCallback,tracks:e.callbacks.tracks});for(let t of r.filter(e=>"audio"===e.type))await (0,s.registerAudioTrack)({track:t,container:"mp4",registerAudioSampleCallback:e.callbacks.registerAudioSampleCallback,tracks:e.callbacks.tracks,logLevel:e.logLevel,onAudioTrack:e.onAudioTrack});e.callbacks.tracks.setIsDone(e.logLevel),e.structure.setStructure({type:"iso-base-media",boxes:[]});return}if("iso-base-media"===r.type){o.Log.verbose(e.logLevel,"Detected ISO Base Media container"),e.structure.setStructure({type:"iso-base-media",boxes:[]});return}if("webm"===r.type){o.Log.verbose(e.logLevel,"Detected Matroska container"),e.structure.setStructure({boxes:[],type:"matroska"});return}if("transport-stream"===r.type){o.Log.verbose(e.logLevel,"Detected MPEG-2 Transport Stream"),e.mediaSection.addMediaSection({start:0,size:c}),e.structure.setStructure({boxes:[],type:"transport-stream"});return}if("mp3"===r.type){o.Log.verbose(e.logLevel,"Detected MP3"),e.structure.setStructure({boxes:[],type:"mp3"});return}if("wav"===r.type){o.Log.verbose(e.logLevel,"Detected WAV"),e.structure.setStructure({boxes:[],type:"wav"});return}if("flac"===r.type){o.Log.verbose(e.logLevel,"Detected FLAC"),e.structure.setStructure({boxes:[],type:"flac"});return}if("aac"===r.type){o.Log.verbose(e.logLevel,"Detected AAC"),e.structure.setStructure({type:"aac",boxes:[]});return}if("m3u"===r.type){o.Log.verbose(e.logLevel,"Detected M3U"),e.structure.setStructure({type:"m3u",boxes:[]});return}return"pdf"===r.type?Promise.reject(new a.IsAPdfError({message:"GIF files are not supported",mimeType:l,sizeInBytes:c,fileName:u})):"bmp"===r.type||"jpeg"===r.type||"png"===r.type||"webp"===r.type||"gif"===r.type?Promise.reject(new a.IsAnImageError({message:"Image files are not supported",imageType:r.type,dimensions:r.dimensions,mimeType:l,sizeInBytes:c,fileName:u})):"unknown"===r.type?Promise.reject(new a.IsAnUnsupportedFileTypeError({message:"Unknown file format",mimeType:l,sizeInBytes:c,fileName:u})):Promise.reject(Error("Unknown video format "+r))}},782572,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.runParseIteration=void 0;let i=e.r(743882),a=e.r(572449),n=e.r(471107),o=e.r(957471),s=e.r(625686),l=e.r(809943),u=e.r(672709),c=e.r(615077),d=e.r(343329),p=e.r(675534);r.runParseIteration=async({state:e})=>{let t=e.structure.getStructureOrNull();return t&&"m3u"===t.type?(0,o.parseM3u)({state:e}):null===t?(await (0,p.initVideo)({state:e}),null):"riff"===t.type?(0,l.parseRiff)(e):"mp3"===t.type?(0,s.parseMp3)(e):"iso-base-media"===t.type?(0,n.parseIsoBaseMedia)(e):"matroska"===t.type?(0,d.parseWebm)(e):"transport-stream"===t.type?(0,u.parseTransportStream)(e):"wav"===t.type?(0,c.parseWav)(e):"aac"===t.type?(0,i.parseAac)(e):"flac"===t.type?(0,a.parseFlac)({state:e,iterator:e.iterator}):Promise.reject(Error("Unknown video format "+t))}},199003,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseLoop=void 0;let i=e.r(823984),a=e.r(603281),n=e.r(66415),o=e.r(840093),s=e.r(665572),l=e.r(782572),u=e.r(315574),c=async e=>{await e.controller._internals.checkForAbortAndPause();let t=await e.currentReader.getCurrent().reader.read();return t.value&&e.iterator.addData(t.value),t.done},d=async({state:e,throttledState:t,onError:d})=>{var p;let f=0;for(;!await (0,i.checkIfDone)(e);){await e.controller._internals.checkForAbortAndPause(),await (0,u.workOnSeekRequest)((0,u.getWorkOnSeekRequestOptions)(e));let r=e.iterator.counter.getOffset(),i=Date.now();for(;0>e.iterator.bytesRemaining()&&!await c(e););if((f>0||1e5>=e.iterator.bytesRemaining())&&await c(e),e.timings.timeReadingData+=Date.now()-i,null==(p=t.update)||p.call(t,()=>(0,o.makeProgressObject)(e)),!e.errored){if(n.Log.trace(e.logLevel,`Continuing parsing of file, currently at position ${e.iterator.counter.getOffset()}/${e.contentLength} (0x${e.iterator.counter.getOffset().toString(16)})`),f>300&&"m3u"!==e.structure.getStructure().type)throw Error("Infinite loop detected. The parser is not progressing. This is likely a bug in the parser. You can report this at https://remotion.dev/report and we will fix it as soon as possible.");try{await (0,a.triggerInfoEmit)(e),await e.controller._internals.checkForAbortAndPause();let t=Date.now(),r=await (0,l.runParseIteration)({state:e});if(e.timings.timeInParseLoop+=Date.now()-t,null!==r&&"fetch-more-data"===r.action){n.Log.verbose(e.logLevel,`Need to fetch ${r.bytesNeeded} more bytes before we can continue`);let t=e.iterator.bytesRemaining();for(;!(await c(e)||e.iterator.bytesRemaining()-t>=r.bytesNeeded););continue}if(null!==r&&"skip"===r.action){if(e.increaseSkippedBytes(r.skipTo-e.iterator.counter.getOffset()),r.skipTo===e.contentLength){e.iterator.discard(r.skipTo-e.iterator.counter.getOffset()),n.Log.verbose(e.logLevel,"Skipped to end of file, not fetching.");break}let t=Date.now();await (0,s.performSeek)({seekTo:r.skipTo,userInitiated:!1,controller:e.controller,mediaSection:e.mediaSection,iterator:e.iterator,logLevel:e.logLevel,mode:e.mode,contentLength:e.contentLength,seekInfiniteLoop:e.seekInfiniteLoop,currentReader:e.currentReader,readerInterface:e.readerInterface,fields:e.fields,src:e.src,discardReadBytes:e.discardReadBytes,prefetchCache:e.prefetchCache,isoState:e.iso}),e.timings.timeSeeking+=Date.now()-t}}catch(r){let t=await d(r);if(!t.action)throw Error('onError was used but did not return an "action" field. See docs for this API on how to use onError.');if("fail"===t.action)throw r;"download"===t.action&&(e.errored=r,n.Log.verbose(e.logLevel,"Error was handled by onError and deciding to continue."))}}let h=Date.now();await e.discardReadBytes(!1),e.timings.timeFreeingData+=Date.now()-h,e.iterator.counter.getOffset()>r?f=0:f++}if(e.samplesObserved.setLastSampleObserved(),await e.callbacks.callTracksDoneCallback(),null!==e.controller._internals.seekSignal.getSeek()){if(n.Log.verbose(e.logLevel,"Reached end of samples, but there is a pending seek. Trying to seek..."),await (0,u.workOnSeekRequest)((0,u.getWorkOnSeekRequestOptions)(e)),null!==e.controller._internals.seekSignal.getSeek())throw Error("Reached the end of the file even though a seek was requested. This is likely a bug in the parser. You can report this at https://remotion.dev/report and we will fix it as soon as possible.");await (0,r.parseLoop)({onError:d,throttledState:t,state:e})}};r.parseLoop=d},862970,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.printTimings=void 0;let i=e.r(66415);r.printTimings=e=>{i.Log.verbose(e.logLevel,`Time iterating over file: ${e.timings.timeIterating}ms`),i.Log.verbose(e.logLevel,`Time fetching data: ${e.timings.timeReadingData}ms`),i.Log.verbose(e.logLevel,`Time seeking: ${e.timings.timeSeeking}ms`),i.Log.verbose(e.logLevel,`Time checking if done: ${e.timings.timeCheckingIfDone}ms`),i.Log.verbose(e.logLevel,`Time freeing data: ${e.timings.timeFreeingData}ms`),i.Log.verbose(e.logLevel,`Time in parse loop: ${e.timings.timeInParseLoop}ms`)}},380108,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.warnIfRemotionLicenseNotAcknowledged=void 0;let i=e.r(66415),a=!1;r.warnIfRemotionLicenseNotAcknowledged=({acknowledgeRemotionLicense:e,logLevel:t,apiName:r})=>{e||a||(a=!0,i.Log.warn(t,`Note: Some companies are required to obtain a license to use @remotion/media-parser. See: https://remotion.dev/license
Pass \`acknowledgeRemotionLicense: true\` to \`${r}\` function to make this message disappear.`))}},977132,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setSeekingHints=void 0;let i=e.r(759046),a=e.r(21240),n=e.r(435158),o=e.r(51195),s=e.r(214849),l=e.r(658370),u=e.r(911737),c=e.r(802060);r.setSeekingHints=({hints:e,state:t})=>{if("iso-base-media-seeking-hints"===e.type)return void(0,n.setSeekingHintsForMp4)({hints:e,state:t});if("wav-seeking-hints"===e.type)return void(0,u.setSeekingHintsForWav)({hints:e,state:t});if("transport-stream-seeking-hints"===e.type)return void(0,l.setSeekingHintsForTransportStream)({hints:e,state:t});if("webm-seeking-hints"===e.type)return void(0,c.setSeekingHintsForWebm)({hints:e,state:t});if("flac-seeking-hints"===e.type)return void(0,a.setSeekingHintsForFlac)({hints:e,state:t});if("riff-seeking-hints"===e.type)return void(0,s.setSeekingHintsForRiff)({hints:e,state:t});if("mp3-seeking-hints"===e.type)return void(0,o.setSeekingHintsForMp3)({hints:e,state:t});if("aac-seeking-hints"===e.type)return void(0,i.setSeekingHintsForAac)();if("m3u8-seeking-hints"!==e.type)throw Error(`Unknown seeking hints type: ${e}`)}},791227,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getFieldsFromCallback=void 0,r.getFieldsFromCallback=({fields:e,callbacks:t})=>({audioCodec:!!t.onAudioCodec,container:!!t.onContainer,dimensions:!!t.onDimensions,durationInSeconds:!!t.onDurationInSeconds,fps:!!t.onFps,internalStats:!!t.onInternalStats,isHdr:!!t.onIsHdr,location:!!t.onLocation,metadata:!!t.onMetadata,mimeType:!!t.onMimeType,name:!!t.onName,rotation:!!t.onRotation,size:!!t.onSize,slowStructure:!!t.onSlowStructure,tracks:!!t.onTracks,unrotatedDimensions:!!t.onUnrotatedDimensions,videoCodec:!!t.onVideoCodec,slowKeyframes:!!t.onSlowKeyframes,slowDurationInSeconds:!!t.onSlowDurationInSeconds,slowFps:!!t.onSlowFps,slowNumberOfFrames:!!t.onSlowNumberOfFrames,keyframes:!!t.onKeyframes,images:!!t.onImages,numberOfAudioChannels:!!t.onNumberOfAudioChannels,sampleRate:!!t.onSampleRate,slowAudioBitrate:!!t.onSlowAudioBitrate,slowVideoBitrate:!!t.onSlowVideoBitrate,m3uStreams:!!t.onM3uStreams,...e})},35779,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.audioSampleMapState=void 0,r.audioSampleMapState=()=>{let e=[];return{addSample:t=>{e.find(e=>e.offset===t.offset)||e.push(t)},getSamples:()=>e,setFromSeekingHints:t=>{e=t}}}},311292,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.aacState=void 0;let i=e.r(35779);r.aacState=()=>{let e=[];return{addSample:({offset:t,size:r})=>{let i=e.findIndex(e=>e.offset===t);return -1!==i?e[i]:(e.push({offset:t,index:e.length,size:r}),e[e.length-1])},getSamples:()=>e,audioSamples:(0,i.audioSampleMapState)()}}},478010,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.maxMacroblockBufferSize=r.macroBlocksPerFrame=void 0;let i={10:396,11:900,12:2376,13:2376,20:2376,21:4752,22:8100,30:8100,31:18e3,32:20480,40:32768,41:32768,42:34816,50:110400,51:184320,52:184320,60:696320,61:696320,62:696320};r.macroBlocksPerFrame=e=>{let{pic_width_in_mbs_minus1:t,pic_height_in_map_units_minus1:r}=e;return(t+1)*(r+1)},r.maxMacroblockBufferSize=e=>{let{level:t}=e,r=i[t];if(void 0===r)throw Error(`Unsupported level: ${t.toString(16)}`);return r}},293890,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.avcState=void 0;let i=e.r(478010);r.avcState=()=>{let e=0,t=0,r=null,a=null;return{getPrevPicOrderCntLsb:()=>e,getPrevPicOrderCntMsb:()=>t,setPrevPicOrderCntLsb(t){e=t},setPrevPicOrderCntMsb(e){t=e},setSps(e){let t=(0,i.macroBlocksPerFrame)(e);a=Math.min(16,Math.floor((0,i.maxMacroblockBufferSize)(e)/t)),r=e},getSps:()=>r,getMaxFramesInBuffer:()=>a,clear(){a=null,r=null,e=0,t=0}}}},872367,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.currentReader=void 0,r.currentReader=e=>{let t=e;return{getCurrent:()=>t,setCurrent:e=>{t=e}}}},687152,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.emittedState=void 0,r.emittedState=()=>({audioCodec:!1,container:!1,dimensions:!1,durationInSeconds:!1,fps:!1,internalStats:!1,isHdr:!1,location:!1,metadata:!1,mimeType:!1,name:!1,rotation:!1,size:!1,slowStructure:!1,tracks:!1,videoCodec:!1,unrotatedDimensions:!1,slowDurationInSeconds:!1,slowFps:!1,slowKeyframes:!1,slowNumberOfFrames:!1,keyframes:!1,images:!1,numberOfAudioChannels:!1,sampleRate:!1,slowAudioBitrate:!1,slowVideoBitrate:!1,m3uStreams:!1})},273768,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.flacState=void 0;let i=e.r(35779);r.flacState=()=>{let e;return{setBlockingBitStrategy:t=>{e=t},getBlockingBitStrategy:()=>e,audioSamples:(0,i.audioSampleMapState)()}}},540877,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.imagesState=void 0,r.imagesState=()=>{let e=[];return{images:e,addImage:t=>{e.push(t)}}}},799050,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getMfraAtom=void 0;let i=e.r(77548);r.getMfraAtom=async({src:e,contentLength:t,readerInterface:r,controller:a,parentSize:n,logLevel:o,prefetchCache:s})=>{let l=await r.read({controller:a,range:[t-n,t-1],src:e,logLevel:o,prefetchCache:s}),u=(0,i.getArrayBufferIterator)({initialData:new Uint8Array,maxBytes:n,logLevel:"error"});for(;;){let e=await l.reader.reader.read();if(e.value&&u.addData(e.value),e.done)break}return u}},610811,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getMfroAtom=void 0;let i=e.r(77548);r.getMfroAtom=async({src:e,contentLength:t,readerInterface:r,controller:a,logLevel:n,prefetchCache:o})=>{let s=await r.read({controller:a,range:[t-16,t-1],src:e,logLevel:n,prefetchCache:o}),{value:l}=await s.reader.reader.read();if(!l)return null;s.reader.abort();let u=(0,i.getArrayBufferIterator)({initialData:l,maxBytes:l.length,logLevel:"error"});if(16!==u.getUint32()||"mfro"!==u.getByteString(4,!1)||0!==u.getUint8())return u.destroy(),null;u.discard(3);let c=u.getUint32();return u.destroy(),c}},401640,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getMfraSeekingBox=void 0;let i=e.r(46832),a=e.r(799050),n=e.r(610811);r.getMfraSeekingBox=async({contentLength:e,controller:t,readerInterface:r,src:o,logLevel:s,prefetchCache:l})=>{let u=await (0,n.getMfroAtom)({contentLength:e,controller:t,readerInterface:r,src:o,logLevel:s,prefetchCache:l});if(!u)return null;let c=await (0,a.getMfraAtom)({contentLength:e,controller:t,readerInterface:r,src:o,parentSize:u,logLevel:s,prefetchCache:l});return c.discard(8),(0,i.getIsoBaseMediaChildren)({iterator:c,logLevel:s,size:u-8,onlyIfMoovAtomExpected:null,contentLength:e})}},460229,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.lazyMfraLoad=void 0;let i=e.r(401640),a=e.r(66415);r.lazyMfraLoad=({contentLength:e,controller:t,readerInterface:r,src:n,logLevel:o,prefetchCache:s})=>{let l=null,u=null;return{triggerLoad:()=>l||(a.Log.verbose(o,"Moof box found, trying to lazy load mfra"),l=(0,i.getMfraSeekingBox)({contentLength:e,controller:t,readerInterface:r,src:n,logLevel:o,prefetchCache:s}).then(e=>(a.Log.verbose(o,e?"Lazily found mfra atom.":"No mfra atom found."),u=e,e))),getIfAlreadyLoaded:()=>u||null,setFromSeekingHints:e=>{u=e.mfraAlreadyLoaded}}}},12870,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.moovState=void 0,r.moovState=()=>{let e=null;return{setMoovBox:t=>{e=t},getMoovBoxAndPrecomputed:()=>e}}},144499,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.movieTimeScaleState=void 0,r.movieTimeScaleState=()=>{let e=null;return{getTrackTimescale:()=>e,setTrackTimescale:t=>{e=t}}}},529875,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isoBaseMediaState=void 0;let i=e.r(631713),a=e.r(460229),n=e.r(12870),o=e.r(475509),s=e.r(862849),l=e.r(144499);r.isoBaseMediaState=({contentLength:e,controller:t,readerInterface:r,src:u,logLevel:c,prefetchCache:d})=>({flatSamples:(0,i.cachedSamplePositionsState)(),moov:(0,n.moovState)(),mfra:(0,a.lazyMfraLoad)({contentLength:e,controller:t,readerInterface:r,src:u,logLevel:c,prefetchCache:d}),moof:(0,o.precomputedMoofState)(),tfra:(0,s.precomputedTfraState)(),movieTimeScale:(0,l.movieTimeScaleState)()})},934714,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.keyframesState=void 0,r.keyframesState=()=>{let e=[],t=t=>{e.find(e=>e.positionInBytes===t.positionInBytes)||e.push(t)};return{addKeyframe:t,getKeyframes:()=>(e.sort((e,t)=>e.positionInBytes-t.positionInBytes),e),setFromSeekingHints:e=>{for(let r of e)t(r)}}}},682093,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sampleSorter=void 0;let i=e.r(66415);r.sampleSorter=({logLevel:e,getAllChunksProcessedForPlaylist:t})=>{let r=[],a={},n={},o={};return{clearSamples:()=>{o={}},addToStreamWithTrack:e=>{r.push(e)},addVideoStreamToConsider:(e,t)=>{n[e]=t},addAudioStreamToConsider:(e,t)=>{a[e]=t},hasAudioStreamToConsider:e=>!!a[e],hasVideoStreamToConsider:e=>!!n[e],addAudioSample:async(e,t)=>{let r=a[e];if(!r)throw Error("No callback found for audio sample");o[e]=t.decodingTimestamp,await r(t)},addVideoSample:async(e,t)=>{let r=n[e];if(!r)throw Error("No callback found for video sample.");o[e]=t.decodingTimestamp,await r(t)},getNextStreamToRun:a=>{var n,s,l;for(let n of a)if(!t(n)&&!r.includes(n))return i.Log.trace(e,`Did not yet detect track of ${n}, working on that`),n;let u=1/0;for(let e of a)!t(e)&&(null!=(n=o[e])?n:0)<u&&(u=null!=(s=o[e])?s:0);for(let r of a)if(!t(r)&&(null!=(l=o[r])?l:0)===u)return i.Log.trace(e,`Working on ${r} because it has the smallest DTS`),r;throw Error("should be done with parsing now")}}}},183574,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.m3uState=void 0;let i=e.r(682093),a=e.r(66415);r.m3uState=e=>{let t=null,r=null,n={},o={},s={},l=!1,u={},c={},d=!1,p={},f={},h={},m=()=>[(()=>{if(!t)throw Error("No main playlist selected");return"initial-url"===t.type?t.url:t.stream.src})(),...(null!=r?r:[]).map(e=>e.src)],g=e=>p[e],v={};return{setSelectedMainPlaylist:e=>{t=e},getSelectedMainPlaylist:()=>t,setHasEmittedVideoTrack:(e,t)=>{n[e]=t},hasEmittedVideoTrack:e=>{let t=n[e];return void 0!==t&&t},setHasEmittedAudioTrack:(e,t)=>{o[e]=t},hasEmittedAudioTrack:e=>{let t=o[e];return void 0!==t&&t},setHasEmittedDoneWithTracks:e=>{s[e]=!0},hasEmittedDoneWithTracks:e=>void 0!==s[e],setReadyToIterateOverM3u:()=>{d=!0},isReadyToIterateOverM3u:()=>d,setAllChunksProcessed:e=>{p[e]=!0},clearAllChunksProcessed:()=>{Object.keys(p).forEach(e=>{delete p[e]})},getAllChunksProcessedForPlaylist:g,getAllChunksProcessedOverall:()=>!!t&&m().every(e=>p[e]),setHasFinishedManifest:()=>{l=!0},hasFinishedManifest:()=>l,setM3uStreamRun:(e,t)=>{t?f[e]=t:delete f[e]},setTracksDone:e=>(h[e]=!0,m().every(e=>h[e])),getTrackDone:e=>h[e],clearTracksDone:()=>{Object.keys(h).forEach(e=>{delete h[e]})},getM3uStreamRun:e=>{var t;return null!=(t=f[e])?t:null},abortM3UStreamRuns:()=>{let t=Object.values(f);0!==t.length&&(a.Log.trace(e,`Aborting ${t.length} M3U stream runs`),t.forEach(e=>{e.abort()}))},setAssociatedPlaylists:e=>{r=e},getAssociatedPlaylists:()=>r,getSelectedPlaylists:m,sampleSorter:(0,i.sampleSorter)({logLevel:e,getAllChunksProcessedForPlaylist:g}),setMp4HeaderSegment:(e,t)=>{v[e]=t},getMp4HeaderSegment:e=>v[e],setSeekToSecondsToProcess:(e,t)=>{u[e]=t},getSeekToSecondsToProcess:e=>{var t;return null!=(t=u[e])?t:null},setNextSeekShouldSubtractChunks:(e,t)=>{c[e]=t},getNextSeekShouldSubtractChunks:e=>{var t;return null!=(t=c[e])?t:0}}}},867693,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.formatCues=void 0,r.formatCues=e=>{var t;let r=[];for(let i of e){if("Crc32"===i.type)continue;if("CuePoint"!==i.type)throw Error("Expected CuePoint");let e=i.value.find(e=>"CueTime"===e.type);if(!e)throw Error("Expected CueTime");let a=i.value.find(e=>"CueTrackPositions"===e.type);if(!a)throw Error("Expected CueTrackPositions");let n=e.value.value,o=a.value.find(e=>"CueTrack"===e.type);if(!o)throw Error("Expected CueTrack");let s=a.value.find(e=>"CueClusterPosition"===e.type);if(!s)throw Error("Expected CueClusterPosition");let l=a.value.find(e=>"CueRelativePosition"===e.type),u={trackId:o.value.value,timeInTimescale:n,clusterPositionInSegment:s.value.value,relativePosition:null!=(t=null==l?void 0:l.value.value)?t:0};r.push(u)}return r}},163634,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fetchWebmCues=void 0;let i=e.r(77548),a=e.r(205742),n=e.r(867693);r.fetchWebmCues=async({src:e,readerInterface:t,controller:r,position:o,logLevel:s,prefetchCache:l})=>{let u=await t.read({controller:r,range:o,src:e,logLevel:s,prefetchCache:l}),{value:c}=await u.reader.reader.read();if(!c)return null;u.reader.abort();let d=(0,i.getArrayBufferIterator)({initialData:c,maxBytes:c.length,logLevel:"error"}),p=await (0,a.expectSegment)({iterator:d,logLevel:s,statesForProcessing:null,isInsideSegment:null,mediaSectionState:null});return(d.destroy(),null==p?void 0:p.value)?(0,n.formatCues)(p.value):null}},395431,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.lazyCuesFetch=void 0;let i=e.r(163634),a=e.r(66415);r.lazyCuesFetch=({controller:e,logLevel:t,readerInterface:r,src:n,prefetchCache:o})=>{let s=null,l=null,u=null;return{triggerLoad:(c,d)=>{if(u)return Promise.resolve(u);if(s)return s;if(l&&l!==d)throw Error("Segment offset mismatch");return l=d,a.Log.verbose(t,"Cues box found, trying to lazy load cues"),s=(0,i.fetchWebmCues)({controller:e,logLevel:t,position:c,readerInterface:r,src:n,prefetchCache:o}).then(e=>(a.Log.verbose(t,"Cues loaded"),u=e,e))},getLoadedCues:async()=>{if(!s)return null;if(u){if(!l)throw Error("Segment offset not set");return{cues:u,segmentOffset:l}}let e=await s;if(!e)return null;if(!l)throw Error("Segment offset not set");return{cues:e,segmentOffset:l}},getIfAlreadyLoaded:()=>{if(u){if(null===l)throw Error("Segment offset not set");return{cues:u,segmentOffset:l}}return null},setFromSeekingHints:e=>{var t,r,i,a;u=null!=(r=null==(t=e.loadedCues)?void 0:t.cues)?r:null,l=null!=(a=null==(i=e.loadedCues)?void 0:i.segmentOffset)?a:null}}}},60504,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.webmState=void 0;let i=e.r(125925),a=e.r(395431);r.webmState=({controller:e,logLevel:t,readerInterface:r,src:n,prefetchCache:o})=>{let s={},l=new Map,u=null,c=[],d=[],p={};return{cues:(0,a.lazyCuesFetch)({controller:e,logLevel:t,readerInterface:r,src:n,prefetchCache:o}),onTrackEntrySegment:e=>{var t;let r=(0,i.getTrackId)(e);if(!r)throw Error("Expected track id");if(s[r])return;let a=(0,i.getTrackCodec)(e);if(!a)throw Error("Expected codec");let n=(0,i.getTrackTimestampScale)(e);s[r]={codec:a.value,trackTimescale:null!=(t=null==n?void 0:n.value)?t:null}},getTrackInfoByNumber:e=>s[e],setTimestampOffset:(e,t)=>{l.set(e,t)},getTimestampOffsetForByteOffset:e=>{for(let[t,r]of Array.from(l.entries()).sort((e,t)=>e[0]-t[0]).reverse())if(!(t>=e))return r;return l.get(e)},getTimeStampMapForSeekingHints:()=>l,setTimeStampMapForSeekingHints:e=>{l=e},getTimescale:()=>null===u?1e6:u,setTimescale:e=>{u=e},addSegment:e=>{let t={...e,index:c.length};c.push(t)},addCluster:e=>{d.some(t=>t.start===e.start)||d.push(e)},getFirstCluster:()=>d.find(e=>0===e.segment),isInsideSegment:e=>{var t;let r=e.counter.getOffset(),i=c.filter(e=>r>=e.start&&r<=e.start+e.size);if(i.length>1)throw Error("Expected to only be inside 1 cluster");return null!=(t=i[0])?t:null},isInsideCluster:e=>{for(let t of d)if(e>=t.start&&e<t.start+t.size)return t;return null},setAvcProfileForTrackNumber:(e,t)=>{p[e]=t},getAvcProfileForTrackNumber:e=>{var t;return null!=(t=p[e])?t:null}}}},742460,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.makeMp3State=void 0;let i=e.r(35779);r.makeMp3State=()=>{let e=null,t=null;return{getMp3Info:()=>e,setMp3Info:t=>{e=t},getMp3BitrateInfo:()=>t,setMp3BitrateInfo:e=>{t=e},audioSamples:(0,i.audioSampleMapState)()}}},838093,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fetchIdx1=void 0;let i=e.r(77548),a=e.r(66415),n=e.r(379008);r.fetchIdx1=async({src:e,readerInterface:t,controller:r,position:o,logLevel:s,prefetchCache:l,contentLength:u})=>{a.Log.verbose(s,"Making request to fetch idx1 from ",e,"position",o);let c=await t.read({controller:r,range:o,src:e,logLevel:s,prefetchCache:l});if(null===c.contentLength)throw Error("Content length is null");let d=(0,i.getArrayBufferIterator)({initialData:new Uint8Array,maxBytes:u-o+1,logLevel:"error"});for(;;){let e=await c.reader.reader.read();if(e.value&&d.addData(e.value),e.done)break}let p=await (0,n.expectRiffBox)({iterator:d,stateIfExpectingSideEffects:null});if(d.destroy(),null===p||"idx1-box"!==p.type)throw Error("Expected idx1-box");return{entries:p.entries.filter(e=>e.id.endsWith("dc")),videoTrackIndex:p.videoTrackIndex}}},783209,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.lazyIdx1Fetch=void 0;let i=e.r(838093);r.lazyIdx1Fetch=({controller:e,logLevel:t,readerInterface:r,src:a,prefetchCache:n,contentLength:o})=>{let s=null,l=null;return{triggerLoad:u=>l?Promise.resolve(l):s||(s=(0,i.fetchIdx1)({controller:e,logLevel:t,position:u,readerInterface:r,src:a,prefetchCache:n,contentLength:o}).then(e=>(s=null,l=e,e))),getLoadedIdx1:async()=>s?await s:null,getIfAlreadyLoaded:()=>l||null,setFromSeekingHints:e=>{e.idx1Entries&&(l=e.idx1Entries)},waitForLoaded:()=>l?Promise.resolve(l):s||Promise.resolve(null)}}},112176,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.queuedBFramesState=void 0,r.queuedBFramesState=()=>{let e=[],t=[],r=()=>{t.push(...e),e.length=0};return{addFrame:({frame:i,maxFramesInBuffer:a,trackId:n,timescale:o})=>{if("key"===i.type){r(),t.push({sample:i,trackId:n,timescale:o});return}e.push({sample:i,trackId:n,timescale:o}),e.length>a&&t.push(e.shift())},flush:r,getReleasedFrame:()=>0===t.length?null:t.shift(),hasReleasedFrames:()=>t.length>0,clear:()=>{t.length=0,e.length=0}}}},792036,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.riffKeyframesState=void 0,r.riffKeyframesState=()=>{let e=[],t=t=>{e.find(e=>e.positionInBytes===t.positionInBytes)||(e.push(t),e.sort((e,t)=>e.positionInBytes-t.positionInBytes))};return{addKeyframe:t,getKeyframes:()=>e,setFromSeekingHints:e=>{for(let r of e)t(r)}}}},87476,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.riffSampleCounter=void 0;let i=e.r(452893),a=e.r(792036);r.riffSampleCounter=()=>{let e={},t={},r=(0,a.riffKeyframesState)();return{onAudioSample:(t,r)=>{void 0===e[t]&&(e[t]=0),r.data.length>0&&e[t]++,e[t]++},onVideoSample:({trackId:t,videoSample:a})=>{void 0===e[t]&&(e[t]=0),"key"===a.type&&r.addKeyframe({trackId:t,decodingTimeInSeconds:a.decodingTimestamp/i.WEBCODECS_TIMESCALE,positionInBytes:a.offset,presentationTimeInSeconds:a.timestamp/i.WEBCODECS_TIMESCALE,sizeInBytes:a.data.length,sampleCounts:{...e}}),a.data.length>0&&e[t]++},getSampleCountForTrack:({trackId:t})=>{var r;return null!=(r=e[t])?r:0},setSamplesFromSeek:t=>{for(let r in t)e[r]=t[r]},riffKeys:r,setPocAtKeyframeOffset:({keyframeOffset:e,poc:r})=>{void 0===t[e]&&(t[e]=[]),t[e].includes(r)||(t[e].push(r),t[e].sort((e,t)=>e-t))},getPocAtKeyframeOffset:({keyframeOffset:e})=>t[e],getKeyframeAtOffset:e=>{var t,i;return"key"===e.type?e.offset:null!=(i=null==(t=r.getKeyframes().findLast(t=>t.positionInBytes<=e.offset))?void 0:t.positionInBytes)?i:null}}}},653783,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.riffSpecificState=void 0;let i=e.r(783209),a=e.r(112176),n=e.r(87476);r.riffSpecificState=({controller:e,logLevel:t,readerInterface:r,src:o,prefetchCache:s,contentLength:l})=>{let u=null,c=0,d=[],p=async e=>{for(let t of(u=e,d))await t(e);d.length=0},f=(0,i.lazyIdx1Fetch)({controller:e,logLevel:t,readerInterface:r,src:o,prefetchCache:s,contentLength:l}),h=(0,n.riffSampleCounter)();return{getAvcProfile:()=>u,onProfile:p,registerOnAvcProfileCallback:e=>{d.push(e)},getNextTrackIndex:()=>c,queuedBFrames:(0,a.queuedBFramesState)(),incrementNextTrackIndex:()=>{c++},lazyIdx1:f,sampleCounter:h}}},992535,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.callbacksState=void 0;let i=e.r(66415),a=e.r(452893),n=e.r(24915),o=e.r(223706),s=e.r(434642);r.callbacksState=({controller:e,hasAudioTrackHandlers:t,hasVideoTrackHandlers:r,fields:l,keyframes:u,emittedFields:c,samplesObserved:d,structure:p,src:f,seekSignal:h,logLevel:m})=>{let g={},v={},y={},b={},x={},w=(0,n.makeCanSkipTracksState)({hasAudioTrackHandlers:t,fields:l,hasVideoTrackHandlers:r,structure:p}),S=(0,o.makeTracksSectionState)(w,f);return{registerVideoSampleCallback:async(e,t)=>{var r;if(null===t)return void delete g[e];for(let i of(g[e]=t,null!=(r=x[e])?r:[]))await t(i);x[e]=[]},onAudioSample:async({audioSample:t,trackId:r})=>{if(e._internals.signal.aborted)throw Error("Aborted");let a=v[r];if(t.data.length>0&&a)if(null!==h.getSeek())i.Log.trace(m,"Not emitting sample because seek is processing");else{let e=await a(t);y[r]=null!=e?e:null}(0,s.needsToIterateOverSamples)({emittedFields:c,fields:l})&&d.addAudioSample(t)},onVideoSample:async({trackId:t,videoSample:r})=>{if(e._internals.signal.aborted)throw Error("Aborted");if(r.data.length>0){let e=g[t];if(e)if(null!==h.getSeek())i.Log.trace(m,"Not emitting sample because seek is processing");else{let i=await e(r);y[t]=null!=i?i:null}}"key"===r.type&&u.addKeyframe({trackId:t,decodingTimeInSeconds:r.decodingTimestamp/a.WEBCODECS_TIMESCALE,positionInBytes:r.offset,presentationTimeInSeconds:r.timestamp/a.WEBCODECS_TIMESCALE,sizeInBytes:r.data.length}),(0,s.needsToIterateOverSamples)({fields:l,emittedFields:c})&&d.addVideoSample(r)},canSkipTracksState:w,registerAudioSampleCallback:async(e,t)=>{var r;if(null===t)return void delete v[e];for(let i of(v[e]=t,null!=(r=b[e])?r:[]))await t(i);b[e]=[]},tracks:S,audioSampleCallbacks:v,videoSampleCallbacks:g,hasAudioTrackHandlers:t,hasVideoTrackHandlers:r,callTracksDoneCallback:async()=>{for(let e of Object.values(y))e&&await e()}}}},168610,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.samplesObservedState=void 0;let i=e.r(452893);r.samplesObservedState=()=>{let e,t,r,a,n=!1,o=new Map,s=new Map;return{addVideoSample:r=>{var a;o.set(r.timestamp,r.data.byteLength);let n=r.timestamp/i.WEBCODECS_TIMESCALE,s=(null!=(a=r.duration)?a:0)/i.WEBCODECS_TIMESCALE;(void 0===t||n>t)&&(t=n+s),(void 0===e||n<e)&&(e=n)},addAudioSample:e=>{var t;s.set(e.timestamp,e.data.byteLength);let n=e.timestamp/i.WEBCODECS_TIMESCALE,o=(null!=(t=e.duration)?t:0)/i.WEBCODECS_TIMESCALE;(void 0===a||n>a)&&(a=n+o),(void 0===r||n<r)&&(r=n)},getSlowDurationInSeconds:()=>{let i=Math.min(null!=r?r:1/0,null!=e?e:1/0),n=Math.max(null!=a?a:0,null!=t?t:0);return i===1/0||n===1/0?0:n-i},getFps:()=>{let r=(null!=t?t:0)-(null!=e?e:0);return 0===r?0:(o.size-1)/r},getSlowNumberOfFrames:()=>o.size,getAudioBitrate:()=>{let e=(null!=a?a:0)-(null!=r?r:0);return 0===e||0===s.size?null:8*Array.from(s.values()).reduce((e,t)=>e+t,0)/e},getVideoBitrate:()=>{let r=(null!=t?t:0)-(null!=e?e:0);return 0===r||0===o.size?null:8*Array.from(o.values()).reduce((e,t)=>e+t,0)/r},getLastSampleObserved:()=>n,setLastSampleObserved:()=>{n=!0},getAmountOfSamplesObserved:()=>o.size+s.size}}},462644,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.seekInfiniteLoopDetectionState=void 0,r.seekInfiniteLoopDetectionState=()=>{let e=null,t=null;return{registerSeek:r=>{let i=Date.now();if(!e||e.byte!==r){e={byte:r,numberOfTimes:1},t=i;return}if(e.numberOfTimes++,e.numberOfTimes>=10&&t&&i-t<=2e3)throw Error(`Seeking infinite loop detected: Seeked to byte 0x${r.toString(16)} ${e.numberOfTimes} times in a row in the last 2 seconds. Check your usage of .seek().`);i-t>2e3&&(e={byte:r,numberOfTimes:1},t=i)},reset:()=>{e=null,t=null}}}},928375,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.timingsState=void 0,r.timingsState=()=>({timeIterating:0,timeReadingData:0,timeSeeking:0,timeCheckingIfDone:0,timeFreeingData:0,timeInParseLoop:0})},96410,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.lastEmittedSampleState=void 0,r.lastEmittedSampleState=()=>{let e=null;return{setLastEmittedSample:t=>{e=t},getLastEmittedSample:()=>e,resetLastEmittedSample:()=>{e=null}}}},685488,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.makeNextPesHeaderStore=void 0,r.makeNextPesHeaderStore=()=>{let e=null;return{setNextPesHeader:t=>{e=t},getNextPesHeader:()=>{if(!e)throw Error("No next PES header found");return e}}}},825817,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ptsStartOffsetStore=void 0,r.ptsStartOffsetStore=()=>{let e={};return{getOffset:t=>e[t]||0,setOffset:({newOffset:t,trackId:r})=>{e[r]=t}}}},966139,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.transportStreamState=void 0;let i=e.r(96410),a=e.r(685488),n=e.r(611397),o=e.r(825817);r.transportStreamState=()=>{let e=new Map,t=(0,o.ptsStartOffsetStore)(),r=(0,i.lastEmittedSampleState)(),s={nextPesHeaderStore:(0,a.makeNextPesHeaderStore)(),observedPesHeaders:(0,n.makeObservedPesHeader)(),streamBuffers:e,startOffset:t,resetBeforeSeek:()=>{s.streamBuffers.clear(),s.nextPesHeaderStore=(0,a.makeNextPesHeaderStore)()},lastEmittedSample:r};return s}},993327,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.makeParserState=void 0;let i=e.r(791227),a=e.r(77548),n=e.r(66415),o=e.r(311292),s=e.r(293890),l=e.r(872367),u=e.r(687152),c=e.r(273768),d=e.r(540877),p=e.r(529875),f=e.r(934714),h=e.r(183574),m=e.r(60504),g=e.r(742460),v=e.r(653783),y=e.r(992535),b=e.r(168610),x=e.r(462644),w=e.r(288540),S=e.r(928375),k=e.r(966139),C=e.r(218294);r.makeParserState=({hasAudioTrackHandlers:e,hasVideoTrackHandlers:t,controller:r,onAudioTrack:E,onVideoTrack:_,contentLength:T,logLevel:P,mode:I,src:A,readerInterface:O,onDiscardedData:M,selectM3uStreamFn:F,selectM3uAssociatedPlaylistsFn:R,m3uPlaylistContext:D,contentType:j,name:L,callbacks:B,fieldsInReturnValue:N,mimeType:$,initialReaderInstance:z,makeSamplesStartAtZero:U,prefetchCache:V})=>{let H=0,W=(0,a.getArrayBufferIterator)({initialData:new Uint8Array([]),maxBytes:T,logLevel:P}),q=(0,w.structureState)(),G=(0,f.keyframesState)(),Z=(0,u.emittedState)(),K=(0,b.samplesObservedState)(),Q=(0,g.makeMp3State)(),X=(0,d.imagesState)(),J=(0,S.timingsState)(),Y=(0,x.seekInfiniteLoopDetectionState)(),ee=(0,l.currentReader)(z),et=(0,s.avcState)(),er=async e=>{let{bytesRemoved:t,removedData:r}=W.removeBytesRead(e,I);t&&n.Log.verbose(P,`Freed ${t} bytes`),r&&M&&await M(r)},ei=(0,i.getFieldsFromCallback)({fields:N,callbacks:B}),ea=(0,C.mediaSectionState)();return{riff:(0,v.riffSpecificState)({controller:r,logLevel:P,readerInterface:O,src:A,prefetchCache:V,contentLength:T}),transportStream:(0,k.transportStreamState)(),webm:(0,m.webmState)({controller:r,logLevel:P,readerInterface:O,src:A,prefetchCache:V}),iso:(0,p.isoBaseMediaState)({contentLength:T,controller:r,readerInterface:O,src:A,logLevel:P,prefetchCache:V}),mp3:Q,aac:(0,o.aacState)(),flac:(0,c.flacState)(),m3u:(0,h.m3uState)(P),timings:J,callbacks:(0,y.callbacksState)({controller:r,hasAudioTrackHandlers:e,hasVideoTrackHandlers:t,fields:ei,keyframes:G,emittedFields:Z,samplesObserved:K,structure:q,src:A,seekSignal:r._internals.seekSignal,logLevel:P}),getInternalStats:()=>{var e;return{skippedBytes:H,finalCursorOffset:null!=(e=W.counter.getOffset())?e:0}},getSkipBytes:()=>H,increaseSkippedBytes:e=>{H+=e},keyframes:G,structure:q,onAudioTrack:E,onVideoTrack:_,emittedFields:Z,fields:ei,samplesObserved:K,contentLength:T,images:X,mediaSection:ea,logLevel:P,iterator:W,controller:r,mode:I,src:A,readerInterface:O,discardReadBytes:er,selectM3uStreamFn:F,selectM3uAssociatedPlaylistsFn:R,m3uPlaylistContext:D,contentType:j,name:L,returnValue:{},callbackFunctions:B,fieldsInReturnValue:N,mimeType:$,errored:null,currentReader:ee,seekInfiniteLoop:Y,makeSamplesStartAtZero:U,prefetchCache:V,avc:et}}},232307,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.throttledStateUpdate=void 0,r.throttledStateUpdate=({updateFn:e,everyMilliseconds:t,controller:r})=>{let i={bytes:0,percentage:null,totalBytes:null};if(!e)return{get:()=>i,update:null,stopAndGetLastProgress:()=>{}};let a=null,n=()=>{i!==a&&(e(i),a=i)},o=()=>{};if(t>0){let e=setInterval(()=>{n()},t),i=()=>{clearInterval(e)};r._internals.signal.addEventListener("abort",i,{once:!0}),o=()=>{clearInterval(e),r._internals.signal.removeEventListener("abort",i)}}return{get:()=>i,update:e=>{i=e(i),0===t&&n()},stopAndGetLastProgress:()=>(o(),i)}}},263139,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.internalParseMedia=void 0;let i=e.r(689127),a=e.r(603281),n=e.r(842258),o=e.r(66415),s=e.r(199003),l=e.r(862970),u=e.r(380108),c=e.r(977132),d=e.r(993327),p=e.r(232307),f=e.r(315574);r.internalParseMedia=async function({src:e,fields:t,reader:r,onAudioTrack:h,onVideoTrack:m,controller:g=(0,i.mediaParserController)(),logLevel:v,onParseProgress:y,progressIntervalInMs:b,mode:x,onDiscardedData:w,onError:S,acknowledgeRemotionLicense:k,apiName:C,selectM3uStream:E,selectM3uAssociatedPlaylists:_,m3uPlaylistContext:T,makeSamplesStartAtZero:P,seekingHints:I,...A}){var O;if(!e)throw Error('No "src" provided');g._internals.markAsReadyToEmitEvents(),(0,u.warnIfRemotionLicenseNotAcknowledged)({acknowledgeRemotionLicense:k,logLevel:v,apiName:C}),o.Log.verbose(v,`Reading ${"string"==typeof e?e:e instanceof URL?e.toString():e instanceof File?e.name:e.toString()}`);let M=new Map,{reader:F,contentLength:R,name:D,contentType:j,supportsContentRange:L,needsContentRange:B}=await r.read({src:e,range:null,controller:g,logLevel:v,prefetchCache:M});if(null===R)throw Error(`Cannot read media ${e} without a content length. This is currently not supported. Ensure the media has a "Content-Length" HTTP header.`);if(!L&&B)throw Error('Cannot read media without it supporting the "Content-Range" header. This is currently not supported. Ensure the media supports the "Content-Range" HTTP header.');let N=!!h,$=!!m,z=(0,d.makeParserState)({hasAudioTrackHandlers:N,hasVideoTrackHandlers:$,controller:g,onAudioTrack:null!=h?h:null,onVideoTrack:null!=m?m:null,contentLength:R,logLevel:v,mode:x,readerInterface:r,src:e,onDiscardedData:w,selectM3uStreamFn:E,selectM3uAssociatedPlaylistsFn:_,m3uPlaylistContext:T,contentType:j,name:D,callbacks:A,fieldsInReturnValue:null!=t?t:{},mimeType:j,initialReaderInstance:F,makeSamplesStartAtZero:P,prefetchCache:M});I&&(0,c.setSeekingHints)({hints:I,state:z}),g._internals.attachSeekingHintResolution(()=>Promise.resolve((0,n.getSeekingHints)({tracksState:z.callbacks.tracks,keyframesState:z.keyframes,webmState:z.webm,structureState:z.structure,m3uPlaylistContext:z.m3uPlaylistContext,mediaSectionState:z.mediaSection,isoState:z.iso,transportStream:z.transportStream,flacState:z.flac,samplesObserved:z.samplesObserved,riffState:z.riff,mp3State:z.mp3,contentLength:z.contentLength,aacState:z.aac}))),g._internals.attachSimulateSeekResolution(e=>{let{aacState:t,avcState:r,flacState:i,isoState:a,iterator:n,keyframes:o,m3uState:s,mediaSection:l,mp3State:u,riffState:c,samplesObserved:d,structureState:p,tracksState:h,transportStream:m,webmState:g}=(0,f.getWorkOnSeekRequestOptions)(z);return(0,f.turnSeekIntoByte)({aacState:t,seek:e,avcState:r,contentLength:R,flacState:i,isoState:a,iterator:n,keyframes:o,logLevel:v,m3uPlaylistContext:T,m3uState:s,mediaSectionState:l,mp3State:u,riffState:c,samplesObserved:d,structureState:p,tracksState:h,transportStream:m,webmState:g})}),!N&&!$&&Object.values(z.fields).every(e=>!e)&&"query"===x&&o.Log.warn(v,Error("Warning - No `fields` and no `on*` callbacks were passed to `parseMedia()`. Specify the data you would like to retrieve."));let U=(0,p.throttledStateUpdate)({updateFn:null!=y?y:null,everyMilliseconds:null!=b?b:100,controller:g,totalBytes:R});if(await (0,a.triggerInfoEmit)(z),await (0,s.parseLoop)({state:z,throttledState:U,onError:S}),o.Log.verbose(v,"Finished parsing file"),await (0,a.emitAllInfo)(z),(0,l.printTimings)(z),z.currentReader.getCurrent().abort(),null==(O=z.iterator)||O.destroy(),z.callbacks.tracks.ensureHasTracksAtEnd(z.fields),z.m3u.abortM3UStreamRuns(),M.clear(),z.errored)throw z.errored;if(null!==z.controller._internals.seekSignal.getSeek())throw Error("Should not finish while a seek is pending");return z.returnValue}},842986,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.downloadAndParseMedia=void 0;let i=e.r(547599),a=e.r(263139),n=e.r(66415),o=e.r(686841);r.downloadAndParseMedia=async e=>{var t,r,s,l,u,c,d,p,f,h,m,g,v,y,b,x,w,S,k,C,E,_,T,P,I,A,O,M,F,R,D,j,L,B,N,$,z,U,V,H,W;if(!e)return Promise.reject(Error("No options provided. See https://www.remotion.dev/media-parser for how to get started."));let q=null!=(t=e.logLevel)?t:"info",G=await e.writer.createContent({filename:"hmm",mimeType:"shouldnotmatter",logLevel:q}),Z=await (0,a.internalParseMedia)({fields:null!=(r=e.fields)?r:null,logLevel:q,mode:"download",onAudioCodec:null!=(s=e.onAudioCodec)?s:null,onAudioTrack:null!=(l=e.onAudioTrack)?l:null,onContainer:null!=(u=e.onContainer)?u:null,onDimensions:null!=(c=e.onDimensions)?c:null,selectM3uStream:null!=(d=e.selectM3uStream)?d:i.defaultSelectM3uStreamFn,selectM3uAssociatedPlaylists:null!=(p=e.selectM3uAssociatedPlaylists)?p:i.defaultSelectM3uAssociatedPlaylists,m3uPlaylistContext:null!=(f=e.m3uPlaylistContext)?f:null,onDiscardedData:async e=>{await G.write(e)},onDurationInSeconds:null!=(h=e.onDurationInSeconds)?h:null,onFps:null!=(m=e.onFps)?m:null,onImages:null!=(g=e.onImages)?g:null,onInternalStats:null!=(v=e.onInternalStats)?v:null,onIsHdr:null!=(y=e.onIsHdr)?y:null,onKeyframes:null!=(b=e.onKeyframes)?b:null,onLocation:null!=(x=e.onLocation)?x:null,onMetadata:null!=(w=e.onMetadata)?w:null,onMimeType:null!=(S=e.onMimeType)?S:null,onName:null!=(k=e.onName)?k:null,onNumberOfAudioChannels:null!=(C=e.onNumberOfAudioChannels)?C:null,onParseProgress:null!=(E=e.onParseProgress)?E:null,onRotation:null!=(_=e.onRotation)?_:null,onSampleRate:null!=(T=e.onSampleRate)?T:null,onSize:null!=(P=e.onSize)?P:null,onSlowAudioBitrate:null!=(I=e.onSlowAudioBitrate)?I:null,onSlowDurationInSeconds:null!=(A=e.onSlowDurationInSeconds)?A:null,onSlowFps:null!=(O=e.onSlowFps)?O:null,onSlowKeyframes:null!=(M=e.onSlowKeyframes)?M:null,onSlowNumberOfFrames:null!=(F=e.onSlowNumberOfFrames)?F:null,onSlowVideoBitrate:null!=(R=e.onSlowVideoBitrate)?R:null,onSlowStructure:null!=(D=e.onSlowStructure)?D:null,onM3uStreams:null!=(j=e.onM3uStreams)?j:null,onTracks:null!=(L=e.onTracks)?L:null,onUnrotatedDimensions:null!=(B=e.onUnrotatedDimensions)?B:null,onVideoCodec:null!=(N=e.onVideoCodec)?N:null,onVideoTrack:null!=($=e.onVideoTrack)?$:null,progressIntervalInMs:null!=(z=e.progressIntervalInMs)?z:null,reader:null!=(U=e.reader)?U:o.webReader,controller:null!=(V=e.controller)?V:void 0,src:e.src,onError:async t=>{var r,i;let a=null!=(i=await (null==(r=e.onError)?void 0:r.call(e,t)))?i:{action:"fail"};return"fail"===a.action&&(n.Log.verbose(q,"Removing content"),await G.finish(),await G.remove()),a},acknowledgeRemotionLicense:!!e.acknowledgeRemotionLicense,apiName:"parseAndDownloadMedia()",makeSamplesStartAtZero:null==(H=e.makeSamplesStartAtZero)||H,seekingHints:null!=(W=e.seekingHints)?W:null});return await G.finish(),Z}},53393,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VERSION=void 0,r.VERSION="4.0.410"},500459,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WEBCODECS_TIMESCALE=r.VERSION=r.mediaParserController=r.defaultSelectM3uStreamFn=r.defaultSelectM3uAssociatedPlaylists=r.MediaParserInternals=r.downloadAndParseMedia=r.MediaParserAbortError=r.IsAPdfError=r.IsAnUnsupportedFileTypeError=r.IsAnImageError=r.hasBeenAborted=r.parseMedia=void 0;let i=e.r(442521),a=e.r(24168),n=e.r(894368),o=e.r(864161),s=e.r(155396),l=e.r(834104),u=e.r(877580),c=e.r(48037),d=e.r(263139),p=e.r(77548),f=e.r(66415),h=e.r(434642),m=e.r(993327);var g=e.r(130845);Object.defineProperty(r,"parseMedia",{enumerable:!0,get:function(){return g.parseMedia}});var v=e.r(634506);Object.defineProperty(r,"hasBeenAborted",{enumerable:!0,get:function(){return v.hasBeenAborted}}),Object.defineProperty(r,"IsAnImageError",{enumerable:!0,get:function(){return v.IsAnImageError}}),Object.defineProperty(r,"IsAnUnsupportedFileTypeError",{enumerable:!0,get:function(){return v.IsAnUnsupportedFileTypeError}}),Object.defineProperty(r,"IsAPdfError",{enumerable:!0,get:function(){return v.IsAPdfError}}),Object.defineProperty(r,"MediaParserAbortError",{enumerable:!0,get:function(){return v.MediaParserAbortError}});var y=e.r(842986);Object.defineProperty(r,"downloadAndParseMedia",{enumerable:!0,get:function(){return y.downloadAndParseMedia}}),r.MediaParserInternals={Log:f.Log,createAacCodecPrivate:i.createAacCodecPrivate,matroskaElements:c.matroskaElements,ebmlMap:c.ebmlMap,parseTkhd:l.parseTkhd,getArrayBufferIterator:p.getArrayBufferIterator,parseStsd:s.parseStsd,makeParserState:m.makeParserState,processSample:o.processIsoFormatBox,parseFtyp:a.parseFtyp,parseEbml:u.parseEbml,parseMvhd:n.parseMvhd,internalParseMedia:d.internalParseMedia,fieldsNeedSamplesMap:h.fieldsNeedSamplesMap};var b=e.r(547599);Object.defineProperty(r,"defaultSelectM3uAssociatedPlaylists",{enumerable:!0,get:function(){return b.defaultSelectM3uAssociatedPlaylists}}),Object.defineProperty(r,"defaultSelectM3uStreamFn",{enumerable:!0,get:function(){return b.defaultSelectM3uStreamFn}});var x=e.r(689127);Object.defineProperty(r,"mediaParserController",{enumerable:!0,get:function(){return x.mediaParserController}});var w=e.r(53393);Object.defineProperty(r,"VERSION",{enumerable:!0,get:function(){return w.VERSION}});var S=e.r(452893);Object.defineProperty(r,"WEBCODECS_TIMESCALE",{enumerable:!0,get:function(){return S.WEBCODECS_TIMESCALE}})},651595,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createStill=r.createComposition=void 0;let i=e.r(222260),a=e.r(49019);r.createComposition=({...e})=>()=>(0,i.jsx)(a.Composition,{...e}),r.createStill=({...e})=>()=>(0,i.jsx)(a.Still,{...e})},379442,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.callApi=void 0,r.callApi=(e,t,r)=>new Promise((i,a)=>{fetch(e,{method:"post",headers:{"content-type":"application/json"},signal:r,body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{e.success?i(e.data):a(Error(e.error))}).catch(e=>{a(e)})})},411803,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deleteStaticFile=void 0;let i=e.r(49019),a=e.r(379442);r.deleteStaticFile=async e=>{if(!(0,i.getRemotionEnvironment)().isStudio)throw Error("deleteStaticFile() is only available in the Studio");if(window.remotion_isReadOnlyStudio)throw Error("deleteStaticFile() is not available in Read-Only Studio");return e.startsWith(window.remotion_staticBase)&&(e=e.substring(window.remotion_staticBase.length+1)),await (0,a.callApi)("/api/delete-static-file",{relativePath:e})}},850301,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.defaultPropsEditorScrollableAreaRef=r.DEFAULT_PROPS_PATH_ACTIVE_CLASSNAME=r.DEFAULT_PROPS_PATH_CLASSNAME=void 0;let a=i(e.r(347540));r.DEFAULT_PROPS_PATH_CLASSNAME="__remotion-default-props-editor-label",r.DEFAULT_PROPS_PATH_ACTIVE_CLASSNAME="__remotion-default-props-editor-label-active",r.defaultPropsEditorScrollableAreaRef=a.default.createRef()},657147,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.focusDefaultPropsPath=void 0;let i=e.r(850301);r.focusDefaultPropsPath=({path:e,scrollBehavior:t})=>{let r=document.querySelector(`.${i.DEFAULT_PROPS_PATH_ACTIVE_CLASSNAME}`);null!==r&&r.classList.remove(i.DEFAULT_PROPS_PATH_ACTIVE_CLASSNAME);let a=document.querySelector(`.${i.DEFAULT_PROPS_PATH_CLASSNAME}[data-json-path="${e.join(".")}"]`);return null===a?{success:!1}:(a.scrollIntoView({behavior:t}),a.classList.add(i.DEFAULT_PROPS_PATH_ACTIVE_CLASSNAME),{success:!0})}},208795,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getStaticFiles=void 0;let i=!1,a=!1;r.getStaticFiles=()=>"u"<typeof document?(i||(i=!0,console.warn("Called getStaticFiles() on the server. The API is only available in the browser. An empty array was returned.")),[]):window.remotion_isPlayer?(a||(a=!0,console.warn("Called getStaticFiles() while using the Remotion Player. The API is only available while using the Remotion Studio. An empty array was returned.")),[]):window.remotion_staticFiles},637842,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.goToComposition=void 0;let i=e.r(49019);r.goToComposition=e=>{var t;null==(t=i.Internals.compositionSelectorRef.current)||t.selectComposition(e)}},517547,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.pause=void 0;let i=e.r(49019);r.pause=()=>{var e;null==(e=i.Internals.timeValueRef.current)||e.pause()}},110179,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.play=void 0;let i=e.r(49019);r.play=e=>{var t;null==(t=i.Internals.timeValueRef.current)||t.play(e)}},782434,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.reevaluateComposition=void 0;let i=e.r(49019);r.reevaluateComposition=()=>{var e;null==(e=i.Internals.resolveCompositionsRef.current)||e.reloadCurrentlySelectedComposition()}},604638,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.restartStudio=void 0;let i=e.r(49019),a=e.r(379442);r.restartStudio=()=>{if(!(0,i.getRemotionEnvironment)().isStudio)throw Error("restartStudio() is only available in the Studio");if(window.remotion_isReadOnlyStudio)throw Error("restartStudio() is not available in read-only Studio");return(0,a.callApi)("/api/restart-studio",{})}},874637,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.extractEnumJsonPaths=void 0,r.extractEnumJsonPaths=({schema:e,zodRuntime:t,currentPath:i,zodTypes:a})=>{let n=e._def,o=n.typeName;switch(o){case t.ZodFirstPartyTypeKind.ZodObject:{let e=n.shape();return Object.keys(e).map(n=>(0,r.extractEnumJsonPaths)({schema:e[n],zodRuntime:t,currentPath:[...i,n],zodTypes:a})).flat(1)}case t.ZodFirstPartyTypeKind.ZodArray:return(0,r.extractEnumJsonPaths)({schema:n.type,zodRuntime:t,currentPath:[...i,"[]"],zodTypes:a});case t.ZodFirstPartyTypeKind.ZodUnion:return n.options.map(e=>(0,r.extractEnumJsonPaths)({schema:e,zodRuntime:t,currentPath:i,zodTypes:a})).flat(1);case t.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return n.options.map(e=>(0,r.extractEnumJsonPaths)({schema:e,zodRuntime:t,currentPath:i,zodTypes:a})).flat(1);case t.ZodFirstPartyTypeKind.ZodLiteral:return[i];case t.ZodFirstPartyTypeKind.ZodEffects:if(a&&e._def.description===a.ZodZypesInternals.REMOTION_MATRIX_BRAND)return[i];return(0,r.extractEnumJsonPaths)({schema:n.schema,zodRuntime:t,currentPath:i,zodTypes:a});case t.ZodFirstPartyTypeKind.ZodIntersection:{let{left:e,right:o}=n;return[...(0,r.extractEnumJsonPaths)({schema:e,zodRuntime:t,currentPath:i,zodTypes:a}),...(0,r.extractEnumJsonPaths)({schema:o,zodRuntime:t,currentPath:i,zodTypes:a})]}case t.ZodFirstPartyTypeKind.ZodTuple:return n.items.map((e,n)=>(0,r.extractEnumJsonPaths)({schema:e,zodRuntime:t,currentPath:[...i,n],zodTypes:a})).flat(1);case t.ZodFirstPartyTypeKind.ZodRecord:return(0,r.extractEnumJsonPaths)({schema:n.valueType,zodRuntime:t,currentPath:[...i,"{}"],zodTypes:a});case t.ZodFirstPartyTypeKind.ZodFunction:throw Error("Cannot create a value for type function");case t.ZodFirstPartyTypeKind.ZodEnum:return[i];case t.ZodFirstPartyTypeKind.ZodNativeEnum:return[];case t.ZodFirstPartyTypeKind.ZodOptional:case t.ZodFirstPartyTypeKind.ZodNullable:case t.ZodFirstPartyTypeKind.ZodDefault:case t.ZodFirstPartyTypeKind.ZodCatch:return(0,r.extractEnumJsonPaths)({schema:n.innerType,zodRuntime:t,currentPath:i,zodTypes:a});case t.ZodFirstPartyTypeKind.ZodPromise:return[];case t.ZodFirstPartyTypeKind.ZodBranded:return(0,r.extractEnumJsonPaths)({schema:n.type,zodRuntime:t,currentPath:i,zodTypes:a});case t.ZodFirstPartyTypeKind.ZodPipeline:return(0,r.extractEnumJsonPaths)({schema:n.out,zodRuntime:t,currentPath:i,zodTypes:a});case t.ZodFirstPartyTypeKind.ZodString:case t.ZodFirstPartyTypeKind.ZodNumber:case t.ZodFirstPartyTypeKind.ZodBigInt:case t.ZodFirstPartyTypeKind.ZodBoolean:case t.ZodFirstPartyTypeKind.ZodNaN:case t.ZodFirstPartyTypeKind.ZodDate:case t.ZodFirstPartyTypeKind.ZodSymbol:case t.ZodFirstPartyTypeKind.ZodUndefined:case t.ZodFirstPartyTypeKind.ZodNull:case t.ZodFirstPartyTypeKind.ZodAny:case t.ZodFirstPartyTypeKind.ZodUnknown:case t.ZodFirstPartyTypeKind.ZodNever:case t.ZodFirstPartyTypeKind.ZodVoid:case t.ZodFirstPartyTypeKind.ZodMap:case t.ZodFirstPartyTypeKind.ZodLazy:case t.ZodFirstPartyTypeKind.ZodSet:return[];default:throw Error("Not implemented: "+o)}}},20330,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.applyVisualControlChange=r.canUpdateDefaultProps=r.callUpdateDefaultPropsApi=r.getProjectInfo=r.updateAvailable=r.cancelRenderJob=r.removeRenderJob=r.applyCodemod=r.openInFileExplorer=r.subscribeToFileExistenceWatcher=r.unsubscribeFromFileExistenceWatcher=r.addVideoRenderJob=r.addSequenceRenderJob=r.addStillRenderJob=void 0;let i=e.r(758927),a=e.r(379442);r.addStillRenderJob=({compositionId:e,outName:t,imageFormat:r,jpegQuality:n,frame:o,scale:s,logLevel:l,chromiumOptions:u,delayRenderTimeout:c,envVariables:d,inputProps:p,offthreadVideoCacheSizeInBytes:f,offthreadVideoThreads:h,multiProcessOnLinux:m,beepOnFinish:g,metadata:v,chromeMode:y,mediaCacheSizeInBytes:b})=>(0,a.callApi)("/api/render",{compositionId:e,type:"still",outName:t,imageFormat:r,jpegQuality:n,frame:o,scale:s,logLevel:l,chromiumOptions:u,delayRenderTimeout:c,envVariables:d,serializedInputPropsWithCustomSchema:i.NoReactInternals.serializeJSONWithSpecialTypes({data:p,staticBase:window.remotion_staticBase,indent:void 0}).serializedString,offthreadVideoCacheSizeInBytes:f,offthreadVideoThreads:h,multiProcessOnLinux:m,beepOnFinish:g,metadata:v,chromeMode:y,mediaCacheSizeInBytes:b}),r.addSequenceRenderJob=({compositionId:e,outName:t,imageFormat:r,startFrame:n,endFrame:o,scale:s,logLevel:l,chromiumOptions:u,delayRenderTimeout:c,envVariables:d,inputProps:p,concurrency:f,offthreadVideoCacheSizeInBytes:h,offthreadVideoThreads:m,jpegQuality:g,disallowParallelEncoding:v,multiProcessOnLinux:y,beepOnFinish:b,repro:x,metadata:w,chromeMode:S,mediaCacheSizeInBytes:k})=>(0,a.callApi)("/api/render",{compositionId:e,type:"sequence",outName:t,imageFormat:r,jpegQuality:g,scale:s,startFrame:n,endFrame:o,logLevel:l,chromiumOptions:u,delayRenderTimeout:c,envVariables:d,concurrency:f,serializedInputPropsWithCustomSchema:i.NoReactInternals.serializeJSONWithSpecialTypes({data:p,staticBase:window.remotion_staticBase,indent:void 0}).serializedString,offthreadVideoCacheSizeInBytes:h,offthreadVideoThreads:m,disallowParallelEncoding:v,multiProcessOnLinux:y,beepOnFinish:b,repro:x,metadata:w,chromeMode:S,mediaCacheSizeInBytes:k}),r.addVideoRenderJob=({compositionId:e,outName:t,imageFormat:r,jpegQuality:n,scale:o,logLevel:s,codec:l,concurrency:u,crf:c,startFrame:d,endFrame:p,muted:f,enforceAudioTrack:h,proResProfile:m,x264Preset:g,pixelFormat:v,audioBitrate:y,videoBitrate:b,everyNthFrame:x,numberOfGifLoops:w,delayRenderTimeout:S,audioCodec:k,disallowParallelEncoding:C,chromiumOptions:E,envVariables:_,inputProps:T,offthreadVideoCacheSizeInBytes:P,offthreadVideoThreads:I,colorSpace:A,multiProcessOnLinux:O,encodingMaxRate:M,encodingBufferSize:F,beepOnFinish:R,repro:D,forSeamlessAacConcatenation:j,separateAudioTo:L,metadata:B,hardwareAcceleration:N,chromeMode:$,mediaCacheSizeInBytes:z})=>(0,a.callApi)("/api/render",{compositionId:e,type:"video",outName:t,imageFormat:r,jpegQuality:n,scale:o,logLevel:s,codec:l,concurrency:u,crf:c,endFrame:p,startFrame:d,muted:f,enforceAudioTrack:h,proResProfile:m,x264Preset:g,pixelFormat:v,audioBitrate:y,videoBitrate:b,everyNthFrame:x,numberOfGifLoops:w,delayRenderTimeout:S,audioCodec:k,disallowParallelEncoding:C,chromiumOptions:E,envVariables:_,serializedInputPropsWithCustomSchema:i.NoReactInternals.serializeJSONWithSpecialTypes({data:T,staticBase:window.remotion_staticBase,indent:void 0}).serializedString,offthreadVideoCacheSizeInBytes:P,offthreadVideoThreads:I,colorSpace:A,multiProcessOnLinux:O,encodingBufferSize:F,encodingMaxRate:M,beepOnFinish:R,repro:D,forSeamlessAacConcatenation:j,separateAudioTo:L,metadata:B,hardwareAcceleration:N,chromeMode:$,mediaCacheSizeInBytes:z}),r.unsubscribeFromFileExistenceWatcher=({file:e,clientId:t})=>(0,a.callApi)("/api/unsubscribe-from-file-existence",{file:e,clientId:t}),r.subscribeToFileExistenceWatcher=async({file:e,clientId:t})=>{let{exists:r}=await (0,a.callApi)("/api/subscribe-to-file-existence",{file:e,clientId:t});return r},r.openInFileExplorer=({directory:e})=>(0,a.callApi)("/api/open-in-file-explorer",{directory:e}),r.applyCodemod=({codemod:e,dryRun:t,signal:r})=>(0,a.callApi)("/api/apply-codemod",{codemod:e,dryRun:t},r),r.removeRenderJob=e=>(0,a.callApi)("/api/remove-render",{jobId:e.id}),r.cancelRenderJob=e=>(0,a.callApi)("/api/cancel",{jobId:e.id}),r.updateAvailable=e=>(0,a.callApi)("/api/update-available",{},e),r.getProjectInfo=e=>(0,a.callApi)("/api/project-info",{},e),r.callUpdateDefaultPropsApi=(e,t,r)=>(0,a.callApi)("/api/update-default-props",{compositionId:e,defaultProps:i.NoReactInternals.serializeJSONWithSpecialTypes({data:t,indent:void 0,staticBase:window.remotion_staticBase}).serializedString,enumPaths:r}),r.canUpdateDefaultProps=(e,t)=>t?Promise.resolve({canUpdate:!1,reason:"Read-only studio"}):(0,a.callApi)("/api/can-update-default-props",{compositionId:e}),r.applyVisualControlChange=({fileName:e,changes:t})=>(0,a.callApi)("/api/apply-visual-control-change",{fileName:e,changes:t})},845249,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.calcNewProps=void 0;let i=e.r(49019);r.calcNewProps=(e,t)=>{var r,a;if(!(0,i.getRemotionEnvironment)().isStudio)throw Error("saveDefaultProps can only be called in the Remotion Studio.");let{compositionsRef:n,editorPropsProviderRef:o}=i.Internals,s=n.current;if(!s)throw Error("No compositions ref found. Are you in the Remotion Studio and are the Remotion versions aligned?");let l=s.getCompositions(),u=l.find(t=>t.id===e);if(!u)throw Error(`No composition with the ID ${e} found. Available compositions: ${l.map(e=>e.id).join(", ")}`);let c=o.current;if(!c)throw Error("No props store found. Are you in the Remotion Studio and are the Remotion versions aligned?");let d=null!=(r=u.defaultProps)?r:{},p=null!=(a=c.getProps()[e])?a:d,f=t({schema:u.schema,savedDefaultProps:d,unsavedDefaultProps:p});return{composition:u,generatedDefaultProps:f}}},372357,(e,t,r)=>{"use strict";var i,a;Object.defineProperty(r,"__esModule",{value:!0}),r.getParsedType=r.ZodParsedType=r.objectUtil=r.util=void 0,(a=i=r.util||(r.util={})).assertEqual=e=>e,a.assertIs=function(e){},a.assertNever=function(e){throw Error()},a.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},a.getValidEnumValues=e=>{let t=a.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),r={};for(let i of t)r[i]=e[i];return a.objectValues(r)},a.objectValues=e=>a.objectKeys(e).map(function(t){return e[t]}),a.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},a.find=(e,t)=>{for(let r of e)if(t(r))return r},a.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,a.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},a.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(r.objectUtil||(r.objectUtil={})).mergeShapes=(e,t)=>({...e,...t}),r.ZodParsedType=i.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),r.getParsedType=e=>{switch(typeof e){case"undefined":return r.ZodParsedType.undefined;case"string":return r.ZodParsedType.string;case"number":return isNaN(e)?r.ZodParsedType.nan:r.ZodParsedType.number;case"boolean":return r.ZodParsedType.boolean;case"function":return r.ZodParsedType.function;case"bigint":return r.ZodParsedType.bigint;case"symbol":return r.ZodParsedType.symbol;case"object":if(Array.isArray(e))return r.ZodParsedType.array;if(null===e)return r.ZodParsedType.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return r.ZodParsedType.promise;if("u">typeof Map&&e instanceof Map)return r.ZodParsedType.map;if("u">typeof Set&&e instanceof Set)return r.ZodParsedType.set;if("u">typeof Date&&e instanceof Date)return r.ZodParsedType.date;return r.ZodParsedType.object;default:return r.ZodParsedType.unknown}}},778695,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZodError=r.quotelessJson=r.ZodIssueCode=void 0;let i=e.r(372357);r.ZodIssueCode=i.util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),r.quotelessJson=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class a extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let t=e||function(e){return e.message},r={_errors:[]},i=e=>{for(let a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(i);else if("invalid_return_type"===a.code)i(a.returnTypeError);else if("invalid_arguments"===a.code)i(a.argumentsError);else if(0===a.path.length)r._errors.push(t(a));else{let e=r,i=0;for(;i<a.path.length;){let r=a.path[i];i===a.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(a))):e[r]=e[r]||{_errors:[]},e=e[r],i++}}};return i(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,i.util.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}r.ZodError=a,a.create=e=>new a(e)},843670,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(372357),a=e.r(778695);r.default=(e,t)=>{let r;switch(e.code){case a.ZodIssueCode.invalid_type:r=e.received===i.ZodParsedType.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case a.ZodIssueCode.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,i.util.jsonStringifyReplacer)}`;break;case a.ZodIssueCode.unrecognized_keys:r=`Unrecognized key(s) in object: ${i.util.joinValues(e.keys,", ")}`;break;case a.ZodIssueCode.invalid_union:r="Invalid input";break;case a.ZodIssueCode.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${i.util.joinValues(e.options)}`;break;case a.ZodIssueCode.invalid_enum_value:r=`Invalid enum value. Expected ${i.util.joinValues(e.options)}, received '${e.received}'`;break;case a.ZodIssueCode.invalid_arguments:r="Invalid function arguments";break;case a.ZodIssueCode.invalid_return_type:r="Invalid function return type";break;case a.ZodIssueCode.invalid_date:r="Invalid date";break;case a.ZodIssueCode.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:i.util.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case a.ZodIssueCode.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case a.ZodIssueCode.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case a.ZodIssueCode.custom:r="Invalid input";break;case a.ZodIssueCode.invalid_intersection_types:r="Intersection results could not be merged";break;case a.ZodIssueCode.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case a.ZodIssueCode.not_finite:r="Number must be finite";break;default:r=t.defaultError,i.util.assertNever(e)}return{message:r}}},29688,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.getErrorMap=r.setErrorMap=r.defaultErrorMap=void 0;let a=i(e.r(843670));r.defaultErrorMap=a.default;let n=a.default;r.setErrorMap=function(e){n=e},r.getErrorMap=function(){return n}},850440,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isAsync=r.isValid=r.isDirty=r.isAborted=r.OK=r.DIRTY=r.INVALID=r.ParseStatus=r.addIssueToContext=r.EMPTY_PATH=r.makeIssue=void 0;let a=e.r(29688),n=i(e.r(843670));r.makeIssue=e=>{let{data:t,path:r,errorMaps:i,issueData:a}=e,n=[...r,...a.path||[]],o={...a,path:n},s="";for(let e of i.filter(e=>!!e).slice().reverse())s=e(o,{data:t,defaultError:s}).message;return{...a,path:n,message:a.message||s}},r.EMPTY_PATH=[],r.addIssueToContext=function(e,t){let i=(0,r.makeIssue)({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,(0,a.getErrorMap)(),n.default].filter(e=>!!e)});e.common.issues.push(i)};class o{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let i=[];for(let a of t){if("aborted"===a.status)return r.INVALID;"dirty"===a.status&&e.dirty(),i.push(a.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,t){let r=[];for(let e of t)r.push({key:await e.key,value:await e.value});return o.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let i={};for(let a of t){let{key:t,value:n}=a;if("aborted"===t.status||"aborted"===n.status)return r.INVALID;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==n.value||a.alwaysSet)&&(i[t.value]=n.value)}return{status:e.value,value:i}}}r.ParseStatus=o,r.INVALID=Object.freeze({status:"aborted"}),r.DIRTY=e=>({status:"dirty",value:e}),r.OK=e=>({status:"valid",value:e}),r.isAborted=e=>"aborted"===e.status,r.isDirty=e=>"dirty"===e.status,r.isValid=e=>"valid"===e.status,r.isAsync=e=>"u">typeof Promise&&e instanceof Promise},107237,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},505985,(e,t,r)=>{"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.errorUtil=void 0,(i=r.errorUtil||(r.errorUtil={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},i.toString=e=>"string"==typeof e?e:null==e?void 0:e.message},827973,(e,t,r)=>{"use strict";var i,a;Object.defineProperty(r,"__esModule",{value:!0}),r.date=r.boolean=r.bigint=r.array=r.any=r.coerce=r.ZodFirstPartyTypeKind=r.late=r.ZodSchema=r.Schema=r.custom=r.ZodReadonly=r.ZodPipeline=r.ZodBranded=r.BRAND=r.ZodNaN=r.ZodCatch=r.ZodDefault=r.ZodNullable=r.ZodOptional=r.ZodTransformer=r.ZodEffects=r.ZodPromise=r.ZodNativeEnum=r.ZodEnum=r.ZodLiteral=r.ZodLazy=r.ZodFunction=r.ZodSet=r.ZodMap=r.ZodRecord=r.ZodTuple=r.ZodIntersection=r.ZodDiscriminatedUnion=r.ZodUnion=r.ZodObject=r.ZodArray=r.ZodVoid=r.ZodNever=r.ZodUnknown=r.ZodAny=r.ZodNull=r.ZodUndefined=r.ZodSymbol=r.ZodDate=r.ZodBoolean=r.ZodBigInt=r.ZodNumber=r.ZodString=r.ZodType=void 0,r.NEVER=r.void=r.unknown=r.union=r.undefined=r.tuple=r.transformer=r.symbol=r.string=r.strictObject=r.set=r.record=r.promise=r.preprocess=r.pipeline=r.ostring=r.optional=r.onumber=r.oboolean=r.object=r.number=r.nullable=r.null=r.never=r.nativeEnum=r.nan=r.map=r.literal=r.lazy=r.intersection=r.instanceof=r.function=r.enum=r.effect=r.discriminatedUnion=void 0;let n=e.r(29688),o=e.r(505985),s=e.r(850440),l=e.r(372357),u=e.r(778695);class c{constructor(e,t,r,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let d=(e,t)=>{if((0,s.isValid)(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new u.ZodError(e.common.issues);return this._error=t,this._error}}};function p(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:i,description:a}=e;if(t&&(r||i))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:a}:{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=i?i:t.defaultError}:{message:null!=r?r:t.defaultError},description:a}}class f{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return(0,l.getParsedType)(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:(0,l.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new s.ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:(0,l.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if((0,s.isAsync)(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let i={common:{issues:[],async:null!=(r=null==t?void 0:t.async)&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,l.getParsedType)(e)},a=this._parseSync({data:e,path:i.path,parent:i});return d(i,a)}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,l.getParsedType)(e)},i=this._parse({data:e,path:r.path,parent:r});return d(r,await ((0,s.isAsync)(i)?i:Promise.resolve(i)))}refine(e,t){return this._refinement((r,i)=>{let a=e(r),n=()=>i.addIssue({code:u.ZodIssueCode.custom,..."string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(r):t});return"u">typeof Promise&&a instanceof Promise?a.then(e=>!!e||(n(),!1)):!!a||(n(),!1)})}refinement(e,t){return this._refinement((r,i)=>!!e(r)||(i.addIssue("function"==typeof t?t(r,i):t),!1))}_refinement(e){return new J({schema:this,typeName:i.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Y.create(this,this._def)}nullable(){return ee.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return D.create(this,this._def)}promise(){return X.create(this,this._def)}or(e){return L.create([this,e],this._def)}and(e){return $.create(this,e,this._def)}transform(e){return new J({...p(this._def),schema:this,typeName:i.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new et({...p(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:i.ZodDefault})}brand(){return new ea({typeName:i.ZodBranded,type:this,...p(this._def)})}catch(e){return new er({...p(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:i.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return en.create(this,e)}readonly(){return eo.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}r.ZodType=f,r.Schema=f,r.ZodSchema=f;let h=/^c[^\s-]{8,}$/i,m=/^[a-z][a-z0-9]*$/,g=/[0-9A-HJKMNP-TV-Z]{26}/,v=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,y=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,b=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,x=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,w=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,S=e=>{if(e.precision)if(e.offset)return RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`);else return RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}Z$`);if(0===e.precision)if(e.offset)return RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$");else return RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$");return e.offset?RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")};class k extends f{constructor(){super(...arguments),this._regex=(e,t,r)=>this.refinement(t=>e.test(t),{validation:t,code:u.ZodIssueCode.invalid_string,...o.errorUtil.errToObj(r)}),this.nonempty=e=>this.min(1,o.errorUtil.errToObj(e)),this.trim=()=>new k({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new k({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new k({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){let t;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==l.ZodParsedType.string){let t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.string,received:t.parsedType}),s.INVALID}let r=new s.ParseStatus;for(let n of this._def.checks)if("min"===n.kind)e.data.length<n.value&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),r.dirty());else if("max"===n.kind)e.data.length>n.value&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),r.dirty());else if("length"===n.kind){let i=e.data.length>n.value,a=e.data.length<n.value;(i||a)&&(t=this._getOrReturnCtx(e,t),i?(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):a&&(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),r.dirty())}else if("email"===n.kind)y.test(e.data)||(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{validation:"email",code:u.ZodIssueCode.invalid_string,message:n.message}),r.dirty());else if("emoji"===n.kind)b.test(e.data)||(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{validation:"emoji",code:u.ZodIssueCode.invalid_string,message:n.message}),r.dirty());else if("uuid"===n.kind)v.test(e.data)||(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{validation:"uuid",code:u.ZodIssueCode.invalid_string,message:n.message}),r.dirty());else if("cuid"===n.kind)h.test(e.data)||(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{validation:"cuid",code:u.ZodIssueCode.invalid_string,message:n.message}),r.dirty());else if("cuid2"===n.kind)m.test(e.data)||(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{validation:"cuid2",code:u.ZodIssueCode.invalid_string,message:n.message}),r.dirty());else if("ulid"===n.kind)g.test(e.data)||(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{validation:"ulid",code:u.ZodIssueCode.invalid_string,message:n.message}),r.dirty());else if("url"===n.kind)try{new URL(e.data)}catch(i){t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{validation:"url",code:u.ZodIssueCode.invalid_string,message:n.message}),r.dirty()}else if("regex"===n.kind)n.regex.lastIndex=0,n.regex.test(e.data)||(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{validation:"regex",code:u.ZodIssueCode.invalid_string,message:n.message}),r.dirty());else if("trim"===n.kind)e.data=e.data.trim();else if("includes"===n.kind)e.data.includes(n.value,n.position)||(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),r.dirty());else if("toLowerCase"===n.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===n.kind)e.data=e.data.toUpperCase();else if("startsWith"===n.kind)e.data.startsWith(n.value)||(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_string,validation:{startsWith:n.value},message:n.message}),r.dirty());else if("endsWith"===n.kind)e.data.endsWith(n.value)||(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_string,validation:{endsWith:n.value},message:n.message}),r.dirty());else if("datetime"===n.kind)S(n).test(e.data)||(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_string,validation:"datetime",message:n.message}),r.dirty());else if("ip"===n.kind){var i,a;i=e.data,!(("v4"===(a=n.version)||!a)&&x.test(i)||("v6"===a||!a)&&w.test(i))&&1&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{validation:"ip",code:u.ZodIssueCode.invalid_string,message:n.message}),r.dirty())}else l.util.assertNever(n);return{status:r.value,value:e.data}}_addCheck(e){return new k({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...o.errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...o.errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...o.errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...o.errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...o.errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...o.errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...o.errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...o.errorUtil.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!=(t=null==e?void 0:e.offset)&&t,...o.errorUtil.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...o.errorUtil.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...o.errorUtil.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...o.errorUtil.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...o.errorUtil.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...o.errorUtil.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...o.errorUtil.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...o.errorUtil.errToObj(t)})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}r.ZodString=k,k.create=e=>{var t;return new k({checks:[],typeName:i.ZodString,coerce:null!=(t=null==e?void 0:e.coerce)&&t,...p(e)})};class C extends f{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==l.ZodParsedType.number){let t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.number,received:t.parsedType}),s.INVALID}let r=new s.ParseStatus;for(let i of this._def.checks)"int"===i.kind?l.util.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:"integer",received:"float",message:i.message}),r.dirty()):"min"===i.kind?(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):"max"===i.kind?(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):"multipleOf"===i.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,i=(t.toString().split(".")[1]||"").length,a=r>i?r:i;return parseInt(e.toFixed(a).replace(".",""))%parseInt(t.toFixed(a).replace(".",""))/Math.pow(10,a)}(e.data,i.value)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):"finite"===i.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.not_finite,message:i.message}),r.dirty()):l.util.assertNever(i);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,o.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,o.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,o.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,o.errorUtil.toString(t))}setLimit(e,t,r,i){return new C({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:o.errorUtil.toString(i)}]})}_addCheck(e){return new C({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:o.errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:o.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:o.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:o.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:o.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:o.errorUtil.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:o.errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:o.errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:o.errorUtil.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&l.util.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks)if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;else"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value);return Number.isFinite(t)&&Number.isFinite(e)}}r.ZodNumber=C,C.create=e=>new C({checks:[],typeName:i.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...p(e)});class E extends f{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==l.ZodParsedType.bigint){let t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.bigint,received:t.parsedType}),s.INVALID}let r=new s.ParseStatus;for(let i of this._def.checks)"min"===i.kind?(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):"max"===i.kind?(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):"multipleOf"===i.kind?e.data%i.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):l.util.assertNever(i);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,o.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,o.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,o.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,o.errorUtil.toString(t))}setLimit(e,t,r,i){return new E({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:o.errorUtil.toString(i)}]})}_addCheck(e){return new E({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:o.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:o.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:o.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:o.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:o.errorUtil.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}r.ZodBigInt=E,E.create=e=>{var t;return new E({checks:[],typeName:i.ZodBigInt,coerce:null!=(t=null==e?void 0:e.coerce)&&t,...p(e)})};class _ extends f{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==l.ZodParsedType.boolean){let t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.boolean,received:t.parsedType}),s.INVALID}return(0,s.OK)(e.data)}}r.ZodBoolean=_,_.create=e=>new _({typeName:i.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...p(e)});class T extends f{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==l.ZodParsedType.date){let t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.date,received:t.parsedType}),s.INVALID}if(isNaN(e.data.getTime())){let t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_date}),s.INVALID}let r=new s.ParseStatus;for(let i of this._def.checks)"min"===i.kind?e.data.getTime()<i.value&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):"max"===i.kind?e.data.getTime()>i.value&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):l.util.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new T({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:o.errorUtil.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:o.errorUtil.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}r.ZodDate=T,T.create=e=>new T({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:i.ZodDate,...p(e)});class P extends f{_parse(e){if(this._getType(e)!==l.ZodParsedType.symbol){let t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.symbol,received:t.parsedType}),s.INVALID}return(0,s.OK)(e.data)}}r.ZodSymbol=P,P.create=e=>new P({typeName:i.ZodSymbol,...p(e)});class I extends f{_parse(e){if(this._getType(e)!==l.ZodParsedType.undefined){let t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.undefined,received:t.parsedType}),s.INVALID}return(0,s.OK)(e.data)}}r.ZodUndefined=I,I.create=e=>new I({typeName:i.ZodUndefined,...p(e)});class A extends f{_parse(e){if(this._getType(e)!==l.ZodParsedType.null){let t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.null,received:t.parsedType}),s.INVALID}return(0,s.OK)(e.data)}}r.ZodNull=A,A.create=e=>new A({typeName:i.ZodNull,...p(e)});class O extends f{constructor(){super(...arguments),this._any=!0}_parse(e){return(0,s.OK)(e.data)}}r.ZodAny=O,O.create=e=>new O({typeName:i.ZodAny,...p(e)});class M extends f{constructor(){super(...arguments),this._unknown=!0}_parse(e){return(0,s.OK)(e.data)}}r.ZodUnknown=M,M.create=e=>new M({typeName:i.ZodUnknown,...p(e)});class F extends f{_parse(e){let t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.never,received:t.parsedType}),s.INVALID}}r.ZodNever=F,F.create=e=>new F({typeName:i.ZodNever,...p(e)});class R extends f{_parse(e){if(this._getType(e)!==l.ZodParsedType.undefined){let t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.void,received:t.parsedType}),s.INVALID}return(0,s.OK)(e.data)}}r.ZodVoid=R,R.create=e=>new R({typeName:i.ZodVoid,...p(e)});class D extends f{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),i=this._def;if(t.parsedType!==l.ZodParsedType.array)return(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.array,received:t.parsedType}),s.INVALID;if(null!==i.exactLength){let e=t.data.length>i.exactLength.value,a=t.data.length<i.exactLength.value;(e||a)&&((0,s.addIssueToContext)(t,{code:e?u.ZodIssueCode.too_big:u.ZodIssueCode.too_small,minimum:a?i.exactLength.value:void 0,maximum:e?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(null!==i.minLength&&t.data.length<i.minLength.value&&((0,s.addIssueToContext)(t,{code:u.ZodIssueCode.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),null!==i.maxLength&&t.data.length>i.maxLength.value&&((0,s.addIssueToContext)(t,{code:u.ZodIssueCode.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>i.type._parseAsync(new c(t,e,t.path,r)))).then(e=>s.ParseStatus.mergeArray(r,e));let a=[...t.data].map((e,r)=>i.type._parseSync(new c(t,e,t.path,r)));return s.ParseStatus.mergeArray(r,a)}get element(){return this._def.type}min(e,t){return new D({...this._def,minLength:{value:e,message:o.errorUtil.toString(t)}})}max(e,t){return new D({...this._def,maxLength:{value:e,message:o.errorUtil.toString(t)}})}length(e,t){return new D({...this._def,exactLength:{value:e,message:o.errorUtil.toString(t)}})}nonempty(e){return this.min(1,e)}}r.ZodArray=D,D.create=(e,t)=>new D({type:e,minLength:null,maxLength:null,exactLength:null,typeName:i.ZodArray,...p(t)});class j extends f{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=l.util.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==l.ZodParsedType.object){let t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.object,received:t.parsedType}),s.INVALID}let{status:t,ctx:r}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),n=[];if(!(this._def.catchall instanceof F&&"strip"===this._def.unknownKeys))for(let e in r.data)a.includes(e)||n.push(e);let o=[];for(let e of a){let t=i[e],a=r.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new c(r,a,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof F){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of n)o.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)n.length>0&&((0,s.addIssueToContext)(r,{code:u.ZodIssueCode.unrecognized_keys,keys:n}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of n){let i=r.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new c(r,i,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of o){let r=await t.key;e.push({key:r,value:await t.value,alwaysSet:t.alwaysSet})}return e}).then(e=>s.ParseStatus.mergeObjectSync(t,e)):s.ParseStatus.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return o.errorUtil.errToObj,new j({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var i,a,n,s;let l=null!=(n=null==(a=(i=this._def).errorMap)?void 0:a.call(i,t,r).message)?n:r.defaultError;return"unrecognized_keys"===t.code?{message:null!=(s=o.errorUtil.errToObj(e).message)?s:l}:{message:l}}}:{}})}strip(){return new j({...this._def,unknownKeys:"strip"})}passthrough(){return new j({...this._def,unknownKeys:"passthrough"})}extend(e){return new j({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new j({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:i.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new j({...this._def,catchall:e})}pick(e){let t={};return l.util.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new j({...this._def,shape:()=>t})}omit(e){let t={};return l.util.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new j({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof j){let r={};for(let i in t.shape){let a=t.shape[i];r[i]=Y.create(e(a))}return new j({...t._def,shape:()=>r})}if(t instanceof D)return new D({...t._def,type:e(t.element)});if(t instanceof Y)return Y.create(e(t.unwrap()));if(t instanceof ee)return ee.create(e(t.unwrap()));if(t instanceof z)return z.create(t.items.map(t=>e(t)));else return t}(this)}partial(e){let t={};return l.util.objectKeys(this.shape).forEach(r=>{let i=this.shape[r];e&&!e[r]?t[r]=i:t[r]=i.optional()}),new j({...this._def,shape:()=>t})}required(e){let t={};return l.util.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof Y;)e=e._def.innerType;t[r]=e}}),new j({...this._def,shape:()=>t})}keyof(){return Z(l.util.objectKeys(this.shape))}}r.ZodObject=j,j.create=(e,t)=>new j({shape:()=>e,unknownKeys:"strip",catchall:F.create(),typeName:i.ZodObject,...p(t)}),j.strictCreate=(e,t)=>new j({shape:()=>e,unknownKeys:"strict",catchall:F.create(),typeName:i.ZodObject,...p(t)}),j.lazycreate=(e,t)=>new j({shape:e,unknownKeys:"strip",catchall:F.create(),typeName:i.ZodObject,...p(t)});class L extends f{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new u.ZodError(e.ctx.common.issues));return(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_union,unionErrors:r}),s.INVALID});{let e,i=[];for(let a of r){let r={...t,common:{...t.common,issues:[]},parent:null},n=a._parseSync({data:t.data,path:t.path,parent:r});if("valid"===n.status)return n;"dirty"!==n.status||e||(e={result:n,ctx:r}),r.common.issues.length&&i.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let a=i.map(e=>new u.ZodError(e));return(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_union,unionErrors:a}),s.INVALID}}get options(){return this._def.options}}r.ZodUnion=L,L.create=(e,t)=>new L({options:e,typeName:i.ZodUnion,...p(t)});let B=e=>{if(e instanceof q)return B(e.schema);if(e instanceof J)return B(e.innerType());if(e instanceof G)return[e.value];if(e instanceof K)return e.options;if(e instanceof Q)return Object.keys(e.enum);else if(e instanceof et)return B(e._def.innerType);else if(e instanceof I)return[void 0];else if(e instanceof A)return[null];else return null};class N extends f{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==l.ZodParsedType.object)return(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.object,received:t.parsedType}),s.INVALID;let r=this.discriminator,i=t.data[r],a=this.optionsMap.get(i);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):((0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),s.INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let a=new Map;for(let r of t){let t=B(r.shape[e]);if(!t)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let i of t){if(a.has(i))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);a.set(i,r)}}return new N({typeName:i.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...p(r)})}}r.ZodDiscriminatedUnion=N;class $ extends f{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),i=(e,i)=>{if((0,s.isAborted)(e)||(0,s.isAborted)(i))return s.INVALID;let a=function e(t,r){let i=(0,l.getParsedType)(t),a=(0,l.getParsedType)(r);if(t===r)return{valid:!0,data:t};if(i===l.ZodParsedType.object&&a===l.ZodParsedType.object){let i=l.util.objectKeys(r),a=l.util.objectKeys(t).filter(e=>-1!==i.indexOf(e)),n={...t,...r};for(let i of a){let a=e(t[i],r[i]);if(!a.valid)return{valid:!1};n[i]=a.data}return{valid:!0,data:n}}if(i===l.ZodParsedType.array&&a===l.ZodParsedType.array){if(t.length!==r.length)return{valid:!1};let i=[];for(let a=0;a<t.length;a++){let n=e(t[a],r[a]);if(!n.valid)return{valid:!1};i.push(n.data)}return{valid:!0,data:i}}if(i===l.ZodParsedType.date&&a===l.ZodParsedType.date&&+t==+r)return{valid:!0,data:t};return{valid:!1}}(e.value,i.value);return a.valid?(((0,s.isDirty)(e)||(0,s.isDirty)(i))&&t.dirty(),{status:t.value,value:a.data}):((0,s.addIssueToContext)(r,{code:u.ZodIssueCode.invalid_intersection_types}),s.INVALID)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>i(e,t)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}r.ZodIntersection=$,$.create=(e,t,r)=>new $({left:e,right:t,typeName:i.ZodIntersection,...p(r)});class z extends f{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==l.ZodParsedType.array)return(0,s.addIssueToContext)(r,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.array,received:r.parsedType}),s.INVALID;if(r.data.length<this._def.items.length)return(0,s.addIssueToContext)(r,{code:u.ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.INVALID;!this._def.rest&&r.data.length>this._def.items.length&&((0,s.addIssueToContext)(r,{code:u.ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let i=[...r.data].map((e,t)=>{let i=this._def.items[t]||this._def.rest;return i?i._parse(new c(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(i).then(e=>s.ParseStatus.mergeArray(t,e)):s.ParseStatus.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new z({...this._def,rest:e})}}r.ZodTuple=z,z.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new z({items:e,typeName:i.ZodTuple,rest:null,...p(t)})};class U extends f{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==l.ZodParsedType.object)return(0,s.addIssueToContext)(r,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.object,received:r.parsedType}),s.INVALID;let i=[],a=this._def.keyType,n=this._def.valueType;for(let e in r.data)i.push({key:a._parse(new c(r,e,r.path,e)),value:n._parse(new c(r,r.data[e],r.path,e))});return r.common.async?s.ParseStatus.mergeObjectAsync(t,i):s.ParseStatus.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,r){return new U(t instanceof f?{keyType:e,valueType:t,typeName:i.ZodRecord,...p(r)}:{keyType:k.create(),valueType:e,typeName:i.ZodRecord,...p(t)})}}r.ZodRecord=U;class V extends f{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==l.ZodParsedType.map)return(0,s.addIssueToContext)(r,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.map,received:r.parsedType}),s.INVALID;let i=this._def.keyType,a=this._def.valueType,n=[...r.data.entries()].map(([e,t],n)=>({key:i._parse(new c(r,e,r.path,[n,"key"])),value:a._parse(new c(r,t,r.path,[n,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of n){let i=await r.key,a=await r.value;if("aborted"===i.status||"aborted"===a.status)return s.INVALID;("dirty"===i.status||"dirty"===a.status)&&t.dirty(),e.set(i.value,a.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of n){let i=r.key,a=r.value;if("aborted"===i.status||"aborted"===a.status)return s.INVALID;("dirty"===i.status||"dirty"===a.status)&&t.dirty(),e.set(i.value,a.value)}return{status:t.value,value:e}}}}r.ZodMap=V,V.create=(e,t,r)=>new V({valueType:t,keyType:e,typeName:i.ZodMap,...p(r)});class H extends f{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==l.ZodParsedType.set)return(0,s.addIssueToContext)(r,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.set,received:r.parsedType}),s.INVALID;let i=this._def;null!==i.minSize&&r.data.size<i.minSize.value&&((0,s.addIssueToContext)(r,{code:u.ZodIssueCode.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),null!==i.maxSize&&r.data.size>i.maxSize.value&&((0,s.addIssueToContext)(r,{code:u.ZodIssueCode.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());let a=this._def.valueType;function n(e){let r=new Set;for(let i of e){if("aborted"===i.status)return s.INVALID;"dirty"===i.status&&t.dirty(),r.add(i.value)}return{status:t.value,value:r}}let o=[...r.data.values()].map((e,t)=>a._parse(new c(r,e,r.path,t)));return r.common.async?Promise.all(o).then(e=>n(e)):n(o)}min(e,t){return new H({...this._def,minSize:{value:e,message:o.errorUtil.toString(t)}})}max(e,t){return new H({...this._def,maxSize:{value:e,message:o.errorUtil.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}r.ZodSet=H,H.create=(e,t)=>new H({valueType:e,minSize:null,maxSize:null,typeName:i.ZodSet,...p(t)});class W extends f{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==l.ZodParsedType.function)return(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.function,received:t.parsedType}),s.INVALID;function r(e,r){return(0,s.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,n.getErrorMap)(),n.defaultErrorMap].filter(e=>!!e),issueData:{code:u.ZodIssueCode.invalid_arguments,argumentsError:r}})}function i(e,r){return(0,s.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,n.getErrorMap)(),n.defaultErrorMap].filter(e=>!!e),issueData:{code:u.ZodIssueCode.invalid_return_type,returnTypeError:r}})}let a={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof X){let e=this;return(0,s.OK)(async function(...t){let n=new u.ZodError([]),s=await e._def.args.parseAsync(t,a).catch(e=>{throw n.addIssue(r(t,e)),n}),l=await Reflect.apply(o,this,s);return await e._def.returns._def.type.parseAsync(l,a).catch(e=>{throw n.addIssue(i(l,e)),n})})}{let e=this;return(0,s.OK)(function(...t){let n=e._def.args.safeParse(t,a);if(!n.success)throw new u.ZodError([r(t,n.error)]);let s=Reflect.apply(o,this,n.data),l=e._def.returns.safeParse(s,a);if(!l.success)throw new u.ZodError([i(s,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new W({...this._def,args:z.create(e).rest(M.create())})}returns(e){return new W({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new W({args:e||z.create([]).rest(M.create()),returns:t||M.create(),typeName:i.ZodFunction,...p(r)})}}r.ZodFunction=W;class q extends f{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}r.ZodLazy=q,q.create=(e,t)=>new q({getter:e,typeName:i.ZodLazy,...p(t)});class G extends f{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{received:t.data,code:u.ZodIssueCode.invalid_literal,expected:this._def.value}),s.INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}function Z(e,t){return new K({values:e,typeName:i.ZodEnum,...p(t)})}r.ZodLiteral=G,G.create=(e,t)=>new G({value:e,typeName:i.ZodLiteral,...p(t)});class K extends f{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return(0,s.addIssueToContext)(t,{expected:l.util.joinValues(r),received:t.parsedType,code:u.ZodIssueCode.invalid_type}),s.INVALID}if(-1===this._def.values.indexOf(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return(0,s.addIssueToContext)(t,{received:t.data,code:u.ZodIssueCode.invalid_enum_value,options:r}),s.INVALID}return(0,s.OK)(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e){return K.create(e)}exclude(e){return K.create(this.options.filter(t=>!e.includes(t)))}}r.ZodEnum=K,K.create=Z;class Q extends f{_parse(e){let t=l.util.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==l.ZodParsedType.string&&r.parsedType!==l.ZodParsedType.number){let e=l.util.objectValues(t);return(0,s.addIssueToContext)(r,{expected:l.util.joinValues(e),received:r.parsedType,code:u.ZodIssueCode.invalid_type}),s.INVALID}if(-1===t.indexOf(e.data)){let e=l.util.objectValues(t);return(0,s.addIssueToContext)(r,{received:r.data,code:u.ZodIssueCode.invalid_enum_value,options:e}),s.INVALID}return(0,s.OK)(e.data)}get enum(){return this._def.values}}r.ZodNativeEnum=Q,Q.create=(e,t)=>new Q({values:e,typeName:i.ZodNativeEnum,...p(t)});class X extends f{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==l.ZodParsedType.promise&&!1===t.common.async)return(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.promise,received:t.parsedType}),s.INVALID;let r=t.parsedType===l.ZodParsedType.promise?t.data:Promise.resolve(t.data);return(0,s.OK)(r.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}r.ZodPromise=X,X.create=(e,t)=>new X({type:e,typeName:i.ZodPromise,...p(t)});class J extends f{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===i.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:e=>{(0,s.addIssueToContext)(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===i.type){let e=i.transform(r.data,a);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(e).then(e=>this._def.schema._parseAsync({data:e,path:r.path,parent:r})):this._def.schema._parseSync({data:e,path:r.path,parent:r})}if("refinement"===i.type){let e=e=>{let t=i.refinement(e,a);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?s.INVALID:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===i.status?s.INVALID:("dirty"===i.status&&t.dirty(),e(i.value),{status:t.value,value:i.value})}}if("transform"===i.type)if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>(0,s.isValid)(e)?Promise.resolve(i.transform(e.value,a)).then(e=>({status:t.value,value:e})):e);else{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!(0,s.isValid)(e))return e;let n=i.transform(e.value,a);if(n instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:n}}l.util.assertNever(i)}}r.ZodEffects=J,r.ZodTransformer=J,J.create=(e,t,r)=>new J({schema:e,typeName:i.ZodEffects,effect:t,...p(r)}),J.createWithPreprocess=(e,t,r)=>new J({schema:t,effect:{type:"preprocess",transform:e},typeName:i.ZodEffects,...p(r)});class Y extends f{_parse(e){return this._getType(e)===l.ZodParsedType.undefined?(0,s.OK)(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}r.ZodOptional=Y,Y.create=(e,t)=>new Y({innerType:e,typeName:i.ZodOptional,...p(t)});class ee extends f{_parse(e){return this._getType(e)===l.ZodParsedType.null?(0,s.OK)(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}r.ZodNullable=ee,ee.create=(e,t)=>new ee({innerType:e,typeName:i.ZodNullable,...p(t)});class et extends f{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===l.ZodParsedType.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}r.ZodDefault=et,et.create=(e,t)=>new et({innerType:e,typeName:i.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...p(t)});class er extends f{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return(0,s.isAsync)(i)?i.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new u.ZodError(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===i.status?i.value:this._def.catchValue({get error(){return new u.ZodError(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}r.ZodCatch=er,er.create=(e,t)=>new er({innerType:e,typeName:i.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...p(t)});class ei extends f{_parse(e){if(this._getType(e)!==l.ZodParsedType.nan){let t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.nan,received:t.parsedType}),s.INVALID}return{status:"valid",value:e.data}}}r.ZodNaN=ei,ei.create=e=>new ei({typeName:i.ZodNaN,...p(e)}),r.BRAND=Symbol("zod_brand");class ea extends f{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}r.ZodBranded=ea;class en extends f{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?s.INVALID:"dirty"===e.status?(t.dirty(),(0,s.DIRTY)(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?s.INVALID:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new en({in:e,out:t,typeName:i.ZodPipeline})}}r.ZodPipeline=en;class eo extends f{_parse(e){let t=this._def.innerType._parse(e);return(0,s.isValid)(t)&&(t.value=Object.freeze(t.value)),t}}r.ZodReadonly=eo,eo.create=(e,t)=>new eo({innerType:e,typeName:i.ZodReadonly,...p(t)}),r.custom=(e,t={},r)=>e?O.create().superRefine((i,a)=>{var n,o;if(!e(i)){let e="function"==typeof t?t(i):"string"==typeof t?{message:t}:t,s=null==(o=null!=(n=e.fatal)?n:r)||o,l="string"==typeof e?{message:e}:e;a.addIssue({code:"custom",...l,fatal:s})}}):O.create(),r.late={object:j.lazycreate},(a=i=r.ZodFirstPartyTypeKind||(r.ZodFirstPartyTypeKind={})).ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly",r.instanceof=(e,t={message:`Input not instance of ${e.name}`})=>(0,r.custom)(t=>t instanceof e,t);let es=k.create;r.string=es;let el=C.create;r.number=el,r.nan=ei.create,r.bigint=E.create;let eu=_.create;r.boolean=eu,r.date=T.create,r.symbol=P.create,r.undefined=I.create,r.null=A.create,r.any=O.create,r.unknown=M.create,r.never=F.create,r.void=R.create,r.array=D.create,r.object=j.create,r.strictObject=j.strictCreate,r.union=L.create,r.discriminatedUnion=N.create,r.intersection=$.create,r.tuple=z.create,r.record=U.create,r.map=V.create,r.set=H.create,r.function=W.create,r.lazy=q.create,r.literal=G.create,r.enum=K.create,r.nativeEnum=Q.create,r.promise=X.create;let ec=J.create;r.effect=ec,r.transformer=ec,r.optional=Y.create,r.nullable=ee.create,r.preprocess=J.createWithPreprocess,r.pipeline=en.create,r.ostring=()=>es().optional(),r.onumber=()=>el().optional(),r.oboolean=()=>eu().optional(),r.coerce={string:e=>k.create({...e,coerce:!0}),number:e=>C.create({...e,coerce:!0}),boolean:e=>_.create({...e,coerce:!0}),bigint:e=>E.create({...e,coerce:!0}),date:e=>T.create({...e,coerce:!0})},r.NEVER=s.INVALID},257908,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),a(e.r(29688),r),a(e.r(850440),r),a(e.r(107237),r),a(e.r(372357),r),a(e.r(827973),r),a(e.r(778695),r)},862356,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),a=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return a(t,e),t},o=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.z=void 0;let s=n(e.r(257908));r.z=s,o(e.r(257908),r),r.default=s},762341,e=>{"use strict";var t,r,i,a,n,o,s,l=e.i(758927);(t=a||(a={})).assertEqual=e=>e,t.assertIs=function(e){},t.assertNever=function(e){throw Error()},t.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},t.getValidEnumValues=e=>{let r=t.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),i={};for(let t of r)i[t]=e[t];return t.objectValues(i)},t.objectValues=e=>t.objectKeys(e).map(function(t){return e[t]}),t.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},t.find=(e,t)=>{for(let r of e)if(t(r))return r},t.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,t.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},t.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(n||(n={})).mergeShapes=(e,t)=>({...e,...t});let u=a.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),c=e=>{switch(typeof e){case"undefined":return u.undefined;case"string":return u.string;case"number":return isNaN(e)?u.nan:u.number;case"boolean":return u.boolean;case"function":return u.function;case"bigint":return u.bigint;case"symbol":return u.symbol;case"object":if(Array.isArray(e))return u.array;if(null===e)return u.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return u.promise;if("u">typeof Map&&e instanceof Map)return u.map;if("u">typeof Set&&e instanceof Set)return u.set;if("u">typeof Date&&e instanceof Date)return u.date;return u.object;default:return u.unknown}},d=a.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class p extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let t=e||function(e){return e.message},r={_errors:[]},i=e=>{for(let a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(i);else if("invalid_return_type"===a.code)i(a.returnTypeError);else if("invalid_arguments"===a.code)i(a.argumentsError);else if(0===a.path.length)r._errors.push(t(a));else{let e=r,i=0;for(;i<a.path.length;){let r=a.path[i];i===a.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(a))):e[r]=e[r]||{_errors:[]},e=e[r],i++}}};return i(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,a.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}p.create=e=>new p(e);let f=(e,t)=>{let r;switch(e.code){case d.invalid_type:r=e.received===u.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case d.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,a.jsonStringifyReplacer)}`;break;case d.unrecognized_keys:r=`Unrecognized key(s) in object: ${a.joinValues(e.keys,", ")}`;break;case d.invalid_union:r="Invalid input";break;case d.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${a.joinValues(e.options)}`;break;case d.invalid_enum_value:r=`Invalid enum value. Expected ${a.joinValues(e.options)}, received '${e.received}'`;break;case d.invalid_arguments:r="Invalid function arguments";break;case d.invalid_return_type:r="Invalid function return type";break;case d.invalid_date:r="Invalid date";break;case d.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:a.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case d.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case d.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case d.custom:r="Invalid input";break;case d.invalid_intersection_types:r="Intersection results could not be merged";break;case d.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case d.not_finite:r="Number must be finite";break;default:r=t.defaultError,a.assertNever(e)}return{message:r}},h=f;function m(){return h}let g=e=>{let{data:t,path:r,errorMaps:i,issueData:a}=e,n=[...r,...a.path||[]],o={...a,path:n},s="";for(let e of i.filter(e=>!!e).slice().reverse())s=e(o,{data:t,defaultError:s}).message;return{...a,path:n,message:a.message||s}};function v(e,t){let r=g({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,m(),f].filter(e=>!!e)});e.common.issues.push(r)}class y{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let i of t){if("aborted"===i.status)return b;"dirty"===i.status&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t)r.push({key:await e.key,value:await e.value});return y.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let i of t){let{key:t,value:a}=i;if("aborted"===t.status||"aborted"===a.status)return b;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==a.value||i.alwaysSet)&&(r[t.value]=a.value)}return{status:e.value,value:r}}}let b=Object.freeze({status:"aborted"}),x=e=>({status:"dirty",value:e}),w=e=>({status:"valid",value:e}),S=e=>"aborted"===e.status,k=e=>"dirty"===e.status,C=e=>"valid"===e.status,E=e=>"u">typeof Promise&&e instanceof Promise;(r=o||(o={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},r.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;class _{constructor(e,t,r,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let T=(e,t)=>{if(C(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new p(e.common.issues);return this._error=t,this._error}}};function P(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:i,description:a}=e;if(t&&(r||i))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:a}:{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=i?i:t.defaultError}:{message:null!=r?r:t.defaultError},description:a}}class I{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return c(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:c(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new y,ctx:{common:e.parent.common,data:e.data,parsedType:c(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(E(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let i={common:{issues:[],async:null!=(r=null==t?void 0:t.async)&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:c(e)},a=this._parseSync({data:e,path:i.path,parent:i});return T(i,a)}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:c(e)},i=this._parse({data:e,path:r.path,parent:r});return T(r,await (E(i)?i:Promise.resolve(i)))}refine(e,t){return this._refinement((r,i)=>{let a=e(r),n=()=>i.addIssue({code:d.custom,..."string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(r):t});return"u">typeof Promise&&a instanceof Promise?a.then(e=>!!e||(n(),!1)):!!a||(n(),!1)})}refinement(e,t){return this._refinement((r,i)=>!!e(r)||(i.addIssue("function"==typeof t?t(r,i):t),!1))}_refinement(e){return new eh({schema:this,typeName:s.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return em.create(this,this._def)}nullable(){return eg.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return X.create(this,this._def)}promise(){return ef.create(this,this._def)}or(e){return Y.create([this,e],this._def)}and(e){return er.create(this,e,this._def)}transform(e){return new eh({...P(this._def),schema:this,typeName:s.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new ev({...P(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:s.ZodDefault})}brand(){return new ew({typeName:s.ZodBranded,type:this,...P(this._def)})}catch(e){return new ey({...P(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:s.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return eS.create(this,e)}readonly(){return ek.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let A=/^c[^\s-]{8,}$/i,O=/^[a-z][a-z0-9]*$/,M=/[0-9A-HJKMNP-TV-Z]{26}/,F=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,R=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,D=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,j=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,L=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,B=e=>{if(e.precision)if(e.offset)return RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`);else return RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}Z$`);if(0===e.precision)if(e.offset)return RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$");else return RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$");return e.offset?RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")};class N extends I{constructor(){super(...arguments),this._regex=(e,t,r)=>this.refinement(t=>e.test(t),{validation:t,code:d.invalid_string,...o.errToObj(r)}),this.nonempty=e=>this.min(1,o.errToObj(e)),this.trim=()=>new N({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new N({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new N({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){let t;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==u.string){let t=this._getOrReturnCtx(e);return v(t,{code:d.invalid_type,expected:u.string,received:t.parsedType}),b}let r=new y;for(let o of this._def.checks)if("min"===o.kind)e.data.length<o.value&&(v(t=this._getOrReturnCtx(e,t),{code:d.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if("max"===o.kind)e.data.length>o.value&&(v(t=this._getOrReturnCtx(e,t),{code:d.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if("length"===o.kind){let i=e.data.length>o.value,a=e.data.length<o.value;(i||a)&&(t=this._getOrReturnCtx(e,t),i?v(t,{code:d.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):a&&v(t,{code:d.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if("email"===o.kind)R.test(e.data)||(v(t=this._getOrReturnCtx(e,t),{validation:"email",code:d.invalid_string,message:o.message}),r.dirty());else if("emoji"===o.kind)D.test(e.data)||(v(t=this._getOrReturnCtx(e,t),{validation:"emoji",code:d.invalid_string,message:o.message}),r.dirty());else if("uuid"===o.kind)F.test(e.data)||(v(t=this._getOrReturnCtx(e,t),{validation:"uuid",code:d.invalid_string,message:o.message}),r.dirty());else if("cuid"===o.kind)A.test(e.data)||(v(t=this._getOrReturnCtx(e,t),{validation:"cuid",code:d.invalid_string,message:o.message}),r.dirty());else if("cuid2"===o.kind)O.test(e.data)||(v(t=this._getOrReturnCtx(e,t),{validation:"cuid2",code:d.invalid_string,message:o.message}),r.dirty());else if("ulid"===o.kind)M.test(e.data)||(v(t=this._getOrReturnCtx(e,t),{validation:"ulid",code:d.invalid_string,message:o.message}),r.dirty());else if("url"===o.kind)try{new URL(e.data)}catch(i){v(t=this._getOrReturnCtx(e,t),{validation:"url",code:d.invalid_string,message:o.message}),r.dirty()}else if("regex"===o.kind)o.regex.lastIndex=0,o.regex.test(e.data)||(v(t=this._getOrReturnCtx(e,t),{validation:"regex",code:d.invalid_string,message:o.message}),r.dirty());else if("trim"===o.kind)e.data=e.data.trim();else if("includes"===o.kind)e.data.includes(o.value,o.position)||(v(t=this._getOrReturnCtx(e,t),{code:d.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty());else if("toLowerCase"===o.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===o.kind)e.data=e.data.toUpperCase();else if("startsWith"===o.kind)e.data.startsWith(o.value)||(v(t=this._getOrReturnCtx(e,t),{code:d.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty());else if("endsWith"===o.kind)e.data.endsWith(o.value)||(v(t=this._getOrReturnCtx(e,t),{code:d.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty());else if("datetime"===o.kind)B(o).test(e.data)||(v(t=this._getOrReturnCtx(e,t),{code:d.invalid_string,validation:"datetime",message:o.message}),r.dirty());else if("ip"===o.kind){var i,n;i=e.data,!(("v4"===(n=o.version)||!n)&&j.test(i)||("v6"===n||!n)&&L.test(i))&&1&&(v(t=this._getOrReturnCtx(e,t),{validation:"ip",code:d.invalid_string,message:o.message}),r.dirty())}else a.assertNever(o);return{status:r.value,value:e.data}}_addCheck(e){return new N({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...o.errToObj(e)})}url(e){return this._addCheck({kind:"url",...o.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...o.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...o.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...o.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...o.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...o.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...o.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!=(t=null==e?void 0:e.offset)&&t,...o.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...o.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...o.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...o.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...o.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...o.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...o.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...o.errToObj(t)})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}N.create=e=>{var t;return new N({checks:[],typeName:s.ZodString,coerce:null!=(t=null==e?void 0:e.coerce)&&t,...P(e)})};class $ extends I{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==u.number){let t=this._getOrReturnCtx(e);return v(t,{code:d.invalid_type,expected:u.number,received:t.parsedType}),b}let r=new y;for(let i of this._def.checks)"int"===i.kind?a.isInteger(e.data)||(v(t=this._getOrReturnCtx(e,t),{code:d.invalid_type,expected:"integer",received:"float",message:i.message}),r.dirty()):"min"===i.kind?(i.inclusive?e.data<i.value:e.data<=i.value)&&(v(t=this._getOrReturnCtx(e,t),{code:d.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):"max"===i.kind?(i.inclusive?e.data>i.value:e.data>=i.value)&&(v(t=this._getOrReturnCtx(e,t),{code:d.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):"multipleOf"===i.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,i=(t.toString().split(".")[1]||"").length,a=r>i?r:i;return parseInt(e.toFixed(a).replace(".",""))%parseInt(t.toFixed(a).replace(".",""))/Math.pow(10,a)}(e.data,i.value)&&(v(t=this._getOrReturnCtx(e,t),{code:d.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):"finite"===i.kind?Number.isFinite(e.data)||(v(t=this._getOrReturnCtx(e,t),{code:d.not_finite,message:i.message}),r.dirty()):a.assertNever(i);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,o.toString(t))}gt(e,t){return this.setLimit("min",e,!1,o.toString(t))}lte(e,t){return this.setLimit("max",e,!0,o.toString(t))}lt(e,t){return this.setLimit("max",e,!1,o.toString(t))}setLimit(e,t,r,i){return new $({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:o.toString(i)}]})}_addCheck(e){return new $({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:o.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:o.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:o.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:o.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:o.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:o.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:o.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:o.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:o.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&a.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks)if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;else"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value);return Number.isFinite(t)&&Number.isFinite(e)}}$.create=e=>new $({checks:[],typeName:s.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...P(e)});class z extends I{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==u.bigint){let t=this._getOrReturnCtx(e);return v(t,{code:d.invalid_type,expected:u.bigint,received:t.parsedType}),b}let r=new y;for(let i of this._def.checks)"min"===i.kind?(i.inclusive?e.data<i.value:e.data<=i.value)&&(v(t=this._getOrReturnCtx(e,t),{code:d.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):"max"===i.kind?(i.inclusive?e.data>i.value:e.data>=i.value)&&(v(t=this._getOrReturnCtx(e,t),{code:d.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):"multipleOf"===i.kind?e.data%i.value!==BigInt(0)&&(v(t=this._getOrReturnCtx(e,t),{code:d.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):a.assertNever(i);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,o.toString(t))}gt(e,t){return this.setLimit("min",e,!1,o.toString(t))}lte(e,t){return this.setLimit("max",e,!0,o.toString(t))}lt(e,t){return this.setLimit("max",e,!1,o.toString(t))}setLimit(e,t,r,i){return new z({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:o.toString(i)}]})}_addCheck(e){return new z({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:o.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:o.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:o.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:o.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:o.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}z.create=e=>{var t;return new z({checks:[],typeName:s.ZodBigInt,coerce:null!=(t=null==e?void 0:e.coerce)&&t,...P(e)})};class U extends I{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==u.boolean){let t=this._getOrReturnCtx(e);return v(t,{code:d.invalid_type,expected:u.boolean,received:t.parsedType}),b}return w(e.data)}}U.create=e=>new U({typeName:s.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...P(e)});class V extends I{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==u.date){let t=this._getOrReturnCtx(e);return v(t,{code:d.invalid_type,expected:u.date,received:t.parsedType}),b}if(isNaN(e.data.getTime()))return v(this._getOrReturnCtx(e),{code:d.invalid_date}),b;let r=new y;for(let i of this._def.checks)"min"===i.kind?e.data.getTime()<i.value&&(v(t=this._getOrReturnCtx(e,t),{code:d.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):"max"===i.kind?e.data.getTime()>i.value&&(v(t=this._getOrReturnCtx(e,t),{code:d.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):a.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new V({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:o.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:o.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}V.create=e=>new V({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:s.ZodDate,...P(e)});class H extends I{_parse(e){if(this._getType(e)!==u.symbol){let t=this._getOrReturnCtx(e);return v(t,{code:d.invalid_type,expected:u.symbol,received:t.parsedType}),b}return w(e.data)}}H.create=e=>new H({typeName:s.ZodSymbol,...P(e)});class W extends I{_parse(e){if(this._getType(e)!==u.undefined){let t=this._getOrReturnCtx(e);return v(t,{code:d.invalid_type,expected:u.undefined,received:t.parsedType}),b}return w(e.data)}}W.create=e=>new W({typeName:s.ZodUndefined,...P(e)});class q extends I{_parse(e){if(this._getType(e)!==u.null){let t=this._getOrReturnCtx(e);return v(t,{code:d.invalid_type,expected:u.null,received:t.parsedType}),b}return w(e.data)}}q.create=e=>new q({typeName:s.ZodNull,...P(e)});class G extends I{constructor(){super(...arguments),this._any=!0}_parse(e){return w(e.data)}}G.create=e=>new G({typeName:s.ZodAny,...P(e)});class Z extends I{constructor(){super(...arguments),this._unknown=!0}_parse(e){return w(e.data)}}Z.create=e=>new Z({typeName:s.ZodUnknown,...P(e)});class K extends I{_parse(e){let t=this._getOrReturnCtx(e);return v(t,{code:d.invalid_type,expected:u.never,received:t.parsedType}),b}}K.create=e=>new K({typeName:s.ZodNever,...P(e)});class Q extends I{_parse(e){if(this._getType(e)!==u.undefined){let t=this._getOrReturnCtx(e);return v(t,{code:d.invalid_type,expected:u.void,received:t.parsedType}),b}return w(e.data)}}Q.create=e=>new Q({typeName:s.ZodVoid,...P(e)});class X extends I{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),i=this._def;if(t.parsedType!==u.array)return v(t,{code:d.invalid_type,expected:u.array,received:t.parsedType}),b;if(null!==i.exactLength){let e=t.data.length>i.exactLength.value,a=t.data.length<i.exactLength.value;(e||a)&&(v(t,{code:e?d.too_big:d.too_small,minimum:a?i.exactLength.value:void 0,maximum:e?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(null!==i.minLength&&t.data.length<i.minLength.value&&(v(t,{code:d.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),null!==i.maxLength&&t.data.length>i.maxLength.value&&(v(t,{code:d.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>i.type._parseAsync(new _(t,e,t.path,r)))).then(e=>y.mergeArray(r,e));let a=[...t.data].map((e,r)=>i.type._parseSync(new _(t,e,t.path,r)));return y.mergeArray(r,a)}get element(){return this._def.type}min(e,t){return new X({...this._def,minLength:{value:e,message:o.toString(t)}})}max(e,t){return new X({...this._def,maxLength:{value:e,message:o.toString(t)}})}length(e,t){return new X({...this._def,exactLength:{value:e,message:o.toString(t)}})}nonempty(e){return this.min(1,e)}}X.create=(e,t)=>new X({type:e,minLength:null,maxLength:null,exactLength:null,typeName:s.ZodArray,...P(t)});class J extends I{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=a.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==u.object){let t=this._getOrReturnCtx(e);return v(t,{code:d.invalid_type,expected:u.object,received:t.parsedType}),b}let{status:t,ctx:r}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),n=[];if(!(this._def.catchall instanceof K&&"strip"===this._def.unknownKeys))for(let e in r.data)a.includes(e)||n.push(e);let o=[];for(let e of a){let t=i[e],a=r.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new _(r,a,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof K){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of n)o.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)n.length>0&&(v(r,{code:d.unrecognized_keys,keys:n}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of n){let i=r.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new _(r,i,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of o){let r=await t.key;e.push({key:r,value:await t.value,alwaysSet:t.alwaysSet})}return e}).then(e=>y.mergeObjectSync(t,e)):y.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return o.errToObj,new J({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var i,a,n,s;let l=null!=(n=null==(a=(i=this._def).errorMap)?void 0:a.call(i,t,r).message)?n:r.defaultError;return"unrecognized_keys"===t.code?{message:null!=(s=o.errToObj(e).message)?s:l}:{message:l}}}:{}})}strip(){return new J({...this._def,unknownKeys:"strip"})}passthrough(){return new J({...this._def,unknownKeys:"passthrough"})}extend(e){return new J({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new J({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:s.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new J({...this._def,catchall:e})}pick(e){let t={};return a.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new J({...this._def,shape:()=>t})}omit(e){let t={};return a.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new J({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof J){let r={};for(let i in t.shape){let a=t.shape[i];r[i]=em.create(e(a))}return new J({...t._def,shape:()=>r})}if(t instanceof X)return new X({...t._def,type:e(t.element)});if(t instanceof em)return em.create(e(t.unwrap()));if(t instanceof eg)return eg.create(e(t.unwrap()));if(t instanceof ei)return ei.create(t.items.map(t=>e(t)));else return t}(this)}partial(e){let t={};return a.objectKeys(this.shape).forEach(r=>{let i=this.shape[r];e&&!e[r]?t[r]=i:t[r]=i.optional()}),new J({...this._def,shape:()=>t})}required(e){let t={};return a.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof em;)e=e._def.innerType;t[r]=e}}),new J({...this._def,shape:()=>t})}keyof(){return ec(a.objectKeys(this.shape))}}J.create=(e,t)=>new J({shape:()=>e,unknownKeys:"strip",catchall:K.create(),typeName:s.ZodObject,...P(t)}),J.strictCreate=(e,t)=>new J({shape:()=>e,unknownKeys:"strict",catchall:K.create(),typeName:s.ZodObject,...P(t)}),J.lazycreate=(e,t)=>new J({shape:e,unknownKeys:"strip",catchall:K.create(),typeName:s.ZodObject,...P(t)});class Y extends I{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new p(e.ctx.common.issues));return v(t,{code:d.invalid_union,unionErrors:r}),b});{let e,i=[];for(let a of r){let r={...t,common:{...t.common,issues:[]},parent:null},n=a._parseSync({data:t.data,path:t.path,parent:r});if("valid"===n.status)return n;"dirty"!==n.status||e||(e={result:n,ctx:r}),r.common.issues.length&&i.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let a=i.map(e=>new p(e));return v(t,{code:d.invalid_union,unionErrors:a}),b}}get options(){return this._def.options}}Y.create=(e,t)=>new Y({options:e,typeName:s.ZodUnion,...P(t)});let ee=e=>{if(e instanceof el)return ee(e.schema);if(e instanceof eh)return ee(e.innerType());if(e instanceof eu)return[e.value];if(e instanceof ed)return e.options;if(e instanceof ep)return Object.keys(e.enum);else if(e instanceof ev)return ee(e._def.innerType);else if(e instanceof W)return[void 0];else if(e instanceof q)return[null];else return null};class et extends I{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==u.object)return v(t,{code:d.invalid_type,expected:u.object,received:t.parsedType}),b;let r=this.discriminator,i=t.data[r],a=this.optionsMap.get(i);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(v(t,{code:d.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),b)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let i=new Map;for(let r of t){let t=ee(r.shape[e]);if(!t)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of t){if(i.has(a))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,r)}}return new et({typeName:s.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...P(r)})}}class er extends I{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),i=(e,i)=>{if(S(e)||S(i))return b;let n=function e(t,r){let i=c(t),n=c(r);if(t===r)return{valid:!0,data:t};if(i===u.object&&n===u.object){let i=a.objectKeys(r),n=a.objectKeys(t).filter(e=>-1!==i.indexOf(e)),o={...t,...r};for(let i of n){let a=e(t[i],r[i]);if(!a.valid)return{valid:!1};o[i]=a.data}return{valid:!0,data:o}}if(i===u.array&&n===u.array){if(t.length!==r.length)return{valid:!1};let i=[];for(let a=0;a<t.length;a++){let n=e(t[a],r[a]);if(!n.valid)return{valid:!1};i.push(n.data)}return{valid:!0,data:i}}if(i===u.date&&n===u.date&&+t==+r)return{valid:!0,data:t};return{valid:!1}}(e.value,i.value);return n.valid?((k(e)||k(i))&&t.dirty(),{status:t.value,value:n.data}):(v(r,{code:d.invalid_intersection_types}),b)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>i(e,t)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}er.create=(e,t,r)=>new er({left:e,right:t,typeName:s.ZodIntersection,...P(r)});class ei extends I{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==u.array)return v(r,{code:d.invalid_type,expected:u.array,received:r.parsedType}),b;if(r.data.length<this._def.items.length)return v(r,{code:d.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),b;!this._def.rest&&r.data.length>this._def.items.length&&(v(r,{code:d.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let i=[...r.data].map((e,t)=>{let i=this._def.items[t]||this._def.rest;return i?i._parse(new _(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(i).then(e=>y.mergeArray(t,e)):y.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new ei({...this._def,rest:e})}}ei.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new ei({items:e,typeName:s.ZodTuple,rest:null,...P(t)})};class ea extends I{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==u.object)return v(r,{code:d.invalid_type,expected:u.object,received:r.parsedType}),b;let i=[],a=this._def.keyType,n=this._def.valueType;for(let e in r.data)i.push({key:a._parse(new _(r,e,r.path,e)),value:n._parse(new _(r,r.data[e],r.path,e))});return r.common.async?y.mergeObjectAsync(t,i):y.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,r){return new ea(t instanceof I?{keyType:e,valueType:t,typeName:s.ZodRecord,...P(r)}:{keyType:N.create(),valueType:e,typeName:s.ZodRecord,...P(t)})}}class en extends I{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==u.map)return v(r,{code:d.invalid_type,expected:u.map,received:r.parsedType}),b;let i=this._def.keyType,a=this._def.valueType,n=[...r.data.entries()].map(([e,t],n)=>({key:i._parse(new _(r,e,r.path,[n,"key"])),value:a._parse(new _(r,t,r.path,[n,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of n){let i=await r.key,a=await r.value;if("aborted"===i.status||"aborted"===a.status)return b;("dirty"===i.status||"dirty"===a.status)&&t.dirty(),e.set(i.value,a.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of n){let i=r.key,a=r.value;if("aborted"===i.status||"aborted"===a.status)return b;("dirty"===i.status||"dirty"===a.status)&&t.dirty(),e.set(i.value,a.value)}return{status:t.value,value:e}}}}en.create=(e,t,r)=>new en({valueType:t,keyType:e,typeName:s.ZodMap,...P(r)});class eo extends I{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==u.set)return v(r,{code:d.invalid_type,expected:u.set,received:r.parsedType}),b;let i=this._def;null!==i.minSize&&r.data.size<i.minSize.value&&(v(r,{code:d.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),null!==i.maxSize&&r.data.size>i.maxSize.value&&(v(r,{code:d.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());let a=this._def.valueType;function n(e){let r=new Set;for(let i of e){if("aborted"===i.status)return b;"dirty"===i.status&&t.dirty(),r.add(i.value)}return{status:t.value,value:r}}let o=[...r.data.values()].map((e,t)=>a._parse(new _(r,e,r.path,t)));return r.common.async?Promise.all(o).then(e=>n(e)):n(o)}min(e,t){return new eo({...this._def,minSize:{value:e,message:o.toString(t)}})}max(e,t){return new eo({...this._def,maxSize:{value:e,message:o.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}eo.create=(e,t)=>new eo({valueType:e,minSize:null,maxSize:null,typeName:s.ZodSet,...P(t)});class es extends I{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==u.function)return v(t,{code:d.invalid_type,expected:u.function,received:t.parsedType}),b;function r(e,r){return g({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,m(),f].filter(e=>!!e),issueData:{code:d.invalid_arguments,argumentsError:r}})}function i(e,r){return g({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,m(),f].filter(e=>!!e),issueData:{code:d.invalid_return_type,returnTypeError:r}})}let a={errorMap:t.common.contextualErrorMap},n=t.data;if(this._def.returns instanceof ef){let e=this;return w(async function(...t){let o=new p([]),s=await e._def.args.parseAsync(t,a).catch(e=>{throw o.addIssue(r(t,e)),o}),l=await Reflect.apply(n,this,s);return await e._def.returns._def.type.parseAsync(l,a).catch(e=>{throw o.addIssue(i(l,e)),o})})}{let e=this;return w(function(...t){let o=e._def.args.safeParse(t,a);if(!o.success)throw new p([r(t,o.error)]);let s=Reflect.apply(n,this,o.data),l=e._def.returns.safeParse(s,a);if(!l.success)throw new p([i(s,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new es({...this._def,args:ei.create(e).rest(Z.create())})}returns(e){return new es({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new es({args:e||ei.create([]).rest(Z.create()),returns:t||Z.create(),typeName:s.ZodFunction,...P(r)})}}class el extends I{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}el.create=(e,t)=>new el({getter:e,typeName:s.ZodLazy,...P(t)});class eu extends I{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return v(t,{received:t.data,code:d.invalid_literal,expected:this._def.value}),b}return{status:"valid",value:e.data}}get value(){return this._def.value}}function ec(e,t){return new ed({values:e,typeName:s.ZodEnum,...P(t)})}eu.create=(e,t)=>new eu({value:e,typeName:s.ZodLiteral,...P(t)});class ed extends I{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return v(t,{expected:a.joinValues(r),received:t.parsedType,code:d.invalid_type}),b}if(-1===this._def.values.indexOf(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return v(t,{received:t.data,code:d.invalid_enum_value,options:r}),b}return w(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e){return ed.create(e)}exclude(e){return ed.create(this.options.filter(t=>!e.includes(t)))}}ed.create=ec;class ep extends I{_parse(e){let t=a.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==u.string&&r.parsedType!==u.number){let e=a.objectValues(t);return v(r,{expected:a.joinValues(e),received:r.parsedType,code:d.invalid_type}),b}if(-1===t.indexOf(e.data)){let e=a.objectValues(t);return v(r,{received:r.data,code:d.invalid_enum_value,options:e}),b}return w(e.data)}get enum(){return this._def.values}}ep.create=(e,t)=>new ep({values:e,typeName:s.ZodNativeEnum,...P(t)});class ef extends I{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==u.promise&&!1===t.common.async?(v(t,{code:d.invalid_type,expected:u.promise,received:t.parsedType}),b):w((t.parsedType===u.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ef.create=(e,t)=>new ef({type:e,typeName:s.ZodPromise,...P(t)});class eh extends I{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===s.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null,n={addIssue:e=>{v(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(n.addIssue=n.addIssue.bind(n),"preprocess"===i.type){let e=i.transform(r.data,n);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(e).then(e=>this._def.schema._parseAsync({data:e,path:r.path,parent:r})):this._def.schema._parseSync({data:e,path:r.path,parent:r})}if("refinement"===i.type){let e=e=>{let t=i.refinement(e,n);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?b:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===i.status?b:("dirty"===i.status&&t.dirty(),e(i.value),{status:t.value,value:i.value})}}if("transform"===i.type)if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>C(e)?Promise.resolve(i.transform(e.value,n)).then(e=>({status:t.value,value:e})):e);else{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!C(e))return e;let a=i.transform(e.value,n);if(a instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}a.assertNever(i)}}eh.create=(e,t,r)=>new eh({schema:e,typeName:s.ZodEffects,effect:t,...P(r)}),eh.createWithPreprocess=(e,t,r)=>new eh({schema:t,effect:{type:"preprocess",transform:e},typeName:s.ZodEffects,...P(r)});class em extends I{_parse(e){return this._getType(e)===u.undefined?w(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}em.create=(e,t)=>new em({innerType:e,typeName:s.ZodOptional,...P(t)});class eg extends I{_parse(e){return this._getType(e)===u.null?w(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eg.create=(e,t)=>new eg({innerType:e,typeName:s.ZodNullable,...P(t)});class ev extends I{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===u.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ev.create=(e,t)=>new ev({innerType:e,typeName:s.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...P(t)});class ey extends I{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return E(i)?i.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new p(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===i.status?i.value:this._def.catchValue({get error(){return new p(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ey.create=(e,t)=>new ey({innerType:e,typeName:s.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...P(t)});class eb extends I{_parse(e){if(this._getType(e)!==u.nan){let t=this._getOrReturnCtx(e);return v(t,{code:d.invalid_type,expected:u.nan,received:t.parsedType}),b}return{status:"valid",value:e.data}}}eb.create=e=>new eb({typeName:s.ZodNaN,...P(e)});let ex=Symbol("zod_brand");class ew extends I{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class eS extends I{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?b:"dirty"===e.status?(t.dirty(),x(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?b:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new eS({in:e,out:t,typeName:s.ZodPipeline})}}class ek extends I{_parse(e){let t=this._def.innerType._parse(e);return C(t)&&(t.value=Object.freeze(t.value)),t}}ek.create=(e,t)=>new ek({innerType:e,typeName:s.ZodReadonly,...P(t)});let eC=(e,t={},r)=>e?G.create().superRefine((i,a)=>{var n,o;if(!e(i)){let e="function"==typeof t?t(i):"string"==typeof t?{message:t}:t,s=null==(o=null!=(n=e.fatal)?n:r)||o,l="string"==typeof e?{message:e}:e;a.addIssue({code:"custom",...l,fatal:s})}}):G.create(),eE={object:J.lazycreate};(i=s||(s={})).ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly";let e_=N.create,eT=$.create,eP=eb.create,eI=z.create,eA=U.create,eO=V.create,eM=H.create,eF=W.create,eR=q.create,eD=G.create,ej=Z.create,eL=K.create,eB=Q.create,eN=X.create,e$=J.create,ez=J.strictCreate,eU=Y.create,eV=et.create,eH=er.create,eW=ei.create,eq=ea.create,eG=en.create,eZ=eo.create,eK=es.create,eQ=el.create,eX=eu.create,eJ=ed.create,eY=ep.create,e0=ef.create,e1=eh.create,e2=em.create,e4=eg.create,e3=eh.createWithPreprocess,e6=eS.create;var e8=Object.freeze({__proto__:null,defaultErrorMap:f,setErrorMap:function(e){h=e},getErrorMap:m,makeIssue:g,EMPTY_PATH:[],addIssueToContext:v,ParseStatus:y,INVALID:b,DIRTY:x,OK:w,isAborted:S,isDirty:k,isValid:C,isAsync:E,get util(){return a},get objectUtil(){return n},ZodParsedType:u,getParsedType:c,ZodType:I,ZodString:N,ZodNumber:$,ZodBigInt:z,ZodBoolean:U,ZodDate:V,ZodSymbol:H,ZodUndefined:W,ZodNull:q,ZodAny:G,ZodUnknown:Z,ZodNever:K,ZodVoid:Q,ZodArray:X,ZodObject:J,ZodUnion:Y,ZodDiscriminatedUnion:et,ZodIntersection:er,ZodTuple:ei,ZodRecord:ea,ZodMap:en,ZodSet:eo,ZodFunction:es,ZodLazy:el,ZodLiteral:eu,ZodEnum:ed,ZodNativeEnum:ep,ZodPromise:ef,ZodEffects:eh,ZodTransformer:eh,ZodOptional:em,ZodNullable:eg,ZodDefault:ev,ZodCatch:ey,ZodNaN:eb,BRAND:ex,ZodBranded:ew,ZodPipeline:eS,ZodReadonly:ek,custom:eC,Schema:I,ZodSchema:I,late:eE,get ZodFirstPartyTypeKind(){return s},coerce:{string:e=>N.create({...e,coerce:!0}),number:e=>$.create({...e,coerce:!0}),boolean:e=>U.create({...e,coerce:!0}),bigint:e=>z.create({...e,coerce:!0}),date:e=>V.create({...e,coerce:!0})},any:eD,array:eN,bigint:eI,boolean:eA,date:eO,discriminatedUnion:eV,effect:e1,enum:eJ,function:eK,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>eC(t=>t instanceof e,t),intersection:eH,lazy:eQ,literal:eX,map:eG,nan:eP,nativeEnum:eY,never:eL,null:eR,nullable:e4,number:eT,object:e$,oboolean:()=>eA().optional(),onumber:()=>eT().optional(),optional:e2,ostring:()=>e_().optional(),pipeline:e6,preprocess:e3,promise:e0,record:eq,set:eZ,strictObject:ez,string:e_,symbol:eM,transformer:e1,tuple:eW,undefined:eF,union:eU,unknown:ej,void:eB,NEVER:b,ZodIssueCode:d,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:p}),e5="__remotion-color",e7=e=>{let t=l.NoReactInternals.processColor(e).toString(16).padStart(8,"0"),r=parseInt(t.slice(0,2),16),i=parseInt(t.slice(2,4),16);return{a:r,r:i,g:parseInt(t.slice(4,6),16),b:parseInt(t.slice(6,8),16)}},e9=()=>e8.string().refine(e=>{try{return e7(e),!0}catch{return!1}},{message:"Invalid color"}).describe(e5),te="__remotion-matrix",tt=()=>e8.array(e8.number().step(.01)).refine(e=>{let t=Math.sqrt(e.length);return Number.isInteger(t)&&t>0},{message:"Invalid matrix, must be a square matrix"}).describe(te),tr="__remotion-textarea",ti=()=>e8.string().describe(tr),ta={parseColor:e7,REMOTION_COLOR_BRAND:e5,REMOTION_TEXTAREA_BRAND:tr,REMOTION_MATRIX_BRAND:te};e.s(["ZodZypesInternals",()=>ta,"zColor",()=>e9,"zMatrix",()=>tt,"zTextarea",()=>ti],762341)},742434,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t});Object.defineProperty(r,"__esModule",{value:!0}),r.saveDefaultProps=void 0;let s=e.r(49019),l=e.r(874637),u=e.r(20330),c=e.r(845249);r.saveDefaultProps=async({compositionId:t,defaultProps:r})=>{if(!(0,s.getRemotionEnvironment)().isStudio)throw Error("saveDefaultProps() is only available in the Studio");if(window.remotion_isReadOnlyStudio)throw Error("saveDefaultProps() is not available in read-only Studio");try{await Promise.resolve().then(()=>o(e.r(862356)))}catch(e){throw Error('"zod" is required to use saveDefaultProps(), but is not installed.')}let i=await Promise.resolve().then(()=>o(e.r(862356))),a=null;try{a=await Promise.resolve().then(()=>o(e.r(762341)))}catch(e){}let{generatedDefaultProps:n,composition:d}=(0,c.calcNewProps)(t,r),p=await (0,u.callUpdateDefaultPropsApi)(t,n,d.schema?(0,l.extractEnumJsonPaths)({schema:d.schema,zodRuntime:i,currentPath:[],zodTypes:a}):[]);if(p.success)return Promise.resolve();let f=Error(p.reason);return f.stack=p.stack,Promise.reject(f)}},408928,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.seek=void 0;let i=e.r(49019);r.seek=e=>{var t;null==(t=i.Internals.timeValueRef.current)||t.seek(Math.max(0,e))}},821973,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.toggle=void 0;let i=e.r(49019);r.toggle=e=>{var t;null==(t=i.Internals.timeValueRef.current)||t.toggle(e)}},952284,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.updateDefaultProps=void 0;let i=e.r(49019),a=e.r(845249);r.updateDefaultProps=({compositionId:e,defaultProps:t})=>{let{generatedDefaultProps:r,composition:n}=(0,a.calcNewProps)(e,t),o=i.Internals.editorPropsProviderRef.current;if(!o)throw Error("No props store found. Are you in the Remotion Studio and are the Remotion versions aligned?");o.setProps(e=>({...e,[n.id]:r})),window.dispatchEvent(new CustomEvent(i.Internals.PROPS_UPDATED_EXTERNALLY,{detail:{resetUnsaved:null}}))}},213711,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getZodSchemaFromPrimitive=void 0,r.getZodSchemaFromPrimitive=(e,t)=>{let r;if("string"==typeof e)return t.string();if("number"==typeof e)return t.number();try{r=JSON.stringify(e)}catch(e){}throw Error(`visualControl(): Specify a schema for this value: ${null!=r?r:"[non-serializable value]"}. See https://remotion.dev/docs/studio/visual-control`)}},798207,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t});Object.defineProperty(r,"__esModule",{value:!0}),r.ZodProvider=r.useZodTypesIfPossible=r.useZodIfPossible=r.getZTypesIfPossible=r.getZodIfPossible=void 0;let s=e.r(222260),l=e.r(347540);r.getZodIfPossible=async()=>{try{let{z:t}=await Promise.resolve().then(()=>o(e.r(862356)));return t}catch(e){return null}},r.getZTypesIfPossible=async()=>{try{return await Promise.resolve().then(()=>o(e.r(762341)))}catch(e){return null}},r.useZodIfPossible=()=>{var e;let t=(0,l.useContext)(u);return null!=(e=null==t?void 0:t.zod)?e:null},r.useZodTypesIfPossible=()=>{var e;let t=(0,l.useContext)(u);return null!=(e=null==t?void 0:t.zodTypes)?e:null};let u=(0,l.createContext)(null);r.ZodProvider=({children:e})=>{let[t,i]=(0,l.useState)(null),[a,n]=(0,l.useState)(null);(0,l.useEffect)(()=>{(0,r.getZodIfPossible)().then(e=>i(e))},[]),(0,l.useEffect)(()=>{(0,r.getZTypesIfPossible)().then(e=>n(e))},[]);let o=(0,l.useMemo)(()=>({zod:t,zodTypes:a}),[t,a]);return(0,s.jsx)(u.Provider,{value:o,children:e})}},46028,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getVisualControlEditedValue=void 0,r.getVisualControlEditedValue=({handles:e,key:t})=>{var r,i;return null!=(i=null==(r=null==e?void 0:e[t])?void 0:r.unsavedValue)?i:null}},929627,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VisualControlsProvider=r.SetVisualControlsContext=r.visualControlRef=r.VisualControlsContext=r.VisualControlsTabActivatedContext=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(213711),s=e.r(798207),l=e.r(46028);r.VisualControlsTabActivatedContext=(0,a.createContext)(!1),r.VisualControlsContext=(0,a.createContext)({handles:{}}),r.visualControlRef=(0,a.createRef)(),r.SetVisualControlsContext=(0,a.createContext)({updateHandles:()=>{throw Error("updateHandles is not implemented")},updateValue:()=>{throw Error("updateValue is not implemented")},visualControl:()=>{throw Error("visualControl is not implemented")}}),r.VisualControlsProvider=({children:e})=>{let t=(0,a.useRef)({}),[u,c]=(0,a.useState)({}),d=(0,a.useMemo)(()=>({handles:u}),[u]),p=(0,a.useCallback)((e,r)=>{var i,a,n,o;let s=null==(a=null==(i=t.current)?void 0:i[e])?void 0:a.unsavedValue,u=null==(o=null==(n=t.current)?void 0:n[e])?void 0:o.valueInCode,c=r.valueInCode!==u,d=void 0===s&&void 0!==r.valueInCode;return t.current={...t.current,[e]:{...r,unsavedValue:null!=s?s:r.valueInCode,valueInCode:r.valueInCode}},{changed:c||d,currentValue:(0,l.getVisualControlEditedValue)({key:e,handles:t.current})}},[]),f=(0,s.useZodIfPossible)(),h=(0,a.useRef)(!1),m=(0,n.useRemotionEnvironment)(),g=(0,a.useCallback)(function(e,t,r){if(!m.isStudio||!f)return t;let{changed:i,currentValue:a}=p(e,{valueInCode:t,schema:null!=r?r:(0,o.getZodSchemaFromPrimitive)(t,f),stack:Error().stack});return i&&(h.current=!0),a},[p,u,f,m.isStudio]),v=(0,a.useCallback)(()=>{c(()=>t.current)},[]),y=(0,a.useCallback)((e,r)=>{t.current={...t.current,[e]:{...t.current[e],unsavedValue:r}},v()},[v]);(0,a.useImperativeHandle)(r.visualControlRef,()=>({globalVisualControl:g}),[g]),(0,a.useEffect)(()=>{let e=setInterval(()=>{t.current&&(v(),h.current=!1)},100);return()=>{clearInterval(e)}},[v]);let b=(0,a.useMemo)(()=>({setControl:p,updateHandles:v,updateValue:y,visualControl:g}),[p,v,y,g]);return(0,i.jsx)(r.VisualControlsTabActivatedContext.Provider,{value:Object.keys(d.handles).length>0,children:(0,i.jsx)(r.VisualControlsContext.Provider,{value:d,children:(0,i.jsx)(r.SetVisualControlsContext.Provider,{value:b,children:e})})})}},490833,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.visualControl=void 0;let i=e.r(49019),a=e.r(929627);r.visualControl=(e,t,r)=>{if((0,i.getRemotionEnvironment)().isRendering)return t;if(!a.visualControlRef.current)throw Error("visualControlRef is not set");return a.visualControlRef.current.globalVisualControl(e,t,r)}},386813,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.watchPublicFolder=r.WATCH_REMOTION_STATIC_FILES=void 0;let i=e.r(49019),a=e.r(208795);r.WATCH_REMOTION_STATIC_FILES="remotion_staticFilesChanged",r.watchPublicFolder=e=>{if(!(0,i.getRemotionEnvironment)().isStudio)return console.warn("The watchPublicFolder() API is only available while using the Remotion Studio."),{cancel:()=>void 0};if(window.remotion_isReadOnlyStudio)throw Error("watchPublicFolder() is not available in read-only Studio");let t=()=>{e((0,a.getStaticFiles)())};return window.addEventListener(r.WATCH_REMOTION_STATIC_FILES,t),{cancel:()=>window.removeEventListener(r.WATCH_REMOTION_STATIC_FILES,t)}}},175865,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.watchStaticFile=void 0;let i=e.r(49019),a=e.r(386813);r.watchStaticFile=(e,t)=>{if(!(0,i.getRemotionEnvironment)().isStudio)return console.warn("watchStaticFile() is only available while using the Remotion Studio."),{cancel:()=>void 0};if(window.remotion_isReadOnlyStudio)return console.warn("watchStaticFile() is only available in an interactive Studio."),{cancel:()=>void 0};let r=e.startsWith(window.remotion_staticBase)?e.replace(window.remotion_staticBase,""):e,n=r.startsWith("/")?r.slice(1):r,o=window.remotion_staticFiles.find(e=>e.name===n),{cancel:s}=(0,a.watchPublicFolder)(e=>{let r=e.find(e=>e.name===n);if(!r){void 0!==o&&t(null),o=void 0;return}(void 0===o||o.lastModified!==r.lastModified)&&(t(r),o=r)});return{cancel:s}}},71470,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.writeStaticFile=void 0,r.writeStaticFile=async({contents:e,filePath:t})=>{if(window.remotion_isReadOnlyStudio)throw Error("writeStaticFile() is not available in read-only Studio");let r=new URL(`${window.remotion_staticBase}/api/add-asset`,window.location.origin);if(t.includes("\\"))return Promise.reject(Error("File path cannot contain backslashes"));r.search=new URLSearchParams({filePath:t}).toString();let i=await fetch(r,{method:"POST",body:e});if(!i.ok)throw Error((await i.json()).error)}},659765,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StudioInternals=r.writeStaticFile=r.watchStaticFile=r.watchPublicFolder=r.visualControl=r.updateDefaultProps=r.toggle=r.seek=r.saveDefaultProps=r.restartStudio=r.reevaluateComposition=r.play=r.pause=r.goToComposition=r.getStaticFiles=r.focusDefaultPropsPath=r.deleteStaticFile=void 0;let i=e.r(651595);var a=e.r(411803);Object.defineProperty(r,"deleteStaticFile",{enumerable:!0,get:function(){return a.deleteStaticFile}});var n=e.r(657147);Object.defineProperty(r,"focusDefaultPropsPath",{enumerable:!0,get:function(){return n.focusDefaultPropsPath}});var o=e.r(208795);Object.defineProperty(r,"getStaticFiles",{enumerable:!0,get:function(){return o.getStaticFiles}});var s=e.r(637842);Object.defineProperty(r,"goToComposition",{enumerable:!0,get:function(){return s.goToComposition}});var l=e.r(517547);Object.defineProperty(r,"pause",{enumerable:!0,get:function(){return l.pause}});var u=e.r(110179);Object.defineProperty(r,"play",{enumerable:!0,get:function(){return u.play}});var c=e.r(782434);Object.defineProperty(r,"reevaluateComposition",{enumerable:!0,get:function(){return c.reevaluateComposition}});var d=e.r(604638);Object.defineProperty(r,"restartStudio",{enumerable:!0,get:function(){return d.restartStudio}});var p=e.r(742434);Object.defineProperty(r,"saveDefaultProps",{enumerable:!0,get:function(){return p.saveDefaultProps}});var f=e.r(408928);Object.defineProperty(r,"seek",{enumerable:!0,get:function(){return f.seek}});var h=e.r(821973);Object.defineProperty(r,"toggle",{enumerable:!0,get:function(){return h.toggle}});var m=e.r(952284);Object.defineProperty(r,"updateDefaultProps",{enumerable:!0,get:function(){return m.updateDefaultProps}});var g=e.r(490833);Object.defineProperty(r,"visualControl",{enumerable:!0,get:function(){return g.visualControl}});var v=e.r(386813);Object.defineProperty(r,"watchPublicFolder",{enumerable:!0,get:function(){return v.watchPublicFolder}});var y=e.r(175865);Object.defineProperty(r,"watchStaticFile",{enumerable:!0,get:function(){return y.watchStaticFile}});var b=e.r(71470);Object.defineProperty(r,"writeStaticFile",{enumerable:!0,get:function(){return b.writeStaticFile}}),r.StudioInternals={createComposition:i.createComposition,createStill:i.createStill}},540804,(e,t,r)=>{"use strict";function i(e,t){var r=e.length;for(e.push(t);0<r;){var i=r-1>>>1,a=e[i];if(0<o(a,t))e[i]=t,e[r]=a,r=i;else break}}function a(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;for(var i=0,a=e.length,n=a>>>1;i<n;){var s=2*(i+1)-1,l=e[s],u=s+1,c=e[u];if(0>o(l,r))u<a&&0>o(c,l)?(e[i]=c,e[u]=r,i=u):(e[i]=l,e[s]=r,i=s);else if(u<a&&0>o(c,r))e[i]=c,e[u]=r,i=u;else break}}return t}function o(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if(r.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var s,l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,c=u.now();r.unstable_now=function(){return u.now()-c}}var d=[],p=[],f=1,h=null,m=3,g=!1,v=!1,y=!1,b=!1,x="function"==typeof setTimeout?setTimeout:null,w="function"==typeof clearTimeout?clearTimeout:null,S="u">typeof setImmediate?setImmediate:null;function k(e){for(var t=a(p);null!==t;){if(null===t.callback)n(p);else if(t.startTime<=e)n(p),t.sortIndex=t.expirationTime,i(d,t);else break;t=a(p)}}function C(e){if(y=!1,k(e),!v)if(null!==a(d))v=!0,E||(E=!0,s());else{var t=a(p);null!==t&&F(C,t.startTime-e)}}var E=!1,_=-1,T=5,P=-1;function I(){return!!b||!(r.unstable_now()-P<T)}function A(){if(b=!1,E){var e=r.unstable_now();P=e;var t=!0;try{e:{v=!1,y&&(y=!1,w(_),_=-1),g=!0;var i=m;try{t:{for(k(e),h=a(d);null!==h&&!(h.expirationTime>e&&I());){var o=h.callback;if("function"==typeof o){h.callback=null,m=h.priorityLevel;var l=o(h.expirationTime<=e);if(e=r.unstable_now(),"function"==typeof l){h.callback=l,k(e),t=!0;break t}h===a(d)&&n(d),k(e)}else n(d);h=a(d)}if(null!==h)t=!0;else{var u=a(p);null!==u&&F(C,u.startTime-e),t=!1}}break e}finally{h=null,m=i,g=!1}}}finally{t?s():E=!1}}}if("function"==typeof S)s=function(){S(A)};else if("u">typeof MessageChannel){var O=new MessageChannel,M=O.port2;O.port1.onmessage=A,s=function(){M.postMessage(null)}}else s=function(){x(A,0)};function F(e,t){_=x(function(){e(r.unstable_now())},t)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(e){e.callback=null},r.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},r.unstable_getCurrentPriorityLevel=function(){return m},r.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var r=m;m=t;try{return e()}finally{m=r}},r.unstable_requestPaint=function(){b=!0},r.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=m;m=e;try{return t()}finally{m=r}},r.unstable_scheduleCallback=function(e,t,n){var o=r.unstable_now();switch(n="object"==typeof n&&null!==n&&"number"==typeof(n=n.delay)&&0<n?o+n:o,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=0x3fffffff;break;case 4:l=1e4;break;default:l=5e3}return l=n+l,e={id:f++,callback:t,priorityLevel:e,startTime:n,expirationTime:l,sortIndex:-1},n>o?(e.sortIndex=n,i(p,e),null===a(d)&&e===a(p)&&(y?(w(_),_=-1):y=!0,F(C,n-o))):(e.sortIndex=l,i(d,e),v||g||(v=!0,E||(E=!0,s()))),e},r.unstable_shouldYield=I,r.unstable_wrapCallback=function(e){var t=m;return function(){var r=m;m=t;try{return e.apply(this,arguments)}finally{m=r}}}},236982,(e,t,r)=>{"use strict";t.exports=e.r(540804)},665662,(e,t,r)=>{"use strict";var i=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),m=Symbol.for("react.view_transition"),g=Symbol.iterator,v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,b={};function x(e,t,r){this.props=e,this.context=t,this.refs=b,this.updater=r||v}function w(){}function S(e,t,r){this.props=e,this.context=t,this.refs=b,this.updater=r||v}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=x.prototype;var k=S.prototype=new w;k.constructor=S,y(k,x.prototype),k.isPureReactComponent=!0;var C=Array.isArray;function E(){}var _={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function P(e,t,r){var a=r.ref;return{$$typeof:i,type:e,key:t,ref:void 0!==a?a:null,props:r}}function I(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var A=/\/+/g;function O(e,t){var r,i;return"object"==typeof e&&null!==e&&null!=e.key?(r=""+e.key,i={"=":"=0",":":"=2"},"$"+r.replace(/[=:]/g,function(e){return i[e]})):t.toString(36)}function M(e,t,r){if(null==e)return e;var n=[],o=0;return!function e(t,r,n,o,s){var l,u,c,d=typeof t;("undefined"===d||"boolean"===d)&&(t=null);var p=!1;if(null===t)p=!0;else switch(d){case"bigint":case"string":case"number":p=!0;break;case"object":switch(t.$$typeof){case i:case a:p=!0;break;case f:return e((p=t._init)(t._payload),r,n,o,s)}}if(p)return s=s(t),p=""===o?"."+O(t,0):o,C(s)?(n="",null!=p&&(n=p.replace(A,"$&/")+"/"),e(s,r,n,"",function(e){return e})):null!=s&&(I(s)&&(l=s,u=n+(null==s.key||t&&t.key===s.key?"":(""+s.key).replace(A,"$&/")+"/")+p,s=P(l.type,u,l.props)),r.push(s)),1;p=0;var h=""===o?".":o+":";if(C(t))for(var m=0;m<t.length;m++)d=h+O(o=t[m],m),p+=e(o,r,n,d,s);else if("function"==typeof(m=null===(c=t)||"object"!=typeof c?null:"function"==typeof(c=g&&c[g]||c["@@iterator"])?c:null))for(t=m.call(t),m=0;!(o=t.next()).done;)d=h+O(o=o.value,m++),p+=e(o,r,n,d,s);else if("object"===d){if("function"==typeof t.then)return e(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(E,E):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(t),r,n,o,s);throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(r=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.")}return p}(e,n,"","",function(e){return t.call(r,e,o++)}),n}function F(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R="function"==typeof reportError?reportError:function(e){"object"==typeof process&&"function"==typeof process.emit?process.emit("uncaughtException",e):console.error(e)};function D(e){var t=_.T,r={};r.types=null!==t?t.types:null,_.T=r;try{var i=e(),a=_.S;null!==a&&a(r,i),"object"==typeof i&&null!==i&&"function"==typeof i.then&&i.then(E,R)}catch(e){R(e)}finally{null!==t&&null!==r.types&&(t.types=r.types),_.T=t}}function j(e){var t=_.T;if(null!==t){var r=t.types;null===r?t.types=[e]:-1===r.indexOf(e)&&r.push(e)}else D(j.bind(null,e))}r.Activity=h,r.Children={map:M,forEach:function(e,t,r){M(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return M(e,function(){t++}),t},toArray:function(e){return M(e,function(e){return e})||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},r.Component=x,r.Fragment=n,r.Profiler=s,r.PureComponent=S,r.StrictMode=o,r.Suspense=d,r.ViewTransition=m,r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,r.__COMPILER_RUNTIME={__proto__:null,c:function(e){return _.H.useMemoCache(e)}},r.addTransitionType=j,r.cache=function(e){return function(){return e.apply(null,arguments)}},r.cacheSignal=function(){return null},r.cloneElement=function(e,t,r){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var i=y({},e.props),a=e.key;if(null!=t)for(n in void 0!==t.key&&(a=""+t.key),t)T.call(t,n)&&"key"!==n&&"__self"!==n&&"__source"!==n&&("ref"!==n||void 0!==t.ref)&&(i[n]=t[n]);var n=arguments.length-2;if(1===n)i.children=r;else if(1<n){for(var o=Array(n),s=0;s<n;s++)o[s]=arguments[s+2];i.children=o}return P(e.type,a,i)},r.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:l,_context:e},e},r.createElement=function(e,t,r){var i,a={},n=null;if(null!=t)for(i in void 0!==t.key&&(n=""+t.key),t)T.call(t,i)&&"key"!==i&&"__self"!==i&&"__source"!==i&&(a[i]=t[i]);var o=arguments.length-2;if(1===o)a.children=r;else if(1<o){for(var s=Array(o),l=0;l<o;l++)s[l]=arguments[l+2];a.children=s}if(e&&e.defaultProps)for(i in o=e.defaultProps)void 0===a[i]&&(a[i]=o[i]);return P(e,n,a)},r.createRef=function(){return{current:null}},r.forwardRef=function(e){return{$$typeof:c,render:e}},r.isValidElement=I,r.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:F}},r.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},r.startTransition=D,r.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},r.use=function(e){return _.H.use(e)},r.useActionState=function(e,t,r){return _.H.useActionState(e,t,r)},r.useCallback=function(e,t){return _.H.useCallback(e,t)},r.useContext=function(e){return _.H.useContext(e)},r.useDebugValue=function(){},r.useDeferredValue=function(e,t){return _.H.useDeferredValue(e,t)},r.useEffect=function(e,t){return _.H.useEffect(e,t)},r.useEffectEvent=function(e){return _.H.useEffectEvent(e)},r.useId=function(){return _.H.useId()},r.useImperativeHandle=function(e,t,r){return _.H.useImperativeHandle(e,t,r)},r.useInsertionEffect=function(e,t){return _.H.useInsertionEffect(e,t)},r.useLayoutEffect=function(e,t){return _.H.useLayoutEffect(e,t)},r.useMemo=function(e,t){return _.H.useMemo(e,t)},r.useOptimistic=function(e,t){return _.H.useOptimistic(e,t)},r.useReducer=function(e,t,r){return _.H.useReducer(e,t,r)},r.useRef=function(e){return _.H.useRef(e)},r.useState=function(e){return _.H.useState(e)},r.useSyncExternalStore=function(e,t,r){return _.H.useSyncExternalStore(e,t,r)},r.useTransition=function(){return _.H.useTransition()},r.version="19.3.0-canary-f93b9fd4-20251217"},289104,(e,t,r)=>{"use strict";t.exports=e.r(665662)},409869,(e,t,r)=>{"use strict";var i=e.r(289104);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(a(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal"),l=Symbol.for("react.optimistic_key"),u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,r.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(a(299));return function(e,t,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==i?null:i===l?l:""+i,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},r.flushSync=function(e){var t=u.T,r=o.p;try{if(u.T=null,o.p=2,e)return e()}finally{u.T=t,o.p=r,o.d.f()}},r.preconnect=function(e,t){"string"==typeof e&&(t=t?"string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:null,o.d.C(e,t))},r.prefetchDNS=function(e){"string"==typeof e&&o.d.D(e)},r.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var r=t.as,i=c(r,t.crossOrigin),a="string"==typeof t.integrity?t.integrity:void 0,n="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===r?o.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:i,integrity:a,fetchPriority:n}):"script"===r&&o.d.X(e,{crossOrigin:i,integrity:a,fetchPriority:n,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},r.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var r=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},r.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var r=t.as,i=c(r,t.crossOrigin);o.d.L(e,r,{crossOrigin:i,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},r.preloadModule=function(e,t){if("string"==typeof e)if(t){var r=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},r.requestFormReset=function(e){o.d.r(e)},r.unstable_batchedUpdates=function(e,t){return e(t)},r.useFormState=function(e,t,r){return u.H.useFormState(e,t,r)},r.useFormStatus=function(){return u.H.useHostTransitionStatus()},r.version="19.3.0-canary-f93b9fd4-20251217"},845260,(e,t,r)=>{"use strict";!function e(){if("u">typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),t.exports=e.r(409869)},90455,(e,t,r)=>{"use strict";var i=e.r(236982),a=e.r(289104),n=e.r(845260);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do 0!=(4098&(t=e).flags)&&(r=t.return),e=t.return;while(e)}return 3===t.tag?r:null}function u(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function c(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(o(188))}function p(e,t,r,i,a,n){for(;null!==e;){if(5===e.tag&&r(e,i,a,n)||(22!==e.tag||null===e.memoizedState)&&(t||5!==e.tag)&&p(e.child,t,r,i,a,n))return!0;e=e.sibling}return!1}function f(e){for(e=e.return;null!==e;){if(3===e.tag||5===e.tag)return e;e=e.return}return null}function h(e){switch(e.tag){case 5:return e.stateNode;case 3:return e.stateNode.containerInfo;default:throw Error(o(559))}}var m=null,g=null;function v(e){return m=e,!0}function y(e,t,r){return e===r||e===t&&(m=e,!0)}function b(e,t,r){return e===r?(g=e,!1):e===t&&(null!==g&&(m=e),!0)}function x(e){if(null===e)return null;do e=null===e?null:e.return;while(e&&5!==e.tag&&27!==e.tag&&3!==e.tag)return e||null}function w(e,t,r){for(var i=0,a=e;a;a=r(a))i++;a=0;for(var n=t;n;n=r(n))a++;for(;0<i-a;)e=r(e),i--;for(;0<a-i;)t=r(t),a--;for(;i--;){if(e===t||null!==t&&e===t.alternate)return e;e=r(e),t=r(t)}return null}var S=Object.assign,k=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),A=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope");var j=Symbol.for("react.activity"),L=Symbol.for("react.legacy_hidden");Symbol.for("react.tracing_marker");var B=Symbol.for("react.memo_cache_sentinel"),N=Symbol.for("react.view_transition"),$=Symbol.iterator;function z(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=$&&e[$]||e["@@iterator"])?e:null}var U=Symbol.for("react.client.reference"),V=Array.isArray,H=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},G=[],Z=-1;function K(e){return{current:e}}function Q(e){0>Z||(e.current=G[Z],G[Z]=null,Z--)}function X(e,t){G[++Z]=e.current,e.current=t}var J=K(null),Y=K(null),ee=K(null),et=K(null);function er(e,t){switch(X(ee,t),X(Y,e),X(J,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?u3(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=u6(t=u3(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Q(J),X(J,e)}function ei(){Q(J),Q(Y),Q(ee)}function ea(e){var t=e.memoizedState;null!==t&&(dr._currentValue=t.memoizedState,X(et,e));var r=u6(t=J.current,e.type);t!==r&&(X(Y,e),X(J,r))}function en(e){Y.current===e&&(Q(J),Q(Y)),et.current===e&&(Q(et),dr._currentValue=q)}function eo(e){if(void 0===tH)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);tH=t&&t[1]||"",tW=-1<e.stack.indexOf("\n    at")?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+tH+e+tW}var es=!1;function el(e,t){if(!e||es)return"";es=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var r=function(){throw Error()};if(Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(r,[])}catch(e){var i=e}Reflect.construct(e,[],r)}else{try{r.call()}catch(e){i=e}e.call(r.prototype)}}else{try{throw Error()}catch(e){i=e}(r=e())&&"function"==typeof r.catch&&r.catch(function(){})}}catch(e){if(e&&i&&"string"==typeof e.stack)return[e.stack,i.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var n=i.DetermineComponentFrameRoot(),o=n[0],s=n[1];if(o&&s){var l=o.split("\n"),u=s.split("\n");for(a=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;a<u.length&&!u[a].includes("DetermineComponentFrameRoot");)a++;if(i===l.length||a===u.length)for(i=l.length-1,a=u.length-1;1<=i&&0<=a&&l[i]!==u[a];)a--;for(;1<=i&&0<=a;i--,a--)if(l[i]!==u[a]){if(1!==i||1!==a)do if(i--,a--,0>a||l[i]!==u[a]){var c="\n"+l[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=a)break}}}finally{es=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?eo(r):""}function eu(e){try{var t="",r=null;do t+=function(e,t){switch(e.tag){case 26:case 27:case 5:return eo(e.type);case 16:return eo("Lazy");case 13:return e.child!==t&&null!==t?eo("Suspense Fallback"):eo("Suspense");case 19:return eo("SuspenseList");case 0:case 15:return el(e.type,!1);case 11:return el(e.type.render,!1);case 1:return el(e.type,!0);case 31:return eo("Activity");case 30:return eo("ViewTransition");default:return""}}(e,r),r=e,e=e.return;while(e)return t}catch(e){return"\nError generating stack: "+e.message+"\n"+e.stack}}var ec=Object.prototype.hasOwnProperty,ed=i.unstable_scheduleCallback,ep=i.unstable_cancelCallback,ef=i.unstable_shouldYield,eh=i.unstable_requestPaint,em=i.unstable_now,eg=i.unstable_getCurrentPriorityLevel,ev=i.unstable_ImmediatePriority,ey=i.unstable_UserBlockingPriority,eb=i.unstable_NormalPriority,ex=i.unstable_LowPriority,ew=i.unstable_IdlePriority,eS=(i.log,i.unstable_setDisableYieldValue,null),ek=null,eC=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(eE(e)/e_|0)|0},eE=Math.log,e_=Math.LN2,eT=256,eP=262144,eI=4194304;function eA(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 0x1000000:case 0x2000000:return 0x3c00000&e;case 0x4000000:return 0x4000000;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0;default:return e}}function eO(e,t,r){var i=e.pendingLanes;if(0===i)return 0;var a=0,n=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=0x7ffffff&i;return 0!==s?0!=(i=s&~n)?a=eA(i):0!=(o&=s)?a=eA(o):r||0!=(r=s&~e)&&(a=eA(r)):0!=(s=i&~n)?a=eA(s):0!==o?a=eA(o):r||0!=(r=i&~e)&&(a=eA(r)),0===a?0:0!==t&&t!==a&&0==(t&n)&&((n=a&-a)>=(r=t&-t)||32===n&&0!=(4194048&r))?t:a}function eM(e,t){return 0==(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function eF(){var e=eI;return 0==(0x3c00000&(eI<<=1))&&(eI=4194304),e}function eR(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function eD(e,t){e.pendingLanes|=t,0x10000000!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ej(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-eC(t);e.entangledLanes|=t,e.entanglements[i]=0x40000000|e.entanglements[i]|261930&r}function eL(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-eC(r),a=1<<i;a&t|e[i]&t&&(e[i]|=t),r&=~a}}function eB(e,t){var r=t&-t;return 0!=((r=0!=(42&r)?1:eN(r))&(e.suspendedLanes|t))?0:r}function eN(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:e=128;break;case 0x10000000:e=0x8000000;break;default:e=0}return e}function e$(e){return 2<(e&=-e)?8<e?0!=(0x7ffffff&e)?32:0x10000000:8:2}function ez(){var e=W.p;return 0!==e?e:void 0===(e=window.event)?32:dy(e.type)}function eU(e,t){var r=W.p;try{return W.p=e,t()}finally{W.p=r}}var eV=Math.random().toString(36).slice(2),eH="__reactFiber$"+eV,eW="__reactProps$"+eV,eq="__reactContainer$"+eV,eG="__reactEvents$"+eV,eZ="__reactListeners$"+eV,eK="__reactHandles$"+eV,eQ="__reactResources$"+eV,eX="__reactMarker$"+eV;function eJ(e){delete e[eH],delete e[eW],delete e[eG],delete e[eZ],delete e[eK]}function eY(e){var t;if(t=e[eH])return t;for(var r=e.parentNode;r;){if(t=r[eq]||r[eH]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=cF(e);null!==e;){if(r=e[eH])return r;e=cF(e)}return t}r=(e=r).parentNode}return null}function e0(e){if(e=e[eH]||e[eq]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function e1(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function e2(e){var t=e[eQ];return t||(t=e[eQ]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function e4(e){e[eX]=!0}var e3=new Set,e6={};function e8(e,t){e5(e,t),e5(e+"Capture",t)}function e5(e,t){for(e6[e]=t,e=0;e<t.length;e++)e3.add(t[e])}var e7=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),e9={},te={},tt=!1;function tr(){var e=tt;return tt=!1,e}function ti(e,t,r){if(ec.call(te,t)||!ec.call(e9,t)&&(e7.test(t)?te[t]=!0:(e9[t]=!0,!1)))if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if("data-"!==i&&"aria-"!==i)return void e.removeAttribute(t)}e.setAttribute(t,""+r)}}function ta(e,t,r){if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+r)}}function tn(e,t,r,i){if(null===i)e.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(t,r,""+i)}}function to(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ts(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function tl(e){if(!e._valueTracker){var t=ts(e)?"checked":"value";e._valueTracker=function(e,t,r){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&void 0!==i&&"function"==typeof i.get&&"function"==typeof i.set){var a=i.get,n=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,n.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function tu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=ts(e)?e.checked?"true":"false":e.value),(e=i)!==r&&(t.setValue(e),!0)}function tc(e){if(void 0===(e=e||("u">typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var td=/[\n"\\]/g;function tp(e){return e.replace(td,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function tf(e,t,r,i,a,n,o,s){e.name="",null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+to(t)):e.value!==""+to(t)&&(e.value=""+to(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?tm(e,o,to(t)):null!=r?tm(e,o,to(r)):null!=i&&e.removeAttribute("value"),null==a&&null!=n&&(e.defaultChecked=!!n),null!=a&&(e.checked=a&&"function"!=typeof a&&"symbol"!=typeof a),null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s?e.name=""+to(s):e.removeAttribute("name")}function th(e,t,r,i,a,n,o,s){if(null!=n&&"function"!=typeof n&&"symbol"!=typeof n&&"boolean"!=typeof n&&(e.type=n),null!=t||null!=r){if(("submit"===n||"reset"===n)&&null==t)return void tl(e);r=null!=r?""+to(r):"",t=null!=t?""+to(t):r,s||t===e.value||(e.value=t),e.defaultValue=t}i="function"!=typeof(i=null!=i?i:a)&&"symbol"!=typeof i&&!!i,e.checked=s?e.checked:!!i,e.defaultChecked=!!i,null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o&&(e.name=o),tl(e)}function tm(e,t,r){"number"===t&&tc(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function tg(e,t,r,i){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&i&&(e[r].defaultSelected=!0)}else{for(a=0,r=""+to(r),t=null;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function tv(e,t,r){if(null!=t&&((t=""+to(t))!==e.value&&(e.value=t),null==r)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=null!=r?""+to(r):""}function ty(e,t,r,i){if(null==t){if(null!=i){if(null!=r)throw Error(o(92));if(V(i)){if(1<i.length)throw Error(o(93));i=i[0]}r=i}null==r&&(r=""),t=r}e.defaultValue=r=to(t),(i=e.textContent)===r&&""!==i&&null!==i&&(e.value=i),tl(e)}function tb(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType){r.nodeValue=t;return}}e.textContent=t}var tx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tw(e,t,r){var i=0===t.indexOf("--");null==r||"boolean"==typeof r||""===r?i?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":i?e.setProperty(t,r):"number"!=typeof r||0===r||tx.has(t)?"float"===t?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function tS(e,t,r){if(null!=t&&"object"!=typeof t)throw Error(o(62));if(e=e.style,null!=r){for(var i in r)!r.hasOwnProperty(i)||null!=t&&t.hasOwnProperty(i)||(0===i.indexOf("--")?e.setProperty(i,""):"float"===i?e.cssFloat="":e[i]="",tt=!0);for(var a in t)i=t[a],t.hasOwnProperty(a)&&r[a]!==i&&(tw(e,a,i),tt=!0)}else for(var n in t)t.hasOwnProperty(n)&&tw(e,n,t[n])}function tk(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function t_(e){return tE.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function tT(){}var tP=null;function tI(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var tA=null,tO=null;function tM(e){var t=e0(e);if(t&&(e=t.stateNode)){var r=e[eW]||null;switch(e=t.stateNode,t.type){case"input":if(tf(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+tp(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var a=i[eW]||null;if(!a)throw Error(o(90));tf(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<r.length;t++)(i=r[t]).form===e.form&&tu(i)}break;case"textarea":tv(e,r.value,r.defaultValue);break;case"select":null!=(t=r.value)&&tg(e,!!r.multiple,t,!1)}}}var tF=!1;function tR(e,t,r){if(tF)return e(t,r);tF=!0;try{return e(t)}finally{if(tF=!1,(null!==tA||null!==tO)&&(lQ(),tA&&(t=tA,e=tO,tO=tA=null,tM(t),e)))for(t=0;t<e.length;t++)tM(e[t])}}function tD(e,t){var r=e.stateNode;if(null===r)return null;var i=r[eW]||null;if(null===i)return null;switch(r=i[t],t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i="button"!==(e=e.type)&&"input"!==e&&"select"!==e&&"textarea"!==e),e=!i;break;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(o(231,t,typeof r));return r}var tj=null,tL=null,tB=null;function tN(){if(tB)return tB;var e,t,r=tL,i=r.length,a="value"in tj?tj.value:tj.textContent,n=a.length;for(e=0;e<i&&r[e]===a[e];e++);var o=i-e;for(t=1;t<=o&&r[i-t]===a[n-t];t++);return tB=a.slice(e,1<t?1-t:void 0)}function t$(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tz(){return!0}function tU(){return!1}function tV(e){function t(t,r,i,a,n){for(var o in this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=n,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?tz:tU,this.isPropagationStopped=tU,this}return S(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tz)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tz)},persist:function(){},isPersistent:tz}),t}var tH,tW,tq,tG,tZ,tK={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tQ=tV(tK),tX=S({},tK,{view:0,detail:0}),tJ=tV(tX),tY=S({},tX,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:re,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==tZ&&(tZ&&"mousemove"===e.type?(tq=e.screenX-tZ.screenX,tG=e.screenY-tZ.screenY):tG=tq=0,tZ=e),tq)},movementY:function(e){return"movementY"in e?e.movementY:tG}}),t0=tV(tY),t1=tV(S({},tY,{dataTransfer:0})),t2=tV(S({},tX,{relatedTarget:0})),t4=tV(S({},tK,{animationName:0,elapsedTime:0,pseudoElement:0})),t3=tV(S({},tK,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),t6=tV(S({},tK,{data:0})),t8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t9(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=t7[e])&&!!t[e]}function re(){return t9}var rt=tV(S({},tX,{key:function(e){if(e.key){var t=t8[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=t$(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?t5[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:re,charCode:function(e){return"keypress"===e.type?t$(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?t$(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),rr=tV(S({},tY,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),ri=tV(S({},tX,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:re})),ra=tV(S({},tK,{propertyName:0,elapsedTime:0,pseudoElement:0})),rn=tV(S({},tY,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),ro=tV(S({},tK,{newState:0,oldState:0})),rs=[9,13,27,32];function rl(e,t){switch(e){case"keyup":return -1!==rs.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}var ru=!1,rc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!rc[e.type]:"textarea"===t}function rp(e,t,r,i){tA?tO?tO.push(i):tO=[i]:tA=i,0<(t=uH(t,"onChange")).length&&(r=new tQ("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var rf=null,rh=null;function rm(e){uj(e,0)}function rg(e){if(tu(e1(e)))return e}function rv(e,t){if("change"===e)return t}function ry(){rf&&(rf.detachEvent("onpropertychange",rb),rh=rf=null)}function rb(e){if("value"===e.propertyName&&rg(rh)){var t=[];rp(t,rh,e,tI(e)),tR(rm,t)}}function rx(e,t,r){"focusin"===e?(ry(),rf=t,rh=r,rf.attachEvent("onpropertychange",rb)):"focusout"===e&&ry()}function rw(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return rg(rh)}function rS(e,t){if("click"===e)return rg(t)}function rk(e,t){if("input"===e||"change"===e)return rg(t)}var rC="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function rE(e,t){if(rC(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var a=r[i];if(!ec.call(t,a)||!rC(e[a],t[a]))return!1}return!0}function r_(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rT(e,t){var r,i=r_(e);for(e=0;i;){if(3===i.nodeType){if(r=e+i.textContent.length,e<=t&&r>=t)return{node:i,offset:t-e};e=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=r_(i)}}function rP(e){e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;for(var t=tc(e.document);t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(e){r=!1}if(r)e=t.contentWindow;else break;t=tc(e.document)}return t}function rI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var rA=null,rO=null,rM=null,rF=!1;function rR(e,t,r){var i=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;rF||null==rA||rA!==tc(i)||(i="selectionStart"in(i=rA)&&rI(i)?{start:i.selectionStart,end:i.selectionEnd}:{anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},rM&&rE(rM,i)||(rM=i,0<(i=uH(rO,"onSelect")).length&&(t=new tQ("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=rA)))}function rD(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var rj={animationend:rD("Animation","AnimationEnd"),animationiteration:rD("Animation","AnimationIteration"),animationstart:rD("Animation","AnimationStart"),transitionrun:rD("Transition","TransitionRun"),transitionstart:rD("Transition","TransitionStart"),transitioncancel:rD("Transition","TransitionCancel"),transitionend:rD("Transition","TransitionEnd")},rL={},rB={};function rN(e){if(rL[e])return rL[e];if(!rj[e])return e;var t,r=rj[e];for(t in r)if(r.hasOwnProperty(t)&&t in rB)return rL[e]=r[t];return e}var r$=rN("animationend"),rz=rN("animationiteration"),rU=rN("animationstart"),rV=rN("transitionrun"),rH=rN("transitionstart"),rW=rN("transitioncancel"),rq=rN("transitionend"),rG=new Map,rZ="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rK(e,t){rG.set(e,t),e8(t,[e])}rZ.push("scrollEnd");var rQ=0;function rX(e,t){return null!=e.name&&"auto"!==e.name?e.name:null!==t.autoName?t.autoName:t.autoName=e="_"+(e=lM.identifierPrefix)+"t_"+(rQ++).toString(32)+"_"}function rJ(e){if(null==e||"string"==typeof e)return e;var t=null,r=l$;if(null!==r)for(var i=0;i<r.length;i++){var a=e[r[i]];if(null!=a){if("none"===a)return"none";t=null==t?a:t+" "+a}}return null==t?e.default:t}function rY(e,t){return e=rJ(e),null==(t=rJ(t))?"auto"===e?null:e:"auto"===t?null:t}var r0="function"==typeof reportError?reportError:function(e){"object"==typeof process&&"function"==typeof process.emit?process.emit("uncaughtException",e):console.error(e)},r1=[],r2=0,r4=0;function r3(){for(var e=r2,t=r4=r2=0;t<e;){var r=r1[t];r1[t++]=null;var i=r1[t];r1[t++]=null;var a=r1[t];r1[t++]=null;var n=r1[t];if(r1[t++]=null,null!==i&&null!==a){var o=i.pending;null===o?a.next=a:(a.next=o.next,o.next=a),i.pending=a}0!==n&&r7(r,a,n)}}function r6(e,t,r,i){r1[r2++]=e,r1[r2++]=t,r1[r2++]=r,r1[r2++]=i,r4|=i,e.lanes|=i,null!==(e=e.alternate)&&(e.lanes|=i)}function r8(e,t,r,i){return r6(e,t,r,i),r9(e)}function r5(e,t){return r6(e,null,null,t),r9(e)}function r7(e,t,r){e.lanes|=r;var i=e.alternate;null!==i&&(i.lanes|=r);for(var a=!1,n=e.return;null!==n;)n.childLanes|=r,null!==(i=n.alternate)&&(i.childLanes|=r),22===n.tag&&(null===(e=n.stateNode)||1&e._visibility||(a=!0)),e=n,n=n.return;return 3===e.tag?(n=e.stateNode,a&&null!==t&&(a=31-eC(r),null===(i=(e=n.hiddenUpdates)[a])?e[a]=[t]:i.push(t),t.lane=0x20000000|r),n):null}function r9(e){if(50<lz)throw lz=0,lU=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var ie={};function it(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(e,t,r,i){return new it(e,t,r,i)}function ii(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ia(e,t){var r=e.alternate;return null===r?((r=ir(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=0x7e00000&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function io(e,t){e.flags&=0x7e00002;var r=e.alternate;return null===r?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,e.dependencies=null===(t=r.dependencies)?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function is(e,t,r,i,a,n){var s=0;if(i=e,"function"==typeof e)ii(e)&&(s=1);else if("string"==typeof e)s=!function(e,t,r){if(1===r||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;if("stylesheet"===t.rel)return e=t.disabled,"string"==typeof t.precedence&&null==e;return!0;case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,r,J.current)?"html"===e||"head"===e||"body"===e?27:5:26;else e:switch(e){case j:return(e=ir(31,r,t,a)).elementType=j,e.lanes=n,e;case _:return il(r.children,a,n,t);case T:s=8,a|=24;break;case P:return(e=ir(12,r,t,2|a)).elementType=P,e.lanes=n,e;case M:return(e=ir(13,r,t,a)).elementType=M,e.lanes=n,e;case F:return(e=ir(19,r,t,a)).elementType=F,e.lanes=n,e;case L:case N:return(e=ir(30,r,t,e=32|a)).elementType=N,e.lanes=n,e.stateNode={autoName:null,paired:null,clones:null,ref:null},e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case I:s=9;break e;case O:s=11;break e;case R:s=14;break e;case D:s=16,i=null;break e}s=29,r=Error(o(130,null===e?"null":typeof e,"")),i=null}return(t=ir(s,r,t,a)).elementType=e,t.type=i,t.lanes=n,t}function il(e,t,r,i){return(e=ir(7,e,i,t)).lanes=r,e}function iu(e,t,r){return(e=ir(6,e,null,t)).lanes=r,e}function ic(e){var t=ir(18,null,null,0);return t.stateNode=e,t}function id(e,t,r){return(t=ir(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ip=new WeakMap;function ih(e,t){if("object"==typeof e&&null!==e){var r=ip.get(e);return void 0!==r?r:(t={value:e,source:t,stack:eu(t)},ip.set(e,t),t)}return{value:e,source:t,stack:eu(t)}}var im=[],ig=0,iv=null,iy=0,ib=[],ix=0,iw=null,iS=1,ik="";function iC(e,t){im[ig++]=iy,im[ig++]=iv,iv=e,iy=t}function iE(e,t,r){ib[ix++]=iS,ib[ix++]=ik,ib[ix++]=iw,iw=e;var i=iS;e=ik;var a=32-eC(i)-1;i&=~(1<<a),r+=1;var n=32-eC(t)+a;if(30<n){var o=a-a%5;n=(i&(1<<o)-1).toString(32),i>>=o,a-=o,iS=1<<32-eC(t)+a|r<<a|i,ik=n+e}else iS=1<<n|r<<a|i,ik=e}function i_(e){null!==e.return&&(iC(e,1),iE(e,1,0))}function iT(e){for(;e===iv;)iv=im[--ig],im[ig]=null,iy=im[--ig],im[ig]=null;for(;e===iw;)iw=ib[--ix],ib[ix]=null,ik=ib[--ix],ib[ix]=null,iS=ib[--ix],ib[ix]=null}function iP(e,t){ib[ix++]=iS,ib[ix++]=ik,ib[ix++]=iw,iS=t.id,ik=t.overflow,iw=e}var iI=null,iA=null,iO=!1,iM=null,iF=!1,iR=Error(o(519));function iD(e){var t=Error(o(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML",""));throw iz(ih(t,e)),iR}function ij(e){var t=e.stateNode,r=e.type,i=e.memoizedProps;switch(t[eH]=e,t[eW]=i,r){case"dialog":uL("cancel",t),uL("close",t);break;case"iframe":case"object":case"embed":uL("load",t);break;case"video":case"audio":for(r=0;r<uR.length;r++)uL(uR[r],t);break;case"source":uL("error",t);break;case"img":case"image":case"link":uL("error",t),uL("load",t);break;case"details":uL("toggle",t);break;case"input":uL("invalid",t),th(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":uL("invalid",t);break;case"textarea":uL("invalid",t),ty(t,i.value,i.defaultValue,i.children)}"string"!=typeof(r=i.children)&&"number"!=typeof r&&"bigint"!=typeof r||t.textContent===""+r||!0===i.suppressHydrationWarning||uQ(t.textContent,r)?(null!=i.popover&&(uL("beforetoggle",t),uL("toggle",t)),null!=i.onScroll&&uL("scroll",t),null!=i.onScrollEnd&&uL("scrollend",t),null!=i.onClick&&(t.onclick=tT),t=!0):t=!1,t||iD(e,!0)}function iL(e){for(iI=e.return;iI;)switch(iI.tag){case 5:case 31:case 13:iF=!1;return;case 27:case 3:iF=!0;return;default:iI=iI.return}}function iB(e){if(e!==iI)return!1;if(!iO)return iL(e),iO=!0,!1;var t,r=e.tag;if((t=3!==r&&27!==r)&&((t=5===r)&&(t="form"===(t=e.type)||"button"===t||u8(e.type,e.memoizedProps)),t=!t),t&&iA&&iD(e),iL(e),13===r){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));iA=cM(e)}else if(31===r){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));iA=cM(e)}else 27===r?(r=iA,ci(e.type)?(e=cO,cO=null,iA=e):iA=r):iA=iI?cA(e.stateNode.nextSibling):null;return!0}function iN(){iA=iI=null,iO=!1}function i$(){var e=iM;return null!==e&&(null===lC?lC=e:lC.push.apply(lC,e),iM=null),e}function iz(e){null===iM?iM=[e]:iM.push(e)}var iU=K(null),iV=null,iH=null;function iW(e,t,r){X(iU,t._currentValue),t._currentValue=r}function iq(e){e._currentValue=iU.current,Q(iU)}function iG(e,t,r){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function iZ(e,t,r,i){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var n=a.dependencies;if(null!==n){var s=a.child;n=n.firstContext;e:for(;null!==n;){var l=n;n=a;for(var u=0;u<t.length;u++)if(l.context===t[u]){n.lanes|=r,null!==(l=n.alternate)&&(l.lanes|=r),iG(n.return,r,e),i||(s=null);break e}n=l.next}}else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=r,null!==(n=s.alternate)&&(n.lanes|=r),iG(s,r,e),s=null}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}}function iK(e,t,r,i){e=null;for(var a=t,n=!1;null!==a;){if(!n){if(0!=(524288&a.flags))n=!0;else if(0!=(262144&a.flags))break}if(10===a.tag){var s=a.alternate;if(null===s)throw Error(o(387));if(null!==(s=s.memoizedProps)){var l=a.type;rC(a.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(a===et.current){if(null===(s=a.alternate))throw Error(o(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(dr):e=[dr])}a=a.return}null!==e&&iZ(t,e,r,i),t.flags|=262144}function iQ(e){for(e=e.firstContext;null!==e;){if(!rC(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function iX(e){iV=e,iH=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function iJ(e){return i0(iV,e)}function iY(e,t){return null===iV&&iX(e),i0(e,t)}function i0(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},null===iH){if(null===e)throw Error(o(308));iH=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else iH=iH.next=t;return r}var i1="u">typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},i2=i.unstable_scheduleCallback,i4=i.unstable_NormalPriority,i3={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function i6(){return{controller:new i1,data:new Map,refCount:0}}function i8(e){e.refCount--,0===e.refCount&&i2(i4,function(){e.controller.abort()})}function i5(e,t){if(0!=(4194048&e.pendingLanes)){var r=e.transitionTypes;for(null===r&&(r=e.transitionTypes=[]),e=0;e<t.length;e++){var i=t[e];-1===r.indexOf(i)&&r.push(i)}}}var i7=null,i9=null,ae=0,at=0,ar=null;function ai(){if(0==--ae&&(i7=null,null!==i9)){null!==ar&&(ar.status="fulfilled");var e=i9;i9=null,at=0,ar=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var aa=H.S;H.S=function(e,t){if(lT=em(),"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===i9){var r=i9=[];ae=0,at=uI(),ar={status:"pending",value:void 0,then:function(e){r.push(e)}}}ae++,t.then(ai,ai)}(0,t),null!==i7)for(var r=ug;null!==r;)i5(r,i7),r=r.next;if(null!==(r=e.types)){for(var i=ug;null!==i;)i5(i,r),i=i.next;if(0!==at){null===(i=i7)&&(i=i7=[]);for(var a=0;a<r.length;a++){var n=r[a];-1===i.indexOf(n)&&i.push(n)}}}null!==aa&&aa(e,t)};var an=K(null);function ao(){var e=an.current;return null!==e?e:ll.pooledCache}function as(e,t){null===t?X(an,an.current):X(an,t.pool)}function al(){var e=ao();return null===e?null:{parent:i3._currentValue,pool:e}}var au=Error(o(460)),ac=Error(o(474)),ad=Error(o(542)),ap={then:function(){}};function af(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ah(e,t,r){switch(void 0===(r=e[r])?e.push(t):r!==t&&(t.then(tT,tT),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw ay(e=t.reason),e;default:if("string"==typeof t.status)t.then(tT,tT);else{if(null!==(e=ll)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var r=t;r.status="fulfilled",r.value=e}},function(e){if("pending"===t.status){var r=t;r.status="rejected",r.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ay(e=t.reason),e}throw ag=t,au}}function am(e){try{return(0,e._init)(e._payload)}catch(e){if(null!==e&&"object"==typeof e&&"function"==typeof e.then)throw ag=e,au;throw e}}var ag=null;function av(){if(null===ag)throw Error(o(459));var e=ag;return ag=null,e}function ay(e){if(e===au||e===ad)throw Error(o(483))}var ab=null,ax=0;function aw(e){var t=ax;return ax+=1,null===ab&&(ab=[]),ah(ab,e,t)}function aS(e,t){e.ref=void 0!==(t=t.props.ref)?t:null}function ak(e,t){if(t.$$typeof===k)throw Error(o(525));throw Error(o(31,"[object Object]"===(e=Object.prototype.toString.call(t))?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function aC(e){function t(t,r){if(e){var i=t.deletions;null===i?(t.deletions=[r],t.flags|=16):i.push(r)}}function r(r,i){if(!e)return null;for(;null!==i;)t(r,i),i=i.sibling;return null}function i(e){for(var t=new Map;null!==e;)null===e.key?t.set(e.index,e):t.set(e.key,e),e=e.sibling;return t}function a(e,t){return(e=ia(e,t)).index=0,e.sibling=null,e}function n(t,r,i){return(t.index=i,e)?null!==(i=t.alternate)?(i=i.index)<r?(t.flags|=0x8000002,r):i:(t.flags|=0x8000002,r):(t.flags|=1048576,r)}function s(t){return e&&null===t.alternate&&(t.flags|=0x8000002),t}function l(e,t,r,i){return null===t||6!==t.tag?(t=iu(r,e.mode,i)).return=e:(t=a(t,r)).return=e,t}function u(e,t,r,i){var n=r.type;return n===_?(aS(e=d(e,t,r.props.children,i,r.key),r),e):(null!==t&&(t.elementType===n||"object"==typeof n&&null!==n&&n.$$typeof===D&&am(n)===t.type)?aS(t=a(t,r.props),r):aS(t=is(r.type,r.key,r.props,null,e.mode,i),r),t.return=e,t)}function c(e,t,r,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?(t=id(r,e.mode,i)).return=e:(t=a(t,r.children||[])).return=e,t}function d(e,t,r,i,n){return null===t||7!==t.tag?(t=il(r,e.mode,i,n)).return=e:(t=a(t,r)).return=e,t}function p(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=iu(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case C:return aS(r=is(t.type,t.key,t.props,null,e.mode,r),t),r.return=e,r;case E:return(t=id(t,e.mode,r)).return=e,t;case D:return p(e,t=am(t),r)}if(V(t)||z(t))return(t=il(t,e.mode,r,null)).return=e,t;if("function"==typeof t.then)return p(e,aw(t),r);if(t.$$typeof===A)return p(e,iY(e,t),r);ak(e,t)}return null}function f(e,t,r,i){var a=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return null!==a?null:l(e,t,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case C:return r.key===a?u(e,t,r,i):null;case E:return r.key===a?c(e,t,r,i):null;case D:return f(e,t,r=am(r),i)}if(V(r)||z(r))return null!==a?null:d(e,t,r,i,null);if("function"==typeof r.then)return f(e,t,aw(r),i);if(r.$$typeof===A)return f(e,t,iY(e,r),i);ak(e,r)}return null}function h(e,t,r,i,a){if("string"==typeof i&&""!==i||"number"==typeof i||"bigint"==typeof i)return l(t,e=e.get(r)||null,""+i,a);if("object"==typeof i&&null!==i){switch(i.$$typeof){case C:return u(t,e=e.get(null===i.key?r:i.key)||null,i,a);case E:return c(t,e=e.get(null===i.key?r:i.key)||null,i,a);case D:return h(e,t,r,i=am(i),a)}if(V(i)||z(i))return d(t,e=e.get(r)||null,i,a,null);if("function"==typeof i.then)return h(e,t,r,aw(i),a);if(i.$$typeof===A)return h(e,t,r,iY(t,i),a);ak(t,i)}return null}return function(l,u,c,d){try{ax=0;var m=function l(u,c,d,m){if("object"==typeof d&&null!==d&&d.type===_&&null===d.key&&void 0===d.props.ref&&(d=d.props.children),"object"==typeof d&&null!==d){switch(d.$$typeof){case C:e:{for(var g=d.key;null!==c;){if(c.key===g){if((g=d.type)===_){if(7===c.tag){r(u,c.sibling),aS(m=a(c,d.props.children),d),m.return=u,u=m;break e}}else if(c.elementType===g||"object"==typeof g&&null!==g&&g.$$typeof===D&&am(g)===c.type){r(u,c.sibling),aS(m=a(c,d.props),d),m.return=u,u=m;break e}r(u,c);break}t(u,c),c=c.sibling}d.type===_?aS(m=il(d.props.children,u.mode,m,d.key),d):aS(m=is(d.type,d.key,d.props,null,u.mode,m),d),m.return=u,u=m}return s(u);case E:e:{for(g=d.key;null!==c;){if(c.key===g)if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){r(u,c.sibling),(m=a(c,d.children||[])).return=u,u=m;break e}else{r(u,c);break}t(u,c),c=c.sibling}(m=id(d,u.mode,m)).return=u,u=m}return s(u);case D:return l(u,c,d=am(d),m)}if(V(d))return function(a,o,s,l){for(var u=null,c=null,d=o,m=o=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(a,d,s[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(a,d),o=n(v,o,m),null===c?u=v:c.sibling=v,c=v,d=g}if(m===s.length)return r(a,d),iO&&iC(a,m),u;if(null===d){for(;m<s.length;m++)null!==(d=p(a,s[m],l))&&(o=n(d,o,m),null===c?u=d:c.sibling=d,c=d);return iO&&iC(a,m),u}for(d=i(d);m<s.length;m++)null!==(g=h(d,a,m,s[m],l))&&(e&&null!==(v=g.alternate)&&d.delete(null===v.key?m:v.key),o=n(g,o,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach(function(e){return t(a,e)}),iO&&iC(a,m),u}(u,c,d,m);if(z(d)){if("function"!=typeof(g=z(d)))throw Error(o(150));return function(a,s,l,u){if(null==l)throw Error(o(151));for(var c=null,d=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(a,m,y.value,u);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(a,m),s=n(b,s,g),null===d?c=b:d.sibling=b,d=b,m=v}if(y.done)return r(a,m),iO&&iC(a,g),c;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=p(a,y.value,u))&&(s=n(y,s,g),null===d?c=y:d.sibling=y,d=y);return iO&&iC(a,g),c}for(m=i(m);!y.done;g++,y=l.next())null!==(y=h(m,a,g,y.value,u))&&(e&&null!==(v=y.alternate)&&m.delete(null===v.key?g:v.key),s=n(y,s,g),null===d?c=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(a,e)}),iO&&iC(a,g),c}(u,c,d=g.call(d),m)}if("function"==typeof d.then)return l(u,c,aw(d),m);if(d.$$typeof===A)return l(u,c,iY(u,d),m);ak(u,d)}return"string"==typeof d&&""!==d||"number"==typeof d||"bigint"==typeof d?(d=""+d,null!==c&&6===c.tag?(r(u,c.sibling),(m=a(c,d)).return=u):(r(u,c),(m=iu(d,u.mode,m)).return=u),s(u=m)):r(u,c)}(l,u,c,d);return ab=null,m}catch(e){if(e===au||e===ad)throw e;var g=ir(29,e,null,l.mode);return g.lanes=d,g.return=l,g}finally{}}}var aE=aC(!0),a_=aC(!1),aT=!1;function aP(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function aI(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function aA(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function aO(e,t,r){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!=(2&ls)){var a=i.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),i.pending=t,t=r9(e),r7(e,null,r),t}return r6(e,i,t,r),r9(e)}function aM(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194048&r))){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,eL(e,r)}}function aF(e,t){var r=e.updateQueue,i=e.alternate;if(null!==i&&r===(i=i.updateQueue)){var a=null,n=null;if(null!==(r=r.firstBaseUpdate)){do{var o={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};null===n?a=n=o:n=n.next=o,r=r.next}while(null!==r)null===n?a=n=t:n=n.next=t}else a=n=t;r={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:n,shared:i.shared,callbacks:i.callbacks},e.updateQueue=r;return}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var aR=!1;function aD(){if(aR){var e=ar;if(null!==e)throw e}}function aj(e,t,r,i){aR=!1;var a=e.updateQueue;aT=!1;var n=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?n=u:o.next=u,o=l;var c=e.alternate;null!==c&&(s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l)}if(null!==n){var d=a.baseState;for(o=0,c=u=l=null,s=n;;){var p=-0x20000001&s.lane,f=p!==s.lane;if(f?(lc&p)===p:(i&p)===p){0!==p&&p===at&&(aR=!0),null!==c&&(c=c.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var h=e,m=s;switch(p=t,m.tag){case 1:if("function"==typeof(h=m.payload)){d=h.call(r,d,p);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null==(p="function"==typeof(h=m.payload)?h.call(r,d,p):h))break e;d=S({},d,p);break e;case 2:aT=!0}}null!==(p=s.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=a.callbacks)?a.callbacks=[p]:f.push(p))}else f={lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=f,l=d):c=c.next=f,o|=p;if(null===(s=s.next))if(null===(s=a.shared.pending))break;else s=(f=s).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}null===c&&(l=d),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=c,null===n&&(a.shared.lanes=0),ly|=o,e.lanes=o,e.memoizedState=d}}function aL(e,t){if("function"!=typeof e)throw Error(o(191,e));e.call(t)}function aB(e,t){var r=e.callbacks;if(null!==r)for(e.callbacks=null,e=0;e<r.length;e++)aL(r[e],t)}var aN=K(null),a$=K(0);function az(e,t){X(a$,e=lg),X(aN,t),lg=e|t.baseLanes}function aU(){X(a$,lg),X(aN,aN.current)}function aV(){lg=a$.current,Q(aN),Q(a$)}var aH=K(null),aW=null;function aq(e){var t=e.alternate;X(aX,1&aX.current),X(aH,e),null===aW&&(null===t||null!==aN.current?aW=e:null!==t.memoizedState&&(aW=e))}function aG(e){X(aX,aX.current),X(aH,e),null===aW&&(aW=e)}function aZ(e){22===e.tag?(X(aX,aX.current),X(aH,e),null===aW&&(aW=e)):aK()}function aK(){X(aX,aX.current),X(aH,aH.current)}function aQ(e){Q(aH),aW===e&&(aW=null),Q(aX)}var aX=K(0);function aJ(e,t){X(aH,aH.current),X(aX,t)}function aY(e){Q(aX),Q(aH),aW===e&&(aW=null)}function a0(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||cP(r)||cI(r)))return t}else if(19===t.tag&&"independent"!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var a1=0,a2=null,a4=null,a3=null,a6=!1,a8=!1,a5=!1,a7=0,a9=0,ne=null,nt=0;function nr(){throw Error(o(321))}function ni(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!rC(e[r],t[r]))return!1;return!0}function na(e,t,r,i,a,n){return a1=n,a2=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,H.H=null===e||null===e.memoizedState?oc:od,a5=!1,n=r(i,a),a5=!1,a8&&(n=no(t,r,i,a)),nn(e),n}function nn(e){H.H=ou;var t=null!==a4&&null!==a4.next;if(a1=0,a3=a4=a2=null,a6=!1,a9=0,ne=null,t)throw Error(o(300));null===e||oT||null!==(e=e.dependencies)&&iQ(e)&&(oT=!0)}function no(e,t,r,i){a2=e;var a=0;do{if(a8&&(ne=null),a9=0,a8=!1,25<=a)throw Error(o(301));if(a+=1,a3=a4=null,null!=e.updateQueue){var n=e.updateQueue;n.lastEffect=null,n.events=null,n.stores=null,null!=n.memoCache&&(n.memoCache.index=0)}H.H=op,n=t(r,i)}while(a8)return n}function ns(){var e=H.H,t=e.useState()[0];return t="function"==typeof t.then?nh(t):t,e=e.useState()[0],(null!==a4?a4.memoizedState:null)!==e&&(a2.flags|=1024),t}function nl(){var e=0!==a7;return a7=0,e}function nu(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function nc(e){if(a6){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}a6=!1}a1=0,a3=a4=a2=null,a8=!1,a9=a7=0,ne=null}function nd(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===a3?a2.memoizedState=a3=e:a3=a3.next=e,a3}function np(){if(null===a4){var e=a2.alternate;e=null!==e?e.memoizedState:null}else e=a4.next;var t=null===a3?a2.memoizedState:a3.next;if(null!==t)a3=t,a4=e;else{if(null===e){if(null===a2.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(a4=e).memoizedState,baseState:a4.baseState,baseQueue:a4.baseQueue,queue:a4.queue,next:null},null===a3?a2.memoizedState=a3=e:a3=a3.next=e}return a3}function nf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nh(e){var t=a9;return a9+=1,null===ne&&(ne=[]),e=ah(ne,e,t),t=a2,null===(null===a3?t.memoizedState:a3.next)&&(H.H=null===(t=t.alternate)||null===t.memoizedState?oc:od),e}function nm(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return nh(e);if(e.$$typeof===A)return iJ(e)}throw Error(o(438,String(e)))}function ng(e){var t=null,r=a2.updateQueue;if(null!==r&&(t=r.memoCache),null==t){var i=a2.alternate;null!==i&&null!==(i=i.updateQueue)&&null!=(i=i.memoCache)&&(t={data:i.data.map(function(e){return e.slice()}),index:0})}if(null==t&&(t={data:[],index:0}),null===r&&(r=nf(),a2.updateQueue=r),r.memoCache=t,void 0===(r=t.data[t.index]))for(r=t.data[t.index]=Array(e),i=0;i<e;i++)r[i]=B;return t.index++,r}function nv(e,t){return"function"==typeof t?t(e):t}function ny(e){return nb(np(),a4,e)}function nb(e,t,r){var i=e.queue;if(null===i)throw Error(o(311));i.lastRenderedReducer=r;var a=e.baseQueue,n=i.pending;if(null!==n){if(null!==a){var s=a.next;a.next=n.next,n.next=s}t.baseQueue=a=n,i.pending=null}if(n=e.baseState,null===a)e.memoizedState=n;else{t=a.next;var l=s=null,u=null,c=t,d=!1;do{var p=-0x20000001&c.lane;if(p!==c.lane?(lc&p)===p:(a1&p)===p){var f=c.revertLane;if(0===f)null!==u&&(u=u.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),p===at&&(d=!0);else if((a1&f)===f){c=c.next,f===at&&(d=!0);continue}else p={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=p,s=n):u=u.next=p,a2.lanes|=f,ly|=f;p=c.action,a5&&r(n,p),n=c.hasEagerState?c.eagerState:r(n,p)}else f={lane:p,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=f,s=n):u=u.next=f,a2.lanes|=p,ly|=p;c=c.next}while(null!==c&&c!==t)if(null===u?s=n:u.next=l,!rC(n,e.memoizedState)&&(oT=!0,d&&null!==(r=ar)))throw r;e.memoizedState=n,e.baseState=s,e.baseQueue=u,i.lastRenderedState=n}return null===a&&(i.lanes=0),[e.memoizedState,i.dispatch]}function nx(e){var t=np(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var i=r.dispatch,a=r.pending,n=t.memoizedState;if(null!==a){r.pending=null;var s=a=a.next;do n=e(n,s.action),s=s.next;while(s!==a)rC(n,t.memoizedState)||(oT=!0),t.memoizedState=n,null===t.baseQueue&&(t.baseState=n),r.lastRenderedState=n}return[n,i]}function nw(e,t,r){var i=a2,a=np(),n=iO;if(n){if(void 0===r)throw Error(o(407));r=r()}else r=t();var s=!rC((a4||a).memoizedState,r);if(s&&(a.memoizedState=r,oT=!0),a=a.queue,nq(nC.bind(null,i,a,e),[e]),a.getSnapshot!==t||s||null!==a3&&1&a3.memoizedState.tag){if(i.flags|=2048,nz(9,{destroy:void 0},nk.bind(null,i,a,r,t),null),null===ll)throw Error(o(349));n||0!=(127&a1)||nS(i,t,r)}return r}function nS(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=a2.updateQueue)?(t=nf(),a2.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function nk(e,t,r,i){t.value=r,t.getSnapshot=i,nE(t)&&n_(e)}function nC(e,t,r){return r(function(){nE(t)&&n_(e)})}function nE(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!rC(e,r)}catch(e){return!0}}function n_(e){var t=r5(e,2);null!==t&&lq(t,e,2)}function nT(e){var t=nd();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nv,lastRenderedState:e},t}function nP(e,t,r,i){return e.baseState=r,nb(e,a4,"function"==typeof i?i:nv)}function nI(e,t,r,i,a){if(oo(e))throw Error(o(485));if(null!==(e=t.action)){var n={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){n.listeners.push(e)}};null!==H.T?r(!0):n.isTransition=!1,i(n),null===(r=t.pending)?(n.next=t.pending=n,nA(t,n)):(n.next=r.next,t.pending=r.next=n)}}function nA(e,t){var r=t.action,i=t.payload,a=e.state;if(t.isTransition){var n=H.T,o={};o.types=null!==n?n.types:null,H.T=o;try{var s=r(a,i),l=H.S;null!==l&&l(o,s),nO(e,t,s)}catch(r){nF(e,t,r)}finally{null!==n&&null!==o.types&&(n.types=o.types),H.T=n}}else try{n=r(a,i),nO(e,t,n)}catch(r){nF(e,t,r)}}function nO(e,t,r){null!==r&&"object"==typeof r&&"function"==typeof r.then?r.then(function(r){nM(e,t,r)},function(r){return nF(e,t,r)}):nM(e,t,r)}function nM(e,t,r){t.status="fulfilled",t.value=r,nR(t),e.state=r,null!==(t=e.pending)&&((r=t.next)===t?e.pending=null:(r=r.next,t.next=r,nA(e,r)))}function nF(e,t,r){var i=e.pending;if(e.pending=null,null!==i){i=i.next;do t.status="rejected",t.reason=r,nR(t),t=t.next;while(t!==i)}e.action=null}function nR(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function nD(e,t){return t}function nj(e,t){if(iO){var r=ll.formState;if(null!==r){e:{var i=a2;if(iO){if(iA){t:{for(var a=iA,n=iF;8!==a.nodeType;)if(!n||null===(a=cA(a.nextSibling))){a=null;break t}a="F!"===(n=a.data)||"F"===n?a:null}if(a){iA=cA(a.nextSibling),i="F!"===a.data;break e}}iD(i)}i=!1}i&&(t=r[0])}}return(r=nd()).memoizedState=r.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nD,lastRenderedState:t},r.queue=i,r=oi.bind(null,a2,i),i.dispatch=r,i=nT(!1),n=on.bind(null,a2,!1,i.queue),i=nd(),a={state:t,dispatch:null,action:e,pending:null},i.queue=a,r=nI.bind(null,a2,a,n,r),a.dispatch=r,i.memoizedState=e,[t,r,!1]}function nL(e){return nB(np(),a4,e)}function nB(e,t,r){if(t=nb(e,t,nD)[0],e=ny(nv)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var i=nh(t)}catch(e){if(e===au)throw ad;throw e}else i=t;var a=(t=np()).queue,n=a.dispatch;return r!==t.memoizedState&&(a2.flags|=2048,nz(9,{destroy:void 0},nN.bind(null,a,r),null)),[i,n,e]}function nN(e,t){e.action=t}function n$(e){var t=np(),r=a4;if(null!==r)return nB(t,r,e);np(),t=t.memoizedState;var i=(r=np()).queue.dispatch;return r.memoizedState=e,[t,i,!1]}function nz(e,t,r,i){return e={tag:e,create:r,deps:i,inst:t,next:null},null===(t=a2.updateQueue)&&(t=nf(),a2.updateQueue=t),null===(r=t.lastEffect)?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e),e}function nU(){return np().memoizedState}function nV(e,t,r,i){var a=nd();a2.flags|=e,a.memoizedState=nz(1|t,{destroy:void 0},r,void 0===i?null:i)}function nH(e,t,r,i){var a=np();i=void 0===i?null:i;var n=a.memoizedState.inst;null!==a4&&null!==i&&ni(i,a4.memoizedState.deps)?a.memoizedState=nz(t,n,r,i):(a2.flags|=e,a.memoizedState=nz(1|t,n,r,i))}function nW(e,t){nV(8390656,8,e,t)}function nq(e,t){nH(2048,8,e,t)}function nG(e){var t=np().memoizedState,r={ref:t,nextImpl:e};a2.flags|=4;var i=a2.updateQueue;if(null===i)i=nf(),a2.updateQueue=i,i.events=[r];else{var a=i.events;null===a?i.events=[r]:a.push(r)}return function(){if(0!=(2&ls))throw Error(o(440));return t.impl.apply(void 0,arguments)}}function nZ(e,t){return nH(4,2,e,t)}function nK(e,t){return nH(4,4,e,t)}function nQ(e,t){if("function"==typeof t){var r=t(e=e());return function(){"function"==typeof r?r():t(null)}}if(null!=t)return t.current=e=e(),function(){t.current=null}}function nX(e,t,r){r=null!=r?r.concat([e]):null,nH(4,4,nQ.bind(null,t,e),r)}function nJ(){}function nY(e,t){var r=np();t=void 0===t?null:t;var i=r.memoizedState;return null!==t&&ni(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function n0(e,t){var r=np();t=void 0===t?null:t;var i=r.memoizedState;return null!==t&&ni(t,i[1])?i[0]:(r.memoizedState=[i=e(),t],i)}function n1(e,t,r){return void 0===r||0!=(0x40000000&a1)&&0==(261930&lc)?e.memoizedState=t:(e.memoizedState=r,e=lH(),a2.lanes|=e,ly|=e,r)}function n2(e,t,r,i){return rC(r,t)?r:null!==aN.current?(rC(e=n1(e,r,i),t)||(oT=!0),e):0==(42&a1)||0!=(0x40000000&a1)&&0==(261930&lc)?(oT=!0,e.memoizedState=r):(e=lH(),a2.lanes|=e,ly|=e,t)}function n4(e,t,r,i,a){var n=W.p;W.p=0!==n&&8>n?n:8;var o=H.T,s={};s.types=null!==o?o.types:null,H.T=s,on(e,!1,t,r);try{var l=a(),u=H.S;if(null!==u&&u(s,l),null!==l&&"object"==typeof l&&"function"==typeof l.then){var c,d,p=(c=[],d={status:"pending",value:null,reason:null,then:function(e){c.push(e)}},l.then(function(){d.status="fulfilled",d.value=i;for(var e=0;e<c.length;e++)(0,c[e])(i)},function(e){for(d.status="rejected",d.reason=e,e=0;e<c.length;e++)(0,c[e])(void 0)}),d);oa(e,t,p,lV(e))}else oa(e,t,i,lV(e))}catch(r){oa(e,t,{then:function(){},status:"rejected",reason:r},lV())}finally{W.p=n,null!==o&&null!==s.types&&(o.types=s.types),H.T=o}}function n3(){}function n6(e,t,r,i){if(5!==e.tag)throw Error(o(476));var a=n8(e).queue;n4(e,a,t,q,null===r?n3:function(){return n5(e),r(i)})}function n8(e){var t=e.memoizedState;if(null!==t)return t;var r={};return(t={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nv,lastRenderedState:q},next:null}).next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nv,lastRenderedState:r},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function n5(e){var t=n8(e);null===t.next&&(t=e.alternate.memoizedState),oa(e,t.next.queue,{},lV())}function n7(){return iJ(dr)}function n9(){return np().memoizedState}function oe(){return np().memoizedState}function ot(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var r=lV(),i=aO(t,e=aA(r),r);null!==i&&(lq(i,t,r),aM(i,t,r)),t={cache:i6()},e.payload=t;return}t=t.return}}function or(e,t,r){var i=lV();r={lane:i,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},oo(e)?os(t,r):null!==(r=r8(e,t,r,i))&&(lq(r,e,i),ol(r,t,i))}function oi(e,t,r){oa(e,t,r,lV())}function oa(e,t,r,i){var a={lane:i,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(oo(e))os(t,a);else{var n=e.alternate;if(0===e.lanes&&(null===n||0===n.lanes)&&null!==(n=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=n(o,r);if(a.hasEagerState=!0,a.eagerState=s,rC(s,o))return r6(e,t,a,0),null===ll&&r3(),!1}catch(e){}finally{}if(null!==(r=r8(e,t,a,i)))return lq(r,e,i),ol(r,t,i),!0}return!1}function on(e,t,r,i){if(i={lane:2,revertLane:uI(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},oo(e)){if(t)throw Error(o(479))}else null!==(t=r8(e,r,i,2))&&lq(t,e,2)}function oo(e){var t=e.alternate;return e===a2||null!==t&&t===a2}function os(e,t){a8=a6=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ol(e,t,r){if(0!=(4194048&r)){var i=t.lanes;i&=e.pendingLanes,t.lanes=r|=i,eL(e,r)}}var ou={readContext:iJ,use:nm,useCallback:nr,useContext:nr,useEffect:nr,useImperativeHandle:nr,useLayoutEffect:nr,useInsertionEffect:nr,useMemo:nr,useReducer:nr,useRef:nr,useState:nr,useDebugValue:nr,useDeferredValue:nr,useTransition:nr,useSyncExternalStore:nr,useId:nr,useHostTransitionStatus:nr,useFormState:nr,useActionState:nr,useOptimistic:nr,useMemoCache:nr,useCacheRefresh:nr};ou.useEffectEvent=nr;var oc={readContext:iJ,use:nm,useCallback:function(e,t){return nd().memoizedState=[e,void 0===t?null:t],e},useContext:iJ,useEffect:nW,useImperativeHandle:function(e,t,r){r=null!=r?r.concat([e]):null,nV(4194308,4,nQ.bind(null,t,e),r)},useLayoutEffect:function(e,t){return nV(4194308,4,e,t)},useInsertionEffect:function(e,t){nV(4,2,e,t)},useMemo:function(e,t){var r=nd();t=void 0===t?null:t;var i=e();return r.memoizedState=[i,t],i},useReducer:function(e,t,r){var i=nd();if(void 0!==r)var a=r(t);else a=t;return i.memoizedState=i.baseState=a,i.queue=e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},e=e.dispatch=or.bind(null,a2,e),[i.memoizedState,e]},useRef:function(e){return nd().memoizedState={current:e}},useState:function(e){var t=(e=nT(e)).queue,r=oi.bind(null,a2,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:nJ,useDeferredValue:function(e,t){return n1(nd(),e,t)},useTransition:function(){var e=nT(!1);return e=n4.bind(null,a2,e.queue,!0,!1),nd().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var i=a2,a=nd();if(iO){if(void 0===r)throw Error(o(407));r=r()}else{if(r=t(),null===ll)throw Error(o(349));0!=(127&lc)||nS(i,t,r)}a.memoizedState=r;var n={value:r,getSnapshot:t};return a.queue=n,nW(nC.bind(null,i,n,e),[e]),i.flags|=2048,nz(9,{destroy:void 0},nk.bind(null,i,n,r,t),null),r},useId:function(){var e=nd(),t=ll.identifierPrefix;if(iO){var r=ik,i=iS;t="_"+t+"R_"+(r=(i&~(1<<32-eC(i)-1)).toString(32)+r),0<(r=a7++)&&(t+="H"+r.toString(32)),t+="_"}else t="_"+t+"r_"+(r=nt++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:n7,useFormState:nj,useActionState:nj,useOptimistic:function(e){var t=nd();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=on.bind(null,a2,!0,r),r.dispatch=t,[e,t]},useMemoCache:ng,useCacheRefresh:function(){return nd().memoizedState=ot.bind(null,a2)},useEffectEvent:function(e){var t=nd(),r={impl:e};return t.memoizedState=r,function(){if(0!=(2&ls))throw Error(o(440));return r.impl.apply(void 0,arguments)}}},od={readContext:iJ,use:nm,useCallback:nY,useContext:iJ,useEffect:nq,useImperativeHandle:nX,useInsertionEffect:nZ,useLayoutEffect:nK,useMemo:n0,useReducer:ny,useRef:nU,useState:function(){return ny(nv)},useDebugValue:nJ,useDeferredValue:function(e,t){return n2(np(),a4.memoizedState,e,t)},useTransition:function(){var e=ny(nv)[0],t=np().memoizedState;return["boolean"==typeof e?e:nh(e),t]},useSyncExternalStore:nw,useId:n9,useHostTransitionStatus:n7,useFormState:nL,useActionState:nL,useOptimistic:function(e,t){return nP(np(),a4,e,t)},useMemoCache:ng,useCacheRefresh:oe};od.useEffectEvent=nG;var op={readContext:iJ,use:nm,useCallback:nY,useContext:iJ,useEffect:nq,useImperativeHandle:nX,useInsertionEffect:nZ,useLayoutEffect:nK,useMemo:n0,useReducer:nx,useRef:nU,useState:function(){return nx(nv)},useDebugValue:nJ,useDeferredValue:function(e,t){var r=np();return null===a4?n1(r,e,t):n2(r,a4.memoizedState,e,t)},useTransition:function(){var e=nx(nv)[0],t=np().memoizedState;return["boolean"==typeof e?e:nh(e),t]},useSyncExternalStore:nw,useId:n9,useHostTransitionStatus:n7,useFormState:n$,useActionState:n$,useOptimistic:function(e,t){var r=np();return null!==a4?nP(r,a4,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:ng,useCacheRefresh:oe};function of(e,t,r,i){r=null==(r=r(i,t=e.memoizedState))?t:S({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}op.useEffectEvent=nG;var oh={enqueueSetState:function(e,t,r){e=e._reactInternals;var i=lV(),a=aA(i);a.payload=t,null!=r&&(a.callback=r),null!==(t=aO(e,a,i))&&(lq(t,e,i),aM(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=lV(),a=aA(i);a.tag=1,a.payload=t,null!=r&&(a.callback=r),null!==(t=aO(e,a,i))&&(lq(t,e,i),aM(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=lV(),i=aA(r);i.tag=2,null!=t&&(i.callback=t),null!==(t=aO(e,i,r))&&(lq(t,e,r),aM(t,e,r))}};function om(e,t,r,i,a,n,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,n,o):!t.prototype||!t.prototype.isPureReactComponent||!rE(r,i)||!rE(a,n)}function og(e,t,r,i){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,i),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&oh.enqueueReplaceState(t,t.state,null)}function ov(e,t){var r=t;if("ref"in t)for(var i in r={},t)"ref"!==i&&(r[i]=t[i]);if(e=e.defaultProps)for(var a in r===t&&(r=S({},r)),e)void 0===r[a]&&(r[a]=e[a]);return r}function oy(e){r0(e)}function ob(e){console.error(e)}function ox(e){r0(e)}function ow(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function oS(e,t,r){try{(0,e.onCaughtError)(r.value,{componentStack:r.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function ok(e,t,r){return(r=aA(r)).tag=3,r.payload={element:null},r.callback=function(){ow(e,t)},r}function oC(e){return(e=aA(e)).tag=3,e}function oE(e,t,r,i){var a=r.type.getDerivedStateFromError;if("function"==typeof a){var n=i.value;e.payload=function(){return a(n)},e.callback=function(){oS(t,r,i)}}var o=r.stateNode;null!==o&&"function"==typeof o.componentDidCatch&&(e.callback=function(){oS(t,r,i),"function"!=typeof a&&(null===lA?lA=new Set([this]):lA.add(this));var e=i.stack;this.componentDidCatch(i.value,{componentStack:null!==e?e:""})})}var o_=Error(o(461)),oT=!1;function oP(e,t,r,i){t.child=null===e?a_(t,null,r,i):aE(t,e.child,r,i)}function oI(e,t,r,i,a){r=r.render;var n=t.ref;if("ref"in i){var o={};for(var s in i)"ref"!==s&&(o[s]=i[s])}else o=i;return(iX(t),i=na(e,t,r,o,n,a),s=nl(),null===e||oT)?(iO&&s&&i_(t),t.flags|=1,oP(e,t,i,a),t.child):(nu(e,t,a),o0(e,t,a))}function oA(e,t,r,i,a){if(null===e){var n=r.type;return"function"!=typeof n||ii(n)||void 0!==n.defaultProps||null!==r.compare?((e=is(r.type,null,i,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=n,oO(e,t,n,i,a))}if(n=e.child,!o1(e,a)){var o=n.memoizedProps;if((r=null!==(r=r.compare)?r:rE)(o,i)&&e.ref===t.ref)return o0(e,t,a)}return t.flags|=1,(e=ia(n,i)).ref=t.ref,e.return=t,t.child=e}function oO(e,t,r,i,a){if(null!==e){var n=e.memoizedProps;if(rE(n,i)&&e.ref===t.ref)if(oT=!1,t.pendingProps=i=n,!o1(e,a))return t.lanes=e.lanes,o0(e,t,a);else 0!=(131072&e.flags)&&(oT=!0)}return oB(e,t,r,i,a)}function oM(e,t,r,i){var a=i.children,n=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===i.mode){if(0!=(128&t.flags)){if(n=null!==n?n.baseLanes|r:r,null!==e){for(a=0,i=t.child=e.child;null!==i;)a=a|i.lanes|i.childLanes,i=i.sibling;i=a&~n}else i=0,t.child=null;return oR(e,t,n,r,i)}if(0==(0x20000000&r))return i=t.lanes=0x20000000,oR(e,t,null!==n?n.baseLanes|r:r,r,i);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&as(t,null!==n?n.cachePool:null),null!==n?az(t,n):aU(),aZ(t)}else null!==n?(as(t,n.cachePool),az(t,n),aK(),t.memoizedState=null):(null!==e&&as(t,null),aU(),aK());return oP(e,t,a,r),t.child}function oF(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function oR(e,t,r,i,a){var n=ao();return t.memoizedState={baseLanes:r,cachePool:n=null===n?null:{parent:i3._currentValue,pool:n}},null!==e&&as(t,null),aU(),aZ(t),null!==e&&iK(e,t,i,!0),t.childLanes=a,null}function oD(e,t){return(t=oG({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function oj(e,t,r){return aE(t,e.child,null,r),e=oD(t,t.pendingProps),e.flags|=2,aQ(t),t.memoizedState=null,e}function oL(e,t){var r=t.ref;if(null===r)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof r&&"object"!=typeof r)throw Error(o(284));(null===e||e.ref!==r)&&(t.flags|=4194816)}}function oB(e,t,r,i,a){return(iX(t),r=na(e,t,r,i,void 0,a),i=nl(),null===e||oT)?(iO&&i&&i_(t),t.flags|=1,oP(e,t,r,a),t.child):(nu(e,t,a),o0(e,t,a))}function oN(e,t,r,i,a,n){return(iX(t),t.updateQueue=null,r=no(t,i,r,a),nn(e),i=nl(),null===e||oT)?(iO&&i&&i_(t),t.flags|=1,oP(e,t,r,n),t.child):(nu(e,t,n),o0(e,t,n))}function o$(e,t,r,i,a){if(iX(t),null===t.stateNode){var n=ie,o=r.contextType;"object"==typeof o&&null!==o&&(n=iJ(o)),t.memoizedState=null!==(n=new r(i,n)).state&&void 0!==n.state?n.state:null,n.updater=oh,t.stateNode=n,n._reactInternals=t,(n=t.stateNode).props=i,n.state=t.memoizedState,n.refs={},aP(t),o=r.contextType,n.context="object"==typeof o&&null!==o?iJ(o):ie,n.state=t.memoizedState,"function"==typeof(o=r.getDerivedStateFromProps)&&(of(t,r,o,i),n.state=t.memoizedState),"function"==typeof r.getDerivedStateFromProps||"function"==typeof n.getSnapshotBeforeUpdate||"function"!=typeof n.UNSAFE_componentWillMount&&"function"!=typeof n.componentWillMount||(o=n.state,"function"==typeof n.componentWillMount&&n.componentWillMount(),"function"==typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),o!==n.state&&oh.enqueueReplaceState(n,n.state,null),aj(t,i,n,a),aD(),n.state=t.memoizedState),"function"==typeof n.componentDidMount&&(t.flags|=4194308),i=!0}else if(null===e){n=t.stateNode;var s=t.memoizedProps,l=ov(r,s);n.props=l;var u=n.context,c=r.contextType;o=ie,"object"==typeof c&&null!==c&&(o=iJ(c));var d=r.getDerivedStateFromProps;c="function"==typeof d||"function"==typeof n.getSnapshotBeforeUpdate,s=t.pendingProps!==s,c||"function"!=typeof n.UNSAFE_componentWillReceiveProps&&"function"!=typeof n.componentWillReceiveProps||(s||u!==o)&&og(t,n,i,o),aT=!1;var p=t.memoizedState;n.state=p,aj(t,i,n,a),aD(),u=t.memoizedState,s||p!==u||aT?("function"==typeof d&&(of(t,r,d,i),u=t.memoizedState),(l=aT||om(t,r,l,i,p,u,o))?(c||"function"!=typeof n.UNSAFE_componentWillMount&&"function"!=typeof n.componentWillMount||("function"==typeof n.componentWillMount&&n.componentWillMount(),"function"==typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount()),"function"==typeof n.componentDidMount&&(t.flags|=4194308)):("function"==typeof n.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=u),n.props=i,n.state=u,n.context=o,i=l):("function"==typeof n.componentDidMount&&(t.flags|=4194308),i=!1)}else{n=t.stateNode,aI(e,t),c=ov(r,o=t.memoizedProps),n.props=c,d=t.pendingProps,p=n.context,u=r.contextType,l=ie,"object"==typeof u&&null!==u&&(l=iJ(u)),(u="function"==typeof(s=r.getDerivedStateFromProps)||"function"==typeof n.getSnapshotBeforeUpdate)||"function"!=typeof n.UNSAFE_componentWillReceiveProps&&"function"!=typeof n.componentWillReceiveProps||(o!==d||p!==l)&&og(t,n,i,l),aT=!1,p=t.memoizedState,n.state=p,aj(t,i,n,a),aD();var f=t.memoizedState;o!==d||p!==f||aT||null!==e&&null!==e.dependencies&&iQ(e.dependencies)?("function"==typeof s&&(of(t,r,s,i),f=t.memoizedState),(c=aT||om(t,r,c,i,p,f,l)||null!==e&&null!==e.dependencies&&iQ(e.dependencies))?(u||"function"!=typeof n.UNSAFE_componentWillUpdate&&"function"!=typeof n.componentWillUpdate||("function"==typeof n.componentWillUpdate&&n.componentWillUpdate(i,f,l),"function"==typeof n.UNSAFE_componentWillUpdate&&n.UNSAFE_componentWillUpdate(i,f,l)),"function"==typeof n.componentDidUpdate&&(t.flags|=4),"function"==typeof n.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof n.componentDidUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof n.getSnapshotBeforeUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),n.props=i,n.state=f,n.context=l,i=c):("function"!=typeof n.componentDidUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof n.getSnapshotBeforeUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),i=!1)}return n=i,oL(e,t),i=0!=(128&t.flags),n||i?(n=t.stateNode,r=i&&"function"!=typeof r.getDerivedStateFromError?null:n.render(),t.flags|=1,null!==e&&i?(t.child=aE(t,e.child,null,a),t.child=aE(t,null,r,a)):oP(e,t,r,a),t.memoizedState=n.state,e=t.child):e=o0(e,t,a),e}function oz(e,t,r,i){return iN(),t.flags|=256,oP(e,t,r,i),t.child}var oU={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function oV(e){return{baseLanes:e,cachePool:al()}}function oH(e,t,r){return e=null!==e?e.childLanes&~r:0,t&&(e|=lw),e}function oW(e,t,r){var i,a=t.pendingProps,n=!1,s=0!=(128&t.flags);if((i=s)||(i=(null===e||null!==e.memoizedState)&&0!=(2&aX.current)),i&&(n=!0,t.flags&=-129),i=0!=(32&t.flags),t.flags&=-33,null===e){if(iO){if(n?aq(t):aK(),(e=iA)?null!==(e=null!==(e=cT(e,iF))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==iw?{id:iS,overflow:ik}:null,retryLane:0x20000000,hydrationErrors:null},(r=ic(e)).return=t,t.child=r,iI=t,iA=null):e=null,null===e)throw iD(t);return cI(e)?t.lanes=32:t.lanes=0x20000000,null}var l=a.children;return(a=a.fallback,n)?(aK(),l=oG({mode:"hidden",children:l},n=t.mode),a=il(a,n,r,null),l.return=t,a.return=t,l.sibling=a,t.child=l,(a=t.child).memoizedState=oV(r),a.childLanes=oH(e,i,r),t.memoizedState=oU,oF(null,a)):(aq(t),oq(t,l))}var u=e.memoizedState;if(null!==u&&null!==(l=u.dehydrated)){if(s)256&t.flags?(aq(t),t.flags&=-257,t=oZ(e,t,r)):null!==t.memoizedState?(aK(),t.child=e.child,t.flags|=128,t=null):(aK(),l=a.fallback,n=t.mode,a=oG({mode:"visible",children:a.children},n),l=il(l,n,r,null),l.flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,aE(t,e.child,null,r),(a=t.child).memoizedState=oV(r),a.childLanes=oH(e,i,r),t.memoizedState=oU,t=oF(null,a));else if(aq(t),cI(l)){if(i=l.nextSibling&&l.nextSibling.dataset)var c=i.dgst;i=c,(a=Error(o(419))).stack="",a.digest=i,iz({value:a,source:null,stack:null}),t=oZ(e,t,r)}else if(oT||iK(e,t,r,!1),i=0!=(r&e.childLanes),oT||i){if(null!==(i=ll)&&0!==(a=eB(i,r))&&a!==u.retryLane)throw u.retryLane=a,r5(e,a),lq(i,e,a),o_;cP(l)||l4(),t=oZ(e,t,r)}else cP(l)?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,iA=cA(l.nextSibling),iI=t,iO=!0,iM=null,iF=!1,null!==e&&iP(t,e),t=oq(t,a.children),t.flags|=4096);return t}return n?(aK(),l=a.fallback,n=t.mode,c=(u=e.child).sibling,(a=ia(u,{mode:"hidden",children:a.children})).subtreeFlags=0x7e00000&u.subtreeFlags,null!==c?l=ia(c,l):(l=il(l,n,r,null),l.flags|=2),l.return=t,a.return=t,a.sibling=l,t.child=a,oF(null,a),a=t.child,null===(l=e.child.memoizedState)?l=oV(r):(null!==(n=l.cachePool)?(u=i3._currentValue,n=n.parent!==u?{parent:u,pool:u}:n):n=al(),l={baseLanes:l.baseLanes|r,cachePool:n}),a.memoizedState=l,a.childLanes=oH(e,i,r),t.memoizedState=oU,oF(e.child,a)):(aq(t),e=(r=e.child).sibling,(r=ia(r,{mode:"visible",children:a.children})).return=t,r.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=r,t.memoizedState=null,r)}function oq(e,t){return(t=oG({mode:"visible",children:t},e.mode)).return=e,e.child=t}function oG(e,t){return(e=ir(22,e,null,t)).lanes=0,e}function oZ(e,t,r){return aE(t,e.child,null,r),e=oq(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function oK(e,t,r){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),iG(e.return,t,r)}function oQ(e){for(var t=null;null!==e;){var r=e.alternate;null!==r&&null===a0(r)&&(t=e),e=e.sibling}return t}function oX(e,t,r,i,a,n){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:a,treeForkCount:n}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=r,o.tailMode=a,o.treeForkCount=n)}function oJ(e){var t=e.child;for(e.child=null;null!==t;){var r=t.sibling;t.sibling=e.child,e.child=t,t=r}}function oY(e,t,r){var i=t.pendingProps,a=i.revealOrder,n=i.tail;i=i.children;var o=aX.current;if(128&t.flags)return aJ(t,o),null;var s=0!=(2&o);if(s?(o=1&o|2,t.flags|=128):o&=1,aJ(t,o),"backwards"===a&&null!==e?(oJ(e),oP(e,t,i,r),oJ(e)):oP(e,t,i,r),i=iO?iy:0,!s&&null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&oK(e,r,t);else if(19===e.tag)oK(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(a){case"backwards":null===(r=oQ(t.child))?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null,oJ(t)),oX(t,!0,a,null,n,i);break;case"unstable_legacy-backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===a0(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}oX(t,!0,r,null,n,i);break;case"together":oX(t,!1,null,null,void 0,i);break;case"independent":t.memoizedState=null;break;default:null===(r=oQ(t.child))?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),oX(t,!1,a,r,n,i)}return t.child}function o0(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),ly|=t.lanes,0==(r&t.childLanes)){if(null===e)return null;else if(iK(e,t,r,!1),0==(r&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(r=ia(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=ia(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function o1(e,t){return 0!=(e.lanes&t)||!!(null!==(e=e.dependencies)&&iQ(e))}function o2(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps)oT=!0;else{if(!o1(e,r)&&0==(128&t.flags))return oT=!1,function(e,t,r){switch(t.tag){case 3:er(t,t.stateNode.containerInfo),iW(t,i3,e.memoizedState.cache),iN();break;case 27:case 5:ea(t);break;case 4:er(t,t.stateNode.containerInfo);break;case 10:iW(t,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,aG(t),null;break;case 13:var i=t.memoizedState;if(null!==i){if(null!==i.dehydrated)return aq(t),t.flags|=128,null;if(0!=(r&t.child.childLanes))return oW(e,t,r);return aq(t),null!==(e=o0(e,t,r))?e.sibling:null}aq(t);break;case 19:if(128&t.flags)return oY(e,t,r);var a=0!=(128&e.flags);if((i=0!=(r&t.childLanes))||(iK(e,t,r,!1),i=0!=(r&t.childLanes)),a){if(i)return oY(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),aJ(t,aX.current),!i)return null;break;case 22:return t.lanes=0,oM(e,t,r,t.pendingProps);case 24:iW(t,i3,e.memoizedState.cache)}return o0(e,t,r)}(e,t,r);oT=0!=(131072&e.flags)}else oT=!1,iO&&0!=(1048576&t.flags)&&iE(t,iy,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=am(t.elementType),t.type=e,"function"==typeof e)ii(e)?(i=ov(e,i),t.tag=1,t=o$(null,t,e,i,r)):(t.tag=0,t=oB(null,t,e,i,r));else{if(null!=e){var a=e.$$typeof;if(a===O){t.tag=11,t=oI(null,t,e,i,r);break e}if(a===R){t.tag=14,t=oA(null,t,e,i,r);break e}}throw Error(o(306,t=function e(t){if(null==t)return null;if("function"==typeof t)return t.$$typeof===U?null:t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case _:return"Fragment";case P:return"Profiler";case T:return"StrictMode";case M:return"Suspense";case F:return"SuspenseList";case j:return"Activity";case N:return"ViewTransition"}if("object"==typeof t)switch(t.$$typeof){case E:return"Portal";case A:return t.displayName||"Context";case I:return(t._context.displayName||"Context")+".Consumer";case O:var r=t.render;return(t=t.displayName)||(t=""!==(t=r.displayName||r.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case R:return null!==(r=t.displayName||null)?r:e(t.type)||"Memo";case D:r=t._payload,t=t._init;try{return e(t(r))}catch(e){}}return null}(e)||e,""))}}return t;case 0:return oB(e,t,t.type,t.pendingProps,r);case 1:return a=ov(i=t.type,t.pendingProps),o$(e,t,i,a,r);case 3:e:{if(er(t,t.stateNode.containerInfo),null===e)throw Error(o(387));i=t.pendingProps;var n=t.memoizedState;a=n.element,aI(e,t),aj(t,i,null,r);var s=t.memoizedState;if(iW(t,i3,i=s.cache),i!==n.cache&&iZ(t,[i3],r,!0),aD(),i=s.element,n.isDehydrated)if(n={element:i,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=n,t.memoizedState=n,256&t.flags){t=oz(e,t,i,r);break e}else if(i!==a){iz(a=ih(Error(o(424)),t)),t=oz(e,t,i,r);break e}else for(iA=cA((e=9===(e=t.stateNode.containerInfo).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e).firstChild),iI=t,iO=!0,iM=null,iF=!0,r=a_(t,null,i,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling;else{if(iN(),i===a){t=o0(e,t,r);break e}oP(e,t,i,r)}t=t.child}return t;case 26:return oL(e,t),null===e?(r=cU(t.type,null,t.pendingProps,null))?t.memoizedState=r:iO||(r=t.type,e=t.pendingProps,(i=u4(ee.current).createElement(r))[eH]=t,i[eW]=e,uY(i,r,e),e4(i),t.stateNode=i):t.memoizedState=cU(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ea(t),null===e&&iO&&(i=t.stateNode=cR(t.type,t.pendingProps,ee.current),iI=t,iF=!0,a=iA,ci(t.type)?(cO=a,iA=cA(i.firstChild)):iA=a),oP(e,t,t.pendingProps.children,r),oL(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&iO&&((a=i=iA)&&(null!==(i=function(e,t,r,i){for(;1===e.nodeType;){if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(i){if(!e[eX])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence")||a!==r.rel||e.getAttribute("href")!==(null==r.href||""===r.href?null:r.href)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin)||e.getAttribute("title")!==(null==r.title?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==r.src?null:r.src)||e.getAttribute("type")!==(null==r.type?null:r.type)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==r.name?null:""+r.name;if("hidden"===r.type&&e.getAttribute("name")===a)return e}if(null===(e=cA(e.nextSibling)))break}return null}(i,t.type,t.pendingProps,iF))?(t.stateNode=i,iI=t,iA=cA(i.firstChild),iF=!1,a=!0):a=!1),a||iD(t)),ea(t),a=t.type,n=t.pendingProps,s=null!==e?e.memoizedProps:null,i=n.children,u8(a,n)?i=null:null!==s&&u8(a,s)&&(t.flags|=32),null!==t.memoizedState&&(dr._currentValue=a=na(e,t,ns,null,null,r)),oL(e,t),oP(e,t,i,r),t.child;case 6:return null===e&&iO&&((e=r=iA)&&(null!==(r=function(e,t,r){if(""===t)return null;for(;3!==e.nodeType;)if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!r||null===(e=cA(e.nextSibling)))return null;return e}(r,t.pendingProps,iF))?(t.stateNode=r,iI=t,iA=null,e=!0):e=!1),e||iD(t)),null;case 13:return oW(e,t,r);case 4:return er(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=aE(t,null,i,r):oP(e,t,i,r),t.child;case 11:return oI(e,t,t.type,t.pendingProps,r);case 7:return i=t.pendingProps,oL(e,t),oP(e,t,i,r),t.child;case 8:case 12:return oP(e,t,t.pendingProps.children,r),t.child;case 10:return i=t.pendingProps,iW(t,t.type,i.value),oP(e,t,i.children,r),t.child;case 9:return a=t.type._context,i=t.pendingProps.children,iX(t),i=i(a=iJ(a)),t.flags|=1,oP(e,t,i,r),t.child;case 14:return oA(e,t,t.type,t.pendingProps,r);case 15:return oO(e,t,t.type,t.pendingProps,r);case 19:return oY(e,t,r);case 31:var l=e,u=t,c=r,d=u.pendingProps,p=0!=(128&u.flags);if(u.flags&=-129,null===l){if(iO){if("hidden"===d.mode)return l=oD(u,d),u.lanes=0x20000000,oF(null,l);if(aG(u),(l=iA)?null!==(l=null!==(l=cT(l,iF))&&"&"===l.data?l:null)&&(u.memoizedState={dehydrated:l,treeContext:null!==iw?{id:iS,overflow:ik}:null,retryLane:0x20000000,hydrationErrors:null},(c=ic(l)).return=u,u.child=c,iI=u,iA=null):l=null,null===l)throw iD(u);return u.lanes=0x20000000,null}return oD(u,d)}var f=l.memoizedState;if(null!==f){var h=f.dehydrated;if(aG(u),p)if(256&u.flags)u.flags&=-257,u=oj(l,u,c);else if(null!==u.memoizedState)u.child=l.child,u.flags|=128,u=null;else throw Error(o(558));else if(oT||iK(l,u,c,!1),p=0!=(c&l.childLanes),oT||p){if(null!==(d=ll)&&0!==(h=eB(d,c))&&h!==f.retryLane)throw f.retryLane=h,r5(l,h),lq(d,l,h),o_;l4(),u=oj(l,u,c)}else l=f.treeContext,iA=cA(h.nextSibling),iI=u,iO=!0,iM=null,iF=!1,null!==l&&iP(u,l),u=oD(u,d),u.flags|=4096;return u}return(l=ia(l.child,{mode:d.mode,children:d.children})).ref=u.ref,u.child=l,l.return=u,l;case 22:return oM(e,t,r,t.pendingProps);case 24:return iX(t),i=iJ(i3),null===e?(null===(a=ao())&&(a=ll,n=i6(),a.pooledCache=n,n.refCount++,null!==n&&(a.pooledCacheLanes|=r),a=n),t.memoizedState={parent:i,cache:a},aP(t),iW(t,i3,a)):(0!=(e.lanes&r)&&(aI(e,t),aj(t,null,null,r),aD()),a=e.memoizedState,n=t.memoizedState,a.parent!==i?(a={parent:i,cache:i},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),iW(t,i3,i)):(iW(t,i3,i=n.cache),i!==a.cache&&iZ(t,[i3],r,!0))),oP(e,t,t.pendingProps.children,r),t.child;case 30:return null!=(i=t.pendingProps).name&&"auto"!==i.name?t.flags|=null===e?0x1202000:0x1200000:iO&&i_(t),null!==e&&e.memoizedProps.name!==i.name?t.flags|=4194816:oL(e,t),oP(e,t,i.children,r),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function o4(e){e.flags|=4}function o3(e,t,r,i,a){var n;if((n=0!=(32&e.mode))&&(n=null===r?c1(t,i):c1(t,i)&&(i.src!==r.src||i.srcSet!==r.srcSet)),n){if(e.flags|=0x1000000,(0x13ffff40&a)===a)if(e.stateNode.complete)e.flags|=8192;else if(l0())e.flags|=8192;else throw ag=ap,ac}else e.flags&=-0x1000001}function o6(e,t){if("stylesheet"!==t.type||0!=(4&t.state.loading))e.flags&=-0x1000001;else if(e.flags|=0x1000000,!c2(t))if(l0())e.flags|=8192;else throw ag=ap,ac}function o8(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?eF():0x20000000,e.lanes|=t,lS|=t)}function o5(e,t){if(!iO)switch(e.tailMode){case"visible":break;case"collapsed":for(var r=e.tail,i=null;null!==r;)null!==r.alternate&&(i=r),r=r.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null;break;default:for(r=null,t=e.tail;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null}}function o7(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,i=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,i|=0x7e00000&a.subtreeFlags,i|=0x7e00000&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function o9(e,t){switch(iT(t),t.tag){case 3:iq(i3),ei();break;case 26:case 27:case 5:en(t);break;case 4:ei();break;case 31:null!==t.memoizedState&&aQ(t);break;case 13:aQ(t);break;case 19:aY(t);break;case 10:iq(t.type);break;case 22:case 23:aQ(t),aV(),null!==e&&Q(an);break;case 24:iq(i3)}}function se(e,t){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var a=i.next;r=a;do{if((r.tag&e)===e){i=void 0;var n=r.create;r.inst.destroy=i=n()}r=r.next}while(r!==a)}}catch(e){uc(t,t.return,e)}}function st(e,t,r){try{var i=t.updateQueue,a=null!==i?i.lastEffect:null;if(null!==a){var n=a.next;i=n;do{if((i.tag&e)===e){var o=i.inst,s=o.destroy;if(void 0!==s){o.destroy=void 0,a=t;try{s()}catch(e){uc(a,r,e)}}}i=i.next}while(i!==n)}}catch(e){uc(t,t.return,e)}}function sr(e){var t=e.updateQueue;if(null!==t){var r=e.stateNode;try{aB(t,r)}catch(t){uc(e,e.return,t)}}}function si(e,t,r){r.props=ov(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(r){uc(e,t,r)}}function sa(e,t){try{var r=e.ref;if(null!==r){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:var a=e.stateNode,n=rX(e.memoizedProps,a);(null===a.ref||a.ref.name!==n)&&(a.ref=cf(n)),i=a.ref;break;case 7:null===e.stateNode&&(e.stateNode=new ch(e)),i=e.stateNode;break;default:i=e.stateNode}"function"==typeof r?e.refCleanup=r(i):r.current=i}}catch(r){uc(e,t,r)}}function sn(e,t){var r=e.ref,i=e.refCleanup;if(null!==r)if("function"==typeof i)try{i()}catch(r){uc(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof r)try{r(null)}catch(r){uc(e,t,r)}else r.current=null}function so(e){var t=e.type,r=e.memoizedProps,i=e.stateNode;try{switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&i.focus();break;case"img":r.src?i.src=r.src:r.srcSet&&(i.srcset=r.srcSet)}}catch(t){uc(e,e.return,t)}}function ss(e,t,r){try{var i=e.stateNode;(function(e,t,r,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,n=null,s=null,l=null,u=null,c=null,d=null;for(h in r){var p=r[h];if(r.hasOwnProperty(h)&&null!=p)switch(h){case"checked":case"value":break;case"defaultValue":u=p;default:i.hasOwnProperty(h)||uX(e,t,h,null,i,p)}}for(var f in i){var h=i[f];if(p=r[f],i.hasOwnProperty(f)&&(null!=h||null!=p))switch(f){case"type":h!==p&&(tt=!0),n=h;break;case"name":h!==p&&(tt=!0),a=h;break;case"checked":h!==p&&(tt=!0),c=h;break;case"defaultChecked":h!==p&&(tt=!0),d=h;break;case"value":h!==p&&(tt=!0),s=h;break;case"defaultValue":h!==p&&(tt=!0),l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(o(137,t));break;default:h!==p&&uX(e,t,f,h,i,p)}}tf(e,s,l,u,c,d,n,a);return;case"select":for(n in h=s=l=f=null,r)if(u=r[n],r.hasOwnProperty(n)&&null!=u)switch(n){case"value":break;case"multiple":h=u;default:i.hasOwnProperty(n)||uX(e,t,n,null,i,u)}for(a in i)if(n=i[a],u=r[a],i.hasOwnProperty(a)&&(null!=n||null!=u))switch(a){case"value":n!==u&&(tt=!0),f=n;break;case"defaultValue":n!==u&&(tt=!0),l=n;break;case"multiple":n!==u&&(tt=!0),s=n;default:n!==u&&uX(e,t,a,n,i,u)}t=l,r=s,i=h,null!=f?tg(e,!!r,f,!1):!!i!=!!r&&(null!=t?tg(e,!!r,t,!0):tg(e,!!r,r?[]:"",!1));return;case"textarea":for(l in h=f=null,r)if(a=r[l],r.hasOwnProperty(l)&&null!=a&&!i.hasOwnProperty(l))switch(l){case"value":case"children":break;default:uX(e,t,l,null,i,a)}for(s in i)if(a=i[s],n=r[s],i.hasOwnProperty(s)&&(null!=a||null!=n))switch(s){case"value":a!==n&&(tt=!0),f=a;break;case"defaultValue":a!==n&&(tt=!0),h=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(o(91));break;default:a!==n&&uX(e,t,s,a,i,n)}tv(e,f,h);return;case"option":for(var m in r)f=r[m],r.hasOwnProperty(m)&&null!=f&&!i.hasOwnProperty(m)&&("selected"===m?e.selected=!1:uX(e,t,m,null,i,f));for(u in i)f=i[u],h=r[u],i.hasOwnProperty(u)&&f!==h&&(null!=f||null!=h)&&("selected"===u?(f!==h&&(tt=!0),e.selected=f&&"function"!=typeof f&&"symbol"!=typeof f):uX(e,t,u,f,i,h));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in r)f=r[g],r.hasOwnProperty(g)&&null!=f&&!i.hasOwnProperty(g)&&uX(e,t,g,null,i,f);for(c in i)if(f=i[c],h=r[c],i.hasOwnProperty(c)&&f!==h&&(null!=f||null!=h))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:uX(e,t,c,f,i,h)}return;default:if(tk(t)){for(var v in r)f=r[v],r.hasOwnProperty(v)&&void 0!==f&&!i.hasOwnProperty(v)&&uJ(e,t,v,void 0,i,f);for(d in i)f=i[d],h=r[d],i.hasOwnProperty(d)&&f!==h&&(void 0!==f||void 0!==h)&&uJ(e,t,d,f,i,h);return}}for(var y in r)f=r[y],r.hasOwnProperty(y)&&null!=f&&!i.hasOwnProperty(y)&&uX(e,t,y,null,i,f);for(p in i)f=i[p],h=r[p],i.hasOwnProperty(p)&&f!==h&&(null!=f||null!=h)&&uX(e,t,p,f,i,h)})(i,e.type,r,t),i[eW]=t}catch(t){uc(e,e.return,t)}}function sl(e,t){if(5===e.tag&&null===e.alternate&&null!==t)for(var r=0;r<t.length;r++)cE(e.stateNode,t[r])}function su(e){for(var t=e.return;null!==t;){if(sd(t)){var r=e.stateNode,i=t.stateNode._eventListeners;if(null!==i)for(var a=0;a<i.length;a++){var n=i[a];r.removeEventListener(n.type,n.listener,n.optionsOrUseCapture)}}if(sc(t))break;t=t.return}}function sc(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&ci(e.type)||4===e.tag}function sd(e){return e&&7===e.tag&&null!==e.stateNode}function sp(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&ci(e.type)||2&e.flags||null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function sf(e,t,r,i){var a=e.tag;if(5===a||6===a)a=e.stateNode,t?r.insertBefore(a,t):r.appendChild(a),sl(e,i),tt=!0;else if(4!==a&&(27===a&&ci(e.type)&&(r=e.stateNode),null!==(e=e.child)))for(sf(e,t,r,i),e=e.sibling;null!==e;)sf(e,t,r,i),e=e.sibling}function sh(e){var t=e.stateNode,r=e.memoizedProps;try{for(var i=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);uY(t,i,r),t[eH]=e,t[eW]=r}catch(t){uc(e,e.return,t)}}var sm=!1,sg=null;function sv(e){(30===e.tag||0!=(0x2000000&e.subtreeFlags))&&(sm=!0)}var sy=null;function sb(){var e=sy;return sy=null,e}var sx=0;function sw(e,t,r,i,a){return sx=0,function e(t,r,i,a,n){for(var o=!1;null!==t;){if(5===t.tag){var s=t.stateNode;if(null!==a){var l=cu(s);a.push(l),l.view&&(o=!0)}else o||cu(s).view&&(o=!0);sm=!0,co(s,0===sx?r:r+"_"+sx,i),sx++}else(22!==t.tag||null===t.memoizedState)&&(30===t.tag&&n||e(t.child,r,i,a,n)&&(o=!0));t=t.sibling}return o}(e.child,t,r,i,a)}function sS(e,t){for(;null!==e;)5===e.tag?cs(e.stateNode,e.memoizedProps):(22!==e.tag||null===e.memoizedState)&&(30===e.tag&&t||sS(e.child,t)),e=e.sibling}function sk(e){if(0!=(0x1200000&e.subtreeFlags))for(e=e.child;null!==e;){if((22!==e.tag||null===e.memoizedState)&&(sk(e),30===e.tag&&0!=(0x1200000&e.flags)&&e.stateNode.paired)){var t=e.memoizedProps;if(null==t.name||"auto"===t.name)throw Error(o(544));var r=t.name;"none"!==(t=rY(t.default,t.share))&&(sw(e,r,t,null,!1)||sS(e.child,!1))}e=e.sibling}}function sC(e,t){if(30===e.tag){var r=e.stateNode,i=e.memoizedProps,a=rX(i,r),n=rY(i.default,r.paired?i.share:i.enter);"none"!==n?sw(e,a,n,null,!1)?(sk(e),r.paired||t||lW(e,i.onEnter)):sS(e.child,!1):sk(e)}else if(0!=(0x2000000&e.subtreeFlags))for(e=e.child;null!==e;)sC(e,t),e=e.sibling;else sk(e)}function sE(e){if(null!==sg&&0!==sg.size){var t=sg;if(0!=(0x1200000&e.subtreeFlags))for(e=e.child;null!==e;){if(22!==e.tag||null===e.memoizedState){if(30===e.tag&&0!=(0x1200000&e.flags)){var r=e.memoizedProps,i=r.name;if(null!=i&&"auto"!==i){var a=t.get(i);if(void 0!==a){var n=rY(r.default,r.share);if("none"!==n&&(sw(e,i,n,null,!1)?(a.paired=n=e.stateNode,n.paired=a,lW(e,r.onShare)):sS(e.child,!1)),t.delete(i),0===t.size)break}}}sE(e)}e=e.sibling}}}function s_(e){if(30===e.tag){var t=e.memoizedProps,r=rX(t,e.stateNode),i=null!==sg?sg.get(r):void 0,a=rY(t.default,void 0!==i?t.share:t.exit);"none"!==a&&(sw(e,r,a,null,!1)?void 0!==i?(i.paired=a=e.stateNode,a.paired=i,sg.delete(r),lW(e,t.onShare)):lW(e,t.onExit):sS(e.child,!1)),null!==sg&&sE(e)}else if(0!=(0x2000000&e.subtreeFlags))for(e=e.child;null!==e;)s_(e),e=e.sibling;else null!==sg&&sE(e)}function sT(e){if(0!=(0x1200000&e.subtreeFlags))for(e=e.child;null!==e;){if(22!==e.tag||null===e.memoizedState){if(30===e.tag&&0!=(0x1200000&e.flags)){var t=e.stateNode;null!==t.paired&&(t.paired=null,sS(e.child,!1))}sT(e)}e=e.sibling}}function sP(e){if(30===e.tag)e.stateNode.paired=null,sS(e.child,!1),sT(e);else if(0!=(0x2000000&e.subtreeFlags))for(e=e.child;null!==e;)sP(e),e=e.sibling;else sT(e)}function sI(e,t,r,i,a,n,o){for(var s=!1;null!==t;){if(5===t.tag){var l=t.stateNode;if(null!==n&&sx<n.length){var u,c=n[sx],d=cu(l);if((c.view||d.view)&&(s=!0),u=0==(4&e.flags))if(d.clip)u=!0;else{u=c.rect;var p=d.rect;u=u.y!==p.y||u.x!==p.x||u.height!==p.height||u.width!==p.width}u&&(e.flags|=4),d.abs?d=!c.abs:(c=c.rect,d=d.rect,d=c.height!==d.height||c.width!==d.width),d&&(e.flags|=32)}else e.flags|=32;0!=(4&e.flags)&&co(l,0===sx?r:r+"_"+sx,a),s&&0!=(4&e.flags)||(null===sy&&(sy=[]),sy.push(l,i,t.memoizedProps)),sx++}else(22!==t.tag||null===t.memoizedState)&&(30===t.tag&&o?e.flags|=32&t.flags:sI(e,t.child,r,i,a,n,o)&&(s=!0));t=t.sibling}return s}var sA=!1,sO=!1,sM=!1,sF=!1,sR="function"==typeof WeakSet?WeakSet:Set,sD=null,sj=!1,sL=!1,sB=!1,sN=!1;function s$(e){for(;null!==sD;){var t=sD,r=e,i=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 15:if(0!=(4&a)&&null!==(i=null!==(i=t.updateQueue)?i.events:null))for(r=0;r<i.length;r++)(a=i[r]).ref.impl=a.nextImpl;break;case 1:if(0!=(1024&a)&&null!==i){r=void 0,a=i.memoizedProps,i=i.memoizedState;var n=t.stateNode;try{var s=ov(t.type,a);r=n.getSnapshotBeforeUpdate(s,i),n.__reactInternalSnapshotBeforeUpdate=r}catch(e){uc(t,t.return,e)}}break;case 3:if(0!=(1024&a)){if(9===(r=(i=t.stateNode.containerInfo).nodeType))c_(i);else if(1===r)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":c_(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;case 30:r&&null!==i&&(r=rX(i.memoizedProps,i.stateNode),"none"!==(a=rY((a=t.memoizedProps).default,a.update))&&sw(i,r,a,i.memoizedState=[],!0));break;default:if(0!=(1024&a))throw Error(o(163))}if(null!==(i=t.sibling)){i.return=t.return,sD=i;break}sD=t.return}}function sz(e,t,r){var i=r.flags;switch(r.tag){case 0:case 11:case 15:s2(e,r),4&i&&se(5,r);break;case 1:if(s2(e,r),4&i)if(e=r.stateNode,null===t)try{e.componentDidMount()}catch(e){uc(r,r.return,e)}else{var a=ov(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){uc(r,r.return,e)}}64&i&&sr(r),512&i&&sa(r,r.return);break;case 3:if(s2(e,r),64&i&&null!==(e=r.updateQueue)){if(t=null,null!==r.child)switch(r.child.tag){case 27:case 5:case 1:t=r.child.stateNode}try{aB(e,t)}catch(e){uc(r,r.return,e)}}break;case 27:null===t&&4&i&&sh(r);case 26:case 5:s2(e,r),null===t&&4&i&&so(r),512&i&&sa(r,r.return);break;case 12:s2(e,r);break;case 31:s2(e,r),4&i&&sG(e,r);break;case 13:s2(e,r),4&i&&sZ(e,r),64&i&&null!==(e=r.memoizedState)&&null!==(e=e.dehydrated)&&function(e,t){var r=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==r.readyState)t();else{var i=function(){t(),r.removeEventListener("DOMContentLoaded",i)};r.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}(e,r=uh.bind(null,r));break;case 22:if(!(i=null!==r.memoizedState||sA)){t=null!==t&&null!==t.memoizedState||sO,a=sA;var n=sO;sA=i,(sO=t)&&!n?function e(t,r,i){for(i=i&&0!=(8772&r.subtreeFlags),r=r.child;null!==r;){var a=r.alternate,n=t,o=r,s=o.flags;switch(o.tag){case 0:case 11:case 15:e(n,o,i),se(4,o);break;case 1:if(e(n,o,i),"function"==typeof(n=(a=o).stateNode).componentDidMount)try{n.componentDidMount()}catch(e){uc(a,a.return,e)}if(null!==(n=(a=o).updateQueue)){var l=a.stateNode;try{var u=n.shared.hiddenCallbacks;if(null!==u)for(n.shared.hiddenCallbacks=null,n=0;n<u.length;n++)aL(u[n],l)}catch(e){uc(a,a.return,e)}}i&&64&s&&sr(o),sa(o,o.return);break;case 27:sh(o);case 26:case 5:if(5===o.tag){l=o;for(var c=l.return;null!==c&&(sd(c)&&cE(l.stateNode,c.stateNode),!sc(c));)c=c.return}e(n,o,i),i&&null===a&&4&s&&so(o),sa(o,o.return);break;case 12:e(n,o,i);break;case 31:e(n,o,i),i&&4&s&&sG(n,o);break;case 13:e(n,o,i),i&&4&s&&sZ(n,o);break;case 22:null===o.memoizedState&&e(n,o,i),sa(o,o.return);break;case 30:e(n,o,i),sa(o,o.return);break;case 7:sa(o,o.return);default:e(n,o,i)}r=r.sibling}}(e,r,0!=(8772&r.subtreeFlags)):s2(e,r),sA=a,sO=n}break;case 30:s2(e,r),512&i&&sa(r,r.return);break;case 7:512&i&&sa(r,r.return);default:s2(e,r)}}function sU(e,t){for(e=e.child;null!==e;)(function e(t,r){switch(t.tag){case 5:case 26:try{var i=t.stateNode;if(r){var a=i.style;"function"==typeof a.setProperty?a.setProperty("display","none","important"):a.display="none"}else{var n=t.stateNode,o=t.memoizedProps.style,s=null!=o&&o.hasOwnProperty("display")?o.display:null;n.style.display=null==s||"boolean"==typeof s?"":(""+s).trim()}}catch(e){uc(t,t.return,e)}!function t(r,i){if(0x4000000&r.subtreeFlags)for(r=r.child;null!==r;){e:{var a=r;switch(a.tag){case 4:e(a,i);break e;case 22:null===a.memoizedState&&t(a,i);break e;default:t(a,i)}}r=r.sibling}}(t,r);break;case 6:try{t.stateNode.nodeValue=r?"":t.memoizedProps,tt=!0}catch(e){uc(t,t.return,e)}break;case 18:try{var l=t.stateNode;r?cn(l,!0):cn(t.stateNode,!1)}catch(e){uc(t,t.return,e)}break;case 22:case 23:null===t.memoizedState&&sU(t,r);break;default:sU(t,r)}})(e,t),e=e.sibling}var sV=null,sH=!1;function sW(e,t,r){for(r=r.child;null!==r;)sq(e,t,r),r=r.sibling}function sq(e,t,r){if(ek&&"function"==typeof ek.onCommitFiberUnmount)try{ek.onCommitFiberUnmount(eS,r)}catch(e){}switch(r.tag){case 26:sO||sn(r,t),sW(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode).parentNode.removeChild(r);break;case 27:sO||sn(r,t);var i=sV,a=sH;ci(r.type)&&(sV=r.stateNode,sH=!1),sW(e,t,r),cD(r.stateNode),sV=i,sH=a;break;case 5:sO||sn(r,t),5===r.tag&&su(r);case 6:if(i=sV,a=sH,sV=null,sW(e,t,r),sV=i,sH=a,null!==sV)if(sH)try{(9===sV.nodeType?sV.body:"HTML"===sV.nodeName?sV.ownerDocument.body:sV).removeChild(r.stateNode),tt=!0}catch(e){uc(r,t,e)}else try{sV.removeChild(r.stateNode),tt=!0}catch(e){uc(r,t,e)}break;case 18:null!==sV&&(sH?(ca(9===(e=sV).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,r.stateNode),dj(e)):ca(sV,r.stateNode));break;case 4:i=sV,a=sH,sV=r.stateNode.containerInfo,sH=!0,sW(e,t,r),sV=i,sH=a;break;case 0:case 11:case 14:case 15:st(2,r,t),sO||st(4,r,t),sW(e,t,r);break;case 1:sO||(sn(r,t),"function"==typeof(i=r.stateNode).componentWillUnmount&&si(r,t,i)),sW(e,t,r);break;case 21:default:sW(e,t,r);break;case 22:sO=(i=sO)||null!==r.memoizedState,sW(e,t,r),sO=i;break;case 30:sn(r,t),sW(e,t,r);break;case 7:sO||sn(r,t),sW(e,t,r)}}function sG(e,t){if(null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)){e=e.dehydrated;try{dj(e)}catch(e){uc(t,t.return,e)}}}function sZ(e,t){if(null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{dj(e)}catch(e){uc(t,t.return,e)}}function sK(e,t){var r=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new sR),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new sR),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){if(!r.has(t)){r.add(t);var i=um.bind(null,e,t);t.then(i,i)}})}function sQ(e,t,r){var i=t.deletions;if(null!==i)for(var a=0;a<i.length;a++){var n=i[a],s=e,l=t,u=l;e:for(;null!==u;){switch(u.tag){case 27:if(ci(u.type)){sV=u.stateNode,sH=!1;break e}break;case 5:sV=u.stateNode,sH=!1;break e;case 3:case 4:sV=u.stateNode.containerInfo,sH=!0;break e}u=u.return}if(null===sV)throw Error(o(160));sq(s,l,n),sV=null,sH=!1,null!==(s=n.alternate)&&(s.return=null),n.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)sJ(t,e,r),t=t.sibling}var sX=null;function sJ(e,t,r){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:sQ(t,e,r),sY(e),4&a&&(st(3,e,e.return),se(3,e),st(5,e,e.return));break;case 1:sQ(t,e,r),sY(e),512&a&&(sO||null===i||sn(i,i.return)),64&a&&sA&&null!==(e=e.updateQueue)&&null!==(i=e.callbacks)&&(t=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===t?i:t.concat(i));break;case 26:var n=sX;if(sQ(t,e,r),sY(e),512&a&&(sO||null===i||sn(i,i.return)),4&a)if(r=null!==i?i.memoizedState:null,t=e.memoizedState,null===i)if(null===t)if(null===e.stateNode){e:{i=e.type,t=e.memoizedProps,r=n.ownerDocument||n;t:switch(i){case"title":(!(a=r.getElementsByTagName("title")[0])||a[eX]||a[eH]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=r.createElement(i),r.head.insertBefore(a,r.querySelector("head > title"))),uY(a,i,t),a[eH]=e,e4(a),i=a;break e;case"link":if(n=cY("link","href",r).get(i+(t.href||""))){for(var s=0;s<n.length;s++)if((a=n[s]).getAttribute("href")===(null==t.href||""===t.href?null:t.href)&&a.getAttribute("rel")===(null==t.rel?null:t.rel)&&a.getAttribute("title")===(null==t.title?null:t.title)&&a.getAttribute("crossorigin")===(null==t.crossOrigin?null:t.crossOrigin)){n.splice(s,1);break t}}uY(a=r.createElement(i),i,t),r.head.appendChild(a);break;case"meta":if(n=cY("meta","content",r).get(i+(t.content||""))){for(s=0;s<n.length;s++)if((a=n[s]).getAttribute("content")===(null==t.content?null:""+t.content)&&a.getAttribute("name")===(null==t.name?null:t.name)&&a.getAttribute("property")===(null==t.property?null:t.property)&&a.getAttribute("http-equiv")===(null==t.httpEquiv?null:t.httpEquiv)&&a.getAttribute("charset")===(null==t.charSet?null:t.charSet)){n.splice(s,1);break t}}uY(a=r.createElement(i),i,t),r.head.appendChild(a);break;default:throw Error(o(468,i))}a[eH]=e,e4(a),i=a}e.stateNode=i}else c0(n,e.type,e.stateNode);else e.stateNode=cZ(n,t,e.memoizedProps);else r!==t?(null===r?null!==i.stateNode&&(i=i.stateNode).parentNode.removeChild(i):r.count--,null===t?c0(n,e.type,e.stateNode):cZ(n,t,e.memoizedProps)):null===t&&null!==e.stateNode&&ss(e,e.memoizedProps,i.memoizedProps);break;case 27:sQ(t,e,r),sY(e),512&a&&(sO||null===i||sn(i,i.return)),null!==i&&4&a&&ss(e,e.memoizedProps,i.memoizedProps);break;case 5:if(n=sM,sM=!1,sQ(t,e,r),sM=n,sY(e),512&a&&(sO||null===i||sn(i,i.return)),32&e.flags){t=e.stateNode;try{tb(t,""),tt=!0}catch(t){uc(e,e.return,t)}}4&a&&null!=e.stateNode&&(t=e.memoizedProps,ss(e,t,null!==i?i.memoizedProps:t)),1024&a&&(sF=!0);break;case 6:if(sQ(t,e,r),sY(e),4&a){if(null===e.stateNode)throw Error(o(162));i=e.memoizedProps,t=e.stateNode;try{t.nodeValue=i,tt=!0}catch(t){uc(e,e.return,t)}}break;case 3:if(tt=!1,cJ=null,n=sX,sX=cB(t.containerInfo),sQ(t,e,r),sX=n,sY(e),4&a&&null!==i&&i.memoizedState.isDehydrated)try{dj(t.containerInfo)}catch(t){uc(e,e.return,t)}sF&&(sF=!1,function e(t){if(1024&t.subtreeFlags)for(t=t.child;null!==t;){var r=t;e(r),5===r.tag&&1024&r.flags&&r.stateNode.reset(),t=t.sibling}}(e)),tt=!1;break;case 4:i=sM,sM=sA,a=tr(),n=sX,sX=cB(e.stateNode.containerInfo),sQ(t,e,r),sY(e),sX=n,tt&&sL&&(sB=!0),tt=a,sM=i;break;case 12:sQ(t,e,r),sY(e);break;case 31:case 19:sQ(t,e,r),sY(e),4&a&&null!==(i=e.updateQueue)&&(e.updateQueue=null,sK(e,i));break;case 13:sQ(t,e,r),sY(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==i&&null!==i.memoizedState)&&(l_=em()),4&a&&null!==(i=e.updateQueue)&&(e.updateQueue=null,sK(e,i));break;case 22:n=null!==e.memoizedState,s=null!==i&&null!==i.memoizedState;var l=sA,u=sO,c=sM;sA=l||n,sM=c||n,sO=u||s,sQ(t,e,r),sO=u,sM=c,sA=l,sY(e),8192&a&&((t=e.stateNode)._visibility=n?-2&t._visibility:1|t._visibility,n&&(null===i||s||sA||sO||function e(t){for(t=t.child;null!==t;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:st(4,r,r.return),e(r);break;case 1:sn(r,r.return);var i=r.stateNode;"function"==typeof i.componentWillUnmount&&si(r,r.return,i),e(r);break;case 27:cD(r.stateNode);case 26:case 5:sn(r,r.return),5===r.tag&&su(r),e(r);break;case 22:null===r.memoizedState&&e(r);break;case 30:sn(r,r.return),e(r);break;case 7:sn(r,r.return);default:e(r)}t=t.sibling}}(e)),!n&&sM||sU(e,n)),4&a&&null!==(i=e.updateQueue)&&null!==(t=i.retryQueue)&&(i.retryQueue=null,sK(e,t));break;case 30:512&a&&(sO||null===i||sn(i,i.return)),a=tr(),n=sL,s=(0x13ffff00&r)===r,l=e.memoizedProps,sL=s&&"none"!==rY(l.default,l.update),sQ(t,e,r),sY(e),s&&null!==i&&tt&&(e.flags|=4),sL=n,tt=a;break;case 21:break;case 7:i&&null!==i.stateNode&&(i.stateNode._fragmentFiber=e);default:sQ(t,e,r),sY(e)}}function sY(e){var t=e.flags;if(2&t){try{for(var r,i=null,a=e.return;null!==a;){if(sd(a)){var n=a.stateNode;null===i?i=[n]:i.push(n)}if(sc(a)){r=a;break}a=a.return}if(null==r)throw Error(o(160));switch(r.tag){case 27:var s=r.stateNode,l=sp(e);sf(e,l,s,i);break;case 5:var u=r.stateNode;32&r.flags&&(tb(u,""),r.flags&=-33);var c=sp(e);sf(e,c,u,i);break;case 3:case 4:var d=r.stateNode.containerInfo,p=sp(e);!function e(t,r,i,a){var n=t.tag;if(5===n||6===n)n=t.stateNode,r?(9===i.nodeType?i.body:"HTML"===i.nodeName?i.ownerDocument.body:i).insertBefore(n,r):((r=9===i.nodeType?i.body:"HTML"===i.nodeName?i.ownerDocument.body:i).appendChild(n),null!=(i=i._reactRootContainer)||null!==r.onclick||(r.onclick=tT)),sl(t,a),tt=!0;else if(4!==n&&(27===n&&ci(t.type)&&(i=t.stateNode,r=null),null!==(t=t.child)))for(e(t,r,i,a),t=t.sibling;null!==t;)e(t,r,i,a),t=t.sibling}(e,p,d,i);break;default:throw Error(o(161))}}catch(t){uc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function s0(e,t){if(9270&t.subtreeFlags)for(t=t.child;null!==t;)s1(t,e),t=t.sibling;else!function e(t,r){for(t=t.child;null!==t;){if(30===t.tag){var i=t.memoizedProps,a=t.stateNode,n=rX(i,a),o=rY(i.default,i.update);if(r)var s=null===(a=a.clones)?null:a.map(cc);else s=t.memoizedState,t.memoizedState=null;a=t;var l=t.child;sx=0,n=sI(a,l,n,n,o,s,!1),0!=(4&t.flags)&&n&&(r||lW(t,i.onUpdate))}else 0!=(0x2000000&t.subtreeFlags)&&e(t,r);t=t.sibling}}(t,!1)}function s1(e,t){var r=e.alternate;if(null===r)sC(e,!1);else switch(e.tag){case 3:if(sN=sj=!1,sb(),s0(t,e),!sj&&!sB){if(null!==(e=sy))for(var i=0;i<e.length;i+=3){r=e[i];var a=e[i+1];cs(r,e[i+2]),null!==(r=r.ownerDocument.documentElement)&&r.animate({opacity:[0,0],pointerEvents:["none","none"]},{duration:0,fill:"forwards",pseudoElement:"::view-transition-group("+a+")"})}null!==(e=9===(e=t.containerInfo).nodeType?e.documentElement:e.ownerDocument.documentElement)&&""===e.style.viewTransitionName&&(e.style.viewTransitionName="none",e.animate({opacity:[0,0],pointerEvents:["none","none"]},{duration:0,fill:"forwards",pseudoElement:"::view-transition-group(root)"}),e.animate({width:[0,0],height:[0,0]},{duration:0,fill:"forwards",pseudoElement:"::view-transition"})),sN=!0}sy=null;break;case 5:default:s0(t,e);break;case 4:i=sj,sj=!1,s0(t,e),sj&&(sB=!0),sj=i;break;case 22:null===e.memoizedState&&(null!==r.memoizedState?sC(e,!1):s0(t,e));break;case 30:i=sj,a=sb(),sj=!1,s0(t,e),sj&&(e.flags|=4);var n=e.memoizedProps,o=e.stateNode;t=rX(n,o),o=rX(r.memoizedProps,o);var s=rY(n.default,n.update);"none"===s?t=!1:(n=r.memoizedState,r.memoizedState=null,r=e.child,sx=0,t=sI(e,r,t,o,s,n,!0),sx!==(null===n?0:n.length)&&(e.flags|=32)),0!=(4&e.flags)&&t?(lW(e,e.memoizedProps.onUpdate),sy=a):null!==a&&(a.push.apply(a,sy),sy=a),sj=0!=(32&e.flags)||i}}function s2(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)sz(e,t.alternate,t),t=t.sibling}function s4(e,t){var r=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==r&&(null!=e&&e.refCount++,null!=r&&i8(r))}function s3(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&i8(e))}function s6(e,t,r,i){var a=(0x13ffff00&r)===r;if(t.subtreeFlags&(a?10262:10256))for(t=t.child;null!==t;)s8(e,t,r,i),t=t.sibling;else a&&function e(t){for(t=t.child;null!==t;)30===t.tag?sS(t.child,!1):0!=(0x2000000&t.subtreeFlags)&&e(t),t=t.sibling}(t)}function s8(e,t,r,i){var a=(0x13ffff00&r)===r;a&&null===t.alternate&&null!==t.return&&null!==t.return.alternate&&sP(t);var n=t.flags;switch(t.tag){case 0:case 11:case 15:s6(e,t,r,i),2048&n&&se(9,t);break;case 1:case 31:case 13:default:s6(e,t,r,i);break;case 3:s6(e,t,r,i),a&&sN&&("root"===(e=9===(e=e.containerInfo).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e).style.viewTransitionName&&(e.style.viewTransitionName=""),null!==(e=e.ownerDocument.documentElement)&&"none"===e.style.viewTransitionName&&(e.style.viewTransitionName="")),2048&n&&(n=null,null!==t.alternate&&(n=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==n&&(t.refCount++,null!=n&&i8(n)));break;case 12:if(2048&n){s6(e,t,r,i),n=t.stateNode;try{var o=t.memoizedProps,s=o.id,l=o.onPostCommit;"function"==typeof l&&l(s,null===t.alternate?"mount":"update",n.passiveEffectDuration,-0)}catch(e){uc(t,t.return,e)}}else s6(e,t,r,i);break;case 23:break;case 22:o=t.stateNode,s=t.alternate,null!==t.memoizedState?(a&&null!==s&&null===s.memoizedState&&sP(s),2&o._visibility?s6(e,t,r,i):s5(e,t)):(a&&null!==s&&null!==s.memoizedState&&sP(t),2&o._visibility?s6(e,t,r,i):(o._visibility|=2,function e(t,r,i,a,n){for(n=n&&0!=(10256&r.subtreeFlags),r=r.child;null!==r;){var o=r,s=o.flags;switch(o.tag){case 0:case 11:case 15:e(t,o,i,a,n),se(8,o);break;case 23:break;case 22:var l=o.stateNode;null!==o.memoizedState?2&l._visibility?e(t,o,i,a,n):s5(t,o):(l._visibility|=2,e(t,o,i,a,n)),n&&2048&s&&s4(o.alternate,o);break;case 24:e(t,o,i,a,n),n&&2048&s&&s3(o.alternate,o);break;default:e(t,o,i,a,n)}r=r.sibling}}(e,t,r,i,0!=(10256&t.subtreeFlags)))),2048&n&&s4(s,t);break;case 24:s6(e,t,r,i),2048&n&&s3(t.alternate,t);break;case 30:a&&null!==(n=t.alternate)&&(sS(n.child,!0),sS(t.child,!0)),s6(e,t,r,i)}}function s5(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var r=t,i=r.flags;switch(r.tag){case 22:s5(e,r),2048&i&&s4(r.alternate,r);break;case 24:s5(e,r),2048&i&&s3(r.alternate,r);break;default:s5(e,r)}t=t.sibling}}var s7=8192;function s9(e,t,r){if(e.subtreeFlags&s7)for(e=e.child;null!==e;)le(e,t,r),e=e.sibling}function le(e,t,r){switch(e.tag){case 26:s9(e,t,r),e.flags&s7&&(null!==e.memoizedState?function(e,t,r,i){if("stylesheet"===r.type&&("string"!=typeof i.media||!1!==matchMedia(i.media).matches)&&0==(4&r.state.loading)){if(null===r.instance){var a=cV(i.href),n=t.querySelector(cH(a));if(n){null!==(t=n._p)&&"object"==typeof t&&"function"==typeof t.then&&(e.count++,e=c5.bind(e),t.then(e,e)),r.state.loading|=4,r.instance=n,e4(n);return}n=t.ownerDocument||t,i=cW(i),(a=cj.get(a))&&cQ(i,a),e4(n=n.createElement("link"));var o=n;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),uY(n,"link",i),r.instance=n}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(r,t),(t=r.state.preload)&&0==(3&r.state.loading)&&(e.count++,r=c5.bind(e),t.addEventListener("load",r),t.addEventListener("error",r))}}(r,sX,e.memoizedState,e.memoizedProps):(e=e.stateNode,(0x13ffff40&t)===t&&c3(r,e)));break;case 5:s9(e,t,r),e.flags&s7&&(e=e.stateNode,(0x13ffff40&t)===t&&c3(r,e));break;case 3:case 4:var i=sX;sX=cB(e.stateNode.containerInfo),s9(e,t,r),sX=i;break;case 22:null===e.memoizedState&&(null!==(i=e.alternate)&&null!==i.memoizedState?(i=s7,s7=0x1000000,s9(e,t,r),s7=i):s9(e,t,r));break;case 30:if(0!=(e.flags&s7)&&null!=(i=e.memoizedProps.name)&&"auto"!==i){var a=e.stateNode;a.paired=null,null===sg&&(sg=new Map),sg.set(i,a)}s9(e,t,r);break;default:s9(e,t,r)}}function lt(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(null!==e)}}function lr(e){var t=e.deletions;if(0!=(16&e.flags)){if(null!==t)for(var r=0;r<t.length;r++){var i=t[r];sD=i,la(i,e)}lt(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)li(e),e=e.sibling}function li(e){switch(e.tag){case 0:case 11:case 15:lr(e),2048&e.flags&&st(9,e,e.return);break;case 3:case 12:default:lr(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,function e(t){var r=t.deletions;if(0!=(16&t.flags)){if(null!==r)for(var i=0;i<r.length;i++){var a=r[i];sD=a,la(a,t)}lt(t)}for(t=t.child;null!==t;){switch((r=t).tag){case 0:case 11:case 15:st(8,r,r.return),e(r);break;case 22:2&(i=r.stateNode)._visibility&&(i._visibility&=-3,e(r));break;default:e(r)}t=t.sibling}}(e)):lr(e)}}function la(e,t){for(;null!==sD;){var r=sD;switch(r.tag){case 0:case 11:case 15:st(8,r,t);break;case 23:case 22:if(null!==r.memoizedState&&null!==r.memoizedState.cachePool){var i=r.memoizedState.cachePool.pool;null!=i&&i.refCount++}break;case 24:i8(r.memoizedState.cache)}if(null!==(i=r.child))i.return=r,sD=i;else for(r=e;null!==sD;){var a=(i=sD).sibling,n=i.return;if(!function e(t){var r=t.alternate;null!==r&&(t.alternate=null,e(r)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(r=t.stateNode)&&eJ(r),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}(i),i===r){sD=null;break}if(null!==a){a.return=n,sD=a;break}sD=n}}}var ln={getCacheForType:function(e){var t=iJ(i3),r=t.data.get(e);return void 0===r&&(r=e(),t.data.set(e,r)),r},cacheSignal:function(){return iJ(i3).controller.signal}},lo="function"==typeof WeakMap?WeakMap:Map,ls=0,ll=null,lu=null,lc=0,ld=0,lp=null,lf=!1,lh=!1,lm=!1,lg=0,lv=0,ly=0,lb=0,lx=0,lw=0,lS=0,lk=null,lC=null,lE=!1,l_=0,lT=0,lP=1/0,lI=null,lA=null,lO=0,lM=null,lF=null,lR=0,lD=0,lj=null,lL=null,lB=null,lN=null,l$=null,lz=0,lU=null;function lV(){return 0!=(2&ls)&&0!==lc?lc&-lc:null!==H.T?uI():ez()}function lH(){if(0===lw)if(0==(0x20000000&lc)||iO){var e=eP;0==(3932160&(eP<<=1))&&(eP=262144),lw=e}else lw=0x20000000;return null!==(e=aH.current)&&(e.flags|=32),lw}function lW(e,t){if(null!=t){var r=e.stateNode,i=r.ref;null===i&&(i=r.ref=cf(rX(e.memoizedProps,r))),null===lN&&(lN=[]),lN.push(t.bind(null,i))}}function lq(e,t,r){(e===ll&&(2===ld||9===ld)||null!==e.cancelPendingCommit)&&(lJ(e,0),lK(e,lc,lw,!1)),eD(e,r),(0==(2&ls)||e!==ll)&&(e===ll&&(0==(2&ls)&&(lb|=r),4===lv&&lK(e,lc,lw,!1)),uS(e))}function lG(e,t,r){if(0!=(6&ls))throw Error(o(327));for(var i=!r&&0==(127&t)&&0==(t&e.expiredLanes)||eM(e,t),a=i?function(e,t){var r=ls;ls|=2;var i=l1(),a=l2();ll!==e||lc!==t?(lI=null,lP=em()+500,lJ(e,t)):lh=eM(e,t);e:for(;;)try{if(0!==ld&&null!==lu){t=lu;var n=lp;t:switch(ld){case 1:ld=0,lp=null,l5(e,t,n,1);break;case 2:case 9:if(af(n)){ld=0,lp=null,l8(t);break}t=function(){2!==ld&&9!==ld||ll!==e||(ld=7),uS(e)},n.then(t,t);break e;case 3:ld=7;break e;case 4:ld=5;break e;case 7:af(n)?(ld=0,lp=null,l8(t)):(ld=0,lp=null,l5(e,t,n,7));break;case 5:var s=null;switch(lu.tag){case 26:s=lu.memoizedState;case 5:case 27:var l=lu;if(s?c2(s):l.stateNode.complete){ld=0,lp=null;var u=l.sibling;if(null!==u)lu=u;else{var c=l.return;null!==c?(lu=c,l7(c)):lu=null}break t}}ld=0,lp=null,l5(e,t,n,5);break;case 6:ld=0,lp=null,l5(e,t,n,6);break;case 8:lX(),lv=6;break e;default:throw Error(o(462))}}for(;null!==lu&&!ef();)l6(lu);break}catch(t){lY(e,t)}return(iH=iV=null,H.H=i,H.A=a,ls=r,null!==lu)?0:(ll=null,lc=0,r3(),lv)}(e,t):l3(e,t,!0),n=i;;){if(0===a)lh&&!i&&lK(e,t,0,!1);else{if(r=e.current.alternate,n&&!function(e){for(var t=e;;){var r=t.tag;if((0===r||11===r||15===r)&&16384&t.flags&&null!==(r=t.updateQueue)&&null!==(r=r.stores))for(var i=0;i<r.length;i++){var a=r[i],n=a.getSnapshot;a=a.value;try{if(!rC(n(),a))return!1}catch(e){return!1}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)){a=l3(e,t,!1),n=!1;continue}if(2===a){if(n=t,e.errorRecoveryDisabledLanes&n)var s=0;else s=0!=(s=-0x20000001&e.pendingLanes)?s:0x20000000&s?0x20000000:0;if(0!==s){t=s;e:{a=lk;var l=e.current.memoizedState.isDehydrated;if(l&&(lJ(e,s).flags|=256),2!==(s=l3(e,s,!1))){if(lm&&!l){e.errorRecoveryDisabledLanes|=n,lb|=n,a=4;break e}n=lC,lC=a,null!==n&&(null===lC?lC=n:lC.push.apply(lC,n))}a=s}if(n=!1,2!==a)continue}}if(1===a){lJ(e,0),lK(e,t,0,!0);break}e:{switch(i=e,n=a){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t&&(0x3c00000&t)!==t)break;case 6:lK(i,t,lw,!lf);break e;case 2:lC=null;break;case 3:case 5:break;default:throw Error(o(329))}if((0x3c00000&t)===t&&10<(a=l_+300-em())){if(lK(i,t,lw,!lf),0!==eO(i,0,!0))break e;lR=t,i.timeoutHandle=u7(lZ.bind(null,i,r,lC,lI,lE,t,lw,lb,lS,lf,n,"Throttled",-0,0),a);break e}lZ(i,r,lC,lI,lE,t,lw,lb,lS,lf,n,null,-0,0)}}break}uS(e)}function lZ(e,t,r,i,a,n,o,s,l,u,c,d,p,f){e.timeoutHandle=-1;var h,m,g=t.subtreeFlags,v=(0x13ffff00&n)===n;if(d=null,(v||8192&g||0x1002000==(0x1002000&g))&&(sg=null,le(t,n,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:tT}),v&&(g=d,null!=(v=(9===(v=e.containerInfo).nodeType?v:v.ownerDocument).__reactViewTransition)&&(g.count++,g.waitingForViewTransition=!0,g=c5.bind(g),v.finished.then(g,g))),null!==(h=d,m=g=(0x3c00000&n)===n?l_-em():(4194048&n)===n?lT-em():0,h.stylesheets&&0===h.count&&de(h,h.stylesheets),g=0<h.count||0<h.imgCount?function(e){var t=setTimeout(function(){if(h.stylesheets&&de(h,h.stylesheets),h.unsuspend){var e=h.unsuspend;h.unsuspend=null,e()}},6e4+m);0<h.imgBytes&&0===c6&&(c6=62500*function(){if("function"==typeof performance.getEntriesByType){for(var e=0,t=0,r=performance.getEntriesByType("resource"),i=0;i<r.length;i++){var a=r[i],n=a.transferSize,o=a.initiatorType,s=a.duration;if(n&&s&&u0(o)){for(o=0,s=a.responseEnd,i+=1;i<r.length;i++){var l=r[i],u=l.startTime;if(u>s)break;var c=l.transferSize,d=l.initiatorType;c&&u0(d)&&(o+=c*((l=l.responseEnd)<s?1:(s-u)/(l-u)))}if(--i,t+=8*(n+o)/(a.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"==typeof(e=navigator.connection.downlink)?e:5}());var r=setTimeout(function(){if(h.waitingForImages=!1,0===h.count&&(h.stylesheets&&de(h,h.stylesheets),h.unsuspend)){var e=h.unsuspend;h.unsuspend=null,e()}},(h.imgBytes>c6?50:800)+m);return h.unsuspend=e,function(){h.unsuspend=null,clearTimeout(t),clearTimeout(r)}}:null))){lR=n,e.cancelPendingCommit=g(ue.bind(null,e,t,n,r,i,a,o,s,l,c,d,null,p,f)),lK(e,n,o,!u);return}ue(e,t,n,r,i,a,o,s,l,c,d)}function lK(e,t,r,i){t&=~lx,t&=~lb,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var a=t;0<a;){var n=31-eC(a),o=1<<n;i[n]=-1,a&=~o}0!==r&&ej(e,r,t)}function lQ(){return 0!=(6&ls)||(uk(0,!1),!1)}function lX(){if(null!==lu){if(0===ld)var e=lu.return;else e=lu,iH=iV=null,nc(e),ab=null,ax=0,e=lu;for(;null!==e;)o9(e.alternate,e),e=e.return;lu=null}}function lJ(e,t){var r=e.timeoutHandle;-1!==r&&(e.timeoutHandle=-1,u9(r)),null!==(r=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,r()),lR=0,lX(),ll=e,lu=r=ia(e.current,null),lc=t,ld=0,lp=null,lf=!1,lh=eM(e,t),lm=!1,lS=lw=lx=lb=ly=lv=0,lC=lk=null,lE=!1,0!=(8&t)&&(t|=32&t);var i=e.entangledLanes;if(0!==i)for(e=e.entanglements,i&=t;0<i;){var a=31-eC(i),n=1<<a;t|=e[a],i&=~n}return lg=t,r3(),r}function lY(e,t){a2=null,H.H=ou,t===au||t===ad?(t=av(),ld=3):t===ac?(t=av(),ld=4):ld=t===o_?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,lp=t,null===lu&&(lv=1,ow(e,ih(t,e.current)))}function l0(){var e=aH.current;return null===e||((4194048&lc)===lc?null===aW:((0x3c00000&lc)===lc||0!=(0x20000000&lc))&&e===aW)}function l1(){var e=H.H;return H.H=ou,null===e?ou:e}function l2(){var e=H.A;return H.A=ln,e}function l4(){lv=4,lf||(4194048&lc)!==lc&&null!==aH.current||(lh=!0),0==(0x7ffffff&ly)&&0==(0x7ffffff&lb)||null===ll||lK(ll,lc,lw,!1)}function l3(e,t,r){var i=ls;ls|=2;var a=l1(),n=l2();(ll!==e||lc!==t)&&(lI=null,lJ(e,t)),t=!1;var o=lv;e:for(;;)try{if(0!==ld&&null!==lu){var s=lu,l=lp;switch(ld){case 8:lX(),o=6;break e;case 3:case 2:case 9:case 6:null===aH.current&&(t=!0);var u=ld;if(ld=0,lp=null,l5(e,s,l,u),r&&lh){o=0;break e}break;default:u=ld,ld=0,lp=null,l5(e,s,l,u)}}(function(){for(;null!==lu;)l6(lu)})(),o=lv;break}catch(t){lY(e,t)}return t&&e.shellSuspendCounter++,iH=iV=null,ls=i,H.H=a,H.A=n,null===lu&&(ll=null,lc=0,r3()),o}function l6(e){var t=o2(e.alternate,e,lg);e.memoizedProps=e.pendingProps,null===t?l7(e):lu=t}function l8(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=oN(r,t,t.pendingProps,t.type,void 0,lc);break;case 11:t=oN(r,t,t.pendingProps,t.type.render,t.ref,lc);break;case 5:nc(t);default:o9(r,t),t=o2(r,t=lu=io(t,lg),lg)}e.memoizedProps=e.pendingProps,null===t?l7(e):lu=t}function l5(e,t,r,i){iH=iV=null,nc(t),ab=null,ax=0;var a=t.return;try{if(function(e,t,r,i,a){if(r.flags|=32768,null!==i&&"object"==typeof i&&"function"==typeof i.then){if(null!==(t=r.alternate)&&iK(t,r,a,!0),null!==(r=aH.current)){switch(r.tag){case 31:case 13:case 19:return null===aW?l4():null===r.alternate&&0===lv&&(lv=3),r.flags&=-257,r.flags|=65536,r.lanes=a,i===ap?r.flags|=16384:(null===(t=r.updateQueue)?r.updateQueue=new Set([i]):t.add(i),ud(e,i,a)),!1;case 22:return r.flags|=65536,i===ap?r.flags|=16384:(null===(t=r.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},r.updateQueue=t):null===(r=t.retryQueue)?t.retryQueue=new Set([i]):r.add(i),ud(e,i,a)),!1}throw Error(o(435,r.tag))}return ud(e,i,a),l4(),!1}if(iO)return null!==(t=aH.current)?(0==(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,i!==iR&&iz(ih(e=Error(o(422),{cause:i}),r))):(i!==iR&&iz(ih(t=Error(o(423),{cause:i}),r)),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,i=ih(i,r),a=ok(e.stateNode,i,a),aF(e,a),4!==lv&&(lv=2)),!1;var n=Error(o(520),{cause:i});if(n=ih(n,r),null===lk?lk=[n]:lk.push(n),4!==lv&&(lv=2),null===t)return!0;i=ih(i,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=a&-a,r.lanes|=e,e=ok(r.stateNode,i,e),aF(r,e),!1;case 1:if(t=r.type,n=r.stateNode,0==(128&r.flags)&&("function"==typeof t.getDerivedStateFromError||null!==n&&"function"==typeof n.componentDidCatch&&(null===lA||!lA.has(n))))return r.flags|=65536,a&=-a,r.lanes|=a,oE(a=oC(a),e,r,i),aF(r,a),!1;break;case 22:if(null!==r.memoizedState)return r.flags|=65536,!1}r=r.return}while(null!==r)return!1}(e,a,t,r,lc)){lv=1,ow(e,ih(r,e.current)),lu=null;return}}catch(t){if(null!==a)throw lu=a,t;lv=1,ow(e,ih(r,e.current)),lu=null;return}32768&t.flags?(iO||1===i?e=!0:lh||0!=(0x20000000&lc)?e=!1:(lf=e=!0,(2===i||9===i||3===i||6===i)&&null!==(i=aH.current)&&13===i.tag&&(i.flags|=16384)),l9(t,e)):l7(t)}function l7(e){var t=e;do{if(0!=(32768&t.flags))return void l9(t,lf);e=t.return;var r=function(e,t,r){var i=t.pendingProps;switch(iT(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return o7(t),null;case 3:return r=t.stateNode,i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),iq(i3),ei(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(null===e||null===e.child)&&(iB(t)?o4(t):null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,i$())),o7(t),null;case 26:var a=t.type,n=t.memoizedState;return null===e?(o4(t),null!==n?(o7(t),o6(t,n)):(o7(t),o3(t,a,null,i,r))):n?n!==e.memoizedState?(o4(t),o7(t),o6(t,n)):(o7(t),t.flags&=-0x1000001):((e=e.memoizedProps)!==i&&o4(t),o7(t),o3(t,a,e,i,r)),null;case 27:if(en(t),r=ee.current,a=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&o4(t);else{if(!i){if(null===t.stateNode)throw Error(o(166));return o7(t),t.subtreeFlags&=-0x2000001,null}e=J.current,iB(t)?ij(t,e):(t.stateNode=e=cR(a,i,r),o4(t))}return o7(t),t.subtreeFlags&=-0x2000001,null;case 5:if(en(t),a=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&o4(t);else{if(!i){if(null===t.stateNode)throw Error(o(166));return o7(t),t.subtreeFlags&=-0x2000001,null}if(n=J.current,iB(t))ij(t,n);else{var s=u4(ee.current);switch(n){case 1:n=s.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=s.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=s.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=s.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":(n=s.createElement("div")).innerHTML="<script></script>",n=n.removeChild(n.firstChild);break;case"select":n="string"==typeof i.is?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?n.multiple=!0:i.size&&(n.size=i.size);break;default:n="string"==typeof i.is?s.createElement(a,{is:i.is}):s.createElement(a)}}n[eH]=t,n[eW]=i;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)n.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(t.stateNode=n,uY(n,a,i),a){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break;case"img":i=!0;break;default:i=!1}i&&o4(t)}}return o7(t),t.subtreeFlags&=-0x2000001,o3(t,t.type,null===e?null:e.memoizedProps,t.pendingProps,r),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==i&&o4(t);else{if("string"!=typeof i&&null===t.stateNode)throw Error(o(166));if(e=ee.current,iB(t)){if(e=t.stateNode,r=t.memoizedProps,i=null,null!==(a=iI))switch(a.tag){case 27:case 5:i=a.memoizedProps}e[eH]=t,(e=!!(e.nodeValue===r||null!==i&&!0===i.suppressHydrationWarning||uQ(e.nodeValue,r)))||iD(t,!0)}else(e=u4(e).createTextNode(i))[eH]=t,t.stateNode=e}return o7(t),null;case 31:if(r=t.memoizedState,null===e||null!==e.memoizedState){if(i=iB(t),null!==r){if(null===e){if(!i)throw Error(o(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(o(557));e[eH]=t}else iN(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;o7(t),e=!1}else r=i$(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e){if(256&t.flags)return aQ(t),t;return aQ(t),null}if(0!=(128&t.flags))throw Error(o(558))}return o7(t),null;case 13:if(i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=iB(t),null!==i&&null!==i.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[eH]=t}else iN(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;o7(t),a=!1}else a=i$(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a){if(256&t.flags)return aQ(t),t;return aQ(t),null}}if(aQ(t),0!=(128&t.flags))return t.lanes=r,t;return r=null!==i,e=null!==e&&null!==e.memoizedState,r&&(i=t.child,a=null,null!==i.alternate&&null!==i.alternate.memoizedState&&null!==i.alternate.memoizedState.cachePool&&(a=i.alternate.memoizedState.cachePool.pool),n=null,null!==i.memoizedState&&null!==i.memoizedState.cachePool&&(n=i.memoizedState.cachePool.pool),n!==a&&(i.flags|=2048)),r!==e&&r&&(t.child.flags|=8192),o8(t,t.updateQueue),o7(t),null;case 4:return ei(),null===e&&u$(t.stateNode.containerInfo),t.flags|=0x4000000,o7(t),null;case 10:return iq(t.type),o7(t),null;case 19:if(aY(t),null===(i=t.memoizedState))return o7(t),null;if(a=0!=(128&t.flags),null===(n=i.rendering))if(a)o5(i,!1);else{if(0!==lv||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(n=a0(e))){for(t.flags|=128,o5(i,!1),t.updateQueue=e=n.updateQueue,o8(t,e),t.subtreeFlags=0,e=r,r=t.child;null!==r;)io(r,e),r=r.sibling;return aJ(t,1&aX.current|2),iO&&iC(t,i.treeForkCount),t.child}e=e.sibling}null!==i.tail&&em()>lP&&(t.flags|=128,a=!0,o5(i,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=a0(n))){if(t.flags|=128,a=!0,t.updateQueue=e=e.updateQueue,o8(t,e),o5(i,!0),null===i.tail&&"collapsed"!==i.tailMode&&"visible"!==i.tailMode&&!n.alternate&&!iO)return o7(t),null}else 2*em()-i.renderingStartTime>lP&&0x20000000!==r&&(t.flags|=128,a=!0,o5(i,!1),t.lanes=4194304);i.isBackwards?(n.sibling=t.child,t.child=n):(null!==(e=i.last)?e.sibling=n:t.child=n,i.last=n)}if(null!==i.tail){e=i.tail;e:{for(r=e;null!==r;){if(null!==r.alternate){r=!1;break e}r=r.sibling}r=!0}return i.rendering=e,i.tail=e.sibling,i.renderingStartTime=em(),e.sibling=null,n=aX.current,n=a?1&n|2:1&n,"visible"===i.tailMode||"collapsed"===i.tailMode||!r||iO?aJ(t,n):(r=n,X(aH,t),X(aX,r),null===aW&&(aW=t)),iO&&iC(t,i.treeForkCount),e}return o7(t),null;case 22:case 23:return aQ(t),aV(),i=null!==t.memoizedState,null!==e?null!==e.memoizedState!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?0!=(0x20000000&r)&&0==(128&t.flags)&&(o7(t),6&t.subtreeFlags&&(t.flags|=8192)):o7(t),null!==(r=t.updateQueue)&&o8(t,r.retryQueue),r=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),i=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(i=t.memoizedState.cachePool.pool),i!==r&&(t.flags|=2048),null!==e&&Q(an),null;case 24:return r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),iq(i3),o7(t),null;case 25:return null;case 30:return t.flags|=0x2000000,o7(t),null}throw Error(o(156,t.tag))}(t.alternate,t,lg);if(null!==r){lu=r;return}if(null!==(t=t.sibling)){lu=t;return}lu=t=e}while(null!==t)0===lv&&(lv=5)}function l9(e,t){do{var r=function(e,t){switch(iT(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return iq(i3),ei(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return en(t),null;case 31:if(null!==t.memoizedState){if(aQ(t),null===t.alternate)throw Error(o(340));iN()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(aQ(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));iN()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return aY(t),65536&(e=t.flags)?(t.flags=-65537&e|128,null!==(e=t.memoizedState)&&(e.rendering=null,e.tail=null),t.flags|=4,t):null;case 4:return ei(),null;case 10:return iq(t.type),null;case 22:case 23:return aQ(t),aV(),null!==e&&Q(an),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return iq(i3),null;default:return null}}(e.alternate,e);if(null!==r){r.flags&=32767,lu=r;return}if(null!==(r=e.return)&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&null!==(e=e.sibling)){lu=e;return}lu=e=r}while(null!==e)lv=6,lu=null}function ue(e,t,r,i,a,n,s,l,u,c,d){e.cancelPendingCommit=null;do us();while(0!==lO)if(0!=(6&ls))throw Error(o(327));if(null!==t){var p;if(t===e.current)throw Error(o(177));if(!function(e,t,r,i,a,n){var o=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(r=o&~r;0<r;){var c=31-eC(r),d=1<<c;s[c]=0,l[c]=-1;var p=u[c];if(null!==p)for(u[c]=null,c=0;c<p.length;c++){var f=p[c];null!==f&&(f.lane&=-0x20000001)}r&=~d}0!==i&&ej(e,i,0),0!==n&&0===a&&0!==e.tag&&(e.suspendedLanes|=n&~(o&~t))}(e,r,n=t.lanes|t.childLanes|r4,s,l,u),e===ll&&(lu=ll=null,lc=0),lF=t,lM=e,lR=r,lD=n,lj=a,lL=i,lN=null,(0x13ffff00&r)===r?(p=e.transitionTypes,e.transitionTypes=null,l$=p,i=10262):(l$=null,i=10256),0!=(t.subtreeFlags&i)||0!=(t.flags&i)?(e.callbackNode=null,e.callbackPriority=0,ed(eb,function(){return ul(),null})):(e.callbackNode=null,e.callbackPriority=0),sm=!1,i=0!=(13878&t.flags),0!=(13878&t.subtreeFlags)||i){i=H.T,H.T=null,a=W.p,W.p=2,s=ls,ls|=4;try{!function(e,t,r){if(e=e.containerInfo,u1=dd,rI(e=rP(e))){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(i=(i=e.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(a&&0!==a.rangeCount){i=a.anchorNode;var n,o=a.anchorOffset,s=a.focusNode;a=a.focusOffset;try{i.nodeType,s.nodeType}catch(e){i=null;break e}var l=0,u=-1,c=-1,d=0,p=0,f=e,h=null;t:for(;;){for(;f!==i||0!==o&&3!==f.nodeType||(u=l+o),f!==s||0!==a&&3!==f.nodeType||(c=l+a),3===f.nodeType&&(l+=f.nodeValue.length),null!==(n=f.firstChild);)h=f,f=n;for(;;){if(f===e)break t;if(h===i&&++d===o&&(u=l),h===s&&++p===a&&(c=l),null!==(n=f.nextSibling))break;h=(f=h).parentNode}f=n}i=-1===u||-1===c?null:{start:u,end:c}}else i=null}i=i||{start:0,end:0}}else i=null;for(u2={focusedElem:e,selectionRange:i},dd=!1,r=(0x13ffff00&r)===r,sD=t,t=r?9270:1028;null!==sD;){if(e=sD,r&&null!==(i=e.deletions))for(o=0;o<i.length;o++)r&&s_(i[o]);if(null===e.alternate&&0!=(2&e.flags))r&&sv(e),s$(r);else{if(22===e.tag){if(i=e.alternate,null!==e.memoizedState){null!==i&&null===i.memoizedState&&r&&s_(i),s$(r);continue}else if(null!==i&&null!==i.memoizedState){r&&sv(e),s$(r);continue}}i=e.child,0!=(e.subtreeFlags&t)&&null!==i?(i.return=e,sD=i):(r&&function e(t){for(t=t.child;null!==t;){if(30===t.tag){var r=t.memoizedProps,i=rX(r,t.stateNode);r=rY(r.default,r.update),t.flags&=-5,"none"!==r&&sw(t,i,r,t.memoizedState=[],!1)}else 0!=(0x2000000&t.subtreeFlags)&&e(t);t=t.sibling}}(e),s$(r))}}sg=null}(e,t,r)}finally{ls=s,W.p=a,H.T=i}}lO=1,(t=sm)?lB=function(e,t,r,i,a,n,o,s,l){var u=9===t.nodeType?t:t.ownerDocument;try{var c=u.startViewTransition({update:function(){var t=u.defaultView,r=t.navigation&&t.navigation.transition,o=u.fonts.status;i();var s=[];if("loaded"===o&&(u.documentElement.clientHeight,"loading"===u.fonts.status&&s.push(u.fonts.ready)),o=s.length,null!==e)for(var l=e.suspenseyImages,c=0,d=0;d<l.length;d++){var p=l[d];if(!p.complete){var f=p.getBoundingClientRect();if(0<f.bottom&&0<f.right&&f.top<t.innerHeight&&f.left<t.innerWidth){if((c+=c4(p))>c6){s.length=o;break}p=new Promise(cd.bind(p)),s.push(p)}}}return 0<s.length?(t=Promise.race([Promise.all(s),new Promise(function(e){return setTimeout(e,500)})]).then(a,a),(r?Promise.allSettled([r.finished,t]):t).then(n,n)):(a(),r)?r.finished.then(n,n):void n()},types:r});u.__reactViewTransition=c;var d=[];return c.ready.then(function(){for(var e=u.documentElement.getAnimations({subtree:!0}),t=0;t<e.length;t++){var r=e[t],i=r.effect,a=i.pseudoElement;if(null!=a&&a.startsWith("::view-transition")){d.push(r),r=i.getKeyframes();for(var n=a=void 0,s=!0,l=0;l<r.length;l++){var c=r[l],p=c.width;if(void 0===a)a=p;else if(a!==p){s=!1;break}if(p=c.height,void 0===n)n=p;else if(n!==p){s=!1;break}delete c.width,delete c.height,"none"===c.transform&&delete c.transform}s&&void 0!==a&&void 0!==n&&(i.setKeyframes(r),(s=getComputedStyle(i.target,i.pseudoElement)).width!==a||s.height!==n)&&((s=r[0]).width=a,s.height=n,(s=r[r.length-1]).width=a,s.height=n,i.setKeyframes(r))}}o()},function(e){u.__reactViewTransition===c&&(u.__reactViewTransition=null);try{"object"==typeof e&&null!==e&&"InvalidStateError"===e.name&&("View transition was skipped because document visibility state is hidden."===e.message||"Skipping view transition because document visibility state has become hidden."===e.message||"Skipping view transition because viewport size changed."===e.message||"Transition was aborted because of invalid state"===e.message)&&(e=null),null!==e&&l(e)}finally{i(),a(),o()}}),c.finished.finally(function(){for(var e=0;e<d.length;e++)d[e].cancel();u.__reactViewTransition===c&&(u.__reactViewTransition=null),s()}),c}catch(e){return i(),a(),o(),null}}(d,e.containerInfo,l$,ui,ua,ur,un,ul,ut,null,null):(ui(),ua(),un())}}function ut(e){0!==lO&&(0,lM.onRecoverableError)(e,{componentStack:null})}function ur(){3===lO&&(lO=0,s1(lF,lM),lO=4)}function ui(){if(1===lO){lO=0;var e=lM,t=lF,r=lR,i=0!=(13878&t.flags);if(0!=(13878&t.subtreeFlags)||i){i=H.T,H.T=null;var a=W.p;W.p=2;var n=ls;ls|=4;try{sL=sB=!1,sJ(t,e,r),r=u2;var o=rP(e.containerInfo),s=r.focusedElem,l=r.selectionRange;if(o!==s&&s&&s.ownerDocument&&function e(t,r){return!!t&&!!r&&(t===r||(!t||3!==t.nodeType)&&(r&&3===r.nodeType?e(t,r.parentNode):"contains"in t?t.contains(r):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(r))))}(s.ownerDocument.documentElement,s)){if(null!==l&&rI(s)){var u=l.start,c=l.end;if(void 0===c&&(c=u),"selectionStart"in s)s.selectionStart=u,s.selectionEnd=Math.min(c,s.value.length);else{var d=s.ownerDocument||document,p=d&&d.defaultView||window;if(p.getSelection){var f=p.getSelection(),h=s.textContent.length,m=Math.min(l.start,h),g=void 0===l.end?m:Math.min(l.end,h);!f.extend&&m>g&&(o=g,g=m,m=o);var v=rT(s,m),y=rT(s,g);if(v&&y&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==y.node||f.focusOffset!==y.offset)){var b=d.createRange();b.setStart(v.node,v.offset),f.removeAllRanges(),m>g?(f.addRange(b),f.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),f.addRange(b))}}}}for(d=[],f=s;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"==typeof s.focus&&s.focus(),s=0;s<d.length;s++){var x=d[s];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}dd=!!u1,u2=u1=null}finally{ls=n,W.p=a,H.T=i}}e.current=t,lO=2}}function ua(){if(2===lO){lO=0;var e=lM,t=lF,r=0!=(8772&t.flags);if(0!=(8772&t.subtreeFlags)||r){r=H.T,H.T=null;var i=W.p;W.p=2;var a=ls;ls|=4;try{sz(e,t.alternate,t)}finally{ls=a,W.p=i,H.T=r}}lO=3}}function un(){if(4===lO||3===lO){lO=0,lB=null,eh();var e=lM,t=lF,r=lR,i=lL,a=(0x13ffff00&r)===r?10262:10256;if(0!=(t.subtreeFlags&a)||0!=(t.flags&a)?lO=5:(lO=0,lF=lM=null,uo(e,e.pendingLanes)),0===(a=e.pendingLanes)&&(lA=null),e$(r),t=t.stateNode,ek&&"function"==typeof ek.onCommitFiberRoot)try{ek.onCommitFiberRoot(eS,t,void 0,128==(128&t.current.flags))}catch(e){}if(null!==i){t=H.T,a=W.p,W.p=2,H.T=null;try{for(var n=e.onRecoverableError,o=0;o<i.length;o++){var s=i[o];n(s.value,{componentStack:s.stack})}}finally{H.T=t,W.p=a}}if(i=lN,n=l$,l$=null,null!==i)for(lN=null,null===n&&(n=[]),s=0;s<i.length;s++)(0,i[s])(n);0!=(3&lR)&&us(),uS(e),a=e.pendingLanes,0!=(261930&r)&&0!=(42&a)?e===lU?lz++:(lz=0,lU=e):lz=0,uk(0,!1)}}function uo(e,t){0==(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,i8(t))}function us(){return null!==lB&&(lB.skipTransition(),lB=null),ui(),ua(),un(),ul()}function ul(){if(5!==lO)return!1;var e=lM,t=lD;lD=0;var r=e$(lR),i=H.T,a=W.p;try{W.p=32>r?32:r,H.T=null,r=lj,lj=null;var n=lM,s=lR;if(lO=0,lF=lM=null,lR=0,0!=(6&ls))throw Error(o(331));var l=ls;if(ls|=4,li(n.current),s8(n,n.current,s,r),ls=l,uk(0,!1),ek&&"function"==typeof ek.onPostCommitFiberRoot)try{ek.onPostCommitFiberRoot(eS,n)}catch(e){}return!0}finally{W.p=a,H.T=i,uo(e,t)}}function uu(e,t,r){t=ih(r,t),t=ok(e.stateNode,t,2),null!==(e=aO(e,t,2))&&(eD(e,2),uS(e))}function uc(e,t,r){if(3===e.tag)uu(e,e,r);else for(;null!==t;){if(3===t.tag){uu(t,e,r);break}if(1===t.tag){var i=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===lA||!lA.has(i))){e=ih(r,e),null!==(i=aO(t,r=oC(2),2))&&(oE(r,i,t,e),eD(i,2),uS(i));break}}t=t.return}}function ud(e,t,r){var i=e.pingCache;if(null===i){i=e.pingCache=new lo;var a=new Set;i.set(t,a)}else void 0===(a=i.get(t))&&(a=new Set,i.set(t,a));a.has(r)||(lm=!0,a.add(r),e=up.bind(null,e,t,r),t.then(e,e))}function up(e,t,r){var i=e.pingCache;null!==i&&i.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,ll===e&&(lc&r)===r&&(4===lv||3===lv&&(0x3c00000&lc)===lc&&300>em()-l_?0==(2&ls)&&lJ(e,0):lx|=r,lS===lc&&(lS=0)),uS(e)}function uf(e,t){0===t&&(t=eF()),null!==(e=r5(e,t))&&(eD(e,t),uS(e))}function uh(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),uf(e,r)}function um(e,t){var r=0;switch(e.tag){case 31:case 13:var i=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==i&&i.delete(t),uf(e,r)}var ug=null,uv=null,uy=!1,ub=!1,ux=!1,uw=0;function uS(e){e!==uv&&null===e.next&&(null===uv?ug=uv=e:uv=uv.next=e),ub=!0,uy||(uy=!0,ct(function(){0!=(6&ls)?ed(ev,uC):uE()}))}function uk(e,t){if(!ux&&ub){ux=!0;do for(var r=!1,i=ug;null!==i;){if(!t)if(0!==e){var a=i.pendingLanes;if(0===a)var n=0;else{var o=i.suspendedLanes,s=i.pingedLanes;n=0xc000095&(n=(1<<31-eC(42|e)+1)-1&(a&~(o&~s)))?0xc000095&n|1:n?2|n:0}0!==n&&(r=!0,uP(i,n))}else n=lc,0==(3&(n=eO(i,i===ll?n:0,null!==i.cancelPendingCommit||-1!==i.timeoutHandle)))||eM(i,n)||(r=!0,uP(i,n));i=i.next}while(r)ux=!1}}function uC(){uE()}function uE(){ub=uy=!1;var e,t=0;0===uw||((e=window.event)&&"popstate"===e.type?e===u5||(u5=e,0):(u5=null,1))||(t=uw);for(var r=em(),i=null,a=ug;null!==a;){var n=a.next,o=u_(a,r);0===o?(a.next=null,null===i?ug=n:i.next=n,null===n&&(uv=i)):(i=a,(0!==t||0!=(3&o))&&(ub=!0)),a=n}0!==lO&&5!==lO||uk(t,!1),0!==uw&&(uw=0)}function u_(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,n=-0x3c00001&e.pendingLanes;0<n;){var o=31-eC(n),s=1<<o,l=a[o];-1===l?(0==(s&r)||0!=(s&i))&&(a[o]=function(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return -1}}(s,t)):l<=t&&(e.expiredLanes|=s),n&=~s}if(t=ll,r=lc,r=eO(e,e===t?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),i=e.callbackNode,0===r||e===t&&(2===ld||9===ld)||null!==e.cancelPendingCommit)return null!==i&&null!==i&&ep(i),e.callbackNode=null,e.callbackPriority=0;if(0==(3&r)||eM(e,r)){if((t=r&-r)===e.callbackPriority)return t;switch(null!==i&&ep(i),e$(r)){case 2:case 8:r=ey;break;case 32:default:r=eb;break;case 0x10000000:r=ew}return r=ed(r,i=uT.bind(null,e)),e.callbackPriority=t,e.callbackNode=r,t}return null!==i&&null!==i&&ep(i),e.callbackPriority=2,e.callbackNode=null,2}function uT(e,t){if(0!==lO&&5!==lO)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(us()&&e.callbackNode!==r)return null;var i=lc;return 0===(i=eO(e,e===ll?i:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(lG(e,i,t),u_(e,em()),null!=e.callbackNode&&e.callbackNode===r?uT.bind(null,e):null)}function uP(e,t){if(us())return null;lG(e,t,!0)}function uI(){if(0===uw){var e=at;0===e&&(e=eT,0==(261888&(eT<<=1))&&(eT=256)),uw=e}return uw}function uA(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:t_(""+e)}function uO(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}for(var uM=0;uM<rZ.length;uM++){var uF=rZ[uM];rK(uF.toLowerCase(),"on"+(uF[0].toUpperCase()+uF.slice(1)))}rK(r$,"onAnimationEnd"),rK(rz,"onAnimationIteration"),rK(rU,"onAnimationStart"),rK("dblclick","onDoubleClick"),rK("focusin","onFocus"),rK("focusout","onBlur"),rK(rV,"onTransitionRun"),rK(rH,"onTransitionStart"),rK(rW,"onTransitionCancel"),rK(rq,"onTransitionEnd"),e5("onMouseEnter",["mouseout","mouseover"]),e5("onMouseLeave",["mouseout","mouseover"]),e5("onPointerEnter",["pointerout","pointerover"]),e5("onPointerLeave",["pointerout","pointerover"]),e8("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),e8("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),e8("onBeforeInput",["compositionend","keypress","textInput","paste"]),e8("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),e8("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),e8("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uR="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(uR));function uj(e,t){t=0!=(4&t);for(var r=0;r<e.length;r++){var i=e[r],a=i.event;i=i.listeners;e:{var n=void 0;if(t)for(var o=i.length-1;0<=o;o--){var s=i[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==n&&a.isPropagationStopped())break e;n=s,a.currentTarget=u;try{n(a)}catch(e){r0(e)}a.currentTarget=null,n=l}else for(o=0;o<i.length;o++){if(l=(s=i[o]).instance,u=s.currentTarget,s=s.listener,l!==n&&a.isPropagationStopped())break e;n=s,a.currentTarget=u;try{n(a)}catch(e){r0(e)}a.currentTarget=null,n=l}}}}function uL(e,t){var r=t[eG];void 0===r&&(r=t[eG]=new Set);var i=e+"__bubble";r.has(i)||(uz(t,e,2,!1),r.add(i))}function uB(e,t,r){var i=0;t&&(i|=4),uz(r,e,i,t)}var uN="_reactListening"+Math.random().toString(36).slice(2);function u$(e){if(!e[uN]){e[uN]=!0,e3.forEach(function(t){"selectionchange"!==t&&(uD.has(t)||uB(t,!1,e),uB(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[uN]||(t[uN]=!0,uB("selectionchange",!1,t))}}function uz(e,t,r,i){switch(dy(t)){case 2:var a=dp;break;case 8:a=df;break;default:a=dh}r=a.bind(null,t,r,e),a=void 0,i?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function uU(e,t,r,i,a){var n=i;if(0==(1&t)&&0==(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var s=i.stateNode.containerInfo;if(s===a)break;if(4===o)for(o=i.return;null!==o;){var u=o.tag;if((3===u||4===u)&&o.stateNode.containerInfo===a)return;o=o.return}for(;null!==s;){if(null===(o=eY(s)))return;if(5===(u=o.tag)||6===u||26===u||27===u){i=n=o;continue e}s=s.parentNode}}i=i.return}tR(function(){var i=n,a=tI(r),o=[];e:{var s=rG.get(e);if(void 0!==s){var u=tQ,c=e;switch(e){case"keypress":if(0===t$(r))break e;case"keydown":case"keyup":u=rt;break;case"focusin":c="focus",u=t2;break;case"focusout":c="blur",u=t2;break;case"beforeblur":case"afterblur":u=t2;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=t0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=t1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=ri;break;case r$:case rz:case rU:u=t4;break;case rq:u=ra;break;case"scroll":case"scrollend":u=tJ;break;case"wheel":u=rn;break;case"copy":case"cut":case"paste":u=t3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=rr;break;case"toggle":case"beforetoggle":u=ro}var d=0!=(4&t),p=!d&&("scroll"===e||"scrollend"===e),f=d?null!==s?s+"Capture":null:s;d=[];for(var h,m=i;null!==m;){var g=m;if(h=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===h||null===f||null!=(g=tD(m,f))&&d.push(uV(m,g,h)),p)break;m=m.return}0<d.length&&(s=new u(s,c,null,r,a),o.push({event:s,listeners:d}))}}if(0==(7&t)){u="mouseover"===e||"pointerover"===e,s="mouseout"===e||"pointerout"===e,!(u&&r!==tP&&(c=r.relatedTarget||r.fromElement)&&(eY(c)||c[eq]))&&(s||u)&&(c=a.window===a?a:(u=a.ownerDocument)?u.defaultView||u.parentWindow:window,s?(u=r.relatedTarget||r.toElement,s=i,null!==(u=u?eY(u):null)&&(p=l(u),d=u.tag,u!==p||5!==d&&27!==d&&6!==d)&&(u=null)):(s=null,u=i),s!==u&&(d=t0,g="onMouseLeave",f="onMouseEnter",m="mouse",("pointerout"===e||"pointerover"===e)&&(d=rr,g="onPointerLeave",f="onPointerEnter",m="pointer"),p=null==s?c:e1(s),h=null==u?c:e1(u),(c=new d(g,m+"leave",s,r,a)).target=p,c.relatedTarget=h,g=null,eY(a)===i&&((d=new d(f,m+"enter",u,r,a)).target=h,d.relatedTarget=p,g=d),p=g,d=s&&u?w(s,u,uW):null,null!==s&&uq(o,c,s,d,!1),null!==u&&null!==p&&uq(o,p,u,d,!0)));e:{if("select"===(u=(s=i?e1(i):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var v,y,b,x=rv;else if(rd(s))if(1){x=rw;var S=rx}else x=rk;else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)?x=rS:i&&tk(i.elementType)&&(x=rv);if(x&&(x=x(e,i))){rp(o,x,r,a);break e}S&&S(e,s,i),"focusout"===e&&i&&"number"===s.type&&null!=i.memoizedProps.value&&tm(s,"number",s.value)}switch(S=i?e1(i):window,e){case"focusin":(rd(S)||"true"===S.contentEditable)&&(rA=S,rO=i,rM=null);break;case"focusout":rM=rO=rA=null;break;case"mousedown":rF=!0;break;case"contextmenu":case"mouseup":case"dragend":rF=!1,rR(o,r,a);break;case"selectionchange":0;case"keydown":case"keyup":rR(o,r,a)}ru?rl(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart"),b&&0<(S=uH(i,b)).length&&(b=new t6(b,e,null,r,a),o.push({event:b,listeners:S}),y?b.data=y:null!==(y="object"==typeof(v=(v=r).detail)&&"data"in v?v.data:null)&&(b.data=y)),(y=function(e,t){if(ru)return"compositionend"===e||rl(e,t)?(e=tN(),tB=tL=tj=null,ru=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return t.data}}(e,r))&&0<(b=uH(i,"onBeforeInput")).length&&(S=new t6("onBeforeInput","beforeinput",null,r,a),o.push({event:S,listeners:b}),S.data=y);var k=e;if("submit"===k&&i&&i.stateNode===a){var C=uA((a[eW]||null).action),E=r.submitter;E&&null!==(k=(k=E[eW]||null)?uA(k.formAction):E.getAttribute("formAction"))&&(C=k,E=null);var _=new tQ("action","action",null,r,a);o.push({event:_,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==uw){var e=E?uO(a,E):new FormData(a);n6(i,{pending:!0,data:e,method:a.method,action:C},null,e)}}else"function"==typeof C&&(_.preventDefault(),n6(i,{pending:!0,data:e=E?uO(a,E):new FormData(a),method:a.method,action:C},C,e))},currentTarget:a}]})}}uj(o,t)})}function uV(e,t,r){return{instance:e,listener:t,currentTarget:r}}function uH(e,t){for(var r=t+"Capture",i=[];null!==e;){var a=e,n=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===n||(null!=(a=tD(e,r))&&i.unshift(uV(e,a,n)),null!=(a=tD(e,t))&&i.push(uV(e,a,n))),3===e.tag)return i;e=e.return}return[]}function uW(e){if(null===e)return null;do e=e.return;while(e&&5!==e.tag&&27!==e.tag)return e||null}function uq(e,t,r,i,a){for(var n=t._reactName,o=[];null!==r&&r!==i;){var s=r,l=s.alternate,u=s.stateNode;if(s=s.tag,null!==l&&l===i)break;5!==s&&26!==s&&27!==s||null===u||(l=u,a?null!=(u=tD(r,n))&&o.unshift(uV(r,u,l)):a||null!=(u=tD(r,n))&&o.push(uV(r,u,l))),r=r.return}0!==o.length&&e.push({event:t,listeners:o})}var uG=/\r\n?/g,uZ=/\u0000|\uFFFD/g;function uK(e){return("string"==typeof e?e:""+e).replace(uG,"\n").replace(uZ,"")}function uQ(e,t){return t=uK(t),uK(e)===t}function uX(e,t,r,i,a,n){switch(r){case"children":if("string"==typeof i)"body"===t||"textarea"===t&&""===i||tb(e,i);else{if("number"!=typeof i&&"bigint"!=typeof i)return;"body"!==t&&tb(e,""+i)}break;case"className":ta(e,"class",i);break;case"tabIndex":ta(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":ta(e,r,i);break;case"style":tS(e,i,n);return;case"data":if("object"!==t){ta(e,"data",i);break}case"src":case"href":if(""===i&&("a"!==t||"href"!==r)||null==i||"function"==typeof i||"symbol"==typeof i||"boolean"==typeof i){e.removeAttribute(r);break}i=t_(""+i),e.setAttribute(r,i);break;case"action":case"formAction":if("function"==typeof i){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof n&&("formAction"===r?("input"!==t&&uX(e,t,"name",a.name,a,null),uX(e,t,"formEncType",a.formEncType,a,null),uX(e,t,"formMethod",a.formMethod,a,null),uX(e,t,"formTarget",a.formTarget,a,null)):(uX(e,t,"encType",a.encType,a,null),uX(e,t,"method",a.method,a,null),uX(e,t,"target",a.target,a,null))),null==i||"symbol"==typeof i||"boolean"==typeof i){e.removeAttribute(r);break}i=t_(""+i),e.setAttribute(r,i);break;case"onClick":null!=i&&(e.onclick=tT);return;case"onScroll":null!=i&&uL("scroll",e);return;case"onScrollEnd":null!=i&&uL("scrollend",e);return;case"dangerouslySetInnerHTML":if(null!=i){if("object"!=typeof i||!("__html"in i))throw Error(o(61));if(null!=(r=i.__html)){if(null!=a.children)throw Error(o(60));e.innerHTML=r}}break;case"multiple":e.multiple=i&&"function"!=typeof i&&"symbol"!=typeof i;break;case"muted":e.muted=i&&"function"!=typeof i&&"symbol"!=typeof i;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==i||"function"==typeof i||"boolean"==typeof i||"symbol"==typeof i){e.removeAttribute("xlink:href");break}r=t_(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(r,""+i):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":!0===i?e.setAttribute(r,""):!1!==i&&null!=i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(r,i):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&!isNaN(i)&&1<=i?e.setAttribute(r,i):e.removeAttribute(r);break;case"rowSpan":case"start":null==i||"function"==typeof i||"symbol"==typeof i||isNaN(i)?e.removeAttribute(r):e.setAttribute(r,i);break;case"popover":uL("beforetoggle",e),uL("toggle",e),ti(e,"popover",i);break;case"xlinkActuate":tn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":tn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":tn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":tn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":tn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":tn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":tn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":tn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":tn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":ti(e,"is",i);break;case"innerText":case"textContent":return;default:if(2<r.length&&("o"===r[0]||"O"===r[0])&&("n"===r[1]||"N"===r[1]))return;ti(e,r=tC.get(r)||r,i)}tt=!0}function uJ(e,t,r,i,a,n){switch(r){case"style":tS(e,i,n);return;case"dangerouslySetInnerHTML":if(null!=i){if("object"!=typeof i||!("__html"in i))throw Error(o(61));if(null!=(r=i.__html)){if(null!=a.children)throw Error(o(60));e.innerHTML=r}}break;case"children":if("string"==typeof i)tb(e,i);else{if("number"!=typeof i&&"bigint"!=typeof i)return;tb(e,""+i)}break;case"onScroll":null!=i&&uL("scroll",e);return;case"onScrollEnd":null!=i&&uL("scrollend",e);return;case"onClick":null!=i&&(e.onclick=tT);return;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":return;default:if(!e6.hasOwnProperty(r))e:{if("o"===r[0]&&"n"===r[1]&&(a=r.endsWith("Capture"),t=r.slice(2,a?r.length-7:void 0),"function"==typeof(n=null!=(n=e[eW]||null)?n[r]:null)&&e.removeEventListener(t,n,a),"function"==typeof i)){"function"!=typeof n&&null!==n&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,i,a);break e}tt=!0,r in e?e[r]=i:!0===i?e.setAttribute(r,""):ti(e,r,i)}return}tt=!0}function uY(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":uL("error",e),uL("load",e);var i,a=!1,n=!1;for(i in r)if(r.hasOwnProperty(i)){var s=r[i];if(null!=s)switch(i){case"src":a=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:uX(e,t,i,s,r,null)}}n&&uX(e,t,"srcSet",r.srcSet,r,null),a&&uX(e,t,"src",r.src,r,null);return;case"input":uL("invalid",e);var l=i=s=n=null,u=null,c=null;for(a in r)if(r.hasOwnProperty(a)){var d=r[a];if(null!=d)switch(a){case"name":n=d;break;case"type":s=d;break;case"checked":u=d;break;case"defaultChecked":c=d;break;case"value":i=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(o(137,t));break;default:uX(e,t,a,d,r,null)}}th(e,i,l,u,c,s,n,!1);return;case"select":for(n in uL("invalid",e),a=s=i=null,r)if(r.hasOwnProperty(n)&&null!=(l=r[n]))switch(n){case"value":i=l;break;case"defaultValue":s=l;break;case"multiple":a=l;default:uX(e,t,n,l,r,null)}t=i,r=s,e.multiple=!!a,null!=t?tg(e,!!a,t,!1):null!=r&&tg(e,!!a,r,!0);return;case"textarea":for(s in uL("invalid",e),i=n=a=null,r)if(r.hasOwnProperty(s)&&null!=(l=r[s]))switch(s){case"value":a=l;break;case"defaultValue":n=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:uX(e,t,s,l,r,null)}ty(e,a,n,i);return;case"option":for(u in r)r.hasOwnProperty(u)&&null!=(a=r[u])&&("selected"===u?e.selected=a&&"function"!=typeof a&&"symbol"!=typeof a:uX(e,t,u,a,r,null));return;case"dialog":uL("beforetoggle",e),uL("toggle",e),uL("cancel",e),uL("close",e);break;case"iframe":case"object":uL("load",e);break;case"video":case"audio":for(a=0;a<uR.length;a++)uL(uR[a],e);break;case"image":uL("error",e),uL("load",e);break;case"details":uL("toggle",e);break;case"embed":case"source":case"link":uL("error",e),uL("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in r)if(r.hasOwnProperty(c)&&null!=(a=r[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:uX(e,t,c,a,r,null)}return;default:if(tk(t)){for(d in r)r.hasOwnProperty(d)&&void 0!==(a=r[d])&&uJ(e,t,d,a,r,void 0);return}}for(l in r)r.hasOwnProperty(l)&&null!=(a=r[l])&&uX(e,t,l,a,r,null)}function u0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var u1=null,u2=null;function u4(e){return 9===e.nodeType?e:e.ownerDocument}function u3(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function u6(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function u8(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var u5=null,u7="function"==typeof setTimeout?setTimeout:void 0,u9="function"==typeof clearTimeout?clearTimeout:void 0,ce="function"==typeof Promise?Promise:void 0,ct="function"==typeof queueMicrotask?queueMicrotask:void 0!==ce?function(e){return ce.resolve(null).then(e).catch(cr)}:u7;function cr(e){setTimeout(function(){throw e})}function ci(e){return"head"===e}function ca(e,t){var r=t,i=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType)if("/$"===(r=a.data)||"/&"===r){if(0===i){e.removeChild(a),dj(t);return}i--}else if("$"===r||"$?"===r||"$~"===r||"$!"===r||"&"===r)i++;else if("html"===r)cD(e.ownerDocument.documentElement);else if("head"===r){cD(r=e.ownerDocument.head);for(var n=r.firstChild;n;){var o=n.nextSibling,s=n.nodeName;n[eX]||"SCRIPT"===s||"STYLE"===s||"LINK"===s&&"stylesheet"===n.rel.toLowerCase()||r.removeChild(n),n=o}}else"body"===r&&cD(e.ownerDocument.body);r=a}while(r)dj(t)}function cn(e,t){var r=e;e=0;do{var i=r.nextSibling;if(1===r.nodeType?t?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",""===r.getAttribute("style")&&r.removeAttribute("style")):3===r.nodeType&&(t?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),i&&8===i.nodeType)if("/$"===(r=i.data))if(0===e)break;else e--;else"$"!==r&&"$?"!==r&&"$~"!==r&&"$!"!==r||e++;r=i}while(r)}function co(e,t,r){if(t=CSS.escape(t)!==t?"r-"+btoa(t).replace(/=/g,""):t,e.style.viewTransitionName=t,null!=r&&(e.style.viewTransitionClass=r),"inline"===(r=getComputedStyle(e)).display){if(1===(t=e.getClientRects()).length)var i=1;else for(var a=i=0;a<t.length;a++){var n=t[a];0<n.width&&0<n.height&&i++}1===i&&((e=e.style).display=1===t.length?"inline-block":"block",e.marginTop="-"+r.paddingTop,e.marginBottom="-"+r.paddingBottom)}}function cs(e,t){e=e.style;var r=null!=(t=t.style)?t.hasOwnProperty("viewTransitionName")?t.viewTransitionName:t.hasOwnProperty("view-transition-name")?t["view-transition-name"]:null:null;e.viewTransitionName=null==r||"boolean"==typeof r?"":(""+r).trim(),r=null!=t?t.hasOwnProperty("viewTransitionClass")?t.viewTransitionClass:t.hasOwnProperty("view-transition-class")?t["view-transition-class"]:null:null,e.viewTransitionClass=null==r||"boolean"==typeof r?"":(""+r).trim(),"inline-block"===e.display&&(null==t?e.display=e.margin="":(r=t.display,e.display=null==r||"boolean"==typeof r?"":r,null!=(r=t.margin)?e.margin=r:(r=t.hasOwnProperty("marginTop")?t.marginTop:t["margin-top"],e.marginTop=null==r||"boolean"==typeof r?"":r,t=t.hasOwnProperty("marginBottom")?t.marginBottom:t["margin-bottom"],e.marginBottom=null==t||"boolean"==typeof t?"":t)))}function cl(e,t,r){return r=r.ownerDocument.defaultView,{rect:e,abs:"absolute"===t.position||"fixed"===t.position,clip:"none"!==t.clipPath||"visible"!==t.overflow||"none"!==t.filter||"none"!==t.mask||"none"!==t.mask||"0px"!==t.borderRadius,view:0<=e.bottom&&0<=e.right&&e.top<=r.innerHeight&&e.left<=r.innerWidth}}function cu(e){return cl(e.getBoundingClientRect(),getComputedStyle(e),e)}function cc(e){var t=e.getBoundingClientRect();return cl(t=new DOMRect(t.x+2e4,t.y+2e4,t.width,t.height),getComputedStyle(e),e)}function cd(e){this.addEventListener("load",e),this.addEventListener("error",e)}function cp(e,t){this._scope=document.documentElement,this._selector="::view-transition-"+e+"("+t+")"}function cf(e){return{name:e,group:new cp("group",e),imagePair:new cp("image-pair",e),old:new cp("old",e),new:new cp("new",e)}}function ch(e){this._fragmentFiber=e,this._observers=this._eventListeners=null}function cm(e,t,r,i){return h(e).addEventListener(t,r,i),!1}function cg(e,t,r,i){return h(e).removeEventListener(t,r,i),!1}function cv(e){return null==e?"0":"boolean"==typeof e?"c="+(e?"1":"0"):"c="+(e.capture?"1":"0")+"&o="+(e.once?"1":"0")+"&p="+(e.passive?"1":"0")}function cy(e,t,r,i){for(var a=0;a<e.length;a++){var n=e[a];if(n.type===t&&n.listener===r&&cv(n.optionsOrUseCapture)===cv(i))return a}return -1}function cb(e,t){var r=e=h(e),i=t;function a(){n=!0}var n=!1;try{r.addEventListener("focus",a),(r.focus||HTMLElement.prototype.focus).call(r,i)}finally{r.removeEventListener("focus",a)}return n}function cx(e,t){return t.push(e),!1}function cw(e){return(e=h(e))===e.ownerDocument.activeElement&&(e.blur(),!0)}function cS(e,t){return e=h(e),t.observe(e),!1}function ck(e,t){return e=h(e),t.unobserve(e),!1}function cC(e,t){return e=h(e),t.push.apply(t,e.getClientRects()),!1}function cE(e,t){var r=t._eventListeners;if(null!==r)for(var i=0;i<r.length;i++){var a=r[i];e.addEventListener(a.type,a.listener,a.optionsOrUseCapture)}null!==t._observers&&t._observers.forEach(function(t){t.observe(e)})}function c_(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":c_(r),eJ(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===r.rel.toLowerCase())continue}e.removeChild(r)}}function cT(e,t){for(;8!==e.nodeType;)if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t||null===(e=cA(e.nextSibling)))return null;return e}function cP(e){return"$?"===e.data||"$~"===e.data}function cI(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function cA(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}cp.prototype.animate=function(e,t){return(t="number"==typeof t?{duration:t}:S({},t)).pseudoElement=this._selector,this._scope.animate(e,t)},cp.prototype.getAnimations=function(){for(var e=this._scope,t=this._selector,r=e.getAnimations({subtree:!0}),i=[],a=0;a<r.length;a++){var n=r[a].effect;null!==n&&n.target===e&&n.pseudoElement===t&&i.push(r[a])}return i},cp.prototype.getComputedStyle=function(){return getComputedStyle(this._scope,this._selector)},ch.prototype.addEventListener=function(e,t,r){null===this._eventListeners&&(this._eventListeners=[]);var i=this._eventListeners;-1===cy(i,e,t,r)&&(i.push({type:e,listener:t,optionsOrUseCapture:r}),p(this._fragmentFiber.child,!1,cm,e,t,r)),this._eventListeners=i},ch.prototype.removeEventListener=function(e,t,r){var i=this._eventListeners;null!=i&&0<i.length&&(p(this._fragmentFiber.child,!1,cg,e,t,r),e=cy(i,e,t,r),null!==this._eventListeners&&this._eventListeners.splice(e,1))},ch.prototype.dispatchEvent=function(e){var t=f(this._fragmentFiber);if(null===t)return!0;t=h(t);var r=this._eventListeners;if(null!==r&&0<r.length||!e.bubbles){var i=document.createTextNode("");if(r)for(var a=0;a<r.length;a++){var n=r[a];i.addEventListener(n.type,n.listener,n.optionsOrUseCapture)}if(t.appendChild(i),e=i.dispatchEvent(e),r)for(a=0;a<r.length;a++)n=r[a],i.removeEventListener(n.type,n.listener,n.optionsOrUseCapture);return t.removeChild(i),e}return t.dispatchEvent(e)},ch.prototype.focus=function(e){p(this._fragmentFiber.child,!0,cb,e,void 0,void 0)},ch.prototype.focusLast=function(e){var t=[];p(this._fragmentFiber.child,!0,cx,t,void 0,void 0);for(var r=t.length-1;0<=r&&!cb(t[r],e);r--);},ch.prototype.blur=function(){p(this._fragmentFiber.child,!1,cw,void 0,void 0,void 0)},ch.prototype.observeUsing=function(e){null===this._observers&&(this._observers=new Set),this._observers.add(e),p(this._fragmentFiber.child,!1,cS,e,void 0,void 0)},ch.prototype.unobserveUsing=function(e){var t=this._observers;null!==t&&t.has(e)&&(t.delete(e),p(this._fragmentFiber.child,!1,ck,e,void 0,void 0))},ch.prototype.getClientRects=function(){var e=[];return p(this._fragmentFiber.child,!1,cC,e,void 0,void 0),e},ch.prototype.getRootNode=function(e){var t=f(this._fragmentFiber);return null===t?this:h(t).getRootNode(e)},ch.prototype.compareDocumentPosition=function(e){var t=f(this._fragmentFiber);if(null===t)return Node.DOCUMENT_POSITION_DISCONNECTED;var r=[];p(this._fragmentFiber.child,!1,cx,r,void 0,void 0);var i=h(t);if(0===r.length){r=this._fragmentFiber;var a=i.compareDocumentPosition(e);return t=a,i===e?t=Node.DOCUMENT_POSITION_CONTAINS:a&Node.DOCUMENT_POSITION_CONTAINED_BY&&(p(r.sibling,!1,v),r=m,m=null,t=null===r?Node.DOCUMENT_POSITION_PRECEDING:0===(e=h(r).compareDocumentPosition(e))||e&Node.DOCUMENT_POSITION_FOLLOWING?Node.DOCUMENT_POSITION_FOLLOWING:Node.DOCUMENT_POSITION_PRECEDING),t|Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC}t=h(r[0]),a=h(r[r.length-1]);for(var n=h(r[0]),o=!1,s=this._fragmentFiber.return;null!==s&&(4===s.tag&&(o=!0),3!==s.tag&&5!==s.tag);)s=s.return;if(null==(n=o?n.parentElement:i))return Node.DOCUMENT_POSITION_DISCONNECTED;i=n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY,n=n.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY,o=t.compareDocumentPosition(e);var l=a.compareDocumentPosition(e);return s=o&Node.DOCUMENT_POSITION_CONTAINED_BY||l&Node.DOCUMENT_POSITION_CONTAINED_BY,l=i&&n&&o&Node.DOCUMENT_POSITION_FOLLOWING&&l&Node.DOCUMENT_POSITION_PRECEDING,(t=i&&t===e||n&&a===e||s||l?Node.DOCUMENT_POSITION_CONTAINED_BY:(i||t!==e)&&(n||a!==e)?o:Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)&Node.DOCUMENT_POSITION_DISCONNECTED||t&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC||function(e,t,r,i,a){var n=eY(a);if(e&Node.DOCUMENT_POSITION_CONTAINED_BY){if(r=!!n)e:{for(;null!==n;){if(7===n.tag&&(n===t||n.alternate===t)){r=!0;break e}n=n.return}r=!1}return r}if(e&Node.DOCUMENT_POSITION_CONTAINS){if(null===n)return n=a.ownerDocument,a===n||a===n.body;e:{for(n=t,t=f(t);null!==n;){if((5===n.tag||3===n.tag)&&(n===t||n.alternate===t)){n=!0;break e}n=n.return}n=!1}return n}return e&Node.DOCUMENT_POSITION_PRECEDING?((t=!!n)&&!(t=n===r)&&(null===(t=w(r,n,x))?t=!1:(p(t,!0,y,n,r),n=m,m=null,t=null!==n)),t):!!(e&Node.DOCUMENT_POSITION_FOLLOWING)&&((t=!!n)&&!(t=n===i)&&(null===(t=w(i,n,x))?t=!1:(p(t,!0,b,n,i),n=m,g=m=null,t=null!==n)),t)}(t,this._fragmentFiber,r[0],r[r.length-1],e)?t:Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC},ch.prototype.scrollIntoView=function(e){if("object"==typeof e)throw Error(o(566));var t=[];p(this._fragmentFiber.child,!1,cx,t,void 0,void 0);var r=!1!==e;if(0===t.length){t=this._fragmentFiber;var i=[null,null],a=f(t);null!==a&&function e(t,r,i){for(var a=3<arguments.length&&void 0!==arguments[3]&&arguments[3];null!==i;){if(i===r)if(a=!0,!i.sibling)return!0;else i=i.sibling;if(5===i.tag){if(a)return t[1]=i,!0;t[0]=i}else if((22!==i.tag||null===i.memoizedState)&&e(t,r,i.child,a))return!0;i=i.sibling}return!1}(i,t,a.child),null!==(r=r?i[1]||i[0]||f(this._fragmentFiber):i[0]||i[1])&&h(r).scrollIntoView(e)}else for(i=r?t.length-1:0;i!==(r?-1:t.length);)h(t[i]).scrollIntoView(e),i+=r?-1:1};var cO=null;function cM(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r||"/&"===r){if(0===t)return cA(e.nextSibling);t--}else"$"!==r&&"$!"!==r&&"$?"!==r&&"$~"!==r&&"&"!==r||t++}e=e.nextSibling}return null}function cF(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r||"$~"===r||"&"===r){if(0===t)return e;t--}else"/$"!==r&&"/&"!==r||t++}e=e.previousSibling}return null}function cR(e,t,r){switch(t=u4(r),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function cD(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);eJ(e)}var cj=new Map,cL=new Set;function cB(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var cN=W.d;W.d={f:function(){var e=cN.f(),t=lQ();return e||t},r:function(e){var t=e0(e);null!==t&&5===t.tag&&"form"===t.type?n5(t):cN.r(e)},D:function(e){cN.D(e),cz("dns-prefetch",e,null)},C:function(e,t){cN.C(e,t),cz("preconnect",e,t)},L:function(e,t,r){if(cN.L(e,t,r),c$&&e&&t){var i='link[rel="preload"][as="'+tp(t)+'"]';"image"===t&&r&&r.imageSrcSet?(i+='[imagesrcset="'+tp(r.imageSrcSet)+'"]',"string"==typeof r.imageSizes&&(i+='[imagesizes="'+tp(r.imageSizes)+'"]')):i+='[href="'+tp(e)+'"]';var a=i;switch(t){case"style":a=cV(e);break;case"script":a=cq(e)}cj.has(a)||(e=S({rel:"preload",href:"image"===t&&r&&r.imageSrcSet?void 0:e,as:t},r),cj.set(a,e),null!==c$.querySelector(i)||"style"===t&&c$.querySelector(cH(a))||"script"===t&&c$.querySelector(cG(a))||(uY(t=c$.createElement("link"),"link",e),e4(t),c$.head.appendChild(t)))}},m:function(e,t){if(cN.m(e,t),c$&&e){var r=t&&"string"==typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+tp(r)+'"][href="'+tp(e)+'"]',a=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=cq(e)}if(!cj.has(a)&&(e=S({rel:"modulepreload",href:e},t),cj.set(a,e),null===c$.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c$.querySelector(cG(a)))return}uY(r=c$.createElement("link"),"link",e),e4(r),c$.head.appendChild(r)}}},X:function(e,t){if(cN.X(e,t),c$&&e){var r=e2(c$).hoistableScripts,i=cq(e),a=r.get(i);a||((a=c$.querySelector(cG(i)))||(e=S({src:e,async:!0},t),(t=cj.get(i))&&cX(e,t),e4(a=c$.createElement("script")),uY(a,"link",e),c$.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}},S:function(e,t,r){if(cN.S(e,t,r),c$&&e){var i=e2(c$).hoistableStyles,a=cV(e);t=t||"default";var n=i.get(a);if(!n){var o={loading:0,preload:null};if(n=c$.querySelector(cH(a)))o.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":t},r),(r=cj.get(a))&&cQ(e,r);var s=n=c$.createElement("link");e4(s),uY(s,"link",e),s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),s.addEventListener("load",function(){o.loading|=1}),s.addEventListener("error",function(){o.loading|=2}),o.loading|=4,cK(n,t,c$)}n={type:"stylesheet",instance:n,count:1,state:o},i.set(a,n)}}},M:function(e,t){if(cN.M(e,t),c$&&e){var r=e2(c$).hoistableScripts,i=cq(e),a=r.get(i);a||((a=c$.querySelector(cG(i)))||(e=S({src:e,async:!0,type:"module"},t),(t=cj.get(i))&&cX(e,t),e4(a=c$.createElement("script")),uY(a,"link",e),c$.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}}};var c$="u"<typeof document?null:document;function cz(e,t,r){if(c$&&"string"==typeof t&&t){var i=tp(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"==typeof r&&(i+='[crossorigin="'+r+'"]'),cL.has(i)||(cL.add(i),e={rel:e,crossOrigin:r,href:t},null===c$.querySelector(i)&&(uY(t=c$.createElement("link"),"link",e),e4(t),c$.head.appendChild(t)))}}function cU(e,t,r,i){var a=(a=ee.current)?cB(a):null;if(!a)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof r.precedence&&"string"==typeof r.href?(t=cV(r.href),(i=(r=e2(a).hoistableStyles).get(t))||(i={type:"style",instance:null,count:0,state:null},r.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===r.rel&&"string"==typeof r.href&&"string"==typeof r.precedence){e=cV(r.href);var n,s,l,u,c=e2(a).hoistableStyles,d=c.get(e);if(d||(a=a.ownerDocument||a,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=a.querySelector(cH(e)))&&!c._p&&(d.instance=c,d.state.loading=5),cj.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},cj.set(e,r),c||(n=a,s=e,l=r,u=d.state,n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(u.preload=s=n.createElement("link"),s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),uY(s,"link",l),e4(s),n.head.appendChild(s))))),t&&null===i)throw Error(o(528,""));return d}if(t&&null!==i)throw Error(o(529,""));return null;case"script":return t=r.async,"string"==typeof(r=r.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=cq(r),(i=(r=e2(a).hoistableScripts).get(t))||(i={type:"script",instance:null,count:0,state:null},r.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function cV(e){return'href="'+tp(e)+'"'}function cH(e){return'link[rel="stylesheet"]['+e+"]"}function cW(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function cq(e){return'[src="'+tp(e)+'"]'}function cG(e){return"script[async]"+e}function cZ(e,t,r){if(t.count++,null===t.instance)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+tp(r.href)+'"]');if(i)return t.instance=i,e4(i),i;var a=S({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return e4(i=(e.ownerDocument||e).createElement("style")),uY(i,"style",a),cK(i,r.precedence,e),t.instance=i;case"stylesheet":a=cV(r.href);var n=e.querySelector(cH(a));if(n)return t.state.loading|=4,t.instance=n,e4(n),n;i=cW(r),(a=cj.get(a))&&cQ(i,a),e4(n=(e.ownerDocument||e).createElement("link"));var s=n;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),uY(n,"link",i),t.state.loading|=4,cK(n,r.precedence,e),t.instance=n;case"script":if(n=cq(r.src),a=e.querySelector(cG(n)))return t.instance=a,e4(a),a;return i=r,(a=cj.get(n))&&cX(i=S({},r),a),e4(a=(e=e.ownerDocument||e).createElement("script")),uY(a,"link",i),e.head.appendChild(a),t.instance=a;case"void":return null;default:throw Error(o(443,t.type))}return"stylesheet"===t.type&&0==(4&t.state.loading)&&(i=t.instance,t.state.loading|=4,cK(i,r.precedence,e)),t.instance}function cK(e,t,r){for(var i=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=i.length?i[i.length-1]:null,n=a,o=0;o<i.length;o++){var s=i[o];if(s.dataset.precedence===t)n=s;else if(n!==a)break}n?n.parentNode.insertBefore(e,n.nextSibling):(t=9===r.nodeType?r.head:r).insertBefore(e,t.firstChild)}function cQ(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function cX(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var cJ=null;function cY(e,t,r){if(null===cJ){var i=new Map,a=cJ=new Map;a.set(r,i)}else(i=(a=cJ).get(r))||(i=new Map,a.set(r,i));if(i.has(e))return i;for(i.set(e,null),r=r.getElementsByTagName(e),a=0;a<r.length;a++){var n=r[a];if(!(n[eX]||n[eH]||"link"===e&&"stylesheet"===n.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==n.namespaceURI){var o=n.getAttribute(t)||"";o=e+o;var s=i.get(o);s?s.push(n):i.set(o,[n])}}return i}function c0(e,t,r){(e=e.ownerDocument||e).head.insertBefore(r,"title"===t?e.querySelector("head > title"):null)}function c1(e,t){return"img"===e&&null!=t.src&&""!==t.src&&null==t.onLoad&&"lazy"!==t.loading}function c2(e){return"stylesheet"!==e.type||0!=(3&e.state.loading)}function c4(e){return(e.width||100)*(e.height||100)*("number"==typeof devicePixelRatio?devicePixelRatio:1)*.25}function c3(e,t){"function"==typeof t.decode&&(e.imgCount++,t.complete||(e.imgBytes+=c4(t),e.suspenseyImages.push(t)),e=c7.bind(e),t.decode().then(e,e))}var c6=0;function c8(e){if(0===e.count&&(0===e.imgCount||!e.waitingForImages)){if(e.stylesheets)de(e,e.stylesheets);else if(e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}}function c5(){this.count--,c8(this)}function c7(){this.imgCount--,c8(this)}var c9=null;function de(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,c9=new Map,t.forEach(dt,e),c9=null,c5.call(e))}function dt(e,t){if(!(4&t.state.loading)){var r=c9.get(e);if(r)var i=r.get(null);else{r=new Map,c9.set(e,r);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),n=0;n<a.length;n++){var o=a[n];("LINK"===o.nodeName||"not all"!==o.getAttribute("media"))&&(r.set(o.dataset.precedence,o),i=o)}i&&r.set(null,i)}o=(a=t.instance).getAttribute("data-precedence"),(n=r.get(o)||i)===i&&r.set(null,a),r.set(o,a),this.count++,i=c5.bind(this),a.addEventListener("load",i),a.addEventListener("error",i),n?n.parentNode.insertBefore(a,n.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var dr={$$typeof:A,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function di(e,t,r,i,a,n,o,s,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=eR(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eR(0),this.hiddenUpdates=eR(null),this.identifierPrefix=i,this.onUncaughtError=a,this.onCaughtError=n,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.transitionTypes=null,this.incompleteTransitions=new Map}function da(e,t,r,i,a,n,o,s,l,u,c,d){return e=new di(e,t,r,o,l,u,c,d,s),t=1,!0===n&&(t|=24),n=ir(3,null,null,t),e.current=n,n.stateNode=e,t=i6(),t.refCount++,e.pooledCache=t,t.refCount++,n.memoizedState={element:i,isDehydrated:r,cache:t},aP(n),e}function dn(e,t,r,i,a,n){a=a?ie:ie,null===i.context?i.context=a:i.pendingContext=a,(i=aA(t)).payload={element:r},null!==(n=void 0===n?null:n)&&(i.callback=n),null!==(r=aO(e,i,t))&&(lq(r,e,t),aM(r,e,t))}function ds(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function dl(e,t){ds(e,t),(e=e.alternate)&&ds(e,t)}function du(e){if(13===e.tag||31===e.tag){var t=r5(e,0x4000000);null!==t&&lq(t,e,0x4000000),dl(e,0x4000000)}}function dc(e){if(13===e.tag||31===e.tag){var t=lV(),r=r5(e,t=eN(t));null!==r&&lq(r,e,t),dl(e,t)}}var dd=!0;function dp(e,t,r,i){var a=H.T;H.T=null;var n=W.p;try{W.p=2,dh(e,t,r,i)}finally{W.p=n,H.T=a}}function df(e,t,r,i){var a=H.T;H.T=null;var n=W.p;try{W.p=8,dh(e,t,r,i)}finally{W.p=n,H.T=a}}function dh(e,t,r,i){if(dd){var a=dm(i);if(null===a)uU(e,t,i,dg,r),dT(e,i);else if(function(e,t,r,i,a){switch(t){case"focusin":return dx=dP(dx,e,t,r,i,a),!0;case"dragenter":return dw=dP(dw,e,t,r,i,a),!0;case"mouseover":return dS=dP(dS,e,t,r,i,a),!0;case"pointerover":var n=a.pointerId;return dk.set(n,dP(dk.get(n)||null,e,t,r,i,a)),!0;case"gotpointercapture":return n=a.pointerId,dC.set(n,dP(dC.get(n)||null,e,t,r,i,a)),!0}return!1}(a,e,t,r,i))i.stopPropagation();else if(dT(e,i),4&t&&-1<d_.indexOf(e)){for(;null!==a;){var n=e0(a);if(null!==n)switch(n.tag){case 3:if((n=n.stateNode).current.memoizedState.isDehydrated){var o=eA(n.pendingLanes);if(0!==o){var s=n;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var l=1<<31-eC(o);s.entanglements[1]|=l,o&=~l}uS(n),0==(6&ls)&&(lP=em()+500,uk(0,!1))}}break;case 31:case 13:null!==(s=r5(n,2))&&lq(s,n,2),lQ(),dl(n,2)}if(null===(n=dm(i))&&uU(e,t,i,dg,r),n===a)break;a=n}null!==a&&i.stopPropagation()}else uU(e,t,i,null,r)}}function dm(e){return dv(e=tI(e))}var dg=null;function dv(e){if(dg=null,null!==(e=eY(e))){var t=l(e);if(null===t)e=null;else{var r=t.tag;if(13===r){if(null!==(e=u(t)))return e;e=null}else if(31===r){if(null!==(e=c(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return dg=e,null}function dy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"resize":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(eg()){case ev:return 2;case ey:return 8;case eb:case ex:return 32;case ew:return 0x10000000;default:return 32}default:return 32}}var db=!1,dx=null,dw=null,dS=null,dk=new Map,dC=new Map,dE=[],d_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dT(e,t){switch(e){case"focusin":case"focusout":dx=null;break;case"dragenter":case"dragleave":dw=null;break;case"mouseover":case"mouseout":dS=null;break;case"pointerover":case"pointerout":dk.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dC.delete(t.pointerId)}}function dP(e,t,r,i,a,n){return null===e||e.nativeEvent!==n?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:n,targetContainers:[a]},null!==t&&null!==(t=e0(t))&&du(t)):(e.eventSystemFlags|=i,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a)),e}function dI(e){var t=eY(e.target);if(null!==t){var r=l(t);if(null!==r){if(13===(t=r.tag)){if(null!==(t=u(r))){e.blockedOn=t,eU(e.priority,function(){dc(r)});return}}else if(31===t){if(null!==(t=c(r))){e.blockedOn=t,eU(e.priority,function(){dc(r)});return}}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=3===r.tag?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function dA(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=dm(e.nativeEvent);if(null!==r)return null!==(t=e0(r))&&du(t),e.blockedOn=r,!1;var i=new(r=e.nativeEvent).constructor(r.type,r);tP=i,r.target.dispatchEvent(i),tP=null,t.shift()}return!0}function dO(e,t,r){dA(e)&&r.delete(t)}function dM(){db=!1,null!==dx&&dA(dx)&&(dx=null),null!==dw&&dA(dw)&&(dw=null),null!==dS&&dA(dS)&&(dS=null),dk.forEach(dO),dC.forEach(dO)}function dF(e,t){e.blockedOn===t&&(e.blockedOn=null,db||(db=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,dM)))}var dR=null;function dD(e){dR!==e&&(dR=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){dR===e&&(dR=null);for(var t=0;t<e.length;t+=3){var r=e[t],i=e[t+1],a=e[t+2];if("function"!=typeof i)if(null===dv(i||r))continue;else break;var n=e0(r);null!==n&&(e.splice(t,3),t-=3,n6(n,{pending:!0,data:a,method:r.method,action:i},i,a))}}))}function dj(e){function t(t){return dF(t,e)}null!==dx&&dF(dx,e),null!==dw&&dF(dw,e),null!==dS&&dF(dS,e),dk.forEach(t),dC.forEach(t);for(var r=0;r<dE.length;r++){var i=dE[r];i.blockedOn===e&&(i.blockedOn=null)}for(;0<dE.length&&null===(r=dE[0]).blockedOn;)dI(r),null===r.blockedOn&&dE.shift();if(null!=(r=(e.ownerDocument||e).$$reactFormReplay))for(i=0;i<r.length;i+=3){var a=r[i],n=r[i+1],o=a[eW]||null;if("function"==typeof n)o||dD(r);else if(o){var s=null;if(n&&n.hasAttribute("formAction")){if(a=n,o=n[eW]||null)s=o.formAction;else if(null!==dv(a))continue}else s=o.action;"function"==typeof s?r[i+1]=s:(r.splice(i,3),i-=3),dD(r)}}}function dL(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return a=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==a&&(a(),a=null),i||setTimeout(r,20)}function r(){if(!i&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"==typeof navigation){var i=!1,a=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(r,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==a&&(a(),a=null)}}}function dB(e){this._internalRoot=e}function dN(e){this._internalRoot=e}dN.prototype.render=dB.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));dn(t.current,lV(),e,t,null,null)},dN.prototype.unmount=dB.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dn(e.current,2,null,e,null,null),lQ(),t[eq]=null}},dN.prototype.unstable_scheduleHydration=function(e){if(e){var t=ez();e={blockedOn:null,target:e,priority:t};for(var r=0;r<dE.length&&0!==t&&t<dE[r].priority;r++);dE.splice(r,0,e),0===r&&dI(e)}};var d$=a.version;if("19.3.0-canary-f93b9fd4-20251217"!==d$)throw Error(o(527,d$,"19.3.0-canary-f93b9fd4-20251217"));if(W.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw Error(o(268,e=Object.keys(e).join(",")))}return null===(e=null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var r=e,i=t;;){var a=r.return;if(null===a)break;var n=a.alternate;if(null===n){if(null!==(i=a.return)){r=i;continue}break}if(a.child===n.child){for(n=a.child;n;){if(n===r)return d(a),e;if(n===i)return d(a),t;n=n.sibling}throw Error(o(188))}if(r.return!==i.return)r=a,i=n;else{for(var s=!1,u=a.child;u;){if(u===r){s=!0,r=a,i=n;break}if(u===i){s=!0,i=a,r=n;break}u=u.sibling}if(!s){for(u=n.child;u;){if(u===r){s=!0,r=n,i=a;break}if(u===i){s=!0,i=n,r=a;break}u=u.sibling}if(!s)throw Error(o(189))}}if(r.alternate!==i)throw Error(o(190))}if(3!==r.tag)throw Error(o(188));return r.stateNode.current===r?e:t}(t))?function e(t){var r=t.tag;if(5===r||26===r||27===r||6===r)return t;for(t=t.child;null!==t;){if(null!==(r=e(t)))return r;t=t.sibling}return null}(e):null)?null:e.stateNode},"u">typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var dz=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dz.isDisabled&&dz.supportsFiber)try{eS=dz.inject({bundleType:0,version:"19.3.0-canary-f93b9fd4-20251217",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.3.0-canary-f93b9fd4-20251217"}),ek=dz}catch(e){}}r.createRoot=function(e,t){if(!s(e))throw Error(o(299));var r=!1,i="",a=oy,n=ob,l=ox;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(n=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=da(e,1,!1,null,null,r,i,null,a,n,l,dL),e[eq]=t.current,u$(e),new dB(t)},r.hydrateRoot=function(e,t,r){if(!s(e))throw Error(o(299));var i,a=!1,n="",l=oy,u=ob,c=ox,d=null;return null!=r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(n=r.identifierPrefix),void 0!==r.onUncaughtError&&(l=r.onUncaughtError),void 0!==r.onCaughtError&&(u=r.onCaughtError),void 0!==r.onRecoverableError&&(c=r.onRecoverableError),void 0!==r.formState&&(d=r.formState)),(t=da(e,1,!0,t,null!=r?r:null,a,n,d,l,u,c,dL)).context=(i=null,ie),r=t.current,(n=aA(a=eN(a=lV()))).callback=null,aO(r,n,a),r=a,t.current.lanes=r,eD(t,r),uS(t),e[eq]=t.current,u$(e),new dN(t)},r.version="19.3.0-canary-f93b9fd4-20251217"},706381,(e,t,r)=>{"use strict";!function e(){if("u">typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),t.exports=e.r(90455)},73209,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i;if(!e&&t||e&&!t)return!1;for(i in e)if((!r||"default"!==i)&&e[i]!==t[i])return!1;for(i in t)if((!r||"default"!==i)&&!e[i])return!1;return!0}},926064,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getExportLazyStyleCode=function(e,t,r){let i=o(t,`!!${r}`);return e?`export * from ${i};
       export default exported;`:"module.exports = exported;"},r.getExportStyleCode=function(e,t,r){let i=o(t,`!!${r}`);return e?`export * from ${i};
       export default content && content.locals ? content.locals : undefined;`:"module.exports = content && content.locals || {};"},r.getImportInsertBySelectorCode=function(e,t,r,a){if("module-path"===r){let r=o(t,`${a.insert}`);return t.addBuildDependency(a.insert),e?`import insertFn from ${r};`:`var insertFn = require(${r});`}let n=o(t,`!${i.default.join("/ROOT/node_modules/style-loader/dist","runtime/insertBySelector.js")}`);return e?`import insertFn from ${n};`:`var insertFn = require(${n});`},r.getImportInsertStyleElementCode=function(e,t){let r=o(t,`!${i.default.join("/ROOT/node_modules/style-loader/dist","runtime/insertStyleElement.js")}`);return e?`import insertStyleElement from ${r};`:`var insertStyleElement = require(${r});`},r.getImportIsOldIECode=function(e,t){let r=o(t,`!${i.default.join("/ROOT/node_modules/style-loader/dist","runtime/isOldIE.js")}`);return e?`import isOldIE from ${r};`:`var isOldIE = require(${r});`},r.getImportLinkAPICode=function(e,t){let r=o(t,`!${i.default.join("/ROOT/node_modules/style-loader/dist","runtime/injectStylesIntoLinkTag.js")}`);return e?`import API from ${r};`:`var API = require(${r});`},r.getImportLinkContentCode=function(e,t,r){let i=o(t,`!!${r}`);return e?`import content from ${i};`:`var content = require(${i});`},r.getImportStyleAPICode=function(e,t){let r=o(t,`!${i.default.join("/ROOT/node_modules/style-loader/dist","runtime/injectStylesIntoStyleTag.js")}`);return e?`import API from ${r};`:`var API = require(${r});`},r.getImportStyleContentCode=function(e,t,r){let i=o(t,`!!${r}`);return e?`import content, * as namedExport from ${i};`:`var content = require(${i});`},r.getImportStyleDomAPICode=function(e,t,r,a){let n=o(t,`!${i.default.join("/ROOT/node_modules/style-loader/dist","runtime/styleDomAPI.js")}`),s=o(t,`!${i.default.join("/ROOT/node_modules/style-loader/dist","runtime/singletonStyleDomAPI.js")}`);return a?e?`import domAPI from ${n};
        import domAPISingleton from ${s};`:`var domAPI = require(${n});
        var domAPISingleton = require(${s});`:e?`import domAPI from ${r?s:n};`:`var domAPI = require(${r?s:n});`},r.getInsertOptionCode=function(e,t){if("module-path"===e)return"options.insert = insertFn;";let r=t.insert?JSON.stringify(t.insert):'"head"';return`options.insert = insertFn.bind(null, ${r});`},r.getLinkHmrCode=function(e,t,r){let i=o(t,`!!${r}`);return`
if (module.hot) {
  module.hot.accept(
    ${i},
    function() {
     ${e?"update(content);":`content = require(${i});

           content = content.__esModule ? content.default : content;

           update(content);`}
    }
  );

  module.hot.dispose(function() {
    update();
  });
}`},r.getSetAttributesCode=function(e,t,r){let a;return a=void 0!==r.attributes?"undefined"!==r.attributes.nonce?o(t,`!${i.default.join("/ROOT/node_modules/style-loader/dist","runtime/setAttributesWithAttributesAndNonce.js")}`):o(t,`!${i.default.join("/ROOT/node_modules/style-loader/dist","runtime/setAttributesWithAttributes.js")}`):o(t,`!${i.default.join("/ROOT/node_modules/style-loader/dist","runtime/setAttributesWithoutAttributes.js")}`),e?`import setAttributes from ${a};`:`var setAttributes = require(${a});`},r.getStyleHmrCode=function(e,t,r,i){let n=o(t,`!!${r}`);return`
if (module.hot) {
  if (!content.locals || module.hot.invalidate) {
    var isEqualLocals = ${a.default.toString()};
    var isNamedExport = ${!!e&&"!content.locals"};
    var oldLocals = isNamedExport ? namedExport : content.locals;

    module.hot.accept(
      ${n},
      function () {
        ${e?`if (!isEqualLocals(oldLocals, isNamedExport ? namedExport : content.locals, isNamedExport)) {
                module.hot.invalidate();

                return;
              }

              oldLocals = isNamedExport ? namedExport : content.locals;

              ${i?`if (update && refs > 0) {
                      update(content);
                    }`:"update(content);"}`:`content = require(${n});

              content = content.__esModule ? content.default : content;

              ${i?"":`if (typeof content === 'string') {
                      content = [[module.id, content, '']];
                    }`}

              if (!isEqualLocals(oldLocals, content.locals)) {
                module.hot.invalidate();

                return;
              }

              oldLocals = content.locals;

              ${i?`if (update && refs > 0) {
                        update(content);
                      }`:"update(content);"}`}
      }
    )
  }

  module.hot.dispose(function() {
    ${i?`if (update) {
            update();
          }`:"update();"}
  });
}
`},r.getStyleTagTransformFn=function(e,t){return t?"":"options.styleTagTransform = styleTagTransformFn"},r.getStyleTagTransformFnCode=function(e,t,r,a){if(a)return"";if(void 0!==r.styleTagTransform){let i=o(t,`${r.styleTagTransform}`);return t.addBuildDependency(r.styleTagTransform),e?`import styleTagTransformFn from ${i};`:`var styleTagTransformFn = require(${i});`}let n=o(t,`!${i.default.join("/ROOT/node_modules/style-loader/dist","runtime/styleTagTransform.js")}`);return e?`import styleTagTransformFn from ${n};`:`var styleTagTransformFn = require(${n});`},r.getdomAPI=function(e){return e?"isOldIE() ? domAPISingleton : domAPI":"domAPI"},r.stringifyRequest=o;var i=n(e.r(814747)),a=n(e.r(73209));function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return JSON.stringify(e.utils.contextify(e.context,t))}},466977,e=>{e.v({title:"Style Loader options",type:"object",properties:{injectType:{description:"Allows to setup how styles will be injected into DOM.",link:"https://github.com/webpack-contrib/style-loader#injecttype",enum:["styleTag","singletonStyleTag","autoStyleTag","lazyStyleTag","lazySingletonStyleTag","lazyAutoStyleTag","linkTag"]},attributes:{description:"Adds custom attributes to tag.",link:"https://github.com/webpack-contrib/style-loader#attributes",type:"object"},insert:{description:"Inserts `<style>`/`<link>` at the given position.",link:"https://github.com/webpack-contrib/style-loader#insert",type:"string"},base:{description:"Sets module ID base for DLLPlugin.",link:"https://github.com/webpack-contrib/style-loader#base",type:"number"},esModule:{description:"Use the ES modules syntax.",link:"https://github.com/webpack-contrib/css-loader#esmodule",type:"boolean"},styleTagTransform:{description:"Transform tag and css when insert 'style' tag into the DOM",link:"https://github.com/webpack-contrib/style-loader#styleTagTransform",type:"string"}},additionalProperties:!1})},891104,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e.r(814747)),a=e.r(926064),n=o(e.r(466977));function o(e){return e&&e.__esModule?e:{default:e}}let s=function(e){if(this._compiler&&this._compiler.options&&this._compiler.options.experiments&&this._compiler.options.experiments.css&&this._module&&("css"===this._module.type||"css/global"===this._module.type||"css/module"===this._module.type||"css/auto"===this._module.type))return e};s.pitch=function(e){if(this._compiler&&this._compiler.options&&this._compiler.options.experiments&&this._compiler.options.experiments.css&&this._module&&("css"===this._module.type||"css/global"===this._module.type||"css/module"===this._module.type||"css/auto"===this._module.type))return void this.emitWarning(Error('You can\'t use `experiments.css` (`experiments.futureDefaults` enable built-in CSS support by default) and `style-loader` together, please set `experiments.css` to `false` or set `{ type: "javascript/auto" }` for rules with `style-loader` in your webpack config (now `style-loader` does nothing).'));let t=this.getOptions(n.default),r=t.injectType||"styleTag",o=void 0===t.esModule||t.esModule,s={};t.attributes&&(s.attributes=t.attributes),t.base&&(s.base=t.base);let l=t.insert&&i.default.isAbsolute(t.insert)?"module-path":"selector";switch(r){case"linkTag":{let r=this.hot?(0,a.getLinkHmrCode)(o,this,e):"";return`
      ${(0,a.getImportLinkAPICode)(o,this)}
      ${(0,a.getImportInsertBySelectorCode)(o,this,l,t)}
      ${(0,a.getImportLinkContentCode)(o,this,e)}
      ${o?"":"content = content.__esModule ? content.default : content;"}

var options = ${JSON.stringify(s)};

${(0,a.getInsertOptionCode)(l,t)}

var update = API(content, options);

${r}

${o?"export default {}":""}`}case"lazyStyleTag":case"lazyAutoStyleTag":case"lazySingletonStyleTag":{let i="lazySingletonStyleTag"===r,n="lazyAutoStyleTag"===r,u=this.hot?(0,a.getStyleHmrCode)(o,this,e,!0):"";return`
      var exported = {};

      ${(0,a.getImportStyleAPICode)(o,this)}
      ${(0,a.getImportStyleDomAPICode)(o,this,i,n)}
      ${(0,a.getImportInsertBySelectorCode)(o,this,l,t)}
      ${(0,a.getSetAttributesCode)(o,this,t)}
      ${(0,a.getImportInsertStyleElementCode)(o,this)}
      ${(0,a.getStyleTagTransformFnCode)(o,this,t,i)}
      ${(0,a.getImportStyleContentCode)(o,this,e)}
      ${n?(0,a.getImportIsOldIECode)(o,this):""}
      ${o?`if (content && content.locals) {
              exported.locals = content.locals;
            }
            `:`content = content.__esModule ? content.default : content;

            exported.locals = content.locals || {};`}

var refs = 0;
var update;
var options = ${JSON.stringify(s)};

${(0,a.getStyleTagTransformFn)(t,i)};
options.setAttributes = setAttributes;
${(0,a.getInsertOptionCode)(l,t)}
options.domAPI = ${(0,a.getdomAPI)(n)};
options.insertStyleElement = insertStyleElement;

exported.use = function(insertOptions) {
  options.options = insertOptions || {};

  if (!(refs++)) {
    update = API(content, options);
  }

  return exported;
};
exported.unuse = function() {
  if (refs > 0 && !--refs) {
    update();
    update = null;
  }
};

${u}

${(0,a.getExportLazyStyleCode)(o,this,e)}
`}default:{let i="singletonStyleTag"===r,n="autoStyleTag"===r,u=this.hot?(0,a.getStyleHmrCode)(o,this,e,!1):"";return`
      ${(0,a.getImportStyleAPICode)(o,this)}
      ${(0,a.getImportStyleDomAPICode)(o,this,i,n)}
      ${(0,a.getImportInsertBySelectorCode)(o,this,l,t)}
      ${(0,a.getSetAttributesCode)(o,this,t)}
      ${(0,a.getImportInsertStyleElementCode)(o,this)}
      ${(0,a.getStyleTagTransformFnCode)(o,this,t,i)}
      ${(0,a.getImportStyleContentCode)(o,this,e)}
      ${n?(0,a.getImportIsOldIECode)(o,this):""}
      ${o?"":"content = content.__esModule ? content.default : content;"}

var options = ${JSON.stringify(s)};

${(0,a.getStyleTagTransformFn)(t,i)};
options.setAttributes = setAttributes;
${(0,a.getInsertOptionCode)(l,t)}
options.domAPI = ${(0,a.getdomAPI)(n)};
options.insertStyleElement = insertStyleElement;

var update = API(content, options);

${u}

${(0,a.getExportStyleCode)(o,this,e)}
`}}},r.default=s},192165,(e,t,r)=>{"use strict";t.exports=e.r(891104).default},560497,e=>{"use strict";let t,r,i,a,n,o,s,l,u,c,d,p,f,h;var m=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,g=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,v=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,y=e=>"string"==typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||"$"===e||"_"===e||g.test(e)),b=e=>"string"==typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"$"===e||"_"===e||""===e||""===e||v.test(e)),x=e=>"string"==typeof e&&/[0-9]/.test(e),w=e=>"string"==typeof e&&/[0-9A-Fa-f]/.test(e);function S(){if(t[a])return String.fromCodePoint(t.codePointAt(a))}function k(){let e=S();return"\n"===e?(n++,o=0):e?o+=e.length:o++,e&&(a+=e.length),e}let C={default(){let e;switch(h){case"	":case"\v":case"\f":case" ":case"":case"\uFEFF":case"\n":case"\r":case"\u2028":case"\u2029":k();return;case"/":k(),c="comment";return;case void 0:return k(),E("eof")}return"string"==typeof(e=h)&&m.test(e)?void k():C[r]()},comment(){switch(h){case"*":k(),c="multiLineComment";return;case"/":k(),c="singleLineComment";return}throw O(k())},multiLineComment(){switch(h){case"*":k(),c="multiLineCommentAsterisk";return;case void 0:throw O(k())}k()},multiLineCommentAsterisk(){switch(h){case"*":k();return;case"/":k(),c="default";return;case void 0:throw O(k())}k(),c="multiLineComment"},singleLineComment(){switch(h){case"\n":case"\r":case"\u2028":case"\u2029":k(),c="default";return;case void 0:return k(),E("eof")}k()},value(){switch(h){case"{":case"[":return E("punctuator",k());case"n":return k(),_("ull"),E("null",null);case"t":return k(),_("rue"),E("boolean",!0);case"f":return k(),_("alse"),E("boolean",!1);case"-":case"+":"-"===k()&&(f=-1),c="sign";return;case".":d=k(),c="decimalPointLeading";return;case"0":d=k(),c="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":d=k(),c="decimalInteger";return;case"I":return k(),_("nfinity"),E("numeric",1/0);case"N":return k(),_("aN"),E("numeric",NaN);case'"':case"'":p='"'===k(),d="",c="string";return}throw O(k())},identifierNameStartEscape(){if("u"!==h)throw O(k());k();let e=T();switch(e){case"$":case"_":break;default:if(!y(e))throw F()}d+=e,c="identifierName"},identifierName(){switch(h){case"$":case"_":case"":case"":d+=k();return;case"\\":k(),c="identifierNameEscape";return}if(b(h)){d+=k();return}return E("identifier",d)},identifierNameEscape(){if("u"!==h)throw O(k());k();let e=T();switch(e){case"$":case"_":case"":case"":break;default:if(!b(e))throw F()}d+=e,c="identifierName"},sign(){switch(h){case".":d=k(),c="decimalPointLeading";return;case"0":d=k(),c="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":d=k(),c="decimalInteger";return;case"I":return k(),_("nfinity"),E("numeric",1/0*f);case"N":return k(),_("aN"),E("numeric",NaN)}throw O(k())},zero(){switch(h){case".":d+=k(),c="decimalPoint";return;case"e":case"E":d+=k(),c="decimalExponent";return;case"x":case"X":d+=k(),c="hexadecimal";return}return E("numeric",0*f)},decimalInteger(){switch(h){case".":d+=k(),c="decimalPoint";return;case"e":case"E":d+=k(),c="decimalExponent";return}if(x(h)){d+=k();return}return E("numeric",f*Number(d))},decimalPointLeading(){if(x(h)){d+=k(),c="decimalFraction";return}throw O(k())},decimalPoint(){switch(h){case"e":case"E":d+=k(),c="decimalExponent";return}if(x(h)){d+=k(),c="decimalFraction";return}return E("numeric",f*Number(d))},decimalFraction(){switch(h){case"e":case"E":d+=k(),c="decimalExponent";return}if(x(h)){d+=k();return}return E("numeric",f*Number(d))},decimalExponent(){switch(h){case"+":case"-":d+=k(),c="decimalExponentSign";return}if(x(h)){d+=k(),c="decimalExponentInteger";return}throw O(k())},decimalExponentSign(){if(x(h)){d+=k(),c="decimalExponentInteger";return}throw O(k())},decimalExponentInteger(){if(x(h)){d+=k();return}return E("numeric",f*Number(d))},hexadecimal(){if(w(h)){d+=k(),c="hexadecimalInteger";return}throw O(k())},hexadecimalInteger(){if(w(h)){d+=k();return}return E("numeric",f*Number(d))},string(){switch(h){case"\\":k(),d+=function(){switch(S()){case"b":return k(),"\b";case"f":return k(),"\f";case"n":return k(),"\n";case"r":return k(),"\r";case"t":return k(),"	";case"v":return k(),"\v";case"0":if(k(),x(S()))throw O(k());return"\0";case"x":return k(),function(){let e="",t=S();if(!w(t)||(e+=k(),!w(t=S())))throw O(k());return String.fromCodePoint(parseInt(e+=k(),16))}();case"u":return k(),T();case"\n":case"\u2028":case"\u2029":return k(),"";case"\r":return k(),"\n"===S()&&k(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw O(k())}return k()}();return;case'"':if(p)return k(),E("string",d);d+=k();return;case"'":if(!p)return k(),E("string",d);d+=k();return;case"\n":case"\r":case void 0:throw O(k());case"\u2028":case"\u2029":var e;e=h,console.warn(`JSON5: '${R(e)}' in strings is not valid ECMAScript; consider escaping`)}d+=k()},start(){switch(h){case"{":case"[":return E("punctuator",k())}c="value"},beforePropertyName(){switch(h){case"$":case"_":d=k(),c="identifierName";return;case"\\":k(),c="identifierNameStartEscape";return;case"}":return E("punctuator",k());case'"':case"'":p='"'===k(),c="string";return}if(y(h)){d+=k(),c="identifierName";return}throw O(k())},afterPropertyName(){if(":"===h)return E("punctuator",k());throw O(k())},beforePropertyValue(){c="value"},afterPropertyValue(){switch(h){case",":case"}":return E("punctuator",k())}throw O(k())},beforeArrayValue(){if("]"===h)return E("punctuator",k());c="value"},afterArrayValue(){switch(h){case",":case"]":return E("punctuator",k())}throw O(k())},end(){throw O(k())}};function E(e,t){return{type:e,value:t,line:n,column:o}}function _(e){for(let t of e){if(S()!==t)throw O(k());k()}}function T(){let e="",t=4;for(;t-- >0;){if(!w(S()))throw O(k());e+=k()}return String.fromCodePoint(parseInt(e,16))}let P={start(){if("eof"===s.type)throw M();I()},beforePropertyName(){switch(s.type){case"identifier":case"string":l=s.value,r="afterPropertyName";return;case"punctuator":A();return;case"eof":throw M()}},afterPropertyName(){if("eof"===s.type)throw M();r="beforePropertyValue"},beforePropertyValue(){if("eof"===s.type)throw M();I()},beforeArrayValue(){if("eof"===s.type)throw M();"punctuator"===s.type&&"]"===s.value?A():I()},afterPropertyValue(){if("eof"===s.type)throw M();switch(s.value){case",":r="beforePropertyName";return;case"}":A()}},afterArrayValue(){if("eof"===s.type)throw M();switch(s.value){case",":r="beforeArrayValue";return;case"]":A()}},end(){}};function I(){let e;switch(s.type){case"punctuator":switch(s.value){case"{":e={};break;case"[":e=[]}break;case"null":case"boolean":case"numeric":case"string":e=s.value}if(void 0===u)u=e;else{let t=i[i.length-1];Array.isArray(t)?t.push(e):Object.defineProperty(t,l,{value:e,writable:!0,enumerable:!0,configurable:!0})}if(null!==e&&"object"==typeof e)i.push(e),r=Array.isArray(e)?"beforeArrayValue":"beforePropertyName";else{let e=i[i.length-1];r=null==e?"end":Array.isArray(e)?"afterArrayValue":"afterPropertyValue"}}function A(){i.pop();let e=i[i.length-1];r=null==e?"end":Array.isArray(e)?"afterArrayValue":"afterPropertyValue"}function O(e){return void 0===e?D(`JSON5: invalid end of input at ${n}:${o}`):D(`JSON5: invalid character '${R(e)}' at ${n}:${o}`)}function M(){return D(`JSON5: invalid end of input at ${n}:${o}`)}function F(){return o-=5,D(`JSON5: invalid identifier character at ${n}:${o}`)}function R(e){let t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[e])return t[e];if(e<" "){let t=e.charCodeAt(0).toString(16);return"\\x"+("00"+t).substring(t.length)}return e}function D(e){let t=SyntaxError(e);return t.lineNumber=n,t.columnNumber=o,t}e.s(["default",0,{parse:function(e,m){t=String(e),r="start",i=[],a=0,n=1,o=0,s=void 0,l=void 0,u=void 0;do s=function(){for(c="default",d="",p=!1,f=1;;){h=S();let e=C[c]();if(e)return e}}(),P[r]();while("eof"!==s.type)return"function"==typeof m?function e(t,r,i){let a=t[r];if(null!=a&&"object"==typeof a)if(Array.isArray(a))for(let t=0;t<a.length;t++){let r=String(t),n=e(a,r,i);void 0===n?delete a[r]:Object.defineProperty(a,r,{value:n,writable:!0,enumerable:!0,configurable:!0})}else for(let t in a){let r=e(a,t,i);void 0===r?delete a[t]:Object.defineProperty(a,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}return i.call(t,r,a)}({"":u},"",m):u},stringify:function(e,t,r){let i,a,n,o=[],s="",l="";if(null==t||"object"!=typeof t||Array.isArray(t)||(r=t.space,n=t.quote,t=t.replacer),"function"==typeof t)a=t;else if(Array.isArray(t))for(let e of(i=[],t)){let t;"string"==typeof e?t=e:("number"==typeof e||e instanceof String||e instanceof Number)&&(t=String(e)),void 0!==t&&0>i.indexOf(t)&&i.push(t)}return r instanceof Number?r=Number(r):r instanceof String&&(r=String(r)),"number"==typeof r?r>0&&(r=Math.min(10,Math.floor(r)),l="          ".substr(0,r)):"string"==typeof r&&(l=r.substr(0,10)),function e(t,r){let n=r[t];switch(null!=n&&("function"==typeof n.toJSON5?n=n.toJSON5(t):"function"==typeof n.toJSON&&(n=n.toJSON(t))),a&&(n=a.call(r,t,n)),n instanceof Number?n=Number(n):n instanceof String?n=String(n):n instanceof Boolean&&(n=n.valueOf()),n){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof n?u(n,!1):"number"==typeof n?String(n):"object"==typeof n?Array.isArray(n)?function(t){let r;if(o.indexOf(t)>=0)throw TypeError("Converting circular structure to JSON5");o.push(t);let i=s;s+=l;let a=[];for(let r=0;r<t.length;r++){let i=e(String(r),t);a.push(void 0!==i?i:"null")}if(0===a.length)r="[]";else if(""===l)r="["+a.join(",")+"]";else{let e=",\n"+s,t=a.join(e);r="[\n"+s+t+",\n"+i+"]"}return o.pop(),s=i,r}(n):function(t){let r;if(o.indexOf(t)>=0)throw TypeError("Converting circular structure to JSON5");o.push(t);let a=s;s+=l;let n=i||Object.keys(t),c=[];for(let r of n){let i=e(r,t);if(void 0!==i){let e=function(e){if(0===e.length)return u(e,!0);let t=String.fromCodePoint(e.codePointAt(0));if(!y(t))return u(e,!0);for(let r=t.length;r<e.length;r++)if(!b(String.fromCodePoint(e.codePointAt(r))))return u(e,!0);return e}(r)+":";""!==l&&(e+=" "),e+=i,c.push(e)}}if(0===c.length)r="{}";else{let e;if(""===l)r="{"+(e=c.join(","))+"}";else{let t=",\n"+s;e=c.join(t),r="{\n"+s+e+",\n"+a+"}"}}return o.pop(),s=a,r}(n):void 0}("",{"":e});function u(e){let t={"'":.1,'"':.2},r={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},i="";for(let a=0;a<e.length;a++){let n=e[a];switch(n){case"'":case'"':t[n]++,i+=n;continue;case"\0":if(x(e[a+1])){i+="\\x00";continue}}if(r[n]){i+=r[n];continue}if(n<" "){let e=n.charCodeAt(0).toString(16);i+="\\x"+("00"+e).substring(e.length);continue}i+=n}let a=n||Object.keys(t).reduce((e,r)=>t[e]<t[r]?e:r);return i=i.replace(RegExp(a,"g"),r[a]),a+i+a}}}])},728110,(e,t,r)=>{"use strict";let i=e.r(560497),a={null:null,true:!0,false:!1};t.exports=function(e){if("?"!==e.substr(0,1))throw Error("A valid query string passed to parseQuery should begin with '?'");if(!(e=e.substr(1)))return{};if("{"===e.substr(0,1)&&"}"===e.substr(-1))return i.parse(e);let t=e.split(/[,&]/g),r=Object.create(null);return t.forEach(e=>{let t=e.indexOf("=");if(t>=0){let i=e.substr(0,t),n=decodeURIComponent(e.substr(t+1));a.hasOwnProperty(n)&&(n=a[n]),"[]"===i.substr(-2)?(Array.isArray(r[i=decodeURIComponent(i.substr(0,i.length-2))])||(r[i]=[]),r[i].push(n)):r[i=decodeURIComponent(i)]=n}else"-"===e.substr(0,1)?r[decodeURIComponent(e.substr(1))]=!1:"+"===e.substr(0,1)?r[decodeURIComponent(e.substr(1))]=!0:r[decodeURIComponent(e)]=!0}),r}},457241,(e,t,r)=>{"use strict";let i=e.r(728110);t.exports=function(e){let t=e.query;return"string"==typeof t&&""!==t?i(e.query):t&&"object"==typeof t?t:{}}},907474,(e,t,r)=>{"use strict";let i=e.r(814747),a=/^\.\.?[/\\]/;function n(e){return i.posix.isAbsolute(e)||i.win32.isAbsolute(e)}t.exports=function(e,t){let r=t.split("!"),o=e.context||e.options&&e.options.context;return JSON.stringify(r.map(e=>{let t=e.match(/^(.*?)(\?.*)/),r=t?t[2]:"",s=t?t[1]:e;if(n(s)&&o){var l;if(n(s=i.relative(o,s)))return s+r;!1===(l=s,a.test(l))&&(s="./"+s)}return s.replace(/\\/g,"/")+r}).join("!"))}},528652,(e,t,r)=>{"use strict";t.exports=function(e){return e.remainingRequest?e.remainingRequest:e.loaders.slice(e.loaderIndex+1).map(e=>e.request).concat([e.resource]).join("!")}},824980,(e,t,r)=>{"use strict";t.exports=function(e){return e.currentRequest?e.currentRequest:e.loaders.slice(e.loaderIndex).map(e=>e.request).concat([e.resource]).join("!")}},31764,(e,t,r)=>{"use strict";let i=e.r(814747);t.exports=function(e,t){return!(/^[a-z][a-z0-9+.-]*:/i.test(e)&&!i.win32.isAbsolute(e)||/^\/\//.test(e)||/^[{}[\]#*;,'$%&(=?`^<>]/.test(e)||(void 0===t||!1===t)&&/^\//.test(e))}},464817,(e,t,r)=>{"use strict";let i=/^[A-Z]:[/\\]|^\\\\/i;t.exports=function(e,t){let r;if(""===e)return"";let a=/^[^?]*~/;if(i.test(e))r=e;else if(void 0!==t&&!1!==t&&/^\//.test(e))switch(typeof t){case"string":r=a.test(t)?t.replace(/([^~/])$/,"$1/")+e.slice(1):t+e;break;case"boolean":r=e;break;default:throw Error("Unexpected parameters to loader-utils 'urlToRequest': url = "+e+", root = "+t+".")}else r=/^\.\.?\//.test(e)?e:"./"+e;return a.test(r)&&(r=r.replace(a,"")),r}},20814,(e,t,r)=>{"use strict";t.exports=function e(t){try{if('"'===t[0])return JSON.parse(t);if("'"===t[0]&&"'"===t.substr(t.length-1))return e(t.replace(/\\.|"/g,e=>'"'===e?'\\"':e).replace(/^'|'$/g,'"'));return JSON.parse('"'+t+'"')}catch(e){return t}}},195459,e=>{"use strict";var t="[big.js] ",r=t+"Invalid ",i=r+"decimal places",a=r+"rounding mode",n=t+"Division by zero",o={},s=void 0,l=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function u(e,t,r,i){var n=e.c,o=e.e+t+1;if(o<n.length){if(1===r)i=n[o]>=5;else if(2===r)i=n[o]>5||5==n[o]&&(i||o<0||n[o+1]!==s||1&n[o-1]);else if(3===r)i=i||!!n[0];else if(i=!1,0!==r)throw Error(a);if(o<1)n.length=1,i?(e.e=-t,n[0]=1):n[0]=e.e=0;else{if(n.length=o--,i)for(;++n[o]>9;)n[o]=0,o--||(++e.e,n.unshift(1));for(o=n.length;!n[--o];)n.pop()}}else if(r<0||r>3||r!==~~r)throw Error(a);return e}function c(e,t,a,n){var o,l,c=e.constructor,d=!e.c[0];if(a!==s){if(a!==~~a||a<(3==t)||a>1e6)throw Error(3==t?r+"precision":i);for(a=n-(e=new c(e)).e,e.c.length>++n&&u(e,a,c.RM),2==t&&(n=e.e+a+1);e.c.length<n;)e.c.push(0)}if(o=e.e,a=(l=e.c.join("")).length,2!=t&&(1==t||3==t&&n<=o||o<=c.NE||o>=c.PE))l=l.charAt(0)+(a>1?"."+l.slice(1):"")+(o<0?"e":"e+")+o;else if(o<0){for(;++o;)l="0"+l;l="0."+l}else if(o>0)if(++o>a)for(o-=a;o--;)l+="0";else o<a&&(l=l.slice(0,o)+"."+l.slice(o));else a>1&&(l=l.charAt(0)+"."+l.slice(1));return e.s<0&&(!d||4==t)?"-"+l:l}o.abs=function(){var e=new this.constructor(this);return e.s=1,e},o.cmp=function(e){var t,r=this.c,i=(e=new this.constructor(e)).c,a=this.s,n=e.s,o=this.e,s=e.e;if(!r[0]||!i[0])return r[0]?a:i[0]?-n:0;if(a!=n)return a;if(t=a<0,o!=s)return o>s^t?1:-1;for(a=-1,n=(o=r.length)<(s=i.length)?o:s;++a<n;)if(r[a]!=i[a])return r[a]>i[a]^t?1:-1;return o==s?0:o>s^t?1:-1},o.div=function(e){var t=this.constructor,r=this.c,a=(e=new t(e)).c,o=this.s==e.s?1:-1,l=t.DP;if(l!==~~l||l<0||l>1e6)throw Error(i);if(!a[0])throw Error(n);if(!r[0])return new t(0*o);var c,d,p,f,h,m=a.slice(),g=c=a.length,v=r.length,y=r.slice(0,c),b=y.length,x=e,w=x.c=[],S=0,k=l+(x.e=this.e-e.e)+1;for(x.s=o,o=k<0?0:k,m.unshift(0);b++<c;)y.push(0);do{for(p=0;p<10;p++){if(c!=(b=y.length))f=c>b?1:-1;else for(h=-1,f=0;++h<c;)if(a[h]!=y[h]){f=a[h]>y[h]?1:-1;break}if(f<0){for(d=b==c?a:m;b;){if(y[--b]<d[b]){for(h=b;h&&!y[--h];)y[h]=9;--y[h],y[b]+=10}y[b]-=d[b]}for(;!y[0];)y.shift()}else break}w[S++]=f?p:++p,y[0]&&f?y[b]=r[g]||0:y=[r[g]]}while((g++<v||y[0]!==s)&&o--)return!w[0]&&1!=S&&(w.shift(),x.e--),S>k&&u(x,l,t.RM,y[0]!==s),x},o.eq=function(e){return!this.cmp(e)},o.gt=function(e){return this.cmp(e)>0},o.gte=function(e){return this.cmp(e)>-1},o.lt=function(e){return 0>this.cmp(e)},o.lte=function(e){return 1>this.cmp(e)},o.minus=o.sub=function(e){var t,r,i,a,n=this.constructor,o=this.s,s=(e=new n(e)).s;if(o!=s)return e.s=-s,this.plus(e);var l=this.c.slice(),u=this.e,c=e.c,d=e.e;if(!l[0]||!c[0])return c[0]?(e.s=-s,e):new n(l[0]?this:0);if(o=u-d){for((a=o<0)?(o=-o,i=l):(d=u,i=c),i.reverse(),s=o;s--;)i.push(0);i.reverse()}else for(r=((a=l.length<c.length)?l:c).length,o=s=0;s<r;s++)if(l[s]!=c[s]){a=l[s]<c[s];break}if(a&&(i=l,l=c,c=i,e.s=-e.s),(s=(r=c.length)-(t=l.length))>0)for(;s--;)l[t++]=0;for(s=t;r>o;){if(l[--r]<c[r]){for(t=r;t&&!l[--t];)l[t]=9;--l[t],l[r]+=10}l[r]-=c[r]}for(;0===l[--s];)l.pop();for(;0===l[0];)l.shift(),--d;return l[0]||(e.s=1,l=[d=0]),e.c=l,e.e=d,e},o.mod=function(e){var t,r=this,i=r.constructor,a=r.s,o=(e=new i(e)).s;if(!e.c[0])throw Error(n);return(r.s=e.s=1,t=1==e.cmp(r),r.s=a,e.s=o,t)?new i(r):(a=i.DP,o=i.RM,i.DP=i.RM=0,r=r.div(e),i.DP=a,i.RM=o,this.minus(r.times(e)))},o.plus=o.add=function(e){var t,r=this.constructor,i=this.s,a=(e=new r(e)).s;if(i!=a)return e.s=-a,this.minus(e);var n=this.e,o=this.c,s=e.e,l=e.c;if(!o[0]||!l[0])return l[0]?e:new r(o[0]?this:0*i);if(o=o.slice(),i=n-s){for(i>0?(s=n,t=l):(i=-i,t=o),t.reverse();i--;)t.push(0);t.reverse()}for(o.length-l.length<0&&(t=l,l=o,o=t),i=l.length,a=0;i;o[i]%=10)a=(o[--i]=o[i]+l[i]+a)/10|0;for(a&&(o.unshift(a),++s),i=o.length;0===o[--i];)o.pop();return e.c=o,e.e=s,e},o.pow=function(e){var t=this,i=new t.constructor(1),a=i,n=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(r+"exponent");for(n&&(e=-e);1&e&&(a=a.times(t)),e>>=1;)t=t.times(t);return n?i.div(a):a},o.round=function(e,t){var r=this.constructor;if(e===s)e=0;else if(e!==~~e||e<-1e6||e>1e6)throw Error(i);return u(new r(this),e,t===s?r.RM:t)},o.sqrt=function(){var e,r,i,a=this.constructor,n=this.s,o=this.e,s=new a(.5);if(!this.c[0])return new a(this);if(n<0)throw Error(t+"No square root");0===(n=Math.sqrt(this+""))||n===1/0?((r=this.c.join("")).length+o&1||(r+="0"),o=((o+1)/2|0)-(o<0||1&o),e=new a(((n=Math.sqrt(r))==1/0?"1e":(n=n.toExponential()).slice(0,n.indexOf("e")+1))+o)):e=new a(n),o=e.e+(a.DP+=4);do i=e,e=s.times(i.plus(this.div(i)));while(i.c.slice(0,o).join("")!==e.c.slice(0,o).join(""))return u(e,a.DP-=4,a.RM)},o.times=o.mul=function(e){var t,r=this.constructor,i=this.c,a=(e=new r(e)).c,n=i.length,o=a.length,s=this.e,l=e.e;if(e.s=this.s==e.s?1:-1,!i[0]||!a[0])return new r(0*e.s);for(e.e=s+l,n<o&&(t=i,i=a,a=t,l=n,n=o,o=l),t=Array(l=n+o);l--;)t[l]=0;for(s=o;s--;){for(o=0,l=n+s;l>s;)o=t[l]+a[s]*i[l-s-1]+o,t[l--]=o%10,o=o/10|0;t[l]=(t[l]+o)%10}for(o?++e.e:t.shift(),s=t.length;!t[--s];)t.pop();return e.c=t,e},o.toExponential=function(e){return c(this,1,e,e)},o.toFixed=function(e){return c(this,2,e,this.e+e)},o.toPrecision=function(e){return c(this,3,e,e-1)},o.toString=function(){return c(this)},o.valueOf=o.toJSON=function(){return c(this,4)};var d=function e(){function t(i){if(!(this instanceof t))return i===s?e():new t(i);i instanceof t?(this.s=i.s,this.e=i.e,this.c=i.c.slice()):function(e,t){var i,a,n;if(0===t&&1/t<0)t="-0";else if(!l.test(t+=""))throw Error(r+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(i=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(i<0&&(i=a),i+=+t.slice(a+1),t=t.substring(0,a)):i<0&&(i=t.length),n=t.length,a=0;a<n&&"0"==t.charAt(a);)++a;if(a==n)e.c=[e.e=0];else{for(;n>0&&"0"==t.charAt(--n););for(e.e=i-a-1,e.c=[],i=0;a<=n;)e.c[i++]=+t.charAt(a++)}}(this,i),this.constructor=t}return t.prototype=o,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.version="5.2.2",t}();e.s(["Big",()=>d,"default",0,d])},308313,(e,t,r)=>{"use strict";let i=-4&Math.floor(16368);class a{constructor(e,t,r,i){const a=e.exports;a.init(),this.exports=a,this.mem=Buffer.from(a.memory.buffer,0,65536),this.buffered=0,this.instancesPool=t,this.chunkSize=r,this.digestSize=i}reset(){this.buffered=0,this.exports.init()}update(e,t){if("string"==typeof e){for(;e.length>i;)this._updateWithShortString(e.slice(0,i),t),e=e.slice(i);return this._updateWithShortString(e,t),this}return this._updateWithBuffer(e),this}_updateWithShortString(e,t){let r,{exports:i,buffered:a,mem:n,chunkSize:o}=this;if(e.length<70)if(t&&"utf-8"!==t&&"utf8"!==t)if("latin1"===t){r=a;for(let t=0;t<e.length;t++){let i=e.charCodeAt(t);n[r++]=i}}else r=a+n.write(e,a,t);else{r=a;for(let i=0;i<e.length;i++){let a=e.charCodeAt(i);if(a<128)n[r++]=a;else if(a<2048)n[r]=a>>6|192,n[r+1]=63&a|128,r+=2;else{r+=n.write(e.slice(i),r,t);break}}}else r=a+n.write(e,a,t);if(r<o)this.buffered=r;else{let e=r&~(this.chunkSize-1);i.update(e);let t=r-e;this.buffered=t,t>0&&n.copyWithin(0,e,r)}}_updateWithBuffer(e){let{exports:t,buffered:r,mem:i}=this,a=e.length;if(r+a<this.chunkSize)e.copy(i,r,0,a),this.buffered+=a;else{let n=r+a&~(this.chunkSize-1);if(n>65536){let a=65536-r;e.copy(i,r,0,a),t.update(65536);let o=n-r-65536;for(;a<o;)e.copy(i,0,a,a+65536),t.update(65536),a+=65536;e.copy(i,0,a,n-r),t.update(n-r-a)}else e.copy(i,r,0,n-r),t.update(n);let o=a+r-n;this.buffered=o,o>0&&e.copy(i,0,a-o,a)}}digest(e){let{exports:t,buffered:r,mem:i,digestSize:a}=this;t.final(r),this.instancesPool.push(this);let n=i.toString("latin1",0,a);return"hex"===e?n:"binary"!==e&&e?Buffer.from(n,"hex").toString(e):Buffer.from(n,"hex")}}t.exports=(e,t,r,i)=>{if(!(t.length>0))return new a(new WebAssembly.Instance(e),t,r,i);{let e=t.pop();return e.reset(),e}},t.exports.MAX_SHORT_STRING=i},142910,(e,t,r)=>{"use strict";let i=e.r(308313),a=new WebAssembly.Module(Buffer.from("AGFzbQEAAAABCAJgAX8AYAAAAwUEAQAAAAUDAQABBhoFfwFBAAt/AUEAC38BQQALfwFBAAt/AUEACwciBARpbml0AAAGdXBkYXRlAAIFZmluYWwAAwZtZW1vcnkCAAqFEAQmAEGBxpS6BiQBQYnXtv5+JAJB/rnrxXkkA0H2qMmBASQEQQAkAAvMCgEYfyMBIQojAiEGIwMhByMEIQgDQCAAIAVLBEAgBSgCCCINIAcgBiAFKAIEIgsgCCAHIAUoAgAiDCAKIAggBiAHIAhzcXNqakEDdyIDIAYgB3Nxc2pqQQd3IgEgAyAGc3FzampBC3chAiAFKAIUIg8gASACIAUoAhAiCSADIAEgBSgCDCIOIAYgAyACIAEgA3Nxc2pqQRN3IgQgASACc3FzampBA3ciAyACIARzcXNqakEHdyEBIAUoAiAiEiADIAEgBSgCHCIRIAQgAyAFKAIYIhAgAiAEIAEgAyAEc3FzampBC3ciAiABIANzcXNqakETdyIEIAEgAnNxc2pqQQN3IQMgBSgCLCIVIAQgAyAFKAIoIhQgAiAEIAUoAiQiEyABIAIgAyACIARzcXNqakEHdyIBIAMgBHNxc2pqQQt3IgIgASADc3FzampBE3chBCAPIBAgCSAVIBQgEyAFKAI4IhYgAiAEIAUoAjQiFyABIAIgBSgCMCIYIAMgASAEIAEgAnNxc2pqQQN3IgEgAiAEc3FzampBB3ciAiABIARzcXNqakELdyIDIAkgAiAMIAEgBSgCPCIJIAQgASADIAEgAnNxc2pqQRN3IgEgAiADcnEgAiADcXJqakGZ84nUBWpBA3ciAiABIANycSABIANxcmpqQZnzidQFakEFdyIEIAEgAnJxIAEgAnFyaiASakGZ84nUBWpBCXciAyAPIAQgCyACIBggASADIAIgBHJxIAIgBHFyampBmfOJ1AVqQQ13IgEgAyAEcnEgAyAEcXJqakGZ84nUBWpBA3ciAiABIANycSABIANxcmpqQZnzidQFakEFdyIEIAEgAnJxIAEgAnFyampBmfOJ1AVqQQl3IgMgECAEIAIgFyABIAMgAiAEcnEgAiAEcXJqakGZ84nUBWpBDXciASADIARycSADIARxcmogDWpBmfOJ1AVqQQN3IgIgASADcnEgASADcXJqakGZ84nUBWpBBXciBCABIAJycSABIAJxcmpqQZnzidQFakEJdyIDIBEgBCAOIAIgFiABIAMgAiAEcnEgAiAEcXJqakGZ84nUBWpBDXciASADIARycSADIARxcmpqQZnzidQFakEDdyICIAEgA3JxIAEgA3FyampBmfOJ1AVqQQV3IgQgASACcnEgASACcXJqakGZ84nUBWpBCXciAyAMIAIgAyAJIAEgAyACIARycSACIARxcmpqQZnzidQFakENdyIBcyAEc2pqQaHX5/YGakEDdyICIAQgASACcyADc2ogEmpBodfn9gZqQQl3IgRzIAFzampBodfn9gZqQQt3IgMgAiADIBggASADIARzIAJzampBodfn9gZqQQ93IgFzIARzaiANakGh1+f2BmpBA3ciAiAUIAQgASACcyADc2pqQaHX5/YGakEJdyIEcyABc2pqQaHX5/YGakELdyIDIAsgAiADIBYgASADIARzIAJzampBodfn9gZqQQ93IgFzIARzampBodfn9gZqQQN3IgIgEyAEIAEgAnMgA3NqakGh1+f2BmpBCXciBHMgAXNqakGh1+f2BmpBC3chAyAKIA4gAiADIBcgASADIARzIAJzampBodfn9gZqQQ93IgFzIARzampBodfn9gZqQQN3IgJqIQogBiAJIAEgESADIAIgFSAEIAEgAnMgA3NqakGh1+f2BmpBCXciBHMgAXNqakGh1+f2BmpBC3ciAyAEcyACc2pqQaHX5/YGakEPd2ohBiADIAdqIQcgBCAIaiEIIAVBQGshBQwBCwsgCiQBIAYkAiAHJAMgCCQECw0AIAAQASMAIABqJAAL/wQCA38BfiMAIABqrUIDhiEEIABByABqQUBxIgJBCGshAyAAIgFBAWohACABQYABOgAAA0AgACACSUEAIABBB3EbBEAgAEEAOgAAIABBAWohAAwBCwsDQCAAIAJJBEAgAEIANwMAIABBCGohAAwBCwsgAyAENwMAIAIQAUEAIwGtIgRC//8DgyAEQoCA/P8Pg0IQhoQiBEL/gYCA8B+DIARCgP6DgIDgP4NCCIaEIgRCj4C8gPCBwAeDQgiGIARC8IHAh4CegPgAg0IEiIQiBEKGjJiw4MCBgwZ8QgSIQoGChIiQoMCAAYNCJ34gBEKw4MCBg4aMmDCEfDcDAEEIIwKtIgRC//8DgyAEQoCA/P8Pg0IQhoQiBEL/gYCA8B+DIARCgP6DgIDgP4NCCIaEIgRCj4C8gPCBwAeDQgiGIARC8IHAh4CegPgAg0IEiIQiBEKGjJiw4MCBgwZ8QgSIQoGChIiQoMCAAYNCJ34gBEKw4MCBg4aMmDCEfDcDAEEQIwOtIgRC//8DgyAEQoCA/P8Pg0IQhoQiBEL/gYCA8B+DIARCgP6DgIDgP4NCCIaEIgRCj4C8gPCBwAeDQgiGIARC8IHAh4CegPgAg0IEiIQiBEKGjJiw4MCBgwZ8QgSIQoGChIiQoMCAAYNCJ34gBEKw4MCBg4aMmDCEfDcDAEEYIwStIgRC//8DgyAEQoCA/P8Pg0IQhoQiBEL/gYCA8B+DIARCgP6DgIDgP4NCCIaEIgRCj4C8gPCBwAeDQgiGIARC8IHAh4CegPgAg0IEiIQiBEKGjJiw4MCBgwZ8QgSIQoGChIiQoMCAAYNCJ34gBEKw4MCBg4aMmDCEfDcDAAs=","base64"));t.exports=i.bind(null,a,[],64,32)},516462,(e,t,r)=>{let i=e.r(308313).MAX_SHORT_STRING;t.exports=class{constructor(e){this.string=void 0,this.encoding=void 0,this.hash=e}update(e,t){if(void 0!==this.string){if("string"==typeof e&&t===this.encoding&&this.string.length+e.length<i)return this.string+=e,this;this.hash.update(this.string,this.encoding),this.string=void 0}return"string"==typeof e?!(e.length<i)||t&&t.startsWith("ba")?this.hash.update(e,t):(this.string=e,this.encoding=t):this.hash.update(e),this}digest(e){return void 0!==this.string&&this.hash.update(this.string,this.encoding),this.hash.digest(e)}}},883962,(e,t,r)=>{"use strict";let i,a,n={26:"abcdefghijklmnopqrstuvwxyz",32:"123456789abcdefghjkmnpqrstuvwxyz",36:"0123456789abcdefghijklmnopqrstuvwxyz",49:"abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",52:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",58:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",62:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",64:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"};t.exports=function(t,r,o,s){let l;r=r||"md4",s=s||9999;try{l=e.r(254799).createHash(r)}catch(t){if("ERR_OSSL_EVP_UNSUPPORTED"===t.code&&"md4"===r&&(void 0===i&&(i=e.r(142910),void 0===a&&(a=e.r(516462))),l=new a(i())),!l)throw t}return(l.update(t),"base26"===o||"base32"===o||"base36"===o||"base49"===o||"base52"===o||"base58"===o||"base62"===o)?(function(t,r){let i=n[r];if(!i)throw Error("Unknown encoding base"+r);let a=t.length,o=e.r(195459);o.RM=o.DP=0;let s=new o(0);for(let e=a-1;e>=0;e--)s=s.times(256).plus(t[e]);let l="";for(;s.gt(0);)l=i[s.mod(r)]+l,s=s.div(r);return o.DP=20,o.RM=1,l})(l.digest(),o.substr(4)).substr(0,s):l.digest(o||"hex").substr(0,s)}},41036,(e,t,r)=>{t.exports=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","#","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","*","","","","","","","","0","","","1","2","","","3","4","5","6","7","8","9","","",""]},528878,(e,t,r)=>{"use strict";let i=e.r(814747),a=e.r(41036),n=e.r(883962),o=/[\uD800-\uDFFF]./,s=a.filter(e=>o.test(e)),l={};t.exports=function(e,t,r){let a,o=e.resourceQuery&&e.resourceQuery.length>1;a="function"==typeof t?t(e.resourcePath,o?e.resourceQuery:void 0):t||"[hash].[ext]";let u=r.context,c=r.content,d=r.regExp,p="bin",f="file",h="",m="",g="";if(e.resourcePath){let t=i.parse(e.resourcePath),r=e.resourcePath;t.ext&&(p=t.ext.substr(1)),t.dir&&(f=t.name,r=t.dir+i.sep),1===(h=void 0!==u?(h=i.relative(u,r+"_").replace(/\\/g,"/").replace(/\.\.(\/)?/g,"_$1")).substr(0,h.length-1):r.replace(/\\/g,"/").replace(/\.\.(\/)?/g,"_$1")).length?h="":h.length>1&&(m=i.basename(h))}if(e.resourceQuery&&e.resourceQuery.length>1){let t=(g=e.resourceQuery).indexOf("#");t>=0&&(g=g.substr(0,t))}let v=a;if(c&&(v=v.replace(/\[(?:([^[:\]]+):)?(?:hash|contenthash)(?::([a-z]+\d*))?(?::(\d+))?\]/gi,(e,t,r,i)=>n(c,t,r,parseInt(i,10))).replace(/\[emoji(?::(\d+))?\]/gi,(e,t)=>(function(e,t){if(l[e])return l[e];t=t||1;let r=[];do{if(!s.length)throw Error("Ran out of emoji");let e=Math.floor(Math.random()*s.length);r.push(s[e]),s.splice(e,1)}while(--t>0)let i=r.join("");return l[e]=i,i})(c,parseInt(t,10)))),v=v.replace(/\[ext\]/gi,()=>p).replace(/\[name\]/gi,()=>f).replace(/\[path\]/gi,()=>h).replace(/\[folder\]/gi,()=>m).replace(/\[query\]/gi,()=>g),d&&e.resourcePath){let t=e.resourcePath.match(new RegExp(d));t&&t.forEach((e,t)=>{v=v.replace(RegExp("\\["+t+"\\]","ig"),e)})}return"object"==typeof e.options&&"function"==typeof e.options.customInterpolateName&&(v=e.options.customInterpolateName.call(e,v,t,r)),v}},537675,(e,t,r)=>{"use strict";let i=e.r(457241),a=e.r(728110),n=e.r(907474),o=e.r(528652),s=e.r(824980),l=e.r(31764),u=e.r(464817),c=e.r(20814),d=e.r(883962),p=e.r(528878);r.getOptions=i,r.parseQuery=a,r.stringifyRequest=n,r.getRemainingRequest=o,r.getCurrentRequest=s,r.isUrlRequest=l,r.urlToRequest=u,r.parseString=c,r.getHashDigest=d,r.interpolateName=p},447082,(e,t,r)=>{t.exports=e.x("postcss-9745a0d11e3197ae",()=>require("postcss-9745a0d11e3197ae"))},703341,(e,t,r)=>{t.exports=e.x("postcss-9745a0d11e3197ae/package.json",()=>require("postcss-9745a0d11e3197ae/package.json"))},245442,(e,t,r)=>{"use strict";function i(e,t,r){return{dataPath:void 0,schemaPath:void 0,keyword:"absolutePath",params:{absolutePath:r},message:e,parentSchema:t}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.default=function(e){return e.addKeyword("absolutePath",{errors:!0,type:"string",compile(e,t){let r=a=>{let n=!0;(a.includes("!")&&(r.errors=[i(`The provided value ${JSON.stringify(a)} contains exclamation mark (!) which is not allowed because it's reserved for loader syntax.`,t,a)],n=!1),e!==/^(?:[A-Za-z]:(\\|\/)|\\\\|\/)/.test(a))&&(r.errors=[i(e?`The provided value ${JSON.stringify(a)} is not an absolute path!`:`A relative path is expected. However, the provided value ${JSON.stringify(a)} is an absolute path!`,t,a)],n=!1);return n};return r.errors=[],r}}),e}},284083,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i,a,n,o,s,l,u,c=" ",d=e.level,p=e.dataLevel,f=e.schema[t],h=e.schemaPath+e.util.getProperty(t),m=e.errSchemaPath+"/"+t,g=!e.opts.allErrors,v="data"+(p||""),y="valid"+d,b="errs__"+d,x=e.opts.$data&&f&&f.$data;x?(c+=" var schema"+d+" = "+e.util.getData(f.$data,p,e.dataPathArr)+"; ",u="schema"+d):u=f;var w="definition"+d,S=this.definition,k="";if(x&&S.$data){s="keywordValidate"+d;var C=S.validateSchema;c+=" var "+w+" = RULES.custom['"+t+"'].definition; var "+s+" = "+w+".validate;"}else{if(!(o=e.useCustomRule(this,f,e.schema,e)))return;u="validate.schema"+h,s=o.code,i=S.compile,a=S.inline,n=S.macro}var E=s+".errors",_="i"+d,T="ruleErr"+d,P=S.async;if(P&&!e.async)throw Error("async keyword in sync schema");if(a||n||(c+=""+E+" = null;"),c+="var "+b+" = errors;var "+y+";",x&&S.$data&&(k+="}",c+=" if ("+u+" === undefined) { "+y+" = true; } else { ",C&&(k+="}",c+=" "+y+" = "+w+".validateSchema("+u+"); if ("+y+") { ")),a)S.statements?c+=" "+o.validate+" ":c+=" "+y+" = "+o.validate+"; ";else if(n){var I=e.util.copy(e),k="";I.level++;var A="valid"+I.level;I.schema=o.validate,I.schemaPath="";var O=e.compositeRule;e.compositeRule=I.compositeRule=!0;var M=e.validate(I).replace(/validate\.schema/g,s);e.compositeRule=I.compositeRule=O,c+=" "+M}else{var F=F||[];F.push(c),c="  "+s+".call( ",e.opts.passContext?c+="this":c+="self",i||!1===S.schema?c+=" , "+v+" ":c+=" , "+u+" , "+v+" , validate.schema"+e.schemaPath+" ",c+=" , (dataPath || '')",'""'!=e.errorPath&&(c+=" + "+e.errorPath);var R=p?"data"+(p-1||""):"parentData",D=p?e.dataPathArr[p]:"parentDataProperty",j=c+=" , "+R+" , "+D+" , rootData )  ";c=F.pop(),!1===S.errors?(c+=" "+y+" = ",P&&(c+="await "),c+=""+j+"; "):P?c+=" var "+(E="customErrors"+d)+" = null; try { "+y+" = await "+j+"; } catch (e) { "+y+" = false; if (e instanceof ValidationError) "+E+" = e.errors; else throw e; } ":c+=" "+E+" = null; "+y+" = "+j+"; "}if(S.modifying&&(c+=" if ("+R+") "+v+" = "+R+"["+D+"];"),c+=""+k,S.valid)g&&(c+=" if (true) { ");else{c+=" if ( ",void 0===S.valid?(c+=" !",n?c+=""+A:c+=""+y):c+=" "+!S.valid+" ",c+=") { ",l=this.keyword;var F=F||[];F.push(c),c="";var F=F||[];F.push(c),c="",!1!==e.createErrors?(c+=" { keyword: '"+(l||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(m)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(c+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(c+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),c+=" } "):c+=" {} ";var L=c;c=F.pop(),!e.compositeRule&&g?e.async?c+=" throw new ValidationError(["+L+"]); ":c+=" validate.errors = ["+L+"]; return false; ":c+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var B=c;c=F.pop(),a?S.errors?"full"!=S.errors&&(c+="  for (var "+_+"="+b+"; "+_+"<errors; "+_+"++) { var "+T+" = vErrors["+_+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+T+".schemaPath === undefined) { "+T+'.schemaPath = "'+m+'"; } ',e.opts.verbose&&(c+=" "+T+".schema = "+u+"; "+T+".data = "+v+"; "),c+=" } "):!1===S.errors?c+=" "+B+" ":(c+=" if ("+b+" == errors) { "+B+" } else {  for (var "+_+"="+b+"; "+_+"<errors; "+_+"++) { var "+T+" = vErrors["+_+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+T+".schemaPath === undefined) { "+T+'.schemaPath = "'+m+'"; } ',e.opts.verbose&&(c+=" "+T+".schema = "+u+"; "+T+".data = "+v+"; "),c+=" } } "):n?(c+="   var err =   ",!1!==e.createErrors?(c+=" { keyword: '"+(l||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(m)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(c+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(c+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),c+=" } "):c+=" {} ",c+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&g&&(e.async?c+=" throw new ValidationError(vErrors); ":c+=" validate.errors = vErrors; return false; ")):!1===S.errors?c+=" "+B+" ":(c+=" if (Array.isArray("+E+")) { if (vErrors === null) vErrors = "+E+"; else vErrors = vErrors.concat("+E+"); errors = vErrors.length;  for (var "+_+"="+b+"; "+_+"<errors; "+_+"++) { var "+T+" = vErrors["+_+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+";  "+T+'.schemaPath = "'+m+'";  ',e.opts.verbose&&(c+=" "+T+".schema = "+u+"; "+T+".data = "+v+"; "),c+=" } } else { "+B+" } "),c+=" } ",g&&(c+=" else { ")}return c}},34587,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.default=function(t){return!function(t,r,i){let a;try{let n;a=e.r(284083);let{RULES:o}=t;for(let e=0;e<o.length;e++){let t=o[e];if(void 0===t.type){n=t;break}}let s={keyword:r,definition:i,custom:!0,code:a,implements:i.implements};n.rules.unshift(s),o.custom[r]=s,o.keywords[r]=!0,o.all[r]=!0}catch(e){}}(t,"undefinedAsNull",{modifying:!0,validate:(e,t,r,i,a,n)=>(e&&r&&void 0!==r.enum&&a&&"number"==typeof n&&void 0===a[n]&&(a[n]=null),!0)}),t}},889096,(e,t,r)=>{"use strict";class i{static getOperator(e,t){return"left"===e?t?">":">=":t?"<":"<="}static formatRight(e,t,r){return!1===t?i.formatLeft(e,!t,!r):`should be ${i.getOperator("right",r)} ${e}`}static formatLeft(e,t,r){return!1===t?i.formatRight(e,!t,!r):`should be ${i.getOperator("left",r)} ${e}`}static formatRange(e,t,r,a,n){let o="should be";return o+(` ${i.getOperator(n?"left":"right",n?r:!r)} ${e} `+(n?"and":"or")+` ${i.getOperator(n?"right":"left",n?a:!a)} ${t}`)}static getRangeValue(e,t){let r=t?1/0:-1/0,i=-1,a=t?([e])=>e<=r:([e])=>e>=r;for(let t=0;t<e.length;t++)a(e[t])&&([r]=e[t],i=t);return i>-1?e[i]:[1/0,!0]}constructor(){this._left=[],this._right=[]}left(e,t=!1){this._left.push([e,t])}right(e,t=!1){this._right.push([e,t])}format(e=!0){let[t,r]=i.getRangeValue(this._left,e),[a,n]=i.getRangeValue(this._right,!e);if(!Number.isFinite(t)&&!Number.isFinite(a))return"";let o=r?t+1:t;return o===(n?a-1:a)?`should be ${e?"":"!"}= ${o}`:Number.isFinite(t)&&!Number.isFinite(a)?i.formatLeft(t,e,r):!Number.isFinite(t)&&Number.isFinite(a)?i.formatRight(a,e,n):i.formatRange(t,a,r,n,e)}}t.exports=i},263617,(e,t,r)=>{"use strict";let i=e.r(889096);t.exports.stringHints=function(e,t){let r=[],i="string",a={...e};if(!t){let e=a.minLength,t=a.formatMinimum,r=a.formatExclusiveMaximum;a.minLength=a.maxLength,a.maxLength=e,a.formatMinimum=a.formatMaximum,a.formatMaximum=t,a.formatExclusiveMaximum=!a.formatExclusiveMinimum,a.formatExclusiveMinimum=!r}if("number"==typeof a.minLength)if(1===a.minLength)i="non-empty string";else{let e=Math.max(a.minLength-1,0);r.push(`should be longer than ${e} character${e>1?"s":""}`)}if("number"==typeof a.maxLength)if(0===a.maxLength)i="empty string";else{let e=a.maxLength+1;r.push(`should be shorter than ${e} character${e>1?"s":""}`)}return a.pattern&&r.push(`should${t?"":" not"} match pattern ${JSON.stringify(a.pattern)}`),a.format&&r.push(`should${t?"":" not"} match format ${JSON.stringify(a.format)}`),a.formatMinimum&&r.push(`should be ${a.formatExclusiveMinimum?">":">="} ${JSON.stringify(a.formatMinimum)}`),a.formatMaximum&&r.push(`should be ${a.formatExclusiveMaximum?"<":"<="} ${JSON.stringify(a.formatMaximum)}`),[i].concat(r)},t.exports.numberHints=function(e,t){let r=["integer"===e.type?"integer":"number"],a=new i;"number"==typeof e.minimum&&a.left(e.minimum),"number"==typeof e.exclusiveMinimum&&a.left(e.exclusiveMinimum,!0),"number"==typeof e.maximum&&a.right(e.maximum),"number"==typeof e.exclusiveMaximum&&a.right(e.exclusiveMaximum,!0);let n=a.format(t);return n&&r.push(n),"number"==typeof e.multipleOf&&r.push(`should${t?"":" not"} be multiple of ${e.multipleOf}`),r}},529837,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;let{stringHints:i,numberHints:a}=e.r(263617),n={type:1,not:1,oneOf:1,anyOf:1,if:1,enum:1,const:1,instanceof:1,required:2,pattern:2,patternRequired:2,format:2,formatMinimum:2,formatMaximum:2,minimum:2,exclusiveMinimum:2,maximum:2,exclusiveMaximum:2,multipleOf:2,uniqueItems:2,contains:2,minLength:2,maxLength:2,minItems:2,maxItems:2,minProperties:2,maxProperties:2,dependencies:2,propertyNames:2,additionalItems:2,additionalProperties:2,absolutePath:2};function o(e,t){let r=e.reduce((e,r)=>Math.max(e,t(r)),0);return e.filter(e=>t(e)===r)}function s(e){let{schema:t}=e;return Array.isArray(t)?t.map(({$ref:e})=>e).filter(e=>e):[]}function l(e,t){return e.replace(/\n(?!$)/g,`
${t}`)}function u(e){let t=function e(t){return t.not?e(t.not):t}(e);return d(t)||p(t)||f(t)||v(t)||h(t)}function c(e){return"object"==typeof e&&null!==e}function d(e){return"number"===e.type||void 0!==e.minimum||void 0!==e.exclusiveMinimum||void 0!==e.maximum||void 0!==e.exclusiveMaximum||void 0!==e.multipleOf}function p(e){return"integer"===e.type||void 0!==e.minimum||void 0!==e.exclusiveMinimum||void 0!==e.maximum||void 0!==e.exclusiveMaximum||void 0!==e.multipleOf}function f(e){return"string"===e.type||void 0!==e.minLength||void 0!==e.maxLength||void 0!==e.pattern||void 0!==e.format||void 0!==e.formatMinimum||void 0!==e.formatMaximum}function h(e){return"boolean"===e.type}function m(e){return"array"===e.type||"number"==typeof e.minItems||"number"==typeof e.maxItems||void 0!==e.uniqueItems||void 0!==e.items||void 0!==e.additionalItems||void 0!==e.contains}function g(e){return"object"===e.type||void 0!==e.minProperties||void 0!==e.maxProperties||void 0!==e.required||void 0!==e.properties||void 0!==e.patternProperties||void 0!==e.additionalProperties||void 0!==e.dependencies||void 0!==e.propertyNames||void 0!==e.patternRequired}function v(e){return"null"===e.type}function y(e){if(!e)return"";if(!e.type){if(d(e)||p(e))return" | should be any non-number";if(f(e))return" | should be any non-string";if(m(e))return" | should be any non-array";if(g(e))return" | should be any non-object"}return""}function b(e){return e.length>0?`(${e.join(", ")})`:""}function x(e,t){return d(e)||p(e)?a(e,t):f(e)?i(e,t):[]}r.default=class extends Error{constructor(e,t,r={}){let i,a;if(super(),this.name="ValidationError",this.errors=e,this.schema=t,t.title&&(!r.name||!r.baseDataPath)){const e=t.title.match(/^(.+) (.+)$/);e&&(r.name||([,i]=e),r.baseDataPath||([,,a]=e))}this.headerName=r.name||i||"Object",this.baseDataPath=r.baseDataPath||a||"configuration",this.postFormatter=r.postFormatter||null;const n=`Invalid ${this.baseDataPath} object. ${this.headerName} has been initialized using ${function(e){return/^[aeiou]/i.test(e)?"an":"a"}(this.baseDataPath)} ${this.baseDataPath} object that does not match the API schema.
`;this.message=`${n}${this.formatValidationErrors(e)}`,Error.captureStackTrace(this,this.constructor)}getSchemaPart(e){let t=e.split("/"),r=this.schema;for(let e=1;e<t.length;e++){let i=r[t[e]];if(!i)break;r=i}return r}formatSchema(e,t=!0,r=[]){let i=t,a=(t,a)=>a?r.includes(t)?"(recursive)":this.formatSchema(t,i,r.concat(e)):this.formatSchema(t,i,r);if(e.not&&!g(e)){if(u(e.not))return i=!t,a(e.not);let r=!e.not.not,n=t?"":"non ";return i=!t,r?n+a(e.not):a(e.not)}if(e.instanceof){let{instanceof:t}=e;return(Array.isArray(t)?t:[t]).map(e=>"Function"===e?"function":e).join(" | ")}if(e.enum){let t=e.enum.map(t=>null===t&&e.undefinedAsNull?`${JSON.stringify(t)} | undefined`:JSON.stringify(t)).join(" | ");return`${t}`}if(void 0!==e.const)return JSON.stringify(e.const);if(e.oneOf)return e.oneOf.map(e=>a(e,!0)).join(" | ");if(e.anyOf)return e.anyOf.map(e=>a(e,!0)).join(" | ");if(e.allOf)return e.allOf.map(e=>a(e,!0)).join(" & ");if(e.if){let{if:t,then:r,else:i}=e;return`${t?`if ${a(t)}`:""}${r?` then ${a(r)}`:""}${i?` else ${a(i)}`:""}`}if(e.$ref)return a(this.getSchemaPart(e.$ref),!0);if(d(e)||p(e)){let[r,...i]=x(e,t),a=`${r}${i.length>0?` ${b(i)}`:""}`;return t?a:i.length>0?`non-${r} | ${a}`:`non-${r}`}if(f(e)){let[r,...i]=x(e,t),a=`${r}${i.length>0?` ${b(i)}`:""}`;return t?a:"string"===a?"non-string":`non-string | ${a}`}if(h(e))return`${t?"":"non-"}boolean`;if(m(e)){i=!0;let t=[];"number"==typeof e.minItems&&t.push(`should not have fewer than ${e.minItems} item${e.minItems>1?"s":""}`),"number"==typeof e.maxItems&&t.push(`should not have more than ${e.maxItems} item${e.maxItems>1?"s":""}`),e.uniqueItems&&t.push("should not have duplicate items");let r=void 0===e.additionalItems||!!e.additionalItems,n="";return e.items?Array.isArray(e.items)&&e.items.length>0?(n=`${e.items.map(e=>a(e)).join(", ")}`,r&&e.additionalItems&&c(e.additionalItems)&&Object.keys(e.additionalItems).length>0&&t.push(`additional items should be ${a(e.additionalItems)}`)):n=e.items&&Object.keys(e.items).length>0?`${a(e.items)}`:"any":n="any",e.contains&&Object.keys(e.contains).length>0&&t.push(`should contains at least one ${this.formatSchema(e.contains)} item`),`[${n}${r?", ...":""}]${t.length>0?` (${t.join(", ")})`:""}`}if(g(e)){i=!0;let t=[];if("number"==typeof e.minProperties&&t.push(`should not have fewer than ${e.minProperties} ${e.minProperties>1?"properties":"property"}`),"number"==typeof e.maxProperties&&t.push(`should not have more than ${e.maxProperties} ${e.minProperties&&e.minProperties>1?"properties":"property"}`),e.patternProperties&&Object.keys(e.patternProperties).length>0){let r=Object.keys(e.patternProperties);t.push(`additional property names should match pattern${r.length>1?"s":""} ${r.map(e=>JSON.stringify(e)).join(" | ")}`)}let r=e.properties?Object.keys(e.properties):[],n=e.required?e.required:[],o=[...new Set([].concat(n).concat(r))].map(e=>{let t=n.includes(e);return`${e}${t?"":"?"}`}).concat(void 0===e.additionalProperties||e.additionalProperties?e.additionalProperties&&c(e.additionalProperties)?[`<key>: ${a(e.additionalProperties)}`]:[""]:[]).join(", "),{dependencies:s,propertyNames:l,patternRequired:u}=e;return s&&Object.keys(s).forEach(e=>{let r=s[e];Array.isArray(r)?t.push(`should have ${r.length>1?"properties":"property"} ${r.map(e=>`'${e}'`).join(", ")} when property '${e}' is present`):t.push(`should be valid according to the schema ${a(r)} when property '${e}' is present`)}),l&&Object.keys(l).length>0&&t.push(`each property name should match format ${JSON.stringify(e.propertyNames.format)}`),u&&u.length>0&&t.push(`should have property matching pattern ${u.map(e=>JSON.stringify(e))}`),`object {${o?` ${o} `:""}}${t.length>0?` (${t.join(", ")})`:""}`}return v(e)?`${t?"":"non-"}null`:Array.isArray(e.type)?`${e.type.join(" | ")}`:JSON.stringify(e,null,2)}getSchemaPartText(e,t,r=!1,i=!0){if(!e)return"";if(Array.isArray(t))for(let r=0;r<t.length;r++){let i=e[t[r]];if(i)e=i;else break}for(;e.$ref;)e=this.getSchemaPart(e.$ref);let a=`${this.formatSchema(e,i)}${r?".":""}`;return e.description&&(a+=`
-> ${e.description}`),e.link&&(a+=`
-> Read more at ${e.link}`),a}getSchemaPartDescription(e){if(!e)return"";for(;e.$ref;)e=this.getSchemaPart(e.$ref);let t="";return e.description&&(t+=`
-> ${e.description}`),e.link&&(t+=`
-> Read more at ${e.link}`),t}formatValidationError(e){let{keyword:t,dataPath:r}=e,i=`${this.baseDataPath}${r}`;switch(t){case"type":{let{parentSchema:t,params:r}=e;switch(r.type){case"number":case"string":case"boolean":case"null":return`${i} should be a ${this.getSchemaPartText(t,!1,!0)}`;case"integer":return`${i} should be an ${this.getSchemaPartText(t,!1,!0)}`;case"array":return`${i} should be an array:
${this.getSchemaPartText(t)}`;case"object":return`${i} should be an object:
${this.getSchemaPartText(t)}`;default:return`${i} should be:
${this.getSchemaPartText(t)}`}}case"instanceof":{let{parentSchema:t}=e;return`${i} should be an instance of ${this.getSchemaPartText(t,!1,!0)}`}case"pattern":{let{params:t,parentSchema:r}=e,{pattern:a}=t;return`${i} should match pattern ${JSON.stringify(a)}${y(r)}.${this.getSchemaPartDescription(r)}`}case"format":{let{params:t,parentSchema:r}=e,{format:a}=t;return`${i} should match format ${JSON.stringify(a)}${y(r)}.${this.getSchemaPartDescription(r)}`}case"formatMinimum":case"formatMaximum":{let{params:t,parentSchema:r}=e,{comparison:a,limit:n}=t;return`${i} should be ${a} ${JSON.stringify(n)}${y(r)}.${this.getSchemaPartDescription(r)}`}case"minimum":case"maximum":case"exclusiveMinimum":case"exclusiveMaximum":{let{parentSchema:t,params:r}=e,{comparison:a,limit:n}=r,[,...o]=x(t,!0);return 0===o.length&&o.push(`should be ${a} ${n}`),`${i} ${o.join(" ")}${y(t)}.${this.getSchemaPartDescription(t)}`}case"multipleOf":{let{params:t,parentSchema:r}=e,{multipleOf:a}=t;return`${i} should be multiple of ${a}${y(r)}.${this.getSchemaPartDescription(r)}`}case"patternRequired":{let{params:t,parentSchema:r}=e,{missingPattern:a}=t;return`${i} should have property matching pattern ${JSON.stringify(a)}${y(r)}.${this.getSchemaPartDescription(r)}`}case"minLength":{let{params:t,parentSchema:r}=e,{limit:a}=t;if(1===a)return`${i} should be a non-empty string${y(r)}.${this.getSchemaPartDescription(r)}`;let n=a-1;return`${i} should be longer than ${n} character${n>1?"s":""}${y(r)}.${this.getSchemaPartDescription(r)}`}case"minItems":{let{params:t,parentSchema:r}=e,{limit:a}=t;if(1===a)return`${i} should be a non-empty array${y(r)}.${this.getSchemaPartDescription(r)}`;return`${i} should not have fewer than ${a} items${y(r)}.${this.getSchemaPartDescription(r)}`}case"minProperties":{let{params:t,parentSchema:r}=e,{limit:a}=t;if(1===a)return`${i} should be a non-empty object${y(r)}.${this.getSchemaPartDescription(r)}`;return`${i} should not have fewer than ${a} properties${y(r)}.${this.getSchemaPartDescription(r)}`}case"maxLength":{let{params:t,parentSchema:r}=e,{limit:a}=t,n=a+1;return`${i} should be shorter than ${n} character${n>1?"s":""}${y(r)}.${this.getSchemaPartDescription(r)}`}case"maxItems":{let{params:t,parentSchema:r}=e,{limit:a}=t;return`${i} should not have more than ${a} items${y(r)}.${this.getSchemaPartDescription(r)}`}case"maxProperties":{let{params:t,parentSchema:r}=e,{limit:a}=t;return`${i} should not have more than ${a} properties${y(r)}.${this.getSchemaPartDescription(r)}`}case"uniqueItems":{let{params:t,parentSchema:r}=e,{i:a}=t;return`${i} should not contain the item '${e.data[a]}' twice${y(r)}.${this.getSchemaPartDescription(r)}`}case"additionalItems":{let{params:t,parentSchema:r}=e,{limit:a}=t;return`${i} should not have more than ${a} items${y(r)}. These items are valid:
${this.getSchemaPartText(r)}`}case"contains":{let{parentSchema:t}=e;return`${i} should contains at least one ${this.getSchemaPartText(t,["contains"])} item${y(t)}.`}case"required":{let{parentSchema:t,params:r}=e,a=r.missingProperty.replace(/^\./,""),n=t&&!!(t.properties&&t.properties[a]);return`${i} misses the property '${a}'${y(t)}.${n?` Should be:
${this.getSchemaPartText(t,["properties",a])}`:this.getSchemaPartDescription(t)}`}case"additionalProperties":{let{params:t,parentSchema:r}=e,{additionalProperty:a}=t;return`${i} has an unknown property '${a}'${y(r)}. These properties are valid:
${this.getSchemaPartText(r)}`}case"dependencies":{let{params:t,parentSchema:r}=e,{property:a,deps:n}=t,o=n.split(",").map(e=>`'${e.trim()}'`).join(", ");return`${i} should have properties ${o} when property '${a}' is present${y(r)}.${this.getSchemaPartDescription(r)}`}case"propertyNames":{let{params:t,parentSchema:r,schema:a}=e,{propertyName:n}=t;return`${i} property name '${n}' is invalid${y(r)}. Property names should be match format ${JSON.stringify(a.format)}.${this.getSchemaPartDescription(r)}`}case"enum":{let{parentSchema:t}=e;if(t&&t.enum&&1===t.enum.length)return`${i} should be ${this.getSchemaPartText(t,!1,!0)}`;return`${i} should be one of these:
${this.getSchemaPartText(t)}`}case"const":{let{parentSchema:t}=e;return`${i} should be equal to constant ${this.getSchemaPartText(t,!1,!0)}`}case"not":{let t=g(e.parentSchema)?`
${this.getSchemaPartText(e.parentSchema)}`:"",r=this.getSchemaPartText(e.schema,!1,!1,!1);if(u(e.schema))return`${i} should be any ${r}${t}.`;let{schema:a,parentSchema:n}=e;return`${i} should not be ${this.getSchemaPartText(a,!1,!0)}${n&&g(n)?`
${this.getSchemaPartText(n)}`:""}`}case"oneOf":case"anyOf":{let{parentSchema:t,children:r}=e;if(r&&r.length>0){let a;if(1===e.schema.length){let e=r[r.length-1],i=r.slice(0,r.length-1);return this.formatValidationError(Object.assign({},e,{children:i,parentSchema:Object.assign({},t,e.parentSchema)}))}let u=(a=o(a=r,e=>e.dataPath?e.dataPath.length:0),a=o(a,e=>n[e.keyword]||2));if(1===u.length)return this.formatValidationError(u[0]);return u=function(e){let t=[],r=e.length-1;for(;r>0;){let i=e[r];if("anyOf"===i.keyword||"oneOf"===i.keyword){let a=s(i),n=function e(t,r){let i=t.length-1,a=e=>0!==t[i].schemaPath.indexOf(e);for(;i>-1&&!r.every(a);)if("anyOf"===t[i].keyword||"oneOf"===t[i].keyword){let r=s(t[i]);i=e(t.slice(0,i),r.concat(t[i].schemaPath))-1}else i-=1;return i+1}(e.slice(0,r),a.concat(i.schemaPath));n!==r?(t.push(Object.assign({},i,{children:e.slice(n,r)})),r=n):t.push(i)}else t.push(i);r-=1}return 0===r&&t.push(e[r]),t.reverse()}(u),`${i} should be one of these:
${this.getSchemaPartText(t)}
Details:
${u.map(e=>` * ${l(this.formatValidationError(e),"   ")}`).join("\n")}`}return`${i} should be one of these:
${this.getSchemaPartText(t)}`}case"if":{let{params:t,parentSchema:r}=e,{failingKeyword:a}=t;return`${i} should match "${a}" schema:
${this.getSchemaPartText(r,[a])}`}case"absolutePath":{let{message:t,parentSchema:r}=e;return`${i}: ${t}${this.getSchemaPartDescription(r)}`}default:{let{message:t,parentSchema:r}=e,a=JSON.stringify(e,null,2);return`${i} ${t} (${a}).
${this.getSchemaPartText(r,!1)}`}}}formatValidationErrors(e){return e.map(e=>{let t=this.formatValidationError(e);return this.postFormatter&&(t=this.postFormatter(t,e)),` - ${l(t,"   ")}`}).join("\n")}}},217942,(e,t,r)=>{e.e,function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!(t.length>1))return t[0];t[0]=t[0].slice(0,-1);for(var i=t.length-1,a=1;a<i;++a)t[a]=t[a].slice(1,-1);return t[i]=t[i].slice(1),t.join("")}function r(e){return"(?:"+e+")"}function i(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function a(e){return e.toUpperCase()}function n(e){var i="[A-Za-z]",a="[0-9]",n=t(a,"[A-Fa-f]"),o=r(r("%[EFef]"+n+"%"+n+n+"%"+n+n)+"|"+r("%[89A-Fa-f]"+n+"%"+n+n)+"|"+r("%"+n+n)),s="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",l=t("[\\:\\/\\?\\#\\[\\]\\@]",s),u=e?"[\\uE000-\\uF8FF]":"[]",c=t(i,a,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),d=r(i+t(i,a,"[\\+\\-\\.]")+"*"),p=r(r(o+"|"+t(c,s,"[\\:]"))+"*"),f=(r(r("25[0-5]")+"|"+r("2[0-4]"+a)+"|"+r("1"+a+a)+"|"+r("[1-9]"+a)+"|"+a),r(r("25[0-5]")+"|"+r("2[0-4]"+a)+"|"+r("1"+a+a)+"|"+r("0?[1-9]"+a)+"|0?0?"+a)),h=r(f+"\\."+f+"\\."+f+"\\."+f),m=r(n+"{1,4}"),g=r(r(m+"\\:"+m)+"|"+h),v=r(r(m+"\\:")+"{6}"+g),y=r("\\:\\:"+r(m+"\\:")+"{5}"+g),b=r(r(m)+"?\\:\\:"+r(m+"\\:")+"{4}"+g),x=r(r(r(m+"\\:")+"{0,1}"+m)+"?\\:\\:"+r(m+"\\:")+"{3}"+g),w=r(r(r(m+"\\:")+"{0,2}"+m)+"?\\:\\:"+r(m+"\\:")+"{2}"+g),S=r(r(r(m+"\\:")+"{0,3}"+m)+"?\\:\\:"+m+"\\:"+g),k=r(r(r(m+"\\:")+"{0,4}"+m)+"?\\:\\:"+g),C=r(r(r(m+"\\:")+"{0,5}"+m)+"?\\:\\:"+m),E=r(r(r(m+"\\:")+"{0,6}"+m)+"?\\:\\:"),_=r([v,y,b,x,w,S,k,C,E].join("|")),T=r(r(c+"|"+o)+"+"),P=(r(_+"\\%25"+T),r(_+r("\\%25|\\%(?!"+n+"{2})")+T)),I=r("[vV]"+n+"+\\."+t(c,s,"[\\:]")+"+"),A=r("\\["+r(P+"|"+_+"|"+I)+"\\]"),O=r(r(o+"|"+t(c,s))+"*"),M=r(A+"|"+h+"(?!"+O+")|"+O),F=r(a+"*"),R=r(r(p+"@")+"?"+M+r("\\:"+F)+"?"),D=r(o+"|"+t(c,s,"[\\:\\@]")),j=r(D+"*"),L=r(D+"+"),B=r(r(o+"|"+t(c,s,"[\\@]"))+"+"),N=r(r("\\/"+j)+"*"),$=r("\\/"+r(L+N)+"?"),z=r(B+N),U=r(L+N),V="(?!"+D+")",H=(r(N+"|"+$+"|"+z+"|"+U+"|"+V),r(r(D+"|"+t("[\\/\\?]",u))+"*")),W=r(r(D+"|[\\/\\?]")+"*"),q=r(r("\\/\\/"+R+N)+"|"+$+"|"+U+"|"+V),G=r(d+"\\:"+q+r("\\?"+H)+"?"+r("\\#"+W)+"?"),Z=r(r("\\/\\/"+R+N)+"|"+$+"|"+z+"|"+V),K=r(Z+r("\\?"+H)+"?"+r("\\#"+W)+"?");return r(G+"|"+K),r(d+"\\:"+q+r("\\?"+H)+"?"),r(r("\\/\\/("+r("("+p+")@")+"?("+M+")"+r("\\:("+F+")")+"?)")+"?("+N+"|"+$+"|"+U+"|"+V+")"),r("\\?("+H+")"),r("\\#("+W+")"),r(r("\\/\\/("+r("("+p+")@")+"?("+M+")"+r("\\:("+F+")")+"?)")+"?("+N+"|"+$+"|"+z+"|"+V+")"),r("\\?("+H+")"),r("\\#("+W+")"),r(r("\\/\\/("+r("("+p+")@")+"?("+M+")"+r("\\:("+F+")")+"?)")+"?("+N+"|"+$+"|"+U+"|"+V+")"),r("\\?("+H+")"),r("\\#("+W+")"),r("("+p+")@"),r("\\:("+F+")"),{NOT_SCHEME:RegExp(t("[^]",i,a,"[\\+\\-\\.]"),"g"),NOT_USERINFO:RegExp(t("[^\\%\\:]",c,s),"g"),NOT_HOST:RegExp(t("[^\\%\\[\\]\\:]",c,s),"g"),NOT_PATH:RegExp(t("[^\\%\\/\\:\\@]",c,s),"g"),NOT_PATH_NOSCHEME:RegExp(t("[^\\%\\/\\@]",c,s),"g"),NOT_QUERY:RegExp(t("[^\\%]",c,s,"[\\:\\@\\/\\?]",u),"g"),NOT_FRAGMENT:RegExp(t("[^\\%]",c,s,"[\\:\\@\\/\\?]"),"g"),ESCAPE:RegExp(t("[^]",c,s),"g"),UNRESERVED:RegExp(c,"g"),OTHER_CHARS:RegExp(t("[^\\%]",c,l),"g"),PCT_ENCODED:RegExp(o,"g"),IPV4ADDRESS:RegExp("^("+h+")$"),IPV6ADDRESS:RegExp("^\\[?("+_+")"+r(r("\\%25|\\%(?!"+n+"{2})")+"("+T+")")+"?\\]?$")}}var o=n(!1),s=n(!0),l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],i=!0,a=!1,n=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){a=!0,n=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw n}}return r}(e,t);throw TypeError("Invalid attempt to destructure non-iterable instance")},u=/^xn--/,c=/[^\0-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,h=String.fromCharCode;function m(e){throw RangeError(p[e])}function g(e,t){var r=e.split("@"),i="";return r.length>1&&(i=r[0]+"@",e=r[1]),i+(function(e,t){for(var r=[],i=e.length;i--;)r[i]=t(e[i]);return r})((e=e.replace(d,".")).split("."),t).join(".")}var v=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},y=function(e,t,r){var i=0;for(e=r?f(e/700):e>>1,e+=f(e/t);e>455;i+=36)e=f(e/35);return f(i+36*e/(e+38))},b=function(e){var t=[],r=e.length,i=0,a=128,n=72,o=e.lastIndexOf("-");o<0&&(o=0);for(var s=0;s<o;++s)e.charCodeAt(s)>=128&&m("not-basic"),t.push(e.charCodeAt(s));for(var l=o>0?o+1:0;l<r;){for(var u=i,c=1,d=36;;d+=36){l>=r&&m("invalid-input");var p,h=(p=e.charCodeAt(l++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:36;(h>=36||h>f((0x7fffffff-i)/c))&&m("overflow"),i+=h*c;var g=d<=n?1:d>=n+26?26:d-n;if(h<g)break;var v=36-g;c>f(0x7fffffff/v)&&m("overflow"),c*=v}var b=t.length+1;n=y(i-u,b,0==u),f(i/b)>0x7fffffff-a&&m("overflow"),a+=f(i/b),i%=b,t.splice(i++,0,a)}return String.fromCodePoint.apply(String,t)},x=function(e){var t=[],r=(e=function(e){for(var t=[],r=0,i=e.length;r<i;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<i){var n=e.charCodeAt(r++);(64512&n)==56320?t.push(((1023&a)<<10)+(1023&n)+65536):(t.push(a),r--)}else t.push(a)}return t}(e)).length,i=128,a=0,n=72,o=!0,s=!1,l=void 0;try{for(var u,c=e[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;d<128&&t.push(h(d))}}catch(e){s=!0,l=e}finally{try{!o&&c.return&&c.return()}finally{if(s)throw l}}var p=t.length,g=p;for(p&&t.push("-");g<r;){var b=0x7fffffff,x=!0,w=!1,S=void 0;try{for(var k,C=e[Symbol.iterator]();!(x=(k=C.next()).done);x=!0){var E=k.value;E>=i&&E<b&&(b=E)}}catch(e){w=!0,S=e}finally{try{!x&&C.return&&C.return()}finally{if(w)throw S}}var _=g+1;b-i>f((0x7fffffff-a)/_)&&m("overflow"),a+=(b-i)*_,i=b;var T=!0,P=!1,I=void 0;try{for(var A,O=e[Symbol.iterator]();!(T=(A=O.next()).done);T=!0){var M=A.value;if(M<i&&++a>0x7fffffff&&m("overflow"),M==i){for(var F=a,R=36;;R+=36){var D=R<=n?1:R>=n+26?26:R-n;if(F<D)break;var j=F-D,L=36-D;t.push(h(v(D+j%L,0))),F=f(j/L)}t.push(h(v(F,0))),n=y(a,_,g==p),a=0,++g}}}catch(e){P=!0,I=e}finally{try{!T&&O.return&&O.return()}finally{if(P)throw I}}++a,++i}return t.join("")},w=function(e){return g(e,function(e){return c.test(e)?"xn--"+x(e):e})},S=function(e){return g(e,function(e){return u.test(e)?b(e.slice(4).toLowerCase()):e})},k={};function C(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function E(e){for(var t="",r=0,i=e.length;r<i;){var a=parseInt(e.substr(r+1,2),16);a<128?(t+=String.fromCharCode(a),r+=3):a>=194&&a<224?(i-r>=6?t+=String.fromCharCode((31&a)<<6|63&parseInt(e.substr(r+4,2),16)):t+=e.substr(r,6),r+=6):a>=224?(i-r>=9?t+=String.fromCharCode((15&a)<<12|(63&parseInt(e.substr(r+4,2),16))<<6|63&parseInt(e.substr(r+7,2),16)):t+=e.substr(r,9),r+=9):(t+=e.substr(r,3),r+=3)}return t}function _(e,t){function r(e){var r=E(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,C).replace(t.PCT_ENCODED,a)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,C).replace(t.PCT_ENCODED,a)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,C).replace(t.PCT_ENCODED,a)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,C).replace(t.PCT_ENCODED,a)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,C).replace(t.PCT_ENCODED,a)),e}function T(e){return e.replace(/^0*(.*)/,"$1")||"0"}function P(e,t){var r=l(e.match(t.IPV4ADDRESS)||[],2)[1];return r?r.split(".").map(T).join("."):e}function I(e,t){var r=l(e.match(t.IPV6ADDRESS)||[],3),i=r[1],a=r[2];if(!i)return e;for(var n=l(i.toLowerCase().split("::").reverse(),2),o=n[0],s=n[1],u=s?s.split(":").map(T):[],c=o.split(":").map(T),d=t.IPV4ADDRESS.test(c[c.length-1]),p=d?7:8,f=c.length-p,h=Array(p),m=0;m<p;++m)h[m]=u[m]||c[f+m]||"";d&&(h[p-1]=P(h[p-1],t));var g=h.reduce(function(e,t,r){if(!t||"0"===t){var i=e[e.length-1];i&&i.index+i.length===r?i.length++:e.push({index:r,length:1})}return e},[]).sort(function(e,t){return t.length-e.length})[0],v=void 0;if(g&&g.length>1){var y=h.slice(0,g.index),b=h.slice(g.index+g.length);v=y.join(":")+"::"+b.join(":")}else v=h.join(":");return a&&(v+="%"+a),v}var A=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,O=void 0==="".match(/(){0}/)[1];function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},i=!1!==t.iri?s:o;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var a=e.match(A);if(a){O?(r.scheme=a[1],r.userinfo=a[3],r.host=a[4],r.port=parseInt(a[5],10),r.path=a[6]||"",r.query=a[7],r.fragment=a[8],isNaN(r.port)&&(r.port=a[5])):(r.scheme=a[1]||void 0,r.userinfo=-1!==e.indexOf("@")?a[3]:void 0,r.host=-1!==e.indexOf("//")?a[4]:void 0,r.port=parseInt(a[5],10),r.path=a[6]||"",r.query=-1!==e.indexOf("?")?a[7]:void 0,r.fragment=-1!==e.indexOf("#")?a[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?a[4]:void 0)),r.host&&(r.host=I(P(r.host,i),i)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var n=k[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||n&&n.unicodeSupport)_(r,i);else{if(r.host&&(t.domainHost||n&&n.domainHost))try{r.host=w(r.host.replace(i.PCT_ENCODED,E).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}_(r,o)}n&&n.parse&&n.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}var F=/^\.\.?\//,R=/^\/\.(\/|$)/,D=/^\/\.\.(\/|$)/,j=/^\/?(?:.|\n)*?(?=\/|$)/;function L(e){for(var t=[];e.length;)if(e.match(F))e=e.replace(F,"");else if(e.match(R))e=e.replace(R,"/");else if(e.match(D))e=e.replace(D,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(j);if(r){var i=r[0];e=e.slice(i.length),t.push(i)}else throw Error("Unexpected dot segment condition")}return t.join("")}function B(e){var t,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.iri?s:o,n=[],l=k[(i.scheme||e.scheme||"").toLowerCase()];if(l&&l.serialize&&l.serialize(e,i),e.host){if(a.IPV6ADDRESS.test(e.host));else if(i.domainHost||l&&l.domainHost)try{e.host=i.iri?S(e.host):w(e.host.replace(a.PCT_ENCODED,E).toLowerCase())}catch(t){e.error=e.error||"Host's domain name can not be converted to "+(i.iri?"Unicode":"ASCII")+" via punycode: "+t}}_(e,a),"suffix"!==i.reference&&e.scheme&&(n.push(e.scheme),n.push(":"));var u=(t=!1!==i.iri?s:o,r=[],void 0!==e.userinfo&&(r.push(e.userinfo),r.push("@")),void 0!==e.host&&r.push(I(P(String(e.host),t),t).replace(t.IPV6ADDRESS,function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"})),("number"==typeof e.port||"string"==typeof e.port)&&(r.push(":"),r.push(String(e.port))),r.length?r.join(""):void 0);if(void 0!==u&&("suffix"!==i.reference&&n.push("//"),n.push(u),e.path&&"/"!==e.path.charAt(0)&&n.push("/")),void 0!==e.path){var c=e.path;i.absolutePath||l&&l.absolutePath||(c=L(c)),void 0===u&&(c=c.replace(/^\/\//,"/%2F")),n.push(c)}return void 0!==e.query&&(n.push("?"),n.push(e.query)),void 0!==e.fragment&&(n.push("#"),n.push(e.fragment)),n.join("")}function N(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments[3],a={};return i||(e=M(B(e,r),r),t=M(B(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(a.scheme=t.scheme,a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=L(t.path||""),a.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=L(t.path||""),a.query=t.query):(t.path?("/"===t.path.charAt(0)?a.path=L(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?a.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:a.path=t.path:a.path="/"+t.path,a.path=L(a.path)),a.query=t.query):(a.path=e.path,void 0!==t.query?a.query=t.query:a.query=e.query),a.userinfo=e.userinfo,a.host=e.host,a.port=e.port),a.scheme=e.scheme),a.fragment=t.fragment,a}function $(e,t){return e&&e.toString().replace(t&&t.iri?s.PCT_ENCODED:o.PCT_ENCODED,E)}var z={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return(e.port===(r?443:80)||""===e.port)&&(e.port=void 0),e.path||(e.path="/"),e}},U={scheme:"https",domainHost:z.domainHost,parse:z.parse,serialize:z.serialize};function V(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var H={scheme:"ws",domainHost:!0,parse:function(e,t){return e.secure=V(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e},serialize:function(e,t){if((e.port===(V(e)?443:80)||""===e.port)&&(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=l(e.resourceName.split("?"),2),i=r[0],a=r[1];e.path=i&&"/"!==i?i:void 0,e.query=a,e.resourceName=void 0}return e.fragment=void 0,e}},W={scheme:"wss",domainHost:H.domainHost,parse:H.parse,serialize:H.serialize},q={},G="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Z="[0-9A-Fa-f]",K=r(r("%[EFef]"+Z+"%"+Z+Z+"%"+Z+Z)+"|"+r("%[89A-Fa-f]"+Z+"%"+Z+Z)+"|"+r("%"+Z+Z)),Q=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),X=RegExp(G,"g"),J=RegExp(K,"g"),Y=RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',Q),"g"),ee=RegExp(t("[^]",G,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g");function et(e){var t=E(e);return t.match(X)?t:e}var er={scheme:"mailto",parse:function(e,t){var r=e.to=e.path?e.path.split(","):[];if(e.path=void 0,e.query){for(var i=!1,a={},n=e.query.split("&"),o=0,s=n.length;o<s;++o){var l=n[o].split("=");switch(l[0]){case"to":for(var u=l[1].split(","),c=0,d=u.length;c<d;++c)r.push(u[c]);break;case"subject":e.subject=$(l[1],t);break;case"body":e.body=$(l[1],t);break;default:i=!0,a[$(l[0],t)]=$(l[1],t)}}i&&(e.headers=a)}e.query=void 0;for(var p=0,f=r.length;p<f;++p){var h=r[p].split("@");if(h[0]=$(h[0]),t.unicodeSupport)h[1]=$(h[1],t).toLowerCase();else try{h[1]=w($(h[1],t).toLowerCase())}catch(t){e.error=e.error||"Email address's domain name can not be converted to ASCII via punycode: "+t}r[p]=h.join("@")}return e},serialize:function(e,t){var r,i=null!=(r=e.to)?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(i){for(var n=0,o=i.length;n<o;++n){var s=String(i[n]),l=s.lastIndexOf("@"),u=s.slice(0,l).replace(J,et).replace(J,a).replace(Y,C),c=s.slice(l+1);try{c=t.iri?S(c):w($(c,t).toLowerCase())}catch(r){e.error=e.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}i[n]=u+"@"+c}e.path=i.join(",")}var d=e.headers=e.headers||{};e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body);var p=[];for(var f in d)d[f]!==q[f]&&p.push(f.replace(J,et).replace(J,a).replace(ee,C)+"="+d[f].replace(J,et).replace(J,a).replace(ee,C));return p.length&&(e.query=p.join("&")),e}},ei=/^([^\:]+)\:(.*)/,ea={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(ei),i=e;if(r){var a=t.scheme||i.scheme||"urn",n=r[1].toLowerCase(),o=r[2],s=k[a+":"+(t.nid||n)];i.nid=n,i.nss=o,i.path=void 0,s&&(i=s.parse(i,t))}else i.error=i.error||"URN can not be parsed.";return i},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",i=e.nid,a=k[r+":"+(t.nid||i)];a&&(e=a.serialize(e,t));var n=e,o=e.nss;return n.path=(i||t.nid)+":"+o,n}},en=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,eo={scheme:"urn:uuid",parse:function(e,t){return e.uuid=e.nss,e.nss=void 0,t.tolerant||e.uuid&&e.uuid.match(en)||(e.error=e.error||"UUID is not valid."),e},serialize:function(e,t){return e.nss=(e.uuid||"").toLowerCase(),e}};k[z.scheme]=z,k[U.scheme]=U,k[H.scheme]=H,k[W.scheme]=W,k[er.scheme]=er,k[ea.scheme]=ea,k[eo.scheme]=eo,e.SCHEMES=k,e.pctEncChar=C,e.pctDecChars=E,e.parse=M,e.removeDotSegments=L,e.serialize=B,e.resolveComponents=N,e.resolve=function(e,t,r){var i=function(e,t){if(t)for(var r in t)e[r]=t[r];return e}({scheme:"null"},r);return B(N(M(e,i),M(t,i),i,!0),i)},e.normalize=function(e,t){return"string"==typeof e?e=B(M(e,t),t):"object"===i(e)&&(e=M(B(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=B(M(e,r),r):"object"===i(e)&&(e=B(e,r)),"string"==typeof t?t=B(M(t,r),r):"object"===i(t)&&(t=B(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?s.ESCAPE:o.ESCAPE,C)},e.unescapeComponent=$,Object.defineProperty(e,"__esModule",{value:!0})}(r)},140804,(e,t,r)=>{"use strict";t.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;if(Array.isArray(t)){if((i=t.length)!=r.length)return!1;for(a=i;0!=a--;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((i=(n=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=i;0!=a--;)if(!Object.prototype.hasOwnProperty.call(r,n[a]))return!1;for(a=i;0!=a--;){var i,a,n,o=n[a];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r}},426171,(e,t,r)=>{"use strict";t.exports=function(e){for(var t,r=0,i=e.length,a=0;a<i;)r++,(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<i&&(64512&(t=e.charCodeAt(a)))==56320&&a++;return r}},442726,(e,t,r)=>{"use strict";function i(e,t,r,i){var a=i?" !== ":" === ",n=i?" || ":" && ",o=i?"!":"",s=i?"":"!";switch(e){case"null":return t+a+"null";case"array":return o+"Array.isArray("+t+")";case"object":return"("+o+t+n+"typeof "+t+a+'"object"'+n+s+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+a+'"number"'+n+s+"("+t+" % 1)"+n+t+a+t+(r?n+o+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+a+'"'+e+'"'+(r?n+o+"isFinite("+t+")":"")+")";default:return"typeof "+t+a+'"'+e+'"'}}t.exports={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:i,checkDataTypes:function(e,t,r){if(1===e.length)return i(e[0],t,r,!0);var a="",o=n(e);for(var s in o.array&&o.object&&(a=(o.null?"(":"(!"+t+" || ")+("typeof "+t)+' !== "object")',delete o.null,delete o.array,delete o.object),o.number&&delete o.integer,o)a+=(a?" && ":"")+i(s,t,r,!0);return a},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],i=0;i<t.length;i++){var n=t[i];a[n]?r[r.length]=n:"array"===e&&"array"===n&&(r[r.length]=n)}if(r.length)return r}else if(a[t])return[t];else if("array"===e&&"array"===t)return["array"]},toHash:n,getProperty:l,escapeQuotes:u,equal:e.r(140804),ucs2length:e.r(426171),varOccurences:function(e,t){t+="[^0-9]";var r=e.match(RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(RegExp(t,"g"),r+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var i in e)if(i!=r&&t[i])return!0},schemaUnknownRules:function(e,t){if("boolean"!=typeof e){for(var r in e)if(!t[r])return r}},toQuotedString:c,getPathExpr:function(e,t,r,i){return f(e,r?"'/' + "+t+(i?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):i?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){return f(e,r?c("/"+h(t)):c(l(t)))},getData:function(e,t,r){if(""===e)return"rootData";if("/"==e[0]){if(!d.test(e))throw Error("Invalid JSON-pointer: "+e);a=e,n="rootData"}else{if(!(o=e.match(p)))throw Error("Invalid JSON-pointer: "+e);if(i=+o[1],"#"==(a=o[2])){if(i>=t)throw Error("Cannot access property/index "+i+" levels up, current level is "+t);return r[t-i]}if(i>t)throw Error("Cannot access data "+i+" levels up, current level is "+t);if(n="data"+(t-i||""),!a)return n}for(var i,a,n,o,s=n,u=a.split("/"),c=0;c<u.length;c++){var f=u[c];f&&(n+=l(m(f)),s+=" && "+n)}return s},unescapeFragment:function(e){return m(decodeURIComponent(e))},unescapeJsonPointer:m,escapeFragment:function(e){return encodeURIComponent(h(e))},escapeJsonPointer:h};var a=n(["string","number","integer","boolean","null"]);function n(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var o=/^[a-z$_][a-z$_0-9]*$/i,s=/'|\\/g;function l(e){return"number"==typeof e?"["+e+"]":o.test(e)?"."+e:"['"+u(e)+"']"}function u(e){return e.replace(s,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function c(e){return"'"+u(e)+"'"}var d=/^\/(?:[^~]|~0|~1)*$/,p=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function f(e,t){return'""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function h(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function m(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},394318,(e,t,r)=>{"use strict";var i=e.r(442726);t.exports=function(e){i.copy(e,this)}},905738,(e,t,r)=>{"use strict";var i=t.exports=function(e,t,r){"function"==typeof t&&(r=t,t={});var a="function"==typeof(r=t.cb||r)?r:r.pre||function(){};!function e(t,r,a,n,o,s,l,u,c,d){if(n&&"object"==typeof n&&!Array.isArray(n)){for(var p in r(n,o,s,l,u,c,d),n){var f=n[p];if(Array.isArray(f)){if(p in i.arrayKeywords)for(var h=0;h<f.length;h++)e(t,r,a,f[h],o+"/"+p+"/"+h,s,o,p,n,h)}else if(p in i.propsKeywords){if(f&&"object"==typeof f)for(var m in f)e(t,r,a,f[m],o+"/"+p+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),s,o,p,n,m)}else(p in i.keywords||t.allKeys&&!(p in i.skipKeywords))&&e(t,r,a,f,o+"/"+p,s,o,p,n)}a(n,o,s,l,u,c,d)}}(t,a,r.post||function(){},e,"",e)};i.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},i.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},i.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},i.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},71595,(e,t,r)=>{"use strict";var i=e.r(217942),a=e.r(140804),n=e.r(442726),o=e.r(394318),s=e.r(905738);function l(e,t,r){var i,a,n,s=this._refs[r];if("string"==typeof s)if(!this._refs[s])return l.call(this,e,t,s);else s=this._refs[s];if((s=s||this._schemas[r])instanceof o)return h(s.schema,this._opts.inlineRefs)?s.schema:s.validate||this._compile(s);var c=u.call(this,t,r);return c&&(i=c.schema,t=c.root,n=c.baseId),i instanceof o?a=i.validate||e.call(this,i.schema,t,void 0,n):void 0!==i&&(a=h(i,this._opts.inlineRefs)?i:e.call(this,i,t,void 0,n)),a}function u(e,t){var r=i.parse(t),a=g(r),n=m(this._getId(e.schema));if(0===Object.keys(e.schema).length||a!==n){var s=y(a),l=this._refs[s];if("string"==typeof l)return c.call(this,e,l,r);if(l instanceof o)l.validate||this._compile(l),e=l;else{if(!((l=this._schemas[s])instanceof o))return;if(l.validate||this._compile(l),s==y(t))return{schema:l,root:e,baseId:n};e=l}if(!e.schema)return;n=m(this._getId(e.schema))}return p.call(this,r,n,e.schema,e)}function c(e,t,r){var i=u.call(this,e,t);if(i){var a=i.schema,n=i.baseId;e=i.root;var o=this._getId(a);return o&&(n=b(n,o)),p.call(this,r,n,a,e)}}t.exports=l,l.normalizeId=y,l.fullPath=m,l.url=b,l.ids=function(e){var t=y(this._getId(e)),r={"":t},o={"":m(t,!1)},l={},u=this;return s(e,{allKeys:!0},function(e,t,s,c,d,p,f){if(""!==t){var h=u._getId(e),m=r[c],g=o[c]+"/"+d;if(void 0!==f&&(g+="/"+("number"==typeof f?f:n.escapeFragment(f))),"string"==typeof h){h=m=y(m?i.resolve(m,h):h);var v=u._refs[h];if("string"==typeof v&&(v=u._refs[v]),v&&v.schema){if(!a(e,v.schema))throw Error('id "'+h+'" resolves to more than one schema')}else if(h!=y(g))if("#"==h[0]){if(l[h]&&!a(e,l[h]))throw Error('id "'+h+'" resolves to more than one schema');l[h]=e}else u._refs[h]=g}r[t]=m,o[t]=g}}),l},l.inlineRef=h,l.schema=u;var d=n.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function p(e,t,r,i){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var a=e.fragment.split("/"),o=1;o<a.length;o++){var s=a[o];if(s){if(void 0===(r=r[s=n.unescapeFragment(s)]))break;if(!d[s]&&((l=this._getId(r))&&(t=b(t,l)),r.$ref)){var l,c=b(t,r.$ref),p=u.call(this,i,c);p&&(r=p.schema,i=p.root,t=p.baseId)}}}if(void 0!==r&&r!==i.schema)return{schema:r,root:i,baseId:t}}}var f=n.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function h(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var r;if(Array.isArray(t)){for(var i=0;i<t.length;i++)if("object"==typeof(r=t[i])&&!e(r))return!1}else for(var a in t)if("$ref"==a||"object"==typeof(r=t[a])&&!e(r))return!1;return!0}(e):t?function e(t){var r,i=0;if(Array.isArray(t)){for(var a=0;a<t.length;a++)if("object"==typeof(r=t[a])&&(i+=e(r)),i==1/0)return 1/0}else for(var n in t){if("$ref"==n)return 1/0;if(f[n])i++;else if("object"==typeof(r=t[n])&&(i+=e(r)+1),i==1/0)return 1/0}return i}(e)<=t:void 0)}function m(e,t){return!1!==t&&(e=y(e)),g(i.parse(e))}function g(e){return i.serialize(e).split("#")[0]+"#"}var v=/#\/?$/;function y(e){return e?e.replace(v,""):""}function b(e,t){return t=y(t),i.resolve(e,t)}},794811,(e,t,r)=>{"use strict";var i=e.r(71595);function a(e,t,r){this.message=r||a.message(e,t),this.missingRef=i.url(e,t),this.missingSchema=i.normalizeId(i.fullPath(this.missingRef))}function n(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}t.exports={Validation:n(function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0}),MissingRef:n(a)},a.message=function(e,t){return"can't resolve reference "+t+" from id "+e}},859591,(e,t,r)=>{"use strict";t.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,i="boolean"==typeof t.cycles&&t.cycles,a=t.cmp&&(r=t.cmp,function(e){return function(t,i){return r({key:t,value:e[t]},{key:i,value:e[i]})}}),n=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);if(Array.isArray(t)){for(r=0,o="[";r<t.length;r++)r&&(o+=","),o+=e(t[r])||"null";return o+"]"}if(null===t)return"null";if(-1!==n.indexOf(t)){if(i)return JSON.stringify("__cycle__");throw TypeError("Converting circular structure to JSON")}var r,o,s=n.push(t)-1,l=Object.keys(t).sort(a&&a(t));for(r=0,o="";r<l.length;r++){var u=l[r],c=e(t[u]);c&&(o&&(o+=","),o+=JSON.stringify(u)+":"+c)}return n.splice(s,1),"{"+o+"}"}}(e)}},864917,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i="",a=!0===e.schema.$async,n=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),o=e.self._getId(e.schema);if(e.opts.strictKeywords){var s=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(s){var l="unknown keyword: "+s;if("log"===e.opts.strictKeywords)e.logger.warn(l);else throw Error(l)}}if(e.isTop&&(i+=" var validate = ",a&&(e.async=!0,i+="async "),i+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",o&&(e.opts.sourceCode||e.opts.processCode)&&(i+=" /*# sourceURL="+o+" */ ")),"boolean"==typeof e.schema||!(n||e.schema.$ref)){var u,t="false schema",c=e.level,d=e.dataLevel,p=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(d||""),v="valid"+c;if(!1===e.schema){e.isTop?m=!0:i+=" var "+v+" = false; ";var y=y||[];y.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(u||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'boolean schema is false' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ";var b=i;i=y.pop(),!e.compositeRule&&m?e.async?i+=" throw new ValidationError(["+b+"]); ":i+=" validate.errors = ["+b+"]; return false; ":i+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?a?i+=" return data; ":i+=" validate.errors = null; return true; ":i+=" var "+v+" = true; ";return e.isTop&&(i+=" }; return validate; "),i}if(e.isTop){var x=e.isTop,c=e.level=0,d=e.dataLevel=0,g="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var w="default is ignored in the schema root";if("log"===e.opts.strictDefaults)e.logger.warn(w);else throw Error(w)}i+=" var vErrors = null; ",i+=" var errors = 0;     ",i+=" if (rootData === undefined) rootData = data; "}else{var c=e.level,d=e.dataLevel,g="data"+(d||"");if(o&&(e.baseId=e.resolve.url(e.baseId,o)),a&&!e.async)throw Error("async schema in sync schema");i+=" var errs_"+c+" = errors;"}var v="valid"+c,m=!e.opts.allErrors,S="",k="",C=e.schema.type,E=Array.isArray(C);if(C&&e.opts.nullable&&!0===e.schema.nullable&&(E?-1==C.indexOf("null")&&(C=C.concat("null")):"null"!=C&&(C=[C,"null"],E=!0)),E&&1==C.length&&(C=C[0],E=!1),e.schema.$ref&&n)if("fail"==e.opts.extendRefs)throw Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');else!0!==e.opts.extendRefs&&(n=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'));if(e.schema.$comment&&e.opts.$comment&&(i+=" "+e.RULES.all.$comment.code(e,"$comment")),C){if(e.opts.coerceTypes)var _=e.util.coerceToTypes(e.opts.coerceTypes,C);var T=e.RULES.types[C];if(_||E||!0===T||T&&!Y(T)){var f=e.schemaPath+".type",h=e.errSchemaPath+"/type",f=e.schemaPath+".type",h=e.errSchemaPath+"/type",P=E?"checkDataTypes":"checkDataType";if(i+=" if ("+e.util[P](C,g,e.opts.strictNumbers,!0)+") { ",_){var I="dataType"+c,A="coerced"+c;i+=" var "+I+" = typeof "+g+"; var "+A+" = undefined; ","array"==e.opts.coerceTypes&&(i+=" if ("+I+" == 'object' && Array.isArray("+g+") && "+g+".length == 1) { "+g+" = "+g+"[0]; "+I+" = typeof "+g+"; if ("+e.util.checkDataType(e.schema.type,g,e.opts.strictNumbers)+") "+A+" = "+g+"; } "),i+=" if ("+A+" !== undefined) ; ";var O=_;if(O)for(var u,M,F=-1,R=O.length-1;F<R;)"string"==(M=O[F+=1])?i+=" else if ("+I+" == 'number' || "+I+" == 'boolean') "+A+" = '' + "+g+"; else if ("+g+" === null) "+A+" = ''; ":"number"==M||"integer"==M?(i+=" else if ("+I+" == 'boolean' || "+g+" === null || ("+I+" == 'string' && "+g+" && "+g+" == +"+g+" ","integer"==M&&(i+=" && !("+g+" % 1)"),i+=")) "+A+" = +"+g+"; "):"boolean"==M?i+=" else if ("+g+" === 'false' || "+g+" === 0 || "+g+" === null) "+A+" = false; else if ("+g+" === 'true' || "+g+" === 1) "+A+" = true; ":"null"==M?i+=" else if ("+g+" === '' || "+g+" === 0 || "+g+" === false) "+A+" = null; ":"array"==e.opts.coerceTypes&&"array"==M&&(i+=" else if ("+I+" == 'string' || "+I+" == 'number' || "+I+" == 'boolean' || "+g+" == null) "+A+" = ["+g+"]; ");i+=" else {   ";var y=y||[];y.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(u||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",E?i+=""+C.join(","):i+=""+C,i+="' } ",!1!==e.opts.messages&&(i+=" , message: 'should be ",E?i+=""+C.join(","):i+=""+C,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ";var b=i;i=y.pop(),!e.compositeRule&&m?e.async?i+=" throw new ValidationError(["+b+"]); ":i+=" validate.errors = ["+b+"]; return false; ":i+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } if ("+A+" !== undefined) {  ";var D=d?"data"+(d-1||""):"parentData",j=d?e.dataPathArr[d]:"parentDataProperty";i+=" "+g+" = "+A+"; ",d||(i+="if ("+D+" !== undefined)"),i+=" "+D+"["+j+"] = "+A+"; } "}else{var y=y||[];y.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(u||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",E?i+=""+C.join(","):i+=""+C,i+="' } ",!1!==e.opts.messages&&(i+=" , message: 'should be ",E?i+=""+C.join(","):i+=""+C,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ";var b=i;i=y.pop(),!e.compositeRule&&m?e.async?i+=" throw new ValidationError(["+b+"]); ":i+=" validate.errors = ["+b+"]; return false; ":i+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}i+=" } "}}if(e.schema.$ref&&!n)i+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",m&&(i+=" } if (errors === ",x?i+="0":i+="errs_"+c,i+=") { ",k+="}");else{var L=e.RULES;if(L){for(var T,B=-1,N=L.length-1;B<N;)if(Y(T=L[B+=1])){if(T.type&&(i+=" if ("+e.util.checkDataType(T.type,g,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if("object"==T.type&&e.schema.properties){var p=e.schema.properties,$=Object.keys(p);if($)for(var z,U=-1,V=$.length-1;U<V;){var H=p[z=$[U+=1]];if(void 0!==H.default){var W=g+e.util.getProperty(z);if(e.compositeRule){if(e.opts.strictDefaults){var w="default is ignored for: "+W;if("log"===e.opts.strictDefaults)e.logger.warn(w);else throw Error(w)}}else i+=" if ("+W+" === undefined ","empty"==e.opts.useDefaults&&(i+=" || "+W+" === null || "+W+" === '' "),i+=" ) "+W+" = ","shared"==e.opts.useDefaults?i+=" "+e.useDefault(H.default)+" ":i+=" "+JSON.stringify(H.default)+" ",i+="; "}}}else if("array"==T.type&&Array.isArray(e.schema.items)){var q=e.schema.items;if(q){for(var H,F=-1,G=q.length-1;F<G;)if(void 0!==(H=q[F+=1]).default){var W=g+"["+F+"]";if(e.compositeRule){if(e.opts.strictDefaults){var w="default is ignored for: "+W;if("log"===e.opts.strictDefaults)e.logger.warn(w);else throw Error(w)}}else i+=" if ("+W+" === undefined ","empty"==e.opts.useDefaults&&(i+=" || "+W+" === null || "+W+" === '' "),i+=" ) "+W+" = ","shared"==e.opts.useDefaults?i+=" "+e.useDefault(H.default)+" ":i+=" "+JSON.stringify(H.default)+" ",i+="; "}}}}var Z=T.rules;if(Z){for(var K,Q=-1,X=Z.length-1;Q<X;)if(ee(K=Z[Q+=1])){var J=K.code(e,K.keyword,T.type);J&&(i+=" "+J+" ",m&&(S+="}"))}}if(m&&(i+=" "+S+" ",S=""),T.type&&(i+=" } ",C&&C===T.type&&!_)){i+=" else { ";var f=e.schemaPath+".type",h=e.errSchemaPath+"/type",y=y||[];y.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(u||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",E?i+=""+C.join(","):i+=""+C,i+="' } ",!1!==e.opts.messages&&(i+=" , message: 'should be ",E?i+=""+C.join(","):i+=""+C,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ";var b=i;i=y.pop(),!e.compositeRule&&m?e.async?i+=" throw new ValidationError(["+b+"]); ":i+=" validate.errors = ["+b+"]; return false; ":i+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } "}m&&(i+=" if (errors === ",x?i+="0":i+="errs_"+c,i+=") { ",k+="}")}}}function Y(e){for(var t=e.rules,r=0;r<t.length;r++)if(ee(t[r]))return!0}function ee(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,i=0;i<r.length;i++)if(void 0!==e.schema[r[i]])return!0}(t)}return m&&(i+=" "+k+" "),x?(a?(i+=" if (errors === 0) return data;           ",i+=" else throw new ValidationError(vErrors); "):(i+=" validate.errors = vErrors; ",i+=" return errors === 0;       "),i+=" }; return validate;"):i+=" var "+v+" = errors === errs_"+c+";",i}},726816,(e,t,r)=>{"use strict";var i=e.r(71595),a=e.r(442726),n=e.r(794811),o=e.r(859591),s=e.r(864917),l=a.ucs2length,u=e.r(140804),c=n.Validation;function d(e,t,r){var i=f.call(this,e,t,r);return i>=0?{index:i,compiling:!0}:(i=this._compilations.length,this._compilations[i]={schema:e,root:t,baseId:r},{index:i,compiling:!1})}function p(e,t,r){var i=f.call(this,e,t,r);i>=0&&this._compilations.splice(i,1)}function f(e,t,r){for(var i=0;i<this._compilations.length;i++){var a=this._compilations[i];if(a.schema==e&&a.root==t&&a.baseId==r)return i}return -1}function h(e,t){return"var pattern"+e+" = new RegExp("+a.toQuotedString(t[e])+");"}function m(e){return"var default"+e+" = defaults["+e+"];"}function g(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function v(e){return"var customRule"+e+" = customRules["+e+"];"}function y(e,t){if(!e.length)return"";for(var r="",i=0;i<e.length;i++)r+=t(i,e);return r}t.exports=function e(t,r,f,b){var x=this,w=this._opts,S=[void 0],k={},C=[],E={},_=[],T={},P=[];r=r||{schema:t,refVal:S,refs:k};var I=d.call(this,t,r,b),A=this._compilations[I.index];if(I.compiling)return A.callValidate=D;var O=this._formats,M=this.RULES;try{var F=j(t,r,f,b);A.validate=F;var R=A.callValidate;return R&&(R.schema=F.schema,R.errors=null,R.refs=F.refs,R.refVal=F.refVal,R.root=F.root,R.$async=F.$async,w.sourceCode&&(R.source=F.source)),F}finally{p.call(this,t,r,b)}function D(){var e=A.validate,t=e.apply(this,arguments);return D.errors=e.errors,t}function j(t,o,d,p){var f,b=!o||o&&o.schema==t;if(o.schema!=r.schema)return e.call(x,t,o,d,p);var E=!0===t.$async,T=s({isTop:!0,schema:t,isRoot:b,baseId:p,root:o,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:n.MissingRef,RULES:M,validate:s,util:a,resolve:i,resolveRef:L,usePattern:$,useDefault:z,useCustomRule:U,opts:w,formats:O,logger:x.logger,self:x});T=y(S,g)+y(C,h)+y(_,m)+y(P,v)+T,w.processCode&&(T=w.processCode(T,t));try{f=Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",T)(x,M,O,r,S,_,P,u,l,c),S[0]=f}catch(e){throw x.logger.error("Error compiling schema, function code:",T),e}return f.schema=t,f.errors=null,f.refs=k,f.refVal=S,f.root=b?f:o,E&&(f.$async=!0),!0===w.sourceCode&&(f.source={code:T,patterns:C,defaults:_}),f}function L(t,a,n){var o,s,l,u,c,d=k[a=i.url(t,a)];if(void 0!==d)return N(u=S[d],c="refVal["+d+"]");if(!n&&r.refs){var p=r.refs[a];if(void 0!==p)return c=B(a,u=r.refVal[p]),N(u,c)}c=B(a);var h=i.call(x,j,r,a);if(void 0===h){var m=f&&f[a];m&&(h=i.inlineRef(m,w.inlineRefs)?m:e.call(x,m,r,f,t))}if(void 0!==h){return o=a,s=h,S[k[o]]=s,N(h,c)}l=a,delete k[l]}function B(e,t){var r=S.length;return S[r]=t,k[e]=r,"refVal"+r}function N(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function $(e){var t=E[e];return void 0===t&&(t=E[e]=C.length,C[t]=e),"pattern"+t}function z(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return a.toQuotedString(e);case"object":if(null===e)return"null";var t=o(e),r=T[t];return void 0===r&&(r=T[t]=_.length,_[r]=e),"default"+r}}function U(e,t,r,i){if(!1!==x._opts.validateSchema){var a,n=e.definition.dependencies;if(n&&!n.every(function(e){return Object.prototype.hasOwnProperty.call(r,e)}))throw Error("parent schema must have all required keywords: "+n.join(","));var o=e.definition.validateSchema;if(o&&!o(t)){var s="keyword schema is invalid: "+x.errorsText(o.errors);if("log"==x._opts.validateSchema)x.logger.error(s);else throw Error(s)}}var l=e.definition.compile,u=e.definition.inline,c=e.definition.macro;if(l)a=l.call(x,t,r,i);else if(c)a=c.call(x,t,r,i),!1!==w.validateSchema&&x.validateSchema(a,!0);else if(u)a=u.call(x,i,e.keyword,t,r);else if(!(a=e.definition.validate))return;if(void 0===a)throw Error('custom keyword "'+e.keyword+'"failed to compile');var d=P.length;return P[d]=a,{code:"customRule"+d,validate:a}}}},74907,(e,t,r)=>{"use strict";var i=t.exports=function(){this._cache={}};i.prototype.put=function(e,t){this._cache[e]=t},i.prototype.get=function(e){return this._cache[e]},i.prototype.del=function(e){delete this._cache[e]},i.prototype.clear=function(){this._cache={}}},518227,(e,t,r)=>{"use strict";var i=e.r(442726),a=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,n=[0,31,28,31,30,31,30,31,31,30,31,30,31],o=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,s=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,l=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,u=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,c=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,d=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,p=/^(?:\/(?:[^~/]|~0|~1)*)*$/,f=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,h=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function m(e){return e="full"==e?"full":"fast",i.copy(m[e])}function g(e){var t,r=e.match(a);if(!r)return!1;var i=+r[1],o=+r[2],s=+r[3];return o>=1&&o<=12&&s>=1&&s<=(2==o&&(t=i)%4==0&&(t%100!=0||t%400==0)?29:n[o])}function v(e,t){var r=e.match(o);if(!r)return!1;var i=r[1],a=r[2],n=r[3],s=r[5];return(i<=23&&a<=59&&n<=59||23==i&&59==a&&60==n)&&(!t||s)}t.exports=m,m.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":u,url:c,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:w,uuid:d,"json-pointer":p,"json-pointer-uri-fragment":f,"relative-json-pointer":h},m.full={date:g,time:v,"date-time":function(e){var t=e.split(y);return 2==t.length&&g(t[0])&&v(t[1],!0)},uri:function(e){return b.test(e)&&l.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":u,url:c,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:w,uuid:d,"json-pointer":p,"json-pointer-uri-fragment":f,"relative-json-pointer":h};var y=/t|\s/i,b=/\/|:/,x=/[^\\]\\Z/;function w(e){if(x.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}},717476,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i,a,n=" ",o=e.level,s=e.dataLevel,l=e.schema[t],u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,d="data"+(s||""),p="valid"+o;if("#"==l||"#/"==l)e.isRoot?(i=e.async,a="validate"):(i=!0===e.root.schema.$async,a="root.refVal[0]");else{var f=e.resolveRef(e.baseId,l,e.isRoot);if(void 0===f){var h=e.MissingRefError.message(e.baseId,l);if("fail"==e.opts.missingRefs){e.logger.error(h);var m=m||[];m.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { ref: '"+e.util.escapeQuotes(l)+"' } ",!1!==e.opts.messages&&(n+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(l)+"' "),e.opts.verbose&&(n+=" , schema: "+e.util.toQuotedString(l)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var g=n;n=m.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(n+=" if (false) { ")}else if("ignore"==e.opts.missingRefs)e.logger.warn(h),c&&(n+=" if (true) { ");else throw new e.MissingRefError(e.baseId,l,h)}else if(f.inline){var v=e.util.copy(e);v.level++;var y="valid"+v.level;v.schema=f.schema,v.schemaPath="",v.errSchemaPath=l,n+=" "+e.validate(v).replace(/validate\.schema/g,f.code)+" ",c&&(n+=" if ("+y+") { ")}else i=!0===f.$async||e.async&&!1!==f.$async,a=f.code}if(a){var m=m||[];m.push(n),n="",e.opts.passContext?n+=" "+a+".call(this, ":n+=" "+a+"( ",n+=" "+d+", (dataPath || '')",'""'!=e.errorPath&&(n+=" + "+e.errorPath);var b=s?e.dataPathArr[s]:"parentDataProperty",x=n+=" , "+(s?"data"+(s-1||""):"parentData")+" , "+b+", rootData)  ";if(n=m.pop(),i){if(!e.async)throw Error("async schema referenced by sync schema");c&&(n+=" var "+p+"; "),n+=" try { await "+x+"; ",c&&(n+=" "+p+" = true; "),n+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",c&&(n+=" "+p+" = false; "),n+=" } ",c&&(n+=" if ("+p+") { ")}else n+=" if (!"+x+") { if (vErrors === null) vErrors = "+a+".errors; else vErrors = vErrors.concat("+a+".errors); errors = vErrors.length; } ",c&&(n+=" else { ")}return n}},516223,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i=" ",a=e.schema[t],n=e.schemaPath+e.util.getProperty(t),o=e.errSchemaPath+"/"+t,s=!e.opts.allErrors,l=e.util.copy(e),u="";l.level++;var c="valid"+l.level,d=l.baseId,p=!0;if(a)for(var f,h=-1,m=a.length-1;h<m;)f=a[h+=1],(e.opts.strictKeywords?"object"==typeof f&&Object.keys(f).length>0||!1===f:e.util.schemaHasRules(f,e.RULES.all))&&(p=!1,l.schema=f,l.schemaPath=n+"["+h+"]",l.errSchemaPath=o+"/"+h,i+="  "+e.validate(l)+" ",l.baseId=d,s&&(i+=" if ("+c+") { ",u+="}"));return s&&(p?i+=" if (true) { ":i+=" "+u.slice(0,-1)+" "),i}},692597,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i=" ",a=e.level,n=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,c="valid"+a,d="errs__"+a,p=e.util.copy(e),f="";p.level++;var h="valid"+p.level;if(o.every(function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0||!1===t:e.util.schemaHasRules(t,e.RULES.all)})){var m=p.baseId;i+=" var "+d+" = errors; var "+c+" = false;  ";var g=e.compositeRule;if(e.compositeRule=p.compositeRule=!0,o)for(var v=-1,y=o.length-1;v<y;)p.schema=o[v+=1],p.schemaPath=s+"["+v+"]",p.errSchemaPath=l+"/"+v,i+="  "+e.validate(p)+" ",p.baseId=m,i+=" "+c+" = "+c+" || "+h+"; if (!"+c+") { ",f+="}";e.compositeRule=p.compositeRule=g,i+=" "+f+" if (!"+c+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: data"+(n||"")+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else u&&(i+=" if (true) { ");return i}},457388,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i=" ",a=e.schema[t],n=e.errSchemaPath+"/"+t;e.opts.allErrors;var o=e.util.toQuotedString(a);return!0===e.opts.$comment?i+=" console.log("+o+");":"function"==typeof e.opts.$comment&&(i+=" self._opts.$comment("+o+", "+e.util.toQuotedString(n)+", validate.root.schema);"),i}},902080,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i=" ",a=e.level,n=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,c="data"+(n||""),d="valid"+a,p=e.opts.$data&&o&&o.$data;p&&(i+=" var schema"+a+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; "),p||(i+=" var schema"+a+" = validate.schema"+s+";"),i+="var "+d+" = equal("+c+", schema"+a+"); if (!"+d+") {   ";var f=f||[];f.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValue: schema"+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be equal to constant' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var h=i;return i=f.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+h+"]); ":i+=" validate.errors = ["+h+"]; return false; ":i+=" var err = "+h+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",u&&(i+=" else { "),i}},4347,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i=" ",a=e.level,n=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,c="data"+(n||""),d="errs__"+a,p=e.util.copy(e);p.level++;var f="valid"+p.level,h="i"+a,m=p.dataLevel=e.dataLevel+1,g="data"+m,v=e.baseId,y=e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0||!1===o:e.util.schemaHasRules(o,e.RULES.all);if(i+="var "+d+" = errors;var valid"+a+";",y){var b=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=o,p.schemaPath=s,p.errSchemaPath=l,i+=" var "+f+" = false; for (var "+h+" = 0; "+h+" < "+c+".length; "+h+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,h,e.opts.jsonPointers,!0);var x=c+"["+h+"]";p.dataPathArr[m]=h;var w=e.validate(p);p.baseId=v,2>e.util.varOccurences(w,g)?i+=" "+e.util.varReplace(w,g,x)+" ":i+=" var "+g+" = "+x+"; "+w+" ",i+=" if ("+f+") break; }  ",e.compositeRule=p.compositeRule=b,i+="  if (!"+f+") {"}else i+=" if ("+c+".length == 0) {";var S=S||[];S.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should contain a valid item' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var k=i;return i=S.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+k+"]); ":i+=" validate.errors = ["+k+"]; return false; ":i+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { ",y&&(i+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } "),e.opts.allErrors&&(i+=" } "),i}},319458,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i=" ",a=e.level,n=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,c="data"+(n||""),d="errs__"+a,p=e.util.copy(e),f="";p.level++;var h="valid"+p.level,m={},g={},v=e.opts.ownProperties;for(w in o)if("__proto__"!=w){var y=o[w],b=Array.isArray(y)?g:m;b[w]=y}i+="var "+d+" = errors;";var x=e.errorPath;for(var w in i+="var missing"+a+";",g)if((b=g[w]).length){if(i+=" if ( "+c+e.util.getProperty(w)+" !== undefined ",v&&(i+=" && Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(w)+"') "),u){i+=" && ( ";var S=b;if(S)for(var k,C=-1,E=S.length-1;C<E;){k=S[C+=1],C&&(i+=" || ");var _=e.util.getProperty(k),T=c+_;i+=" ( ( "+T+" === undefined ",v&&(i+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(k)+"') "),i+=") && (missing"+a+" = "+e.util.toQuotedString(e.opts.jsonPointers?k:_)+") ) "}i+=")) {  ";var P="missing"+a,I="' + "+P+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(x,P,!0):x+" + "+P);var A=A||[];A.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+I+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should have ",1==b.length?i+="property "+e.util.escapeQuotes(b[0]):i+="properties "+e.util.escapeQuotes(b.join(", ")),i+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var O=i;i=A.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+O+"]); ":i+=" validate.errors = ["+O+"]; return false; ":i+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{i+=" ) { ";var M=b;if(M)for(var k,F=-1,R=M.length-1;F<R;){k=M[F+=1];var _=e.util.getProperty(k),I=e.util.escapeQuotes(k),T=c+_;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(x,k,e.opts.jsonPointers)),i+=" if ( "+T+" === undefined ",v&&(i+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(k)+"') "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+I+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should have ",1==b.length?i+="property "+e.util.escapeQuotes(b[0]):i+="properties "+e.util.escapeQuotes(b.join(", ")),i+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}i+=" }   ",u&&(f+="}",i+=" else { ")}e.errorPath=x;var D=p.baseId;for(var w in m){var y=m[w];(e.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0||!1===y:e.util.schemaHasRules(y,e.RULES.all))&&(i+=" "+h+" = true; if ( "+c+e.util.getProperty(w)+" !== undefined ",v&&(i+=" && Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(w)+"') "),i+=") { ",p.schema=y,p.schemaPath=s+e.util.getProperty(w),p.errSchemaPath=l+"/"+e.util.escapeFragment(w),i+="  "+e.validate(p)+" ",p.baseId=D,i+=" }  ",u&&(i+=" if ("+h+") { ",f+="}"))}return u&&(i+="   "+f+" if ("+d+" == errors) {"),i}},941521,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i=" ",a=e.level,n=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,c="data"+(n||""),d="valid"+a,p=e.opts.$data&&o&&o.$data;p&&(i+=" var schema"+a+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ");var f="i"+a,h="schema"+a;p||(i+=" var "+h+" = validate.schema"+s+";"),i+="var "+d+";",p&&(i+=" if (schema"+a+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+a+")) "+d+" = false; else {"),i+=""+d+" = false;for (var "+f+"=0; "+f+"<"+h+".length; "+f+"++) if (equal("+c+", "+h+"["+f+"])) { "+d+" = true; break; }",p&&(i+="  }  "),i+=" if (!"+d+") {   ";var m=m||[];m.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValues: schema"+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var g=i;return i=m.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",u&&(i+=" else { "),i}},327957,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i=" ",a=e.level,n=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,c="data"+(n||"");if(!1===e.opts.format)return u&&(i+=" if (true) { "),i;var d,p=e.opts.$data&&o&&o.$data;p?(i+=" var schema"+a+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",d="schema"+a):d=o;var f=e.opts.unknownFormats,h=Array.isArray(f);if(p){var m="format"+a,g="isObject"+a,v="formatType"+a;i+=" var "+m+" = formats["+d+"]; var "+g+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+v+" = "+g+" && "+m+".type || 'string'; if ("+g+") { ",e.async&&(i+=" var async"+a+" = "+m+".async; "),i+=" "+m+" = "+m+".validate; } if (  ",p&&(i+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),i+=" (","ignore"!=f&&(i+=" ("+d+" && !"+m+" ",h&&(i+=" && self._opts.unknownFormats.indexOf("+d+") == -1 "),i+=") || "),i+=" ("+m+" && "+v+" == '"+r+"' && !(typeof "+m+" == 'function' ? ",e.async?i+=" (async"+a+" ? await "+m+"("+c+") : "+m+"("+c+")) ":i+=" "+m+"("+c+") ",i+=" : "+m+".test("+c+"))))) {"}else{var m=e.formats[o];if(!m)if("ignore"==f)return e.logger.warn('unknown format "'+o+'" ignored in schema at path "'+e.errSchemaPath+'"'),u&&(i+=" if (true) { "),i;else if(h&&f.indexOf(o)>=0)return u&&(i+=" if (true) { "),i;else throw Error('unknown format "'+o+'" is used in schema at path "'+e.errSchemaPath+'"');var g="object"==typeof m&&!(m instanceof RegExp)&&m.validate,v=g&&m.type||"string";if(g){var y=!0===m.async;m=m.validate}if(v!=r)return u&&(i+=" if (true) { "),i;if(y){if(!e.async)throw Error("async format in sync schema");var b="formats"+e.util.getProperty(o)+".validate";i+=" if (!(await "+b+"("+c+"))) { "}else{i+=" if (! ";var b="formats"+e.util.getProperty(o);g&&(b+=".validate"),"function"==typeof m?i+=" "+b+"("+c+") ":i+=" "+b+".test("+c+") ",i+=") { "}}var x=x||[];x.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { format:  ",p?i+=""+d:i+=""+e.util.toQuotedString(o),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match format \"",p?i+="' + "+d+" + '":i+=""+e.util.escapeQuotes(o),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",p?i+="validate.schema"+s:i+=""+e.util.toQuotedString(o),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var w=i;return i=x.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+w+"]); ":i+=" validate.errors = ["+w+"]; return false; ":i+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u&&(i+=" else { "),i}},890199,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i=" ",a=e.level,n=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,c="valid"+a,d="errs__"+a,p=e.util.copy(e);p.level++;var f="valid"+p.level,h=e.schema.then,m=e.schema.else,g=void 0!==h&&(e.opts.strictKeywords?"object"==typeof h&&Object.keys(h).length>0||!1===h:e.util.schemaHasRules(h,e.RULES.all)),v=void 0!==m&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0||!1===m:e.util.schemaHasRules(m,e.RULES.all)),y=p.baseId;if(g||v){p.createErrors=!1,p.schema=o,p.schemaPath=s,p.errSchemaPath=l,i+=" var "+d+" = errors; var "+c+" = true;  ";var b,x=e.compositeRule;e.compositeRule=p.compositeRule=!0,i+="  "+e.validate(p)+" ",p.baseId=y,p.createErrors=!0,i+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }  ",e.compositeRule=p.compositeRule=x,g?(i+=" if ("+f+") {  ",p.schema=e.schema.then,p.schemaPath=e.schemaPath+".then",p.errSchemaPath=e.errSchemaPath+"/then",i+="  "+e.validate(p)+" ",p.baseId=y,i+=" "+c+" = "+f+"; ",g&&v?i+=" var "+(b="ifClause"+a)+" = 'then'; ":b="'then'",i+=" } ",v&&(i+=" else { ")):i+=" if (!"+f+") { ",v&&(p.schema=e.schema.else,p.schemaPath=e.schemaPath+".else",p.errSchemaPath=e.errSchemaPath+"/else",i+="  "+e.validate(p)+" ",p.baseId=y,i+=" "+c+" = "+f+"; ",g&&v?i+=" var "+(b="ifClause"+a)+" = 'else'; ":b="'else'",i+=" } "),i+=" if (!"+c+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { failingKeyword: "+b+" } ",!1!==e.opts.messages&&(i+=" , message: 'should match \"' + "+b+" + '\" schema' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: data"+(n||"")+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" }   ",u&&(i+=" else { ")}else u&&(i+=" if (true) { ");return i}},680367,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i=" ",a=e.level,n=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,c="data"+(n||""),d="valid"+a,p="errs__"+a,f=e.util.copy(e),h="";f.level++;var m="valid"+f.level,g="i"+a,v=f.dataLevel=e.dataLevel+1,y="data"+v,b=e.baseId;if(i+="var "+p+" = errors;var "+d+";",Array.isArray(o)){var x=e.schema.additionalItems;if(!1===x){i+=" "+d+" = "+c+".length <= "+o.length+"; ";var w=l;l=e.errSchemaPath+"/additionalItems",i+="  if (!"+d+") {   ";var S=S||[];S.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+o.length+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have more than "+o.length+" items' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var k=i;i=S.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+k+"]); ":i+=" validate.errors = ["+k+"]; return false; ":i+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l=w,u&&(h+="}",i+=" else { ")}if(o){for(var C,E=-1,_=o.length-1;E<_;)if(C=o[E+=1],e.opts.strictKeywords?"object"==typeof C&&Object.keys(C).length>0||!1===C:e.util.schemaHasRules(C,e.RULES.all)){i+=" "+m+" = true; if ("+c+".length > "+E+") { ";var T=c+"["+E+"]";f.schema=C,f.schemaPath=s+"["+E+"]",f.errSchemaPath=l+"/"+E,f.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers,!0),f.dataPathArr[v]=E;var P=e.validate(f);f.baseId=b,2>e.util.varOccurences(P,y)?i+=" "+e.util.varReplace(P,y,T)+" ":i+=" var "+y+" = "+T+"; "+P+" ",i+=" }  ",u&&(i+=" if ("+m+") { ",h+="}")}}if("object"==typeof x&&(e.opts.strictKeywords?"object"==typeof x&&Object.keys(x).length>0||!1===x:e.util.schemaHasRules(x,e.RULES.all))){f.schema=x,f.schemaPath=e.schemaPath+".additionalItems",f.errSchemaPath=e.errSchemaPath+"/additionalItems",i+=" "+m+" = true; if ("+c+".length > "+o.length+") {  for (var "+g+" = "+o.length+"; "+g+" < "+c+".length; "+g+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);var T=c+"["+g+"]";f.dataPathArr[v]=g;var P=e.validate(f);f.baseId=b,2>e.util.varOccurences(P,y)?i+=" "+e.util.varReplace(P,y,T)+" ":i+=" var "+y+" = "+T+"; "+P+" ",u&&(i+=" if (!"+m+") break; "),i+=" } }  ",u&&(i+=" if ("+m+") { ",h+="}")}}else if(e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0||!1===o:e.util.schemaHasRules(o,e.RULES.all)){f.schema=o,f.schemaPath=s,f.errSchemaPath=l,i+="  for (var "+g+" = 0; "+g+" < "+c+".length; "+g+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);var T=c+"["+g+"]";f.dataPathArr[v]=g;var P=e.validate(f);f.baseId=b,2>e.util.varOccurences(P,y)?i+=" "+e.util.varReplace(P,y,T)+" ":i+=" var "+y+" = "+T+"; "+P+" ",u&&(i+=" if (!"+m+") break; "),i+=" }"}return u&&(i+=" "+h+" if ("+p+" == errors) {"),i}},219539,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i,a,n=" ",o=e.level,s=e.dataLevel,l=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,p="data"+(s||""),f=e.opts.$data&&l&&l.$data;f?(n+=" var schema"+o+" = "+e.util.getData(l.$data,s,e.dataPathArr)+"; ",a="schema"+o):a=l;var h="maximum"==t,m=h?"exclusiveMaximum":"exclusiveMinimum",g=e.schema[m],v=e.opts.$data&&g&&g.$data,y=h?"<":">",b=h?">":"<",i=void 0;if(!(f||"number"==typeof l||void 0===l))throw Error(t+" must be number");if(!(v||void 0===g||"number"==typeof g||"boolean"==typeof g))throw Error(m+" must be number or boolean");if(v){var x=e.util.getData(g.$data,s,e.dataPathArr),w="exclusive"+o,S="exclType"+o,k="exclIsNumber"+o,C="op"+o,E="' + "+C+" + '";n+=" var schemaExcl"+o+" = "+x+"; ",n+=" var "+w+"; var "+S+" = typeof "+(x="schemaExcl"+o)+"; if ("+S+" != 'boolean' && "+S+" != 'undefined' && "+S+" != 'number') { ";var i=m,_=_||[];_.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(i||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: '"+m+" should be boolean' "),e.opts.verbose&&(n+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var T=n;n=_.pop(),!e.compositeRule&&d?e.async?n+=" throw new ValidationError(["+T+"]); ":n+=" validate.errors = ["+T+"]; return false; ":n+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else if ( ",f&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),n+=" "+S+" == 'number' ? ( ("+w+" = "+a+" === undefined || "+x+" "+y+"= "+a+") ? "+p+" "+b+"= "+x+" : "+p+" "+b+" "+a+" ) : ( ("+w+" = "+x+" === true) ? "+p+" "+b+"= "+a+" : "+p+" "+b+" "+a+" ) || "+p+" !== "+p+") { var op"+o+" = "+w+" ? '"+y+"' : '"+y+"='; ",void 0===l&&(i=m,c=e.errSchemaPath+"/"+m,a=x,f=v)}else{var k="number"==typeof g,E=y;if(k&&f){var C="'"+E+"'";n+=" if ( ",f&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),n+=" ( "+a+" === undefined || "+g+" "+y+"= "+a+" ? "+p+" "+b+"= "+g+" : "+p+" "+b+" "+a+" ) || "+p+" !== "+p+") { "}else{k&&void 0===l?(w=!0,i=m,c=e.errSchemaPath+"/"+m,a=g,b+="="):(k&&(a=Math[h?"min":"max"](g,l)),g===(!k||a)?(w=!0,i=m,c=e.errSchemaPath+"/"+m,b+="="):(w=!1,E+="="));var C="'"+E+"'";n+=" if ( ",f&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),n+=" "+p+" "+b+" "+a+" || "+p+" !== "+p+") { "}}i=i||t;var _=_||[];_.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(i||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+C+", limit: "+a+", exclusive: "+w+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be "+E+" ",f?n+="' + "+a:n+=""+a+"'"),e.opts.verbose&&(n+=" , schema:  ",f?n+="validate.schema"+u:n+=""+l,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var T=n;return n=_.pop(),!e.compositeRule&&d?e.async?n+=" throw new ValidationError(["+T+"]); ":n+=" validate.errors = ["+T+"]; return false; ":n+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",d&&(n+=" else { "),n}},29104,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i,a,n=" ",o=e.level,s=e.dataLevel,l=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,p="data"+(s||""),f=e.opts.$data&&l&&l.$data;if(f?(n+=" var schema"+o+" = "+e.util.getData(l.$data,s,e.dataPathArr)+"; ",a="schema"+o):a=l,!(f||"number"==typeof l))throw Error(t+" must be number");var h="maxItems"==t?">":"<";n+="if ( ",f&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),n+=" "+p+".length "+h+" "+a+") { ";var i=t,m=m||[];m.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(i||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have ","maxItems"==t?n+="more":n+="fewer",n+=" than ",f?n+="' + "+a+" + '":n+=""+l,n+=" items' "),e.opts.verbose&&(n+=" , schema:  ",f?n+="validate.schema"+u:n+=""+l,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var g=n;return n=m.pop(),!e.compositeRule&&d?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",d&&(n+=" else { "),n}},401441,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i,a,n=" ",o=e.level,s=e.dataLevel,l=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,p="data"+(s||""),f=e.opts.$data&&l&&l.$data;if(f?(n+=" var schema"+o+" = "+e.util.getData(l.$data,s,e.dataPathArr)+"; ",a="schema"+o):a=l,!(f||"number"==typeof l))throw Error(t+" must be number");var h="maxLength"==t?">":"<";n+="if ( ",f&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),!1===e.opts.unicode?n+=" "+p+".length ":n+=" ucs2length("+p+") ",n+=" "+h+" "+a+") { ";var i=t,m=m||[];m.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(i||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be ","maxLength"==t?n+="longer":n+="shorter",n+=" than ",f?n+="' + "+a+" + '":n+=""+l,n+=" characters' "),e.opts.verbose&&(n+=" , schema:  ",f?n+="validate.schema"+u:n+=""+l,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var g=n;return n=m.pop(),!e.compositeRule&&d?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",d&&(n+=" else { "),n}},94933,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i,a,n=" ",o=e.level,s=e.dataLevel,l=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,p="data"+(s||""),f=e.opts.$data&&l&&l.$data;if(f?(n+=" var schema"+o+" = "+e.util.getData(l.$data,s,e.dataPathArr)+"; ",a="schema"+o):a=l,!(f||"number"==typeof l))throw Error(t+" must be number");var h="maxProperties"==t?">":"<";n+="if ( ",f&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),n+=" Object.keys("+p+").length "+h+" "+a+") { ";var i=t,m=m||[];m.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(i||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have ","maxProperties"==t?n+="more":n+="fewer",n+=" than ",f?n+="' + "+a+" + '":n+=""+l,n+=" properties' "),e.opts.verbose&&(n+=" , schema:  ",f?n+="validate.schema"+u:n+=""+l,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var g=n;return n=m.pop(),!e.compositeRule&&d?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",d&&(n+=" else { "),n}},132003,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i,a=" ",n=e.level,o=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,d="data"+(o||""),p=e.opts.$data&&s&&s.$data;if(p?(a+=" var schema"+n+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",i="schema"+n):i=s,!(p||"number"==typeof s))throw Error(t+" must be number");a+="var division"+n+";if (",p&&(a+=" "+i+" !== undefined && ( typeof "+i+" != 'number' || "),a+=" (division"+n+" = "+d+" / "+i+", ",e.opts.multipleOfPrecision?a+=" Math.abs(Math.round(division"+n+") - division"+n+") > 1e-"+e.opts.multipleOfPrecision+" ":a+=" division"+n+" !== parseInt(division"+n+") ",a+=" ) ",p&&(a+="  )  "),a+=" ) {   ";var f=f||[];f.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { multipleOf: "+i+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be multiple of ",p?a+="' + "+i:a+=""+i+"'"),e.opts.verbose&&(a+=" , schema:  ",p?a+="validate.schema"+l:a+=""+s,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var h=a;return a=f.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+h+"]); ":a+=" validate.errors = ["+h+"]; return false; ":a+=" var err = "+h+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",c&&(a+=" else { "),a}},669272,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i=" ",a=e.level,n=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,c="data"+(n||""),d="errs__"+a,p=e.util.copy(e);p.level++;var f="valid"+p.level;if(e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0||!1===o:e.util.schemaHasRules(o,e.RULES.all)){p.schema=o,p.schemaPath=s,p.errSchemaPath=l,i+=" var "+d+" = errors;  ";var h,m=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.createErrors=!1,p.opts.allErrors&&(h=p.opts.allErrors,p.opts.allErrors=!1),i+=" "+e.validate(p)+" ",p.createErrors=!0,h&&(p.opts.allErrors=h),e.compositeRule=p.compositeRule=m,i+=" if ("+f+") {   ";var g=g||[];g.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var v=i;i=g.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+v+"]); ":i+=" validate.errors = ["+v+"]; return false; ":i+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else i+="  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(i+=" if (false) { ");return i}},238601,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i=" ",a=e.level,n=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,c="valid"+a,d="errs__"+a,p=e.util.copy(e),f="";p.level++;var h="valid"+p.level,m=p.baseId,g="prevValid"+a,v="passingSchemas"+a;i+="var "+d+" = errors , "+g+" = false , "+c+" = false , "+v+" = null; ";var y=e.compositeRule;if(e.compositeRule=p.compositeRule=!0,o)for(var b,x=-1,w=o.length-1;x<w;)b=o[x+=1],(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0||!1===b:e.util.schemaHasRules(b,e.RULES.all))?(p.schema=b,p.schemaPath=s+"["+x+"]",p.errSchemaPath=l+"/"+x,i+="  "+e.validate(p)+" ",p.baseId=m):i+=" var "+h+" = true; ",x&&(i+=" if ("+h+" && "+g+") { "+c+" = false; "+v+" = ["+v+", "+x+"]; } else { ",f+="}"),i+=" if ("+h+") { "+c+" = "+g+" = true; "+v+" = "+x+"; }";return e.compositeRule=p.compositeRule=y,i+=""+f+"if (!"+c+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { passingSchemas: "+v+" } ",!1!==e.opts.messages&&(i+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: data"+(n||"")+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+="} else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }",e.opts.allErrors&&(i+=" } "),i}},54714,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i,a=" ",n=e.level,o=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,d="data"+(o||""),p=e.opts.$data&&s&&s.$data;p?(a+=" var schema"+n+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",i="schema"+n):i=s;var f=p?"(new RegExp("+i+"))":e.usePattern(s);a+="if ( ",p&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'string') || "),a+=" !"+f+".test("+d+") ) {   ";var h=h||[];h.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { pattern:  ",p?a+=""+i:a+=""+e.util.toQuotedString(s),a+="  } ",!1!==e.opts.messages&&(a+=" , message: 'should match pattern \"",p?a+="' + "+i+" + '":a+=""+e.util.escapeQuotes(s),a+="\"' "),e.opts.verbose&&(a+=" , schema:  ",p?a+="validate.schema"+l:a+=""+e.util.toQuotedString(s),a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var m=a;return a=h.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+m+"]); ":a+=" validate.errors = ["+m+"]; return false; ":a+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",c&&(a+=" else { "),a}},250516,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i=" ",a=e.level,n=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,c="data"+(n||""),d="errs__"+a,p=e.util.copy(e),f="";p.level++;var h="valid"+p.level,m="key"+a,g="idx"+a,v=p.dataLevel=e.dataLevel+1,y="data"+v,b="dataProperties"+a,x=Object.keys(o||{}).filter(M),w=e.schema.patternProperties||{},S=Object.keys(w).filter(M),k=e.schema.additionalProperties,C=x.length||S.length,E=!1===k,_="object"==typeof k&&Object.keys(k).length,T=e.opts.removeAdditional,P=e.opts.ownProperties,I=e.baseId,A=e.schema.required;if(A&&!(e.opts.$data&&A.$data)&&A.length<e.opts.loopRequired)var O=e.util.toHash(A);function M(e){return"__proto__"!==e}if(i+="var "+d+" = errors;var "+h+" = true;",P&&(i+=" var "+b+" = undefined;"),E||_||T){if(P?i+=" "+b+" = "+b+" || Object.keys("+c+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+m+" = "+b+"["+g+"]; ":i+=" for (var "+m+" in "+c+") { ",C){if(i+=" var isAdditional"+a+" = !(false ",x.length){if(x.length>8)i+=" || validate.schema"+s+".hasOwnProperty("+m+") ";else if(x)for(var F,R=-1,D=x.length-1;R<D;)F=x[R+=1],i+=" || "+m+" == "+e.util.toQuotedString(F)+" "}if(S.length&&S)for(var j,L=-1,B=S.length-1;L<B;)j=S[L+=1],i+=" || "+e.usePattern(j)+".test("+m+") ";i+=" ); if (isAdditional"+a+") { "}if("all"==T)i+=" delete "+c+"["+m+"]; ";else{var N=e.errorPath,$="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),E)if(T)i+=" delete "+c+"["+m+"]; ";else{i+=" "+h+" = false; ";var z=l;l=e.errSchemaPath+"/additionalProperties";var U=U||[];U.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { additionalProperty: '"+$+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is an invalid additional property":i+="should NOT have additional properties",i+="' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var V=i;i=U.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+V+"]); ":i+=" validate.errors = ["+V+"]; return false; ":i+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=z,u&&(i+=" break; ")}else if(_)if("failing"==T){i+=" var "+d+" = errors;  ";var H=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=k,p.schemaPath=e.schemaPath+".additionalProperties",p.errSchemaPath=e.errSchemaPath+"/additionalProperties",p.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var W=c+"["+m+"]";p.dataPathArr[v]=m;var q=e.validate(p);p.baseId=I,2>e.util.varOccurences(q,y)?i+=" "+e.util.varReplace(q,y,W)+" ":i+=" var "+y+" = "+W+"; "+q+" ",i+=" if (!"+h+") { errors = "+d+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+c+"["+m+"]; }  ",e.compositeRule=p.compositeRule=H}else{p.schema=k,p.schemaPath=e.schemaPath+".additionalProperties",p.errSchemaPath=e.errSchemaPath+"/additionalProperties",p.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var W=c+"["+m+"]";p.dataPathArr[v]=m;var q=e.validate(p);p.baseId=I,2>e.util.varOccurences(q,y)?i+=" "+e.util.varReplace(q,y,W)+" ":i+=" var "+y+" = "+W+"; "+q+" ",u&&(i+=" if (!"+h+") break; ")}e.errorPath=N}C&&(i+=" } "),i+=" }  ",u&&(i+=" if ("+h+") { ",f+="}")}var G=e.opts.useDefaults&&!e.compositeRule;if(x.length&&x)for(var F,Z=-1,K=x.length-1;Z<K;){var Q=o[F=x[Z+=1]];if(e.opts.strictKeywords?"object"==typeof Q&&Object.keys(Q).length>0||!1===Q:e.util.schemaHasRules(Q,e.RULES.all)){var X=e.util.getProperty(F),W=c+X,J=G&&void 0!==Q.default;p.schema=Q,p.schemaPath=s+X,p.errSchemaPath=l+"/"+e.util.escapeFragment(F),p.errorPath=e.util.getPath(e.errorPath,F,e.opts.jsonPointers),p.dataPathArr[v]=e.util.toQuotedString(F);var q=e.validate(p);if(p.baseId=I,2>e.util.varOccurences(q,y)){q=e.util.varReplace(q,y,W);var Y=W}else{var Y=y;i+=" var "+y+" = "+W+"; "}if(J)i+=" "+q+" ";else{if(O&&O[F]){i+=" if ( "+Y+" === undefined ",P&&(i+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(F)+"') "),i+=") { "+h+" = false; ";var N=e.errorPath,z=l,ee=e.util.escapeQuotes(F);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(N,F,e.opts.jsonPointers)),l=e.errSchemaPath+"/required";var U=U||[];U.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+ee+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+ee+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var V=i;i=U.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+V+"]); ":i+=" validate.errors = ["+V+"]; return false; ":i+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=z,e.errorPath=N,i+=" } else { "}else u?(i+=" if ( "+Y+" === undefined ",P&&(i+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(F)+"') "),i+=") { "+h+" = true; } else { "):(i+=" if ("+Y+" !== undefined ",P&&(i+=" &&   Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(F)+"') "),i+=" ) { ");i+=" "+q+" } "}}u&&(i+=" if ("+h+") { ",f+="}")}if(S.length&&S)for(var j,et=-1,er=S.length-1;et<er;){var Q=w[j=S[et+=1]];if(e.opts.strictKeywords?"object"==typeof Q&&Object.keys(Q).length>0||!1===Q:e.util.schemaHasRules(Q,e.RULES.all)){p.schema=Q,p.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(j),p.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(j),P?i+=" "+b+" = "+b+" || Object.keys("+c+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+m+" = "+b+"["+g+"]; ":i+=" for (var "+m+" in "+c+") { ",i+=" if ("+e.usePattern(j)+".test("+m+")) { ",p.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var W=c+"["+m+"]";p.dataPathArr[v]=m;var q=e.validate(p);p.baseId=I,2>e.util.varOccurences(q,y)?i+=" "+e.util.varReplace(q,y,W)+" ":i+=" var "+y+" = "+W+"; "+q+" ",u&&(i+=" if (!"+h+") break; "),i+=" } ",u&&(i+=" else "+h+" = true; "),i+=" }  ",u&&(i+=" if ("+h+") { ",f+="}")}}return u&&(i+=" "+f+" if ("+d+" == errors) {"),i}},884153,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i=" ",a=e.level,n=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,c="data"+(n||""),d="errs__"+a,p=e.util.copy(e);p.level++;var f="valid"+p.level;if(i+="var "+d+" = errors;",e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0||!1===o:e.util.schemaHasRules(o,e.RULES.all)){p.schema=o,p.schemaPath=s,p.errSchemaPath=l;var h="key"+a,m="idx"+a,g="i"+a,v="' + "+h+" + '",y="data"+(p.dataLevel=e.dataLevel+1),b="dataProperties"+a,x=e.opts.ownProperties,w=e.baseId;x&&(i+=" var "+b+" = undefined; "),x?i+=" "+b+" = "+b+" || Object.keys("+c+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+h+" = "+b+"["+m+"]; ":i+=" for (var "+h+" in "+c+") { ",i+=" var startErrs"+a+" = errors; ";var S=e.compositeRule;e.compositeRule=p.compositeRule=!0;var k=e.validate(p);p.baseId=w,2>e.util.varOccurences(k,y)?i+=" "+e.util.varReplace(k,y,h)+" ":i+=" var "+y+" = "+h+"; "+k+" ",e.compositeRule=p.compositeRule=S,i+=" if (!"+f+") { for (var "+g+"=startErrs"+a+"; "+g+"<errors; "+g+"++) { vErrors["+g+"].propertyName = "+h+"; }   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { propertyName: '"+v+"' } ",!1!==e.opts.messages&&(i+=" , message: 'property name \\'"+v+"\\' is invalid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),u&&(i+=" break; "),i+=" } }"}return u&&(i+="  if ("+d+" == errors) {"),i}},561216,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i=" ",a=e.level,n=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,c="data"+(n||""),d="valid"+a,p=e.opts.$data&&o&&o.$data;p&&(i+=" var schema"+a+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ");var f="schema"+a;if(!p)if(o.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var h=[];if(o)for(var m,g=-1,v=o.length-1;g<v;){m=o[g+=1];var y=e.schema.properties[m];y&&(e.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0||!1===y:e.util.schemaHasRules(y,e.RULES.all))||(h[h.length]=m)}}else var h=o;if(p||h.length){var b=e.errorPath,x=p||h.length>=e.opts.loopRequired,w=e.opts.ownProperties;if(u)if(i+=" var missing"+a+"; ",x){p||(i+=" var "+f+" = validate.schema"+s+"; ");var S="i"+a,k="schema"+a+"["+S+"]",C="' + "+k+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,k,e.opts.jsonPointers)),i+=" var "+d+" = true; ",p&&(i+=" if (schema"+a+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+a+")) "+d+" = false; else {"),i+=" for (var "+S+" = 0; "+S+" < "+f+".length; "+S+"++) { "+d+" = "+c+"["+f+"["+S+"]] !== undefined ",w&&(i+=" &&   Object.prototype.hasOwnProperty.call("+c+", "+f+"["+S+"]) "),i+="; if (!"+d+") break; } ",p&&(i+="  }  "),i+="  if (!"+d+") {   ";var E=E||[];E.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+C+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var _=i;i=E.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+_+"]); ":i+=" validate.errors = ["+_+"]; return false; ":i+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else{i+=" if ( ";var T=h;if(T)for(var P,S=-1,I=T.length-1;S<I;){P=T[S+=1],S&&(i+=" || ");var A=e.util.getProperty(P),O=c+A;i+=" ( ( "+O+" === undefined ",w&&(i+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(P)+"') "),i+=") && (missing"+a+" = "+e.util.toQuotedString(e.opts.jsonPointers?P:A)+") ) "}i+=") {  ";var k="missing"+a,C="' + "+k+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(b,k,!0):b+" + "+k);var E=E||[];E.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+C+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var _=i;i=E.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+_+"]); ":i+=" validate.errors = ["+_+"]; return false; ":i+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else if(x){p||(i+=" var "+f+" = validate.schema"+s+"; ");var S="i"+a,k="schema"+a+"["+S+"]",C="' + "+k+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,k,e.opts.jsonPointers)),p&&(i+=" if ("+f+" && !Array.isArray("+f+")) {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+C+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+f+" !== undefined) { "),i+=" for (var "+S+" = 0; "+S+" < "+f+".length; "+S+"++) { if ("+c+"["+f+"["+S+"]] === undefined ",w&&(i+=" || ! Object.prototype.hasOwnProperty.call("+c+", "+f+"["+S+"]) "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+C+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",p&&(i+="  }  ")}else{var M=h;if(M)for(var P,F=-1,R=M.length-1;F<R;){P=M[F+=1];var A=e.util.getProperty(P),C=e.util.escapeQuotes(P),O=c+A;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(b,P,e.opts.jsonPointers)),i+=" if ( "+O+" === undefined ",w&&(i+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(P)+"') "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+C+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=b}else u&&(i+=" if (true) {");return i}},548219,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i,a=" ",n=e.level,o=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,d="data"+(o||""),p="valid"+n,f=e.opts.$data&&s&&s.$data;if(f?(a+=" var schema"+n+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",i="schema"+n):i=s,(s||f)&&!1!==e.opts.uniqueItems){f&&(a+=" var "+p+"; if ("+i+" === false || "+i+" === undefined) "+p+" = true; else if (typeof "+i+" != 'boolean') "+p+" = false; else { "),a+=" var i = "+d+".length , "+p+" = true , j; if (i > 1) { ";var h=e.schema.items&&e.schema.items.type,m=Array.isArray(h);!h||"object"==h||"array"==h||m&&(h.indexOf("object")>=0||h.indexOf("array")>=0)?a+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+d+"[i], "+d+"[j])) { "+p+" = false; break outer; } } } ":(a+=" var itemIndices = {}, item; for (;i--;) { var item = "+d+"[i]; ",a+=" if ("+e.util["checkDataType"+(m?"s":"")](h,"item",e.opts.strictNumbers,!0)+") continue; ",m&&(a+=" if (typeof item == 'string') item = '\"' + item; "),a+=" if (typeof itemIndices[item] == 'number') { "+p+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "),a+=" } ",f&&(a+="  }  "),a+=" if (!"+p+") {   ";var g=g||[];g.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(a+=" , schema:  ",f?a+="validate.schema"+l:a+=""+s,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var v=a;a=g.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+v+"]); ":a+=" validate.errors = ["+v+"]; return false; ":a+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",c&&(a+=" else { ")}else c&&(a+=" if (true) { ");return a}},268755,(e,t,r)=>{"use strict";t.exports={$ref:e.r(717476),allOf:e.r(516223),anyOf:e.r(692597),$comment:e.r(457388),const:e.r(902080),contains:e.r(4347),dependencies:e.r(319458),enum:e.r(941521),format:e.r(327957),if:e.r(890199),items:e.r(680367),maximum:e.r(219539),minimum:e.r(219539),maxItems:e.r(29104),minItems:e.r(29104),maxLength:e.r(401441),minLength:e.r(401441),maxProperties:e.r(94933),minProperties:e.r(94933),multipleOf:e.r(132003),not:e.r(669272),oneOf:e.r(238601),pattern:e.r(54714),properties:e.r(250516),propertyNames:e.r(884153),required:e.r(561216),uniqueItems:e.r(548219),validate:e.r(864917)}},253479,(e,t,r)=>{"use strict";var i=e.r(268755),a=e.r(442726).toHash;t.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=a(t),e.types=a(["number","integer","string","array","object","boolean","null"]),e.forEach(function(r){r.rules=r.rules.map(function(r){if("object"==typeof r){var a,n=Object.keys(r)[0];a=r[n],r=n,a.forEach(function(r){t.push(r),e.all[r]=!0})}return t.push(r),e.all[r]={keyword:r,code:i[r],implements:a}}),e.all.$comment={keyword:"$comment",code:i.$comment},r.type&&(e.types[r.type]=r)}),e.keywords=a(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}},768010,(e,t,r)=>{"use strict";var i=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];t.exports=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var a,n=t[r].split("/"),o=e;for(a=1;a<n.length;a++)o=o[n[a]];for(a=0;a<i.length;a++){var s=i[a],l=o[s];l&&(o[s]={anyOf:[l,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e}},825132,(e,t,r)=>{"use strict";var i=e.r(794811).MissingRef;t.exports=function e(t,r,a){var n=this;if("function"!=typeof this._opts.loadSchema)throw Error("options.loadSchema should be a function");"function"==typeof r&&(a=r,r=void 0);var o=s(t).then(function(){var e=n._addSchema(t,void 0,r);return e.validate||function e(t){try{return n._compile(t)}catch(d){if(d instanceof i){var a=d,o=a.missingSchema;if(c(o))throw Error("Schema "+o+" is loaded but "+a.missingRef+" cannot be resolved");var l=n._loadingSchemas[o];return l||(l=n._loadingSchemas[o]=n._opts.loadSchema(o)).then(u,u),l.then(function(e){if(!c(o))return s(e).then(function(){c(o)||n.addSchema(e,o,void 0,r)})}).then(function(){return e(t)});function u(){delete n._loadingSchemas[o]}function c(e){return n._refs[e]||n._schemas[e]}}throw d}}(e)});return a&&o.then(function(e){a(null,e)},a),o;function s(t){var r=t.$schema;return r&&!n.getSchema(r)?e.call(n,{$ref:r},!0):Promise.resolve()}}},958637,e=>{e.v({$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0})},44554,(e,t,r)=>{"use strict";var i=e.r(958637);t.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:i.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:i.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},214595,(e,t,r)=>{"use strict";var i=/^[a-z_$][a-z0-9_$-]*$/i,a=e.r(284083),n=e.r(44554);function o(e,t){o.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile(n,!0);if(r(e))return!0;if(o.errors=r.errors,!t)return!1;throw Error("custom keyword definition is invalid: "+this.errorsText(r.errors))}t.exports={add:function(e,t){var r=this.RULES;if(r.keywords[e])throw Error("Keyword "+e+" is already defined");if(!i.test(e))throw Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var n=t.type;if(Array.isArray(n))for(var o=0;o<n.length;o++)l(e,n[o],t);else l(e,n,t);var s=t.metaSchema;s&&(t.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(s,!0))}function l(e,t,i){for(var n,o=0;o<r.length;o++){var s=r[o];if(s.type==t){n=s;break}}n||(n={type:t,rules:[]},r.push(n));var l={keyword:e,definition:i,custom:!0,code:a,implements:i.implements};n.rules.push(l),r.custom[e]=l}return r.keywords[e]=r.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var i=t[r].rules,a=0;a<i.length;a++)if(i[a].keyword==e){i.splice(a,1);break}return this},validate:o}},908368,e=>{e.v({$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1})},1689,(e,t,r)=>{"use strict";var i=e.r(726816),a=e.r(71595),n=e.r(74907),o=e.r(394318),s=e.r(859591),l=e.r(518227),u=e.r(253479),c=e.r(768010),d=e.r(442726);t.exports=v,v.prototype.validate=function(e,t){if("string"==typeof e){if(!(r=this.getSchema(e)))throw Error('no schema with key or ref "'+e+'"')}else{var r,i=this._addSchema(e);r=i.validate||this._compile(i)}var a=r(t);return!0!==r.$async&&(this.errors=r.errors),a},v.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},v.prototype.addSchema=function(e,t,r,i){if(Array.isArray(e)){for(var n=0;n<e.length;n++)this.addSchema(e[n],void 0,r,i);return this}var o=this._getId(e);if(void 0!==o&&"string"!=typeof o)throw Error("schema id must be string");return k(this,t=a.normalizeId(t||o)),this._schemas[t]=this._addSchema(e,r,i,!0),this},v.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},v.prototype.validateSchema=function(e,t){var r,i,a=e.$schema;if(void 0!==a&&"string"!=typeof a)throw Error("$schema must be a string");if(!(a=a||this._opts.defaultMeta||(r=this,i=r._opts.meta,r._opts.defaultMeta="object"==typeof i?r._getId(i)||i:r.getSchema(h)?h:void 0,r._opts.defaultMeta)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(a,e);if(!n&&t){var o="schema is invalid: "+this.errorsText();if("log"==this._opts.validateSchema)this.logger.error(o);else throw Error(o)}return n},v.prototype.getSchema=function(e){var t=y(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=a.schema.call(e,{schema:{}},t);if(r){var n=r.schema,s=r.root,l=r.baseId,u=i.call(e,n,s,void 0,l);return e._fragments[t]=new o({ref:t,fragment:!0,schema:n,root:s,baseId:l,validate:u}),u}}(this,e)}},v.prototype.removeSchema=function(e){if(e instanceof RegExp)return b(this,this._schemas,e),b(this,this._refs,e),this;switch(typeof e){case"undefined":b(this,this._schemas),b(this,this._refs),this._cache.clear();break;case"string":var t=y(this,e);t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e];break;case"object":var r=this._opts.serialize,i=r?r(e):e;this._cache.del(i);var n=this._getId(e);n&&(n=a.normalizeId(n),delete this._schemas[n],delete this._refs[n])}return this},v.prototype.addFormat=function(e,t){return"string"==typeof t&&(t=new RegExp(t)),this._formats[e]=t,this},v.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,i=void 0===t.dataVar?"data":t.dataVar,a="",n=0;n<e.length;n++){var o=e[n];o&&(a+=i+o.dataPath+" "+o.message+r)}return a.slice(0,-r.length)},v.prototype._addSchema=function(e,t,r,i){if("object"!=typeof e&&"boolean"!=typeof e)throw Error("schema should be object or boolean");var n,s=this._opts.serialize,l=s?s(e):e,u=this._cache.get(l);if(u)return u;i=i||!1!==this._opts.addUsedSchema;var c=a.normalizeId(this._getId(e));c&&i&&k(this,c);var d=!1!==this._opts.validateSchema&&!t;!d||(n=c&&c==a.normalizeId(e.$schema))||this.validateSchema(e,!0);var p=a.ids.call(this,e),f=new o({id:c,schema:e,localRefs:p,cacheKey:l,meta:r});return"#"!=c[0]&&i&&(this._refs[c]=f),this._cache.put(l,f),d&&n&&this.validateSchema(e,!0),f},v.prototype._compile=function(e,t){var r,a;if(e.compiling)return e.validate=n,n.schema=e.schema,n.errors=null,n.root=t||n,!0===e.schema.$async&&(n.$async=!0),n;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{a=i.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=a,e.refs=a.refs,e.refVal=a.refVal,e.root=a.root,a;function n(){var t=e.validate,r=t.apply(this,arguments);return n.errors=t.errors,r}},v.prototype.compileAsync=e.r(825132);var p=e.r(214595);v.prototype.addKeyword=p.add,v.prototype.getKeyword=p.get,v.prototype.removeKeyword=p.remove,v.prototype.validateKeyword=p.validate;var f=e.r(794811);v.ValidationError=f.Validation,v.MissingRefError=f.MissingRef,v.$dataMetaSchema=c;var h="http://json-schema.org/draft-07/schema",m=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],g=["/properties"];function v(t){if(!(this instanceof v))return new v(t);t=this._opts=d.copy(t)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:C,warn:C,error:C};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=l(t.format),this._cache=t.cache||new n,this._loadingSchemas={},this._compilations=[],this.RULES=u(),this._getId=function(e){switch(e.schemaId){case"auto":return S;case"id":return x;default:return w}}(t),t.loopRequired=t.loopRequired||1/0,"property"==t.errorDataPath&&(t._errorDataPathProperty=!0),void 0===t.serialize&&(t.serialize=s),this._metaOpts=function(e){for(var t=d.copy(e._opts),r=0;r<m.length;r++)delete t[m[r]];return t}(this),t.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),t.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}(this),function(t){if(t._opts.$data&&(r=e.r(908368),t.addMetaSchema(r,r.$id,!0)),!1!==t._opts.meta){var r,i=e.r(958637);t._opts.$data&&(i=c(i,g)),t.addMetaSchema(i,h,!0),t._refs["http://json-schema.org/schema"]=h}}(this),"object"==typeof t.meta&&this.addMetaSchema(t.meta),t.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(t)if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function y(e,t){return t=a.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function b(e,t,r){for(var i in t){var a=t[i];!a.meta&&(!r||r.test(i))&&(e._cache.del(a.cacheKey),delete t[i])}}function x(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function w(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function S(e){if(e.$id&&e.id&&e.$id!=e.id)throw Error("schema $id is different from id");return e.$id||e.id}function k(e,t){if(e._schemas[t]||e._refs[t])throw Error('schema with key or id "'+t+'" already exists')}function C(){}},884045,(e,t,r)=>{"use strict";var i={Object:Object,Array:Array,Function:Function,Number:Number,String:String,Date:Date,RegExp:RegExp};t.exports=function e(t){return"u">typeof Buffer&&(i.Buffer=Buffer),"u">typeof Promise&&(i.Promise=Promise),e.definition={compile:function(e){if("string"==typeof e){var t=r(e);return function(e){return e instanceof t}}var i=e.map(r);return function(e){for(var t=0;t<i.length;t++)if(e instanceof i[t])return!0;return!1}},CONSTRUCTORS:i,metaSchema:{anyOf:[{type:"string"},{type:"array",items:{type:"string"}}]}},t.addKeyword("instanceof",e.definition),t;function r(e){var t=i[e];if(t)return t;throw Error('invalid "instanceof" keyword value '+e)}}},516436,(e,t,r)=>{"use strict";t.exports=function e(t){return e.definition={type:"number",macro:function(e,t){var r=e[0],i=e[1],a=t.exclusiveRange;return function(e,t,r){if(void 0!==r&&"boolean"!=typeof r)throw Error("Invalid schema for exclusiveRange keyword, should be boolean");if(e>t||r&&e==t)throw Error("There are no numbers in range")}(r,i,a),!0===a?{exclusiveMinimum:r,exclusiveMaximum:i}:{minimum:r,maximum:i}},metaSchema:{type:"array",minItems:2,maxItems:2,items:{type:"number"}}},t.addKeyword("range",e.definition),t.addKeyword("exclusiveRange"),t}},807048,(e,t,r)=>{"use strict";t.exports=function e(t){return e.definition={type:"string",inline:function(e,t,r){return function(){try{if("object"==typeof r)return new RegExp(r.pattern,r.flags);var e=r.match(/^\/(.*)\/([gimuy]*)$/);if(e)return new RegExp(e[1],e[2]);throw Error("cannot parse string into RegExp")}catch(e){throw console.error("regular expression",r,"is invalid"),e}}()+".test(data"+(e.dataLevel||"")+")"},metaSchema:{type:["string","object"],properties:{pattern:{type:"string"},flags:{type:"string"}},required:["pattern"],additionalProperties:!1}},t.addKeyword("regexp",e.definition),t}},714689,(e,t,r)=>{"use strict";var i=["undefined","string","number","object","function","boolean","symbol"];t.exports=function e(t){return e.definition={inline:function(e,t,r){var i="data"+(e.dataLevel||"");return"string"==typeof r?"typeof "+i+' == "'+r+'"':(r="validate.schema"+e.schemaPath+"."+t)+".indexOf(typeof "+i+") >= 0"},metaSchema:{anyOf:[{type:"string",enum:i},{type:"array",items:{type:"string",enum:i}}]}},t.addKeyword("typeof",e.definition),t}},708709,(e,t,r)=>{"use strict";var i={},a={timestamp:function(){return Date.now()},datetime:function(){return(new Date).toISOString()},date:function(){return(new Date).toISOString().slice(0,10)},time:function(){return(new Date).toISOString().slice(11)},random:function(){return Math.random()},randomint:function(e){var t=e&&e.max||2;return function(){return Math.floor(Math.random()*t)}},seq:function(e){var t=e&&e.name||"";return i[t]=i[t]||0,function(){return i[t]++}}};t.exports=function e(t){return e.definition={compile:function(e,t,r){var i={};for(var n in e){var o=e[n],s=function(e){var t=a[e];if(t)return t;throw Error('invalid "dynamicDefaults" keyword property value: '+e)}("string"==typeof o?o:o.func);i[n]=s.length?s(o.args):s}return r.opts.useDefaults&&!r.compositeRule?function(t){for(var a in e)(void 0===t[a]||"empty"==r.opts.useDefaults&&(null===t[a]||""===t[a]))&&(t[a]=i[a]());return!0}:function(){return!0}},DEFAULTS:a,metaSchema:{type:"object",additionalProperties:{type:["string","object"],additionalProperties:!1,required:["func","args"],properties:{func:{type:"string"},args:{type:"object"}}}}},t.addKeyword("dynamicDefaults",e.definition),t}},285278,(e,t,r)=>{"use strict";t.exports=function e(t){return e.definition={type:"object",macro:function(e,t){if(!e)return!0;var r=Object.keys(t.properties);return 0==r.length||{required:r}},metaSchema:{type:"boolean"},dependencies:["properties"]},t.addKeyword("allRequired",e.definition),t}},628754,(e,t,r)=>{"use strict";t.exports=function e(t){return e.definition={type:"object",macro:function(e){return 0==e.length||(1==e.length?{required:e}:{anyOf:e.map(function(e){return{required:[e]}})})},metaSchema:{type:"array",items:{type:"string"}}},t.addKeyword("anyRequired",e.definition),t}},563161,(e,t,r)=>{"use strict";t.exports=function e(t){return e.definition={type:"object",macro:function(e){return 0==e.length||(1==e.length?{required:e}:{oneOf:e.map(function(e){return{required:[e]}})})},metaSchema:{type:"array",items:{type:"string"}}},t.addKeyword("oneRequired",e.definition),t}},621742,(e,t,r)=>{"use strict";t.exports=function e(t){return e.definition={type:"object",macro:function(e){return 0==e.length||(1==e.length?{not:{required:e}}:{not:{anyOf:e.map(function(e){return{required:[e]}})}})},metaSchema:{type:"array",items:{type:"string"}}},t.addKeyword("prohibited",e.definition),t}},152391,(e,t,r)=>{"use strict";var i=["number","integer","string","boolean","null"];t.exports=function e(t){return e.definition={type:"array",compile:function(e,t,r){var a,n,o=r.util.equal,s=(a=e,n=t,a.map(function(e){var t=n.items&&n.items.properties,r=t&&t[e]&&t[e].type;return Array.isArray(r)?0>r.indexOf("object")&&0>r.indexOf("array"):i.indexOf(r)>=0}));return function(t){if(t.length>1)for(var r=0;r<e.length;r++){var i,a=e[r];if(s[r]){var n={};for(i=t.length;i--;)if(t[i]&&"object"==typeof t[i]){var l=t[i][a];if(!l||"object"!=typeof l){if("string"==typeof l&&(l='"'+l),n[l])return!1;n[l]=!0}}}else for(i=t.length;i--;)if(t[i]&&"object"==typeof t[i]){for(var u=i;u--;)if(t[u]&&"object"==typeof t[u]&&o(t[i][a],t[u][a]))return!1}}return!0}},metaSchema:{type:"array",items:{type:"string"}}},t.addKeyword("uniqueItemProperties",e.definition),t}},587764,(e,t,r)=>{"use strict";t.exports={metaSchemaRef:function(e){var t=e._opts.defaultMeta;return"string"==typeof t?{$ref:t}:e.getSchema(i)?{$ref:i}:(console.warn("meta schema not defined"),{})}};var i="http://json-schema.org/draft-07/schema"},278661,(e,t,r)=>{"use strict";var i=e.r(587764);t.exports=function e(t){return e.definition={type:"object",macro:function(e){var t=[];for(var r in e)t.push(function(e,t){for(var r=e.split("/"),i={},a=i,n=1;n<r.length;n++){var o=r[n],s=n==r.length-1;o=o.replace(/~1/g,"/").replace(/~0/g,"~");var l=a.properties={},u=void 0;if(/[0-9]+/.test(o)){var c=+o;for(u=a.items=[];c--;)u.push({})}a=s?t:{},l[o]=a,u&&u.push(a)}return i}(r,e[r]));return{allOf:t}},metaSchema:{type:"object",propertyNames:{type:"string",format:"json-pointer"},additionalProperties:i.metaSchemaRef(t)}},t.addKeyword("deepProperties",e.definition),t}},146664,(e,t,r)=>{"use strict";t.exports=function e(t){return e.definition={type:"object",inline:function(e,t,r){for(var o="",s=0;s<r.length;s++)s&&(o+=" && "),o+="("+function(e,t){var r,o="data"+(t||"");if(!e)return o;for(var s=o,l=e.split("/"),u=1;u<l.length;u++){o+=a.test(r=l[u].replace(/~1/g,"/").replace(/~0/g,"~"))?"["+r+"]":i.test(r)?"."+r:"['"+r.replace(n,"\\$&")+"']",s+=" && "+o}return s}(r[s],e.dataLevel)+" !== undefined)";return o},metaSchema:{type:"array",items:{type:"string",format:"json-pointer"}}},t.addKeyword("deepRequired",e.definition),t};var i=/^[a-z$_][a-z$_0-9]*$/i,a=/^[0-9]+$/,n=/'|\\/g},33594,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i=" ",a=e.level,n=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,c="data"+(n||""),d="valid"+a;if(i+="var "+d+" = undefined;",!1===e.opts.format)return i+(" "+d+" = true; ");var p=e.schema.format,f=e.opts.$data&&p.$data,h="";if(f){var m=e.util.getData(p.$data,n,e.dataPathArr),g="format"+a,v="compare"+a;i+=" var "+g+" = formats["+m+"] , "+v+" = "+g+" && "+g+".compare;"}else{var g=e.formats[p];if(!(g&&g.compare))return i+("  "+d+" = true; ");var v="formats"+e.util.getProperty(p)+".compare"}var y,b,x="formatMaximum"==t,w="formatExclusive"+(x?"Maximum":"Minimum"),S=e.schema[w],k=e.opts.$data&&S&&S.$data,C=x?"<":">",E="result"+a,_=e.opts.$data&&o&&o.$data;if(_?(i+=" var schema"+a+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",b="schema"+a):b=o,k){var T=e.util.getData(S.$data,n,e.dataPathArr),P="exclusive"+a,I="op"+a,A="' + "+I+" + '";i+=" var schemaExcl"+a+" = "+T+"; ",i+=" if (typeof "+(T="schemaExcl"+a)+" != 'boolean' && "+T+" !== undefined) { "+d+" = false; ";var y=w,O=O||[];O.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(y||"_formatExclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: '"+w+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var M=i;i=O.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+M+"]); ":i+=" validate.errors = ["+M+"]; return false; ":i+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }  ",u&&(h+="}",i+=" else { "),_&&(i+=" if ("+b+" === undefined) "+d+" = true; else if (typeof "+b+" != 'string') "+d+" = false; else { ",h+="}"),f&&(i+=" if (!"+v+") "+d+" = true; else { ",h+="}"),i+=" var "+E+" = "+v+"("+c+",  ",_?i+=""+b:i+=""+e.util.toQuotedString(o),i+=" ); if ("+E+" === undefined) "+d+" = false; var "+P+" = "+T+" === true; if ("+d+" === undefined) { "+d+" = "+P+" ? "+E+" "+C+" 0 : "+E+" "+C+"= 0; } if (!"+d+") var op"+a+" = "+P+" ? '"+C+"' : '"+C+"=';"}else{var P=!0===S,A=C;P||(A+="=");var I="'"+A+"'";_&&(i+=" if ("+b+" === undefined) "+d+" = true; else if (typeof "+b+" != 'string') "+d+" = false; else { ",h+="}"),f&&(i+=" if (!"+v+") "+d+" = true; else { ",h+="}"),i+=" var "+E+" = "+v+"("+c+",  ",_?i+=""+b:i+=""+e.util.toQuotedString(o),i+=" ); if ("+E+" === undefined) "+d+" = false; if ("+d+" === undefined) "+d+" = "+E+" "+C,P||(i+="="),i+=" 0;"}i+=""+h+"if (!"+d+") { ";var y=t,O=O||[];O.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(y||"_formatLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { comparison: "+I+", limit:  ",_?i+=""+b:i+=""+e.util.toQuotedString(o),i+=" , exclusive: "+P+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be "+A+' "',_?i+="' + "+b+" + '":i+=""+e.util.escapeQuotes(o),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",_?i+="validate.schema"+s:i+=""+e.util.toQuotedString(o),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var M=i;return i=O.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+M+"]); ":i+=" validate.errors = ["+M+"]; return false; ":i+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="}"}},695062,(e,t,r)=>{"use strict";var i=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,a=/t|\s/i,n={date:s,time:l,"date-time":function(e,t){if(e&&t){e=e.split(a),t=t.split(a);var r=s(e[0],t[0]);if(void 0!==r)return r||l(e[1],t[1])}}},o={type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1};function s(e,t){if(e&&t){if(e>t)return 1;if(e<t)return -1;if(e===t)return 0}}function l(e,t){if(e&&t&&(e=e.match(i),t=t.match(i),e&&t)){if((e=e[1]+e[2]+e[3]+(e[4]||""))>(t=t[1]+t[2]+t[3]+(t[4]||"")))return 1;if(e<t)return -1;if(e===t)return 0}}t.exports=function(t){var r="format"+t;return function i(a){return i.definition={type:"string",inline:e.r(33594),statements:!0,errors:"full",dependencies:["format"],metaSchema:{anyOf:[{type:"string"},o]}},a.addKeyword(r,i.definition),a.addKeyword("formatExclusive"+t,{dependencies:["format"+t],metaSchema:{anyOf:[{type:"boolean"},o]}}),function(e){var t=e._formats;for(var r in n){var i=t[r];("object"!=typeof i||i instanceof RegExp||!i.validate)&&(i=t[r]={validate:i}),i.compare||(i.compare=n[r])}}(a),a}}},318517,(e,t,r)=>{"use strict";t.exports=e.r(695062)("Minimum")},321980,(e,t,r)=>{"use strict";t.exports=e.r(695062)("Maximum")},766541,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i=" ",a=e.level,n=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,c="data"+(n||""),d="valid"+a,p="key"+a,f="idx"+a,h="patternMatched"+a,m="dataProperties"+a,g="",v=e.opts.ownProperties;if(i+="var "+d+" = true;",v&&(i+=" var "+m+" = undefined;"),o)for(var y,b=-1,x=o.length-1;b<x;){y=o[b+=1],i+=" var "+h+" = false;  ",v?i+=" "+m+" = "+m+" || Object.keys("+c+"); for (var "+f+"=0; "+f+"<"+m+".length; "+f+"++) { var "+p+" = "+m+"["+f+"]; ":i+=" for (var "+p+" in "+c+") { ",i+=" "+h+" = "+e.usePattern(y)+".test("+p+"); if ("+h+") break; } ";var w=e.util.escapeQuotes(y);i+=" if (!"+h+") { "+d+" = false;  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'patternRequired' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingPattern: '"+w+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should have property matching pattern \\'"+w+"\\'' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; }   ",u&&(g+="}",i+=" else { ")}return i+(""+g)}},369634,(e,t,r)=>{"use strict";t.exports=function t(r){return t.definition={type:"object",inline:e.r(766541),statements:!0,errors:"full",metaSchema:{type:"array",items:{type:"string",format:"regex"},uniqueItems:!0}},r.addKeyword("patternRequired",t.definition),r}},795119,(e,t,r)=>{"use strict";t.exports=function(e,t,r){var i=" ",a=e.level,n=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,c="data"+(n||""),d="errs__"+a,p=e.util.copy(e),f="";p.level++;var h,m="valid"+p.level,g="ifPassed"+e.level,v=p.baseId;if(i+="var "+g+";",o)for(var y,b=-1,x=o.length-1;b<x;){if(y=o[b+=1],b&&!h&&(i+=" if (!"+g+") { ",f+="}"),y.if&&(e.opts.strictKeywords?"object"==typeof y.if&&Object.keys(y.if).length>0:e.util.schemaHasRules(y.if,e.RULES.all))){i+=" var "+d+" = errors;   ";var w=e.compositeRule;if(e.compositeRule=p.compositeRule=!0,p.createErrors=!1,p.schema=y.if,p.schemaPath=s+"["+b+"].if",p.errSchemaPath=l+"/"+b+"/if",i+="  "+e.validate(p)+" ",p.baseId=v,p.createErrors=!0,e.compositeRule=p.compositeRule=w,i+=" "+g+" = "+m+"; if ("+g+") {  ","boolean"==typeof y.then){if(!1===y.then){var S=S||[];S.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'switch' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { caseIndex: "+b+" } ",!1!==e.opts.messages&&(i+=" , message: 'should pass \"switch\" keyword validation' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var k=i;i=S.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+k+"]); ":i+=" validate.errors = ["+k+"]; return false; ":i+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}i+=" var "+m+" = "+y.then+"; "}else p.schema=y.then,p.schemaPath=s+"["+b+"].then",p.errSchemaPath=l+"/"+b+"/then",i+="  "+e.validate(p)+" ",p.baseId=v;i+="  } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } } "}else if(i+=" "+g+" = true;  ","boolean"==typeof y.then){if(!1===y.then){var S=S||[];S.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'switch' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { caseIndex: "+b+" } ",!1!==e.opts.messages&&(i+=" , message: 'should pass \"switch\" keyword validation' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var k=i;i=S.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+k+"]); ":i+=" validate.errors = ["+k+"]; return false; ":i+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}i+=" var "+m+" = "+y.then+"; "}else p.schema=y.then,p.schemaPath=s+"["+b+"].then",p.errSchemaPath=l+"/"+b+"/then",i+="  "+e.validate(p)+" ",p.baseId=v;h=y.continue}return i+(""+f+"var valid"+a+" = "+m+";")}},660970,(e,t,r)=>{"use strict";var i=e.r(587764);t.exports=function t(r){if(!r.RULES.keywords.switch||!r.RULES.keywords.if){var a=i.metaSchemaRef(r);return t.definition={inline:e.r(795119),statements:!0,errors:"full",metaSchema:{type:"array",items:{required:["then"],properties:{if:a,then:{anyOf:[{type:"boolean"},a]},continue:{type:"boolean"}},additionalProperties:!1,dependencies:{continue:["if"]}}}},r.addKeyword("switch",t.definition),r}}},738049,(e,t,r)=>{"use strict";var i=e.r(587764);t.exports=function e(t){if(!t._opts.$data)return console.warn("keyword select requires $data option"),t;var r=i.metaSchemaRef(t),a=[];return e.definition={validate:function e(t,r,i){if(void 0===i.selectCases)throw Error('keyword "selectCases" is absent');var a=n(i,!1),o=a.cases[t];if(void 0===o&&(o=a.default),"boolean"==typeof o)return o;var s=o(r);return s||(e.errors=o.errors),s},$data:!0,metaSchema:{type:["string","number","boolean","null"]}},t.addKeyword("select",e.definition),t.addKeyword("selectCases",{compile:function(e,t){var r=n(t);for(var i in e)r.cases[i]=o(e[i]);return function(){return!0}},valid:!0,metaSchema:{type:"object",additionalProperties:r}}),t.addKeyword("selectDefault",{compile:function(e,t){return n(t).default=o(e),function(){return!0}},valid:!0,metaSchema:r}),t;function n(e,t){var r;return a.some(function(t){if(t.parentSchema===e)return r=t,!0}),r||!1===t||(r={parentSchema:e,cases:{},default:!0},a.push(r)),r}function o(e){return"boolean"==typeof e?e:t.compile(e)}}},492211,(e,t,r)=>{"use strict";t.exports=function e(t){var r={trimLeft:function(e){return e.replace(/^[\s]+/,"")},trimRight:function(e){return e.replace(/[\s]+$/,"")},trim:function(e){return e.trim()},toLowerCase:function(e){return e.toLowerCase()},toUpperCase:function(e){return e.toUpperCase()},toEnumCase:function(e,t){return t.hash[i(e)]||e}};return e.definition={type:"string",errors:!1,modifying:!0,valid:!0,compile:function(e,t){var a;if(-1!==e.indexOf("toEnumCase")){if(a={hash:{}},!t.enum)throw Error('Missing enum. To use `transform:["toEnumCase"]`, `enum:[...]` is required.');for(var n=t.enum.length;n--;){var o=t.enum[n];if("string"==typeof o){var s=i(o);if(a.hash[s])throw Error('Invalid enum uniqueness. To use `transform:["toEnumCase"]`, all values must be unique when case insensitive.');a.hash[s]=o}}}return function(t,i,n,o){if(n){for(var s=0,l=e.length;s<l;s++)t=r[e[s]](t,a);n[o]=t}}},metaSchema:{type:"array",items:{type:"string",enum:["trimLeft","trimRight","trim","toLowerCase","toUpperCase","toEnumCase"]}}},t.addKeyword("transform",e.definition),t;function i(e){return e.toLowerCase()}}},182244,(e,t,r)=>{"use strict";t.exports={instanceof:e.r(884045),range:e.r(516436),regexp:e.r(807048),typeof:e.r(714689),dynamicDefaults:e.r(708709),allRequired:e.r(285278),anyRequired:e.r(628754),oneRequired:e.r(563161),prohibited:e.r(621742),uniqueItemProperties:e.r(152391),deepProperties:e.r(278661),deepRequired:e.r(146664),formatMinimum:e.r(318517),formatMaximum:e.r(321980),patternRequired:e.r(369634),switch:e.r(660970),select:e.r(738049),transform:e.r(492211)}},849335,(e,t,r)=>{"use strict";var i=e.r(182244);function a(e,t){if(Array.isArray(t)){for(var r=0;r<t.length;r++)n(t[r])(e);return e}if(t)return n(t)(e),e;for(t in i)n(t)(e);return e}function n(e){var t=i[e];if(!t)throw Error("Unknown keyword "+e);return t}t.exports=a,a.get=n},623561,(e,t,r)=>{"use strict";let i,a;Object.defineProperty(r,"__esModule",{value:!0}),r.validate=function(e,t,r){if(!p())return;let i=[];if(Array.isArray(t))for(let r=0;r<=t.length-1;r++)i.push(...h(e,t[r]).map(e=>(function e(t,r){return t.dataPath=`[${r}]${t.dataPath}`,t.children&&t.children.forEach(t=>e(t,r)),t})(e,r)));else i=h(e,t);if(i.length>0)throw new l.default(i,e,r)},r.enableValidation=function(){d=!1,process.env.SKIP_VALIDATION="n"},r.disableValidation=function(){d=!0,process.env.SKIP_VALIDATION="y"},r.needValidate=p,Object.defineProperty(r,"ValidationError",{enumerable:!0,get:function(){return l.default}});var n,o=u(e.r(245442)),s=u(e.r(34587)),l=u(e.r(529837));function u(e){return e&&e.__esModule?e:{default:e}}let c=(n=()=>{let t=e.r(1689),r=e.r(849335),i=new t({allErrors:!0,verbose:!0,$data:!0});return r(i,["instanceof","formatMinimum","formatMaximum","patternRequired"]),(0,o.default)(i),(0,s.default)(i),i},a=!1,()=>(a||(i=n(),a=!0,n=void 0),i)),d=!1;function p(){if(d)return!1;if(process&&process.env&&process.env.SKIP_VALIDATION){let e=process.env.SKIP_VALIDATION.trim();if(/^(?:y|yes|true|1|on)$/i.test(e))return!1;/^(?:n|no|false|0|off)$/i.test(e)}return!0}let f=new WeakMap;function h(e,t){let r=f.get(e);return(r||(r=c().compile(e),f.set(e,r)),r(t))?[]:r.errors?function(e){let t=[];for(let r of e){let{dataPath:e}=r,i=[];t=t.filter(t=>!t.dataPath.includes(e)||(t.children&&(i=i.concat(t.children.slice(0))),t.children=void 0,i.push(t),!1)),i.length&&(r.children=i),t.push(r)}return t}(r.errors):[]}},627511,(e,t,r)=>{"use strict";let{validate:i,ValidationError:a,enableValidation:n,disableValidation:o,needValidate:s}=e.r(623561);t.exports={validate:i,ValidationError:a,enableValidation:n,disableValidation:o,needValidate:s}},138703,(e,t,r)=>{t.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||0x1fffffffffffff,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},591130,(e,t,r)=>{t.exports="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{}},70547,(e,t,r)=>{let{MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:a}=e.r(138703),n=e.r(591130),o=(r=t.exports={}).re=[],s=r.safeRe=[],l=r.src=[],u=r.t={},c=0,d="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",i],[d,a]],f=(e,t,r)=>{let i=(e=>{for(let[t,r]of p)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),a=c++;n(e,a,t),u[e]=a,l[a]=t,o[a]=new RegExp(t,r?"g":void 0),s[a]=new RegExp(i,r?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","\\d+"),f("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),f("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),f("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER",`${d}+`),f("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),f("FULL",`^${l[u.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),f("LOOSE",`^${l[u.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),f("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),f("COERCE",`(^|[^\\d])(\\d{1,${i}})(?:\\.(\\d{1,${i}}))?(?:\\.(\\d{1,${i}}))?(?:$|[^\\d])`),f("COERCERTL",l[u.COERCE],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),r.tildeTrimReplace="$1~",f("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),r.caretTrimReplace="$1^",f("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),r.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},782789,(e,t,r)=>{let i=Object.freeze({loose:!0}),a=Object.freeze({});t.exports=e=>e?"object"!=typeof e?i:e:a},318429,(e,t,r)=>{let i=/^[0-9]+$/,a=(e,t)=>{let r=i.test(e),a=i.test(t);return r&&a&&(e*=1,t*=1),e===t?0:r&&!a?-1:a&&!r?1:e<t?-1:1};t.exports={compareIdentifiers:a,rcompareIdentifiers:(e,t)=>a(t,e)}},620326,(e,t,r)=>{let i=e.r(591130),{MAX_LENGTH:a,MAX_SAFE_INTEGER:n}=e.r(138703),{safeRe:o,t:s}=e.r(70547),l=e.r(782789),{compareIdentifiers:u}=e.r(318429);class c{constructor(e,t){if(t=l(t),e instanceof c)if(!!t.loose===e.loose&&!!t.includePrerelease===e.includePrerelease)return e;else e=e.version;else if("string"!=typeof e)throw TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>a)throw TypeError(`version is longer than ${a} characters`);i("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?o[s.LOOSE]:o[s.FULL]);if(!r)throw TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>n||this.major<0)throw TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){let t=+e;if(t>=0&&t<n)return t}return e}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(i("SemVer.compare",this.version,this.options,e),!(e instanceof c)){if("string"==typeof e&&e===this.version)return 0;e=new c(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof c||(e=new c(e,this.options)),u(this.major,e.major)||u(this.minor,e.minor)||u(this.patch,e.patch)}comparePre(e){if(e instanceof c||(e=new c(e,this.options)),this.prerelease.length&&!e.prerelease.length)return -1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],a=e.prerelease[t];if(i("prerelease compare",t,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return -1;else if(r===a)continue;else return u(r,a)}while(++t)}compareBuild(e){e instanceof c||(e=new c(e,this.options));let t=0;do{let r=this.build[t],a=e.build[t];if(i("prerelease compare",t,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return -1;else if(r===a)continue;else return u(r,a)}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{let e=+!!Number(r);if(!t&&!1===r)throw Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let i=this.prerelease.length;for(;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);if(-1===i){if(t===this.prerelease.join(".")&&!1===r)throw Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let i=[t,e];!1===r&&(i=[t]),0===u(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}t.exports=c},235759,(e,t,r)=>{let i=e.r(620326);t.exports=(e,t,r=!1)=>{if(e instanceof i)return e;try{return new i(e,t)}catch(e){if(!r)return null;throw e}}},600032,(e,t,r)=>{let i=e.r(235759);t.exports=(e,t)=>{let r=i(e,t);return r?r.version:null}},76730,(e,t,r)=>{let i=e.r(235759);t.exports=(e,t)=>{let r=i(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},196161,(e,t,r)=>{let i=e.r(620326);t.exports=(e,t,r,a,n)=>{"string"==typeof r&&(n=a,a=r,r=void 0);try{return new i(e instanceof i?e.version:e,r).inc(t,a,n).version}catch(e){return null}}},716022,(e,t,r)=>{let i=e.r(235759);t.exports=(e,t)=>{let r=i(e,null,!0),a=i(t,null,!0),n=r.compare(a);if(0===n)return null;let o=n>0,s=o?r:a,l=o?a:r,u=!!s.prerelease.length;if(l.prerelease.length&&!u)return l.patch||l.minor?s.patch?"patch":s.minor?"minor":"major":"major";let c=u?"pre":"";return r.major!==a.major?c+"major":r.minor!==a.minor?c+"minor":r.patch!==a.patch?c+"patch":"prerelease"}},808645,(e,t,r)=>{let i=e.r(620326);t.exports=(e,t)=>new i(e,t).major},462196,(e,t,r)=>{let i=e.r(620326);t.exports=(e,t)=>new i(e,t).minor},52686,(e,t,r)=>{let i=e.r(620326);t.exports=(e,t)=>new i(e,t).patch},613523,(e,t,r)=>{let i=e.r(235759);t.exports=(e,t)=>{let r=i(e,t);return r&&r.prerelease.length?r.prerelease:null}},604668,(e,t,r)=>{let i=e.r(620326);t.exports=(e,t,r)=>new i(e,r).compare(new i(t,r))},760808,(e,t,r)=>{let i=e.r(604668);t.exports=(e,t,r)=>i(t,e,r)},298480,(e,t,r)=>{let i=e.r(604668);t.exports=(e,t)=>i(e,t,!0)},579552,(e,t,r)=>{let i=e.r(620326);t.exports=(e,t,r)=>{let a=new i(e,r),n=new i(t,r);return a.compare(n)||a.compareBuild(n)}},418817,(e,t,r)=>{let i=e.r(579552);t.exports=(e,t)=>e.sort((e,r)=>i(e,r,t))},443007,(e,t,r)=>{let i=e.r(579552);t.exports=(e,t)=>e.sort((e,r)=>i(r,e,t))},656381,(e,t,r)=>{let i=e.r(604668);t.exports=(e,t,r)=>i(e,t,r)>0},499583,(e,t,r)=>{let i=e.r(604668);t.exports=(e,t,r)=>0>i(e,t,r)},66010,(e,t,r)=>{let i=e.r(604668);t.exports=(e,t,r)=>0===i(e,t,r)},9282,(e,t,r)=>{let i=e.r(604668);t.exports=(e,t,r)=>0!==i(e,t,r)},287709,(e,t,r)=>{let i=e.r(604668);t.exports=(e,t,r)=>i(e,t,r)>=0},148467,(e,t,r)=>{let i=e.r(604668);t.exports=(e,t,r)=>0>=i(e,t,r)},436269,(e,t,r)=>{let i=e.r(66010),a=e.r(9282),n=e.r(656381),o=e.r(287709),s=e.r(499583),l=e.r(148467);t.exports=(e,t,r,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return i(e,r,u);case"!=":return a(e,r,u);case">":return n(e,r,u);case">=":return o(e,r,u);case"<":return s(e,r,u);case"<=":return l(e,r,u);default:throw TypeError(`Invalid operator: ${t}`)}}},964166,(e,t,r)=>{let i=e.r(620326),a=e.r(235759),{safeRe:n,t:o}=e.r(70547);t.exports=(e,t)=>{if(e instanceof i)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let t;for(;(t=n[o.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&t.index+t[0].length===r.index+r[0].length||(r=t),n[o.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;n[o.COERCERTL].lastIndex=-1}else r=e.match(n[o.COERCE]);return null===r?null:a(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)}},222229,(e,t,r)=>{"use strict";t.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},576845,(e,t,r)=>{"use strict";function i(e){var t=this;if(t instanceof i||(t=new i),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e)});else if(arguments.length>0)for(var r=0,a=arguments.length;r<a;r++)t.push(arguments[r]);return t}function a(e,t,r,i){if(!(this instanceof a))return new a(e,t,r,i);this.list=i,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}t.exports=i,i.Node=a,i.create=i,i.prototype.removeNode=function(e){if(e.list!==this)throw Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},i.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},i.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},i.prototype.push=function(){for(var e,t,r=0,i=arguments.length;r<i;r++){e=this,t=arguments[r],e.tail=new a(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}return this.length},i.prototype.unshift=function(){for(var e,t,r=0,i=arguments.length;r<i;r++){e=this,t=arguments[r],e.head=new a(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}return this.length},i.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},i.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},i.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,i=0;null!==r;i++)e.call(t,r.value,i,this),r=r.next},i.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,i=this.length-1;null!==r;i--)e.call(t,r.value,i,this),r=r.prev},i.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},i.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},i.prototype.map=function(e,t){t=t||this;for(var r=new i,a=this.head;null!==a;)r.push(e.call(t,a.value,this)),a=a.next;return r},i.prototype.mapReverse=function(e,t){t=t||this;for(var r=new i,a=this.tail;null!==a;)r.push(e.call(t,a.value,this)),a=a.prev;return r},i.prototype.reduce=function(e,t){var r,i=this.head;if(arguments.length>1)r=t;else if(this.head)i=this.head.next,r=this.head.value;else throw TypeError("Reduce of empty list with no initial value");for(var a=0;null!==i;a++)r=e(r,i.value,a),i=i.next;return r},i.prototype.reduceReverse=function(e,t){var r,i=this.tail;if(arguments.length>1)r=t;else if(this.tail)i=this.tail.prev,r=this.tail.value;else throw TypeError("Reduce of empty list with no initial value");for(var a=this.length-1;null!==i;a--)r=e(r,i.value,a),i=i.prev;return r},i.prototype.toArray=function(){for(var e=Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},i.prototype.toArrayReverse=function(){for(var e=Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},i.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new i;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var a=0,n=this.head;null!==n&&a<e;a++)n=n.next;for(;null!==n&&a<t;a++,n=n.next)r.push(n.value);return r},i.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new i;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var a=this.length,n=this.tail;null!==n&&a>t;a--)n=n.prev;for(;null!==n&&a>e;a--,n=n.prev)r.push(n.value);return r},i.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var i=0,n=this.head;null!==n&&i<e;i++)n=n.next;for(var o=[],i=0;n&&i<t;i++)o.push(n.value),n=this.removeNode(n);null===n&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var i=0;i<r.length;i++)n=function(e,t,r){var i=t===e.head?new a(r,null,t,e):new a(r,t,t.next,e);return null===i.next&&(e.tail=i),null===i.prev&&(e.head=i),e.length++,i}(this,n,r[i]);return o},i.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var i=r.prev;r.prev=r.next,r.next=i}return this.head=t,this.tail=e,this};try{e.r(222229)(i)}catch(e){}},782718,(e,t,r)=>{"use strict";let i=e.r(576845),a=Symbol("max"),n=Symbol("length"),o=Symbol("lengthCalculator"),s=Symbol("allowStale"),l=Symbol("maxAge"),u=Symbol("dispose"),c=Symbol("noDisposeOnSet"),d=Symbol("lruList"),p=Symbol("cache"),f=Symbol("updateAgeOnGet"),h=()=>1,m=(e,t,r)=>{let i=e[p].get(t);if(i){let t=i.value;if(g(e,t)){if(y(e,i),!e[s])return}else r&&(e[f]&&(i.value.now=Date.now()),e[d].unshiftNode(i));return t.value}},g=(e,t)=>{if(!t||!t.maxAge&&!e[l])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[l]&&r>e[l]},v=e=>{if(e[n]>e[a])for(let t=e[d].tail;e[n]>e[a]&&null!==t;){let r=t.prev;y(e,t),t=r}},y=(e,t)=>{if(t){let r=t.value;e[u]&&e[u](r.key,r.value),e[n]-=r.length,e[p].delete(r.key),e[d].removeNode(t)}};class b{constructor(e,t,r,i,a){this.key=e,this.value=t,this.length=r,this.now=i,this.maxAge=a||0}}let x=(e,t,r,i)=>{let a=r.value;g(e,a)&&(y(e,r),e[s]||(a=void 0)),a&&t.call(i,a.value,a.key,e)};t.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw TypeError("max must be a non-negative number");this[a]=e.max||1/0;const t=e.length||h;if(this[o]="function"!=typeof t?h:t,this[s]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw TypeError("maxAge must be a number");this[l]=e.maxAge||0,this[u]=e.dispose,this[c]=e.noDisposeOnSet||!1,this[f]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw TypeError("max must be a non-negative number");this[a]=e||1/0,v(this)}get max(){return this[a]}set allowStale(e){this[s]=!!e}get allowStale(){return this[s]}set maxAge(e){if("number"!=typeof e)throw TypeError("maxAge must be a non-negative number");this[l]=e,v(this)}get maxAge(){return this[l]}set lengthCalculator(e){"function"!=typeof e&&(e=h),e!==this[o]&&(this[o]=e,this[n]=0,this[d].forEach(e=>{e.length=this[o](e.value,e.key),this[n]+=e.length})),v(this)}get lengthCalculator(){return this[o]}get length(){return this[n]}get itemCount(){return this[d].length}rforEach(e,t){t=t||this;for(let r=this[d].tail;null!==r;){let i=r.prev;x(this,e,r,t),r=i}}forEach(e,t){t=t||this;for(let r=this[d].head;null!==r;){let i=r.next;x(this,e,r,t),r=i}}keys(){return this[d].toArray().map(e=>e.key)}values(){return this[d].toArray().map(e=>e.value)}reset(){this[u]&&this[d]&&this[d].length&&this[d].forEach(e=>this[u](e.key,e.value)),this[p]=new Map,this[d]=new i,this[n]=0}dump(){return this[d].map(e=>!g(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[d]}set(e,t,r){if((r=r||this[l])&&"number"!=typeof r)throw TypeError("maxAge must be a number");let i=r?Date.now():0,s=this[o](t,e);if(this[p].has(e)){if(s>this[a])return y(this,this[p].get(e)),!1;let o=this[p].get(e).value;return this[u]&&!this[c]&&this[u](e,o.value),o.now=i,o.maxAge=r,o.value=t,this[n]+=s-o.length,o.length=s,this.get(e),v(this),!0}let f=new b(e,t,s,i,r);return f.length>this[a]?(this[u]&&this[u](e,t),!1):(this[n]+=f.length,this[d].unshift(f),this[p].set(e,this[d].head),v(this),!0)}has(e){return!!this[p].has(e)&&!g(this,this[p].get(e).value)}get(e){return m(this,e,!0)}peek(e){return m(this,e,!1)}pop(){let e=this[d].tail;return e?(y(this,e),e.value):null}del(e){y(this,this[p].get(e))}load(e){this.reset();let t=Date.now();for(let r=e.length-1;r>=0;r--){let i=e[r],a=i.e||0;if(0===a)this.set(i.k,i.v);else{let e=a-t;e>0&&this.set(i.k,i.v,e)}}}prune(){this[p].forEach((e,t)=>m(this,t,!1))}}},193006,(e,t,r)=>{class i{constructor(e,t){if(t=n(t),e instanceof i)if(!!t.loose===e.loose&&!!t.includePrerelease===e.includePrerelease)return e;else return new i(e.raw,t);if(e instanceof o)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(e=>this.parseRange(e)).filter(e=>e.length),!this.set.length)throw TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter(e=>!g(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1){for(const e of this.set)if(1===e.length&&v(e[0])){this.set=[e];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let t=((this.options.includePrerelease&&h)|(this.options.loose&&m))+":"+e,r=a.get(t);if(r)return r;let i=this.options.loose,n=i?u[c.HYPHENRANGELOOSE]:u[c.HYPHENRANGE];s("hyphen replace",e=e.replace(n,I(this.options.includePrerelease))),s("comparator trim",e=e.replace(u[c.COMPARATORTRIM],d)),s("tilde trim",e=e.replace(u[c.TILDETRIM],p)),s("caret trim",e=e.replace(u[c.CARETTRIM],f));let l=e.split(" ").map(e=>b(e,this.options)).join(" ").split(/\s+/).map(e=>P(e,this.options));i&&(l=l.filter(e=>(s("loose invalid filter",e,this.options),!!e.match(u[c.COMPARATORLOOSE])))),s("range list",l);let v=new Map;for(let e of l.map(e=>new o(e,this.options))){if(g(e))return[e];v.set(e.value,e)}v.size>1&&v.has("")&&v.delete("");let y=[...v.values()];return a.set(t,y),y}intersects(e,t){if(!(e instanceof i))throw TypeError("a Range is required");return this.set.some(r=>y(r,t)&&e.set.some(e=>y(e,t)&&r.every(r=>e.every(e=>r.intersects(e,t)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new l(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(A(this.set[t],e,this.options))return!0;return!1}}t.exports=i;let a=new(e.r(782718))({max:1e3}),n=e.r(782789),o=e.r(321984),s=e.r(591130),l=e.r(620326),{safeRe:u,t:c,comparatorTrimReplace:d,tildeTrimReplace:p,caretTrimReplace:f}=e.r(70547),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:m}=e.r(138703),g=e=>"<0.0.0-0"===e.value,v=e=>""===e.value,y=(e,t)=>{let r=!0,i=e.slice(),a=i.pop();for(;r&&i.length;)r=i.every(e=>a.intersects(e,t)),a=i.pop();return r},b=(e,t)=>(s("comp",e,t),s("caret",e=k(e,t)),s("tildes",e=w(e,t)),s("xrange",e=E(e,t)),s("stars",e=T(e,t)),e),x=e=>!e||"x"===e.toLowerCase()||"*"===e,w=(e,t)=>e.trim().split(/\s+/).map(e=>S(e,t)).join(" "),S=(e,t)=>{let r=t.loose?u[c.TILDELOOSE]:u[c.TILDE];return e.replace(r,(t,r,i,a,n)=>{let o;return s("tilde",e,t,r,i,a,n),x(r)?o="":x(i)?o=`>=${r}.0.0 <${+r+1}.0.0-0`:x(a)?o=`>=${r}.${i}.0 <${r}.${+i+1}.0-0`:n?(s("replaceTilde pr",n),o=`>=${r}.${i}.${a}-${n} <${r}.${+i+1}.0-0`):o=`>=${r}.${i}.${a} <${r}.${+i+1}.0-0`,s("tilde return",o),o})},k=(e,t)=>e.trim().split(/\s+/).map(e=>C(e,t)).join(" "),C=(e,t)=>{s("caret",e,t);let r=t.loose?u[c.CARETLOOSE]:u[c.CARET],i=t.includePrerelease?"-0":"";return e.replace(r,(t,r,a,n,o)=>{let l;return s("caret",e,t,r,a,n,o),x(r)?l="":x(a)?l=`>=${r}.0.0${i} <${+r+1}.0.0-0`:x(n)?l="0"===r?`>=${r}.${a}.0${i} <${r}.${+a+1}.0-0`:`>=${r}.${a}.0${i} <${+r+1}.0.0-0`:o?(s("replaceCaret pr",o),l="0"===r?"0"===a?`>=${r}.${a}.${n}-${o} <${r}.${a}.${+n+1}-0`:`>=${r}.${a}.${n}-${o} <${r}.${+a+1}.0-0`:`>=${r}.${a}.${n}-${o} <${+r+1}.0.0-0`):(s("no pr"),l="0"===r?"0"===a?`>=${r}.${a}.${n}${i} <${r}.${a}.${+n+1}-0`:`>=${r}.${a}.${n}${i} <${r}.${+a+1}.0-0`:`>=${r}.${a}.${n} <${+r+1}.0.0-0`),s("caret return",l),l})},E=(e,t)=>(s("replaceXRanges",e,t),e.split(/\s+/).map(e=>_(e,t)).join(" ")),_=(e,t)=>{e=e.trim();let r=t.loose?u[c.XRANGELOOSE]:u[c.XRANGE];return e.replace(r,(r,i,a,n,o,l)=>{s("xRange",e,r,i,a,n,o,l);let u=x(a),c=u||x(n),d=c||x(o);return"="===i&&d&&(i=""),l=t.includePrerelease?"-0":"",u?r=">"===i||"<"===i?"<0.0.0-0":"*":i&&d?(c&&(n=0),o=0,">"===i?(i=">=",c?(a=+a+1,n=0):n=+n+1,o=0):"<="===i&&(i="<",c?a=+a+1:n=+n+1),"<"===i&&(l="-0"),r=`${i+a}.${n}.${o}${l}`):c?r=`>=${a}.0.0${l} <${+a+1}.0.0-0`:d&&(r=`>=${a}.${n}.0${l} <${a}.${+n+1}.0-0`),s("xRange return",r),r})},T=(e,t)=>(s("replaceStars",e,t),e.trim().replace(u[c.STAR],"")),P=(e,t)=>(s("replaceGTE0",e,t),e.trim().replace(u[t.includePrerelease?c.GTE0PRE:c.GTE0],"")),I=e=>(t,r,i,a,n,o,s,l,u,c,d,p,f)=>(r=x(i)?"":x(a)?`>=${i}.0.0${e?"-0":""}`:x(n)?`>=${i}.${a}.0${e?"-0":""}`:o?`>=${r}`:`>=${r}${e?"-0":""}`,l=x(u)?"":x(c)?`<${+u+1}.0.0-0`:x(d)?`<${u}.${+c+1}.0-0`:p?`<=${u}.${c}.${d}-${p}`:e?`<${u}.${c}.${+d+1}-0`:`<=${l}`,`${r} ${l}`.trim()),A=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(s(e[r].semver),e[r].semver!==o.ANY&&e[r].semver.prerelease.length>0){let i=e[r].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}},321984,(e,t,r)=>{let i=Symbol("SemVer ANY");class a{static get ANY(){return i}constructor(e,t){if(t=n(t),e instanceof a)if(!!t.loose===e.loose)return e;else e=e.value;u("comparator",e=e.trim().split(/\s+/).join(" "),t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===i?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){let t=this.options.loose?o[s.COMPARATORLOOSE]:o[s.COMPARATOR],r=e.match(t);if(!r)throw TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new c(r[2],this.options.loose):this.semver=i}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===i||e===i)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof a))throw TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):!((t=n(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">"))}}t.exports=a;let n=e.r(782789),{safeRe:o,t:s}=e.r(70547),l=e.r(436269),u=e.r(591130),c=e.r(620326),d=e.r(193006)},870482,(e,t,r)=>{let i=e.r(193006);t.exports=(e,t,r)=>{try{t=new i(t,r)}catch(e){return!1}return t.test(e)}},187095,(e,t,r)=>{let i=e.r(193006);t.exports=(e,t)=>new i(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "))},492685,(e,t,r)=>{let i=e.r(620326),a=e.r(193006);t.exports=(e,t,r)=>{let n=null,o=null,s=null;try{s=new a(t,r)}catch(e){return null}return e.forEach(e=>{s.test(e)&&(!n||-1===o.compare(e))&&(o=new i(n=e,r))}),n}},492500,(e,t,r)=>{let i=e.r(620326),a=e.r(193006);t.exports=(e,t,r)=>{let n=null,o=null,s=null;try{s=new a(t,r)}catch(e){return null}return e.forEach(e=>{s.test(e)&&(!n||1===o.compare(e))&&(o=new i(n=e,r))}),n}},356388,(e,t,r)=>{let i=e.r(620326),a=e.r(193006),n=e.r(656381);t.exports=(e,t)=>{e=new a(e,t);let r=new i("0.0.0");if(e.test(r)||(r=new i("0.0.0-0"),e.test(r)))return r;r=null;for(let t=0;t<e.set.length;++t){let a=e.set[t],o=null;a.forEach(e=>{let t=new i(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!o||n(t,o))&&(o=t);break;case"<":case"<=":break;default:throw Error(`Unexpected operation: ${e.operator}`)}}),o&&(!r||n(r,o))&&(r=o)}return r&&e.test(r)?r:null}},404934,(e,t,r)=>{let i=e.r(193006);t.exports=(e,t)=>{try{return new i(e,t).range||"*"}catch(e){return null}}},866294,(e,t,r)=>{let i=e.r(620326),a=e.r(321984),{ANY:n}=a,o=e.r(193006),s=e.r(870482),l=e.r(656381),u=e.r(499583),c=e.r(148467),d=e.r(287709);t.exports=(e,t,r,p)=>{let f,h,m,g,v;switch(e=new i(e,p),t=new o(t,p),r){case">":f=l,h=c,m=u,g=">",v=">=";break;case"<":f=u,h=d,m=l,g="<",v="<=";break;default:throw TypeError('Must provide a hilo val of "<" or ">"')}if(s(e,t,p))return!1;for(let r=0;r<t.set.length;++r){let i=t.set[r],o=null,s=null;if(i.forEach(e=>{e.semver===n&&(e=new a(">=0.0.0")),o=o||e,s=s||e,f(e.semver,o.semver,p)?o=e:m(e.semver,s.semver,p)&&(s=e)}),o.operator===g||o.operator===v||(!s.operator||s.operator===g)&&h(e,s.semver)||s.operator===v&&m(e,s.semver))return!1}return!0}},778757,(e,t,r)=>{let i=e.r(866294);t.exports=(e,t,r)=>i(e,t,">",r)},56605,(e,t,r)=>{let i=e.r(866294);t.exports=(e,t,r)=>i(e,t,"<",r)},615029,(e,t,r)=>{let i=e.r(193006);t.exports=(e,t,r)=>(e=new i(e,r),t=new i(t,r),e.intersects(t,r))},487138,(e,t,r)=>{let i=e.r(870482),a=e.r(604668);t.exports=(e,t,r)=>{let n=[],o=null,s=null,l=e.sort((e,t)=>a(e,t,r));for(let e of l)i(e,t,r)?(s=e,o||(o=e)):(s&&n.push([o,s]),s=null,o=null);o&&n.push([o,null]);let u=[];for(let[e,t]of n)e===t?u.push(e):t||e!==l[0]?t?e===l[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");let c=u.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return c.length<d.length?c:t}},170414,(e,t,r)=>{let i=e.r(193006),a=e.r(321984),{ANY:n}=a,o=e.r(870482),s=e.r(604668),l=[new a(">=0.0.0-0")],u=[new a(">=0.0.0")],c=(e,t,r)=>{let i,a,c,f,h,m,g;if(e===t)return!0;if(1===e.length&&e[0].semver===n)if(1===t.length&&t[0].semver===n)return!0;else e=r.includePrerelease?l:u;if(1===t.length&&t[0].semver===n)if(r.includePrerelease)return!0;else t=u;let v=new Set;for(let t of e)">"===t.operator||">="===t.operator?i=d(i,t,r):"<"===t.operator||"<="===t.operator?a=p(a,t,r):v.add(t.semver);if(v.size>1)return null;if(i&&a&&((c=s(i.semver,a.semver,r))>0||0===c&&(">="!==i.operator||"<="!==a.operator)))return null;for(let e of v){if(i&&!o(e,String(i),r)||a&&!o(e,String(a),r))return null;for(let i of t)if(!o(e,String(i),r))return!1;return!0}let y=!!a&&!r.includePrerelease&&!!a.semver.prerelease.length&&a.semver,b=!!i&&!r.includePrerelease&&!!i.semver.prerelease.length&&i.semver;for(let e of(y&&1===y.prerelease.length&&"<"===a.operator&&0===y.prerelease[0]&&(y=!1),t)){if(g=g||">"===e.operator||">="===e.operator,m=m||"<"===e.operator||"<="===e.operator,i){if(b&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===b.major&&e.semver.minor===b.minor&&e.semver.patch===b.patch&&(b=!1),">"===e.operator||">="===e.operator){if((f=d(i,e,r))===e&&f!==i)return!1}else if(">="===i.operator&&!o(i.semver,String(e),r))return!1}if(a){if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),"<"===e.operator||"<="===e.operator){if((h=p(a,e,r))===e&&h!==a)return!1}else if("<="===a.operator&&!o(a.semver,String(e),r))return!1}if(!e.operator&&(a||i)&&0!==c)return!1}return(!i||!m||!!a||0===c)&&(!a||!g||!!i||0===c)&&!b&&!y&&!0},d=(e,t,r)=>{if(!e)return t;let i=s(e.semver,t.semver,r);return i>0?e:i<0||">"===t.operator&&">="===e.operator?t:e},p=(e,t,r)=>{if(!e)return t;let i=s(e.semver,t.semver,r);return i<0?e:i>0||"<"===t.operator&&"<="===e.operator?t:e};t.exports=(e,t,r={})=>{if(e===t)return!0;e=new i(e,r),t=new i(t,r);let a=!1;r:for(let i of e.set){for(let e of t.set){let t=c(i,e,r);if(a=a||null!==t,t)continue r}if(a)return!1}return!0}},348680,(e,t,r)=>{let i=e.r(70547),a=e.r(138703),n=e.r(620326),o=e.r(318429),s=e.r(235759),l=e.r(600032),u=e.r(76730),c=e.r(196161),d=e.r(716022),p=e.r(808645),f=e.r(462196),h=e.r(52686),m=e.r(613523),g=e.r(604668),v=e.r(760808),y=e.r(298480),b=e.r(579552),x=e.r(418817),w=e.r(443007),S=e.r(656381),k=e.r(499583),C=e.r(66010),E=e.r(9282),_=e.r(287709),T=e.r(148467),P=e.r(436269),I=e.r(964166),A=e.r(321984),O=e.r(193006),M=e.r(870482),F=e.r(187095),R=e.r(492685),D=e.r(492500),j=e.r(356388),L=e.r(404934),B=e.r(866294),N=e.r(778757),$=e.r(56605),z=e.r(615029);t.exports={parse:s,valid:l,clean:u,inc:c,diff:d,major:p,minor:f,patch:h,prerelease:m,compare:g,rcompare:v,compareLoose:y,compareBuild:b,sort:x,rsort:w,gt:S,lt:k,eq:C,neq:E,gte:_,lte:T,cmp:P,coerce:I,Comparator:A,Range:O,satisfies:M,toComparators:F,maxSatisfying:R,minSatisfying:D,minVersion:j,validRange:L,outside:B,gtr:N,ltr:$,intersects:z,simplifyRange:e.r(487138),subset:e.r(170414),SemVer:n,re:i.re,src:i.src,tokens:i.t,SEMVER_SPEC_VERSION:a.SEMVER_SPEC_VERSION,RELEASE_TYPES:a.RELEASE_TYPES,compareIdentifiers:o.compareIdentifiers,rcompareIdentifiers:o.rcompareIdentifiers}},135416,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.default=class extends Error{constructor(e){super(e);const{reason:t,line:r,column:i,file:a}=e;this.name="CssSyntaxError",this.message=`${this.name}

`,void 0!==r&&(this.message+=`(${r}:${i}) `),this.message+=a?`${a} `:"<css input> ",this.message+=`${t}`;const n=e.showSourceCode();n&&(this.message+=`

${n}
`),this.stack=!1}}},878064,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.default=class extends Error{constructor(e){super(e);const{text:t,line:r,column:i}=e;this.name="Warning",this.message=`${this.name}

`,void 0!==r&&(this.message+=`(${r}:${i}) `),this.message+=`${t}`,this.stack=!1}}},600845,e=>{e.v({additionalProperties:!1,properties:{url:{description:"Enables/Disables 'url'/'image-set' functions handling (https://github.com/webpack-contrib/css-loader#url).",anyOf:[{type:"boolean"},{instanceof:"Function"}]},import:{description:"Enables/Disables '@import' at-rules handling (https://github.com/webpack-contrib/css-loader#import).",anyOf:[{type:"boolean"},{instanceof:"Function"}]},modules:{description:"Enables/Disables CSS Modules and their configuration (https://github.com/webpack-contrib/css-loader#modules).",anyOf:[{type:"boolean"},{enum:["local","global","pure"]},{type:"object",additionalProperties:!1,properties:{compileType:{description:"Controls the extent to which css-loader will process module code (https://github.com/webpack-contrib/css-loader#type)",enum:["module","icss"]},auto:{description:"Allows auto enable CSS modules based on filename (https://github.com/webpack-contrib/css-loader#auto).",anyOf:[{instanceof:"RegExp"},{instanceof:"Function"},{type:"boolean"}]},mode:{description:"Setup `mode` option (https://github.com/webpack-contrib/css-loader#mode).",anyOf:[{enum:["local","global","pure"]},{instanceof:"Function"}]},localIdentName:{description:"Allows to configure the generated local ident name (https://github.com/webpack-contrib/css-loader#localidentname).",type:"string",minLength:1},localIdentContext:{description:"Allows to redefine basic loader context for local ident name (https://github.com/webpack-contrib/css-loader#localidentcontext).",type:"string",minLength:1},localIdentHashPrefix:{description:"Allows to add custom hash to generate more unique classes (https://github.com/webpack-contrib/css-loader#localidenthashprefix).",type:"string",minLength:1},localIdentRegExp:{description:"Allows to specify custom RegExp for local ident name (https://github.com/webpack-contrib/css-loader#localidentregexp).",anyOf:[{type:"string",minLength:1},{instanceof:"RegExp"}]},getLocalIdent:{description:"Allows to specify a function to generate the classname (https://github.com/webpack-contrib/css-loader#getlocalident).",instanceof:"Function"},namedExport:{description:"Enables/disables ES modules named export for locals (https://github.com/webpack-contrib/css-loader#namedexport).",type:"boolean"},exportGlobals:{description:"Allows to export names from global class or id, so you can use that as local name (https://github.com/webpack-contrib/css-loader#exportglobals).",type:"boolean"},exportLocalsConvention:{description:"Style of exported classnames (https://github.com/webpack-contrib/css-loader#localsconvention).",enum:["asIs","camelCase","camelCaseOnly","dashes","dashesOnly"]},exportOnlyLocals:{description:"Export only locals (https://github.com/webpack-contrib/css-loader#exportonlylocals).",type:"boolean"}}}]},sourceMap:{description:"Enables/Disables generation of source maps (https://github.com/webpack-contrib/css-loader#sourcemap).",type:"boolean"},importLoaders:{description:"Enables/Disables or setups number of loaders applied before CSS loader (https://github.com/webpack-contrib/css-loader#importloaders).",anyOf:[{type:"boolean"},{type:"string"},{type:"integer"}]},esModule:{description:"Use the ES modules syntax (https://github.com/webpack-contrib/css-loader#esmodule).",type:"boolean"}},type:"object"})},190376,(e,t,r)=>{t.exports=function(e){var t,r,i,a=0,n=e.length;if(0===n||!function(e){var t,r=e.charCodeAt(0);if(43===r||45===r){if((t=e.charCodeAt(1))>=48&&t<=57)return!0;var i=e.charCodeAt(2);return 46===t&&!!(i>=48)&&!!(i<=57)}return 46===r?!!((t=e.charCodeAt(1))>=48)&&!!(t<=57):!!(r>=48)&&!!(r<=57)}(e))return!1;for((43===(t=e.charCodeAt(a))||45===t)&&a++;a<n&&!((t=e.charCodeAt(a))<48)&&!(t>57);)a+=1;if(t=e.charCodeAt(a),r=e.charCodeAt(a+1),46===t&&r>=48&&r<=57)for(a+=2;a<n&&!((t=e.charCodeAt(a))<48)&&!(t>57);)a+=1;if(t=e.charCodeAt(a),r=e.charCodeAt(a+1),i=e.charCodeAt(a+2),(101===t||69===t)&&(r>=48&&r<=57||(43===r||45===r)&&i>=48&&i<=57))for(a+=43===r||45===r?3:2;a<n&&!((t=e.charCodeAt(a))<48)&&!(t>57);)a+=1;return{number:e.slice(0,a),unit:e.slice(a)}}},374006,(e,t,r)=>{var i=/^[a-f0-9?-]+$/i;t.exports=function(e){for(var t,r,a,n,o,s,l,u,c,d=[],p=e,f=0,h=p.charCodeAt(f),m=p.length,g=[{nodes:d}],v=0,y="",b="",x="";f<m;)if(h<=32){t=f;do t+=1,h=p.charCodeAt(t);while(h<=32)n=p.slice(f,t),a=d[d.length-1],41===h&&v?x=n:a&&"div"===a.type?(a.after=n,a.sourceEndIndex+=n.length):44===h||58===h||47===h&&42!==p.charCodeAt(t+1)&&(!c||c&&"function"===c.type&&"calc"!==c.value)?b=n:d.push({type:"space",sourceIndex:f,sourceEndIndex:t,value:n}),f=t}else if(39===h||34===h){t=f,n={type:"string",sourceIndex:f,quote:r=39===h?"'":'"'};do if(o=!1,~(t=p.indexOf(r,t+1)))for(s=t;92===p.charCodeAt(s-1);)s-=1,o=!o;else p+=r,t=p.length-1,n.unclosed=!0;while(o)n.value=p.slice(f+1,t),n.sourceEndIndex=n.unclosed?t:t+1,d.push(n),f=t+1,h=p.charCodeAt(f)}else if(47===h&&42===p.charCodeAt(f+1))t=p.indexOf("*/",f),n={type:"comment",sourceIndex:f,sourceEndIndex:t+2},-1===t&&(n.unclosed=!0,t=p.length,n.sourceEndIndex=t),n.value=p.slice(f+2,t),d.push(n),f=t+2,h=p.charCodeAt(f);else if((47===h||42===h)&&c&&"function"===c.type&&"calc"===c.value)n=p[f],d.push({type:"word",sourceIndex:f-b.length,sourceEndIndex:f+n.length,value:n}),f+=1,h=p.charCodeAt(f);else if(47===h||44===h||58===h)n=p[f],d.push({type:"div",sourceIndex:f-b.length,sourceEndIndex:f+n.length,value:n,before:b,after:""}),b="",f+=1,h=p.charCodeAt(f);else if(40===h){t=f;do t+=1,h=p.charCodeAt(t);while(h<=32)if(u=f,n={type:"function",sourceIndex:f-y.length,value:y,before:p.slice(u+1,t)},f=t,"url"===y&&39!==h&&34!==h){t-=1;do if(o=!1,~(t=p.indexOf(")",t+1)))for(s=t;92===p.charCodeAt(s-1);)s-=1,o=!o;else p+=")",t=p.length-1,n.unclosed=!0;while(o)l=t;do l-=1,h=p.charCodeAt(l);while(h<=32)u<l?(f!==l+1?n.nodes=[{type:"word",sourceIndex:f,sourceEndIndex:l+1,value:p.slice(f,l+1)}]:n.nodes=[],n.unclosed&&l+1!==t?(n.after="",n.nodes.push({type:"space",sourceIndex:l+1,sourceEndIndex:t,value:p.slice(l+1,t)})):(n.after=p.slice(l+1,t),n.sourceEndIndex=t)):(n.after="",n.nodes=[]),f=t+1,n.sourceEndIndex=n.unclosed?t:f,h=p.charCodeAt(f),d.push(n)}else v+=1,n.after="",n.sourceEndIndex=f+1,d.push(n),g.push(n),d=n.nodes=[],c=n;y=""}else if(41===h&&v)f+=1,h=p.charCodeAt(f),c.after=x,c.sourceEndIndex+=x.length,x="",v-=1,g[g.length-1].sourceEndIndex=f,g.pop(),d=(c=g[v]).nodes;else{t=f;do 92===h&&(t+=1),t+=1,h=p.charCodeAt(t);while(t<m&&!(h<=32||39===h||34===h||44===h||58===h||47===h||40===h||42===h&&c&&"function"===c.type&&"calc"===c.value||47===h&&"function"===c.type&&"calc"===c.value||41===h&&v))n=p.slice(f,t),40===h?y=n:(117===n.charCodeAt(0)||85===n.charCodeAt(0))&&43===n.charCodeAt(1)&&i.test(n.slice(2))?d.push({type:"unicode-range",sourceIndex:f,sourceEndIndex:t,value:n}):d.push({type:"word",sourceIndex:f,sourceEndIndex:t,value:n}),f=t}for(f=g.length-1;f;f-=1)g[f].unclosed=!0,g[f].sourceEndIndex=p.length;return g[0].nodes}},158853,(e,t,r)=>{t.exports=function e(t,r,i){var a,n,o,s;for(a=0,n=t.length;a<n;a+=1)o=t[a],i||(s=r(o,a,t)),!1!==s&&"function"===o.type&&Array.isArray(o.nodes)&&e(o.nodes,r,i),i&&r(o,a,t)}},453815,(e,t,r)=>{function i(e,t){var r,i,n=e.type,o=e.value;if(t&&void 0!==(i=t(e)))return i;if("word"===n||"space"===n);else if("string"===n)return(r=e.quote||"")+o+(e.unclosed?"":r);else if("comment"===n)return"/*"+o+(e.unclosed?"":"*/");else if("div"===n)return(e.before||"")+o+(e.after||"");else if(Array.isArray(e.nodes))return(r=a(e.nodes,t),"function"!==n)?r:o+"("+(e.before||"")+r+(e.after||"")+(e.unclosed?"":")");return o}function a(e,t){var r,a;if(Array.isArray(e)){for(r="",a=e.length-1;~a;a-=1)r=i(e[a],t)+r;return r}return i(e,t)}t.exports=a},412925,(e,t,r)=>{var i=e.r(374006),a=e.r(158853),n=e.r(453815);function o(e){return this instanceof o?(this.nodes=i(e),this):new o(e)}o.prototype.toString=function(){return Array.isArray(this.nodes)?n(this.nodes):""},o.prototype.walk=function(e,t){return a(this.nodes,e,t),this},o.unit=e.r(190376),o.walk=a,o.stringify=n,t.exports=o},284007,(e,t,r)=>{let i=/[$]?[\w-]+/g;t.exports=(e,t)=>{let r;for(;r=i.exec(e);){let a=t[r[0]];a&&(e=e.slice(0,r.index)+a+e.slice(i.lastIndex),i.lastIndex-=r[0].length-a.length)}return e}},523605,(e,t,r)=>{let i=e.r(284007);t.exports=(e,t)=>{e.walk(e=>{"decl"===e.type&&e.value?e.value=i(e.value.toString(),t):"rule"===e.type&&e.selector?e.selector=i(e.selector.toString(),t):"atrule"===e.type&&e.params&&(e.params=i(e.params.toString(),t))})}},375378,(e,t,r)=>{let i=/^:import\(("[^"]*"|'[^']*'|[^"']+)\)$/,a=/^("[^"]*"|'[^']*'|[^"']+)$/,n=e=>{let t={};return e.walkDecls(e=>{t[(e.raws.before?e.raws.before.trim():"")+e.prop]=e.value}),t};t.exports=(e,t=!0,r="auto")=>{let o={},s={};function l(e,r){let i=r.replace(/'|"/g,"");o[i]=Object.assign(o[i]||{},n(e)),t&&e.remove()}function u(e){Object.assign(s,n(e)),t&&e.remove()}return e.each(e=>{if("rule"===e.type&&"at-rule"!==r){if(":import"===e.selector.slice(0,7)){let t=i.exec(e.selector);t&&l(e,t[1])}":export"===e.selector&&u(e)}if("atrule"===e.type&&"rule"!==r){if("icss-import"===e.name){let t=a.exec(e.params);t&&l(e,t[1])}"icss-export"===e.name&&u(e)}}),{icssImports:o,icssExports:s}}},850145,(e,t,r)=>{t.exports=(e,t,r,i)=>[...((e,t,r="rule")=>Object.keys(e).map(i=>{let a=e[i],n=Object.keys(a).map(e=>t.decl({prop:e,value:a[e],raws:{before:"\n  "}})),o=n.length>0,s="rule"===r?t.rule({selector:`:import('${i}')`,raws:{after:o?"\n":""}}):t.atRule({name:"icss-import",params:`'${i}'`,raws:{after:o?"\n":""}});return o&&s.append(n),s}))(e,r,i),...((e,t,r="rule")=>{let i=Object.keys(e).map(r=>t.decl({prop:r,value:e[r],raws:{before:"\n  "}}));if(0===i.length)return[];let a="rule"===r?t.rule({selector:":export",raws:{after:"\n"}}):t.atRule({name:"icss-export",raws:{after:"\n"}});return a.append(i),[a]})(t,r,i)]},95276,(e,t,r)=>{let i=e.r(284007),a=e.r(523605);t.exports={replaceValueSymbols:i,replaceSymbols:a,extractICSS:e.r(375378),createICSSRules:e.r(850145)}},322670,(e,t,r)=>{"use strict";let i=e.r(95276),a=/^(.+?|\([\s\S]+?\))\s+from\s+("[^"]*"|'[^']*'|[\w-]+)$/,n=/(?:\s+|^)([\w-]+):?(.*?)$/,o=/^([\w-]+)(?:\s+as\s+([\w-]+))?/;t.exports=e=>{let t=0,r=e&&e.createImportedName||(e=>`i__const_${e.replace(/\W/g,"_")}_${t++}`);return{postcssPlugin:"postcss-modules-values",prepare(e){let t=[],s={};return{Once(l,u){if(l.walkAtRules(/value/i,l=>{let u=l.params.match(a);if(u){let[,e,i]=u;s[i]&&(i=s[i]);let a=e.replace(/^\(\s*([\s\S]+)\s*\)$/,"$1").split(/\s*,\s*/).map(e=>{let t=o.exec(e);if(t){let[,e,i=e]=t,a=r(i);return s[i]=a,{theirName:e,importedName:a}}throw Error(`@import statement "${e}" is invalid!`)});t.push({path:i,imports:a}),l.remove();return}-1!==l.params.indexOf("@value")&&e.warn("Invalid value definition: "+l.params);let[,c,d]=`${l.params}${l.raws.between}`.match(n),p=d.replace(/\/\*((?!\*\/).*?)\*\//g,"");if(0===p.length){e.warn("Invalid value definition: "+l.params),l.remove();return}/^\s+$/.test(p)||(d=d.trim()),s[c]=i.replaceValueSymbols(d,s),l.remove()}),!Object.keys(s).length)return;i.replaceSymbols(l,s);let c=Object.keys(s).map(e=>u.decl({value:s[e],prop:e,raws:{before:"\n  "}}));if(c.length>0){let e=u.rule({selector:":export",raws:{after:"\n"}});e.append(c),l.prepend(e)}t.reverse().forEach(({path:e,imports:t})=>{let r=u.rule({selector:`:import(${e})`,raws:{after:"\n"}});t.forEach(({theirName:e,importedName:t})=>{r.append({value:e,prop:t,raws:{before:"\n  "}})}),l.prepend(r)})}}}}},t.exports.postcss=!0},995033,(e,t,r)=>{"use strict";r.__esModule=!0,r.default=function(e){if(!i.test(e))return e;for(var t="",r=0;r<e.length;r++){if("\\"===e[r]){var a=function(e){for(var t=e.toLowerCase(),r="",i=!1,a=0;a<6&&void 0!==t[a];a++){var n=t.charCodeAt(a),o=n>=97&&n<=102||n>=48&&n<=57;if(i=32===n,!o)break;r+=t[a]}if(0!==r.length){var s=parseInt(r,16);return s>=55296&&s<=57343||0===s||s>1114111?["",r.length+ +!!i]:[String.fromCodePoint(s),r.length+ +!!i]}}(e.slice(r+1,r+7));if(void 0!==a){t+=a[0],r+=a[1];continue}if("\\"===e[r+1]){t+="\\",r++;continue}e.length===r+1&&(t+=e[r]);continue}t+=e[r]}return t};var i=/\\/;t.exports=r.default},706369,(e,t,r)=>{"use strict";r.__esModule=!0,r.default=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];for(;r.length>0;){var a=r.shift();if(!e[a])return;e=e[a]}return e},t.exports=r.default},190307,(e,t,r)=>{"use strict";r.__esModule=!0,r.default=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];for(;r.length>0;){var a=r.shift();e[a]||(e[a]={}),e=e[a]}},t.exports=r.default},394384,(e,t,r)=>{"use strict";r.__esModule=!0,r.default=function(e){for(var t="",r=e.indexOf("/*"),i=0;r>=0;){t+=e.slice(i,r);var a=e.indexOf("*/",r+2);if(a<0)return t;i=a+2,r=e.indexOf("/*",i)}return t+e.slice(i)},t.exports=r.default},494504,(e,t,r)=>{"use strict";function i(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0,r.unesc=r.stripComments=r.getProp=r.ensureObject=void 0,r.unesc=i(e.r(995033)).default,r.getProp=i(e.r(706369)).default,r.ensureObject=i(e.r(190307)).default,r.stripComments=i(e.r(394384)).default},805920,(e,t,r)=>{"use strict";r.__esModule=!0,r.default=void 0;var i=e.r(494504),a=function e(t,r){if("object"!=typeof t||null===t)return t;var i=new t.constructor;for(var a in t)if(t.hasOwnProperty(a)){var n=t[a],o=typeof n;"parent"===a&&"object"===o?r&&(i[a]=r):n instanceof Array?i[a]=n.map(function(t){return e(t,i)}):i[a]=e(n,i)}return i};r.default=function(){function e(e){void 0===e&&(e={}),Object.assign(this,e),this.spaces=this.spaces||{},this.spaces.before=this.spaces.before||"",this.spaces.after=this.spaces.after||""}var t,r=e.prototype;return r.remove=function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this},r.replaceWith=function(){if(this.parent){for(var e in arguments)this.parent.insertBefore(this,arguments[e]);this.remove()}return this},r.next=function(){return this.parent.at(this.parent.index(this)+1)},r.prev=function(){return this.parent.at(this.parent.index(this)-1)},r.clone=function(e){void 0===e&&(e={});var t=a(this);for(var r in e)t[r]=e[r];return t},r.appendToPropertyAndEscape=function(e,t,r){this.raws||(this.raws={});var i=this[e],a=this.raws[e];this[e]=i+t,a||r!==t?this.raws[e]=(a||i)+r:delete this.raws[e]},r.setPropertyAndEscape=function(e,t,r){this.raws||(this.raws={}),this[e]=t,this.raws[e]=r},r.setPropertyWithoutEscape=function(e,t){this[e]=t,this.raws&&delete this.raws[e]},r.isAtPosition=function(e,t){if(this.source&&this.source.start&&this.source.end)return!(this.source.start.line>e)&&!(this.source.end.line<e)&&(this.source.start.line!==e||!(this.source.start.column>t))&&(this.source.end.line!==e||!(this.source.end.column<t))},r.stringifyProperty=function(e){return this.raws&&this.raws[e]||this[e]},r.valueToString=function(){return String(this.stringifyProperty("value"))},r.toString=function(){return[this.rawSpaceBefore,this.valueToString(),this.rawSpaceAfter].join("")},t=[{key:"rawSpaceBefore",get:function(){var e=this.raws&&this.raws.spaces&&this.raws.spaces.before;return void 0===e&&(e=this.spaces&&this.spaces.before),e||""},set:function(e){(0,i.ensureObject)(this,"raws","spaces"),this.raws.spaces.before=e}},{key:"rawSpaceAfter",get:function(){var e=this.raws&&this.raws.spaces&&this.raws.spaces.after;return void 0===e&&(e=this.spaces.after),e||""},set:function(e){(0,i.ensureObject)(this,"raws","spaces"),this.raws.spaces.after=e}}],function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(),t.exports=r.default},885954,(e,t,r)=>{"use strict";r.__esModule=!0,r.UNIVERSAL=r.TAG=r.STRING=r.SELECTOR=r.ROOT=r.PSEUDO=r.NESTING=r.ID=r.COMMENT=r.COMBINATOR=r.CLASS=r.ATTRIBUTE=void 0,r.TAG="tag",r.STRING="string",r.SELECTOR="selector",r.ROOT="root",r.PSEUDO="pseudo",r.NESTING="nesting",r.ID="id",r.COMMENT="comment",r.COMBINATOR="combinator",r.CLASS="class",r.ATTRIBUTE="attribute",r.UNIVERSAL="universal"},714323,(e,t,r)=>{"use strict";r.__esModule=!0,r.default=void 0;var i,a=(i=e.r(805920))&&i.__esModule?i:{default:i},n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var s=a?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(i,n,s):i[n]=e[n]}return i.default=e,r&&r.set(e,i),i}(e.r(885954));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.default=function(e){function t(t){var r;return(r=e.call(this,t)||this).nodes||(r.nodes=[]),r}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,l(t,e);var r,i=t.prototype;return i.append=function(e){return e.parent=this,this.nodes.push(e),this},i.prepend=function(e){for(var t in e.parent=this,this.nodes.unshift(e),this.indexes)this.indexes[t]++;return this},i.at=function(e){return this.nodes[e]},i.index=function(e){return"number"==typeof e?e:this.nodes.indexOf(e)},i.removeChild=function(e){var t;for(var r in e=this.index(e),this.at(e).parent=void 0,this.nodes.splice(e,1),this.indexes)(t=this.indexes[r])>=e&&(this.indexes[r]=t-1);return this},i.removeAll=function(){for(var e,t=function(e,t){var r="u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,void 0)}}(e))){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.nodes);!(e=t()).done;)e.value.parent=void 0;return this.nodes=[],this},i.empty=function(){return this.removeAll()},i.insertAfter=function(e,t){t.parent=this;for(var r,i,a=this.index(e),n=[],o=2;o<arguments.length;o++)n.push(arguments[o]);for(var s in(r=this.nodes).splice.apply(r,[a+1,0,t].concat(n)),t.parent=this,this.indexes)a<(i=this.indexes[s])&&(this.indexes[s]=i+arguments.length-1);return this},i.insertBefore=function(e,t){t.parent=this;for(var r,i,a=this.index(e),n=[],o=2;o<arguments.length;o++)n.push(arguments[o]);for(var s in(r=this.nodes).splice.apply(r,[a,0,t].concat(n)),t.parent=this,this.indexes)(i=this.indexes[s])>=a&&(this.indexes[s]=i+arguments.length-1);return this},i._findChildAtPosition=function(e,t){var r=void 0;return this.each(function(i){if(i.atPosition){var a=i.atPosition(e,t);if(a)return r=a,!1}else if(i.isAtPosition(e,t))return r=i,!1}),r},i.atPosition=function(e,t){return this.isAtPosition(e,t)?this._findChildAtPosition(e,t)||this:void 0},i._inferEndPosition=function(){this.last&&this.last.source&&this.last.source.end&&(this.source=this.source||{},this.source.end=this.source.end||{},Object.assign(this.source.end,this.last.source.end))},i.each=function(e){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach++;var t,r,i=this.lastEach;if(this.indexes[i]=0,this.length){for(;this.indexes[i]<this.length&&(t=this.indexes[i],!1!==(r=e(this.at(t),t)));)this.indexes[i]+=1;if(delete this.indexes[i],!1===r)return!1}},i.walk=function(e){return this.each(function(t,r){var i=e(t,r);if(!1!==i&&t.length&&(i=t.walk(e)),!1===i)return!1})},i.walkAttributes=function(e){var t=this;return this.walk(function(r){if(r.type===n.ATTRIBUTE)return e.call(t,r)})},i.walkClasses=function(e){var t=this;return this.walk(function(r){if(r.type===n.CLASS)return e.call(t,r)})},i.walkCombinators=function(e){var t=this;return this.walk(function(r){if(r.type===n.COMBINATOR)return e.call(t,r)})},i.walkComments=function(e){var t=this;return this.walk(function(r){if(r.type===n.COMMENT)return e.call(t,r)})},i.walkIds=function(e){var t=this;return this.walk(function(r){if(r.type===n.ID)return e.call(t,r)})},i.walkNesting=function(e){var t=this;return this.walk(function(r){if(r.type===n.NESTING)return e.call(t,r)})},i.walkPseudos=function(e){var t=this;return this.walk(function(r){if(r.type===n.PSEUDO)return e.call(t,r)})},i.walkTags=function(e){var t=this;return this.walk(function(r){if(r.type===n.TAG)return e.call(t,r)})},i.walkUniversals=function(e){var t=this;return this.walk(function(r){if(r.type===n.UNIVERSAL)return e.call(t,r)})},i.split=function(e){var t=this,r=[];return this.reduce(function(i,a,n){var o=e.call(t,a);return r.push(a),o?(i.push(r),r=[]):n===t.length-1&&i.push(r),i},[])},i.map=function(e){return this.nodes.map(e)},i.reduce=function(e,t){return this.nodes.reduce(e,t)},i.every=function(e){return this.nodes.every(e)},i.some=function(e){return this.nodes.some(e)},i.filter=function(e){return this.nodes.filter(e)},i.sort=function(e){return this.nodes.sort(e)},i.toString=function(){return this.map(String).join("")},r=[{key:"first",get:function(){return this.at(0)}},{key:"last",get:function(){return this.at(this.length-1)}},{key:"length",get:function(){return this.nodes.length}}],function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(a.default),t.exports=r.default},59497,(e,t,r)=>{"use strict";r.__esModule=!0,r.default=void 0;var i,a=(i=e.r(714323))&&i.__esModule?i:{default:i},n=e.r(885954);function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.default=function(e){function t(t){var r;return(r=e.call(this,t)||this).type=n.ROOT,r}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e);var r,i=t.prototype;return i.toString=function(){var e=this.reduce(function(e,t){return e.push(String(t)),e},[]).join(",");return this.trailingComma?e+",":e},i.error=function(e,t){return this._error?this._error(e,t):Error(e)},r=[{key:"errorGenerator",set:function(e){this._error=e}}],function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(a.default),t.exports=r.default},236719,(e,t,r)=>{"use strict";r.__esModule=!0,r.default=void 0;var i,a=(i=e.r(714323))&&i.__esModule?i:{default:i},n=e.r(885954);function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.default=function(e){function t(t){var r;return(r=e.call(this,t)||this).type=n.SELECTOR,r}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e),t}(a.default),t.exports=r.default},247016,(e,t,r)=>{"use strict";var i={}.hasOwnProperty,a=function(e,t){if(!e)return t;var r={};for(var a in t)r[a]=i.call(e,a)?e[a]:t[a];return r},n=/[ -,\.\/:-@\[-\^`\{-~]/,o=/[ -,\.\/:-@\[\]\^`\{-~]/,s=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,l=function e(t,r){"single"!=(r=a(r,e.options)).quotes&&"double"!=r.quotes&&(r.quotes="single");for(var i="double"==r.quotes?'"':"'",l=r.isIdentifier,u=t.charAt(0),c="",d=0,p=t.length;d<p;){var f=t.charAt(d++),h=f.charCodeAt(),m=void 0;if(h<32||h>126){if(h>=55296&&h<=56319&&d<p){var g=t.charCodeAt(d++);(64512&g)==56320?h=((1023&h)<<10)+(1023&g)+65536:d--}m="\\"+h.toString(16).toUpperCase()+" "}else m=r.escapeEverything?n.test(f)?"\\"+f:"\\"+h.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(f)?"\\"+h.toString(16).toUpperCase()+" ":"\\"==f||!l&&('"'==f&&i==f||"'"==f&&i==f)||l&&o.test(f)?"\\"+f:f;c+=m}return(l&&(/^-[-\d]/.test(c)?c="\\-"+c.slice(1):/\d/.test(u)&&(c="\\3"+u+" "+c.slice(1))),c=c.replace(s,function(e,t,r){return t&&t.length%2?e:(t||"")+r}),!l&&r.wrap)?i+c+i:c};l.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1},l.version="3.0.0",t.exports=l},332331,(e,t,r)=>{"use strict";r.__esModule=!0,r.default=void 0;var i=s(e.r(247016)),a=e.r(494504),n=s(e.r(805920)),o=e.r(885954);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.default=function(e){var t;function r(t){var r;return(r=e.call(this,t)||this).type=o.CLASS,r._constructed=!0,r}return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,l(r,e),r.prototype.valueToString=function(){return"."+e.prototype.valueToString.call(this)},t=[{key:"value",get:function(){return this._value},set:function(e){if(this._constructed){var t=(0,i.default)(e,{isIdentifier:!0});t!==e?((0,a.ensureObject)(this,"raws"),this.raws.value=t):this.raws&&delete this.raws.value}this._value=e}}],function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}(n.default),t.exports=r.default},149535,(e,t,r)=>{"use strict";r.__esModule=!0,r.default=void 0;var i,a=(i=e.r(805920))&&i.__esModule?i:{default:i},n=e.r(885954);function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.default=function(e){function t(t){var r;return(r=e.call(this,t)||this).type=n.COMMENT,r}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e),t}(a.default),t.exports=r.default},454398,(e,t,r)=>{"use strict";r.__esModule=!0,r.default=void 0;var i,a=(i=e.r(805920))&&i.__esModule?i:{default:i},n=e.r(885954);function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.default=function(e){function t(t){var r;return(r=e.call(this,t)||this).type=n.ID,r}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e),t.prototype.valueToString=function(){return"#"+e.prototype.valueToString.call(this)},t}(a.default),t.exports=r.default},680886,(e,t,r)=>{"use strict";r.__esModule=!0,r.default=void 0;var i=o(e.r(247016)),a=e.r(494504),n=o(e.r(805920));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.default=function(e){function t(){return e.apply(this,arguments)||this}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,s(t,e);var r,n=t.prototype;return n.qualifiedName=function(e){return this.namespace?this.namespaceString+"|"+e:e},n.valueToString=function(){return this.qualifiedName(e.prototype.valueToString.call(this))},r=[{key:"namespace",get:function(){return this._namespace},set:function(e){if(!0===e||"*"===e||"&"===e){this._namespace=e,this.raws&&delete this.raws.namespace;return}var t=(0,i.default)(e,{isIdentifier:!0});this._namespace=e,t!==e?((0,a.ensureObject)(this,"raws"),this.raws.namespace=t):this.raws&&delete this.raws.namespace}},{key:"ns",get:function(){return this._namespace},set:function(e){this.namespace=e}},{key:"namespaceString",get:function(){if(!this.namespace)return"";var e=this.stringifyProperty("namespace");return!0===e?"":e}}],function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(n.default),t.exports=r.default},820703,(e,t,r)=>{"use strict";r.__esModule=!0,r.default=void 0;var i,a=(i=e.r(680886))&&i.__esModule?i:{default:i},n=e.r(885954);function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.default=function(e){function t(t){var r;return(r=e.call(this,t)||this).type=n.TAG,r}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e),t}(a.default),t.exports=r.default},581472,(e,t,r)=>{"use strict";r.__esModule=!0,r.default=void 0;var i,a=(i=e.r(805920))&&i.__esModule?i:{default:i},n=e.r(885954);function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.default=function(e){function t(t){var r;return(r=e.call(this,t)||this).type=n.STRING,r}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e),t}(a.default),t.exports=r.default},257953,(e,t,r)=>{"use strict";r.__esModule=!0,r.default=void 0;var i,a=(i=e.r(714323))&&i.__esModule?i:{default:i},n=e.r(885954);function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.default=function(e){function t(t){var r;return(r=e.call(this,t)||this).type=n.PSEUDO,r}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e),t.prototype.toString=function(){var e=this.length?"("+this.map(String).join(",")+")":"";return[this.rawSpaceBefore,this.stringifyProperty("value"),e,this.rawSpaceAfter].join("")},t}(a.default),t.exports=r.default},620141,(e,t,r)=>{t.exports=e.r(224361).deprecate},936011,(e,t,r)=>{"use strict";r.__esModule=!0,r.default=void 0,r.unescapeValue=m;var i,a=l(e.r(247016)),n=l(e.r(995033)),o=l(e.r(680886)),s=e.r(885954);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=e.r(620141),d=/^('|")([^]*)\1$/,p=c(function(){},"Assigning an attribute a value containing characters that might need to be escaped is deprecated. Call attribute.setValue() instead."),f=c(function(){},"Assigning attr.quoted is deprecated and has no effect. Assign to attr.quoteMark instead."),h=c(function(){},"Constructing an Attribute selector with a value without specifying quoteMark is deprecated. Note: The value should be unescaped now.");function m(e){var t=!1,r=null,i=e,a=i.match(d);return a&&(r=a[1],i=a[2]),(i=(0,n.default)(i))!==e&&(t=!0),{deprecatedUsage:t,unescaped:i,quoteMark:r}}var g=function(e){function t(t){var r;return void 0===t&&(t={}),(r=e.call(this,function(e){if(void 0!==e.quoteMark||void 0===e.value)return e;h();var t=m(e.value),r=t.quoteMark,i=t.unescaped;return e.raws||(e.raws={}),void 0===e.raws.value&&(e.raws.value=e.value),e.value=i,e.quoteMark=r,e}(t))||this).type=s.ATTRIBUTE,r.raws=r.raws||{},Object.defineProperty(r.raws,"unquoted",{get:c(function(){return r.value},"attr.raws.unquoted is deprecated. Call attr.value instead."),set:c(function(){return r.value},"Setting attr.raws.unquoted is deprecated and has no effect. attr.value is unescaped by default now.")}),r._constructed=!0,r}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,u(t,e);var r,i=t.prototype;return i.getQuotedValue=function(e){void 0===e&&(e={});var t=v[this._determineQuoteMark(e)];return(0,a.default)(this._value,t)},i._determineQuoteMark=function(e){return e.smart?this.smartQuoteMark(e):this.preferredQuoteMark(e)},i.setValue=function(e,t){void 0===t&&(t={}),this._value=e,this._quoteMark=this._determineQuoteMark(t),this._syncRawValue()},i.smartQuoteMark=function(e){var r=this.value,i=r.replace(/[^']/g,"").length,n=r.replace(/[^"]/g,"").length;if(i+n===0){var o=(0,a.default)(r,{isIdentifier:!0});if(o===r)return t.NO_QUOTE;var s=this.preferredQuoteMark(e);if(s===t.NO_QUOTE){var l=this.quoteMark||e.quoteMark||t.DOUBLE_QUOTE,u=v[l];if((0,a.default)(r,u).length<o.length)return l}return s}return n===i?this.preferredQuoteMark(e):n<i?t.DOUBLE_QUOTE:t.SINGLE_QUOTE},i.preferredQuoteMark=function(e){var r=e.preferCurrentQuoteMark?this.quoteMark:e.quoteMark;return void 0===r&&(r=e.preferCurrentQuoteMark?e.quoteMark:this.quoteMark),void 0===r&&(r=t.DOUBLE_QUOTE),r},i._syncRawValue=function(){var e=(0,a.default)(this._value,v[this.quoteMark]);e===this._value?this.raws&&delete this.raws.value:this.raws.value=e},i._handleEscapes=function(e,t){if(this._constructed){var r=(0,a.default)(t,{isIdentifier:!0});r!==t?this.raws[e]=r:delete this.raws[e]}},i._spacesFor=function(e){return Object.assign({before:"",after:""},this.spaces[e]||{},this.raws.spaces&&this.raws.spaces[e]||{})},i._stringFor=function(e,t,r){void 0===t&&(t=e),void 0===r&&(r=y);var i=this._spacesFor(t);return r(this.stringifyProperty(e),i)},i.offsetOf=function(e){var t=1,r=this._spacesFor("attribute");if(t+=r.before.length,"namespace"===e||"ns"===e)return this.namespace?t:-1;if("attributeNS"===e||(t+=this.namespaceString.length,this.namespace&&(t+=1),"attribute"===e))return t;t+=this.stringifyProperty("attribute").length,t+=r.after.length;var i=this._spacesFor("operator");t+=i.before.length;var a=this.stringifyProperty("operator");if("operator"===e)return a?t:-1;t+=a.length,t+=i.after.length;var n=this._spacesFor("value");t+=n.before.length;var o=this.stringifyProperty("value");return"value"===e?o?t:-1:(t+=o.length,t+=n.after.length,t+=this._spacesFor("insensitive").before.length,"insensitive"===e&&this.insensitive)?t:-1},i.toString=function(){var e=this,t=[this.rawSpaceBefore,"["];return t.push(this._stringFor("qualifiedAttribute","attribute")),this.operator&&(this.value||""===this.value)&&(t.push(this._stringFor("operator")),t.push(this._stringFor("value")),t.push(this._stringFor("insensitiveFlag","insensitive",function(t,r){return!(t.length>0)||e.quoted||0!==r.before.length||e.spaces.value&&e.spaces.value.after||(r.before=" "),y(t,r)}))),t.push("]"),t.push(this.rawSpaceAfter),t.join("")},r=[{key:"quoted",get:function(){var e=this.quoteMark;return"'"===e||'"'===e},set:function(e){f()}},{key:"quoteMark",get:function(){return this._quoteMark},set:function(e){if(!this._constructed){this._quoteMark=e;return}this._quoteMark!==e&&(this._quoteMark=e,this._syncRawValue())}},{key:"qualifiedAttribute",get:function(){return this.qualifiedName(this.raws.attribute||this.attribute)}},{key:"insensitiveFlag",get:function(){return this.insensitive?"i":""}},{key:"value",get:function(){return this._value},set:function(e){if(this._constructed){var t=m(e),r=t.deprecatedUsage,i=t.unescaped,a=t.quoteMark;r&&p(),(i!==this._value||a!==this._quoteMark)&&(this._value=i,this._quoteMark=a,this._syncRawValue())}else this._value=e}},{key:"insensitive",get:function(){return this._insensitive},set:function(e){!e&&(this._insensitive=!1,this.raws&&("I"===this.raws.insensitiveFlag||"i"===this.raws.insensitiveFlag)&&(this.raws.insensitiveFlag=void 0)),this._insensitive=e}},{key:"attribute",get:function(){return this._attribute},set:function(e){this._handleEscapes("attribute",e),this._attribute=e}}],function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(o.default);r.default=g,g.NO_QUOTE=null,g.SINGLE_QUOTE="'",g.DOUBLE_QUOTE='"';var v=((i={"'":{quotes:"single",wrap:!0},'"':{quotes:"double",wrap:!0}})[null]={isIdentifier:!0},i);function y(e,t){return""+t.before+e+t.after}},316178,(e,t,r)=>{"use strict";r.__esModule=!0,r.default=void 0;var i,a=(i=e.r(680886))&&i.__esModule?i:{default:i},n=e.r(885954);function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.default=function(e){function t(t){var r;return(r=e.call(this,t)||this).type=n.UNIVERSAL,r.value="*",r}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e),t}(a.default),t.exports=r.default},893221,(e,t,r)=>{"use strict";r.__esModule=!0,r.default=void 0;var i,a=(i=e.r(805920))&&i.__esModule?i:{default:i},n=e.r(885954);function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.default=function(e){function t(t){var r;return(r=e.call(this,t)||this).type=n.COMBINATOR,r}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e),t}(a.default),t.exports=r.default},549187,(e,t,r)=>{"use strict";r.__esModule=!0,r.default=void 0;var i,a=(i=e.r(805920))&&i.__esModule?i:{default:i},n=e.r(885954);function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.default=function(e){function t(t){var r;return(r=e.call(this,t)||this).type=n.NESTING,r.value="&",r}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e),t}(a.default),t.exports=r.default},183722,(e,t,r)=>{"use strict";r.__esModule=!0,r.default=function(e){return e.sort(function(e,t){return e-t})},t.exports=r.default},169811,(e,t,r)=>{"use strict";r.__esModule=!0,r.word=r.tilde=r.tab=r.str=r.space=r.slash=r.singleQuote=r.semicolon=r.plus=r.pipe=r.openSquare=r.openParenthesis=r.newline=r.greaterThan=r.feed=r.equals=r.doubleQuote=r.dollar=r.cr=r.comment=r.comma=r.combinator=r.colon=r.closeSquare=r.closeParenthesis=r.caret=r.bang=r.backslash=r.at=r.asterisk=r.ampersand=void 0,r.ampersand=38,r.asterisk=42,r.at=64,r.comma=44,r.colon=58,r.semicolon=59,r.openParenthesis=40,r.closeParenthesis=41,r.openSquare=91,r.closeSquare=93,r.dollar=36,r.tilde=126,r.caret=94,r.plus=43,r.equals=61,r.pipe=124,r.greaterThan=62,r.space=32,r.singleQuote=39,r.doubleQuote=34,r.slash=47,r.bang=33,r.backslash=92,r.cr=13,r.feed=12,r.newline=10,r.tab=9,r.str=39,r.comment=-1,r.word=-2,r.combinator=-3},817604,(e,t,r)=>{"use strict";r.__esModule=!0,r.FIELDS=void 0,r.default=function(e){var t,r,i,a,o,c,d,p,f,h,m,g,v=[],y=e.css.valueOf(),b=y.length,x=-1,w=1,S=0,k=0;function C(t,r){if(e.safe)y+=r,p=y.length-1;else throw e.error("Unclosed "+t,w,S-x,S)}for(;S<b;){switch((t=y.charCodeAt(S))===n.newline&&(x=S,w+=1),t){case n.space:case n.tab:case n.newline:case n.cr:case n.feed:p=S;do p+=1,(t=y.charCodeAt(p))===n.newline&&(x=p,w+=1);while(t===n.space||t===n.newline||t===n.tab||t===n.cr||t===n.feed)g=n.space,i=w,r=p-x-1,k=p;break;case n.plus:case n.greaterThan:case n.tilde:case n.pipe:p=S;do p+=1,t=y.charCodeAt(p);while(t===n.plus||t===n.greaterThan||t===n.tilde||t===n.pipe)g=n.combinator,i=w,r=S-x,k=p;break;case n.asterisk:case n.ampersand:case n.bang:case n.comma:case n.equals:case n.dollar:case n.caret:case n.openSquare:case n.closeSquare:case n.colon:case n.semicolon:case n.openParenthesis:case n.closeParenthesis:p=S,g=t,i=w,r=S-x,k=p+1;break;case n.singleQuote:case n.doubleQuote:m=t===n.singleQuote?"'":'"',p=S;do for(a=!1,-1===(p=y.indexOf(m,p+1))&&C("quote",m),o=p;y.charCodeAt(o-1)===n.backslash;)o-=1,a=!a;while(a)g=n.str,i=w,r=S-x,k=p+1;break;default:t===n.slash&&y.charCodeAt(S+1)===n.asterisk?(0===(p=y.indexOf("*/",S+2)+1)&&C("comment","*/"),(c=(d=y.slice(S,p+1).split("\n")).length-1)>0?(f=w+c,h=p-d[c].length):(f=w,h=x),g=n.comment,w=f,i=f,r=p-h):t===n.slash?(p=S,g=t,i=w,r=S-x,k=p+1):(p=function(e,t){var r,i=t;do{if(l[r=e.charCodeAt(i)])break;r===n.backslash?i=function(e,t){var r=t,i=e.charCodeAt(r+1);if(s[i]);else if(u[i]){var a=0;do r++,a++,i=e.charCodeAt(r+1);while(u[i]&&a<6)a<6&&i===n.space&&r++}else r++;return r}(e,i)+1:i++}while(i<e.length)return i-1}(y,S),g=n.word,i=w,r=p-x),k=p+1}v.push([g,w,S-x,i,r,S,k]),h&&(x=h,h=null),S=k}return v};var i,a,n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var s=a?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(i,n,s):i[n]=e[n]}return i.default=e,r&&r.set(e,i),i}(e.r(169811));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}for(var s=((i={})[n.tab]=!0,i[n.newline]=!0,i[n.cr]=!0,i[n.feed]=!0,i),l=((a={})[n.space]=!0,a[n.tab]=!0,a[n.newline]=!0,a[n.cr]=!0,a[n.feed]=!0,a[n.ampersand]=!0,a[n.asterisk]=!0,a[n.bang]=!0,a[n.comma]=!0,a[n.colon]=!0,a[n.semicolon]=!0,a[n.openParenthesis]=!0,a[n.closeParenthesis]=!0,a[n.openSquare]=!0,a[n.closeSquare]=!0,a[n.singleQuote]=!0,a[n.doubleQuote]=!0,a[n.plus]=!0,a[n.pipe]=!0,a[n.tilde]=!0,a[n.greaterThan]=!0,a[n.equals]=!0,a[n.dollar]=!0,a[n.caret]=!0,a[n.slash]=!0,a),u={},c="0123456789abcdefABCDEF",d=0;d<c.length;d++)u[c.charCodeAt(d)]=!0;r.FIELDS={TYPE:0,START_LINE:1,START_COL:2,END_LINE:3,END_COL:4,START_POS:5,END_POS:6}},486363,(e,t,r)=>{"use strict";r.__esModule=!0,r.default=void 0;var i,a,n=C(e.r(59497)),o=C(e.r(236719)),s=C(e.r(332331)),l=C(e.r(149535)),u=C(e.r(454398)),c=C(e.r(820703)),d=C(e.r(581472)),p=C(e.r(257953)),f=k(e.r(936011)),h=C(e.r(316178)),m=C(e.r(893221)),g=C(e.r(549187)),v=C(e.r(183722)),y=k(e.r(817604)),b=k(e.r(169811)),x=k(e.r(885954)),w=e.r(494504);function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(S=function(e){return e?r:t})(e)}function k(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=S(t);if(r&&r.has(e))return r.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=a?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(i,n,o):i[n]=e[n]}return i.default=e,r&&r.set(e,i),i}function C(e){return e&&e.__esModule?e:{default:e}}var E=((i={})[b.space]=!0,i[b.cr]=!0,i[b.feed]=!0,i[b.newline]=!0,i[b.tab]=!0,i),_=Object.assign({},E,((a={})[b.comment]=!0,a));function T(e){return{line:e[y.FIELDS.START_LINE],column:e[y.FIELDS.START_COL]}}function P(e){return{line:e[y.FIELDS.END_LINE],column:e[y.FIELDS.END_COL]}}function I(e,t,r,i){return{start:{line:e,column:t},end:{line:r,column:i}}}function A(e){return I(e[y.FIELDS.START_LINE],e[y.FIELDS.START_COL],e[y.FIELDS.END_LINE],e[y.FIELDS.END_COL])}function O(e,t){if(e)return I(e[y.FIELDS.START_LINE],e[y.FIELDS.START_COL],t[y.FIELDS.END_LINE],t[y.FIELDS.END_COL])}function M(e,t){var r=e[t];if("string"==typeof r)return -1!==r.indexOf("\\")&&((0,w.ensureObject)(e,"raws"),e[t]=(0,w.unesc)(r),void 0===e.raws[t]&&(e.raws[t]=r)),e}function F(e,t){for(var r=-1,i=[];-1!==(r=e.indexOf(t,r+1));)i.push(r);return i}r.default=function(){function e(e,t){void 0===t&&(t={}),this.rule=e,this.options=Object.assign({lossy:!1,safe:!1},t),this.position=0,this.css="string"==typeof this.rule?this.rule:this.rule.selector,this.tokens=(0,y.default)({css:this.css,error:this._errorGenerator(),safe:this.options.safe});var r=O(this.tokens[0],this.tokens[this.tokens.length-1]);this.root=new n.default({source:r}),this.root.errorGenerator=this._errorGenerator();var i=new o.default({source:{start:{line:1,column:1}},sourceIndex:0});this.root.append(i),this.current=i,this.loop()}var t,r=e.prototype;return r._errorGenerator=function(){var e=this;return function(t,r){return"string"==typeof e.rule?Error(t):e.rule.error(t,r)}},r.attribute=function(){var e=[],t=this.currToken;for(this.position++;this.position<this.tokens.length&&this.currToken[y.FIELDS.TYPE]!==b.closeSquare;)e.push(this.currToken),this.position++;if(this.currToken[y.FIELDS.TYPE]!==b.closeSquare)return this.expected("closing square bracket",this.currToken[y.FIELDS.START_POS]);var r=e.length,i={source:I(t[1],t[2],this.currToken[3],this.currToken[4]),sourceIndex:t[y.FIELDS.START_POS]};if(1===r&&!~[b.word].indexOf(e[0][y.FIELDS.TYPE]))return this.expected("attribute",e[0][y.FIELDS.START_POS]);for(var a=0,n="",o="",s=null,l=!1;a<r;){var u=e[a],c=this.content(u),d=e[a+1];switch(u[y.FIELDS.TYPE]){case b.space:if(l=!0,this.options.lossy)break;if(s){(0,w.ensureObject)(i,"spaces",s);var p=i.spaces[s].after||"";i.spaces[s].after=p+c;var h=(0,w.getProp)(i,"raws","spaces",s,"after")||null;h&&(i.raws.spaces[s].after=h+c)}else n+=c,o+=c;break;case b.asterisk:d[y.FIELDS.TYPE]===b.equals?(i.operator=c,s="operator"):i.namespace&&("namespace"!==s||l)||!d||(n&&((0,w.ensureObject)(i,"spaces","attribute"),i.spaces.attribute.before=n,n=""),o&&((0,w.ensureObject)(i,"raws","spaces","attribute"),i.raws.spaces.attribute.before=n,o=""),i.namespace=(i.namespace||"")+c,((0,w.getProp)(i,"raws","namespace")||0)&&(i.raws.namespace+=c),s="namespace"),l=!1;break;case b.dollar:if("value"===s){var m=(0,w.getProp)(i,"raws","value");i.value+="$",m&&(i.raws.value=m+"$");break}case b.caret:d[y.FIELDS.TYPE]===b.equals&&(i.operator=c,s="operator"),l=!1;break;case b.combinator:if("~"===c&&d[y.FIELDS.TYPE]===b.equals&&(i.operator=c,s="operator"),"|"!==c){l=!1;break}d[y.FIELDS.TYPE]===b.equals?(i.operator=c,s="operator"):i.namespace||i.attribute||(i.namespace=!0),l=!1;break;case b.word:if(d&&"|"===this.content(d)&&e[a+2]&&e[a+2][y.FIELDS.TYPE]!==b.equals&&!i.operator&&!i.namespace)i.namespace=c,s="namespace";else if(i.attribute&&("attribute"!==s||l))if((i.value||""===i.value)&&("value"!==s||l||i.quoteMark)){var g="i"===c||"I"===c;(i.value||""===i.value)&&(i.quoteMark||l)?(i.insensitive=g,g&&"I"!==c||((0,w.ensureObject)(i,"raws"),i.raws.insensitiveFlag=c),s="insensitive",n&&((0,w.ensureObject)(i,"spaces","insensitive"),i.spaces.insensitive.before=n,n=""),o&&((0,w.ensureObject)(i,"raws","spaces","insensitive"),i.raws.spaces.insensitive.before=o,o="")):(i.value||""===i.value)&&(s="value",i.value+=c,i.raws.value&&(i.raws.value+=c))}else{var v=(0,w.unesc)(c),x=(0,w.getProp)(i,"raws","value")||"",S=i.value||"";i.value=S+v,i.quoteMark=null,(v!==c||x)&&((0,w.ensureObject)(i,"raws"),i.raws.value=(x||S)+c),s="value"}else n&&((0,w.ensureObject)(i,"spaces","attribute"),i.spaces.attribute.before=n,n=""),o&&((0,w.ensureObject)(i,"raws","spaces","attribute"),i.raws.spaces.attribute.before=o,o=""),i.attribute=(i.attribute||"")+c,((0,w.getProp)(i,"raws","attribute")||0)&&(i.raws.attribute+=c),s="attribute";l=!1;break;case b.str:if(!i.attribute||!i.operator)return this.error("Expected an attribute followed by an operator preceding the string.",{index:u[y.FIELDS.START_POS]});var k=(0,f.unescapeValue)(c),C=k.unescaped,E=k.quoteMark;i.value=C,i.quoteMark=E,s="value",(0,w.ensureObject)(i,"raws"),i.raws.value=c,l=!1;break;case b.equals:if(!i.attribute)return this.expected("attribute",u[y.FIELDS.START_POS],c);if(i.value)return this.error('Unexpected "=" found; an operator was already defined.',{index:u[y.FIELDS.START_POS]});i.operator=i.operator?i.operator+c:c,s="operator",l=!1;break;case b.comment:if(s)if(l||d&&d[y.FIELDS.TYPE]===b.space||"insensitive"===s){var _=(0,w.getProp)(i,"spaces",s,"after")||"",T=(0,w.getProp)(i,"raws","spaces",s,"after")||_;(0,w.ensureObject)(i,"raws","spaces",s),i.raws.spaces[s].after=T+c}else{var P=i[s]||"",A=(0,w.getProp)(i,"raws",s)||P;(0,w.ensureObject)(i,"raws"),i.raws[s]=A+c}else o+=c;break;default:return this.error('Unexpected "'+c+'" found.',{index:u[y.FIELDS.START_POS]})}a++}M(i,"attribute"),M(i,"namespace"),this.newNode(new f.default(i)),this.position++},r.parseWhitespaceEquivalentTokens=function(e){e<0&&(e=this.tokens.length);var t=this.position,r=[],i="",a=void 0;do if(E[this.currToken[y.FIELDS.TYPE]])this.options.lossy||(i+=this.content());else if(this.currToken[y.FIELDS.TYPE]===b.comment){var n={};i&&(n.before=i,i=""),a=new l.default({value:this.content(),source:A(this.currToken),sourceIndex:this.currToken[y.FIELDS.START_POS],spaces:n}),r.push(a)}while(++this.position<e)if(i){if(a)a.spaces.after=i;else if(!this.options.lossy){var o=this.tokens[t],s=this.tokens[this.position-1];r.push(new d.default({value:"",source:I(o[y.FIELDS.START_LINE],o[y.FIELDS.START_COL],s[y.FIELDS.END_LINE],s[y.FIELDS.END_COL]),sourceIndex:o[y.FIELDS.START_POS],spaces:{before:i,after:""}}))}}return r},r.convertWhitespaceNodesToSpace=function(e,t){var r=this;void 0===t&&(t=!1);var i="",a="";return e.forEach(function(e){var n=r.lossySpace(e.spaces.before,t),o=r.lossySpace(e.rawSpaceBefore,t);i+=n+r.lossySpace(e.spaces.after,t&&0===n.length),a+=n+e.value+r.lossySpace(e.rawSpaceAfter,t&&0===o.length)}),a===i&&(a=void 0),{space:i,rawSpace:a}},r.isNamedCombinator=function(e){return void 0===e&&(e=this.position),this.tokens[e+0]&&this.tokens[e+0][y.FIELDS.TYPE]===b.slash&&this.tokens[e+1]&&this.tokens[e+1][y.FIELDS.TYPE]===b.word&&this.tokens[e+2]&&this.tokens[e+2][y.FIELDS.TYPE]===b.slash},r.namedCombinator=function(){if(this.isNamedCombinator()){var e=this.content(this.tokens[this.position+1]),t=(0,w.unesc)(e).toLowerCase(),r={};t!==e&&(r.value="/"+e+"/");var i=new m.default({value:"/"+t+"/",source:I(this.currToken[y.FIELDS.START_LINE],this.currToken[y.FIELDS.START_COL],this.tokens[this.position+2][y.FIELDS.END_LINE],this.tokens[this.position+2][y.FIELDS.END_COL]),sourceIndex:this.currToken[y.FIELDS.START_POS],raws:r});return this.position=this.position+3,i}this.unexpected()},r.combinator=function(){var e,t=this;if("|"===this.content())return this.namespace();var r=this.locateNextMeaningfulToken(this.position);if(r<0||this.tokens[r][y.FIELDS.TYPE]===b.comma||this.tokens[r][y.FIELDS.TYPE]===b.closeParenthesis){var i=this.parseWhitespaceEquivalentTokens(r);if(i.length>0){var a=this.current.last;if(a){var n=this.convertWhitespaceNodesToSpace(i),o=n.space,s=n.rawSpace;void 0!==s&&(a.rawSpaceAfter+=s),a.spaces.after+=o}else i.forEach(function(e){return t.newNode(e)})}return}var l=this.currToken,u=void 0;if(r>this.position&&(u=this.parseWhitespaceEquivalentTokens(r)),this.isNamedCombinator()?e=this.namedCombinator():this.currToken[y.FIELDS.TYPE]===b.combinator?(e=new m.default({value:this.content(),source:A(this.currToken),sourceIndex:this.currToken[y.FIELDS.START_POS]}),this.position++):E[this.currToken[y.FIELDS.TYPE]]||u||this.unexpected(),e){if(u){var c=this.convertWhitespaceNodesToSpace(u),d=c.space,p=c.rawSpace;e.spaces.before=d,e.rawSpaceBefore=p}}else{var f=this.convertWhitespaceNodesToSpace(u,!0),h=f.space,g=f.rawSpace;g||(g=h);var v={},x={spaces:{}};h.endsWith(" ")&&g.endsWith(" ")?(v.before=h.slice(0,h.length-1),x.spaces.before=g.slice(0,g.length-1)):" "===h[0]&&" "===g[0]?(v.after=h.slice(1),x.spaces.after=g.slice(1)):x.value=g,e=new m.default({value:" ",source:O(l,this.tokens[this.position-1]),sourceIndex:l[y.FIELDS.START_POS],spaces:v,raws:x})}return this.currToken&&this.currToken[y.FIELDS.TYPE]===b.space&&(e.spaces.after=this.optionalSpace(this.content()),this.position++),this.newNode(e)},r.comma=function(){if(this.position===this.tokens.length-1){this.root.trailingComma=!0,this.position++;return}this.current._inferEndPosition();var e=new o.default({source:{start:T(this.tokens[this.position+1])},sourceIndex:this.tokens[this.position+1][y.FIELDS.START_POS]});this.current.parent.append(e),this.current=e,this.position++},r.comment=function(){var e=this.currToken;this.newNode(new l.default({value:this.content(),source:A(e),sourceIndex:e[y.FIELDS.START_POS]})),this.position++},r.error=function(e,t){throw this.root.error(e,t)},r.missingBackslash=function(){return this.error("Expected a backslash preceding the semicolon.",{index:this.currToken[y.FIELDS.START_POS]})},r.missingParenthesis=function(){return this.expected("opening parenthesis",this.currToken[y.FIELDS.START_POS])},r.missingSquareBracket=function(){return this.expected("opening square bracket",this.currToken[y.FIELDS.START_POS])},r.unexpected=function(){return this.error("Unexpected '"+this.content()+"'. Escaping special characters with \\ may help.",this.currToken[y.FIELDS.START_POS])},r.unexpectedPipe=function(){return this.error("Unexpected '|'.",this.currToken[y.FIELDS.START_POS])},r.namespace=function(){var e=this.prevToken&&this.content(this.prevToken)||!0;return this.nextToken[y.FIELDS.TYPE]===b.word?(this.position++,this.word(e)):this.nextToken[y.FIELDS.TYPE]===b.asterisk?(this.position++,this.universal(e)):void this.unexpectedPipe()},r.nesting=function(){if(this.nextToken&&"|"===this.content(this.nextToken))return void this.position++;var e=this.currToken;this.newNode(new g.default({value:this.content(),source:A(e),sourceIndex:e[y.FIELDS.START_POS]})),this.position++},r.parentheses=function(){var e=this.current.last,t=1;if(this.position++,e&&e.type===x.PSEUDO){var r=new o.default({source:{start:T(this.tokens[this.position])},sourceIndex:this.tokens[this.position][y.FIELDS.START_POS]}),i=this.current;for(e.append(r),this.current=r;this.position<this.tokens.length&&t;)this.currToken[y.FIELDS.TYPE]===b.openParenthesis&&t++,this.currToken[y.FIELDS.TYPE]===b.closeParenthesis&&t--,t?this.parse():(this.current.source.end=P(this.currToken),this.current.parent.source.end=P(this.currToken),this.position++);this.current=i}else{for(var a,n=this.currToken,s="(";this.position<this.tokens.length&&t;)this.currToken[y.FIELDS.TYPE]===b.openParenthesis&&t++,this.currToken[y.FIELDS.TYPE]===b.closeParenthesis&&t--,a=this.currToken,s+=this.parseParenthesisToken(this.currToken),this.position++;e?e.appendToPropertyAndEscape("value",s,s):this.newNode(new d.default({value:s,source:I(n[y.FIELDS.START_LINE],n[y.FIELDS.START_COL],a[y.FIELDS.END_LINE],a[y.FIELDS.END_COL]),sourceIndex:n[y.FIELDS.START_POS]}))}if(t)return this.expected("closing parenthesis",this.currToken[y.FIELDS.START_POS])},r.pseudo=function(){for(var e=this,t="",r=this.currToken;this.currToken&&this.currToken[y.FIELDS.TYPE]===b.colon;)t+=this.content(),this.position++;return this.currToken?this.currToken[y.FIELDS.TYPE]!==b.word?this.expected(["pseudo-class","pseudo-element"],this.currToken[y.FIELDS.START_POS]):void this.splitWord(!1,function(i,a){t+=i,e.newNode(new p.default({value:t,source:O(r,e.currToken),sourceIndex:r[y.FIELDS.START_POS]})),a>1&&e.nextToken&&e.nextToken[y.FIELDS.TYPE]===b.openParenthesis&&e.error("Misplaced parenthesis.",{index:e.nextToken[y.FIELDS.START_POS]})}):this.expected(["pseudo-class","pseudo-element"],this.position-1)},r.space=function(){var e=this.content();0===this.position||this.prevToken[y.FIELDS.TYPE]===b.comma||this.prevToken[y.FIELDS.TYPE]===b.openParenthesis||this.current.nodes.every(function(e){return"comment"===e.type})?(this.spaces=this.optionalSpace(e),this.position++):this.position===this.tokens.length-1||this.nextToken[y.FIELDS.TYPE]===b.comma||this.nextToken[y.FIELDS.TYPE]===b.closeParenthesis?(this.current.last.spaces.after=this.optionalSpace(e),this.position++):this.combinator()},r.string=function(){var e=this.currToken;this.newNode(new d.default({value:this.content(),source:A(e),sourceIndex:e[y.FIELDS.START_POS]})),this.position++},r.universal=function(e){var t=this.nextToken;if(t&&"|"===this.content(t))return this.position++,this.namespace();var r=this.currToken;this.newNode(new h.default({value:this.content(),source:A(r),sourceIndex:r[y.FIELDS.START_POS]}),e),this.position++},r.splitWord=function(e,t){for(var r=this,i=this.nextToken,a=this.content();i&&~[b.dollar,b.caret,b.equals,b.word].indexOf(i[y.FIELDS.TYPE]);){this.position++;var n=this.content();if(a+=n,n.lastIndexOf("\\")===n.length-1){var o=this.nextToken;o&&o[y.FIELDS.TYPE]===b.space&&(a+=this.requiredSpace(this.content(o)),this.position++)}i=this.nextToken}var l=F(a,".").filter(function(e){var t="\\"===a[e-1],r=/^\d+\.\d+%$/.test(a);return!t&&!r}),d=F(a,"#").filter(function(e){return"\\"!==a[e-1]}),p=F(a,"#{");p.length&&(d=d.filter(function(e){return!~p.indexOf(e)}));var f=(0,v.default)(function(){var e=Array.prototype.concat.apply([],arguments);return e.filter(function(t,r){return r===e.indexOf(t)})}([0].concat(l,d)));f.forEach(function(i,n){var o,p=f[n+1]||a.length,h=a.slice(i,p);if(0===n&&t)return t.call(r,h,f.length);var m=r.currToken,g=m[y.FIELDS.START_POS]+f[n],v=I(m[1],m[2]+i,m[3],m[2]+(p-1));if(~l.indexOf(i)){var b={value:h.slice(1),source:v,sourceIndex:g};o=new s.default(M(b,"value"))}else if(~d.indexOf(i)){var x={value:h.slice(1),source:v,sourceIndex:g};o=new u.default(M(x,"value"))}else{var w={value:h,source:v,sourceIndex:g};M(w,"value"),o=new c.default(w)}r.newNode(o,e),e=null}),this.position++},r.word=function(e){var t=this.nextToken;return t&&"|"===this.content(t)?(this.position++,this.namespace()):this.splitWord(e)},r.loop=function(){for(;this.position<this.tokens.length;)this.parse(!0);return this.current._inferEndPosition(),this.root},r.parse=function(e){switch(this.currToken[y.FIELDS.TYPE]){case b.space:this.space();break;case b.comment:this.comment();break;case b.openParenthesis:this.parentheses();break;case b.closeParenthesis:e&&this.missingParenthesis();break;case b.openSquare:this.attribute();break;case b.dollar:case b.caret:case b.equals:case b.word:this.word();break;case b.colon:this.pseudo();break;case b.comma:this.comma();break;case b.asterisk:this.universal();break;case b.ampersand:this.nesting();break;case b.slash:case b.combinator:this.combinator();break;case b.str:this.string();break;case b.closeSquare:this.missingSquareBracket();case b.semicolon:this.missingBackslash();default:this.unexpected()}},r.expected=function(e,t,r){if(Array.isArray(e)){var i=e.pop();e=e.join(", ")+" or "+i}var a=/^[aeiou]/.test(e[0])?"an":"a";return r?this.error("Expected "+a+" "+e+', found "'+r+'" instead.',{index:t}):this.error("Expected "+a+" "+e+".",{index:t})},r.requiredSpace=function(e){return this.options.lossy?" ":e},r.optionalSpace=function(e){return this.options.lossy?"":e},r.lossySpace=function(e,t){return this.options.lossy?t?" ":"":e},r.parseParenthesisToken=function(e){var t=this.content(e);return e[y.FIELDS.TYPE]===b.space?this.requiredSpace(t):t},r.newNode=function(e,t){return t&&(/^ +$/.test(t)&&(this.options.lossy||(this.spaces=(this.spaces||"")+t),t=!0),e.namespace=t,M(e,"namespace")),this.spaces&&(e.spaces.before=this.spaces,this.spaces=""),this.current.append(e)},r.content=function(e){return void 0===e&&(e=this.currToken),this.css.slice(e[y.FIELDS.START_POS],e[y.FIELDS.END_POS])},r.locateNextMeaningfulToken=function(e){void 0===e&&(e=this.position+1);for(var t=e;t<this.tokens.length;)if(!_[this.tokens[t][y.FIELDS.TYPE]])return t;else{t++;continue}return -1},t=[{key:"currToken",get:function(){return this.tokens[this.position]}},{key:"nextToken",get:function(){return this.tokens[this.position+1]}},{key:"prevToken",get:function(){return this.tokens[this.position-1]}}],function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(),t.exports=r.default},944857,(e,t,r)=>{"use strict";r.__esModule=!0,r.default=void 0;var i,a=(i=e.r(486363))&&i.__esModule?i:{default:i};r.default=function(){function e(e,t){this.func=e||function(){},this.funcRes=null,this.options=t}var t=e.prototype;return t._shouldUpdateSelector=function(e,t){return void 0===t&&(t={}),!1!==Object.assign({},this.options,t).updateSelector&&"string"!=typeof e},t._isLossy=function(e){return void 0===e&&(e={}),!1===Object.assign({},this.options,e).lossless},t._root=function(e,t){return void 0===t&&(t={}),new a.default(e,this._parseOptions(t)).root},t._parseOptions=function(e){return{lossy:this._isLossy(e)}},t._run=function(e,t){var r=this;return void 0===t&&(t={}),new Promise(function(i,a){try{var n=r._root(e,t);Promise.resolve(r.func(n)).then(function(i){var a=void 0;return r._shouldUpdateSelector(e,t)&&(e.selector=a=n.toString()),{transform:i,root:n,string:a}}).then(i,a)}catch(e){a(e);return}})},t._runSync=function(e,t){void 0===t&&(t={});var r=this._root(e,t),i=this.func(r);if(i&&"function"==typeof i.then)throw Error("Selector processor returned a promise to a synchronous call.");var a=void 0;return t.updateSelector&&"string"!=typeof e&&(e.selector=a=r.toString()),{transform:i,root:r,string:a}},t.ast=function(e,t){return this._run(e,t).then(function(e){return e.root})},t.astSync=function(e,t){return this._runSync(e,t).root},t.transform=function(e,t){return this._run(e,t).then(function(e){return e.transform})},t.transformSync=function(e,t){return this._runSync(e,t).transform},t.process=function(e,t){return this._run(e,t).then(function(e){return e.string||e.root.toString()})},t.processSync=function(e,t){var r=this._runSync(e,t);return r.string||r.root.toString()},e}(),t.exports=r.default},371976,(e,t,r)=>{"use strict";r.__esModule=!0,r.universal=r.tag=r.string=r.selector=r.root=r.pseudo=r.nesting=r.id=r.comment=r.combinator=r.className=r.attribute=void 0;var i=m(e.r(936011)),a=m(e.r(332331)),n=m(e.r(893221)),o=m(e.r(149535)),s=m(e.r(454398)),l=m(e.r(549187)),u=m(e.r(257953)),c=m(e.r(59497)),d=m(e.r(236719)),p=m(e.r(581472)),f=m(e.r(820703)),h=m(e.r(316178));function m(e){return e&&e.__esModule?e:{default:e}}r.attribute=function(e){return new i.default(e)},r.className=function(e){return new a.default(e)},r.combinator=function(e){return new n.default(e)},r.comment=function(e){return new o.default(e)},r.id=function(e){return new s.default(e)},r.nesting=function(e){return new l.default(e)},r.pseudo=function(e){return new u.default(e)},r.root=function(e){return new c.default(e)},r.selector=function(e){return new d.default(e)},r.string=function(e){return new p.default(e)},r.tag=function(e){return new f.default(e)},r.universal=function(e){return new h.default(e)}},96414,(e,t,r)=>{"use strict";r.__esModule=!0,r.isComment=r.isCombinator=r.isClassName=r.isAttribute=void 0,r.isContainer=function(e){return!!(o(e)&&e.walk)},r.isIdentifier=void 0,r.isNamespace=function(e){return l(e)||c(e)},r.isNesting=void 0,r.isNode=o,r.isPseudo=void 0,r.isPseudoClass=function(e){return u(e)&&!d(e)},r.isPseudoElement=d,r.isUniversal=r.isTag=r.isString=r.isSelector=r.isRoot=void 0;var i,a=e.r(885954),n=((i={})[a.ATTRIBUTE]=!0,i[a.CLASS]=!0,i[a.COMBINATOR]=!0,i[a.COMMENT]=!0,i[a.ID]=!0,i[a.NESTING]=!0,i[a.PSEUDO]=!0,i[a.ROOT]=!0,i[a.SELECTOR]=!0,i[a.STRING]=!0,i[a.TAG]=!0,i[a.UNIVERSAL]=!0,i);function o(e){return"object"==typeof e&&n[e.type]}function s(e,t){return o(t)&&t.type===e}var l=s.bind(null,a.ATTRIBUTE);r.isAttribute=l,r.isClassName=s.bind(null,a.CLASS),r.isCombinator=s.bind(null,a.COMBINATOR),r.isComment=s.bind(null,a.COMMENT),r.isIdentifier=s.bind(null,a.ID),r.isNesting=s.bind(null,a.NESTING);var u=s.bind(null,a.PSEUDO);r.isPseudo=u,r.isRoot=s.bind(null,a.ROOT),r.isSelector=s.bind(null,a.SELECTOR),r.isString=s.bind(null,a.STRING);var c=s.bind(null,a.TAG);function d(e){return u(e)&&e.value&&(e.value.startsWith("::")||":before"===e.value.toLowerCase()||":after"===e.value.toLowerCase()||":first-letter"===e.value.toLowerCase()||":first-line"===e.value.toLowerCase())}r.isTag=c,r.isUniversal=s.bind(null,a.UNIVERSAL)},231498,(e,t,r)=>{"use strict";r.__esModule=!0;var i=e.r(885954);Object.keys(i).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===i[e]||(r[e]=i[e])});var a=e.r(371976);Object.keys(a).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===a[e]||(r[e]=a[e])});var n=e.r(96414);Object.keys(n).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===n[e]||(r[e]=n[e])})},276939,(e,t,r)=>{"use strict";r.__esModule=!0,r.default=void 0;var i,a=(i=e.r(944857))&&i.__esModule?i:{default:i},n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var s=a?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(i,n,s):i[n]=e[n]}return i.default=e,r&&r.set(e,i),i}(e.r(231498));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var s=function(e){return new a.default(e)};Object.assign(s,n),delete s.__esModule,r.default=s,t.exports=r.default},472107,(e,t,r)=>{"use strict";let i=e.r(276939),a=e.r(412925),{extractICSS:n}=e.r(95276),o=e=>"combinator"===e.type&&" "===e.value;function s(e){if(!e.parent)return;let t=e.parent.index(e);for(let r=t-1;r>=0;r--){let t=e.parent.nodes[r];if("comment"===t.type){if(t.text.trimStart().startsWith("cssmodules-pure-ignore"))return t}else break}}function l(e){let t=[];return e.forEach(e=>{Array.isArray(e)?l(e).forEach(e=>{t.push(e)}):e&&t.push(e)}),t.length>0&&o(t[t.length-1])&&t.pop(),t}let u=Symbol("is-pure-selector");function c(e,t,r){let a=(t,n)=>{let s;if(n.ignoreNextSpacing&&!o(t))throw Error("Missing whitespace after "+n.ignoreNextSpacing);if(n.enforceNoSpacing&&o(t))throw Error("Missing whitespace before "+n.enforceNoSpacing);switch(t.type){case"root":{let e;n.hasPureGlobals=!1,s=t.nodes.map(r=>{let i={global:n.global,lastWasSpacing:!0,hasLocals:!1,explicit:!1};if(r=a(r,i),void 0===e)e=i.global;else if(e!==i.global)throw Error('Inconsistent rule global/local result in rule "'+t+'" (multiple selectors must result in the same mode for the rule)');return i.hasLocals||(n.hasPureGlobals=!0),r}),n.global=e,t.nodes=l(s);break}case"selector":s=t.map(e=>a(e,n)),(t=t.clone()).nodes=l(s);break;case"combinator":if(o(t)){if(n.ignoreNextSpacing)return n.ignoreNextSpacing=!1,n.lastWasSpacing=!1,n.enforceNoSpacing=!1,null;return n.lastWasSpacing=!0,t}break;case"pseudo":{let e,r=!!t.length,o=":local"===t.value||":global"===t.value;if(":import"===t.value||":export"===t.value)n.hasLocals=!0;else if(r)if(o){if(0===t.nodes.length)throw Error(`${t.value}() can't be empty`);if(n.inside)throw Error(`A ${t.value} is not allowed inside of a ${n.inside}(...)`);if(e={global:":global"===t.value,inside:t.value,hasLocals:!1,explicit:!0},(s=t.map(t=>a(t,e)).reduce((e,t)=>e.concat(t.nodes),[])).length){let{before:e,after:r}=t.spaces,i=s[0],a=s[s.length-1];i.spaces={before:e,after:i.spaces.after},a.spaces={before:a.spaces.before,after:r}}t=s}else e={global:n.global,inside:n.inside,lastWasSpacing:!0,hasLocals:!1,explicit:n.explicit},s=t.map(t=>{let r={...e,enforceNoSpacing:!1},i=a(t,r);return e.global=r.global,e.hasLocals=r.hasLocals,i}),(t=t.clone()).nodes=l(s),e.hasLocals&&(n.hasLocals=!0);else if(o){if(n.inside)throw Error(`A ${t.value} is not allowed inside of a ${n.inside}(...)`);let e=!!t.spaces.before;return n.ignoreNextSpacing=!!n.lastWasSpacing&&t.value,n.enforceNoSpacing=!n.lastWasSpacing&&t.value,n.global=":global"===t.value,n.explicit=!0,e?i.combinator({value:" "}):null}break}case"id":case"class":{if(!t.value)throw Error("Invalid class or id selector syntax");if(n.global)break;let e=r.has(t.value),a=e&&n.explicit;if(!e||a){let e=t.clone();e.spaces={before:"",after:""},t=i.pseudo({value:":local",nodes:[e],spaces:t.spaces}),n.hasLocals=!0}break}case"nesting":"&"===t.value&&(n.hasLocals=e.parent[u])}return n.lastWasSpacing=!1,n.ignoreNextSpacing=!1,n.enforceNoSpacing=!1,t},n={global:"global"===t,hasPureGlobals:!1};return n.selector=i(e=>{a(e,n)}).processSync(e,{updateSelector:!1,lossless:!0}),n}function d(e,t){switch(e.type){case"word":t.localizeNextItem&&!t.localAliasMap.has(e.value)&&(e.value=":local("+e.value+")",t.localizeNextItem=!1);break;case"function":t.options&&t.options.rewriteUrl&&"url"===e.value.toLowerCase()&&e.nodes.map(e=>{if("string"!==e.type&&"word"!==e.type)return;let r=t.options.rewriteUrl(t.global,e.value);switch(e.type){case"string":"'"===e.quote&&(r=r.replace(/(\\)/g,"\\$1").replace(/'/g,"\\'")),'"'===e.quote&&(r=r.replace(/(\\)/g,"\\$1").replace(/"/g,'\\"'));break;case"word":r=r.replace(/("|'|\)|\\)/g,"\\$1")}e.value=r})}return e}let p=["none","inherit","initial","revert","revert-layer","unset"],f=/^-?([a-z\u0080-\uFFFF_]|(\\[^\r\n\f])|-(?![0-9]))((\\[^\r\n\f])|[a-z\u0080-\uFFFF_0-9-])*$/i,h={$normal:1,$reverse:1,$alternate:1,"$alternate-reverse":1,$forwards:1,$backwards:1,$both:1,$infinite:1,$paused:1,$running:1,$ease:1,"$ease-in":1,"$ease-out":1,"$ease-in-out":1,$linear:1,"$step-end":1,"$step-start":1,$none:1/0,$initial:1/0,$inherit:1/0,$unset:1/0,$revert:1/0,"$revert-layer":1/0};function m(e,t){if(/animation(-name)?$/i.test(e.prop)){let r={},i=a(e.value).walk(e=>{if("div"===e.type){r={};return}if("function"===e.type&&"local"===e.value.toLowerCase()&&1===e.nodes.length)return e.type="word",e.value=e.nodes[0].value,d(e,{options:t.options,global:t.global,localizeNextItem:!0,localAliasMap:t.localAliasMap});if("function"===e.type)return"global"===e.value.toLowerCase()&&1===e.nodes.length&&(e.type="word",e.value=e.nodes[0].value),!1;if("word"!==e.type)return;let i="word"===e.type?e.value.toLowerCase():null,a=!1;return i&&f.test(i)&&("$"+i in h?(r["$"+i]="$"+i in r?r["$"+i]+1:0,a=r["$"+i]>=h["$"+i]):a=!0),d(e,{options:t.options,global:t.global,localizeNextItem:a&&!t.global,localAliasMap:t.localAliasMap})});e.value=i.toString();return}if(/url\(/i.test(e.value)){let r;return void((r=a(e.value)).walk((e,r,i)=>{if("function"===e.type&&("var"===e.value.toLowerCase()||"env"===e.value.toLowerCase()))return!1;if("word"===e.type&&p.includes(e.value.toLowerCase()))return;let a={options:t.options,global:t.global,localizeNextItem:!1,localAliasMap:t.localAliasMap};i[r]=d(e,a)}),e.value=r.toString())}}let g=(e,t)=>t.parent&&"root"!==t.type?"rule"===t.type&&t[u]?t[u]||g(e,t.parent):!e.hasPureGlobals||g(e,t.parent):!e.hasPureGlobals,v=e=>!(e.nodes.length>0)||!e.nodes.every(e=>"rule"===e.type||"atrule"===e.type&&!v(e));t.exports=(e={})=>{if(e&&e.mode&&"global"!==e.mode&&"local"!==e.mode&&"pure"!==e.mode)throw Error('options.mode must be either "global", "local" or "pure" (default "local")');let t=e&&"pure"===e.mode,r=e&&"global"===e.mode;return{postcssPlugin:"postcss-modules-local-by-default",prepare(){let i=new Map;return{Once(a){let{icssImports:o}=n(a,!1),l=t&&!(e=>{for(let t of e.nodes){if("comment"!==t.type)break;if(t.text.trim().startsWith("cssmodules-pure-no-check"))return!0}return!1})(a);Object.keys(o).forEach(e=>{Object.keys(o[e]).forEach(t=>{i.set(t,o[e][t])})}),a.walkAtRules(a=>{if(/keyframes$/i.test(a.name)){let t=/^\s*:global\s*\((.+)\)\s*$/.exec(a.params),n=/^\s*:local\s*\((.+)\)\s*$/.exec(a.params),o=r;if(t){if(l){let e=s(a);if(e)e.remove();else throw a.error("@keyframes :global(...) is not allowed in pure mode")}a.params=t[1],o=!0}else n?(a.params=n[0],o=!1):!a.params||r||i.has(a.params)||(a.params=":local("+a.params+")");a.walkDecls(t=>{m(t,{localAliasMap:i,options:e,global:o})})}else if(/scope$/i.test(a.name)){if(a.params){let r=t?s(a):void 0;r&&r.remove(),a.params=a.params.split("to").map(t=>{let n=t.trim().slice(1,-1).trim(),o=c(n,e.mode,i);if(o.options=e,o.localAliasMap=i,l&&o.hasPureGlobals&&!r)throw a.error('Selector in at-rule"'+n+'" is not pure (pure selectors must contain at least one local class or id)');return`(${o.selector})`}).join(" to ")}a.nodes.forEach(t=>{"decl"===t.type&&m(t,{localAliasMap:i,options:e,global:r})})}else a.nodes&&a.nodes.forEach(t=>{"decl"===t.type&&m(t,{localAliasMap:i,options:e,global:r})})}),a.walkRules(r=>{if(r.parent&&"atrule"===r.parent.type&&/keyframes$/i.test(r.parent.name))return;let a=c(r,e.mode,i);a.options=e,a.localAliasMap=i;let n=l?s(r):void 0,o=l&&!g(a,r);if(o&&v(r)&&!n)throw r.error('Selector "'+r.selector+'" is not pure (pure selectors must contain at least one local class or id)');n&&n.remove(),t&&(r[u]=!o),r.selector=a.selector,r.nodes&&r.nodes.forEach(e=>m(e,a))})}}}}},t.exports.postcss=!0},213735,(e,t,r)=>{t.exports=function(e,t){let r=[],i={},a=Object.keys(e),n=a.length;for(let o=0;o<n;++o){let n=function e(t,r,i,a,n){if(2===i[t])return;if(1===i[t]){if(n){let e,i;return e=Error("Nondeterministic import's order"),i=r[t].find(e=>r[e].indexOf(t)>-1),e.nodes=[t,i],e}return}i[t]=1;let o=r[t],s=o.length;for(let t=0;t<s;++t){let s=e(o[t],r,i,a,n);if(s instanceof Error)return s}i[t]=2,a.push(t)}(a[o],e,i,r,t);if(n instanceof Error)return n}return r}},423977,(e,t,r)=>{let i=e.r(213735),a=/^(.+?)\s+from\s+(?:"([^"]+)"|'([^']+)'|(global))$/,n=/^:import\((?:"([^"]+)"|'([^']+)')\)/;function o(e,t,r,i){let a=t+"_siblings",n=t+"_"+e;if(1!==i[n]){Array.isArray(i[a])||(i[a]=[]);let t=i[a];Array.isArray(r[e])?r[e]=r[e].concat(t):r[e]=t.slice(),i[n]=1,t.push(e)}}t.exports=(e={})=>{let t=0,r="function"!=typeof e.createImportedName?e=>`i__imported_${e.replace(/\W/g,"_")}_${t++}`:e.createImportedName,s=e.failOnWrongOrder;return{postcssPlugin:"postcss-modules-extract-imports",prepare(){let e={},t={},l={},u={},c={};return{Once(d,p){let f;d.walkRules(r=>{let i=n.exec(r.selector);if(i){let[,a,n]=i,s=a||n;o(s,"root",e,t),l[s]=r}}),d.walkDecls(/^composes$/,i=>{let n=i.value.split(","),s=[];n.forEach(n=>{let l,d=n.trim().match(a);if(!d)return void s.push(n);let[,p,f,h,m]=d;if(m)l=p.split(/\s+/).map(e=>`global(${e})`);else{let a=f||h,n=i.parent,s="";for(;"root"!==n.type;)s=n.parent.index(n)+"_"+s,n=n.parent;let{selector:d}=i.parent;o(a,`_${s}${d}`,e,t),u[a]=i,c[a]=c[a]||{},l=p.split(/\s+/).map(e=>(c[a][e]||(c[a][e]=r(e,a)),c[a][e]))}s.push(l.join(" "))}),i.value=s.join(", ")});let h=i(e,s);if(h instanceof Error)throw u[h.nodes.find(e=>u.hasOwnProperty(e))].error("Failed to resolve order of composed modules "+h.nodes.map(e=>"`"+e+"`").join(", ")+".",{plugin:"postcss-modules-extract-imports",word:"composes"});h.forEach(e=>{let t=c[e],r=l[e];!r&&t&&(r=p.rule({selector:`:import("${e}")`,raws:{after:"\n"}}),f?d.insertAfter(f,r):d.prepend(r)),f=r,t&&Object.keys(t).forEach(e=>{r.append(p.decl({value:e,prop:t[e],raws:{before:"\n  "}}))})})}}}}},t.exports.postcss=!0},182113,(e,t,r)=>{"use strict";let i=e.r(276939),a=Object.prototype.hasOwnProperty,n="[\\x20\\t\\r\\n\\f]",o=RegExp("\\\\([\\da-f]{1,6}"+n+"?|("+n+")|.)","ig");function s(e){return e.replace(o,(e,t,r)=>{let i="0x"+t-65536;return i!=i||r?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)})}let l=(e={})=>{let t=e&&e.generateScopedName||l.generateScopedName,r=e&&e.generateExportEntry||l.generateExportEntry,n=e&&e.exportGlobals;return{postcssPlugin:"postcss-modules-scope",Once(e,{rule:o}){let s=Object.create(null);function l(i,a,n){let o=t(a||i,e.source.input.from,e.source.input.css,n),{key:l,value:u}=r(a||i,o,e.source.input.from,e.source.input.css,n);return s[l]=s[l]||[],0>s[l].indexOf(u)&&s[l].push(u),o}function u(e){switch(e.type){case"pseudo":if(":local"===e.value){if(1!==e.nodes.length)throw Error('Unexpected comma (",") in :local block');let t=function e(t){switch(t.type){case"selector":return t.nodes=t.map(t=>e(t)),t;case"class":return i.className({value:l(t.value,t.raws&&t.raws.value?t.raws.value:null,t)});case"id":return i.id({value:l(t.value,t.raws&&t.raws.value?t.raws.value:null,t)});case"attribute":if("class"===t.attribute&&"="===t.operator)return i.attribute({attribute:t.attribute,operator:t.operator,quoteMark:"'",value:l(t.value,null,null)})}throw Error(`${t.type} ("${t}") is not allowed in a :local block`)}(e.first);t.first.spaces=e.spaces;let r=e.next();r&&"combinator"===r.type&&" "===r.value&&/\\[A-F0-9]{1,6}$/.test(t.last.value)&&(t.last.spaces.after=" "),e.replaceWith(t);return}case"root":case"selector":e.each(e=>u(e));break;case"id":case"class":n&&(s[e.value]=[e.value])}return e}let c={};e.walkRules(/^:import\(.+\)$/,e=>{e.walkDecls(e=>{c[e.prop]=!0})}),e.walkRules(e=>{let t=i().astSync(e);e.selector=u(t.clone()).toString(),e.walkDecls(/^(composes|compose-with)$/i,e=>{let r=function(e,t){if(function e(t){return!!t.parent&&"root"!==t.parent.type&&("rule"===t.parent.type||e(t.parent))}(t))throw Error(`composition is not allowed in nested rule 

${t}`);return e.nodes.map(t=>{if("selector"!==t.type||1!==t.nodes.length)throw Error(`composition is only allowed when selector is single :local class name not in "${e}"`);if("pseudo"!==(t=t.nodes[0]).type||":local"!==t.value||1!==t.nodes.length||"selector"!==(t=t.first).type||1!==t.length||"class"!==(t=t.first).type)throw Error('composition is only allowed when selector is single :local class name not in "'+e+'", "'+t+'" is weird');return t.value})}(t,e.parent);e.value.split(",").forEach(t=>{t.trim().split(/\s+/).forEach(t=>{let i=/^global\(([^)]+)\)$/.exec(t);if(i)r.forEach(e=>{s[e].push(i[1])});else if(a.call(c,t))r.forEach(e=>{s[e].push(t)});else if(a.call(s,t))r.forEach(e=>{s[t].forEach(t=>{s[e].push(t)})});else throw e.error(`referenced class name "${t}" in ${e.prop} not found`)})}),e.remove()}),e.walkDecls(e=>{if(!/:local\s*\((.+?)\)/.test(e.value))return;let t=e.value.split(/(,|'[^']*'|"[^"]*")/);e.value=(t=t.map((e,r)=>{if(0!==r&&","!==t[r-1])return e;{let t=e,r=/:local\s*\((.+?)\)/.exec(e);if(!r)return e;{let e=r.input,i=r[0],a=l(r[1]);t=e.replace(i,a)}return t}})).join("")})}),e.walkAtRules(/keyframes$/i,e=>{let t=/^\s*:local\s*\((.+?)\)\s*$/.exec(e.params);t&&(e.params=l(t[1]))}),e.walkAtRules(/scope$/i,e=>{e.params&&(e.params=e.params.split("to").map(e=>{let t=e.trim().slice(1,-1).trim();if(!/^\s*:local\s*\((.+?)\)\s*$/.exec(t))return`(${t})`;let r=i().astSync(t);return`(${u(r).toString()})`}).join(" to "))});let d=Object.keys(s);if(d.length>0){let t=o({selector:":export"});d.forEach(e=>t.append({prop:e,value:s[e].join(" "),raws:{before:"\n  "}})),e.append(t)}}}};l.postcss=!0,l.generateScopedName=function(e,t){let r=t.replace(/\.[^./\\]+$/,"").replace(/[\W_]+/g,"_").replace(/^_|_$/g,"");return`_${r}__${e}`.trim()},l.generateExportEntry=function(e,t){return{key:s(e),value:s(t)}},t.exports=l},590275,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.normalizeOptions=function(e,t){let r=C(e,t);return{url:void 0===e.url||e.url,import:void 0===e.import||e.import,modules:r,sourceMap:"boolean"==typeof e.sourceMap?e.sourceMap:t.sourceMap,importLoaders:"string"==typeof e.importLoaders?parseInt(e.importLoaders,10):e.importLoaders,esModule:void 0===e.esModule||e.esModule}},r.shouldUseModulesPlugins=function(e){return"module"===e.modules.compileType},r.shouldUseImportPlugin=function(e){return!e.modules.exportOnlyLocals&&("boolean"!=typeof e.import||e.import)},r.shouldUseURLPlugin=function(e){return!e.modules.exportOnlyLocals&&("boolean"!=typeof e.url||e.url)},r.shouldUseIcssPlugin=function(e){return!0===e.icss||!!e.modules},r.normalizeUrl=function(e,t){let r=e.replace(/^( |\t\n|\r\n|\r|\f)*/g,"").replace(/( |\t\n|\r\n|\r|\f)*$/g,"");if(t&&/\\(\n|\r\n|\r|\f)/.test(r)&&(r=r.replace(/\\(\n|\r\n|\r|\f)/g,"")),x.test(e)){try{r=decodeURI(r)}catch(e){}return r}r=m(r);try{r=decodeURI(r)}catch(e){}return r},r.requestify=function(e,t){return/^file:/i.test(e)?(0,i.fileURLToPath)(e):"/"===e.charAt(0)?(0,n.urlToRequest)(e,t):(0,n.urlToRequest)(e)},r.getFilter=function(e,t){return(...r)=>"function"!=typeof e||e(...r,t)},r.getModulesOptions=C,r.getModulesPlugins=function(e,t){let{mode:r,getLocalIdent:i,localIdentName:c,localIdentContext:d,localIdentHashPrefix:p,localIdentRegExp:f}=e.modules,h=[];try{h=[o.default,(0,s.default)({mode:r}),(0,l.default)(),(0,u.default)({generateScopedName(e){let r;if(void 0!==i&&(r=i(t,c,m(e),{context:d,hashPrefix:p,regExp:f})),null==r){var o,s;let i,l;return o=m(e),s={context:d,hashPrefix:p,regExp:f},i="",t._module&&t._module.matchResource&&(i=`${g(a.default.relative(s.context,t._module.matchResource))}\0`),l=g(a.default.relative(s.context,t.resourcePath)),s.content=`${s.hashPrefix}${i}${l}\0${o}`,r=(0,n.interpolateName)(t,c,s),b(r).replace(/\\\[local\\]/gi,e)}return b(r)},exportGlobals:e.modules.exportGlobals})]}catch(e){t.emitError(e)}return h},r.normalizeSourceMap=function(e,t){let r=e;"string"==typeof r&&(r=JSON.parse(r)),delete r.file;let{sourceRoot:i}=r;return delete r.sourceRoot,r.sources&&(r.sources=r.sources.map(e=>{if(0===e.indexOf("<"))return e;let r=T(e);if("path-relative"===r||"path-absolute"===r){let n="path-relative"===r&&i?a.default.resolve(i,g(e)):g(e);return a.default.relative(a.default.dirname(t),n)}return e})),r},r.getPreRequester=function({loaders:e,loaderIndex:t}){let r=Object.create(null);return i=>{if(r[i])return r[i];if(!1===i)r[i]="";else{let a=e.slice(t,t+1+("number"!=typeof i?0:i)).map(e=>e.request).join("!");r[i]=`-!${a}!`}return r[i]}},r.getImportCode=function(e,t){let r="";for(let i of e){let{importName:e,url:a,icss:n}=i;t.esModule?n&&t.modules.namedExport?r+=`import ${t.modules.exportOnlyLocals?"":`${e}, `}* as ${e}_NAMED___ from ${a};
`:r+=`import ${e} from ${a};
`:r+=`var ${e} = require(${a});
`}return r?`// Imports
${r}`:""},r.getModuleCode=function(e,t,r,i,n){var o;let s;if(!0===i.modules.exportOnlyLocals)return"";let l=i.sourceMap?`,${o=e.map,(s=o?o.toJSON():null)&&(delete s.file,s.sourceRoot="",s.sources=s.sources.map(e=>{if(0===e.indexOf("<")||"path-relative"!==T(e))return e;let t=a.default.dirname(n.resourcePath),r=a.default.resolve(t,e),i=g(a.default.relative(n.rootContext,r));return`webpack://./${i}`})),JSON.stringify(s)}`:"",u=JSON.stringify(e.css),c=`var ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(${i.sourceMap?"___CSS_LOADER_API_SOURCEMAP_IMPORT___":"function(i){return i[1]}"});
`;for(let e of t){let{url:t,media:r,dedupe:i}=e;c+=t?`___CSS_LOADER_EXPORT___.push([module.id, ${JSON.stringify(`@import url(${t});`)}${r?`, ${JSON.stringify(r)}`:""}]);
`:`___CSS_LOADER_EXPORT___.i(${e.importName}${r?`, ${JSON.stringify(r)}`:i?', ""':""}${i?", true":""});
`}for(let e of r){let{replacementName:t,importName:r,localName:a}=e;if(a)u=u.replace(RegExp(t,"g"),()=>i.modules.namedExport?`" + ${r}_NAMED___[${JSON.stringify(w(a,i.modules.exportLocalsConvention))}] + "`:`" + ${r}.locals[${JSON.stringify(a)}] + "`);else{let{hash:i,needQuotes:a}=e,n=[].concat(i?[`hash: ${JSON.stringify(i)}`]:[]).concat(a?"needQuotes: true":[]),o=n.length>0?`, { ${n.join(", ")} }`:"";c+=`var ${t} = ___CSS_LOADER_GET_URL_IMPORT___(${r}${o});
`,u=u.replace(RegExp(t,"g"),()=>`" + ${t} + "`)}}return`${c}// Module
___CSS_LOADER_EXPORT___.push([module.id, ${u}, ""${l}]);
`},r.getExportCode=function(e,t,r,i){let a="// Exports\n";if(!r)return a+`${i.esModule?"export default":"module.exports ="} ___CSS_LOADER_EXPORT___;
`;let n="",o=(e,t)=>{i.modules.namedExport?n+=`export var ${e} = ${JSON.stringify(t)};
`:(n&&(n+=`,
`),n+=`	${JSON.stringify(e)}: ${JSON.stringify(t)}`)};for(let{name:t,value:r}of e)switch(i.modules.exportLocalsConvention){case"camelCase":{o(t,r);let e=f(t);e!==t&&o(e,r);break}case"camelCaseOnly":o(f(t),r);break;case"dashes":{o(t,r);let e=P(t);e!==t&&o(e,r);break}case"dashesOnly":o(P(t),r);break;default:o(t,r)}for(let e of t){let{replacementName:t,localName:r}=e;if(r){let{importName:a}=e;n=n.replace(RegExp(t,"g"),()=>i.modules.namedExport?`" + ${a}_NAMED___[${JSON.stringify(w(r,i.modules.exportLocalsConvention))}] + "`:i.modules.exportOnlyLocals?`" + ${a}[${JSON.stringify(r)}] + "`:`" + ${a}.locals[${JSON.stringify(r)}] + "`)}else n=n.replace(RegExp(t,"g"),()=>`" + ${t} + "`)}return i.modules.exportOnlyLocals?a+=i.modules.namedExport?n:`${i.esModule?"export default":"module.exports ="} {
${n}
};
`:(a+=i.modules.namedExport?n:`___CSS_LOADER_EXPORT___.locals = {${n?`
${n}
`:""}};
`,a+=`${i.esModule?"export default":"module.exports ="} ___CSS_LOADER_EXPORT___;
`)},r.resolveRequests=I,r.isUrlRequestable=function(e){return!/^\/\//.test(e)&&(!!/^file:/i.test(e)||!(/^[a-z][a-z0-9+.-]*:/i.test(e)&&!x.test(e)||/^#/.test(e)))},r.sort=function(e,t){return e.index-t.index},r.combineRequests=function(e,t){let r=t.indexOf("!=!");return -1!==r?t.slice(0,r+3)+e+t.slice(r+3):e+t},r.camelCase=f,r.WEBPACK_IGNORE_COMMENT_REGEXP=void 0;var i=e.r(792509),a=c(e.r(814747)),n=e.r(537675),o=c(e.r(322670)),s=c(e.r(472107)),l=c(e.r(423977)),u=c(e.r(182113));function c(e){return e&&e.__esModule?e:{default:e}}r.WEBPACK_IGNORE_COMMENT_REGEXP=/webpackIgnore:(\s+)?(true|false)/;let d=/[ -,.\/:-@[\]\^`{-~]/,p=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g;function f(e){let t=e.trim();return 0===t.length?"":1===t.length?t.toLowerCase():(t!==t.toLowerCase()&&(t=(e=>{let t=e,r=!1,i=!1,a=!1;for(let e=0;e<t.length;e++){let n=t[e];r&&/[\p{Lu}]/u.test(n)?(t=`${t.slice(0,e)}-${t.slice(e)}`,r=!1,a=i,i=!0,e+=1):i&&a&&/[\p{Ll}]/u.test(n)?(t=`${t.slice(0,e-1)}-${t.slice(e-1)}`,a=i,i=!1,r=!0):(r=n.toLowerCase()===n&&n.toUpperCase()!==n,a=i,i=n.toUpperCase()===n&&n.toLowerCase()!==n)}return t})(t)),t.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+([\p{Alpha}\p{N}_]|$)/gu,(e,t)=>t.toUpperCase()).replace(/\d+([\p{Alpha}\p{N}_]|$)/gu,e=>e.toUpperCase()))}let h=/\\/;function m(e){if(!h.test(e))return e;let t="";for(let r=0;r<e.length;r++){if("\\"===e[r]){let i=function(e){let t=e.toLowerCase(),r="",i=!1;for(let e=0;e<6&&void 0!==t[e];e++){let a=t.charCodeAt(e),n=a>=97&&a<=102||a>=48&&a<=57;if(i=32===a,!n)break;r+=t[e]}if(0===r.length)return;let a=parseInt(r,16);return a>=55296&&a<=57343||0===a||a>1114111?["",r.length+ +!!i]:[String.fromCodePoint(a),r.length+ +!!i]}(e.slice(r+1,r+7));if(void 0!==i){t+=i[0],r+=i[1];continue}if("\\"===e[r+1]){t+="\\",r+=1;continue}e.length===r+1&&(t+=e[r]);continue}t+=e[r]}return t}function g(e){return"\\"===a.default.sep?e.replace(/\\/g,"/"):e}let v=/[<>:"/\\|?*]/g,y=/[\u0000-\u001f\u0080-\u009f]/g;function b(e){return function(e){let t="",r=0;for(;r<e.length;){let i,a=e.charAt(r++);if(/[\t\n\f\r\x0B]/.test(a)){let e=a.charCodeAt();i=`\\${e.toString(16).toUpperCase()} `}else i="\\"===a||d.test(a)?`\\${a}`:a;t+=i}let i=e.charAt(0);return/^-[-\d]/.test(t)?t=`\\-${t.slice(1)}`:/\d/.test(i)&&(t=`\\3${i} ${t.slice(1)}`),t=t.replace(p,(e,t,r)=>t&&t.length%2?e:(t||"")+r)}(e.replace(/^((-?[0-9])|--)/,"_$1").replace(v,"-").replace(y,"-").replace(/\./g,"-"))}let x=/^[A-Z]:[/\\]|^\\\\/i;function w(e,t){return"dashesOnly"===t?P(e):f(e)}let S=/\.module(s)?\.\w+$/i,k=/\.icss\.\w+$/i;function C(e,t){let r,i=t._module&&t._module.matchResource||t.resourcePath;if(void 0===e.modules){let e=S.test(i);if(e||(r=k.test(i)),!e&&!r)return!1}else if("boolean"==typeof e.modules&&!1===e.modules)return!1;let a={compileType:r?"icss":"module",auto:!0,mode:"local",exportGlobals:!1,localIdentName:"[hash:base64]",localIdentContext:t.rootContext,localIdentHashPrefix:"",localIdentRegExp:void 0,getLocalIdent:void 0,namedExport:!1,exportLocalsConvention:"asIs",exportOnlyLocals:!1};if("boolean"==typeof e.modules||"string"==typeof e.modules)a.mode="string"==typeof e.modules?e.modules:"local";else{if(e.modules){if("boolean"==typeof e.modules.auto){if(!(e.modules.auto&&S.test(i)))return!1}else if(e.modules.auto instanceof RegExp){if(!e.modules.auto.test(i))return!1}else if("function"==typeof e.modules.auto&&!e.modules.auto(i))return!1;!0===e.modules.namedExport&&void 0===e.modules.exportLocalsConvention&&(a.exportLocalsConvention="camelCaseOnly")}a={...a,...e.modules||{}}}if("function"==typeof a.mode&&(a.mode=a.mode(t.resourcePath)),!0===a.namedExport){if(!1===e.esModule)throw Error('The "modules.namedExport" option requires the "esModules" option to be enabled');if("camelCaseOnly"!==a.exportLocalsConvention&&"dashesOnly"!==a.exportLocalsConvention)throw Error('The "modules.namedExport" option requires the "modules.exportLocalsConvention" option to be "camelCaseOnly" or "dashesOnly"')}return/\[emoji(?::(\d+))?\]/i.test(a.localIdentName)&&t.emitWarning("Emoji is deprecated and will be removed in next major release."),a}let E=/^[a-z]:[/\\]|^\\\\/i,_=/^[a-z0-9+\-.]+:/i;function T(e){return"/"===e[0]?"/"===e[1]?"scheme-relative":"path-absolute":E.test(e)?"path-absolute":_.test(e)?"absolute":"path-relative"}function P(e){return e.replace(/-+(\w)/g,(e,t)=>t.toUpperCase())}async function I(e,t,r){return e(t,r[0]).then(e=>e).catch(i=>{let[,...a]=r;if(0===a.length)throw i;return I(e,t,a)})}},617778,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,a=(i=e.r(412925))&&i.__esModule?i:{default:i},n=e.r(590275);let o=(e={})=>({postcssPlugin:"postcss-import-parser",prepare(t){let r=[];return{AtRule:{import(e){let i;try{i=function(e,t){let r,i,o,s;if("root"!==e.parent.type)return;if(e.raws&&e.raws.afterName&&e.raws.afterName.trim().length>0){let t=e.raws.afterName.lastIndexOf("/*"),r=e.raws.afterName.slice(t).match(n.WEBPACK_IGNORE_COMMENT_REGEXP);if(r&&"true"===r[2])return}let l=e.prev();if(l&&"comment"===l.type){let e=l.text.match(n.WEBPACK_IGNORE_COMMENT_REGEXP);if(e&&"true"===e[2])return}if(e.nodes){let t=Error("It looks like you didn't end your @import statement correctly. Child nodes are attached to it.");throw t.node=e,t}let{nodes:u}=(0,a.default)(e[t]);if(0===u.length||"string"!==u[0].type&&"function"!==u[0].type){let t=Error(`Unable to find uri in "${e.toString()}"`);throw t.node=e,t}if("string"===u[0].type)r=!0,i=u[0].value;else{if("url"!==u[0].value.toLowerCase()){let t=Error(`Unable to find uri in "${e.toString()}"`);throw t.node=e,t}i=(r=0!==u[0].nodes.length&&"string"===u[0].nodes[0].type)?u[0].nodes[0].value:a.default.stringify(u[0].nodes)}i=(0,n.normalizeUrl)(i,r);let c=(0,n.isUrlRequestable)(i);if(c){let e=i.split("!");e.length>1&&(i=e.pop(),o=e.join("!"))}if(0===i.trim().length){let t=Error(`Unable to find uri in "${e.toString()}"`);throw t.node=e,t}let d=u.slice(1);return d.length>0&&(s=a.default.stringify(d).trim().toLowerCase()),{atRule:e,prefix:o,url:i,media:s,isRequestable:c}}(e,"params",t)}catch(e){t.warn(e.message,{node:e.node})}i&&r.push(i)}},async OnceExit(){if(0===r.length)return;let t=await Promise.all(r.map(async t=>{let{atRule:r,isRequestable:i,prefix:a,url:o,media:s}=t;if(!e.filter||await e.filter(o,s)){if(i){let t=(0,n.requestify)(o,e.rootContext),{resolver:l,context:u}=e,c=await (0,n.resolveRequests)(l,u,[...new Set([t,o])]);if(!c)return;return r.remove(),{url:c,media:s,prefix:a,isRequestable:i}}return r.remove(),{url:o,media:s,prefix:a,isRequestable:i}}})),i=new Map;for(let r=0;r<=t.length-1;r++){let a=t[r];if(!a)continue;let{url:n,isRequestable:o,media:s}=a;if(!o){e.api.push({url:n,media:s,index:r});continue}let{prefix:l}=a,u=l?`${l}!${n}`:n,c=i.get(u);c||(c=`___CSS_LOADER_AT_RULE_IMPORT_${i.size}___`,i.set(u,c),e.imports.push({importName:c,url:e.urlHandler(u),index:r})),e.api.push({importName:c,media:s,index:r})}}}}});o.postcss=!0,r.default=o},640398,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e.r(95276),a=e.r(590275);let n=(e={})=>({postcssPlugin:"postcss-icss-parser",async OnceExit(t){let r=Object.create(null),{icssImports:n,icssExports:o}=(0,i.extractICSS)(t),s=new Map,l=[];for(let t in n){let r=n[t];if(0===Object.keys(r).length)continue;let i=t,o="",s=i.split("!");s.length>1&&(i=s.pop(),o=s.join("!"));let u=(0,a.requestify)((0,a.normalizeUrl)(i,!0),e.rootContext),c=async()=>{let{resolver:t,context:n}=e,s=await (0,a.resolveRequests)(t,n,[...new Set([i,u])]);if(s)return{url:s,prefix:o,tokens:r}};l.push(c())}let u=await Promise.all(l);for(let t=0;t<=u.length-1;t++){let i=u[t];if(!i)continue;let a=i.prefix?`${i.prefix}!${i.url}`:i.url,n=s.get(a);for(let[o,l]of(n||(n=`___CSS_LOADER_ICSS_IMPORT_${s.size}___`,s.set(a,n),e.imports.push({importName:n,url:e.urlHandler(a),icss:!0,index:t}),e.api.push({importName:n,dedupe:!0,index:t})),Object.keys(i.tokens).entries())){let a=`___CSS_LOADER_ICSS_IMPORT_${t}_REPLACEMENT_${o}___`,s=i.tokens[l];r[l]=a,e.replacements.push({replacementName:a,importName:n,localName:s})}}for(let a of(Object.keys(r).length>0&&(0,i.replaceSymbols)(t,r),Object.keys(o))){let t=(0,i.replaceValueSymbols)(o[a],r);e.exports.push({name:a,value:t})}}});n.postcss=!0,r.default=n},939761,(e,t,r)=>{"use strict";t.exports=function(e,t){return(t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e))?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes)?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e}},665728,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,a=(i=e.r(412925))&&i.__esModule?i:{default:i},n=e.r(590275);let o=/url/i,s=/^(?:-webkit-)?image-set$/i,l=/(?:url|(?:-webkit-)?image-set)\(/i;function u(e){return e.nodes&&e.nodes[0]}function c(e,t,r){if(0===e&&void 0!==r)return r;let i=t[e-1];if(!i)return;if("space"===i.type){if(!t[e-2])return;i=t[e-2]}if("comment"!==i.type)return;let a=i.value.match(n.WEBPACK_IGNORE_COMMENT_REGEXP);return a&&"true"===a[2]}function d(e,t,r){return 0===e.length?(r.warn(`Unable to find uri in '${t.toString()}'`,{node:t}),!1):!!(0,n.isUrlRequestable)(e)}let p=(e={})=>({postcssPlugin:"postcss-url-parser",prepare(t){let r=[];return{Declaration(e){let i=function(e,t,r){let i,p;if(!l.test(e[t]))return;let f=(0,a.default)(e.raws&&e.raws.value&&e.raws.value.raw?e.raws.value.raw:e[t]);if(e.raws&&e.raws.between){let t=e.raws.between.lastIndexOf("/*"),r=e.raws.between.slice(t).match(n.WEBPACK_IGNORE_COMMENT_REGEXP);r&&(i="true"===r[2])}let h=!1,m=e.prev();if(m&&"comment"===m.type){let e=m.text.match(n.WEBPACK_IGNORE_COMMENT_REGEXP);e&&(h="true"===e[2])}let g=[];return f.walk((t,l,m)=>{if("function"===t.type){if(o.test(t.value)){let o;if(p=c(l,m,i),h&&void 0===p||p){p&&(p=void 0);return}let{nodes:s}=t,v=0!==s.length&&"string"===s[0].type,y=v?s[0].value:a.default.stringify(s);if(!d(y=(0,n.normalizeUrl)(y,v),e,r))return!1;let b=y.split("!");return b.length>1&&(y=b.pop(),o=b.join("!")),g.push({declaration:e,parsed:f,node:u(t),prefix:o,url:y,needQuotes:!1}),!1}else if(s.test(t.value)){for(let[i,s]of t.nodes.entries()){let{type:l,value:m}=s;if("function"===l&&o.test(m)){let o;if(p=c(i,t.nodes),h&&void 0===p||p){p&&(p=void 0);continue}let{nodes:l}=s,m=0!==l.length&&"string"===l[0].type,v=m?l[0].value:a.default.stringify(l);if(!d(v=(0,n.normalizeUrl)(v,m),e,r))return!1;let y=v.split("!");y.length>1&&(v=y.pop(),o=y.join("!")),g.push({declaration:e,parsed:f,node:u(s),prefix:o,url:v,needQuotes:!1})}else if("string"===l){let a;if(p=c(i,t.nodes),h&&void 0===p||p){p&&(p=void 0);continue}let o=(0,n.normalizeUrl)(m,!0);if(!d(o,e,r))return!1;let l=o.split("!");l.length>1&&(o=l.pop(),a=l.join("!")),g.push({declaration:e,parsed:f,node:s,prefix:a,url:o,needQuotes:!0})}}return!1}}}),g}(e,"value",t);i&&r.push(...i)},async OnceExit(){if(0===r.length)return;let t=await Promise.all(r.map(async t=>{let{url:r}=t;if(e.filter&&!await e.filter(r))return;let[i,a,o]=r.split(/(\?)?#/),s=a?"?":"";s+=o?`#${o}`:"";let l=(0,n.requestify)(i,e.rootContext),{resolver:u,context:c}=e,d=await (0,n.resolveRequests)(u,c,[...new Set([l,r])]);if(d)return{...t,url:d,hash:s}})),i=new Map,a=new Map,o=!1;for(let r=0;r<=t.length-1;r++){let n=t[r];if(!n)continue;o||(e.imports.push({importName:"___CSS_LOADER_GET_URL_IMPORT___",url:e.urlHandler(939761),index:-1}),o=!0);let{url:s,prefix:l}=n,u=l?`${l}!${s}`:s,c=i.get(u);c||(c=`___CSS_LOADER_URL_IMPORT_${i.size}___`,i.set(u,c),e.imports.push({importName:c,url:e.urlHandler(u),index:r}));let{hash:d,needQuotes:p}=n,f=JSON.stringify({newUrl:u,hash:d,needQuotes:p}),h=a.get(f);h||(h=`___CSS_LOADER_URL_REPLACEMENT_${a.size}___`,a.set(f,h),e.replacements.push({replacementName:h,importName:c,hash:d,needQuotes:p})),n.node.type="word",n.node.value=h,n.declaration.value=n.parsed.toString()}}}}});p.postcss=!0,r.default=p},124833,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"importParser",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"icssParser",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"urlParser",{enumerable:!0,get:function(){return n.default}});var i=o(e.r(617778)),a=o(e.r(640398)),n=o(e.r(665728));function o(e){return e&&e.__esModule?e:{default:e}}},476959,(e,t,r)=>{"use strict";t.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=e(t);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r}).join("")},t.i=function(e,r,i){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(i)for(var n=0;n<this.length;n++){var o=this[n][0];null!=o&&(a[o]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);i&&a[l[0]]||(r&&(l[2]?l[2]="".concat(r," and ").concat(l[2]):l[2]=r),t.push(l))}},t}},542632,(e,t,r)=>{"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}t.exports=function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,i,a=e&&("u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=a){var n=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(r=a.next()).done)&&(n.push(r.value),4!==n.length);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(s)throw i}}return n}}(e,4)||function(e,t){if(e){if("string"==typeof e)return i(e,4);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,4)}}(e,4)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=t[1],a=t[3];if(!a)return r;if("function"==typeof btoa){var n=btoa(unescape(encodeURIComponent(JSON.stringify(a))));return[r].concat(a.sources.map(function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")})).concat(["/*# ".concat("sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n)," */")]).join("\n")}return[r].join("\n")}},71191,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=h;var i=e.r(537675),a=f(e.r(447082)),n=f(e.r(703341)),o=e.r(627511),s=e.r(348680),l=f(e.r(135416)),u=f(e.r(878064)),c=f(e.r(600845)),d=e.r(124833),p=e.r(590275);function f(e){return e&&e.__esModule?e:{default:e}}async function h(e,t,r){let f,h,m=(0,i.getOptions)(this);(0,o.validate)(c.default,m,{name:"CSS Loader",baseDataPath:"options"});let g=[],v=this.async();try{f=(0,p.normalizeOptions)(m,this)}catch(e){v(e);return}let y=[],b=[];(0,p.shouldUseModulesPlugins)(f)&&g.push(...(0,p.getModulesPlugins)(f,this));let x=[],w=[];if((0,p.shouldUseImportPlugin)(f)){let e=this.getResolve({conditionNames:["style"],extensions:[".css"],mainFields:["css","style","main","..."],mainFiles:["index","..."]});g.push((0,d.importParser)({imports:x,api:w,context:this.context,rootContext:this.rootContext,filter:(0,p.getFilter)(f.import,this.resourcePath),resolver:e,urlHandler:e=>(0,i.stringifyRequest)(this,(0,p.combineRequests)((0,p.getPreRequester)(this)(f.importLoaders),e))}))}let S=[];if((0,p.shouldUseURLPlugin)(f)){let e=this.getResolve({conditionNames:["asset"],mainFields:["asset"],mainFiles:[],extensions:[]});g.push((0,d.urlParser)({imports:S,replacements:y,context:this.context,rootContext:this.rootContext,filter:(0,p.getFilter)(f.url,this.resourcePath),resolver:e,urlHandler:e=>(0,i.stringifyRequest)(this,e)}))}let k=[],C=[],E=(0,p.shouldUseIcssPlugin)(f);if(E){let e=this.getResolve({conditionNames:["style"],extensions:[],mainFields:["css","style","main","..."],mainFiles:["index","..."]});g.push((0,d.icssParser)({imports:k,api:C,replacements:y,exports:b,context:this.context,rootContext:this.rootContext,resolver:e,urlHandler:e=>(0,i.stringifyRequest)(this,(0,p.combineRequests)((0,p.getPreRequester)(this)(f.importLoaders),e))}))}if(r){let{ast:t}=r;t&&"postcss"===t.type&&(0,s.satisfies)(t.version,`^${n.default.version}`)&&(e=t.root)}let{resourcePath:_}=this;try{h=await (0,a.default)(g).process(e,{hideNothingWarning:!0,from:_,to:_,map:!!f.sourceMap&&{prev:t?(0,p.normalizeSourceMap)(t,_):null,inline:!1,annotation:!1}})}catch(e){e.file&&this.addDependency(e.file),v("CssSyntaxError"===e.name?new l.default(e):e);return}for(let e of h.warnings())this.emitWarning(new u.default(e));let T=[].concat(k.sort(p.sort)).concat(x.sort(p.sort)).concat(S.sort(p.sort)),P=[].concat(w.sort(p.sort)).concat(C.sort(p.sort));!0!==f.modules.exportOnlyLocals&&(T.unshift({importName:"___CSS_LOADER_API_IMPORT___",url:(0,i.stringifyRequest)(this,476959)}),f.sourceMap&&T.unshift({importName:"___CSS_LOADER_API_SOURCEMAP_IMPORT___",url:(0,i.stringifyRequest)(this,542632)}));let I=(0,p.getImportCode)(T,f),A=(0,p.getModuleCode)(h,P,y,f,this),O=(0,p.getExportCode)(b,y,E,f);v(null,`${I}${A}${O}`)}},432480,(e,t,r)=>{"use strict";t.exports=e.r(71191).default},261776,(e,t,r)=>{let i=Error("Could not parse module '[project]/node_modules/@esbuild/darwin-arm64/bin/esbuild'\n\nfailed to convert rope into string\n\nCaused by:\n- invalid utf-8 sequence of 1 bytes from index 0");throw i.code="MODULE_UNPARSABLE",i},8239,e=>{e.v({name:"@esbuild/darwin-arm64",version:"0.25.0",description:"The macOS ARM 64-bit binary for esbuild, a JavaScript bundler.",repository:{type:"git",url:"git+https://github.com/evanw/esbuild.git"},license:"MIT",preferUnplugged:!0,engines:{node:">=18"},os:["darwin"],cpu:["arm64"]})},116579,(e,t,r)=>{t.exports=e.x("pnpapi",()=>require("pnpapi"))},926729,(e,t,r)=>{"use strict";var i,a,n,o,s,l,u,c=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,h={},m={analyzeMetafile:()=>eA,analyzeMetafileSync:()=>eR,build:()=>e_,buildSync:()=>eO,context:()=>eT,default:()=>eH,formatMessages:()=>eI,formatMessagesSync:()=>eF,initialize:()=>eL,stop:()=>eD,transform:()=>eP,transformSync:()=>eM,version:()=>eE};for(var g in m)c(h,g,{get:m[g],enumerable:!0});function v(e){let t=e=>{if(null===e)r.write8(0);else if("boolean"==typeof e)r.write8(1),r.write8(+e);else if("number"==typeof e)r.write8(2),r.write32(0|e);else if("string"==typeof e)r.write8(3),r.write(i(e));else if(e instanceof Uint8Array)r.write8(4),r.write(e);else if(e instanceof Array)for(let i of(r.write8(5),r.write32(e.length),e))t(i);else{let a=Object.keys(e);for(let n of(r.write8(6),r.write32(a.length),a))r.write(i(n)),t(e[n])}},r=new y;return r.write32(0),r.write32(e.id<<1|!e.isRequest),t(e.value),x(r.buf,r.len-4,0),r.buf.subarray(0,r.len)}t.exports=((e,t,r,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of p(t))f.call(e,a)||a===r||c(e,a,{get:()=>t[a],enumerable:!(i=d(t,a))||i.enumerable});return e})(c({},"__esModule",{value:!0}),h);var y=class{constructor(e=new Uint8Array(1024)){this.buf=e,this.len=0,this.ptr=0}_write(e){if(this.len+e>this.buf.length){let t=new Uint8Array((this.len+e)*2);t.set(this.buf),this.buf=t}return this.len+=e,this.len-e}write8(e){let t=this._write(1);this.buf[t]=e}write32(e){let t=this._write(4);x(this.buf,e,t)}write(e){let t=this._write(4+e.length);x(this.buf,e.length,t),this.buf.set(e,t+4)}_read(e){if(this.ptr+e>this.buf.length)throw Error("Invalid packet");return this.ptr+=e,this.ptr-e}read8(){return this.buf[this._read(1)]}read32(){return b(this.buf,this._read(4))}read(){let e=this.read32(),t=new Uint8Array(e),r=this._read(t.length);return t.set(this.buf.subarray(r,r+e)),t}};if("u">typeof TextEncoder&&"u">typeof TextDecoder){let e=new TextEncoder,t=new TextDecoder;i=t=>e.encode(t),a=e=>t.decode(e),n='new TextEncoder().encode("")'}else if("u">typeof Buffer)i=e=>Buffer.from(e),a=e=>{let{buffer:t,byteOffset:r,byteLength:i}=e;return Buffer.from(t,r,i).toString()},n='Buffer.from("")';else throw Error("No UTF-8 codec found");if(!(i("")instanceof Uint8Array))throw Error(`Invariant violation: "${n} instanceof Uint8Array" is incorrectly false

This indicates that your JavaScript environment is broken. You cannot use
esbuild in this environment because esbuild relies on this invariant. This
is not a problem with esbuild. You need to fix your environment instead.
`);function b(e,t){return e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24}function x(e,t,r){e[r++]=t,e[r++]=t>>8,e[r++]=t>>16,e[r++]=t>>24}var w=JSON.stringify,S="warning",k="silent";function C(e){if(q(e,"target"),e.indexOf(",")>=0)throw Error(`Invalid target: ${e}`);return e}var E=()=>null,_=e=>"boolean"==typeof e?null:"a boolean",T=e=>"string"==typeof e?null:"a string",P=e=>e instanceof RegExp?null:"a RegExp object",I=e=>"number"==typeof e&&e===(0|e)?null:"an integer",A=e=>"number"==typeof e&&e===(0|e)&&e>=0&&e<=65535?null:"a valid port number",O=e=>"function"==typeof e?null:"a function",M=e=>Array.isArray(e)?null:"an array",F=e=>"object"!=typeof e||null===e||Array.isArray(e)?"an object":null,R=e=>"object"==typeof e&&null!==e?null:"an array or an object",D=e=>e instanceof WebAssembly.Module?null:"a WebAssembly.Module",j=e=>"object"!=typeof e||Array.isArray(e)?"an object or null":null,L=e=>"string"==typeof e||"boolean"==typeof e?null:"a string or a boolean",B=e=>"string"!=typeof e&&("object"!=typeof e||null===e||Array.isArray(e))?"a string or an object":null,N=e=>"string"==typeof e||Array.isArray(e)?null:"a string or an array",$=e=>"string"==typeof e||e instanceof Uint8Array?null:"a string or a Uint8Array",z=e=>"string"==typeof e||e instanceof URL?null:"a string or a URL";function U(e,t,r,i){let a=e[r];if(t[r+""]=!0,void 0===a)return;let n=i(a);if(null!==n)throw Error(`${w(r)} must be ${n}`);return a}function V(e,t,r){for(let i in e)if(!(i in t))throw Error(`Invalid option ${r}: ${w(i)}`)}function H(e){let t;if(void 0!==e)for(let r in t=Object.create(null),e){let i=e[r];if("string"==typeof i||!1===i)t[r]=i;else throw Error(`Expected ${w(r)} in mangle cache to map to either a string or false`)}return t}function W(e,t,r,i,a){let n=U(t,r,"color",_),o=U(t,r,"logLevel",T),s=U(t,r,"logLimit",I);void 0!==n?e.push(`--color=${n}`):i&&e.push("--color=true"),e.push(`--log-level=${o||a}`),e.push(`--log-limit=${s||0}`)}function q(e,t,r){if("string"!=typeof e)throw Error(`Expected value for ${t}${void 0!==r?" "+w(r):""} to be a string, got ${typeof e} instead`);return e}function G(e,t,r){let i=U(t,r,"legalComments",T),a=U(t,r,"sourceRoot",T),n=U(t,r,"sourcesContent",_),o=U(t,r,"target",N),s=U(t,r,"format",T),l=U(t,r,"globalName",T),u=U(t,r,"mangleProps",P),c=U(t,r,"reserveProps",P),d=U(t,r,"mangleQuoted",_),p=U(t,r,"minify",_),f=U(t,r,"minifySyntax",_),h=U(t,r,"minifyWhitespace",_),m=U(t,r,"minifyIdentifiers",_),g=U(t,r,"lineLimit",I),v=U(t,r,"drop",M),y=U(t,r,"dropLabels",M),b=U(t,r,"charset",T),x=U(t,r,"treeShaking",_),S=U(t,r,"ignoreAnnotations",_),k=U(t,r,"jsx",T),E=U(t,r,"jsxFactory",T),A=U(t,r,"jsxFragment",T),O=U(t,r,"jsxImportSource",T),R=U(t,r,"jsxDev",_),D=U(t,r,"jsxSideEffects",_),j=U(t,r,"define",F),L=U(t,r,"logOverride",F),$=U(t,r,"supported",F),z=U(t,r,"pure",M),V=U(t,r,"keepNames",_),H=U(t,r,"platform",T),W=U(t,r,"tsconfigRaw",B);if(i&&e.push(`--legal-comments=${i}`),void 0!==a&&e.push(`--source-root=${a}`),void 0!==n&&e.push(`--sources-content=${n}`),o&&(Array.isArray(o)?e.push(`--target=${Array.from(o).map(C).join(",")}`):e.push(`--target=${C(o)}`)),s&&e.push(`--format=${s}`),l&&e.push(`--global-name=${l}`),H&&e.push(`--platform=${H}`),W&&e.push(`--tsconfig-raw=${"string"==typeof W?W:JSON.stringify(W)}`),p&&e.push("--minify"),f&&e.push("--minify-syntax"),h&&e.push("--minify-whitespace"),m&&e.push("--minify-identifiers"),g&&e.push(`--line-limit=${g}`),b&&e.push(`--charset=${b}`),void 0!==x&&e.push(`--tree-shaking=${x}`),S&&e.push("--ignore-annotations"),v)for(let t of v)e.push(`--drop:${q(t,"drop")}`);if(y&&e.push(`--drop-labels=${Array.from(y).map(e=>q(e,"dropLabels")).join(",")}`),u&&e.push(`--mangle-props=${u.source}`),c&&e.push(`--reserve-props=${c.source}`),void 0!==d&&e.push(`--mangle-quoted=${d}`),k&&e.push(`--jsx=${k}`),E&&e.push(`--jsx-factory=${E}`),A&&e.push(`--jsx-fragment=${A}`),O&&e.push(`--jsx-import-source=${O}`),R&&e.push("--jsx-dev"),D&&e.push("--jsx-side-effects"),j)for(let t in j){if(t.indexOf("=")>=0)throw Error(`Invalid define: ${t}`);e.push(`--define:${t}=${q(j[t],"define",t)}`)}if(L)for(let t in L){if(t.indexOf("=")>=0)throw Error(`Invalid log override: ${t}`);e.push(`--log-override:${t}=${q(L[t],"log override",t)}`)}if($)for(let t in $){if(t.indexOf("=")>=0)throw Error(`Invalid supported: ${t}`);let r=$[t];if("boolean"!=typeof r)throw Error(`Expected value for supported ${w(t)} to be a boolean, got ${typeof r} instead`);e.push(`--supported:${t}=${r}`)}if(z)for(let t of z)e.push(`--pure:${q(t,"pure")}`);V&&e.push("--keep-names")}function Z(e){let t={},r={didClose:!1,reason:""},n={},o=0,s=0,l=new Uint8Array(16384),u=0,c=(t,i,a)=>{if(r.didClose)return a("The service is no longer running"+r.reason,null);let s=o++;n[s]=(e,r)=>{try{a(e,r)}finally{t&&t.unref()}},t&&t.ref(),e.writeToStdin(v({id:s,isRequest:!0,value:i}))},d=(t,i)=>{if(r.didClose)throw Error("The service is no longer running"+r.reason);e.writeToStdin(v({id:t,isRequest:!1,value:i}))},p=async(r,i)=>{try{if("ping"===i.command)return void d(r,{});if("number"==typeof i.key){let e=t[i.key];if(!e)return;let a=e[i.command];if(a)return void await a(r,i)}throw Error("Invalid command: "+i.command)}catch(i){let t=[J(i,e,null,void 0,"")];try{d(r,{errors:t})}catch{}}},f=!0,h=e=>{if(f){f=!1;let t=String.fromCharCode(...e);if("0.25.0"!==t)throw Error(`Cannot start service: Host version "0.25.0" does not match binary version ${w(t)}`);return}let t=function(e){let t=()=>{switch(r.read8()){case 0:return null;case 1:return!!r.read8();case 2:return r.read32();case 3:return a(r.read());case 4:return r.read();case 5:{let e=r.read32(),i=[];for(let r=0;r<e;r++)i.push(t());return i}case 6:{let e=r.read32(),i={};for(let n=0;n<e;n++)i[a(r.read())]=t();return i}default:throw Error("Invalid packet")}},r=new y(e),i=r.read32(),n=(1&i)==0;i>>>=1;let o=t();if(r.ptr!==e.length)throw Error("Invalid packet");return{id:i,isRequest:n,value:o}}(e);if(t.isRequest)p(t.id,t.value);else{let e=n[t.id];delete n[t.id],t.value.error?e(t.value.error,{}):e(null,t.value)}};return{readFromStdout:e=>{let t=u+e.length;if(t>l.length){let e=new Uint8Array(2*t);e.set(l),l=e}l.set(e,u),u+=e.length;let r=0;for(;r+4<=u;){let e=b(l,r);if(r+4+e>u)break;r+=4,h(l.subarray(r,r+e)),r+=e}r>0&&(l.copyWithin(0,r,u),u-=r)},afterClose:e=>{r.didClose=!0,e&&(r.reason=": "+(e.message||e));let t="The service was stopped"+r.reason;for(let e in n)n[e](t,null);n={}},service:{buildOrContext:({callName:r,refs:n,options:o,isTTY:l,defaultWD:u,callback:p})=>{let f=0,h=s++,m={},g={ref(){1==++f&&n&&n.ref()},unref(){0==--f&&(delete t[h],n&&n.unref())}};t[h]=m,g.ref(),function(e,t,r,n,o,s,l,u,c,d,p){let f,h=Q(),m="context"===e,g=(e,t)=>{let i=[];try{W(i,u,{},c,S)}catch{}let a=J(e,s,h,void 0,t);r(o,{command:"error",flags:i,error:a},()=>{a.detail=h.load(a.detail),p(ee(m?"Context failed":"Build failed",[a],[]),null)})};if("object"==typeof u){let e=u.plugins;if(void 0!==e){if(!Array.isArray(e))return g(Error('"plugins" must be an array'),"");f=e}}if(f&&f.length>0)return s.isSync?g(Error("Cannot use plugins in synchronous API calls"),""):K(t,r,n,o,s,l,u,f,h).then(e=>{if(!e.ok)return g(e.error,e.pluginName);try{v(e.requestPlugins,e.runOnEndCallbacks,e.scheduleOnDisposeCallbacks)}catch(e){g(e,"")}},e=>g(e,""));try{v(null,(e,t)=>t([],[]),()=>{})}catch(e){g(e,"")}function v(f,g,v){let y,b,{entries:x,flags:w,write:k,stdinContents:C,stdinResolveDir:E,absWorkingDir:P,nodePaths:I,mangleCache:D}=function(e,t,r,a,n){var o;let s=[],l=[],u=Object.create(null),c=null,d=null;W(s,t,u,r,a),G(s,t,u);let p=U(t,u,"sourcemap",L),f=U(t,u,"bundle",_),h=U(t,u,"splitting",_),m=U(t,u,"preserveSymlinks",_),g=U(t,u,"metafile",_),v=U(t,u,"outfile",T),y=U(t,u,"outdir",T),b=U(t,u,"outbase",T),x=U(t,u,"tsconfig",T),w=U(t,u,"resolveExtensions",M),S=U(t,u,"nodePaths",M),k=U(t,u,"mainFields",M),C=U(t,u,"conditions",M),E=U(t,u,"external",M),P=U(t,u,"packages",T),I=U(t,u,"alias",F),A=U(t,u,"loader",F),O=U(t,u,"outExtension",F),D=U(t,u,"publicPath",T),j=U(t,u,"entryNames",T),B=U(t,u,"chunkNames",T),N=U(t,u,"assetNames",T),z=U(t,u,"inject",M),Z=U(t,u,"banner",F),K=U(t,u,"footer",F),Q=U(t,u,"entryPoints",R),X=U(t,u,"absWorkingDir",T),J=U(t,u,"stdin",F),Y=null!=(o=U(t,u,"write",_))?o:n,ee=U(t,u,"allowOverwrite",_),et=U(t,u,"mangleCache",F);if(u.plugins=!0,V(t,u,`in ${e}() call`),p&&s.push(`--sourcemap${!0===p?"":`=${p}`}`),f&&s.push("--bundle"),ee&&s.push("--allow-overwrite"),h&&s.push("--splitting"),m&&s.push("--preserve-symlinks"),g&&s.push("--metafile"),v&&s.push(`--outfile=${v}`),y&&s.push(`--outdir=${y}`),b&&s.push(`--outbase=${b}`),x&&s.push(`--tsconfig=${x}`),P&&s.push(`--packages=${P}`),w){let e=[];for(let t of w){if(q(t,"resolve extension"),t.indexOf(",")>=0)throw Error(`Invalid resolve extension: ${t}`);e.push(t)}s.push(`--resolve-extensions=${e.join(",")}`)}if(D&&s.push(`--public-path=${D}`),j&&s.push(`--entry-names=${j}`),B&&s.push(`--chunk-names=${B}`),N&&s.push(`--asset-names=${N}`),k){let e=[];for(let t of k){if(q(t,"main field"),t.indexOf(",")>=0)throw Error(`Invalid main field: ${t}`);e.push(t)}s.push(`--main-fields=${e.join(",")}`)}if(C){let e=[];for(let t of C){if(q(t,"condition"),t.indexOf(",")>=0)throw Error(`Invalid condition: ${t}`);e.push(t)}s.push(`--conditions=${e.join(",")}`)}if(E)for(let e of E)s.push(`--external:${q(e,"external")}`);if(I)for(let e in I){if(e.indexOf("=")>=0)throw Error(`Invalid package name in alias: ${e}`);s.push(`--alias:${e}=${q(I[e],"alias",e)}`)}if(Z)for(let e in Z){if(e.indexOf("=")>=0)throw Error(`Invalid banner file type: ${e}`);s.push(`--banner:${e}=${q(Z[e],"banner",e)}`)}if(K)for(let e in K){if(e.indexOf("=")>=0)throw Error(`Invalid footer file type: ${e}`);s.push(`--footer:${e}=${q(K[e],"footer",e)}`)}if(z)for(let e of z)s.push(`--inject:${q(e,"inject")}`);if(A)for(let e in A){if(e.indexOf("=")>=0)throw Error(`Invalid loader extension: ${e}`);s.push(`--loader:${e}=${q(A[e],"loader",e)}`)}if(O)for(let e in O){if(e.indexOf("=")>=0)throw Error(`Invalid out extension: ${e}`);s.push(`--out-extension:${e}=${q(O[e],"out extension",e)}`)}if(Q)if(Array.isArray(Q))for(let e=0,t=Q.length;e<t;e++){let t=Q[e];if("object"==typeof t&&null!==t){let r=Object.create(null),i=U(t,r,"in",T),a=U(t,r,"out",T);if(V(t,r,"in entry point at index "+e),void 0===i)throw Error('Missing property "in" for entry point at index '+e);if(void 0===a)throw Error('Missing property "out" for entry point at index '+e);l.push([a,i])}else l.push(["",q(t,"entry point at index "+e)])}else for(let e in Q)l.push([e,q(Q[e],"entry point",e)]);if(J){let e=Object.create(null),t=U(J,e,"contents",$),r=U(J,e,"resolveDir",T),a=U(J,e,"sourcefile",T),n=U(J,e,"loader",T);V(J,e,'in "stdin" object'),a&&s.push(`--sourcefile=${a}`),n&&s.push(`--loader=${n}`),r&&(d=r),"string"==typeof t?c=i(t):t instanceof Uint8Array&&(c=t)}let er=[];if(S)for(let e of S)e+="",er.push(e);return{entries:l,flags:s,write:Y,stdinContents:c,stdinResolveDir:d,absWorkingDir:X,nodePaths:er,mangleCache:H(et)}}(e,u,c,S,s.hasFS);if(k&&!s.hasFS)throw Error('The "write" option is unavailable in this environment');let j={command:"build",key:t,entries:x,flags:w,write:k,stdinContents:C,stdinResolveDir:E,absWorkingDir:P||d,nodePaths:I,context:m};f&&(j.plugins=f),D&&(j.mangleCache=D);let B=(e,t)=>{let r={errors:et(e.errors,h),warnings:et(e.warnings,h),outputFiles:void 0,metafile:void 0,mangleCache:void 0},i=r.errors.slice(),n=r.warnings.slice();e.outputFiles&&(r.outputFiles=e.outputFiles.map(en)),e.metafile&&(r.metafile=JSON.parse(e.metafile)),e.mangleCache&&(r.mangleCache=e.mangleCache),void 0!==e.writeToStdout&&console.log(a(e.writeToStdout).replace(/\n$/,"")),g(r,(e,a)=>{if(i.length>0||e.length>0)return t(ee("Build failed",i.concat(e),n.concat(a)),null,e,a);t(null,r,e,a)})};m&&(l["on-end"]=(e,t)=>new Promise(r=>{B(t,(t,i,a,o)=>{b&&b(t,i),y=void 0,b=void 0,n(e,{errors:a,warnings:o}),r()})})),r(o,j,(e,i)=>{if(e)return p(Error(e),null);if(!m)return B(i,(e,t)=>(v(),p(e,t)));if(i.errors.length>0)return p(ee("Context failed",i.errors,i.warnings),null);let a=!1;o.ref(),p(null,{rebuild:()=>(y||(y=new Promise((e,i)=>{let a;b=(t,r)=>{a||(a=()=>t?i(t):e(r))};let n=()=>{r(o,{command:"rebuild",key:t},(e,t)=>{e?i(Error(e)):a?a():n()})};n()})),y),watch:(e={})=>new Promise((i,a)=>{if(!s.hasFS)throw Error('Cannot use the "watch" API in this environment');V(e,{},"in watch() call"),r(o,{command:"watch",key:t},e=>{e?a(Error(e)):i(void 0)})}),serve:(e={})=>new Promise((i,a)=>{if(!s.hasFS)throw Error('Cannot use the "serve" API in this environment');let u={},c=U(e,u,"port",A),d=U(e,u,"host",T),p=U(e,u,"servedir",T),f=U(e,u,"keyfile",T),h=U(e,u,"certfile",T),m=U(e,u,"fallback",T),g=U(e,u,"onRequest",O);V(e,u,"in serve() call");let v={command:"serve",key:t,onRequest:!!g};void 0!==c&&(v.port=c),void 0!==d&&(v.host=d),void 0!==p&&(v.servedir=p),void 0!==f&&(v.keyfile=f),void 0!==h&&(v.certfile=h),void 0!==m&&(v.fallback=m),r(o,v,(e,t)=>{if(e)return a(Error(e));g&&(l["serve-request"]=(e,t)=>{g(t.args),n(e,{})}),i(t)})}),cancel:()=>new Promise(e=>{if(a)return e();r(o,{command:"cancel",key:t},()=>{e()})}),dispose:()=>new Promise(e=>{if(a)return e();a=!0,r(o,{command:"dispose",key:t},()=>{e(),v(),o.unref()})})})})}}(r,h,c,d,g,e,m,o,l,u,(e,t)=>{try{p(e,t)}finally{g.unref()}})},transform:({callName:t,refs:r,input:a,options:n,isTTY:o,fs:s,callback:l})=>{let u=Q(),d=d=>{try{let e,p,f,h,m,g,v,y;if("string"!=typeof a&&!(a instanceof Uint8Array))throw Error('The input to "transform" must be a string or a Uint8Array');let{flags:b,mangleCache:x}=(e=[],p=Object.create(null),W(e,n,p,o,k),G(e,n,p),f=U(n,p,"sourcemap",L),h=U(n,p,"sourcefile",T),m=U(n,p,"loader",T),g=U(n,p,"banner",T),v=U(n,p,"footer",T),y=U(n,p,"mangleCache",F),V(n,p,`in ${t}() call`),f&&e.push(`--sourcemap=${!0===f?"external":f}`),h&&e.push(`--sourcefile=${h}`),m&&e.push(`--loader=${m}`),g&&e.push(`--banner=${g}`),v&&e.push(`--footer=${v}`),{flags:e,mangleCache:H(y)}),w={command:"transform",flags:b,inputFS:null!==d,input:null!==d?i(d):"string"==typeof a?i(a):a};x&&(w.mangleCache=x),c(r,w,(e,t)=>{if(e)return l(Error(e),null);let r=et(t.errors,u),i=et(t.warnings,u),a=1,n=()=>{if(0==--a){let e={warnings:i,code:t.code,map:t.map,mangleCache:void 0,legalComments:void 0};"legalComments"in t&&(e.legalComments=null==t?void 0:t.legalComments),t.mangleCache&&(e.mangleCache=null==t?void 0:t.mangleCache),l(null,e)}};if(r.length>0)return l(ee("Transform failed",r,i),null);t.codeFS&&(a++,s.readFile(t.code,(e,r)=>{null!==e?l(e,null):(t.code=r,n())})),t.mapFS&&(a++,s.readFile(t.map,(e,r)=>{null!==e?l(e,null):(t.map=r,n())})),n()})}catch(a){let t=[];try{W(t,n,{},o,k)}catch{}let i=J(a,e,u,void 0,"");c(r,{command:"error",flags:t,error:i},()=>{i.detail=u.load(i.detail),l(ee("Transform failed",[i],[]),null)})}};if(("string"==typeof a||a instanceof Uint8Array)&&a.length>1048576){let e=d;d=()=>s.writeFile(a,e)}d(null)},formatMessages:({callName:e,refs:t,messages:r,options:i,callback:a})=>{if(!i)throw Error(`Missing second argument in ${e}() call`);let n={},o=U(i,n,"kind",T),s=U(i,n,"color",_),l=U(i,n,"terminalWidth",I);if(V(i,n,`in ${e}() call`),void 0===o)throw Error(`Missing "kind" in ${e}() call`);if("error"!==o&&"warning"!==o)throw Error(`Expected "kind" to be "error" or "warning" in ${e}() call`);let u={command:"format-msgs",messages:ei(r,"messages",null,"",l),isWarning:"warning"===o};void 0!==s&&(u.color=s),void 0!==l&&(u.terminalWidth=l),c(t,u,(e,t)=>{if(e)return a(Error(e),null);a(null,t.messages)})},analyzeMetafile:({callName:e,refs:t,metafile:r,options:i,callback:a})=>{void 0===i&&(i={});let n={},o=U(i,n,"color",_),s=U(i,n,"verbose",_);V(i,n,`in ${e}() call`);let l={command:"analyze-metafile",metafile:r};void 0!==o&&(l.color=o),void 0!==s&&(l.verbose=s),c(t,l,(e,t)=>{if(e)return a(Error(e),null);a(null,t.result)})}}}}var K=async(e,t,r,a,n,o,s,l,u)=>{let c=[],d=[],p={},f={},h=[],m=0,g=0,v=[],y=!1;for(let r of l=[...l]){let i={};if("object"!=typeof r)throw Error(`Plugin at index ${g} must be an object`);let o=U(r,i,"name",T);if("string"!=typeof o||""===o)throw Error(`Plugin at index ${g} is missing a name`);try{let l=U(r,i,"setup",O);if("function"!=typeof l)throw Error("Plugin is missing a setup function");V(r,i,`on plugin ${w(o)}`);let b={name:o,onStart:!1,onEnd:!1,onResolve:[],onLoad:[]};g++;let x=(r,i={})=>{if(!y)throw Error('Cannot call "resolve" before plugin setup has completed');if("string"!=typeof r)throw Error("The path to resolve must be a string");let n=Object.create(null),s=U(i,n,"pluginName",T),l=U(i,n,"importer",T),c=U(i,n,"namespace",T),d=U(i,n,"resolveDir",T),p=U(i,n,"kind",T),f=U(i,n,"pluginData",E),h=U(i,n,"with",F);return V(i,n,"in resolve() call"),new Promise((i,n)=>{let m={command:"resolve",path:r,key:e,pluginName:o};if(null!=s&&(m.pluginName=s),null!=l&&(m.importer=l),null!=c&&(m.namespace=c),null!=d&&(m.resolveDir=d),null!=p)m.kind=p;else throw Error('Must specify "kind" when calling "resolve"');null!=f&&(m.pluginData=u.store(f)),null!=h&&(m.with=function(e,t){let r=Object.create(null);for(let i in e){let a=e[i];if("string"!=typeof a)throw Error(`key ${w(i)} in object ${w(t)} must be a string`);r[i]=a}return r}(h,"with")),t(a,m,(e,t)=>{null!==e?n(Error(e)):i({errors:et(t.errors,u),warnings:et(t.warnings,u),path:t.path,external:t.external,sideEffects:t.sideEffects,namespace:t.namespace,suffix:t.suffix,pluginData:u.load(t.pluginData)})})})},S=l({initialOptions:s,resolve:x,onStart(e){let t=X(Error('This error came from the "onStart" callback registered here:'),n,"onStart");c.push({name:o,callback:e,note:t}),b.onStart=!0},onEnd(e){let t=X(Error('This error came from the "onEnd" callback registered here:'),n,"onEnd");d.push({name:o,callback:e,note:t}),b.onEnd=!0},onResolve(e,t){let r=X(Error('This error came from the "onResolve" callback registered here:'),n,"onResolve"),i={},a=U(e,i,"filter",P),s=U(e,i,"namespace",T);if(V(e,i,`in onResolve() call for plugin ${w(o)}`),null==a)throw Error("onResolve() call is missing a filter");let l=m++;p[l]={name:o,callback:t,note:r},b.onResolve.push({id:l,filter:a.source,namespace:s||""})},onLoad(e,t){let r=X(Error('This error came from the "onLoad" callback registered here:'),n,"onLoad"),i={},a=U(e,i,"filter",P),s=U(e,i,"namespace",T);if(V(e,i,`in onLoad() call for plugin ${w(o)}`),null==a)throw Error("onLoad() call is missing a filter");let l=m++;f[l]={name:o,callback:t,note:r},b.onLoad.push({id:l,filter:a.source,namespace:s||""})},onDispose(e){h.push(e)},esbuild:n.esbuild});S&&await S,v.push(b)}catch(e){return{ok:!1,error:e,pluginName:o}}}o["on-start"]=async(e,t)=>{u.clear();let i={errors:[],warnings:[]};await Promise.all(c.map(async({name:e,callback:t,note:r})=>{try{let r=await t();if(null!=r){if("object"!=typeof r)throw Error(`Expected onStart() callback in plugin ${w(e)} to return an object`);let t={},a=U(r,t,"errors",M),n=U(r,t,"warnings",M);V(r,t,`from onStart() callback in plugin ${w(e)}`),null!=a&&i.errors.push(...ei(a,"errors",u,e,void 0)),null!=n&&i.warnings.push(...ei(n,"warnings",u,e,void 0))}}catch(t){i.errors.push(J(t,n,u,r&&r(),e))}})),r(e,i)},o["on-resolve"]=async(e,t)=>{let i={},a="",o,s;for(let e of t.ids)try{({name:a,callback:o,note:s}=p[e]);let r=await o({path:t.path,importer:t.importer,namespace:t.namespace,resolveDir:t.resolveDir,kind:t.kind,pluginData:u.load(t.pluginData),with:t.with});if(null!=r){if("object"!=typeof r)throw Error(`Expected onResolve() callback in plugin ${w(a)} to return an object`);let t={},n=U(r,t,"pluginName",T),o=U(r,t,"path",T),s=U(r,t,"namespace",T),l=U(r,t,"suffix",T),c=U(r,t,"external",_),d=U(r,t,"sideEffects",_),p=U(r,t,"pluginData",E),f=U(r,t,"errors",M),h=U(r,t,"warnings",M),m=U(r,t,"watchFiles",M),g=U(r,t,"watchDirs",M);V(r,t,`from onResolve() callback in plugin ${w(a)}`),i.id=e,null!=n&&(i.pluginName=n),null!=o&&(i.path=o),null!=s&&(i.namespace=s),null!=l&&(i.suffix=l),null!=c&&(i.external=c),null!=d&&(i.sideEffects=d),null!=p&&(i.pluginData=u.store(p)),null!=f&&(i.errors=ei(f,"errors",u,a,void 0)),null!=h&&(i.warnings=ei(h,"warnings",u,a,void 0)),null!=m&&(i.watchFiles=ea(m,"watchFiles")),null!=g&&(i.watchDirs=ea(g,"watchDirs"));break}}catch(t){i={id:e,errors:[J(t,n,u,s&&s(),a)]};break}r(e,i)},o["on-load"]=async(e,t)=>{let a={},o="",s,l;for(let e of t.ids)try{({name:o,callback:s,note:l}=f[e]);let r=await s({path:t.path,namespace:t.namespace,suffix:t.suffix,pluginData:u.load(t.pluginData),with:t.with});if(null!=r){if("object"!=typeof r)throw Error(`Expected onLoad() callback in plugin ${w(o)} to return an object`);let t={},n=U(r,t,"pluginName",T),s=U(r,t,"contents",$),l=U(r,t,"resolveDir",T),c=U(r,t,"pluginData",E),d=U(r,t,"loader",T),p=U(r,t,"errors",M),f=U(r,t,"warnings",M),h=U(r,t,"watchFiles",M),m=U(r,t,"watchDirs",M);V(r,t,`from onLoad() callback in plugin ${w(o)}`),a.id=e,null!=n&&(a.pluginName=n),s instanceof Uint8Array?a.contents=s:null!=s&&(a.contents=i(s)),null!=l&&(a.resolveDir=l),null!=c&&(a.pluginData=u.store(c)),null!=d&&(a.loader=d),null!=p&&(a.errors=ei(p,"errors",u,o,void 0)),null!=f&&(a.warnings=ei(f,"warnings",u,o,void 0)),null!=h&&(a.watchFiles=ea(h,"watchFiles")),null!=m&&(a.watchDirs=ea(m,"watchDirs"));break}}catch(t){a={id:e,errors:[J(t,n,u,l&&l(),o)]};break}r(e,a)};let b=(e,t)=>t([],[]);return d.length>0&&(b=(e,t)=>{(async()=>{let r=[],i=[];for(let{name:t,callback:a,note:o}of d){let s,l;try{let r=await a(e);if(null!=r){if("object"!=typeof r)throw Error(`Expected onEnd() callback in plugin ${w(t)} to return an object`);let e={},i=U(r,e,"errors",M),a=U(r,e,"warnings",M);V(r,e,`from onEnd() callback in plugin ${w(t)}`),null!=i&&(s=ei(i,"errors",u,t,void 0)),null!=a&&(l=ei(a,"warnings",u,t,void 0))}}catch(e){s=[J(e,n,u,o&&o(),t)]}if(s){r.push(...s);try{e.errors.push(...s)}catch{}}if(l){i.push(...l);try{e.warnings.push(...l)}catch{}}}t(r,i)})()}),y=!0,{ok:!0,requestPlugins:v,runOnEndCallbacks:b,scheduleOnDisposeCallbacks:()=>{for(let e of h)setTimeout(()=>e(),0)}}};function Q(){let e=new Map,t=0;return{clear(){e.clear()},load:t=>e.get(t),store(r){if(void 0===r)return -1;let i=t++;return e.set(i,r),i}}}function X(e,t,r){let i,a=!1;return()=>{if(a)return i;a=!0;try{let a=(e.stack+"").split("\n");a.splice(1,1);let n=Y(t,a,r);if(n)return i={text:e.message,location:n}}catch{}}}function J(e,t,r,i,a){let n="Internal error",o=null;try{n=(e&&e.message||e)+""}catch{}try{o=Y(t,(e.stack+"").split("\n"),"")}catch{}return{id:"",pluginName:a,text:n,location:o,notes:i?[i]:[],detail:r?r.store(e):-1}}function Y(e,t,r){let a="    at ";if(e.readFileSync&&!t[0].startsWith(a)&&t[1].startsWith(a))for(let n=1;n<t.length;n++){let o=t[n];if(o.startsWith(a))for(o=o.slice(a.length);;){let a=/^(?:new |async )?\S+ \((.*)\)$/.exec(o);if(a||(a=/^eval at \S+ \((.*)\)(?:, \S+:\d+:\d+)?$/.exec(o))){o=a[1];continue}if(a=/^(\S+):(\d+):(\d+)$/.exec(o)){let n;try{n=e.readFileSync(a[1],"utf8")}catch{break}let o=n.split(/\r\n|\r|\n|\u2028|\u2029/)[a[2]-1]||"",s=a[3]-1,l=o.slice(s,s+r.length)===r?r.length:0;return{file:a[1],namespace:"file",line:+a[2],column:i(o.slice(0,s)).length,length:i(o.slice(s,s+l)).length,lineText:o+"\n"+t.slice(1).join("\n"),suggestion:""}}break}}return null}function ee(e,t,r){let i=Error(e+=t.length<1?"":` with ${t.length} error${t.length<2?"":"s"}:`+t.slice(0,6).map((e,t)=>{if(5===t)return"\n...";if(!e.location)return`
error: ${e.text}`;let{file:r,line:i,column:a}=e.location,n=e.pluginName?`[plugin: ${e.pluginName}] `:"";return`
${r}:${i}:${a}: ERROR: ${n}${e.text}`}).join(""));for(let[e,a]of[["errors",t],["warnings",r]])Object.defineProperty(i,e,{configurable:!0,enumerable:!0,get:()=>a,set:t=>Object.defineProperty(i,e,{configurable:!0,enumerable:!0,value:t})});return i}function et(e,t){for(let r of e)r.detail=t.load(r.detail);return e}function er(e,t,r){if(null==e)return null;let i={},a=U(e,i,"file",T),n=U(e,i,"namespace",T),o=U(e,i,"line",I),s=U(e,i,"column",I),l=U(e,i,"length",I),u=U(e,i,"lineText",T),c=U(e,i,"suggestion",T);if(V(e,i,t),u){let e=u.slice(0,(s&&s>0?s:0)+(l&&l>0?l:0)+(r&&r>0?r:80));/[\x7F-\uFFFF]/.test(e)||/\n/.test(u)||(u=e)}return{file:a||"",namespace:n||"",line:o||0,column:s||0,length:l||0,lineText:u||"",suggestion:c||""}}function ei(e,t,r,i,a){let n=[],o=0;for(let s of e){let e={},l=U(s,e,"id",T),u=U(s,e,"pluginName",T),c=U(s,e,"text",T),d=U(s,e,"location",j),p=U(s,e,"notes",M),f=U(s,e,"detail",E),h=`in element ${o} of "${t}"`;V(s,e,h);let m=[];if(p)for(let e of p){let t={},r=U(e,t,"text",T),i=U(e,t,"location",j);V(e,t,h),m.push({text:r||"",location:er(i,h,a)})}n.push({id:l||"",pluginName:u||i,text:c||"",location:er(d,h,a),notes:m,detail:r?r.store(f):-1}),o++}return n}function ea(e,t){let r=[];for(let i of e){if("string"!=typeof i)throw Error(`${w(t)} must be an array of strings`);r.push(i)}return r}function en({path:e,contents:t,hash:r}){let i=null;return{path:e,contents:t,hash:r,get text(){let e=this.contents;return(null===i||e!==t)&&(t=e,i=a(e)),i}}}var eo=e.r(522734),es=e.r(446786),el=e.r(814747),eu=process.env.ESBUILD_BINARY_PATH||eu,ec="@esbuild/darwin-arm64",ed="@esbuild/darwin-x64",ep={"win32 arm64 LE":"@esbuild/win32-arm64","win32 ia32 LE":"@esbuild/win32-ia32","win32 x64 LE":"@esbuild/win32-x64"},ef={"aix ppc64 BE":"@esbuild/aix-ppc64","android arm64 LE":"@esbuild/android-arm64","darwin arm64 LE":"@esbuild/darwin-arm64","darwin x64 LE":"@esbuild/darwin-x64","freebsd arm64 LE":"@esbuild/freebsd-arm64","freebsd x64 LE":"@esbuild/freebsd-x64","linux arm LE":"@esbuild/linux-arm","linux arm64 LE":"@esbuild/linux-arm64","linux ia32 LE":"@esbuild/linux-ia32","linux mips64el LE":"@esbuild/linux-mips64el","linux ppc64 LE":"@esbuild/linux-ppc64","linux riscv64 LE":"@esbuild/linux-riscv64","linux s390x BE":"@esbuild/linux-s390x","linux x64 LE":"@esbuild/linux-x64","linux loong64 LE":"@esbuild/linux-loong64","netbsd arm64 LE":"@esbuild/netbsd-arm64","netbsd x64 LE":"@esbuild/netbsd-x64","openbsd arm64 LE":"@esbuild/openbsd-arm64","openbsd x64 LE":"@esbuild/openbsd-x64","sunos x64 LE":"@esbuild/sunos-x64"},eh={"android arm LE":"@esbuild/android-arm","android x64 LE":"@esbuild/android-x64"},em=e.r(233405),eg=e.r(254799),ev=e.r(814747),ey=e.r(522734),eb=e.r(446786),ex=e.r(870722);if("0"!==process.env.ESBUILD_WORKER_THREADS){try{o=e.r(37702)}catch{}let[t,r]=process.versions.node.split(".");(12>+t||12==+t&&17>+r||13==+t&&13>+r)&&(o=void 0)}var ew=(null==(s=null==o?void 0:o.workerData)?void 0:s.esbuildVersion)==="0.25.0",eS=()=>{if(!eu&&("main.js"!==ev.basename("/ROOT/node_modules/esbuild/lib/main.js")||"lib"!==ev.basename("/ROOT/node_modules/esbuild/lib")))throw Error(`The esbuild JavaScript API cannot be bundled. Please mark the "esbuild" package as external so it's not included in the bundle.

More information: The file containing the code for esbuild's JavaScript API (/ROOT/node_modules/esbuild/lib/main.js) does not appear to be inside the esbuild package on the file system, which usually means that the esbuild package was bundled into another file. This is problematic because the API needs to run a binary executable inside the esbuild package which is located using a relative path from the API code to the executable. If the esbuild package is bundled, the relative path will be incorrect and the executable won't be found.`);{let{binPath:t,isWASM:r}=function(){let t;if(eu&&"/usr/bin/esbuild"!==eu)if(eo.existsSync(eu))return{binPath:eu,isWASM:!1};else console.warn(`[esbuild] Ignoring bad configuration: ESBUILD_BINARY_PATH=${eu}`);let{pkg:r,subpath:i,isWASM:a}=function(){let e,t,r=!1,i=`${process.platform} ${es.arch()} ${es.endianness()}`;if(i in ep)e=ep[i],t="esbuild.exe";else if(i in ef)e=ef[i],t="bin/esbuild";else if(i in eh)e=eh[i],t="bin/esbuild",r=!0;else throw Error(`Unsupported platform: ${i}`);return{pkg:e,subpath:t,isWASM:r}}();try{t=e.f({"@esbuild/darwin-arm64/README.md":{id:()=>(()=>{let e=Error("Cannot find module 'unknown module type'");throw e.code="MODULE_NOT_FOUND",e})(),module:()=>(()=>{let e=Error("Cannot find module 'unknown module type'");throw e.code="MODULE_NOT_FOUND",e})()},"@esbuild/darwin-arm64/bin/esbuild":{id:()=>261776,module:()=>e.r(261776)},"@esbuild/darwin-arm64/package.json":{id:()=>8239,module:()=>e.r(8239)},"@esbuild/darwin-arm64/package":{id:()=>8239,module:()=>e.r(8239)}}).resolve(`${r}/${i}`)}catch(a){let e;if(e=el.dirname(926729),t=el.join(e,`downloaded-${r.replace("/","-")}-${el.basename(i)}`),!eo.existsSync(t)){try{let e=Error("Cannot find module 'unknown'");throw e.code="MODULE_NOT_FOUND",e}catch{let e=function(){let e=el.dirname(el.dirname(el.dirname(926729)));if("node_modules"===el.basename(e)){for(let t in ef)try{let r=ef[t];if(eo.existsSync(el.join(e,r)))return r}catch{}for(let t in ep)try{let r=ep[t];if(eo.existsSync(el.join(e,r)))return r}catch{}}return null}();if(e){let t=`
Specifically the "${e}" package is present but this platform
needs the "${r}" package instead. People often get into this
situation by installing esbuild on Windows or macOS and copying "node_modules"
into a Docker image that runs Linux, or by copying "node_modules" between
Windows and WSL environments.

If you are installing with npm, you can try not copying the "node_modules"
directory when you copy the files over, and running "npm ci" or "npm install"
on the destination platform after the copy. Or you could consider using yarn
instead of npm which has built-in support for installing a package on multiple
platforms simultaneously.

If you are installing with yarn, you can try listing both this platform and the
other platform in your ".yarnrc.yml" file using the "supportedArchitectures"
feature: https://yarnpkg.com/configuration/yarnrc/#supportedArchitectures
Keep in mind that this means multiple copies of esbuild will be present.
`;throw(r===ed&&e===ec||r===ec&&e===ed)&&(t=`
Specifically the "${e}" package is present but this platform
needs the "${r}" package instead. People often get into this
situation by installing esbuild with npm running inside of Rosetta 2 and then
trying to use it with node running outside of Rosetta 2, or vice versa (Rosetta
2 is Apple's on-the-fly x86_64-to-arm64 translation service).

If you are installing with npm, you can try ensuring that both npm and node are
not running under Rosetta 2 and then reinstalling esbuild. This likely involves
changing how you installed npm and/or node. For example, installing node with
the universal installer here should work: https://nodejs.org/en/download/. Or
you could consider using yarn instead of npm which has built-in support for
installing a package on multiple platforms simultaneously.

If you are installing with yarn, you can try listing both "arm64" and "x64"
in your ".yarnrc.yml" file using the "supportedArchitectures" feature:
https://yarnpkg.com/configuration/yarnrc/#supportedArchitectures
Keep in mind that this means multiple copies of esbuild will be present.
`),Error(`
You installed esbuild for another platform than the one you're currently using.
This won't work because esbuild is written with native code and needs to
install a platform-specific binary executable.
${t}
Another alternative is to use the "esbuild-wasm" package instead, which works
the same way on all platforms. But it comes with a heavy performance cost and
can sometimes be 10x slower than the "esbuild" package, so you may also not
want to do that.
`)}throw Error(`The package "${r}" could not be found, and is needed by esbuild.

If you are installing esbuild with npm, make sure that you don't specify the
"--no-optional" or "--omit=optional" flags. The "optionalDependencies" feature
of "package.json" is used by esbuild to install the correct binary executable
for your current platform.`)}throw a}}if(/\.zip\//.test(t)){let n;try{n=e.r(116579)}catch(e){}if(n){let e=n.getPackageInformation(n.topLevel).packageLocation,o=el.join(e,"node_modules",".cache","esbuild",`pnpapi-${r.replace("/","-")}-0.25.0-${el.basename(i)}`);return eo.existsSync(o)||(eo.mkdirSync(el.dirname(o),{recursive:!0}),eo.copyFileSync(t,o),eo.chmodSync(o,493)),{binPath:o,isWASM:a}}}return{binPath:t,isWASM:a}}();return r?["node",[t]]:[t,[]]}},ek={readFile(e,t){try{let r=ey.readFileSync(e,"utf8");try{ey.unlinkSync(e)}catch{}t(null,r)}catch(e){t(e,null)}},writeFile(e,t){try{let r=ez();ey.writeFileSync(r,e),t(r)}catch{t(null)}}},eC={readFile(e,t){try{ey.readFile(e,"utf8",(r,i)=>{try{ey.unlink(e,()=>t(r,i))}catch{t(r,i)}})}catch(e){t(e,null)}},writeFile(e,t){try{let r=ez();ey.writeFile(r,e,e=>null!==e?t(null):t(r))}catch{t(null)}}},eE="0.25.0",e_=e=>eN().build(e),eT=e=>eN().context(e),eP=(e,t)=>eN().transform(e,t),eI=(e,t)=>eN().formatMessages(e,t),eA=(e,t)=>eN().analyzeMetafile(e,t),eO=e=>{let t;return o&&!ew?(eU||(eU=eV(o)),eU.buildSync(e)):(e$(r=>r.buildOrContext({callName:"buildSync",refs:null,options:e,isTTY:ex.isatty(2),defaultWD:eB,callback:(e,r)=>{if(e)throw e;t=r}})),t)},eM=(e,t)=>{let r;return o&&!ew?(eU||(eU=eV(o)),eU.transformSync(e,t)):(e$(i=>i.transform({callName:"transformSync",refs:null,input:e,options:t||{},isTTY:ex.isatty(2),fs:ek,callback:(e,t)=>{if(e)throw e;r=t}})),r)},eF=(e,t)=>{let r;return o&&!ew?(eU||(eU=eV(o)),eU.formatMessagesSync(e,t)):(e$(i=>i.formatMessages({callName:"formatMessagesSync",refs:null,messages:e,options:t,callback:(e,t)=>{if(e)throw e;r=t}})),r)},eR=(e,t)=>{let r;return o&&!ew?(eU||(eU=eV(o)),eU.analyzeMetafileSync(e,t)):(e$(i=>i.analyzeMetafile({callName:"analyzeMetafileSync",refs:null,metafile:"string"==typeof e?e:JSON.stringify(e),options:t,callback:(e,t)=>{if(e)throw e;r=t}})),r)},eD=()=>(u&&u(),eU&&eU.stop(),Promise.resolve()),ej=!1,eL=e=>{var t;let r,i,a,n;if(i=U(t=e||{},r=Object.create(null),"wasmURL",z),a=U(t,r,"wasmModule",D),n=U(t,r,"worker",_),V(t,r,"in initialize() call"),(e={wasmURL:i,wasmModule:a,worker:n}).wasmURL)throw Error('The "wasmURL" option only works in the browser');if(e.wasmModule)throw Error('The "wasmModule" option only works in the browser');if(e.worker)throw Error('The "worker" option only works in the browser');if(ej)throw Error('Cannot call "initialize" more than once');return eN(),ej=!0,Promise.resolve()},eB=process.cwd(),eN=()=>{if(l)return l;let[e,t]=eS(),r=em.spawn(e,t.concat("--service=0.25.0","--ping"),{windowsHide:!0,stdio:["pipe","pipe","inherit"],cwd:eB}),{readFromStdout:i,afterClose:a,service:n}=Z({writeToStdin(e){r.stdin.write(e,e=>{e&&a(e)})},readFileSync:ey.readFileSync,isSync:!1,hasFS:!0,esbuild:h});r.stdin.on("error",a),r.on("error",a);let o=r.stdin,s=r.stdout;s.on("data",i),s.on("end",a),u=()=>{o.destroy(),s.destroy(),r.kill(),ej=!1,l=void 0,u=void 0};let c=0;r.unref(),o.unref&&o.unref(),s.unref&&s.unref();let d={ref(){1==++c&&r.ref()},unref(){0==--c&&r.unref()}};return l={build:e=>new Promise((t,r)=>{n.buildOrContext({callName:"build",refs:d,options:e,isTTY:ex.isatty(2),defaultWD:eB,callback:(e,i)=>e?r(e):t(i)})}),context:e=>new Promise((t,r)=>n.buildOrContext({callName:"context",refs:d,options:e,isTTY:ex.isatty(2),defaultWD:eB,callback:(e,i)=>e?r(e):t(i)})),transform:(e,t)=>new Promise((r,i)=>n.transform({callName:"transform",refs:d,input:e,options:t||{},isTTY:ex.isatty(2),fs:eC,callback:(e,t)=>e?i(e):r(t)})),formatMessages:(e,t)=>new Promise((r,i)=>n.formatMessages({callName:"formatMessages",refs:d,messages:e,options:t,callback:(e,t)=>e?i(e):r(t)})),analyzeMetafile:(e,t)=>new Promise((r,i)=>n.analyzeMetafile({callName:"analyzeMetafile",refs:d,metafile:"string"==typeof e?e:JSON.stringify(e),options:t,callback:(e,t)=>e?i(e):r(t)}))}},e$=e=>{let[t,r]=eS(),i=new Uint8Array,{readFromStdout:a,afterClose:n,service:o}=Z({writeToStdin(e){if(0!==i.length)throw Error("Must run at most one command");i=e},isSync:!0,hasFS:!0,esbuild:h});e(o),a(em.execFileSync(t,r.concat("--service=0.25.0"),{cwd:eB,windowsHide:!0,input:i,maxBuffer:+process.env.ESBUILD_MAX_BUFFER||0x1000000})),n(null)},ez=()=>ev.join(eb.tmpdir(),`esbuild-${eg.randomBytes(32).toString("hex")}`),eU=null,eV=e=>{let{port1:t,port2:r}=new e.MessageChannel,i=new e.Worker("/ROOT/node_modules/esbuild/lib/main.js",{workerData:{workerPort:r,defaultWD:eB,esbuildVersion:"0.25.0"},transferList:[r],execArgv:[]}),a=0,n=(r,n)=>{let o=a++,s=new SharedArrayBuffer(8),l=new Int32Array(s);i.postMessage({sharedBuffer:s,id:o,command:r,args:n});let u=Atomics.wait(l,0,0);if("ok"!==u&&"not-equal"!==u)throw Error("Internal error: Atomics.wait() failed: "+u);let{message:{id:c,resolve:d,reject:p,properties:f}}=e.receiveMessageOnPort(t);if(o!==c)throw Error(`Internal error: Expected id ${o} but got id ${c}`);if(p){for(let e in f)p[e]=f[e];throw p}return d};return i.unref(),{buildSync:e=>((e=>{if(!e)return;let t=e.plugins;if(t&&t.length>0){var r;let e;throw r="Cannot use plugins in synchronous API calls",(e=Error(`Build failed with 1 error:
error: ${r}`)).errors=[{id:"",pluginName:"",text:r,location:null,notes:[],detail:void 0}],e.warnings=[],e}})(e),n("build",[e])),transformSync:(e,t)=>n("transform",[e,t]),formatMessagesSync:(e,t)=>n("formatMessages",[e,t]),analyzeMetafileSync:(e,t)=>n("analyzeMetafile",[e,t]),stop(){i.terminate(),eU=null}}};ew&&(()=>{let e=o.workerData.workerPort,t=o.parentPort,r=e=>{let t={};if(e&&"object"==typeof e)for(let r in e)t[r]=e[r];return t};try{let i=eN();eB=o.workerData.defaultWD,t.on("message",t=>{(async()=>{let{sharedBuffer:a,id:n,command:o,args:s}=t,l=new Int32Array(a);try{switch(o){case"build":e.postMessage({id:n,resolve:await i.build(s[0])});break;case"transform":e.postMessage({id:n,resolve:await i.transform(s[0],s[1])});break;case"formatMessages":e.postMessage({id:n,resolve:await i.formatMessages(s[0],s[1])});break;case"analyzeMetafile":e.postMessage({id:n,resolve:await i.analyzeMetafile(s[0],s[1])});break;default:throw Error(`Invalid command: ${o}`)}}catch(t){e.postMessage({id:n,reject:t,properties:r(t)})}Atomics.add(l,0,1),Atomics.notify(l,0,1/0)})()})}catch(i){t.on("message",t=>{let{sharedBuffer:a,id:n}=t,o=new Int32Array(a);e.postMessage({id:n,reject:i,properties:r(i)}),Atomics.add(o,0,1),Atomics.notify(o,0,1/0)})}})();var eH=h},608314,(e,t,r)=>{t.exports=e.x("typescript-279735412610ef8d",()=>require("typescript-279735412610ef8d"))},842426,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let a=e.r(926729),n=i(e.r(750227)),o=/\.ts$/i;r.default=async function(t){var r,i,s;let l=this.async(),u=this.getOptions(),{implementation:c,remotionRoot:d,...p}=u,f=n.default.join(d,"tsconfig.json");if(c&&"function"!=typeof c.transform)return void l(TypeError(`esbuild-loader: options.implementation.transform must be an ESBuild transform function. Received ${typeof c.transform}`));let h=null!=(r=null==c?void 0:c.transform)?r:a.transform,m={...p,target:null!=(i=u.target)?i:"es2015",loader:null!=(s=u.loader)?s:"js",sourcemap:this.sourceMap,sourcefile:this.resourcePath};if(!("tsconfigRaw"in m)&&(()=>{try{return!0}catch(e){return!1}})()){let t=e.r(608314);m.tsconfigRaw=t.readConfigFile(f,t.sys.readFile).config}"tsx"===m.loader&&o.test(this.resourcePath)&&(m.loader="ts");try{let{code:e,map:r}=await h(t,m);l(null,e,r&&JSON.parse(r))}catch(e){l(e)}}},699,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=(function(){var e,t;if("u">typeof self&&"$RefreshHelpers$"in self){let r=__webpack_module__.exports,i=null!=(t=null==(e=__webpack_module__.hot.data)?void 0:e.prevExports)?t:null;self.$RefreshHelpers$.registerExportsForReactRefresh(r,__webpack_module__.id),self.$RefreshHelpers$.isReactRefreshBoundary(r)?(__webpack_module__.hot.dispose(e=>{e.prevExports=r}),__webpack_module__.hot.accept(),null!==i&&(self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(i,r)?__webpack_module__.hot.invalidate():self.$RefreshHelpers$.scheduleUpdate())):null!==i&&__webpack_module__.hot.invalidate()}}).toString();i=i.slice(i.indexOf("{")+1,i.lastIndexOf("}")),r.default=function(e,t){let r=i.replace(/_a/g,"_remotion_globalVariableA").replace(/_b/g,"_remotion_globalVariableB");this.callback(null,`${e}
;${r}`,t)}},666680,(e,t,r)=>{t.exports=e.x("node:crypto",()=>require("node:crypto"))},435346,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.CaseSensitivePathsPlugin=void 0;let a=i(e.r(814747)),n="CaseSensitive";r.CaseSensitivePathsPlugin=class{constructor(){this.context="",this.cacheMap=new Map,this.deferrerMap=new Map}isCheckable(e,t,r){return"asset/inline"!==t&&e.startsWith(this.context)&&!/(\/|\\)node_modules\1/.test(e)&&e!==r}checkFileExistsWithCase(e){return new Promise((t,r)=>{let i=e,n=null,o=[];for(;i.length>this.context.length;){let t,{dir:s,base:l}=a.default.parse(i);this.cacheMap.get(s)?t=Promise.resolve(this.cacheMap.get(s)):this.deferrerMap.get(s)?t=this.deferrerMap.get(s):(t=new Promise(e=>{this.fs.readdir(s,(t,r=[])=>{this.cacheMap.set(s,r),e(r),this.deferrerMap.delete(s)})}),this.deferrerMap.set(s,t)),t.then(t=>{if(!t.includes(l)&&!n){let i=t.find(e=>e.toLowerCase()===l.toLowerCase());i&&r(n=Error(`Capitalization mismatch in \`${a.default.join(e)}\`: \`${l}\` does not match the name on disk \`${i}\``))}}),o.push(t),i=s}Promise.all(o).then(()=>{n||t(n)})})}reset(){this.cacheMap=new Map,this.deferrerMap=new Map}apply(e){this.context=e.options.context||process.cwd(),this.fs=e.inputFileSystem,e.hooks.normalModuleFactory.tap(n,e=>{e.hooks.afterResolve.tapAsync(n,(e,t)=>{var r,i;let{createData:a=e}=e;a.resource&&this.isCheckable(a.resource,a.type,null==(i=null==(r=a.resourceResolveData)?void 0:r.context)?void 0:i.issuer)?this.checkFileExistsWithCase(a.resource.replace(/\?.+$/,"").replace("\0#","#")).then(()=>t(null),e=>t(e)):t(null)})}),e.hooks.done.tap(n,()=>{this.reset()})}}},767545,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ReactFreshWebpackPlugin=void 0;let i=e.r(167530);class a extends i.RuntimeModule{constructor(){super("react refresh",5)}generate(){let{runtimeTemplate:e}=this.compilation;return i.Template.asString([`${i.RuntimeGlobals.interceptModuleExecution}.push(${e.basicFunction("options",["const originalFactory = options.factory;",`options.factory = ${e.basicFunction("moduleObject, moduleExports, webpackRequire",['const hasRefresh = typeof self !== "undefined" && !!self.$RefreshInterceptModuleExecution$;',"const cleanup = hasRefresh ? self.$RefreshInterceptModuleExecution$(moduleObject.id) : () => {};","try {",i.Template.indent("originalFactory.call(this, moduleObject, moduleExports, webpackRequire);"),"} finally {",i.Template.indent("cleanup();"),"}"])}`])})`])}}r.ReactFreshWebpackPlugin=class{apply(e){let t=parseInt(null!==i.version&&void 0!==i.version?i.version:"",10);if(t<5)throw Error(`ReactFreshWebpackPlugin does not support webpack v${t}.`);e.hooks.compilation.tap(this.constructor.name,e=>{e.mainTemplate.hooks.localVars.tap(this.constructor.name,e=>i.Template.asString([e,"","// noop fns to prevent runtime errors during initialization",'if (typeof self !== "undefined") {',i.Template.indent("self.$RefreshReg$ = function () {};"),i.Template.indent("self.$RefreshSig$ = function () {"),i.Template.indent(i.Template.indent("return function (type) {")),i.Template.indent(i.Template.indent(i.Template.indent("return type;"))),i.Template.indent(i.Template.indent("};")),i.Template.indent("};"),"}"])),e.hooks.additionalTreeRuntimeRequirements.tap(this.constructor.name,t=>{e.addRuntimeModule(t,new a)})})}}},508098,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AllowDependencyExpressionPlugin=void 0,r.AllowDependencyExpressionPlugin=class{filter(e){return!e.message.includes("the request of a dependency is an expression")}apply(e){e.hooks.afterCompile.tap("Com",e=>{e.errors=e.errors.filter(this.filter)}),e.hooks.afterEmit.tap("AllowOptionalDependenciesPlugin",e=>{e.errors=e.errors.filter(this.filter),e.warnings=e.warnings.filter(this.filter)})}}},351521,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IgnorePackFileCacheWarningsPlugin=void 0,r.IgnorePackFileCacheWarningsPlugin=class{filter(e){return!e.message.includes("Serializing big strings")}apply(e){e.hooks.afterCompile.tap("IgnorePackFileCacheWarningsPlugin",e=>{e.warnings=e.warnings.filter(this.filter)}),e.hooks.afterEmit.tap("IgnorePackFileCacheWarningsPlugin",e=>{e.warnings=e.warnings.filter(this.filter)})}}},109871,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AllowOptionalDependenciesPlugin=void 0;let i=["zod","@remotion/zod-types","react-native-reanimated","react-native-reanimated/package.json"],a=["path","fs"];r.AllowOptionalDependenciesPlugin=class{filter(e){for(let t of i)if(e.message.includes(`Can't resolve '${t}'`))return!1;for(let t of a)if(e.message.includes(`Can't resolve '${t}'`)&&e.message.includes("source-map"))return!1;return!0}apply(e){e.hooks.afterCompile.tap("Com",e=>{e.errors=e.errors.filter(this.filter)}),e.hooks.afterEmit.tap("AllowOptionalDependenciesPlugin",e=>{e.errors=e.errors.filter(this.filter),e.warnings=e.warnings.filter(this.filter)})}}},647281,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.jsonStringifyWithCircularReferences=void 0,r.jsonStringifyWithCircularReferences=e=>{let t=[],r=JSON.stringify(e,(e,r)=>{if("object"==typeof r&&null!==r&&t){if(t.includes(r))return"[Circular]";t.push(r)}return r});return t=null,r}},97769,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.cacheExists=r.clearCache=r.getWebpackCacheName=r.getWebpackCacheEnvDir=void 0;let a=i(e.r(902157)),n=i(e.r(750227)),o=e.r(440264),s=e=>{let t=e;for(;;){try{if(a.default.statSync(n.default.join(t,"package.json")).isFile())break}catch(e){}let e=n.default.dirname(t);if(t===e){t=void 0;break}t=e}return t?"1"===process.versions.pnp?n.default.resolve(t,".pnp/.cache/webpack"):"3"===process.versions.pnp?n.default.resolve(t,".yarn/.cache/webpack"):n.default.resolve(t,"node_modules/.cache/webpack"):n.default.resolve(e,".cache/webpack")},l=e=>`remotion-${e}-${o.VERSION}`;r.getWebpackCacheEnvDir=e=>l(e),r.getWebpackCacheName=(e,t)=>[(0,r.getWebpackCacheEnvDir)(e),t].join(n.default.sep),r.clearCache=(e,t)=>a.default.promises.rm(n.default.join(s(e),(0,r.getWebpackCacheEnvDir)(t)),{recursive:!0}),r.cacheExists=(e,t,i)=>a.default.existsSync(n.default.join(s(e),(0,r.getWebpackCacheName)(t,i)))?"exists":a.default.existsSync(s(e))&&(({remotionRoot:e,environment:t})=>!!a.default.readdirSync(s(e)).find(e=>e.startsWith(l(t))))({remotionRoot:e,environment:t})?"other-exists":"does-not-exist"},349327,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t}),s=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.webpackConfig=void 0;let l=e.r(666680),u=s(e.r(750227)),c=s(e.r(149579)),d=e.r(758927),p=o(e.r(167530)),f=e.r(435346),h=e.r(767545),m=e.r(508098),g=e.r(351521),v=e.r(109871),y=e.r(647281),b=e.r(97769),x=e.r(926729);if(!(null===c.default||void 0===c.default?void 0:c.default.version))throw Error('Could not find "react-dom" package. Did you install it?');let w=c.default.version.split(".")[0];if("0"===w)throw Error(`Version ${w} of "react-dom" is not supported by Remotion`);let S=!!d.NoReactInternals.ENABLE_V5_BREAKING_CHANGES||parseInt(w,10)>=18;function k(e){return!!e}r.webpackConfig=async({entry:e,userDefinedComponent:t,outDir:r,environment:i,webpackOverride:a=e=>e,onProgress:n,enableCaching:o=!0,maxTimelineTracks:s,remotionRoot:c,keyboardShortcutsEnabled:w,bufferStateDelayInMilliseconds:C,poll:E,experimentalClientSideRenderingEnabled:_,askAIEnabled:T})=>{let P={target:"chrome85",loader:"tsx",implementation:x,remotionRoot:c},I=0,A="u">typeof Bun,O=new p.default.DefinePlugin({"process.env.MAX_TIMELINE_TRACKS":s,"process.env.ASK_AI_ENABLED":T,"process.env.KEYBOARD_SHORTCUTS_ENABLED":w,"process.env.BUFFER_STATE_DELAY_IN_MILLISECONDS":C,"process.env.EXPERIMENTAL_CLIENT_SIDE_RENDERING_ENABLED":_}),M=await a({optimization:{minimize:!1},experiments:{lazyCompilation:!A&&"production"!==i&&{entries:!1}},watchOptions:{poll:null!=E?E:void 0,aggregateTimeout:0,ignored:["**/.git/**","**/.turbo/**","**/node_modules/**"]},devtool:"development"===i?"source-map":"cheap-module-source-map",entry:["development"===i?188012:null,746523,t,652088,e].filter(Boolean),mode:i,plugins:"development"===i?[new h.ReactFreshWebpackPlugin,new f.CaseSensitivePathsPlugin,new p.default.HotModuleReplacementPlugin,O,new v.AllowOptionalDependenciesPlugin,new m.AllowDependencyExpressionPlugin,new g.IgnorePackFileCacheWarningsPlugin]:[new p.ProgressPlugin(e=>{n&&(1===e&&e>I||e-I>.05)&&(I=e,n(Number((100*e).toFixed(2))))}),O,new v.AllowOptionalDependenciesPlugin,new m.AllowDependencyExpressionPlugin,new g.IgnorePackFileCacheWarningsPlugin],output:{hashFunction:"xxhash64",filename:d.NoReactInternals.bundleName,devtoolModuleFilenameTemplate:"[resource-path]",assetModuleFilename:"development"===i?"[path][name][ext]":"[hash][ext]"},resolve:{extensions:[".ts",".tsx",".web.js",".js",".jsx",".mjs",".cjs"],alias:{"react/jsx-runtime":222260,"react/jsx-dev-runtime":234997,react:347540,"remotion/no-react":u.default.resolve(49019,"..","..","esm","no-react.mjs"),remotion:u.default.resolve(49019,"..","..","esm","index.mjs"),"@remotion/media-parser/worker":u.default.resolve(500459,"..","esm","worker.mjs"),"@remotion/studio":659765,"react-dom/client":S?706381:149579}},module:{rules:[{test:/\.css$/i,use:[192165,432480],type:"javascript/auto"},{test:/\.(png|svg|jpg|jpeg|webp|gif|bmp|webm|mp4|mov|mp3|m4a|wav|aac)$/,type:"asset/resource"},{test:/\.tsx?$/,use:[{loader:842426,options:P},"development"===i?{loader:699}:null].filter(k)},{test:/\.(woff(2)?|otf|ttf|eot)(\?v=\d+\.\d+\.\d+)?$/,type:"asset/resource"},{test:/\.jsx?$/,exclude:/node_modules/,use:[{loader:842426,options:P},"development"===i?{loader:699}:null].filter(k)}]}}),F=(0,l.createHash)("md5").update((0,y.jsonStringifyWithCircularReferences)(M)).digest("hex");return[F,{...M,cache:!!o&&{type:"filesystem",name:(0,b.getWebpackCacheName)(i,F),version:F},output:{...M.output,...r?{path:r}:{}},context:c}]}},997953,(e,t,r)=>{"use strict";t.exports=e.r(442315).vendored["react-rsc"].ReactServerDOMTurbopackServer},396973,e=>{"use strict";e.s(["Player",()=>r,"PlayerInternals",()=>i,"Thumbnail",()=>a]);var t=e.i(997953);let r=(0,t.registerClientReference)(function(){throw Error("Attempted to call Player() from the server but Player is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@remotion/player/dist/esm/index.mjs <module evaluation>","Player"),i=(0,t.registerClientReference)(function(){throw Error("Attempted to call PlayerInternals() from the server but PlayerInternals is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@remotion/player/dist/esm/index.mjs <module evaluation>","PlayerInternals"),a=(0,t.registerClientReference)(function(){throw Error("Attempted to call Thumbnail() from the server but Thumbnail is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@remotion/player/dist/esm/index.mjs <module evaluation>","Thumbnail")},948394,e=>{"use strict";e.s(["Player",()=>r,"PlayerInternals",()=>i,"Thumbnail",()=>a]);var t=e.i(997953);let r=(0,t.registerClientReference)(function(){throw Error("Attempted to call Player() from the server but Player is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@remotion/player/dist/esm/index.mjs","Player"),i=(0,t.registerClientReference)(function(){throw Error("Attempted to call PlayerInternals() from the server but PlayerInternals is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@remotion/player/dist/esm/index.mjs","PlayerInternals"),a=(0,t.registerClientReference)(function(){throw Error("Attempted to call Thumbnail() from the server but Thumbnail is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@remotion/player/dist/esm/index.mjs","Thumbnail")},853987,e=>{"use strict";e.i(396973);var t=e.i(948394);e.n(t)},921224,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getBackgroundFromHoverState=r.TIMELINE_TRACK_SEPARATOR=r.LINE_COLOR=r.SELECTED_GUIDE=r.UNSELECTED_GUIDE=r.LIGHT_TRANSPARENT=r.BLUE_DISABLED=r.BLUE=r.WARNING_COLOR=r.TEXT_COLOR=r.FAIL_COLOR=r.TIMELINE_BACKGROUND=r.INPUT_BORDER_COLOR_HOVERED=r.INPUT_BORDER_COLOR_UNHOVERED=r.CLEAR_HOVER=r.VERY_LIGHT_TEXT=r.RULER_COLOR=r.LIGHT_TEXT=r.SELECTED_BACKGROUND=r.LIGHT_COLOR=r.BORDER_COLOR=r.INPUT_BACKGROUND=r.BACKGROUND__TRANSPARENT=r.BACKGROUND=void 0,r.BACKGROUND="rgb(31,36,40)",r.BACKGROUND__TRANSPARENT="rgba(31,36,40, 0)",r.INPUT_BACKGROUND="#2f363d",r.BORDER_COLOR="#000",r.LIGHT_COLOR="#ddd",r.SELECTED_BACKGROUND="hsla(0, 0%, 100%, 0.15)",r.LIGHT_TEXT="#A6A7A9",r.RULER_COLOR="#808080",r.VERY_LIGHT_TEXT="rgba(255, 255, 255, 0.3)",r.CLEAR_HOVER="rgba(255, 255, 255, 0.06)",r.INPUT_BORDER_COLOR_UNHOVERED="rgba(0, 0, 0, 0.6)",r.INPUT_BORDER_COLOR_HOVERED="rgba(255, 255, 255, 0.05)",r.TIMELINE_BACKGROUND="#111",r.FAIL_COLOR="#ff3232",r.TEXT_COLOR="#fff",r.WARNING_COLOR="#f1c40f",r.BLUE="#0b84f3",r.BLUE_DISABLED="#284f73",r.LIGHT_TRANSPARENT="rgba(255, 255, 255, 0.7)",r.UNSELECTED_GUIDE="#7e1219",r.SELECTED_GUIDE="#d22d3a",r.LINE_COLOR="#363A3E",r.TIMELINE_TRACK_SEPARATOR="rgba(0, 0, 0, 0.3)",r.getBackgroundFromHoverState=({selected:e,hovered:t})=>e?t?"hsla(0, 0%, 100%, 0.25)":r.SELECTED_BACKGROUND:t?r.CLEAR_HOVER:"transparent"},971831,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.noop=void 0,r.noop=()=>void 0},184085,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.drawRef=r.canvasRef=void 0;let i=e.r(347540);r.canvasRef=(0,i.createRef)(),r.drawRef=(0,i.createRef)()},440028,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setCurrentFps=r.getCurrentFps=r.setCurrentDuration=r.getCurrentDuration=r.setCurrentFrame=r.getCurrentFrame=r.setCurrentZoom=r.getCurrentZoom=void 0;let i=0,a=1,n=1,o=1;r.getCurrentZoom=()=>a,r.setCurrentZoom=e=>{a=e},r.getCurrentFrame=()=>i,r.setCurrentFrame=e=>{i=e},r.getCurrentDuration=()=>n,r.setCurrentDuration=e=>{n=e},r.getCurrentFps=()=>o,r.setCurrentFps=e=>{o=e}},706877,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getTimelineLayerHeight=r.TIMELINE_ITEM_BORDER_BOTTOM=r.TIMELINE_BORDER=r.TIMELINE_PADDING=void 0,r.TIMELINE_PADDING=16,r.TIMELINE_BORDER=1,r.TIMELINE_ITEM_BORDER_BOTTOM=1,r.getTimelineLayerHeight=e=>"video"===e?50:25},941826,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getXPositionOfItemInTimelineImperatively=void 0;let i=e.r(706877);r.getXPositionOfItemInTimelineImperatively=(e,t,r)=>e/(t-1)*(r-2*i.TIMELINE_PADDING)+i.TIMELINE_PADDING},9754,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimelineSliderHandle=void 0;let i=e.r(222260),a={width:20,height:20,position:"fixed",marginLeft:-8};r.TimelineSliderHandle=()=>(0,i.jsx)("div",{style:a,children:(0,i.jsx)("svg",{width:17,viewBox:"0 0 159 212",children:(0,i.jsx)("path",{d:"M17.0234375,1.07763419 L143.355469,1.07763419 C151.63974,1.07763419 158.355469,7.79336295 158.355469,16.0776342 L158.355469,69.390507 C158.355469,73.7938677 156.420655,77.9748242 153.064021,80.8248415 L89.3980057,134.881757 C83.7986799,139.635978 75.5802263,139.635978 69.9809005,134.881757 L6.66764807,81.1243622 C3.0872392,78.0843437 1.0234375,73.6246568 1.0234375,68.9277387 L1.0234375,17.0776342 C1.0234375,8.2410782 8.1868815,1.07763419 17.0234375,1.07763419 Z",fill:"#f02c00"})})})},610835,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.timelineVerticalScroll=r.scrollableRef=r.sliderAreaRef=void 0;let a=i(e.r(347540));r.sliderAreaRef=a.default.createRef(),r.scrollableRef=a.default.createRef(),r.timelineVerticalScroll=a.default.createRef()},558713,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimelineWidthProvider=r.TimelineWidthContext=void 0;let i=e.r(222260),a=e.r(853987),n=e.r(347540),o=e.r(610835);r.TimelineWidthContext=(0,n.createContext)(null),r.TimelineWidthProvider=({children:e})=>{var t;let n=a.PlayerInternals.useElementSize(o.sliderAreaRef,{triggerOnWindowResize:!1,shouldApplyCssTransforms:!0});return(0,i.jsx)(r.TimelineWidthContext.Provider,{value:null!=(t=null==n?void 0:n.width)?t:null,children:e})}},86736,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimelineSlider=r.redrawTimelineSliderFast=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(941826),s=e.r(9754),l=e.r(558713),u=e.r(440028),c=e.r(610835),d={position:"absolute",bottom:0,top:0,pointerEvents:"none"},p={height:"100vh",width:1,position:"fixed",backgroundColor:"#f02c00"};r.redrawTimelineSliderFast=(0,a.createRef)(),r.TimelineSlider=()=>{let e=n.Internals.useUnsafeVideoConfig(),t=(0,a.useContext)(l.TimelineWidthContext);return null===e||null===t?null:(0,i.jsx)(f,{})};let f=()=>{let e=(0,n.useVideoConfig)(),t=n.Internals.Timeline.useTimelinePosition(),f=(0,a.useRef)(null),h=(0,a.useContext)(l.TimelineWidthContext);if(null===h)throw Error("Unexpectedly did not have timeline width");let m=(0,a.useMemo)(()=>{let r=(0,o.getXPositionOfItemInTimelineImperatively)(t,e.durationInFrames,h);return{...d,transform:`translateX(${r}px)`}},[t,e.durationInFrames,h]);return(0,a.useImperativeHandle)(r.redrawTimelineSliderFast,()=>({draw:(e,t)=>{var r,i;let{current:a}=f;if(!a)throw Error("unexpectedly did not have ref to timelineslider");a.style.transform=`translateX(${(0,o.getXPositionOfItemInTimelineImperatively)(e,(0,u.getCurrentDuration)(),null!=(i=null!=t?t:null==(r=c.sliderAreaRef.current)?void 0:r.clientWidth)?i:0)}px)`}}),[]),(0,a.useEffect)(()=>{let e=f.current;if(!e)return;let{current:t}=c.timelineVerticalScroll;if(!t)return;let r=()=>{e.style.top=t.scrollTop+"px"};return t.addEventListener("scroll",r),()=>{t.removeEventListener("scroll",r)}},[]),(0,i.jsxs)("div",{ref:f,style:m,children:[(0,i.jsx)("div",{style:p}),(0,i.jsx)(s.TimelineSliderHandle,{})]})}},166833,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.zoomAndPreserveCursor=r.getFrameFromX=r.getFrameWhileScrollingRight=r.getFrameIncrementFromWidth=r.getScrollPositionForCursorOnRightEdge=r.getScrollPositionForCursorOnLeftEdge=r.scrollToTimelineXOffset=r.ensureFrameIsInViewport=r.isCursorInViewport=r.getFrameWhileScrollingLeft=r.canScrollTimelineIntoDirection=void 0;let i=e.r(49019),a=e.r(706877),n=e.r(86736),o=e.r(610835);r.canScrollTimelineIntoDirection=()=>{let{scrollWidth:e,scrollLeft:t,clientWidth:r}=o.scrollableRef.current;return{canScrollRight:e-t-r>a.TIMELINE_PADDING,canScrollLeft:t>a.TIMELINE_PADDING}};let s=({durationInFrames:e,width:t,scrollLeft:i})=>{var n;return(0,r.getFrameFromX)({clientX:i,durationInFrames:e,width:t,extrapolate:"clamp"})+Math.ceil(((null==(n=o.scrollableRef.current)?void 0:n.clientWidth)-a.TIMELINE_PADDING)/l(e))};r.getFrameWhileScrollingLeft=({durationInFrames:e,width:t})=>{var i,a;let n=(0,r.getFrameFromX)({clientX:(null==(i=o.scrollableRef.current)?void 0:i.scrollLeft)-200,durationInFrames:e,width:t,extrapolate:"clamp"});return Math.max(0,Math.min((0,r.getFrameFromX)({clientX:null==(a=o.scrollableRef.current)?void 0:a.scrollLeft,durationInFrames:e,width:t,extrapolate:"clamp"})-1,n))},r.isCursorInViewport=({frame:e,durationInFrames:t})=>{var i,a,n,l;let u=null!=(a=null==(i=o.scrollableRef.current)?void 0:i.scrollWidth)?a:0,c=null!=(l=null==(n=o.scrollableRef.current)?void 0:n.scrollLeft)?l:0,d=(0,r.getScrollPositionForCursorOnRightEdge)({nextFrame:e,durationInFrames:t}),p=(0,r.getScrollPositionForCursorOnLeftEdge)({nextFrame:e,durationInFrames:t}),f=s({durationInFrames:t,scrollLeft:c,width:u});return!(d>=(0,r.getScrollPositionForCursorOnRightEdge)({nextFrame:f,durationInFrames:t})||p<c)},r.ensureFrameIsInViewport=({direction:e,durationInFrames:t,frame:i})=>{var a,l,u,c,d;null==(a=n.redrawTimelineSliderFast.current)||a.draw(i);let p=null!=(u=null==(l=o.scrollableRef.current)?void 0:l.scrollWidth)?u:0,f=null!=(d=null==(c=o.scrollableRef.current)?void 0:c.scrollLeft)?d:0;if("fit-left"===e){let e=(0,r.getFrameFromX)({clientX:f,durationInFrames:t,width:p,extrapolate:"clamp"}),a=(0,r.getScrollPositionForCursorOnLeftEdge)({nextFrame:i,durationInFrames:t});a<=(0,r.getScrollPositionForCursorOnLeftEdge)({nextFrame:e,durationInFrames:t})&&(0,r.scrollToTimelineXOffset)(a)}if("fit-right"===e){let e=s({durationInFrames:t,scrollLeft:f,width:p}),a=(0,r.getScrollPositionForCursorOnRightEdge)({nextFrame:i,durationInFrames:t});a>=(0,r.getScrollPositionForCursorOnRightEdge)({nextFrame:e,durationInFrames:t})&&(0,r.scrollToTimelineXOffset)(a)}if("page-right"!==e&&"page-left"!==e||(0,r.isCursorInViewport)({frame:i,durationInFrames:t})||(0,r.scrollToTimelineXOffset)("page-left"===e?(0,r.getScrollPositionForCursorOnRightEdge)({nextFrame:i,durationInFrames:t}):(0,r.getScrollPositionForCursorOnLeftEdge)({nextFrame:i,durationInFrames:t})),"center"===e){let e=(0,r.getScrollPositionForCursorOnRightEdge)({nextFrame:i,durationInFrames:t}),a=(0,r.getScrollPositionForCursorOnLeftEdge)({nextFrame:i,durationInFrames:t});(0,r.scrollToTimelineXOffset)((a+e)/2)}},r.scrollToTimelineXOffset=e=>{var t;null==(t=o.scrollableRef.current)||t.scroll({left:e})},r.getScrollPositionForCursorOnLeftEdge=({nextFrame:e,durationInFrames:t})=>l(t)*e,r.getScrollPositionForCursorOnRightEdge=({nextFrame:e,durationInFrames:t})=>{var r,i;let n=l(t),s=(t-1-e)*n+a.TIMELINE_PADDING;return(null==(r=o.scrollableRef.current)?void 0:r.scrollWidth)-s-(null==(i=o.scrollableRef.current)?void 0:i.clientWidth)+a.TIMELINE_PADDING+4};let l=e=>{var t,i;let a=null!=(i=null==(t=o.scrollableRef.current)?void 0:t.scrollWidth)?i:0;return(0,r.getFrameIncrementFromWidth)(e,a)};r.getFrameIncrementFromWidth=(e,t)=>(t-2*a.TIMELINE_PADDING)/(e-1),r.getFrameWhileScrollingRight=({durationInFrames:e,width:t})=>{var r,i;let a=s({durationInFrames:e,width:t,scrollLeft:(null==(r=o.scrollableRef.current)?void 0:r.scrollLeft)+200}),n=s({durationInFrames:e,width:t,scrollLeft:null==(i=o.scrollableRef.current)?void 0:i.scrollLeft});return Math.min(e-1,Math.max(a,n+1))},r.getFrameFromX=({clientX:e,durationInFrames:t,width:r,extrapolate:n})=>{let o=e-a.TIMELINE_PADDING;return Math.round((0,i.interpolate)(o,[0,r-2*a.TIMELINE_PADDING],[0,t-1],{extrapolateLeft:n,extrapolateRight:n}))},r.zoomAndPreserveCursor=({oldZoom:e,newZoom:t,currentFrame:r,currentDurationInFrames:i})=>{var s,u,c;let d=t/e;if(1===d)return;let{current:p}=o.scrollableRef;if(!p)return;let f=l(i)*r+a.TIMELINE_PADDING,h=d*(f-a.TIMELINE_PADDING)+a.TIMELINE_PADDING;p.scrollLeft+=h-f,null==(s=n.redrawTimelineSliderFast.current)||s.draw(r,(null!=(c=null==(u=o.scrollableRef.current)?void 0:u.clientWidth)?c:0)*d)}},910105,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getRoute=r.reloadUrl=r.clearUrl=r.pushUrl=void 0;let i=()=>window.remotion_isReadOnlyStudio?"query-string":"spa";r.pushUrl=e=>{"query-string"===i()?window.history.pushState({},"Studio",`${window.location.pathname}?${e}`):window.history.pushState({},"Studio",e)},r.clearUrl=()=>{window.location.href=window.location.pathname},r.reloadUrl=()=>{window.location.reload()},r.getRoute=()=>"query-string"===i()?window.location.search.substring(1):window.location.pathname},401574,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deriveCanvasContentFromUrl=void 0;let i=e.r(910105);r.deriveCanvasContentFromUrl=()=>{let e=(0,i.getRoute)(),t=e.split("/").filter(Boolean),r=t[t.length-1];return"assets"===t[0]?{type:"asset",asset:decodeURIComponent(e.substring(8))}:"outputs"===t[0]?{type:"output",path:decodeURIComponent(e.substring(9))}:r?{type:"composition",compositionId:decodeURIComponent(r)}:null}},954306,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZoomPersistor=r.getZoomFromLocalStorage=void 0;let i=e.r(347540),a=e.r(49019),n=e.r(818046),o=e.r(401574);r.getZoomFromLocalStorage=()=>{let e=localStorage.getItem("remotion.zoom-map");return e?JSON.parse(e):{}},r.ZoomPersistor=()=>{let[e]=a.Internals.Timeline.usePlayingState(),{zoom:t}=(0,i.useContext)(n.TimelineZoomCtx),{canvasContent:r}=(0,i.useContext)(a.Internals.CompositionManager),s=(0,o.deriveCanvasContentFromUrl)(),l=s&&"composition"===s.type&&r&&"composition"===r.type&&s.compositionId===r.compositionId;return(0,i.useEffect)(()=>{l&&localStorage.setItem("remotion.zoom-map",JSON.stringify(t))},[t,l,e,s]),null}},818046,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimelineZoomContext=r.TimelineZoomCtx=r.TIMELINE_MAX_ZOOM=r.TIMELINE_MIN_ZOOM=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(440028),o=e.r(166833),s=e.r(954306);r.TIMELINE_MIN_ZOOM=1,r.TIMELINE_MAX_ZOOM=5,r.TimelineZoomCtx=(0,a.createContext)({zoom:{},setZoom:()=>{throw Error("has no context")}}),r.TimelineZoomContext=({children:e})=>{let[t,l]=(0,a.useState)(()=>(0,s.getZoomFromLocalStorage)()),u=(0,a.useMemo)(()=>({zoom:t,setZoom:(e,t)=>{l(i=>{var a,s;let l=Math.round(10*Math.min(r.TIMELINE_MAX_ZOOM,Math.max(r.TIMELINE_MIN_ZOOM,t(null!=(a=i[e])?a:r.TIMELINE_MIN_ZOOM))))/10;return(0,o.zoomAndPreserveCursor)({oldZoom:null!=(s=i[e])?s:r.TIMELINE_MIN_ZOOM,newZoom:l,currentDurationInFrames:(0,n.getCurrentDuration)(),currentFrame:(0,n.getCurrentFrame)()}),{...i,[e]:l}})}}),[t]);return(0,i.jsx)(r.TimelineZoomCtx.Provider,{value:u,children:e})}},521098,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.KeybindingContextProvider=r.KeybindingContext=void 0;let i=e.r(222260),a=e.r(347540);r.KeybindingContext=(0,a.createContext)({registerKeybinding:()=>{throw Error("Has no keybinding context")},unregisterKeybinding:()=>void 0,unregisterPane:()=>void 0}),r.KeybindingContextProvider=({children:e})=>{let t=(0,a.useRef)([]),n=(0,a.useCallback)(e=>{t.current=[...t.current,e],window.addEventListener(e.event,e.callback)},[]),o=(0,a.useCallback)(e=>{t.current=t.current.filter(t=>t.id!==e.id||(window.removeEventListener(e.event,e.callback),!1))},[]),s=(0,a.useCallback)(e=>{for(let r of t.current.filter(t=>t.registeredFromPane===e))o(r)},[o]),l=(0,a.useMemo)(()=>({registerKeybinding:n,unregisterKeybinding:o,unregisterPane:s}),[n,o,s]);return(0,i.jsx)(r.KeybindingContext.Provider,{value:l,children:e})}},362087,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useKeybinding=r.areKeyboardShortcutsDisabled=void 0;let i=e.r(347540),a=e.r(521098),n=e.r(260240);process.env.KEYBOARD_SHORTCUTS_ENABLED||console.warn("Keyboard shortcuts disabled either due to: a) --disable-keyboard-shortcuts being passed b) Config.setKeyboardShortcutsEnabled(false) being set or c) a Remotion version mismatch."),r.areKeyboardShortcutsDisabled=()=>!process.env.KEYBOARD_SHORTCUTS_ENABLED,r.useKeybinding=()=>{let[e]=(0,i.useState)(()=>String(Math.random())),t=(0,i.useContext)(a.KeybindingContext),{isHighestContext:r}=(0,n.useZIndex)(),o=(0,i.useCallback)(i=>{if(!process.env.KEYBOARD_SHORTCUTS_ENABLED||!r&&!i.keepRegisteredWhenNotHighestContext)return{unregister:()=>void 0};let a={registeredFromPane:e,event:i.event,key:i.key,callback:e=>{let t=window.navigator.platform.startsWith("Mac")?e.metaKey:e.ctrlKey;if(e.key&&e.key.toLowerCase()===i.key.toLowerCase()&&i.commandCtrlKey===t){if(!i.triggerIfInputFieldFocused){let{activeElement:e}=document;if(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)return}i.callback(e),i.preventDefault&&e.preventDefault()}},id:String(Math.random())};return t.registerKeybinding(a),{unregister:()=>t.unregisterKeybinding(a)}},[t,r,e]);return(0,i.useEffect)(()=>()=>{t.unregisterPane(e)},[t,e]),(0,i.useMemo)(()=>({registerKeybinding:o,isHighestContext:r}),[o,r])}},452160,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HighestZIndexProvider=r.HighestZIndexContext=void 0;let i=e.r(222260),a=e.r(347540);r.HighestZIndexContext=(0,a.createContext)({highestIndex:0,registerZIndex:()=>void 0,unregisterZIndex:()=>void 0}),r.HighestZIndexProvider=({children:e})=>{let[t,n]=(0,a.useState)([]),o=(0,a.useCallback)(e=>{n(t=>[...t,e])},[]),s=(0,a.useCallback)(e=>{n(t=>{let r=t.indexOf(e);if(-1===r)throw Error("did not find z-index "+e);return t.filter((e,t)=>t!==r)})},[]),l=Math.max(...t),u=(0,a.useMemo)(()=>({highestIndex:l,registerZIndex:o,unregisterZIndex:s}),[o,s,l]);return(0,i.jsx)(r.HighestZIndexContext.Provider,{value:u,children:e})}},83572,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setClickLock=r.getClickLock=void 0;let i=!1;r.getClickLock=()=>i,r.setClickLock=e=>{i=e}},260240,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useZIndex=r.HigherZIndex=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(362087),o=e.r(452160),s=e.r(83572),l=(0,a.createContext)({currentIndex:0}),u={margin:"auto"},c=({onEscape:e})=>{let t=(0,n.useKeybinding)();return(0,a.useEffect)(()=>{let r=t.registerKeybinding({event:"keydown",key:"Escape",callback:e,commandCtrlKey:!1,preventDefault:!0,triggerIfInputFieldFocused:!0,keepRegisteredWhenNotHighestContext:!1});return()=>{r.unregister()}},[t,e]),null};r.HigherZIndex=({children:e,onEscape:t,onOutsideClick:r,disabled:n})=>{let d=(0,a.useContext)(l),p=(0,a.useContext)(o.HighestZIndexContext),f=(0,a.useRef)(null),h=n?d.currentIndex:d.currentIndex+1;(0,a.useEffect)(()=>{if(!n)return p.registerZIndex(h),()=>p.unregisterZIndex(h)},[h,p,n]),(0,a.useEffect)(()=>{if(n)return;let e=null,t=t=>{var i;(null==(i=f.current)?void 0:i.contains(t.target))||(e=e=>{p.highestIndex===h&&!(0,s.getClickLock)()&&document.contains(e.target)&&(e.stopPropagation(),r(e.target))},window.addEventListener("pointerup",e,{once:!0}))};return requestAnimationFrame(()=>{window.addEventListener("pointerdown",t)}),()=>(e&&window.removeEventListener("pointerup",e,{once:!0}),e=null,window.removeEventListener("pointerdown",t))},[h,n,p.highestIndex,r]);let m=(0,a.useMemo)(()=>({currentIndex:h}),[h]);return(0,i.jsxs)(l.Provider,{value:m,children:[n?null:(0,i.jsx)(c,{onEscape:t}),(0,i.jsx)("div",{ref:f,style:u,children:e})]})},r.useZIndex=()=>{let e=(0,a.useContext)(l),t=(0,a.useContext)(o.HighestZIndexContext),r=t.highestIndex===e.currentIndex;return(0,a.useMemo)(()=>({currentZIndex:e.currentIndex,highestZIndex:t.highestIndex,isHighestContext:r,tabIndex:r?0:-1}),[e.currentIndex,t.highestIndex,r])}},929723,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isCompositionStill=void 0,r.isCompositionStill=e=>!!e&&1===e.durationInFrames},43557,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useIsVideoComposition=r.useIsStill=void 0;let i=e.r(347540),a=e.r(49019),n=e.r(929723);r.useIsStill=()=>{let e=a.Internals.useResolvedVideoConfig(null);return!!e&&"success"===e.type&&(0,n.isCompositionStill)(e.result)},r.useIsVideoComposition=()=>{let e=(0,r.useIsStill)(),{canvasContent:t}=(0,i.useContext)(a.Internals.CompositionManager);return null!==t&&!e&&"composition"===t.type}},321743,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useMobileLayout=void 0;let i=e.r(347540);function a(){return window.innerWidth<900}r.useMobileLayout=()=>{let[e,t]=(0,i.useState)(a()),r=(0,i.useRef)(e);return(0,i.useEffect)(()=>{function e(){a()!==r.current&&t(a()),r.current=a()}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}},262662,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ExpandedFoldersContext=r.loadExpandedFolders=r.persistExpandedFolders=r.openFolderKey=void 0;let i=e.r(347540);r.openFolderKey=({folderName:e,parentName:t})=>[null!=t?t:"no-parent",e].join("/");let a=e=>"compositions"===e?"remotion.expandedFolders":"remotion.expandedAssetFolders";r.persistExpandedFolders=(e,t)=>{window.localStorage.setItem(a(e),JSON.stringify(t))},r.loadExpandedFolders=e=>{let t=window.localStorage.getItem(a(e));return null===t?{}:JSON.parse(t)},r.ExpandedFoldersContext=(0,i.createContext)({toggleFolder:()=>{},foldersExpanded:{},setFoldersExpanded:()=>{}})},873273,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FolderContextProvider=r.FolderContext=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(262662);r.FolderContext=(0,a.createContext)({compositionFoldersExpanded:{},setCompositionFoldersExpanded:()=>{throw Error("default state")},assetFoldersExpanded:{},setAssetFoldersExpanded:()=>{throw Error("default state")}}),r.FolderContextProvider=({children:e})=>{let[t,o]=(0,a.useState)(()=>(0,n.loadExpandedFolders)("compositions")),[s,l]=(0,a.useState)(()=>(0,n.loadExpandedFolders)("assets")),u=(0,a.useMemo)(()=>({compositionFoldersExpanded:t,setCompositionFoldersExpanded:o,assetFoldersExpanded:s,setAssetFoldersExpanded:l}),[s,t]);return(0,i.jsx)(r.FolderContext.Provider,{value:u,children:e})}},839270,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SidebarContextProvider=r.SidebarContext=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(321743),o=e=>"right"===e?"remotion.sidebarRightCollapsing":"remotion.sidebarCollapsing",s=(e,t)=>{window.localStorage.setItem(o(t),e)};r.SidebarContext=(0,a.createContext)({sidebarCollapsedStateLeft:"collapsed",setSidebarCollapsedState:()=>{throw Error("sidebar collapsed state")},sidebarCollapsedStateRight:"collapsed"}),r.SidebarContextProvider=({children:e})=>{let t=(0,n.useMobileLayout)(),[l,u]=(0,a.useState)(()=>({left:((e=!1)=>{let t=window.localStorage.getItem(o("left"));return e||"collapsed"===t?"collapsed":"expanded"===t?"expanded":"responsive"})(t),right:((e=!1)=>{let t=window.localStorage.getItem(o("right"));return e?"collapsed":"expanded"===t?"expanded":"collapsed"})(t)})),c=(0,a.useMemo)(()=>({sidebarCollapsedStateLeft:l.left,sidebarCollapsedStateRight:l.right,setSidebarCollapsedState:e=>{let{left:t,right:r}=e;u(e=>{let i={...e};if(t){let r="function"==typeof t?t(e.left):t;s(r,"left"),i.left=r}if(r){let t="function"==typeof r?r(e.right):r;s(t,"right"),i.right=t}return i})}}),[l]);return(0,i.jsx)(r.SidebarContext.Provider,{value:c,children:e})}},937672,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createFolderTree=r.splitParentIntoNameAndParent=r.buildAssetFolderStructure=void 0;let i=e.r(262662);r.buildAssetFolderStructure=(e,t,i)=>{let a=e.filter(e=>!e.name.includes("/")),n=e.filter(e=>e.name.includes("/")),o={};for(let e of n){let t=e.name.split("/")[0];o[t]||(o[t]=[]),o[t].push(e)}return{files:a,folders:Object.keys(o).map(e=>{var a;let n=o[e].map(t=>({...t,name:t.name.substring(e.length+1)})),s=null!=(a=i[[t,e].filter(Boolean).join("/")])&&a;return{name:e,items:(0,r.buildAssetFolderStructure)(n,[t,e].filter(Boolean).join("/"),i),expanded:s}})}},r.splitParentIntoNameAndParent=e=>{if(null===e)return{name:null,parent:null};let t=e.split("/"),r=t[t.length-1],i=t.slice(0,t.length-1);return{name:r,parent:0===i.length?null:i.join("/")}};let a=(e,t,r)=>{for(let i of e)if("folder"===i.type){if(i.folderName===t&&i.parentName===r)return i.items;let e=a(i.items,t,r);if(!1!==e)return e}return!1},n=(e,t,r)=>{if(null===t)return e;let i=a(e,t,r);if(!i)throw console.log({items:e,folderName:t,parentName:r}),Error("did not find folder "+t);return i},o=(e,t,s,l)=>{var u;if(a(e,s.name,s.parent))return;let c=(0,r.splitParentIntoNameAndParent)(s.parent);if(s.parent){let r=t.find(e=>e.name===c.name&&e.parent===c.parent);if(!r)throw Error("unexpectedly did not have parent");o(e,t,r,l)}let d=n(e,c.name,c.parent);if(!d)throw Error("why did folder not exist? "+s.name);d.push({type:"folder",folderName:s.name,items:[],key:s.name,expanded:null!=(u=l[(0,i.openFolderKey)({folderName:s.name,parentName:s.parent})])&&u,parentName:s.parent})};r.createFolderTree=(e,t,r)=>{let a=[],s=[];for(let e of t){let n=(0,i.openFolderKey)({folderName:e.name,parentName:e.parent});if(s.includes(n)){if(e.parent)throw Error(`Multiple folders with the name ${e.name} inside the folder ${e.parent} exist. Folder names must be unique.`);throw Error("Multiple folders with the name "+e.name+" exist. Folder names must be unique.")}s.push(n),o(a,t,e,r)}for(let t of e){let e={type:"composition",composition:t,key:t.id};n(a,t.folderName,t.parentFolderName).push(e)}return a}},681504,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ExpandedFolderIconSolid=r.ExpandedFolderIcon=r.CollapsedFolderIcon=void 0;let i=e.r(222260);r.CollapsedFolderIcon=({color:e,...t})=>(0,i.jsx)("svg",{viewBox:"0 0 512 512",...t,children:(0,i.jsx)("path",{fill:e,d:"M447.1 96H272L226.7 50.75C214.7 38.74 198.5 32 181.5 32H63.1c-35.35 0-64 28.65-64 64v320c0 35.35 28.65 64 64 64h384c35.35 0 64-28.65 64-64V160C511.1 124.7 483.3 96 447.1 96zM480 416c0 17.64-14.36 32-32 32H64c-17.64 0-32-14.36-32-32V96c0-17.64 14.36-32 32-32h117.5c8.549 0 16.58 3.328 22.63 9.375L258.7 128H448c17.64 0 32 14.36 32 32V416z"})}),r.ExpandedFolderIcon=({color:e,...t})=>(0,i.jsx)("svg",{viewBox:"0 0 576 512",...t,children:(0,i.jsx)("path",{fill:e,d:"M566.6 211.6C557.5 199.1 543.4 192 527.1 192H134.2C114.3 192 96.2 204.5 89.23 223.1L32 375.8V96c0-17.64 14.36-32 32-32h117.5c8.549 0 16.58 3.328 22.63 9.375L258.7 128H448c17.64 0 32 14.36 32 32h32c0-35.35-28.65-64-64-64H272L226.7 50.75C214.7 38.74 198.5 32 181.5 32H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h403.1c21.11 0 39.53-13.53 45.81-33.69l60-192C578.4 239.6 575.8 224 566.6 211.6zM543.2 244.8l-60 192C481.1 443.5 475 448 467.1 448H64c-3.322 0-6.357-.9551-9.373-1.898c-2.184-1.17-4.109-2.832-5.596-4.977c-3.031-4.375-3.703-9.75-1.828-14.73l72-192C121.5 228.2 127.5 224 134.2 224h393.8c5.141 0 9.844 2.375 12.89 6.516C543.9 234.7 544.8 239.9 543.2 244.8z"})}),r.ExpandedFolderIconSolid=({color:e,...t})=>(0,i.jsx)("svg",{viewBox:"0 0 576 512",...t,children:(0,i.jsx)("path",{fill:e,d:"M384 480h48c11.4 0 21.9-6 27.6-15.9l112-192c5.8-9.9 5.8-22.1 .1-32.1S555.5 224 544 224H144c-11.4 0-21.9 6-27.6 15.9L48 357.1V96c0-8.8 7.2-16 16-16H181.5c4.2 0 8.3 1.7 11.3 4.7l26.5 26.5c21 21 49.5 32.8 79.2 32.8H416c8.8 0 16 7.2 16 16v32h48V160c0-35.3-28.7-64-64-64H298.5c-17 0-33.3-6.7-45.3-18.7L226.7 50.7c-12-12-28.3-18.7-45.3-18.7H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H87.7 384z"})})},449149,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StillIcon=void 0;let i=e.r(222260);r.StillIcon=({color:e,...t})=>(0,i.jsx)("svg",{...t,viewBox:"0 0 512 512",children:(0,i.jsx)("path",{fill:e,d:"M144 288C144 226.1 194.1 176 256 176C317.9 176 368 226.1 368 288C368 349.9 317.9 400 256 400C194.1 400 144 349.9 144 288zM256 208C211.8 208 176 243.8 176 288C176 332.2 211.8 368 256 368C300.2 368 336 332.2 336 288C336 243.8 300.2 208 256 208zM362.9 64.82L373.3 96H448C483.3 96 512 124.7 512 160V416C512 451.3 483.3 480 448 480H64C28.65 480 0 451.3 0 416V160C0 124.7 28.65 96 64 96H138.7L149.1 64.82C155.6 45.22 173.9 32 194.6 32H317.4C338.1 32 356.4 45.22 362.9 64.82H362.9zM64 128C46.33 128 32 142.3 32 160V416C32 433.7 46.33 448 64 448H448C465.7 448 480 433.7 480 416V160C480 142.3 465.7 128 448 128H350.3L332.6 74.94C330.4 68.41 324.3 64 317.4 64H194.6C187.7 64 181.6 68.41 179.4 74.94L161.7 128H64z"})})},511462,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FilmIcon=void 0;let i=e.r(222260);r.FilmIcon=({color:e,...t})=>(0,i.jsx)("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:(0,i.jsx)("path",{fill:e,d:"M448 32H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h384c35.35 0 64-28.65 64-64V96C512 60.65 483.3 32 448 32zM384 64v176H128V64H384zM32 96c0-17.64 14.36-32 32-32h32v80H32V96zM32 176h64v64H32V176zM32 272h64v64H32V272zM64 448c-17.64 0-32-14.36-32-32v-48h64V448H64zM128 448V272h256V448H128zM480 416c0 17.64-14.36 32-32 32h-32v-80h64V416zM480 336h-64v-64h64V336zM480 240h-64v-64h64V240zM480 144h-64V64h32c17.64 0 32 14.36 32 32V144z"})})},137798,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ModalsContext=void 0,r.ModalsContext=(0,e.r(347540).createContext)({selectedModal:null,setSelectedModal:()=>void 0})},831069,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Notification=void 0;let i=e.r(222260),a=e.r(347540),n={backgroundColor:"#111111",color:"white",fontFamily:"Arial, Helvetica, sans-serif",display:"inline-flex",padding:"8px 14px",borderRadius:4,fontSize:15,border:"0.25px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 2px 3px rgba(0, 0, 0, 1)",marginTop:3,marginBottom:3,alignItems:"center"};r.Notification=({children:e,id:t,duration:r,created:o,onRemove:s})=>((0,a.useEffect)(()=>{if(null===r)return;let e=setTimeout(()=>{s(t)},r-(Date.now()-o));return()=>{clearTimeout(e)}},[o,r,t,s]),(0,i.jsx)("div",{className:"css-reset",style:n,children:e}))},277984,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NotificationCenter=r.showNotification=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(831069),o={position:"absolute",justifyContent:"center",alignItems:"center",display:"flex",width:"100%",flexDirection:"column",paddingTop:20,pointerEvents:"none",backgroundColor:"transparent"},s=(0,a.createRef)();r.showNotification=(e,t)=>s.current.addNotification({content:e,duration:t,created:Date.now(),id:String(Math.random()).replace("0.","")}),r.NotificationCenter=()=>{let[e,t]=(0,a.useState)([]),r=(0,a.useCallback)(e=>{t(t=>t.filter(t=>t.id!==e))},[]),l=(0,a.useCallback)(e=>(t(t=>[...t,e]),{replaceContent:(r,i)=>{t(t=>t.map(t=>t.id===e.id?{...t,duration:i,content:r,created:Date.now()}:t))}}),[]);return(0,a.useImperativeHandle)(s,()=>({addNotification:l}),[l]),(0,i.jsx)("div",{style:o,children:e.map(e=>(0,i.jsx)(n.Notification,{created:e.created,duration:e.duration,id:e.id,onRemove:r,children:e.content},e.id))})}},546040,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i={};r.default=async e=>{if(i[e])return;i[e]=!0;let t=new Audio("/beep.wav");try{await t.play()}catch(e){throw console.error("Error playing beep sound:",e),e}}},981990,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.cancelAbortController=r.deleteAbortController=r.getAbortController=r.generateJobId=r.cleanupCompositionForJob=r.getCompositionForJob=r.registerCompositionForJob=void 0;let i=new Map;r.registerCompositionForJob=(e,t)=>{i.set(e,t)},r.getCompositionForJob=e=>i.get(e),r.cleanupCompositionForJob=e=>{i.delete(e)},r.generateJobId=()=>`client-${Date.now()}-${Math.random().toString(36).substring(2,11)}`;let a=new Map;r.getAbortController=e=>{let t=a.get(e);return t||(t=new AbortController,a.set(e,t)),t},r.deleteAbortController=e=>{a.delete(e)},r.cancelAbortController=e=>{let t=a.get(e);t&&t.abort()}},896509,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t});Object.defineProperty(r,"__esModule",{value:!0}),r.RenderQueueContextProvider=r.renderJobsRef=r.RenderQueueContext=r.isClientRenderJob=void 0;let s=e.r(222260),l=o(e.r(347540)),u=e.r(981990);r.isClientRenderJob=e=>"client-still"===e.type||"client-video"===e.type;let c=()=>"",d=()=>void 0;r.RenderQueueContext=l.default.createContext({jobs:[],serverJobs:[],clientJobs:[],addClientStillJob:c,addClientVideoJob:c,updateClientJobProgress:d,markClientJobDone:d,markClientJobFailed:d,markClientJobCancelled:d,removeClientJob:d,cancelClientJob:d,setProcessJobCallback:d,getAbortController:()=>new AbortController,getCompositionForJob:()=>void 0}),r.renderJobsRef=(0,l.createRef)(),r.RenderQueueContextProvider=({children:e})=>{var t;let[i,a]=(0,l.useState)(null!=(t=window.remotion_initialRenderQueue)?t:[]),[n,o]=(0,l.useState)([]),[c,d]=(0,l.useState)(null),p=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(c)return;let e=n.find(e=>"idle"===e.status);e&&p.current&&(d(e.id),o(t=>t.map(t=>t.id===e.id?{...t,status:"running",progress:{renderedFrames:0,encodedFrames:0,totalFrames:0}}:t)),p.current(e))},[n,c]);let f=(0,l.useCallback)((e,t)=>{let r=(0,u.generateJobId)();(0,u.registerCompositionForJob)(r,t);let i={...e,id:r,startedAt:Date.now(),status:"idle"};return o(e=>[...e,i]),r},[]),h=(0,l.useCallback)((e,t)=>{let r=(0,u.generateJobId)();(0,u.registerCompositionForJob)(r,t);let i={...e,id:r,startedAt:Date.now(),status:"idle"};return o(e=>[...e,i]),r},[]),m=(0,l.useCallback)((e,t)=>{o(r=>r.map(r=>r.id===e?{...r,status:"running",progress:t}:r))},[]),g=(0,l.useCallback)((e,t,r)=>{(0,u.deleteAbortController)(e),(0,u.cleanupCompositionForJob)(e),o(i=>i.map(i=>i.id===e?{...i,status:"done",getBlob:t,metadata:r}:i)),d(null)},[]),v=(0,l.useCallback)((e,t)=>{(0,u.deleteAbortController)(e),(0,u.cleanupCompositionForJob)(e),o(r=>r.map(r=>r.id===e?{...r,status:"failed",error:{message:t.message,stack:t.stack}}:r)),d(null)},[]),y=(0,l.useCallback)(e=>{(0,u.deleteAbortController)(e),(0,u.cleanupCompositionForJob)(e),o(t=>t.map(t=>t.id===e?{...t,status:"cancelled"}:t)),d(null)},[]),b=(0,l.useCallback)(e=>{o(t=>{let r=t.find(t=>t.id===e);return(null==r?void 0:r.status)==="running"?t:((0,u.deleteAbortController)(e),(0,u.cleanupCompositionForJob)(e),t.filter(t=>t.id!==e))})},[]),x=(0,l.useCallback)(e=>{(0,u.cancelAbortController)(e)},[]),w=(0,l.useCallback)(e=>{p.current=e},[]);(0,l.useImperativeHandle)(r.renderJobsRef,()=>({updateRenderJobs:e=>{a(e)}}),[]);let S=(0,l.useMemo)(()=>({jobs:[...i,...n],serverJobs:i,clientJobs:n,addClientStillJob:f,addClientVideoJob:h,updateClientJobProgress:m,markClientJobDone:g,markClientJobFailed:v,markClientJobCancelled:y,removeClientJob:b,cancelClientJob:x,setProcessJobCallback:w,getAbortController:u.getAbortController,getCompositionForJob:u.getCompositionForJob}),[i,n,f,h,m,g,v,y,b,x,w]);return(0,s.jsx)(r.RenderQueueContext.Provider,{value:S,children:e})}},850586,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t}),s=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.PreviewServerConnection=r.StudioServerConnectionCtx=void 0;let l=e.r(222260),u=o(e.r(347540)),c=e.r(49019),d=e.r(277984),p=s(e.r(546040)),f=e.r(896509),h=e.r(910105);r.StudioServerConnectionCtx=u.default.createContext({previewServerState:{type:"init"},subscribeToEvent:()=>{throw Error("Context not initalized")}}),r.PreviewServerConnection=({children:e,readOnlyStudio:t})=>{let i=(0,u.useRef)([]),a=(0,u.useCallback)((e,t)=>(i.current.push({type:e,listener:t}),()=>{i.current=i.current.filter(r=>r.type!==e||r.listener!==t)}),[]),n=(0,u.useCallback)(()=>{let e=new EventSource("/events");return e.addEventListener("message",e=>{var t;let r=JSON.parse(e.data);if(("new-input-props"===r.type||"new-env-variables"===r.type)&&(0,h.reloadUrl)(),"init"===r.type&&s({type:"connected",clientId:r.clientId}),"render-queue-updated"===r.type)for(let e of(null==(t=f.renderJobsRef.current)||t.updateRenderJobs(r.queue),r.queue))"done"===e.status&&e.beepOnFinish&&(0,p.default)(e.id);if("render-job-failed"===r.type&&(0,d.showNotification)(`Rendering "${r.compositionId}" failed`,2e3),"new-public-folder"===r.type){let e={files:r.files};window.remotion_staticFiles=r.files,window.remotion_publicFolderExists=r.folderExists,window.dispatchEvent(new CustomEvent(c.Internals.WATCH_REMOTION_STATIC_FILES,{detail:e}))}i.current.forEach(e=>{e.type===r.type&&e.listener(r)})}),e.addEventListener("open",()=>{e.addEventListener("error",()=>{s({type:"disconnected"}),null==e||e.close(),setTimeout(()=>{n()},1e3)},{once:!0})}),{close:()=>{e.close()}}},[]);(0,u.useEffect)(()=>{if(t)return;let{close:e}=n();return()=>{e()}},[n,t]);let[o,s]=u.default.useState({type:"init"}),m=(0,u.useMemo)(()=>({previewServerState:o,subscribeToEvent:a}),[o,a]);return(0,l.jsx)(r.StudioServerConnectionCtx.Provider,{value:m,children:e})}},813594,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.EllipsisIcon=void 0;let i=e.r(222260);r.EllipsisIcon=e=>(0,i.jsx)("svg",{...e.svgProps,viewBox:"0 0 448 512",children:(0,i.jsx)("path",{fill:e.fill,d:"M8 256a56 56 0 1 1 112 0A56 56 0 1 1 8 256zm160 0a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zm216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112z"})})},841674,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.InlineAction=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(260240);r.InlineAction=({renderAction:e,onClick:t,disabled:r,title:s})=>{let{tabIndex:l}=(0,o.useZIndex)(),[u,c]=(0,a.useState)(!1),d=(0,a.useCallback)(()=>{c(!0)},[]),p=(0,a.useCallback)(()=>{c(!1)},[]),f=(0,a.useMemo)(()=>({border:"none",background:r?"transparent":(0,n.getBackgroundFromHoverState)({hovered:u,selected:!1}),height:24,width:24,display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:3,pointerEvents:r?"none":"auto"}),[r,u]);return(0,i.jsx)("button",{type:"button",onPointerEnter:d,onPointerLeave:p,onClick:t,style:f,tabIndex:l,title:s,children:e(u?"white":n.LIGHT_TEXT)})}},414321,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getPortal=r.portals=void 0,r.portals=[document.getElementById("menuportal-0"),document.getElementById("menuportal-1"),document.getElementById("menuportal-2"),document.getElementById("menuportal-3"),document.getElementById("menuportal-4"),document.getElementById("menuportal-5")],r.getPortal=e=>r.portals[e]},490586,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.inlineCodeSnippet=r.outerPortal=r.fullScreenOverlay=r.menuContainerTowardsTop=r.menuContainerTowardsBottom=r.SHADOW_TOWARDS_TOP=r.SHADOW_TOWARDS_BOTTOM=r.MAX_MOBILE_MENU_WIDTH=r.MAX_MENU_WIDTH=r.SUBMENU_LEFT_INSET=r.MENU_VERTICAL_PADDING=void 0;let i=e.r(921224);r.MENU_VERTICAL_PADDING=4,r.SUBMENU_LEFT_INSET=-8,r.MAX_MENU_WIDTH=400,r.MAX_MOBILE_MENU_WIDTH=300;let a={backgroundColor:i.BACKGROUND,position:"fixed",color:"white",userSelect:"none",WebkitUserSelect:"none"};r.SHADOW_TOWARDS_BOTTOM="0 2px 8px rgba(0, 0, 0, 0.5)",r.SHADOW_TOWARDS_TOP="0 -2px 8px rgba(0, 0, 0, 0.5)",r.menuContainerTowardsBottom={...a,boxShadow:r.SHADOW_TOWARDS_BOTTOM},r.menuContainerTowardsTop={...a,boxShadow:r.SHADOW_TOWARDS_TOP},r.fullScreenOverlay={position:"fixed",top:0,left:0,right:0,bottom:0},r.outerPortal={position:"fixed"},r.inlineCodeSnippet={fontSize:14,color:i.BLUE,fontFamily:"monospace"}},819449,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MenuDivider=void 0;let i=e.r(222260),a={marginTop:4,marginBottom:4,height:1,backgroundColor:e.r(921224).INPUT_BORDER_COLOR_HOVERED};r.MenuDivider=()=>(0,i.jsx)("div",{style:a})},191928,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AngleDown=r.CaretDown=r.CaretRight=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o={height:12},s={width:10},l={width:10};r.CaretRight=()=>(0,i.jsx)("svg",{viewBox:"0 0 192 512",style:o,children:(0,i.jsx)("path",{fill:"currentColor",d:"M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"})}),r.CaretDown=()=>(0,i.jsx)("svg",{viewBox:"0 0 320 512",style:s,children:(0,i.jsx)("path",{fill:"currentColor",d:"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"})}),r.AngleDown=({down:e})=>{let t=(0,a.useMemo)(()=>({...l,transform:e?"rotate(180deg)":"rotate(0deg)",marginTop:1}),[e]);return(0,i.jsx)("svg",{style:t,viewBox:"0 0 448 512",children:(0,i.jsx)("path",{fill:n.LIGHT_TEXT,d:"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"})})}},146575,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Column=r.Row=r.Flex=r.Spacing=r.SPACING_UNIT=void 0;let i=e.r(222260),a=e.r(347540);r.SPACING_UNIT=8,r.Spacing=({x:e=0,y:t=0,block:n=!1})=>{let o=(0,a.useMemo)(()=>({display:n?"block":"inline-block",width:e*r.SPACING_UNIT,height:t*r.SPACING_UNIT,flexShrink:0}),[n,e,t]);return(0,i.jsx)("div",{style:o})};let n={flex:1};r.Flex=({children:e})=>(0,i.jsx)("div",{style:n,children:e}),r.Row=({children:e,justify:t,className:r,align:n,flex:o,style:s={},...l})=>{let u=(0,a.useMemo)(()=>({...s,display:"flex",flexDirection:"row",justifyContent:null!=t?t:"flex-start",alignItems:null!=n?n:"flex-start",flex:null!=o?o:void 0}),[n,o,t,s]);return(0,i.jsx)("div",{className:r,style:u,...l,children:e})},r.Column=({children:e,justify:t,className:r,align:n,style:o={}})=>{let s=(0,a.useMemo)(()=>({...o,display:"flex",flexDirection:"column",justifyContent:null!=t?t:"flex-start",alignItems:null!=n?n:"flex-start"}),[n,t,o]);return(0,i.jsx)("div",{className:r,style:s,children:e})}},505676,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SubMenuComponent=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(321743),o=e.r(971831),s=e.r(260240),l=e.r(67405),u=e.r(414321);r.SubMenuComponent=({portalStyle:e,subMenuActivated:t,subMenu:r,onQuitFullMenu:c,onQuitSubMenu:d})=>{let p=(0,n.useMobileLayout)(),f=(0,a.useCallback)(e=>{u.portals.find(t=>t.contains(e))||p?d():c()},[p,c,d]);return(0,i.jsx)(s.HigherZIndex,{onEscape:c,onOutsideClick:f,children:(0,i.jsx)("div",{style:e,className:"css-reset",children:(0,i.jsx)(l.MenuContent,{onNextMenu:o.noop,onPreviousMenu:d,values:r.items,onHide:c,leaveLeftSpace:r.leaveLeftSpace,preselectIndex:"without-mouse"===t&&"number"==typeof r.preselectIndex&&r.preselectIndex,topItemCanBeUnselected:!1,fixedHeight:null})})})}},494296,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isMenuItem=r.VERTICAL_SCROLLBAR_CLASSNAME=r.HORIZONTAL_SCROLLBAR_CLASSNAME=r.MENU_ITEM_CLASSNAME=r.MENU_INITIATOR_CLASSNAME=void 0,r.MENU_INITIATOR_CLASSNAME="__remotion-studio-menu-initiator",r.MENU_ITEM_CLASSNAME="__remotion-studio-menu-item",r.HORIZONTAL_SCROLLBAR_CLASSNAME="__remotion-horizontal-scrollbar",r.VERTICAL_SCROLLBAR_CLASSNAME="__remotion-vertical-scrollbar",r.isMenuItem=e=>!!(e.classList.contains(r.MENU_ITEM_CLASSNAME)||e.closest(`.${r.MENU_ITEM_CLASSNAME}`)||e.classList.contains(r.MENU_INITIATOR_CLASSNAME)||e.closest(`.${r.MENU_INITIATOR_CLASSNAME}`))},840935,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.MenuSubItem=void 0;let a=e.r(222260),n=e.r(853987),o=e.r(347540),s=i(e.r(149579)),l=e.r(921224),u=e.r(321743),c=e.r(362087),d=e.r(191928),p=e.r(260240),f=e.r(146575),h=e.r(505676),m=e.r(494296),g=e.r(414321),v=e.r(490586),y={paddingTop:8,paddingBottom:8,paddingLeft:12,paddingRight:8,cursor:"default"},b={fontSize:13,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},x={flexDirection:"row",color:l.LIGHT_TEXT,fontSize:13},w={width:24,marginLeft:-6,display:"inline-flex",justifyContent:"center",alignItems:"center"};r.MenuSubItem=({label:e,leaveLeftSpace:t,leftItem:r,onActionChosen:i,id:S,selected:k,onItemSelected:C,keyHint:E,subMenu:_,onQuitMenu:T,subMenuActivated:P,setSubMenuActivated:I,disabled:A})=>{let[O,M]=(0,o.useState)(!1),F=(0,o.useRef)(null),R=n.PlayerInternals.useElementSize(F,{triggerOnWindowResize:!0,shouldApplyCssTransforms:!0}),D=(0,u.useMobileLayout)(),{currentZIndex:j}=(0,p.useZIndex)(),L=(0,o.useMemo)(()=>({...y,backgroundColor:k&&!A?l.CLEAR_HOVER:"transparent",opacity:A?.5:1,cursor:A?"not-allowed":"default"}),[k,A]),B=(0,o.useCallback)(e=>{if(!A){if(_){I("with-mouse"),M(!0);return}i(S,e)}},[A,S,i,I,_]),N=(0,o.useCallback)(()=>{A||(C(S),M(!0))},[A,S,C]),$=(0,o.useCallback)(()=>{M(!1)},[]),z=(0,o.useCallback)(()=>{I(!1)},[I]),U=(0,o.useMemo)(()=>{if(!k||!R||!_||!P)return null;let e=R.left+R.width+v.SUBMENU_LEFT_INSET;return{...v.menuContainerTowardsBottom,left:D?.7*e:e,top:R.top-v.MENU_VERTICAL_PADDING}},[D,k,R,_,P]);return(0,o.useEffect)(()=>{if(!O||!_)return;let e=setTimeout(()=>{I("with-mouse")},100);return()=>clearTimeout(e)},[O,k,I,_]),(0,o.useEffect)(()=>{var e;k&&(null==(e=F.current)||e.scrollIntoView({block:"nearest"}))},[k]),(0,a.jsx)("div",{ref:F,onPointerEnter:N,onPointerLeave:$,style:L,onPointerUp:B,role:"button",className:m.MENU_ITEM_CLASSNAME,children:(0,a.jsxs)(f.Row,{align:"center",children:[t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:w,children:r}),(0,a.jsx)(f.Spacing,{x:1})]}):null,(0,a.jsx)("div",{style:b,title:"string"==typeof e?e:void 0,children:e})," ",(0,a.jsx)(f.Spacing,{x:2}),_?(0,a.jsx)(d.CaretRight,{}):null,E&&!(0,c.areKeyboardShortcutsDisabled)()?(0,a.jsx)("span",{style:x,children:E}):null,U&&_?s.default.createPortal((0,a.jsx)(h.SubMenuComponent,{onQuitFullMenu:T,subMenu:_,onQuitSubMenu:z,portalStyle:U,subMenuActivated:P}),(0,g.getPortal)(j)):null]})})}},67405,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MenuContent=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(321743),s=e.r(362087),l=e.r(819449),u=e.r(840935),c=e.r(494296),d=e.r(490586),p={paddingTop:d.MENU_VERTICAL_PADDING,paddingBottom:d.MENU_VERTICAL_PADDING,border:`1px solid ${n.INPUT_BORDER_COLOR_UNHOVERED}`,marginLeft:-1,overflowY:"auto",overflowX:"hidden",minWidth:200,maxWidth:d.MAX_MENU_WIDTH};r.MenuContent=({onHide:e,values:t,preselectIndex:r,onNextMenu:n,onPreviousMenu:f,leaveLeftSpace:h,topItemCanBeUnselected:m,fixedHeight:g})=>{let v=(0,s.useKeybinding)(),y=(0,a.useRef)(null),b=(0,o.useMobileLayout)(),[x,w]=(0,a.useState)(!1);if("divider"===t[0].type)throw Error("first value cant be divide");let[S,k]=(0,a.useState)("number"==typeof r&&r>=0?t[r].id:null),C=(0,a.useCallback)(()=>{e()},[e]),E=(0,a.useCallback)(e=>{k(e)},[]),_=(0,a.useCallback)(e=>"divider"!==e.type&&!e.disabled,[]),T=(0,a.useCallback)(()=>{k(e=>{if(null===e)return null;let r=t.findIndex(t=>t.id===e);if(m&&0===r||null===e)return null;let i=t.filter((e,t)=>t<r&&_(e));if(i.length>0)return i[i.length-1].id;let a=t.find(e=>_(e));if(a)return a.id;throw Error("could not find previous item")})},[m,t,_]),P=(0,a.useCallback)(()=>{k(e=>{let r=t.findIndex(t=>t.id===e),i=t.find((e,t)=>t>r&&_(e));if(i)return i.id;let a=t.slice().reverse().find(e=>_(e));if(a)return a.id;throw Error("could not find next item")})},[t,_]),I=(0,a.useCallback)(()=>{if(null===S)return e();let r=t.find(e=>e.id===S);if(!r)throw Error("cannot find item");if("divider"===r.type)throw Error("cannot find divider");if(!r.disabled){if(r.subMenu)return w("without-mouse");e(),r.onClick(r.id,null)}},[e,S,t]),A=(0,a.useCallback)(()=>{if(null===S)return n();let e=t.find(e=>e.id===S);if(!e)throw Error("cannot find item");if("divider"===e.type)throw Error("cannot find divider");if(!e.subMenu)return n();w("without-mouse")},[n,S,t]),O=(0,a.useMemo)(()=>{let e={...p};return null===g?e.maxHeight=600:e.maxHeight=g,b&&(e.maxWidth=d.MAX_MOBILE_MENU_WIDTH),e},[g,b]);return(0,a.useEffect)(()=>{let e=v.registerKeybinding({event:"keydown",key:"Escape",callback:C,commandCtrlKey:!1,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1}),t=v.registerKeybinding({event:"keydown",key:"ArrowRight",commandCtrlKey:!1,callback:A,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1}),r=v.registerKeybinding({event:"keydown",commandCtrlKey:!1,key:"ArrowLeft",callback:f,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1}),i=v.registerKeybinding({event:"keydown",key:"ArrowDown",commandCtrlKey:!1,callback:P,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1}),a=v.registerKeybinding({event:"keydown",key:"ArrowUp",callback:T,commandCtrlKey:!1,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1}),n=v.registerKeybinding({event:"keydown",key:"Enter",callback:I,commandCtrlKey:!1,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1}),o=v.registerKeybinding({event:"keyup",key:" ",callback:I,commandCtrlKey:!1,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1});return()=>{e.unregister(),r.unregister(),t.unregister(),i.unregister(),a.unregister(),n.unregister(),o.unregister()}},[v,C,n,f,P,T,I,A]),(0,a.useEffect)(()=>{if(!x)return;if(null===S)return w(!1);let e=t.find(e=>e.id===S);if(e){if("divider"===e.type)throw Error("should not select divider");!e.subMenu&&x&&w(!1)}},[S,x,t]),(0,a.useEffect)(()=>{let{current:e}=y;if(!e)return;let t=()=>{x||k(null)};return e.addEventListener("pointerleave",t),()=>e.removeEventListener("pointerleave",t)},[e,x]),(0,i.jsx)("div",{ref:y,style:O,className:c.VERTICAL_SCROLLBAR_CLASSNAME,children:t.map(t=>"divider"===t.type?(0,i.jsx)(l.MenuDivider,{},t.id):(0,i.jsx)(u.MenuSubItem,{selected:t.id===S,onActionChosen:(r,i)=>{if(t.onClick(r,i),t.subMenu)return null;e()},onItemSelected:E,label:t.label,id:t.id,keyHint:t.keyHint,leaveLeftSpace:h,leftItem:t.leftItem,subMenu:t.subMenu,onQuitMenu:e,onNextMenu:n,subMenuActivated:x,setSubMenuActivated:w,disabled:t.disabled},t.id))})}},793819,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.InlineDropdown=void 0;let a=e.r(222260),n=e.r(853987),o=e.r(347540),s=i(e.r(149579)),l=e.r(321743),u=e.r(971831),c=e.r(260240),d=e.r(841674),p=e.r(414321),f=e.r(490586),h=e.r(67405);r.InlineDropdown=({values:e,...t})=>{let r=(0,o.useRef)(null),[i,m]=(0,o.useState)({type:"not-open"}),{currentZIndex:g}=(0,c.useZIndex)(),v=n.PlayerInternals.useElementSize(r,{triggerOnWindowResize:!0,shouldApplyCssTransforms:!0}),y=(0,l.useMobileLayout)(),b=(0,o.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),m({type:"open",left:e.clientX,top:e.clientY})},[]),x=(0,o.useMemo)(()=>v&&"open"===i.type?v.windowSize.height-i.top:0,[i,v]),w=(0,o.useMemo)(()=>v&&"open"===i.type?i.top:0,[i,v]),S=(0,o.useMemo)(()=>{if("not-open"===i.type||!v)return;let e=v.windowSize.width-v.left,t=v.left+v.width,r=y?f.MAX_MOBILE_MENU_WIDTH:f.MAX_MENU_WIDTH,a=w>x?"bottom":"top";return{...f.menuContainerTowardsTop,..."top"===a?{top:i.top}:{bottom:v.windowSize.height-i.top},..."left"==(e>=r?"left":"right")?{left:i.left}:{right:t>=r?v.windowSize.width-i.left:0}}},[i,v,y,w,x]),k=(0,o.useCallback)(()=>{m({type:"not-open"})},[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{ref:r,children:(0,a.jsx)(d.InlineAction,{onClick:b,...t})}),S?s.default.createPortal((0,a.jsx)("div",{style:f.fullScreenOverlay,children:(0,a.jsx)("div",{style:f.outerPortal,className:"css-reset",children:(0,a.jsx)(c.HigherZIndex,{onOutsideClick:k,onEscape:k,children:(0,a.jsx)("div",{style:S,children:(0,a.jsx)(h.MenuContent,{onNextMenu:u.noop,onPreviousMenu:u.noop,values:e,onHide:k,leaveLeftSpace:!0,preselectIndex:!1,topItemCanBeUnselected:!1,fixedHeight:null})})})})}),(0,p.getPortal)(g)):null]})}},82839,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CompositionContextButton=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(850586),o=e.r(813594),s=e.r(793819);r.CompositionContextButton=({visible:e,values:t})=>{let r=(0,a.useMemo)(()=>({style:{height:12}}),[]),l=(0,a.useContext)(n.StudioServerConnectionCtx).previewServerState.type,u=(0,a.useCallback)(e=>(0,i.jsx)(o.EllipsisIcon,{fill:e,svgProps:r}),[r]);return e&&"connected"===l?(0,i.jsx)(s.InlineDropdown,{renderAction:u,values:t}):null}},661648,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ContextMenu=void 0;let a=e.r(222260),n=e.r(853987),o=e.r(347540),s=i(e.r(149579)),l=e.r(321743),u=e.r(971831),c=e.r(260240),d=e.r(414321),p=e.r(490586),f=e.r(67405);r.ContextMenu=({children:e,values:t})=>{let r=(0,o.useRef)(null),[i,h]=(0,o.useState)({type:"not-open"}),{currentZIndex:m}=(0,c.useZIndex)(),g=(0,o.useMemo)(()=>({}),[]),v=n.PlayerInternals.useElementSize(r,{triggerOnWindowResize:!0,shouldApplyCssTransforms:!0}),y=(0,l.useMobileLayout)();(0,o.useEffect)(()=>{let{current:e}=r;if(!e)return;let t=e=>(e.preventDefault(),e.stopPropagation(),h({type:"open",left:e.clientX,top:e.clientY}),!1);return e.addEventListener("contextmenu",t),()=>{e.removeEventListener("contextmenu",t)}},[v]);let b=(0,o.useMemo)(()=>v&&"open"===i.type?v.windowSize.height-i.top:0,[i,v]),x=(0,o.useMemo)(()=>v&&"open"===i.type?i.top:0,[i,v]),w=(0,o.useMemo)(()=>{if("not-open"===i.type||!v)return;let e=v.windowSize.width-v.left,t=v.left+v.width,r=y?p.MAX_MOBILE_MENU_WIDTH:p.MAX_MENU_WIDTH,a=x>b?"bottom":"top";return{...p.menuContainerTowardsTop,..."top"===a?{top:i.top}:{bottom:v.windowSize.height-i.top},..."left"==(e>=r?"left":"right")?{left:i.left}:{right:t>=r?v.windowSize.width-i.left:0}}},[i,v,y,x,b]),S=(0,o.useCallback)(()=>{h({type:"not-open"})},[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{ref:r,onContextMenu:()=>!1,style:g,children:e}),w?s.default.createPortal((0,a.jsx)("div",{style:p.fullScreenOverlay,children:(0,a.jsx)("div",{style:p.outerPortal,className:"css-reset",children:(0,a.jsx)(c.HigherZIndex,{onOutsideClick:S,onEscape:S,children:(0,a.jsx)("div",{style:w,children:(0,a.jsx)(f.MenuContent,{onNextMenu:u.noop,onPreviousMenu:u.noop,values:t,onHide:S,leaveLeftSpace:!0,preselectIndex:!1,topItemCanBeUnselected:!1,fixedHeight:null})})})})}),(0,d.getPortal)(m)):null]})}},27163,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ThinRenderIcon=void 0;let i=e.r(222260);r.ThinRenderIcon=e=>(0,i.jsx)("svg",{...e.svgProps,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:(0,i.jsx)("path",{fill:e.fill,d:"M188.9 372l-50.4-50.4c18.6-42.6 61.7-137.7 95.1-187C304.6 30.1 409 24.6 475.7 36.3c11.7 66.7 6.2 171.1-98.4 242c-49.4 33.5-145.5 75.6-188.4 93.7zm-79.9-62.8c-5.2 11.9-2.5 25.7 6.7 34.9l50.7 50.7c9.1 9.1 22.7 11.9 34.5 6.9c6.5-2.7 14.3-6 23-9.8L224 496c0 5.5 2.9 10.7 7.6 13.6s10.6 3.2 15.6 .7l101.5-50.7c21.7-10.8 35.4-33 35.4-57.2V312.1c4-2.5 7.7-4.9 11.3-7.3C516.1 222.9 520.1 100.9 506.7 28.1c-2.1-11.6-11.2-20.6-22.8-22.8C411.1-8.1 289.1-4.1 207.2 116.7c-2.4 3.6-4.9 7.3-7.3 11.3l-90.2 0c-24.2 0-46.4 13.7-57.2 35.4L1.7 264.8c-2.5 5-2.2 10.8 .7 15.6s8.1 7.6 13.6 7.6H118.5c-3.6 8-6.8 15.2-9.4 21.2zM256 470.1l0-92.5c30.3-13.7 65.4-30.3 96-47v71.7c0 12.1-6.8 23.2-17.7 28.6L256 470.1zM109.7 160h71.5c-16.9 30.7-34 65.8-48.1 96H41.9L81 177.7c5.4-10.8 16.5-17.7 28.6-17.7zM392 144a24 24 0 1 1 -48 0 24 24 0 1 1 48 0zM368 88a56 56 0 1 0 0 112 56 56 0 1 0 0-112z"})})},883833,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SidebarRenderButton=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(850586),s=e.r(321743),l=e.r(27163),u=e.r(137798),c=e.r(839270),d=e.r(841674);r.SidebarRenderButton=({composition:e,visible:t})=>{let{setSelectedModal:r}=(0,a.useContext)(u.ModalsContext),{setSidebarCollapsedState:p}=(0,a.useContext)(c.SidebarContext),f=(0,s.useMobileLayout)(),h=(0,a.useMemo)(()=>({style:{height:12}}),[]),m=(0,a.useContext)(o.StudioServerConnectionCtx).previewServerState.type,{props:g}=(0,a.useContext)(n.Internals.EditorPropsContext),v=(0,a.useCallback)(t=>{var i;let a=window.remotion_renderDefaults;if(!a)throw Error("expected defaults");t.stopPropagation(),r({type:"server-render",compositionId:e.id,initialFrame:0,initialVideoImageFormat:a.videoImageFormat,initialStillImageFormat:a.stillImageFormat,initialJpegQuality:a.jpegQuality,initialScale:a.scale,initialLogLevel:a.logLevel,initialConcurrency:a.concurrency,maxConcurrency:a.maxConcurrency,minConcurrency:a.minConcurrency,initialMuted:a.muted,initialEnforceAudioTrack:a.enforceAudioTrack,initialProResProfile:a.proResProfile,initialx264Preset:a.x264Preset,initialPixelFormat:null,initialAudioBitrate:a.audioBitrate,initialVideoBitrate:a.videoBitrate,initialEveryNthFrame:a.everyNthFrame,initialNumberOfGifLoops:a.numberOfGifLoops,initialDelayRenderTimeout:a.delayRenderTimeout,defaultConfigurationAudioCodec:a.audioCodec,initialEnvVariables:window.process.env,initialDisableWebSecurity:a.disableWebSecurity,initialOpenGlRenderer:a.openGlRenderer,initialHeadless:a.headless,initialOffthreadVideoCacheSizeInBytes:a.offthreadVideoCacheSizeInBytes,initialOffthreadVideoThreads:a.offthreadVideoThreads,initialIgnoreCertificateErrors:a.ignoreCertificateErrors,defaultProps:null!=(i=g[e.id])?i:e.defaultProps,inFrameMark:null,outFrameMark:null,initialColorSpace:a.colorSpace,initialMultiProcessOnLinux:a.multiProcessOnLinux,defaultConfigurationVideoCodec:a.codec,initialEncodingBufferSize:a.encodingBufferSize,initialEncodingMaxRate:a.encodingMaxRate,initialUserAgent:a.userAgent,initialBeep:a.beepOnFinish,initialRepro:a.repro,initialForSeamlessAacConcatenation:a.forSeamlessAacConcatenation,renderTypeOfLastRender:null,defaulMetadata:a.metadata,initialHardwareAcceleration:a.hardwareAcceleration,initialChromeMode:a.chromeMode,initialMediaCacheSizeInBytes:a.mediaCacheSizeInBytes,renderDefaults:a,initialDarkMode:a.darkMode}),f&&p({left:"collapsed",right:"collapsed"})},[e.defaultProps,e.id,f,g,r,p]),y=(0,a.useCallback)(e=>(0,i.jsx)(l.ThinRenderIcon,{fill:e,svgProps:h}),[h]);return t&&"connected"===m?(0,i.jsx)(d.InlineAction,{renderAction:y,onClick:v}):null}},271413,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CompositionSelectorItem=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(929723),s=e.r(681504),l=e.r(449149),u=e.r(511462),c=e.r(137798),d=e.r(82839),p=e.r(661648),f=e.r(146575),h=e.r(277984),m=e.r(883833),g={paddingRight:10,paddingTop:6,paddingBottom:6,fontSize:13,display:"flex",textDecoration:"none",cursor:"default",alignItems:"center",marginBottom:1,appearance:"none",border:"none",width:"100%",textAlign:"left",backgroundColor:n.BACKGROUND,height:32},v={textAlign:"left",textDecoration:"none",fontSize:13,flex:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},y={width:18,height:18,flexShrink:0};r.CompositionSelectorItem=({item:e,level:t,currentComposition:b,tabIndex:x,selectComposition:w,toggleFolder:S})=>{let k=(0,a.useMemo)(()=>"composition"===e.type&&b===e.composition.id,[e,b]),[C,E]=(0,a.useState)(!1),_=(0,a.useCallback)(()=>{E(!0)},[]),T=(0,a.useCallback)(()=>{E(!1)},[]),P=(0,a.useMemo)(()=>({...g,backgroundColor:(0,n.getBackgroundFromHoverState)({hovered:C,selected:k}),paddingLeft:12+8*t}),[C,t,k]),I=(0,a.useMemo)(()=>({...v,color:k||C?"white":n.LIGHT_TEXT}),[C,k]),A=(0,a.useCallback)(t=>{t.preventDefault(),"composition"===e.type?w(e.composition,!0):S(e.folderName,e.parentName)},[e,w,S]),O=(0,a.useCallback)(e=>{"Enter"===e.key&&A(e)},[A]),{setSelectedModal:M}=(0,a.useContext)(c.ModalsContext),F=(0,a.useMemo)(()=>"composition"===e.type?[{id:"duplicate",keyHint:null,label:"Duplicate...",leftItem:null,onClick:()=>{M({type:"duplicate-comp",compositionId:e.composition.id,compositionType:1===e.composition.durationInFrames?"still":"composition"})},quickSwitcherLabel:null,subMenu:null,type:"item",value:"duplicate"},{id:"rename",keyHint:null,label:"Rename...",leftItem:null,onClick:()=>{M({type:"rename-comp",compositionId:e.composition.id})},quickSwitcherLabel:null,subMenu:null,type:"item",value:"rename"},{id:"delete",keyHint:null,label:"Delete...",leftItem:null,onClick:()=>{M({type:"delete-comp",compositionId:e.composition.id})},quickSwitcherLabel:null,subMenu:null,type:"item",value:"delete"},{type:"divider",id:"copy-id-divider"},{id:"copy-id",keyHint:null,label:"Copy ID",leftItem:null,onClick:()=>{navigator.clipboard.writeText(e.composition.id).catch(e=>{(0,h.showNotification)(`Could not copy to clipboard: ${e.message}`,1e3)}).then(()=>{(0,h.showNotification)("Copied to clipboard",1e3)})},quickSwitcherLabel:null,subMenu:null,type:"item",value:"remove"}]:[],[e,M]);return"folder"===e.type?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("button",{style:P,onPointerEnter:_,onPointerLeave:T,tabIndex:x,onClick:A,type:"button",title:e.folderName,children:[e.expanded?(0,i.jsx)(s.ExpandedFolderIcon,{style:y,color:C||k?"white":n.LIGHT_TEXT}):(0,i.jsx)(s.CollapsedFolderIcon,{color:C||k?"white":n.LIGHT_TEXT,style:y}),(0,i.jsx)(f.Spacing,{x:1}),(0,i.jsx)("div",{style:I,children:e.folderName})]}),e.expanded?e.items.map(e=>(0,i.jsx)(r.CompositionSelectorItem,{currentComposition:b,selectComposition:w,item:e,tabIndex:x,level:t+1,toggleFolder:S},e.key+e.type)):null]}):(0,i.jsx)(p.ContextMenu,{values:F,children:(0,i.jsx)(f.Row,{align:"center",children:(0,i.jsxs)("a",{style:P,onPointerEnter:_,onPointerLeave:T,tabIndex:x,onClick:A,onKeyPress:O,type:"button",title:e.composition.id,className:"__remotion-composition","data-compname":e.composition.id,children:[(0,o.isCompositionStill)(e.composition)?(0,i.jsx)(l.StillIcon,{color:C||k?"white":n.LIGHT_TEXT,style:y}):(0,i.jsx)(u.FilmIcon,{color:C||k?"white":n.LIGHT_TEXT,style:y}),(0,i.jsx)(f.Spacing,{x:1}),(0,i.jsx)("div",{style:I,children:e.composition.id}),(0,i.jsx)(f.Spacing,{x:.5}),(0,i.jsx)(d.CompositionContextButton,{values:F,visible:C}),(0,i.jsx)(m.SidebarRenderButton,{visible:C,composition:e.composition})]})})})}},774287,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.renderFrame=void 0,r.renderFrame=(e,t)=>{let r=Math.floor(e/t/3600),i=Math.floor((e-r*t*3600)/60/t),a=Math.floor((e-r*t*3600-i*t*60)/t),n=Math.round(e%t),o=String(r),s=String(i).padStart(2,"0"),l=String(a).padStart(2,"0"),u=String(n).padStart(2,"0");return r>0?`${o}:${s}:${l}.${u}`:`${s}:${l}.${u}`}},955401,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CurrentComposition=r.CURRENT_COMPOSITION_HEIGHT=void 0;let i=e.r(222260),a=e.r(49019),n=e.r(921224),o=e.r(929723),s=e.r(774287);r.CURRENT_COMPOSITION_HEIGHT=80;let l={height:r.CURRENT_COMPOSITION_HEIGHT,display:"block",borderBottom:`1px solid ${n.BORDER_COLOR}`,padding:12,color:"white",backgroundColor:n.BACKGROUND},u={fontWeight:"bold",fontSize:12,whiteSpace:"nowrap",lineHeight:"18px",backgroundColor:n.BACKGROUND},c={fontSize:12,opacity:.8,whiteSpace:"nowrap",lineHeight:"18px",backgroundColor:n.BACKGROUND},d={display:"flex",flexDirection:"row",lineHeight:"18px",backgroundColor:n.BACKGROUND};r.CurrentComposition=()=>{let e=a.Internals.useVideo();return e?(0,i.jsx)("div",{style:l,children:(0,i.jsx)("div",{style:d,children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:u,children:e.id}),(0,i.jsxs)("div",{style:c,children:[e.width,"x",e.height,(0,o.isCompositionStill)(e)?null:`, ${e.fps} FPS`]}),(0,o.isCompositionStill)(e)?(0,i.jsx)("div",{style:c,children:"Still"}):(0,i.jsxs)("div",{style:c,children:["Duration ",(0,s.renderFrame)(e.durationInFrames,e.fps)]})]})})}):(0,i.jsx)("div",{style:l})}},469907,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CompositionSelector=r.getKeysToExpand=r.useCompositionNavigation=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(921224),s=e.r(937672),l=e.r(262662),u=e.r(260240),c=e.r(271413),d=e.r(955401),p=e.r(570431);r.useCompositionNavigation=()=>{let{compositions:e,canvasContent:t}=(0,a.useContext)(n.Internals.CompositionManager),r=(0,p.useSelectComposition)(),i=(0,a.useCallback)(()=>{if(!t||"composition"!==t.type||e.length<=1)return;let i=e.findIndex(e=>e.id===t.compositionId);if(-1===i)return;let a=(i+1)%e.length;r(e[a],!0)},[t,e,r]),o=(0,a.useCallback)(()=>{if(!t||"composition"!==t.type||e.length<=1)return;let i=e.findIndex(e=>e.id===t.compositionId);if(-1===i)return;let a=(i-1+e.length)%e.length;r(e[a],!0)},[t,e,r]);return(0,a.useMemo)(()=>({navigateToNextComposition:i,navigateToPreviousComposition:o}),[i,o])};let f={display:"flex",flexDirection:"column",flex:1,overflow:"hidden",backgroundColor:o.BACKGROUND};r.getKeysToExpand=(e,t,i=[])=>{i.push((0,l.openFolderKey)({folderName:e,parentName:t}));let{name:a,parent:n}=(0,s.splitParentIntoNameAndParent)(t);return a?(0,r.getKeysToExpand)(a,n,i):i},r.CompositionSelector=()=>{let{compositions:e,canvasContent:t,folders:r}=(0,a.useContext)(n.Internals.CompositionManager),{foldersExpanded:o}=(0,a.useContext)(l.ExpandedFoldersContext),{tabIndex:h}=(0,u.useZIndex)(),m=(0,p.useSelectComposition)(),g=(0,a.useMemo)(()=>(0,s.createFolderTree)(e,r,o),[e,r,o]),v=t&&"composition"===t.type,y=(0,a.useMemo)(()=>({height:v?`calc(100% - ${d.CURRENT_COMPOSITION_HEIGHT}px)`:"100%",overflowY:"auto"}),[v]),b=(0,a.useCallback)((e,t)=>{var r;null==(r=n.Internals.compositionSelectorRef.current)||r.toggleFolder(e,t)},[]);return(0,i.jsxs)("div",{style:f,children:[v?(0,i.jsx)(d.CurrentComposition,{}):null,(0,i.jsx)("div",{className:"__remotion-vertical-scrollbar",style:y,children:g.map(e=>(0,i.jsx)(c.CompositionSelectorItem,{level:0,currentComposition:v?t.compositionId:null,selectComposition:m,toggleFolder:b,tabIndex:h,item:e},e.key+e.type))})]})}},565012,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(347540),a=e.r(758927);r.default=function({name:e,parentFolder:t,dropLocation:r,setDropLocation:n}){let o=(0,i.useRef)(0),s=(0,i.useMemo)(()=>[t,e].filter(a.NoReactInternals.truthy).join("/"),[e,t]),l=(0,i.useMemo)(()=>r===s,[s,r]),u=(0,i.useCallback)(()=>{0===o.current&&n(e=>(null==e?void 0:e.includes(s))?e:s),o.current++},[s,o,n]),c=(0,i.useCallback)(()=>{o.current--,0===o.current&&n(e=>e===s?t:e)},[s,o,t,n]);return(0,i.useEffect)(()=>{null===r&&(o.current=0)},[r]),{isDropDiv:l,onDragEnter:u,onDragLeave:c}}},238666,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.copyText=void 0,r.copyText=e=>new Promise((t,r)=>{navigator.permissions.query({name:"clipboard-write"}).then(i=>{"granted"===i.state||"prompt"===i.state?(navigator.clipboard.writeText(e),t()):r(Error("Permission to copy not granted"))}).catch(e=>{r(e)})})},356174,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ClipboardIcon=void 0;let i=e.r(222260);r.ClipboardIcon=({color:e,...t})=>(0,i.jsx)("svg",{viewBox:"0 0 384 512",...t,children:(0,i.jsx)("path",{fill:e,d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 40c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm144 418c0 3.3-2.7 6-6 6H54c-3.3 0-6-2.7-6-6V118c0-3.3 2.7-6 6-6h42v36c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-36h42c3.3 0 6 2.7 6 6z"})})},261228,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FileIcon=void 0;let i=e.r(222260);r.FileIcon=({color:e,...t})=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",...t,children:(0,i.jsx)("path",{fill:null!=e?e:"currentColor",d:"M0 64C0 28.65 28.65 0 64 0h156.1c12.7 0 25 5.057 34 14.06L369.9 129.9c9 9 14.1 21.3 14.1 34V448c0 35.3-28.7 64-64 64H64c-35.35 0-64-28.7-64-64V64zm352 128H240c-26.5 0-48-21.5-48-48V32H64c-17.67 0-32 14.33-32 32v384c0 17.7 14.33 32 32 32h256c17.7 0 32-14.3 32-32V192zm-4.7-39.4L231.4 36.69c-2-2.07-4.6-3.51-7.4-4.21V144c0 8.8 7.2 16 16 16h111.5c-.7-2.8-2.1-5.4-4.2-7.4z"})})},120696,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t}),s=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.AssetFolderTree=void 0;let l=e.r(222260),u=o(e.r(347540)),c=e.r(49019),d=e.r(758927),p=e.r(921224),f=e.r(238666),h=e.r(321743),m=e.r(910105),g=s(e.r(565012)),v=e.r(356174),y=e.r(261228),b=e.r(681504),x=e.r(839270),w=e.r(841674),S=e.r(277984),k=e.r(20330),C=e.r(146575),E={width:18,height:18,flexShrink:0},_={paddingRight:10,paddingTop:6,paddingBottom:6,fontSize:13,display:"flex",textDecoration:"none",cursor:"default",alignItems:"center",marginBottom:1,appearance:"none",border:"none",width:"100%",textAlign:"left",backgroundColor:p.BACKGROUND,height:32,userSelect:"none",WebkitUserSelect:"none"},T={textAlign:"left",textDecoration:"none",fontSize:13,flex:"1 1 0%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},P={height:12,color:"currentColor"},I=({tabIndex:e,item:t,level:i,parentFolder:a,toggleFolder:n,dropLocation:o,setDropLocation:s})=>{let[c,d]=(0,u.useState)(!1),f=(0,u.useRef)(null),{isDropDiv:h,onDragEnter:m,onDragLeave:v}=(0,g.default)({name:t.name,parentFolder:a,dropLocation:o,setDropLocation:s}),y=(0,u.useCallback)(()=>{d(!0)},[]),x=(0,u.useCallback)(()=>{d(!1)},[]),w=(0,u.useMemo)(()=>({..._,paddingLeft:4+8*i,backgroundColor:c?p.CLEAR_HOVER:"transparent"}),[c,i]),S=(0,u.useMemo)(()=>({...T,color:c?"white":p.LIGHT_TEXT}),[c]),k=(0,u.useCallback)(()=>{n(t.name,a)},[t.name,a,n]),P=t.expanded?b.ExpandedFolderIcon:b.CollapsedFolderIcon;return(0,l.jsxs)("div",{onDragEnter:m,onDragLeave:v,style:{backgroundColor:h?p.CLEAR_HOVER:p.BACKGROUND},children:[(0,l.jsx)("div",{style:w,onPointerEnter:y,onPointerLeave:x,tabIndex:e,title:t.name,onClick:k,onDragEnter:()=>{t.expanded||(f.current=window.setTimeout(()=>{n(t.name,a)},1e3))},onDragLeave:()=>{f.current&&clearTimeout(f.current)},children:(0,l.jsxs)(C.Row,{children:[(0,l.jsx)(P,{style:E,color:c?"white":p.LIGHT_TEXT}),(0,l.jsx)(C.Spacing,{x:1}),(0,l.jsx)("div",{style:S,children:t.name})]})}),t.expanded?(0,l.jsx)(r.AssetFolderTree,{item:t.items,name:t.name,level:i,parentFolder:a,tabIndex:e,toggleFolder:n,dropLocation:o,setDropLocation:s},t.name):null]})};r.AssetFolderTree=({item:e,level:t,name:r,parentFolder:i,toggleFolder:a,tabIndex:n,dropLocation:o,setDropLocation:s})=>{let c=(0,u.useMemo)(()=>[i,r].filter(d.NoReactInternals.truthy).join("/"),[r,i]);return(0,l.jsxs)("div",{children:[e.folders.map(e=>(0,l.jsx)(I,{item:e,tabIndex:n,level:t+1,parentFolder:c,toggleFolder:a,dropLocation:o,setDropLocation:s},e.name)),e.files.map(e=>(0,l.jsx)(A,{item:e,tabIndex:n,level:t,parentFolder:c},e.src))]})};let A=({item:e,tabIndex:t,level:r,parentFolder:i})=>{let a=(0,h.useMobileLayout)(),[n,o]=(0,u.useState)(!1),{setSidebarCollapsedState:s}=(0,u.useContext)(x.SidebarContext),d=(0,u.useCallback)(()=>{o(!0)},[]),{setCanvasContent:g}=(0,u.useContext)(c.Internals.CompositionSetters),{canvasContent:I}=(0,u.useContext)(c.Internals.CompositionManager),A=(0,u.useMemo)(()=>!!I&&"asset"===I.type&&I.asset.split("/").pop()===e.name,[I,e.name]),O=(0,u.useCallback)(()=>{o(!1)},[]),M=(0,u.useCallback)(()=>{let t=i?i+"/"+e.name:e.name;g({type:"asset",asset:t}),(0,m.pushUrl)(`/assets/${t}`),a&&s({left:"collapsed",right:"collapsed"})},[a,e.name,i,g,s]),F=(0,u.useMemo)(()=>({..._,color:n||A?"white":p.LIGHT_TEXT,backgroundColor:n?A?p.SELECTED_BACKGROUND:p.CLEAR_HOVER:A?p.SELECTED_BACKGROUND:"transparent",paddingLeft:12+8*r}),[n,r,A]),R=(0,u.useMemo)(()=>({...T,color:n||A?"white":p.LIGHT_TEXT}),[n,A]),D=(0,u.useCallback)(e=>(0,l.jsx)(b.ExpandedFolderIcon,{style:P,color:e}),[]),j=(0,u.useCallback)(e=>(0,l.jsx)(v.ClipboardIcon,{style:P,color:e}),[]),L=u.default.useCallback(t=>{t.stopPropagation(),(0,k.openInFileExplorer)({directory:window.remotion_publicFolderExists+"/"+i+"/"+e.name}).catch(e=>{(0,S.showNotification)(`Could not open file: ${e.message}`,2e3)})},[e.name,i]),B=(0,u.useCallback)(t=>{t.stopPropagation();let r=`staticFile("${[i,e.name].join("/")}")`;(0,f.copyText)(r).then(()=>{(0,S.showNotification)(`Copied '${r}' to clipboard`,1e3)}).catch(e=>{(0,S.showNotification)(`Could not copy: ${e.message}`,2e3)})},[e.name,i]);return(0,l.jsx)(C.Row,{align:"center",children:(0,l.jsxs)("div",{style:F,onPointerEnter:d,onPointerLeave:O,onClick:M,tabIndex:t,title:e.name,children:[(0,l.jsx)(y.FileIcon,{style:E,color:p.LIGHT_TEXT}),(0,l.jsx)(C.Spacing,{x:1}),(0,l.jsx)("div",{style:R,children:e.name}),n?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(C.Spacing,{x:.5}),(0,l.jsx)(w.InlineAction,{title:"Copy staticFile() name",renderAction:j,onClick:B}),(0,l.jsx)(C.Spacing,{x:.5}),(0,l.jsx)(w.InlineAction,{title:"Open in Explorer",renderAction:D,onClick:L})]}):null]})})}},175592,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t}),s=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.AssetSelector=void 0;let l=e.r(222260),u=o(e.r(347540)),c=e.r(208795),d=e.r(71470),p=e.r(850586),f=e.r(921224),h=e.r(937672),m=e.r(262662),g=s(e.r(565012)),v=e.r(873273),y=e.r(260240),b=e.r(120696),x=e.r(490586),w=e.r(277984),S={display:"flex",flexDirection:"column",flex:1,overflow:"hidden",backgroundColor:f.BACKGROUND},k={display:"flex",flex:1,justifyContent:"center",alignItems:"center",textAlign:"center",padding:"0 12px"},C={color:f.LIGHT_TEXT,lineHeight:1.5,fontSize:14},E={height:"100%",overflowY:"auto"};r.AssetSelector=({readOnlyStudio:e})=>{let{tabIndex:t}=(0,y.useZIndex)(),{assetFoldersExpanded:r,setAssetFoldersExpanded:i}=(0,u.useContext)(v.FolderContext),[a,n]=(0,u.useState)(null),{subscribeToEvent:o}=(0,u.useContext)(p.StudioServerConnectionCtx),s="connected"===(0,u.useContext)(p.StudioServerConnectionCtx).previewServerState.type&&!e,[{publicFolderExists:_,staticFiles:T},P]=u.default.useState(()=>({staticFiles:(0,c.getStaticFiles)(),publicFolderExists:window.remotion_publicFolderExists})),I=(0,u.useMemo)(()=>(0,h.buildAssetFolderStructure)(T,null,r),[r,T]);(0,u.useEffect)(()=>{let e=o("new-public-folder",()=>{P({staticFiles:(0,c.getStaticFiles)(),publicFolderExists:window.remotion_publicFolderExists})});return()=>{e()}},[o]);let A=(0,u.useCallback)((e,t)=>{i(r=>{var i;let a=[t,e].filter(Boolean).join("/"),n=null!=(i=r[a])&&i,o={...r,[a]:!n};return(0,m.persistExpandedFolders)("assets",o),o})},[i]),{isDropDiv:O,onDragEnter:M,onDragLeave:F}=(0,g.default)({name:null,parentFolder:null,dropLocation:a,setDropLocation:n}),R=(0,u.useCallback)(e=>{e.preventDefault()},[]),D=(0,u.useCallback)(async e=>{try{e.preventDefault(),e.stopPropagation();let{files:t}=e.dataTransfer,r=null!=a?a:null,i=e=>[r,e.name].filter(Boolean).join("/");for(let e of t){let t=await e.arrayBuffer();await (0,d.writeStaticFile)({contents:t,filePath:i(e)})}1===t.length?(0,w.showNotification)(`Created ${i(t[0])}`,3e3):(0,w.showNotification)(`Added ${t.length} files to ${r}`,3e3)}catch(e){(0,w.showNotification)(`Error during upload: ${e}`,3e3)}finally{n(null)}},[a]);return(0,l.jsx)("div",{style:S,onDragOver:s?R:void 0,onDrop:s?D:void 0,children:0===T.length?_?(0,l.jsx)("div",{style:k,children:(0,l.jsxs)("div",{style:C,children:["To add assets, place a file in the"," ",(0,l.jsx)("code",{style:x.inlineCodeSnippet,children:"public"})," folder of your project or drag and drop a file here."]})}):(0,l.jsx)("div",{style:k,children:(0,l.jsxs)("div",{style:C,children:["To add assets, create a folder called"," ",(0,l.jsx)("code",{style:x.inlineCodeSnippet,children:"public"})," in the root of your project and place a file in it."]})}):(0,l.jsx)("div",{className:"__remotion-vertical-scrollbar",style:{...E,backgroundColor:O?f.CLEAR_HOVER:f.BACKGROUND},onDragEnter:M,onDragLeave:F,children:(0,l.jsx)(b.AssetFolderTree,{item:I,level:0,parentFolder:null,name:null,tabIndex:t,toggleFolder:A,dropLocation:a,setDropLocation:n})})})}},519897,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CompSelectorRef=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(262662),s=e.r(570431);r.CompSelectorRef=({children:e})=>{let{compositions:t}=(0,a.useContext)(n.Internals.CompositionManager),[r,l]=(0,a.useState)((0,o.loadExpandedFolders)("compositions")),u=(0,s.useSelectComposition)(),c=(0,a.useCallback)((e,t)=>{l(r=>{var i;let a=(0,o.openFolderKey)({folderName:e,parentName:t}),n=null!=(i=r[a])&&i,s={...r,[a]:!n};return(0,o.persistExpandedFolders)("compositions",s),s})},[]);(0,a.useImperativeHandle)(n.Internals.compositionSelectorRef,()=>({expandComposition:e=>{let r=t.find(t=>t.id===e);if(!r)return;let{folderName:i,parentFolderName:a}=r;null!==i&&l(e=>{let t={...e},r=(0,o.openFolderKey)({folderName:i,parentName:a}).split("/");for(let e=0;e<r.length-1;e++)t[0===e?(0,o.openFolderKey)({folderName:r.filter(e=>"no-parent"!==e)[0],parentName:null}):r.slice(0,e+1).join("/")]=!0;return(0,o.persistExpandedFolders)("compositions",t),t})},selectComposition:e=>{let r=t.find(t=>t.id===e);if(!r)throw Error(`Composition ${e} not found`);u(r,!0)},toggleFolder:(e,t)=>{c(e,t)}}),[t,u,c]);let d=(0,a.useMemo)(()=>({foldersExpanded:r,setFoldersExpanded:l,toggleFolder:c}),[r,l,c]);return(0,i.jsx)(o.ExpandedFoldersContext.Provider,{value:d,children:e})}},79999,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Tab=r.Tabs=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(260240),s={display:"flex",flexDirection:"row"};r.Tabs=({children:e,style:t})=>{let r=(0,a.useMemo)(()=>({...s,...t}),[t]);return(0,i.jsx)("div",{style:r,children:e})};let l={border:"none",flex:1,padding:4,height:40,paddingLeft:16,display:"flex",flexDirection:"row",fontSize:14,color:"inherit",alignItems:"center",cursor:"default"};r.Tab=({children:e,onClick:t,style:r,selected:s})=>{let[u,c]=(0,a.useState)(!1),{tabIndex:d}=(0,o.useZIndex)(),p=(0,a.useCallback)(()=>{c(!0)},[]),f=(0,a.useCallback)(()=>{c(!1)},[]),h=(0,a.useMemo)(()=>({...l,backgroundColor:s?n.BACKGROUND:u?n.CLEAR_HOVER:n.INPUT_BACKGROUND,color:s?"white":n.LIGHT_TEXT,borderTop:s?"2px solid "+n.BLUE:"2px solid transparent",boxShadow:s?"none":void 0,...r}),[u,s,r]);return(0,i.jsx)("div",{style:h,role:"button",onClick:t,tabIndex:d,onPointerLeave:f,onPointerEnter:p,children:e})}},100477,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ExplorerPanel=r.explorerSidebarTabs=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(175592),s=e.r(469907),l=e.r(519897),u=e.r(79999),c={height:"100%",width:"100%",maxWidth:"100%",display:"flex",flexDirection:"column",flex:1},d="remotion.sidebarPanel",p={backgroundColor:n.BACKGROUND},f=e=>{localStorage.setItem(d,e)};r.explorerSidebarTabs=(0,a.createRef)(),r.ExplorerPanel=({readOnlyStudio:e})=>{let[t,n]=(0,a.useState)(()=>"assets"===localStorage.getItem(d)?"assets":"compositions"),h=(0,a.useCallback)(()=>{n("compositions"),f("compositions")},[]),m=(0,a.useCallback)(()=>{n("assets"),f("assets")},[]);return(0,a.useImperativeHandle)(r.explorerSidebarTabs,()=>({selectAssetsPanel:()=>{n("assets"),f("assets")},selectCompositionPanel:()=>{n("compositions"),f("compositions")}}),[]),(0,i.jsx)(l.CompSelectorRef,{children:(0,i.jsxs)("div",{style:c,className:"css-reset",children:[(0,i.jsx)("div",{style:p,children:(0,i.jsxs)(u.Tabs,{children:[(0,i.jsx)(u.Tab,{selected:"compositions"===t,onClick:h,children:"Compositions"}),(0,i.jsx)(u.Tab,{selected:"assets"===t,onClick:m,children:"Assets"})]})}),"compositions"===t?(0,i.jsx)(s.CompositionSelector,{}):(0,i.jsx)(o.AssetSelector,{readOnlyStudio:e})]})})}},570431,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.InitialCompositionLoader=r.useSelectComposition=r.useSelectAsset=void 0;let i=e.r(347540),a=e.r(49019),n=e.r(208795),o=e.r(321743),s=e.r(910105),l=e.r(873273),u=e.r(839270),c=e.r(469907),d=e.r(100477),p=e.r(401574);r.useSelectAsset=()=>{let{setCanvasContent:e}=(0,i.useContext)(a.Internals.CompositionSetters),{setAssetFoldersExpanded:t}=(0,i.useContext)(l.FolderContext);return r=>{var i;e({type:"asset",asset:r}),null==(i=d.explorerSidebarTabs.current)||i.selectAssetsPanel(),t(e=>{let t=r.split("/"),i=t.map((e,r)=>t.slice(0,r).join("/")),a={...e};for(let e of i)a[e]=!0;return a})}},r.useSelectComposition=()=>{let{setCompositionFoldersExpanded:e}=(0,i.useContext)(l.FolderContext),{setCanvasContent:t}=(0,i.useContext)(a.Internals.CompositionSetters),r=(0,o.useMobileLayout)(),{setSidebarCollapsedState:n}=(0,i.useContext)(u.SidebarContext);return(0,i.useCallback)((i,a)=>{var o;a&&(0,s.pushUrl)(`/${i.id}`),null==(o=d.explorerSidebarTabs.current)||o.selectCompositionPanel(),t({type:"composition",compositionId:i.id});let{folderName:l,parentFolderName:u}=i;null!==l&&(e(e=>{let t=(0,c.getKeysToExpand)(l,u),r={...e};for(let e of t)r[e]=!0;return r}),r&&n({left:"collapsed",right:"collapsed"}))},[r,t,e,n])},r.InitialCompositionLoader=()=>{let{compositions:e,canvasContent:t}=(0,i.useContext)(a.Internals.CompositionManager),{setCanvasContent:o}=(0,i.useContext)(a.Internals.CompositionSetters),l=(0,r.useSelectComposition)(),u=(0,r.useSelectAsset)();return(0,i.useEffect)(()=>{if(t)return;let r=(0,p.deriveCanvasContentFromUrl)();if(r&&"composition"===r.type){let t=e.find(e=>e.id===r.compositionId);t&&l(t,!1);return}r&&"asset"===r.type?u(r.asset):r&&"output"===r.type?o(r):e.length>0&&l(e[0],!0)},[e,t,l,o,u]),(0,i.useEffect)(()=>{let t=()=>{let t=(0,p.deriveCanvasContentFromUrl)();if(t&&"composition"===t.type){let t=(0,s.getRoute)().substring(1),r=e.find(e=>e.id===t);r&&l(r,!1);return}if(t&&"asset"===t.type){(0,n.getStaticFiles)().find(e=>e.name===t.asset)&&o(t);return}o(t)};return window.addEventListener("popstate",t),()=>window.removeEventListener("popstate",t)},[e,l,o]),null}},605886,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ModalContainer=r.getMaxModalHeight=r.getMaxModalWidth=void 0;let i=e.r(222260),a=e.r(921224),n=e.r(260240);r.getMaxModalWidth=e=>`min(calc(100vw - 40px), calc(${e}px - 40px))`,r.getMaxModalHeight=e=>`min(calc(100vh - 40px), calc(${e}px - 40px))`;let o={backgroundColor:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(1px)",position:"fixed",height:"100%",width:"100%",display:"flex",padding:20},s={backgroundColor:a.BACKGROUND,boxShadow:"0 0 4px black",color:"white",margin:"auto"};r.ModalContainer=({children:e,onEscape:t,onOutsideClick:r,noZIndex:a})=>(0,i.jsx)("div",{className:"css-reset",style:o,role:"dialog","aria-modal":"true",children:(0,i.jsx)(n.HigherZIndex,{disabled:a,onOutsideClick:r,onEscape:t,children:(0,i.jsx)("div",{style:s,children:e})})})},39696,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CancelButton=void 0;let i=e.r(222260),a=e.r(260240),n={appearance:"none",border:"none",backgroundColor:"transparent",color:"white",cursor:"pointer",display:"inline-flex",justifyContent:"center",alignItems:"center"};r.CancelButton=({onPress:e,...t})=>{let{tabIndex:r}=(0,a.useZIndex)();return(0,i.jsx)("button",{tabIndex:r,style:n,type:"button",onClick:e,children:(0,i.jsx)("svg",{viewBox:"0 0 320 512",...t,children:(0,i.jsx)("path",{fill:"currentColor",d:"M207.6 256l107.72-107.72c6.23-6.23 6.23-16.34 0-22.58l-25.03-25.03c-6.23-6.23-16.34-6.23-22.58 0L160 208.4 52.28 100.68c-6.23-6.23-16.34-6.23-22.58 0L4.68 125.7c-6.23 6.23-6.23 16.34 0 22.58L112.4 256 4.68 363.72c-6.23 6.23-6.23 16.34 0 22.58l25.03 25.03c6.23 6.23 16.34 6.23 22.58 0L160 303.6l107.72 107.72c6.23 6.23 16.34 6.23 22.58 0l25.03-25.03c6.23-6.23 6.23-16.34 0-22.58L207.6 256z"})})})}},80047,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ModalHeader=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(137798),o=e.r(39696),s=e.r(146575),l={display:"flex",flexDirection:"row",alignItems:"center",padding:"12px 16px",width:"100%",borderBottom:"1px solid black"},u={fontSize:14,color:"white"},c={height:20,width:20};r.ModalHeader=({title:e,onClose:t})=>{let{setSelectedModal:r}=(0,a.useContext)(n.ModalsContext),d=(0,a.useCallback)(()=>{r(null)},[r]);return(0,i.jsxs)("div",{style:l,children:[(0,i.jsx)("div",{style:u,children:e}),(0,i.jsx)(s.Flex,{}),(0,i.jsx)(o.CancelButton,{style:c,onPress:null!=t?t:d})]})}},413088,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AskAiModal=r.askAiModalRef=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(605886),s=e.r(80047),l={height:"calc(100vh - 100px)",width:"calc(100vw - 160px)",maxWidth:800,maxHeight:900,display:"block"};r.askAiModalRef=(0,a.createRef)(),r.AskAiModal=()=>{let[e,t]=(0,a.useState)("never-opened"),u=(0,a.useRef)(null);(0,a.useImperativeHandle)(r.askAiModalRef,()=>({toggle:()=>{t(e=>{var t,r,i;return"visible"===e&&(null==(t=u.current)||t.blur(),null==(i=null==(r=u.current)?void 0:r.contentWindow)||i.blur()),"visible"===e?"hidden":"visible"})}}),[]),(0,a.useEffect)(()=>{let e=e=>{var t;try{let i="string"==typeof e.data?JSON.parse(e.data):e.data;"cmd-i"===i.type&&(null==(t=r.askAiModalRef.current)||t.toggle())}catch(e){}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[]);let c=(0,a.useCallback)(()=>{t("hidden")},[t]);return((0,a.useEffect)(()=>{var t;u.current&&"visible"===e&&(null==(t=u.current.contentWindow)||t.postMessage({type:"focus"},"*"))},[e]),"never-opened"===e)?null:(0,i.jsx)(n.AbsoluteFill,{style:{display:"visible"===e?"block":"none"},children:(0,i.jsxs)(o.ModalContainer,{noZIndex:"hidden"===e,onOutsideClick:c,onEscape:c,children:[(0,i.jsx)(s.ModalHeader,{title:"Ask AI",onClose:c}),(0,i.jsx)("iframe",{ref:u,frameBorder:0,style:l,src:"https://www.remotion.dev/ai-embed",allow:"clipboard-read; clipboard-write"})]})})}},170260,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Checkmark=void 0;let i=e.r(222260),a={width:14,height:14};r.Checkmark=()=>(0,i.jsx)("svg",{focusable:"false",role:"img",viewBox:"0 0 512 512",style:a,children:(0,i.jsx)("path",{fill:"currentColor",d:"M435.848 83.466L172.804 346.51l-96.652-96.652c-4.686-4.686-12.284-4.686-16.971 0l-28.284 28.284c-4.686 4.686-4.686 12.284 0 16.971l133.421 133.421c4.686 4.686 12.284 4.686 16.971 0l299.813-299.813c4.686-4.686 4.686-12.284 0-16.971l-28.284-28.284c-4.686-4.686-12.284-4.686-16.97 0z"})})},488441,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ControlButton=r.CONTROL_BUTTON_PADDING=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(260240);r.CONTROL_BUTTON_PADDING=6,r.ControlButton=e=>{let t=(0,a.useMemo)(()=>({opacity:e.disabled?.5:1,display:"inline-flex",background:"none",border:"none",padding:r.CONTROL_BUTTON_PADDING}),[e.disabled]),{tabIndex:o}=(0,n.useZIndex)();return(0,i.jsx)("button",{type:"button",tabIndex:o,...e,style:t})}},432804,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.Combobox=void 0;let a=e.r(222260),n=e.r(853987),o=e.r(347540),s=i(e.r(149579)),l=e.r(921224),u=e.r(321743),c=e.r(971831),d=e.r(191928),p=e.r(260240),f=e.r(494296),h=e.r(414321),m=e.r(490586),g=e.r(146575),v=e.r(67405),y={padding:"8px 10px",display:"inline-block",backgroundColor:l.INPUT_BACKGROUND,borderWidth:1,borderStyle:"solid",maxWidth:"100%"},b={flex:1,overflow:"hidden",textOverflow:"ellipsis",fontSize:14,textAlign:"left"};r.Combobox=({values:e,selectedId:t,style:r,title:i})=>{let[x,w]=(0,o.useState)(!1),[S,k]=(0,o.useState)(!1),C=(0,o.useRef)(null),{tabIndex:E,currentZIndex:_}=(0,p.useZIndex)(),T=n.PlayerInternals.useElementSize(C,{triggerOnWindowResize:!0,shouldApplyCssTransforms:!0}),P=null==T?void 0:T.refresh,I=(0,o.useCallback)(()=>{k(!1)},[]);(0,o.useEffect)(()=>{let{current:e}=C;if(!e)return;let t=()=>w(!0),r=()=>w(!1),i=()=>k(e=>(e||null==P||P(),!e)),a=e=>{if(e.stopPropagation(),0===e.detail)return k(e=>(e||(null==P||P(),window.addEventListener("pointerup",e=>{(0,f.isMenuItem)(e.target)||k(!1)},{once:!0})),!e))};return e.addEventListener("mouseenter",t),e.addEventListener("mouseleave",r),e.addEventListener("pointerdown",i),e.addEventListener("click",a),()=>{e.removeEventListener("mouseenter",t),e.removeEventListener("mouseleave",r),e.removeEventListener("pointerdown",i),e.removeEventListener("click",a)}},[P]);let A=(0,o.useMemo)(()=>T&&S?T.windowSize.height-(T.top+T.height)-10:0,[S,T]),O=(0,o.useMemo)(()=>T&&S?T.top-10:0,[S,T]),M=(0,o.useMemo)(()=>O>A?O:A,[A,O]),F=(0,u.useMobileLayout)(),R=(0,o.useMemo)(()=>{if(!S||!T)return null;let e=T.windowSize.width-T.left,t=T.left+T.width,r=F?m.MAX_MOBILE_MENU_WIDTH:m.MAX_MENU_WIDTH;return{..."top"==(O>A?"bottom":"top")?{...m.menuContainerTowardsBottom,top:T.top+T.height}:{...m.menuContainerTowardsTop,bottom:T.windowSize.height-T.top},..."left"==(e>=r?"left":"right")?{left:T.left}:t>=r?{right:T.windowSize.width-T.left-T.width}:{left:0}}},[F,S,T,A,O]),D=e.find(e=>e.id===t),j=(0,o.useMemo)(()=>({...y,...null!=r?r:{},userSelect:"none",WebkitUserSelect:"none",color:"white",display:"inline-flex",flexDirection:"row",alignItems:"center",borderColor:S?l.SELECTED_BACKGROUND:x?l.INPUT_BORDER_COLOR_HOVERED:l.INPUT_BORDER_COLOR_UNHOVERED}),[r,x,S]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{ref:C,title:i,tabIndex:E,type:"button",style:j,className:f.MENU_INITIATOR_CLASSNAME,children:[D?(0,a.jsx)("div",{title:"string"==typeof D.label?D.label:void 0,style:b,children:null==D?void 0:D.label}):null,(0,a.jsx)(g.Spacing,{x:1})," ",(0,a.jsx)(d.CaretDown,{})]}),R?s.default.createPortal((0,a.jsx)("div",{style:m.fullScreenOverlay,children:(0,a.jsx)("div",{style:m.outerPortal,className:"css-reset",children:(0,a.jsx)(p.HigherZIndex,{onOutsideClick:I,onEscape:I,children:(0,a.jsx)("div",{style:R,children:(0,a.jsx)(v.MenuContent,{onNextMenu:c.noop,onPreviousMenu:c.noop,values:e,onHide:I,leaveLeftSpace:!0,preselectIndex:e.findIndex(e=>D&&e.id===D.id),topItemCanBeUnselected:!1,fixedHeight:M})})})})}),(0,h.getPortal)(_)):null]})}},110487,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.checkerboardBackgroundImage=r.checkerboardBackgroundColor=r.getCheckerboardBackgroundPos=r.getCheckerboardBackgroundSize=void 0,r.getCheckerboardBackgroundSize=e=>`${e}px ${e}px`,r.getCheckerboardBackgroundPos=e=>`0 0, ${e/2}px 0, ${e/2}px -${e/2}px, 0px ${e/2}px`,r.checkerboardBackgroundColor=e=>e?"white":"black",r.checkerboardBackgroundImage=e=>{if(e)return`
     linear-gradient(
        45deg,
        rgba(0, 0, 0, 0.1) 25%,
        transparent 25%
      ),
      linear-gradient(135deg, rgba(0, 0, 0, 0.1) 25%, transparent 25%),
      linear-gradient(45deg, transparent 75%, rgba(0, 0, 0, 0.1) 75%),
      linear-gradient(135deg, transparent 75%, rgba(0, 0, 0, 0.1) 75%)
    `}},786676,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CheckerboardContext=r.loadCheckerboardOption=r.persistCheckerboardOption=void 0;let i=e.r(347540);r.persistCheckerboardOption=e=>{localStorage.setItem("option",String(e))},r.loadCheckerboardOption=()=>"false"!==localStorage.getItem("option"),r.CheckerboardContext=(0,i.createContext)({checkerboard:(0,r.loadCheckerboardOption)(),setCheckerboard:()=>void 0})},787488,(e,t,r)=>{"use strict";function i(e,t,r){for(let i=0;i<r.length;i++)e.setUint8(t+i,r.charCodeAt(i))}Object.defineProperty(r,"__esModule",{value:!0}),r.audioBufferToWav=function(e,t){let r=e.numberOfChannels,{sampleRate:a}=e,n=t.float32?3:1;return function({samples:e,format:t,sampleRate:r,numChannels:a,bitDepth:n}){let o=n/8,s=a*o,l=new ArrayBuffer(44+e.length*o),u=new DataView(l);if(i(u,0,"RIFF"),u.setUint32(4,36+e.length*o,!0),i(u,8,"WAVE"),i(u,12,"fmt "),u.setUint32(16,16,!0),u.setUint16(20,t,!0),u.setUint16(22,a,!0),u.setUint32(24,r,!0),u.setUint32(28,r*s,!0),u.setUint16(32,s,!0),u.setUint16(34,n,!0),i(u,36,"data"),u.setUint32(40,e.length*o,!0),1===t){var c=44;for(let t=0;t<e.length;t++,c+=2){let r=Math.max(-1,Math.min(1,e[t]));u.setInt16(c,r<0?32768*r:32767*r,!0)}}else{var d=44;for(let t=0;t<e.length;t++,d+=4)u.setFloat32(d,e[t],!0)}return l}({samples:2===r?function(e,t){let r=e.length+t.length,i=new Float32Array(r),a=0,n=0;for(;a<r;)i[a++]=e[n],i[a++]=t[n],n++;return i}(e.getChannelData(0),e.getChannelData(1)):e.getChannelData(0),format:n,sampleRate:a,numChannels:r,bitDepth:3===n?32:16})}},309660,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.audioBufferToDataUrl=void 0;let i=e.r(787488);r.audioBufferToDataUrl=e=>{let t=(0,i.audioBufferToWav)(e,{float32:!0}),r="",a=new Uint8Array(t),n=a.byteLength;for(let e=0;e<n;e++)r+=String.fromCharCode(a[e]);return"data:audio/wav;base64,"+window.btoa(r)}},812930,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createSmoothSvgPath=void 0;let i=({current:e,previous:t,next:r,reverse:i})=>{let a,n,o=t||e,s=r||e,l=(a=s.x-o.x,{length:Math.sqrt(a**2+(n=s.y-o.y)**2),angle:Math.atan2(n,a)}),u=l.angle+(i?Math.PI:0),c=.2*l.length;return{x:e.x+Math.cos(u)*c,y:e.y+Math.sin(u)*c}};r.createSmoothSvgPath=({points:e})=>e.reduce((e,t,r,a)=>{if(0===r)return`M ${t.x},${t.y}`;let{x:n,y:o}=t,s=a[r-1],l=a[r-2],u=a[r+1],{x:c,y:d}=i({current:s,previous:l,next:t,reverse:!1}),{x:p,y:f}=i({current:t,previous:s,next:u,reverse:!0});return`${e} C ${c},${d} ${p},${f} ${n},${o}`},"")},430556,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fetchWithCorsCatch=void 0,r.fetchWithCorsCatch=async(e,t)=>{try{return await fetch(e,{mode:"cors",referrerPolicy:"no-referrer-when-downgrade",...t})}catch(t){if(t.message.includes("Failed to fetch")||t.message.includes("Load failed")||t.message.includes("NetworkError when attempting to fetch resource"))throw TypeError(`Failed to read from ${e}: ${t.message}. Does the resource support CORS?`);throw t}}},999859,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isRemoteAsset=void 0,r.isRemoteAsset=e=>!e.startsWith(window.origin)&&!e.startsWith("data")},396730,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.pLimit=void 0,r.pLimit=e=>{let t=[],r=0,i=async(e,i,...a)=>{var n;r++;let o=(async()=>e(...a))();i(o);try{await o}catch(e){}r--,t.length>0&&(null==(n=t.shift())||n())},a=(a,...n)=>new Promise(o=>{((a,n,...o)=>{t.push(()=>i(a,n,...o)),(async()=>{var i;await Promise.resolve(),r<e&&t.length>0&&(null==(i=t.shift())||i())})()})(a,o,...n)});return Object.defineProperties(a,{activeCount:{get:()=>r},pendingCount:{get:()=>t.length},clearQueue:{value:()=>{t.length=0}}}),a}},722216,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getAudioData=void 0;let i=e.r(430556),a=e.r(999859),n=e.r(396730),o={},s=(0,n.pLimit)(3),l=async(e,t)=>{var r;if(o[e])return o[e];if("u"<typeof document)throw Error("getAudioData() is only available in the browser.");let n=new AudioContext({sampleRate:null!=(r=null==t?void 0:t.sampleRate)?r:48e3}),s=await (0,i.fetchWithCorsCatch)(e);if(!s.ok)throw Error(`Failed to fetch audio data from ${e}: ${s.status} ${s.statusText}`);let l=await s.arrayBuffer(),u=await n.decodeAudioData(l),c={channelWaveforms:Array(u.numberOfChannels).fill(!0).map((e,t)=>u.getChannelData(t)),sampleRate:u.sampleRate,durationInSeconds:u.duration,numberOfChannels:u.numberOfChannels,resultId:String(Math.random()),isRemote:(0,a.isRemoteAsset)(e)};return o[e]=c,c};r.getAudioData=(e,t)=>s(l,e,t)},923305,(e,t,r)=>{"use strict";async function i(e,t,r=3e3){let a=new AbortController,n=setTimeout(()=>a.abort(),r);t.signal=a.signal;try{let r=await fetch(e,t);return clearTimeout(n),r}catch(e){throw clearTimeout(n),Error(`Fetch timed out after ${r}ms`)}}Object.defineProperty(r,"__esModule",{value:!0}),r.onMediaError=void 0;let a=async({suspecting404:e,sameOrigin:t,src:r})=>{if(!e||!t)return Promise.resolve(null);try{return await i(r,{method:"HEAD",mode:"no-cors"}).then(e=>e.status)}catch(e){return Promise.resolve(null)}};r.onMediaError=({error:e,src:t,reject:r,cleanup:i,api:n})=>{a({suspecting404:e.MEDIA_ERR_SRC_NOT_SUPPORTED===e.code,sameOrigin:new URL(t,window.location.origin).toString().startsWith(window.location.origin),src:t}).then(a=>{r(404===a?Error(`Failed to execute ${n}: Received a 404 error loading "${t}". Correct the URL of the file.`):Error([`Failed to execute ${n}, Received a MediaError loading "${t}". Consider using parseMedia() instead which supports more codecs: https://www.remotion.dev/docs/miscellaneous/parse-media-vs-get-video-metadata`,null===a?null:`HTTP Status code of the file: ${a}.`,e.message?`Browser error message: ${e.message}`:null,"Check the path of the file and if it is a valid video."].filter(Boolean).join(" "))),i()}).catch(e=>{r(e),i()})}},985225,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getAudioDuration=r.getAudioDurationInSeconds=void 0;let i=e.r(923305),a=(0,e.r(396730).pLimit)(3),n={},o=e=>{if(n[e])return Promise.resolve(n[e]);if("u"<typeof document)throw Error("getAudioDuration() is only available in the browser.");let t=document.createElement("audio");return t.src=e,new Promise((r,a)=>{let o=()=>{(0,i.onMediaError)({error:t.error,src:e,cleanup:l,reject:a,api:"getAudioDurationInSeconds()"})},s=()=>{n[e]=t.duration,r(t.duration),l()},l=()=>{t.removeEventListener("loadedmetadata",s),t.removeEventListener("error",o),t.remove()};t.addEventListener("loadedmetadata",s,{once:!0}),t.addEventListener("error",o,{once:!0})})};r.getAudioDurationInSeconds=e=>a(o,e),r.getAudioDuration=e=>(0,r.getAudioDurationInSeconds)(e)},786530,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getImageDimensions=function(e){return n(o,e)};let i=e.r(396730),a={},n=(0,i.pLimit)(3),o=async e=>{if(a[e])return a[e];if("u"<typeof document)throw Error("getImageDimensions() is only available in the browser.");let t=await new Promise((t,r)=>{let i=new Image;i.onload=()=>{let{width:e,height:r}=i;t({width:e,height:r})},i.onerror=r,i.src=e});return a[e]=t,t}},62284,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getVideoMetadata=void 0;let i=e.r(999859),a=e.r(923305),n=e.r(396730),o={},s=(0,n.pLimit)(3),l=e=>{if(o[e])return Promise.resolve(o[e]);if("u"<typeof document)throw Error("getVideoMetadata() is only available in the browser.");let t=document.createElement("video");return t.src=e,new Promise((r,n)=>{let s=()=>{(0,a.onMediaError)({error:t.error,src:e,cleanup:u,reject:n,api:"getVideoMetadata()"})},l=()=>{if(0==t.videoHeight*t.videoWidth)return void n(Error(`Unable to determine video metadata for ${e}`));if(!Number.isFinite(t.duration))return void n(Error(`Unable to determine video duration for ${e} - got Infinity. Re-encoding this video may fix this issue.`));let a={durationInSeconds:t.duration,width:t.videoWidth,height:t.videoHeight,aspectRatio:t.videoWidth/t.videoHeight,isRemote:(0,i.isRemoteAsset)(e)};r(a),o[e]=a,u()},u=()=>{t.removeEventListener("loadedmetadata",l),t.removeEventListener("error",s),t.remove()};t.addEventListener("loadedmetadata",l,{once:!0}),t.addEventListener("error",s,{once:!0})})};r.getVideoMetadata=e=>s(l,e)},87171,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.normalizeData=void 0,r.normalizeData=e=>{let t=Math.max(...e),r=0===t?0:t**-1;return e.map(e=>e*r)}},968008,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getWaveformSamples=void 0;let i=e.r(87171);r.getWaveformSamples=({audioBuffer:e,numberOfSamples:t,outputRange:r,normalize:a})=>{let n=Math.floor(e.length/t);if(0===n)return[];let o=[];for(let r=0;r<t;r++){let t=n*r,i=0;for(let r=0;r<n;r++)i+=Math.abs(e[t+r]);o.push(i/n)}return a?"minus-one-to-one"===r?(0,i.normalizeData)(o).map((e,t)=>t%2==0?-1*e:e):(0,i.normalizeData)(o):"minus-one-to-one"===r?o.map((e,t)=>t%2==0?-1*e:e):o}},517523,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateChannel=void 0,r.validateChannel=(e,t)=>{if("number"!=typeof e)throw TypeError('"channel" must be a number');if(e%1!=0)throw TypeError(`"channel" must an integer, got ${e}`);if(Number.isNaN(e))throw TypeError("The channel parameter is NaN.");if(e<0)throw TypeError('"channel" cannot be negative');if(e>t-1)throw TypeError(`"channel" must be ${t-1} or lower. The audio has ${t} channels`)}},927513,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getWaveformPortion=void 0;let i=e.r(758927),a=e.r(968008),n=e.r(517523);r.getWaveformPortion=({audioData:e,startTimeInSeconds:t,durationInSeconds:r,numberOfSamples:o,channel:s=0,outputRange:l="zero-to-one",dataOffsetInSeconds:u,normalize:c=!0})=>{(0,n.validateChannel)(s,e.numberOfChannels);let d=e.channelWaveforms[s],p=Math.floor((t-(null!=u?u:0))*e.sampleRate),f=Math.floor((t-(null!=u?u:0)+r)*e.sampleRate),h=0-p,m=f-d.length,g=Math.max(p,0),v=Math.min(d.length,f),y=h>0?new Float32Array(h).fill(0):null,b=m>0?new Float32Array(m).fill(0):null,x=[y,d.slice(g,v),b].filter(i.NoReactInternals.truthy),w=1===x.length?x[0]:(e=>{let t=new Float32Array(e.reduce((e,t)=>e+t.length,0)),r=0;for(let i of e)t.set(i,r),r+=i.length;return t})(x);return(0,a.getWaveformSamples)({audioBuffer:w,numberOfSamples:o,outputRange:l,normalize:c}).map((e,t)=>({index:t,amplitude:e}))}},939593,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},827499,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useAudioData=void 0;let i=e.r(347540),a=e.r(49019),n=e.r(722216);r.useAudioData=e=>{if(!e)throw TypeError("useAudioData requires a 'src' parameter");let t=(0,i.useRef)({isMounted:!0});(0,i.useEffect)(()=>{let{current:e}=t;return e.isMounted=!0,()=>{e.isMounted=!1}},[]);let[r,o]=(0,i.useState)(null),{delayRender:s,continueRender:l}=(0,a.useDelayRender)(),u=(0,i.useCallback)(async()=>{let r=s(`Waiting for audio metadata with src="${e}" to be loaded`);try{let r=await (0,n.getAudioData)(e);t.current.isMounted&&o(r)}catch(e){(0,a.cancelRender)(e)}l(r)},[e,s,l]);return(0,i.useLayoutEffect)(()=>{u()},[u]),r}},129795,(e,t,r)=>{"use strict";var i=(()=>{let e,t;var r=Object.create,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,l=(e,t,r,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of n(t))s.call(e,l)||l===r||i(e,l,{get:()=>t[l],enumerable:!(o=a(t,l))||o.enumerable});return e},u=(e,t,a)=>(a=null!=e?r(o(e)):{},l(!t&&e&&e.__esModule?a:i(a,"default",{value:e,enumerable:!0}),e)),c=(e={"(disabled):src/node"(){}},function(){return t||(0,e[n(e)[0]])((t={exports:{}}).exports,t),t.exports}),d={},p={ADTS:()=>ai,ALL_FORMATS:()=>ao,ALL_TRACK_TYPES:()=>sA,AUDIO_CODECS:()=>eI,AdtsInputFormat:()=>i3,AdtsOutputFormat:()=>oq,AttachedFile:()=>eS,AudioBufferSink:()=>rh,AudioBufferSource:()=>sx,AudioSample:()=>t4,AudioSampleSink:()=>rf,AudioSampleSource:()=>sb,AudioSource:()=>sg,BaseMediaSampleSink:()=>rn,BlobSource:()=>ad,BufferSource:()=>ac,BufferTarget:()=>oh,CanvasSink:()=>rc,CanvasSource:()=>sh,Conversion:()=>sD,ConversionCanceledError:()=>sj,CustomAudioDecoder:()=>tM,CustomAudioEncoder:()=>tR,CustomVideoDecoder:()=>tO,CustomVideoEncoder:()=>tF,EncodedAudioPacketSource:()=>sv,EncodedPacket:()=>tU,EncodedPacketSink:()=>ri,EncodedVideoPacketSource:()=>sc,FLAC:()=>aa,FilePathSource:()=>ah,FilePathTarget:()=>og,FlacInputFormat:()=>i4,FlacOutputFormat:()=>oG,Input:()=>ab,InputAudioTrack:()=>rv,InputDisposedError:()=>ax,InputFormat:()=>iZ,InputTrack:()=>rm,InputVideoTrack:()=>rg,IsobmffInputFormat:()=>iK,IsobmffOutputFormat:()=>oB,MATROSKA:()=>i7,MP3:()=>ae,MP4:()=>i8,MPEG_TS:()=>an,MatroskaInputFormat:()=>iJ,MediaSource:()=>sl,MediaStreamAudioTrackSource:()=>sw,MediaStreamVideoTrackSource:()=>sm,MkvOutputFormat:()=>oz,MovOutputFormat:()=>o$,Mp3InputFormat:()=>i0,Mp3OutputFormat:()=>oV,Mp4InputFormat:()=>iQ,Mp4OutputFormat:()=>oN,MpegTsInputFormat:()=>i6,MpegTsOutputFormat:()=>oZ,NON_PCM_AUDIO_CODECS:()=>eP,NullTarget:()=>ov,OGG:()=>ar,OggInputFormat:()=>i2,OggOutputFormat:()=>oW,Output:()=>sM,OutputFormat:()=>oL,PCM_AUDIO_CODECS:()=>eT,QTFF:()=>i5,QUALITY_HIGH:()=>o6,QUALITY_LOW:()=>o4,QUALITY_MEDIUM:()=>o3,QUALITY_VERY_HIGH:()=>o8,QUALITY_VERY_LOW:()=>o2,Quality:()=>o1,QuickTimeInputFormat:()=>iX,ReadableStreamSource:()=>ag,RichImageData:()=>ew,SUBTITLE_CODECS:()=>eA,Source:()=>au,StreamSource:()=>am,StreamTarget:()=>om,SubtitleSource:()=>sP,Target:()=>of,TextSubtitleSource:()=>sI,UrlSource:()=>af,VIDEO_CODECS:()=>e_,VIDEO_SAMPLE_PIXEL_FORMATS:()=>tq,VideoSample:()=>tZ,VideoSampleColorSpace:()=>tK,VideoSampleSink:()=>ru,VideoSampleSource:()=>sf,VideoSource:()=>su,WAVE:()=>at,WEBM:()=>i9,WavOutputFormat:()=>oH,WaveInputFormat:()=>i1,WebMInputFormat:()=>iY,WebMOutputFormat:()=>oU,canEncode:()=>o5,canEncodeAudio:()=>o9,canEncodeSubtitles:()=>se,canEncodeVideo:()=>o7,getEncodableAudioCodecs:()=>si,getEncodableCodecs:()=>st,getEncodableSubtitleCodecs:()=>sa,getEncodableVideoCodecs:()=>sr,getFirstEncodableAudioCodec:()=>so,getFirstEncodableSubtitleCodec:()=>ss,getFirstEncodableVideoCodec:()=>sn,registerDecoder:()=>tN,registerEncoder:()=>t$};for(var f in p)i(d,f,{get:p[f],enumerable:!0});function h(e){if(!e)throw Error("Assertion failed.")}var m=e=>{let t=(e%360+360)%360;if(0===t||90===t||180===t||270===t)return t;throw Error(`Invalid rotation ${e}.`)},g=e=>e&&e[e.length-1],v=e=>e>=0&&e<0x100000000,y=class e{constructor(e){this.bytes=e,this.pos=0}seekToByte(e){this.pos=8*e}readBit(){let e=Math.floor(this.pos/8),t=this.bytes[e]??0,r=7-(7&this.pos);return this.pos++,(t&1<<r)>>r}readBits(e){if(1===e)return this.readBit();let t=0;for(let r=0;r<e;r++)t<<=1,t|=this.readBit();return t}writeBits(e,t){let r=this.pos+e;for(let e=this.pos;e<r;e++){let i=Math.floor(e/8),a=this.bytes[i],n=7-(7&e);a&=~(1<<n),a|=(t&1<<r-e-1)>>r-e-1<<n,this.bytes[i]=a}this.pos=r}readAlignedByte(){if(this.pos%8!=0)throw Error("Bitstream is not byte-aligned.");let e=this.pos/8,t=this.bytes[e]??0;return this.pos+=8,t}skipBits(e){this.pos+=e}getBitsLeft(){return 8*this.bytes.length-this.pos}clone(){let t=new e(this.bytes);return t.pos=this.pos,t}},b=e=>{let t=0;for(;0===e.readBits(1)&&t<32;)t++;if(t>=32)throw Error("Invalid exponential-Golomb code.");return(1<<t)-1+e.readBits(t)},x=e=>{let t=b(e);return(1&t)==0?-(t>>1):t+1>>1},w=e=>e.constructor===Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e),S=e=>e.constructor===DataView?e:ArrayBuffer.isView(e)?new DataView(e.buffer,e.byteOffset,e.byteLength):new DataView(e),k=new TextDecoder,C=new TextEncoder,E=e=>{for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!1;return!0},_=e=>Object.fromEntries(Object.entries(e).map(([e,t])=>[t,e])),T={bt709:1,bt470bg:5,smpte170m:6,bt2020:9,smpte432:12},P=_(T),I={bt709:1,smpte170m:6,linear:8,"iec61966-2-1":13,pq:16,hlg:18},A=_(I),O={rgb:0,bt709:1,bt470bg:5,smpte170m:6,"bt2020-ncl":9},M=_(O),F=e=>!!e&&!!e.primaries&&!!e.transfer&&!!e.matrix&&void 0!==e.fullRange,R=e=>e instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer||ArrayBuffer.isView(e),D=class{constructor(){this.currentPromise=Promise.resolve(),this.pending=0}async acquire(){let e,t=new Promise(t=>{let r=!1;e=()=>{r||(t(),this.pending--,r=!0)}}),r=this.currentPromise;return this.currentPromise=t,this.pending++,await r,e}},j=e=>[...e].map(e=>e.toString(16).padStart(2,"0")).join(""),L=e=>(e=(e=(e=(e=(e=e>>1&0x55555555|(0x55555555&e)<<1)>>2&0x33333333|(0x33333333&e)<<2)>>4&0xf0f0f0f|(0xf0f0f0f&e)<<4)>>8&0xff00ff|(0xff00ff&e)<<8)>>16&65535|(65535&e)<<16)>>>0,B=(e,t,r)=>{let i=0,a=e.length-1,n=-1;for(;i<=a;){let o=i+a>>1,s=r(e[o]);s===t?(n=o,a=o-1):s<t?i=o+1:a=o-1}return n},N=(e,t,r)=>{let i=0,a=e.length-1,n=-1;for(;i<=a;){let o=i+(a-i+1)/2|0;r(e[o])<=t?(n=o,i=o+1):a=o-1}return n},$=(e,t,r)=>{let i=N(e,r(t),r);e.splice(i+1,0,t)},z=()=>{let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}},U=(e,t)=>{for(let r=e.length-1;r>=0;r--)if(t(e[r]))return e[r]},V=(e,t)=>{for(let r=e.length-1;r>=0;r--)if(t(e[r]))return r;return -1},H=async function*(e){Symbol.iterator in e?yield*e[Symbol.iterator]():yield*e[Symbol.asyncIterator]()},W=e=>{throw Error(`Unexpected value: ${e}`)},q=(e,t,r)=>{let i=e.getUint8(t),a=e.getUint8(t+1),n=e.getUint8(t+2);return r?i|a<<8|n<<16:i<<16|a<<8|n},G=(e,t,r,i)=>{r>>>=0,r&=0xffffff,i?(e.setUint8(t,255&r),e.setUint8(t+1,r>>>8&255),e.setUint8(t+2,r>>>16&255)):(e.setUint8(t,r>>>16&255),e.setUint8(t+1,r>>>8&255),e.setUint8(t+2,255&r))},Z=(e,t)=>({async next(){let r=await e.next();return r.done?{value:void 0,done:!0}:{value:t(r.value),done:!1}},return:()=>e.return(),throw:t=>e.throw(t),[Symbol.asyncIterator](){return this}}),K=(e,t,r)=>Math.max(t,Math.min(r,e)),Q=e=>{let t=Math.round(e);return Math.abs(e/t-1)<10*Number.EPSILON?t:e},X=(e,t)=>Math.round(e/t)*t,J=/^[a-z]{3}$/,Y=1e6*(1+Number.EPSILON),ee=(e,t)=>{let r={...e,...t};if(e.headers||t.headers){let i=e.headers?et(e.headers):{},a=t.headers?et(t.headers):{},n={...i};Object.entries(a).forEach(([e,t])=>{let r=Object.keys(n).find(t=>t.toLowerCase()===e.toLowerCase());r&&delete n[r],n[e]=t}),r.headers=n}return r},et=e=>{if(e instanceof Headers){let t={};return e.forEach((e,r)=>{t[r]=e}),t}if(Array.isArray(e)){let t={};return e.forEach(([e,r])=>{t[e]=r}),t}return e},er=async(e,t,r,i,a)=>{let n=0;for(;;)try{return await e(t,r)}catch(r){if(a())throw r;let e=i(++n,r,t);if(null===e)throw r;if(console.error("Retrying failed fetch. Error:",r),!Number.isFinite(e)||e<0)throw TypeError("Retry delay must be a non-negative finite number.");if(e>0&&await new Promise(t=>setTimeout(t,1e3*e)),a())throw r}},ei=class{constructor(){this.currentPromise=Promise.resolve()}call(e){return this.currentPromise=this.currentPromise.then(e)}},ea=null,en=()=>null!==ea?ea:ea=!!("u">typeof navigator&&(navigator.vendor?.match(/apple/i)||/AppleWebKit/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)||/\b(iPad|iPhone|iPod)\b/.test(navigator.userAgent))),eo=null,es=()=>null!==eo?eo:eo="u">typeof navigator&&navigator.userAgent?.includes("Firefox"),el=null,eu=()=>null!==el?el:el=!!("u">typeof navigator&&(navigator.vendor?.includes("Google Inc")||/Chrome/.test(navigator.userAgent))),ec=null,ed=()=>{if(null!==ec)return ec;if("u"<typeof navigator)return null;let e=/\bChrome\/(\d+)/.exec(navigator.userAgent);return e?ec=Number(e[1]):null},ep=(e,t)=>-1!==e?e:t,ef=(e,t,r,i)=>e<=i&&r<=t,eh=function*(e){for(let t in e){let r=e[t];void 0!==r&&(yield{key:t,value:r})}},em=e=>{switch(e.toLowerCase()){case"image/jpeg":case"image/jpg":return".jpg";case"image/png":return".png";case"image/gif":return".gif";case"image/webp":return".webp";case"image/bmp":return".bmp";case"image/svg+xml":return".svg";case"image/tiff":return".tiff";case"image/avif":return".avif";case"image/x-icon":case"image/vnd.microsoft.icon":return".ico";default:return null}},eg=e=>{let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r},ev=e=>{let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)},ey=(e,t)=>{if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},eb=()=>{Symbol.dispose??=Symbol("Symbol.dispose")},ex=e=>"number"==typeof e&&!Number.isNaN(e),ew=class{constructor(e,t){if(this.data=e,this.mimeType=t,!(e instanceof Uint8Array))throw TypeError("data must be a Uint8Array.");if("string"!=typeof t)throw TypeError("mimeType must be a string.")}},eS=class{constructor(e,t,r,i){if(this.data=e,this.mimeType=t,this.name=r,this.description=i,!(e instanceof Uint8Array))throw TypeError("data must be a Uint8Array.");if(void 0!==t&&"string"!=typeof t)throw TypeError("mimeType, when provided, must be a string.");if(void 0!==r&&"string"!=typeof r)throw TypeError("name, when provided, must be a string.");if(void 0!==i&&"string"!=typeof i)throw TypeError("description, when provided, must be a string.")}},ek=e=>{if(!e||"object"!=typeof e)throw TypeError("tags must be an object.");if(void 0!==e.title&&"string"!=typeof e.title)throw TypeError("tags.title, when provided, must be a string.");if(void 0!==e.description&&"string"!=typeof e.description)throw TypeError("tags.description, when provided, must be a string.");if(void 0!==e.artist&&"string"!=typeof e.artist)throw TypeError("tags.artist, when provided, must be a string.");if(void 0!==e.album&&"string"!=typeof e.album)throw TypeError("tags.album, when provided, must be a string.");if(void 0!==e.albumArtist&&"string"!=typeof e.albumArtist)throw TypeError("tags.albumArtist, when provided, must be a string.");if(void 0!==e.trackNumber&&(!Number.isInteger(e.trackNumber)||e.trackNumber<=0))throw TypeError("tags.trackNumber, when provided, must be a positive integer.");if(void 0!==e.tracksTotal&&(!Number.isInteger(e.tracksTotal)||e.tracksTotal<=0))throw TypeError("tags.tracksTotal, when provided, must be a positive integer.");if(void 0!==e.discNumber&&(!Number.isInteger(e.discNumber)||e.discNumber<=0))throw TypeError("tags.discNumber, when provided, must be a positive integer.");if(void 0!==e.discsTotal&&(!Number.isInteger(e.discsTotal)||e.discsTotal<=0))throw TypeError("tags.discsTotal, when provided, must be a positive integer.");if(void 0!==e.genre&&"string"!=typeof e.genre)throw TypeError("tags.genre, when provided, must be a string.");if(void 0!==e.date&&(!(e.date instanceof Date)||Number.isNaN(e.date.getTime())))throw TypeError("tags.date, when provided, must be a valid Date.");if(void 0!==e.lyrics&&"string"!=typeof e.lyrics)throw TypeError("tags.lyrics, when provided, must be a string.");if(void 0!==e.images){if(!Array.isArray(e.images))throw TypeError("tags.images, when provided, must be an array.");for(let t of e.images){if(!t||"object"!=typeof t)throw TypeError("Each image in tags.images must be an object.");if(!(t.data instanceof Uint8Array))throw TypeError("Each image.data must be a Uint8Array.");if("string"!=typeof t.mimeType)throw TypeError("Each image.mimeType must be a string.");if(!["coverFront","coverBack","unknown"].includes(t.kind))throw TypeError("Each image.kind must be 'coverFront', 'coverBack', or 'unknown'.")}}if(void 0!==e.comment&&"string"!=typeof e.comment)throw TypeError("tags.comment, when provided, must be a string.");if(void 0!==e.raw){if(!e.raw||"object"!=typeof e.raw)throw TypeError("tags.raw, when provided, must be an object.");for(let t of Object.values(e.raw))if(null!==t&&"string"!=typeof t&&!(t instanceof Uint8Array)&&!(t instanceof ew)&&!(t instanceof eS))throw TypeError("Each value in tags.raw must be a string, Uint8Array, RichImageData, AttachedFile, or null.")}},eC=e=>void 0===e.title&&void 0===e.description&&void 0===e.artist&&void 0===e.album&&void 0===e.albumArtist&&void 0===e.trackNumber&&void 0===e.tracksTotal&&void 0===e.discNumber&&void 0===e.discsTotal&&void 0===e.genre&&void 0===e.date&&void 0===e.lyrics&&(!e.images||0===e.images.length)&&void 0===e.comment&&(void 0===e.raw||0===Object.keys(e.raw).length),eE={default:!0,forced:!1,original:!1,commentary:!1,hearingImpaired:!1,visuallyImpaired:!1},e_=["avc","hevc","vp9","av1","vp8"],eT=["pcm-s16","pcm-s16be","pcm-s24","pcm-s24be","pcm-s32","pcm-s32be","pcm-f32","pcm-f32be","pcm-f64","pcm-f64be","pcm-u8","pcm-s8","ulaw","alaw"],eP=["aac","opus","mp3","vorbis","flac"],eI=[...eP,...eT],eA=["webvtt"],eO=[{maxMacroblocks:99,maxBitrate:64e3,maxDpbMbs:396,level:10},{maxMacroblocks:396,maxBitrate:192e3,maxDpbMbs:900,level:11},{maxMacroblocks:396,maxBitrate:384e3,maxDpbMbs:2376,level:12},{maxMacroblocks:396,maxBitrate:768e3,maxDpbMbs:2376,level:13},{maxMacroblocks:396,maxBitrate:2e6,maxDpbMbs:2376,level:20},{maxMacroblocks:792,maxBitrate:4e6,maxDpbMbs:4752,level:21},{maxMacroblocks:1620,maxBitrate:4e6,maxDpbMbs:8100,level:22},{maxMacroblocks:1620,maxBitrate:1e7,maxDpbMbs:8100,level:30},{maxMacroblocks:3600,maxBitrate:14e6,maxDpbMbs:18e3,level:31},{maxMacroblocks:5120,maxBitrate:2e7,maxDpbMbs:20480,level:32},{maxMacroblocks:8192,maxBitrate:2e7,maxDpbMbs:32768,level:40},{maxMacroblocks:8192,maxBitrate:5e7,maxDpbMbs:32768,level:41},{maxMacroblocks:8704,maxBitrate:5e7,maxDpbMbs:34816,level:42},{maxMacroblocks:22080,maxBitrate:135e6,maxDpbMbs:110400,level:50},{maxMacroblocks:36864,maxBitrate:24e7,maxDpbMbs:184320,level:51},{maxMacroblocks:36864,maxBitrate:24e7,maxDpbMbs:184320,level:52},{maxMacroblocks:139264,maxBitrate:24e7,maxDpbMbs:696320,level:60},{maxMacroblocks:139264,maxBitrate:48e7,maxDpbMbs:696320,level:61},{maxMacroblocks:139264,maxBitrate:8e8,maxDpbMbs:696320,level:62}],eM=[{maxPictureSize:36864,maxBitrate:128e3,tier:"L",level:30},{maxPictureSize:122880,maxBitrate:15e5,tier:"L",level:60},{maxPictureSize:245760,maxBitrate:3e6,tier:"L",level:63},{maxPictureSize:552960,maxBitrate:6e6,tier:"L",level:90},{maxPictureSize:983040,maxBitrate:1e7,tier:"L",level:93},{maxPictureSize:2228224,maxBitrate:12e6,tier:"L",level:120},{maxPictureSize:2228224,maxBitrate:3e7,tier:"H",level:120},{maxPictureSize:2228224,maxBitrate:2e7,tier:"L",level:123},{maxPictureSize:2228224,maxBitrate:5e7,tier:"H",level:123},{maxPictureSize:8912896,maxBitrate:25e6,tier:"L",level:150},{maxPictureSize:8912896,maxBitrate:1e8,tier:"H",level:150},{maxPictureSize:8912896,maxBitrate:4e7,tier:"L",level:153},{maxPictureSize:8912896,maxBitrate:16e7,tier:"H",level:153},{maxPictureSize:8912896,maxBitrate:6e7,tier:"L",level:156},{maxPictureSize:8912896,maxBitrate:24e7,tier:"H",level:156},{maxPictureSize:0x2200000,maxBitrate:6e7,tier:"L",level:180},{maxPictureSize:0x2200000,maxBitrate:24e7,tier:"H",level:180},{maxPictureSize:0x2200000,maxBitrate:12e7,tier:"L",level:183},{maxPictureSize:0x2200000,maxBitrate:48e7,tier:"H",level:183},{maxPictureSize:0x2200000,maxBitrate:24e7,tier:"L",level:186},{maxPictureSize:0x2200000,maxBitrate:8e8,tier:"H",level:186}],eF=[{maxPictureSize:36864,maxBitrate:2e5,level:10},{maxPictureSize:73728,maxBitrate:8e5,level:11},{maxPictureSize:122880,maxBitrate:18e5,level:20},{maxPictureSize:245760,maxBitrate:36e5,level:21},{maxPictureSize:552960,maxBitrate:72e5,level:30},{maxPictureSize:983040,maxBitrate:12e6,level:31},{maxPictureSize:2228224,maxBitrate:18e6,level:40},{maxPictureSize:2228224,maxBitrate:3e7,level:41},{maxPictureSize:8912896,maxBitrate:6e7,level:50},{maxPictureSize:8912896,maxBitrate:12e7,level:51},{maxPictureSize:8912896,maxBitrate:18e7,level:52},{maxPictureSize:0x2200000,maxBitrate:18e7,level:60},{maxPictureSize:0x2200000,maxBitrate:24e7,level:61},{maxPictureSize:0x2200000,maxBitrate:48e7,level:62}],eR=[{maxPictureSize:147456,maxBitrate:15e5,tier:"M",level:0},{maxPictureSize:278784,maxBitrate:3e6,tier:"M",level:1},{maxPictureSize:665856,maxBitrate:6e6,tier:"M",level:4},{maxPictureSize:1065024,maxBitrate:1e7,tier:"M",level:5},{maxPictureSize:2359296,maxBitrate:12e6,tier:"M",level:8},{maxPictureSize:2359296,maxBitrate:3e7,tier:"H",level:8},{maxPictureSize:2359296,maxBitrate:2e7,tier:"M",level:9},{maxPictureSize:2359296,maxBitrate:5e7,tier:"H",level:9},{maxPictureSize:8912896,maxBitrate:3e7,tier:"M",level:12},{maxPictureSize:8912896,maxBitrate:1e8,tier:"H",level:12},{maxPictureSize:8912896,maxBitrate:4e7,tier:"M",level:13},{maxPictureSize:8912896,maxBitrate:16e7,tier:"H",level:13},{maxPictureSize:8912896,maxBitrate:6e7,tier:"M",level:14},{maxPictureSize:8912896,maxBitrate:24e7,tier:"H",level:14},{maxPictureSize:0x2200000,maxBitrate:6e7,tier:"M",level:15},{maxPictureSize:0x2200000,maxBitrate:24e7,tier:"H",level:15},{maxPictureSize:0x2200000,maxBitrate:6e7,tier:"M",level:16},{maxPictureSize:0x2200000,maxBitrate:24e7,tier:"H",level:16},{maxPictureSize:0x2200000,maxBitrate:1e8,tier:"M",level:17},{maxPictureSize:0x2200000,maxBitrate:48e7,tier:"H",level:17},{maxPictureSize:0x2200000,maxBitrate:16e7,tier:"M",level:18},{maxPictureSize:0x2200000,maxBitrate:8e8,tier:"H",level:18},{maxPictureSize:0x2200000,maxBitrate:16e7,tier:"M",level:19},{maxPictureSize:0x2200000,maxBitrate:8e8,tier:"H",level:19}],eD=".01.01.01.01.00",ej=".0.110.01.01.01.0",eL=e=>{let t=e.split("."),r=Number(t[1]),i=t[2];return[129,(r<<5)+Number(i.slice(0,-1)),(("H"===i.slice(-1))<<7)+((8!==Number(t[3]))<<6)+0+((t[4]?Number(t[4]):0)<<4)+((t[5]?Number(t[5][0]):1)<<3)+((t[5]?Number(t[5][1]):1)<<2)+(t[5]?Number(t[5][2]):0),0]},eB=e=>{let{codec:t,codecDescription:r,colorSpace:i,avcCodecInfo:a,hevcCodecInfo:n,vp9CodecInfo:o,av1CodecInfo:s}=e;if("avc"===t){if(h(null!==e.avcType),a){let t=new Uint8Array([a.avcProfileIndication,a.profileCompatibility,a.avcLevelIndication]);return`avc${e.avcType}.${j(t)}`}if(!r||r.byteLength<4)throw TypeError("AVC decoder description is not provided or is not at least 4 bytes long.");return`avc${e.avcType}.${j(r.subarray(1,4))}`}if("hevc"===t){let e,t,i,a,o,s;if(n)e=n.generalProfileSpace,t=n.generalProfileIdc,i=L(n.generalProfileCompatibilityFlags),a=n.generalTierFlag,o=n.generalLevelIdc,s=[...n.generalConstraintIndicatorFlags];else{if(!r||r.byteLength<23)throw TypeError("HEVC decoder description is not provided or is not at least 23 bytes long.");let n=S(r),l=n.getUint8(1);e=l>>6&3,t=31&l,i=L(n.getUint32(2)),a=l>>5&1,o=n.getUint8(12),s=[];for(let e=0;e<6;e++)s.push(n.getUint8(6+e))}let l="hev1.";for(l+=["","A","B","C"][e]+t,l+=".",l+=i.toString(16).toUpperCase(),l+=".",l+=0===a?"L":"H",l+=o;s.length>0&&0===s[s.length-1];)s.pop();return s.length>0&&(l+=".",l+=s.map(e=>e.toString(16).toUpperCase()).join(".")),l}if("vp8"===t)return"vp8";if("vp9"===t){if(!o){let t=e.width*e.height,r=g(eF).level;for(let e of eF)if(t<=e.maxPictureSize){r=e.level;break}return`vp09.00.${r.toString().padStart(2,"0")}.08`}let t=o.profile.toString().padStart(2,"0"),r=o.level.toString().padStart(2,"0"),i=o.bitDepth.toString().padStart(2,"0"),a=o.chromaSubsampling.toString().padStart(2,"0"),n=o.colourPrimaries.toString().padStart(2,"0"),s=o.transferCharacteristics.toString().padStart(2,"0"),l=o.matrixCoefficients.toString().padStart(2,"0"),u=o.videoFullRangeFlag.toString().padStart(2,"0"),c=`vp09.${t}.${r}.${i}.${a}`;return(c+=`.${n}.${s}.${l}.${u}`).endsWith(eD)&&(c=c.slice(0,-eD.length)),c}if("av1"===t){if(!s){let t=e.width*e.height,r=g(eF).level;for(let e of eF)if(t<=e.maxPictureSize){r=e.level;break}return`av01.0.${r.toString().padStart(2,"0")}M.08`}let t=s.profile,r=s.level.toString().padStart(2,"0"),a=s.tier?"H":"M",n=s.bitDepth.toString().padStart(2,"0"),o=s.monochrome?"1":"0",l=100*s.chromaSubsamplingX+10*s.chromaSubsamplingY+ +(s.chromaSubsamplingX&&s.chromaSubsamplingY?s.chromaSamplePosition:0),u=i?.primaries?T[i.primaries]:1,c=i?.transfer?I[i.transfer]:1,d=i?.matrix?O[i.matrix]:1,p=+!!i?.fullRange,f=`av01.${t}.${r}${a}.${n}`;return f+=`.${o}.${l.toString().padStart(3,"0")}`,f+=`.${u.toString().padStart(2,"0")}`,f+=`.${c.toString().padStart(2,"0")}`,f+=`.${d.toString().padStart(2,"0")}`,(f+=`.${p}`).endsWith(ej)&&(f=f.slice(0,-ej.length)),f}throw TypeError(`Unhandled codec '${t}'.`)},eN=e=>{let{codec:t,codecDescription:r,aacCodecInfo:i}=e;if("aac"===t){if(!i)throw TypeError("AAC codec info must be provided.");if(i.isMpeg2)return"mp4a.67";{let e;return e=null!==i.objectType?i.objectType:eU(r).objectType,`mp4a.40.${e}`}}if("mp3"===t)return"mp3";if("opus"===t)return"opus";if("vorbis"===t)return"vorbis";if("flac"===t)return"flac";else if(t&&eT.includes(t))return t;throw TypeError(`Unhandled codec '${t}'.`)},e$=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],ez=[-1,1,2,3,4,5,6,8],eU=e=>{if(!e||e.byteLength<2)throw TypeError("AAC description must be at least 2 bytes long.");let t=new y(e),r=t.readBits(5);31===r&&(r=32+t.readBits(6));let i=t.readBits(4),a=null;15===i?a=t.readBits(24):i<e$.length&&(a=e$[i]);let n=t.readBits(4),o=null;return n>=1&&n<=7&&(o=ez[n]),{objectType:r,frequencyIndex:i,sampleRate:a,channelConfiguration:n,numberOfChannels:o}},eV=e=>{let t=e$.indexOf(e.sampleRate),r=null;-1===t&&(t=15,r=e.sampleRate);let i=ez.indexOf(e.numberOfChannels);if(-1===i)throw TypeError(`Unsupported number of channels: ${e.numberOfChannels}`);let a=13;e.objectType>=32&&(a+=6),15===t&&(a+=24);let n=new Uint8Array(Math.ceil(a/8)),o=new y(n);return e.objectType<32?o.writeBits(5,e.objectType):(o.writeBits(5,31),o.writeBits(6,e.objectType-32)),o.writeBits(4,t),15===t&&o.writeBits(24,r),o.writeBits(4,i),n},eH=/^pcm-([usf])(\d+)+(be)?$/,eW=e=>{let t;if(h(eT.includes(e)),"ulaw"===e)return{dataType:"ulaw",sampleSize:1,littleEndian:!0,silentValue:255};if("alaw"===e)return{dataType:"alaw",sampleSize:1,littleEndian:!0,silentValue:213};let r=eH.exec(e);h(r),t="u"===r[1]?"unsigned":"s"===r[1]?"signed":"float";let i=Number(r[2])/8;return{dataType:t,sampleSize:i,littleEndian:"be"!==r[3],silentValue:128*("pcm-u8"===e)}},eq=e=>{if(e.startsWith("avc1")||e.startsWith("avc3"))return"avc";if(e.startsWith("hev1")||e.startsWith("hvc1"))return"hevc";if("vp8"===e)return"vp8";if(e.startsWith("vp09"))return"vp9";if(e.startsWith("av01"))return"av1";if(e.startsWith("mp4a.40")||"mp4a.67"===e)return"aac";if("mp3"===e||"mp4a.69"===e||"mp4a.6B"===e||"mp4a.6b"===e)return"mp3";if("opus"===e)return"opus";if("vorbis"===e)return"vorbis";if("flac"===e)return"flac";else if("ulaw"===e)return"ulaw";else if("alaw"===e)return"alaw";else if(eH.test(e))return e;return"webvtt"===e?"webvtt":null},eG=["avc1","avc3","hev1","hvc1","vp8","vp09","av01"],eZ=/^(avc1|avc3)\.[0-9a-fA-F]{6}$/,eK=/^(hev1|hvc1)\.(?:[ABC]?\d+)\.[0-9a-fA-F]{1,8}\.[LH]\d+(?:\.[0-9a-fA-F]{1,2}){0,6}$/,eQ=/^vp09(?:\.\d{2}){3}(?:(?:\.\d{2}){5})?$/,eX=/^av01\.\d\.\d{2}[MH]\.\d{2}(?:\.\d\.\d{3}\.\d{2}\.\d{2}\.\d{2}\.\d)?$/,eJ=e=>{if(!e)throw TypeError("Video chunk metadata must be provided.");if("object"!=typeof e)throw TypeError("Video chunk metadata must be an object.");if(!e.decoderConfig)throw TypeError("Video chunk metadata must include a decoder configuration.");if("object"!=typeof e.decoderConfig)throw TypeError("Video chunk metadata decoder configuration must be an object.");if("string"!=typeof e.decoderConfig.codec)throw TypeError("Video chunk metadata decoder configuration must specify a codec string.");if(!eG.some(t=>e.decoderConfig.codec.startsWith(t)))throw TypeError("Video chunk metadata decoder configuration codec string must be a valid video codec string as specified in the WebCodecs Codec Registry.");if(!Number.isInteger(e.decoderConfig.codedWidth)||e.decoderConfig.codedWidth<=0)throw TypeError("Video chunk metadata decoder configuration must specify a valid codedWidth (positive integer).");if(!Number.isInteger(e.decoderConfig.codedHeight)||e.decoderConfig.codedHeight<=0)throw TypeError("Video chunk metadata decoder configuration must specify a valid codedHeight (positive integer).");if(void 0!==e.decoderConfig.description&&!R(e.decoderConfig.description))throw TypeError("Video chunk metadata decoder configuration description, when defined, must be an ArrayBuffer or an ArrayBuffer view.");if(void 0!==e.decoderConfig.colorSpace){let{colorSpace:t}=e.decoderConfig;if("object"!=typeof t)throw TypeError("Video chunk metadata decoder configuration colorSpace, when provided, must be an object.");let r=Object.keys(T);if(null!=t.primaries&&!r.includes(t.primaries))throw TypeError(`Video chunk metadata decoder configuration colorSpace primaries, when defined, must be one of ${r.join(", ")}.`);let i=Object.keys(I);if(null!=t.transfer&&!i.includes(t.transfer))throw TypeError(`Video chunk metadata decoder configuration colorSpace transfer, when defined, must be one of ${i.join(", ")}.`);let a=Object.keys(O);if(null!=t.matrix&&!a.includes(t.matrix))throw TypeError(`Video chunk metadata decoder configuration colorSpace matrix, when defined, must be one of ${a.join(", ")}.`);if(null!=t.fullRange&&"boolean"!=typeof t.fullRange)throw TypeError("Video chunk metadata decoder configuration colorSpace fullRange, when defined, must be a boolean.")}if(e.decoderConfig.codec.startsWith("avc1")||e.decoderConfig.codec.startsWith("avc3")){if(!eZ.test(e.decoderConfig.codec))throw TypeError("Video chunk metadata decoder configuration codec string for AVC must be a valid AVC codec string as specified in Section 3.4 of RFC 6381.")}else if(e.decoderConfig.codec.startsWith("hev1")||e.decoderConfig.codec.startsWith("hvc1")){if(!eK.test(e.decoderConfig.codec))throw TypeError("Video chunk metadata decoder configuration codec string for HEVC must be a valid HEVC codec string as specified in Section E.3 of ISO 14496-15.")}else if(e.decoderConfig.codec.startsWith("vp8")){if("vp8"!==e.decoderConfig.codec)throw TypeError('Video chunk metadata decoder configuration codec string for VP8 must be "vp8".')}else if(e.decoderConfig.codec.startsWith("vp09")){if(!eQ.test(e.decoderConfig.codec))throw TypeError('Video chunk metadata decoder configuration codec string for VP9 must be a valid VP9 codec string as specified in Section "Codecs Parameter String" of https://www.webmproject.org/vp9/mp4/.')}else if(e.decoderConfig.codec.startsWith("av01")&&!eX.test(e.decoderConfig.codec))throw TypeError('Video chunk metadata decoder configuration codec string for AV1 must be a valid AV1 codec string as specified in Section "Codecs Parameter String" of https://aomediacodec.github.io/av1-isobmff/.')},eY=["mp4a","mp3","opus","vorbis","flac","ulaw","alaw","pcm"],e0=e=>{if(!e)throw TypeError("Audio chunk metadata must be provided.");if("object"!=typeof e)throw TypeError("Audio chunk metadata must be an object.");if(!e.decoderConfig)throw TypeError("Audio chunk metadata must include a decoder configuration.");if("object"!=typeof e.decoderConfig)throw TypeError("Audio chunk metadata decoder configuration must be an object.");if("string"!=typeof e.decoderConfig.codec)throw TypeError("Audio chunk metadata decoder configuration must specify a codec string.");if(!eY.some(t=>e.decoderConfig.codec.startsWith(t)))throw TypeError("Audio chunk metadata decoder configuration codec string must be a valid audio codec string as specified in the WebCodecs Codec Registry.");if(!Number.isInteger(e.decoderConfig.sampleRate)||e.decoderConfig.sampleRate<=0)throw TypeError("Audio chunk metadata decoder configuration must specify a valid sampleRate (positive integer).");if(!Number.isInteger(e.decoderConfig.numberOfChannels)||e.decoderConfig.numberOfChannels<=0)throw TypeError("Audio chunk metadata decoder configuration must specify a valid numberOfChannels (positive integer).");if(void 0!==e.decoderConfig.description&&!R(e.decoderConfig.description))throw TypeError("Audio chunk metadata decoder configuration description, when defined, must be an ArrayBuffer or an ArrayBuffer view.");if(e.decoderConfig.codec.startsWith("mp4a")&&"mp4a.69"!==e.decoderConfig.codec&&"mp4a.6B"!==e.decoderConfig.codec&&"mp4a.6b"!==e.decoderConfig.codec){if(!["mp4a.40.2","mp4a.40.02","mp4a.40.5","mp4a.40.05","mp4a.40.29","mp4a.67"].includes(e.decoderConfig.codec))throw TypeError("Audio chunk metadata decoder configuration codec string for AAC must be a valid AAC codec string as specified in https://www.w3.org/TR/webcodecs-aac-codec-registration/.")}else if(e.decoderConfig.codec.startsWith("mp3")||e.decoderConfig.codec.startsWith("mp4a")){if("mp3"!==e.decoderConfig.codec&&"mp4a.69"!==e.decoderConfig.codec&&"mp4a.6B"!==e.decoderConfig.codec&&"mp4a.6b"!==e.decoderConfig.codec)throw TypeError('Audio chunk metadata decoder configuration codec string for MP3 must be "mp3", "mp4a.69" or "mp4a.6B".')}else if(e.decoderConfig.codec.startsWith("opus")){if("opus"!==e.decoderConfig.codec)throw TypeError('Audio chunk metadata decoder configuration codec string for Opus must be "opus".');if(e.decoderConfig.description&&e.decoderConfig.description.byteLength<18)throw TypeError("Audio chunk metadata decoder configuration description, when specified, is expected to be an Identification Header as specified in Section 5.1 of RFC 7845.")}else if(e.decoderConfig.codec.startsWith("vorbis")){if("vorbis"!==e.decoderConfig.codec)throw TypeError('Audio chunk metadata decoder configuration codec string for Vorbis must be "vorbis".');if(!e.decoderConfig.description)throw TypeError("Audio chunk metadata decoder configuration for Vorbis must include a description, which is expected to adhere to the format described in https://www.w3.org/TR/webcodecs-vorbis-codec-registration/.")}else if(e.decoderConfig.codec.startsWith("flac")){if("flac"!==e.decoderConfig.codec)throw TypeError('Audio chunk metadata decoder configuration codec string for FLAC must be "flac".');if(!e.decoderConfig.description||e.decoderConfig.description.byteLength<42)throw TypeError("Audio chunk metadata decoder configuration for FLAC must include a description, which is expected to adhere to the format described in https://www.w3.org/TR/webcodecs-flac-codec-registration/.")}else if((e.decoderConfig.codec.startsWith("pcm")||e.decoderConfig.codec.startsWith("ulaw")||e.decoderConfig.codec.startsWith("alaw"))&&!eT.includes(e.decoderConfig.codec))throw TypeError(`Audio chunk metadata decoder configuration codec string for PCM must be one of the supported PCM codecs (${eT.join(", ")}).`)},e1=e=>{if(!e)throw TypeError("Subtitle metadata must be provided.");if("object"!=typeof e)throw TypeError("Subtitle metadata must be an object.");if(!e.config)throw TypeError("Subtitle metadata must include a config object.");if("object"!=typeof e.config)throw TypeError("Subtitle metadata config must be an object.");if("string"!=typeof e.config.description)throw TypeError("Subtitle metadata config description must be a string.")},e2=class{constructor(e){this.mutex=new D,this.firstMediaStreamTimestamp=null,this.trackTimestampInfo=new WeakMap,this.output=e}onTrackClose(e){}validateAndNormalizeTimestamp(e,t,r){t+=e.source._timestampOffset;let i=this.trackTimestampInfo.get(e);if(!i){if(!r)throw Error("First packet must be a key packet.");i={maxTimestamp:t,maxTimestampBeforeLastKeyPacket:t},this.trackTimestampInfo.set(e,i)}if(t<0)throw Error(`Timestamps must be non-negative (got ${t}s).`);if(r&&(i.maxTimestampBeforeLastKeyPacket=i.maxTimestamp),t<i.maxTimestampBeforeLastKeyPacket)throw Error(`Timestamps cannot be smaller than the largest timestamp of the previous GOP (a GOP begins with a key packet and ends right before the next key packet). Got ${t}s, but largest timestamp is ${i.maxTimestampBeforeLastKeyPacket}s.`);return i.maxTimestamp=Math.max(i.maxTimestamp,t),t}},e4=e=>{let t=new Uint8Array(7),r=new y(t),{objectType:i,frequencyIndex:a,channelConfiguration:n}=e;return r.writeBits(12,4095),r.writeBits(1,0),r.writeBits(2,0),r.writeBits(1,1),r.writeBits(2,i-1),r.writeBits(4,a),r.writeBits(1,0),r.writeBits(3,n),r.writeBits(1,0),r.writeBits(1,0),r.writeBits(1,0),r.writeBits(1,0),r.skipBits(13),r.writeBits(11,2047),r.writeBits(2,0),{header:t,bitstream:r}},e3=(e,t)=>{e.pos=30,e.writeBits(13,t)},e6=class extends e2{constructor(e,t){super(e),this.header=null,this.headerBitstream=null,this.inputIsAdts=null,this.format=t,this.writer=e._writer}async start(){}async getMimeType(){return"audio/aac"}async addEncodedVideoPacket(){throw Error("ADTS does not support video.")}async addEncodedAudioPacket(e,t,r){let i=await this.mutex.acquire();try{if(this.validateAndNormalizeTimestamp(e,t.timestamp,"key"===t.type),null===this.inputIsAdts){e0(r);let e=r?.decoderConfig?.description;if(this.inputIsAdts=!e,!this.inputIsAdts){let t=eU(w(e)),r=e4(t);this.header=r.header,this.headerBitstream=r.bitstream}}if(this.inputIsAdts){let e=this.writer.getPos();this.writer.write(t.data),this.format._options.onFrame&&this.format._options.onFrame(t.data,e)}else{h(this.header);let e=t.data.byteLength+this.header.byteLength;e3(this.headerBitstream,e);let r=this.writer.getPos();if(this.writer.write(this.header),this.writer.write(t.data),this.format._options.onFrame){let i=new Uint8Array(e);i.set(this.header,0),i.set(t.data,this.header.byteLength),this.format._options.onFrame(i,r)}}await this.writer.flush()}finally{i()}}async addSubtitleCue(){throw Error("ADTS does not support subtitles.")}async finalize(){}},e8=function*(e){let t=0,r=-1;for(;t<e.length-2;){let i=e.indexOf(0,t);if(-1===i||i>=e.length-2)break;let a=0;if((t=i)+3<e.length&&0===e[t+1]&&0===e[t+2]&&1===e[t+3]?a=4:0===e[t+1]&&1===e[t+2]&&(a=3),0===a){t++;continue}-1!==r&&t>r&&(yield{offset:r,length:t-r}),t=r=t+a}-1!==r&&r<e.length&&(yield{offset:r,length:e.length-r})},e5=function*(e,t){let r=0,i=new DataView(e.buffer,e.byteOffset,e.byteLength);for(;r+t<=e.length;){let e;1===t?e=i.getUint8(r):2===t?e=i.getUint16(r,!1):3===t?e=q(i,r,!1):(h(4===t),e=i.getUint32(r,!1)),r+=t,yield{offset:r,length:e},r+=e}},e7=(e,t)=>t.description?e5(e,(3&w(t.description)[4])+1):e8(e),e9=function*(e){yield*e8(e)},te=e=>31&e,tt=e=>{let t=[],r=e.length;for(let i=0;i<r;i++)i+2<r&&0===e[i]&&0===e[i+1]&&3===e[i+2]?(t.push(0,0),i+=2):t.push(e[i]);return new Uint8Array(t)},tr=new Uint8Array([0,0,0,1]),ti=e=>{let t=new Uint8Array(e.reduce((e,t)=>e+tr.byteLength+t.byteLength,0)),r=0;for(let i of e)t.set(tr,r),r+=tr.byteLength,t.set(i,r),r+=i.byteLength;return t},ta=(e,t)=>{let r=new Uint8Array(e.reduce((e,r)=>e+t+r.byteLength,0)),i=0;for(let a of e){let e=new DataView(r.buffer,r.byteOffset,r.byteLength);switch(t){case 1:e.setUint8(i,a.byteLength);break;case 2:e.setUint16(i,a.byteLength,!1);break;case 3:G(e,i,a.byteLength,!1);break;case 4:e.setUint32(i,a.byteLength,!1)}i+=t,r.set(a,i),i+=a.byteLength}return r},tn=e=>{try{let t=[],r=[],i=[];for(let a of e9(e)){let n=e.subarray(a.offset,a.offset+a.length),o=te(n[0]);7===o?t.push(n):8===o?r.push(n):13===o&&i.push(n)}if(0===t.length||0===r.length)return null;let a=t[0],n=ts(a);h(null!==n);let o=100===n.profileIdc||110===n.profileIdc||122===n.profileIdc||144===n.profileIdc;return{configurationVersion:1,avcProfileIndication:n.profileIdc,profileCompatibility:n.constraintFlags,avcLevelIndication:n.levelIdc,lengthSizeMinusOne:3,sequenceParameterSets:t,pictureParameterSets:r,chromaFormat:o?n.chromaFormatIdc:null,bitDepthLumaMinus8:o?n.bitDepthLumaMinus8:null,bitDepthChromaMinus8:o?n.bitDepthChromaMinus8:null,sequenceParameterSetExt:o?i:null}}catch(e){return console.error("Error building AVC Decoder Configuration Record:",e),null}},to=e=>{try{let t=S(e),r=0,i=t.getUint8(r++),a=t.getUint8(r++),n=t.getUint8(r++),o=t.getUint8(r++),s=3&t.getUint8(r++),l=31&t.getUint8(r++),u=[];for(let i=0;i<l;i++){let i=t.getUint16(r,!1);r+=2,u.push(e.subarray(r,r+i)),r+=i}let c=t.getUint8(r++),d=[];for(let i=0;i<c;i++){let i=t.getUint16(r,!1);r+=2,d.push(e.subarray(r,r+i)),r+=i}let p={configurationVersion:i,avcProfileIndication:a,profileCompatibility:n,avcLevelIndication:o,lengthSizeMinusOne:s,sequenceParameterSets:u,pictureParameterSets:d,chromaFormat:null,bitDepthLumaMinus8:null,bitDepthChromaMinus8:null,sequenceParameterSetExt:null};if((100===a||110===a||122===a||144===a)&&r+4<=e.length){let i=3&t.getUint8(r++),a=7&t.getUint8(r++),n=7&t.getUint8(r++),o=t.getUint8(r++);p.chromaFormat=i,p.bitDepthLumaMinus8=a,p.bitDepthChromaMinus8=n;let s=[];for(let i=0;i<o;i++){let i=t.getUint16(r,!1);r+=2,s.push(e.subarray(r,r+i)),r+=i}p.sequenceParameterSetExt=s}return p}catch(e){return console.error("Error deserializing AVC Decoder Configuration Record:",e),null}},ts=e=>{try{let t=new y(tt(e));t.skipBits(1),t.skipBits(2);let r=t.readBits(5);if(7!==r)return null;let i=t.readAlignedByte(),a=t.readAlignedByte(),n=t.readAlignedByte();b(t);let o=1,s=0,l=0,u=0;if((100===i||110===i||122===i||244===i||44===i||83===i||86===i||118===i||128===i)&&(o=b(t),3===o&&(u=t.readBits(1)),s=b(t),l=b(t),t.skipBits(1),t.readBits(1))){for(let e=0;e<(3!==o?8:12);e++)if(t.readBits(1)){let r=e<6?16:64,i=8,a=8;for(let e=0;e<r;e++){if(0!==a){let e=x(t);a=(i+e+256)%256}i=0===a?i:a}}}b(t);let c=b(t);if(0===c)b(t);else if(1===c){t.skipBits(1),x(t),x(t);let e=b(t);for(let r=0;r<e;r++)x(t)}b(t),t.skipBits(1);let d=b(t),p=b(t),f=16*(d+1),m=16*(p+1),v=f,w=m,S=t.readBits(1);if(S||t.skipBits(1),t.skipBits(1),t.readBits(1)){let e,r,i=b(t),a=b(t),n=b(t),s=b(t),l=0===u?o:0;if(0===l)e=1,r=2-S;else{let t=3===o?1:2,i=1===o?2:1;e=t,r=i*(2-S)}v-=e*(i+a),w-=r*(n+s)}let k=2,C=2,E=2,_=0,T=null,P=null;if(t.readBits(1)){if(t.readBits(1)){let e=t.readBits(8);255===e&&(t.skipBits(16),t.skipBits(16))}t.readBits(1)&&t.skipBits(1),t.readBits(1)&&(t.skipBits(3),_=t.readBits(1),t.readBits(1)&&(k=t.readBits(8),C=t.readBits(8),E=t.readBits(8))),t.readBits(1)&&(b(t),b(t)),t.readBits(1)&&(t.skipBits(32),t.skipBits(32),t.skipBits(1));let e=t.readBits(1);e&&tl(t);let r=t.readBits(1);r&&tl(t),(e||r)&&t.skipBits(1),t.skipBits(1),t.readBits(1)&&(t.skipBits(1),b(t),b(t),b(t),b(t),T=b(t),P=b(t))}if(null===T)if(h(null===P),(44===i||86===i||100===i||110===i||122===i||244===i)&&16&a)T=0,P=0;else{let e=eO.find(e=>e.level>=n)??g(eO),t=Math.min(Math.floor(e.maxDpbMbs/((2-S)*(p+1)*(d+1))),16);T=t,P=t}return h(null!==P),{profileIdc:i,constraintFlags:a,levelIdc:n,frameMbsOnlyFlag:S,chromaFormatIdc:o,bitDepthLumaMinus8:s,bitDepthChromaMinus8:l,codedWidth:f,codedHeight:m,displayWidth:v,displayHeight:w,colourPrimaries:k,matrixCoefficients:E,transferCharacteristics:C,fullRangeFlag:_,numReorderFrames:T,maxDecFrameBuffering:P}}catch(e){return console.error("Error parsing AVC SPS:",e),null}},tl=e=>{let t=b(e);e.skipBits(4),e.skipBits(4);for(let r=0;r<=t;r++)b(e),b(e),e.skipBits(1);e.skipBits(5),e.skipBits(5),e.skipBits(5),e.skipBits(5)},tu=(e,t)=>t.description?e5(e,(3&w(t.description)[21])+1):e8(e),tc=function*(e){yield*e8(e)},td=e=>e>>1&63,tp=e=>{try{let t=new y(tt(e));t.skipBits(16),t.readBits(4);let r=t.readBits(3),i=t.readBits(1),{general_profile_space:a,general_tier_flag:n,general_profile_idc:o,general_profile_compatibility_flags:s,general_constraint_indicator_flags:l,general_level_idc:u}=th(t,r);b(t);let c=b(t),d=0;3===c&&(d=t.readBits(1));let p=b(t),f=b(t),h=p,m=f;if(t.readBits(1)){let e=b(t),r=b(t),i=b(t),a=b(t),n=1,o=1,s=0===d?c:0;1===s?(n=2,o=2):2===s&&(n=2,o=1),h-=(e+r)*n,m-=(i+a)*o}let g=b(t),v=b(t);b(t);let x=t.readBits(1)?0:r,w=0;for(let e=x;e<=r;e++)b(t),w=b(t),b(t);b(t),b(t),b(t),b(t),b(t),b(t),t.readBits(1)&&t.readBits(1)&&tm(t),t.skipBits(1),t.skipBits(1),t.readBits(1)&&(t.skipBits(4),t.skipBits(4),b(t),b(t),t.skipBits(1));let S=b(t);if(tg(t,S),t.readBits(1)){let e=b(t);for(let r=0;r<e;r++)b(t),t.skipBits(1)}t.skipBits(1),t.skipBits(1);let k=2,C=2,E=2,_=0,T=0;if(t.readBits(1)){let e=ty(t,r);k=e.colourPrimaries,C=e.transferCharacteristics,E=e.matrixCoefficients,_=e.fullRangeFlag,T=e.minSpatialSegmentationIdc}return{displayWidth:h,displayHeight:m,colourPrimaries:k,transferCharacteristics:C,matrixCoefficients:E,fullRangeFlag:_,maxDecFrameBuffering:w+1,spsMaxSubLayersMinus1:r,spsTemporalIdNestingFlag:i,generalProfileSpace:a,generalTierFlag:n,generalProfileIdc:o,generalProfileCompatibilityFlags:s,generalConstraintIndicatorFlags:l,generalLevelIdc:u,chromaFormatIdc:c,bitDepthLumaMinus8:g,bitDepthChromaMinus8:v,minSpatialSegmentationIdc:T}}catch(e){return console.error("Error parsing HEVC SPS:",e),null}},tf=e=>{try{let t=[],r=[],i=[],a=[];for(let n of tc(e)){let o=e.subarray(n.offset,n.offset+n.length),s=td(o[0]);32===s?t.push(o):33===s?r.push(o):34===s?i.push(o):(39===s||40===s)&&a.push(o)}if(0===r.length||0===i.length)return null;let n=tp(r[0]);if(!n)return null;let o=0;if(i.length>0){let e=i[0],t=new y(tt(e));t.skipBits(16),b(t),b(t),t.skipBits(1),t.skipBits(1),t.skipBits(3),t.skipBits(1),t.skipBits(1),b(t),b(t),x(t),t.skipBits(1),t.skipBits(1),t.readBits(1)&&b(t),x(t),x(t),t.skipBits(1),t.skipBits(1),t.skipBits(1),t.skipBits(1);let r=t.readBits(1),a=t.readBits(1);o=r||a?r&&!a?2:!r&&a?3:0:0}let s=[...t.length?[{arrayCompleteness:1,nalUnitType:32,nalUnits:t}]:[],...r.length?[{arrayCompleteness:1,nalUnitType:33,nalUnits:r}]:[],...i.length?[{arrayCompleteness:1,nalUnitType:34,nalUnits:i}]:[],...a.length?[{arrayCompleteness:1,nalUnitType:td(a[0][0]),nalUnits:a}]:[]];return{configurationVersion:1,generalProfileSpace:n.generalProfileSpace,generalTierFlag:n.generalTierFlag,generalProfileIdc:n.generalProfileIdc,generalProfileCompatibilityFlags:n.generalProfileCompatibilityFlags,generalConstraintIndicatorFlags:n.generalConstraintIndicatorFlags,generalLevelIdc:n.generalLevelIdc,minSpatialSegmentationIdc:n.minSpatialSegmentationIdc,parallelismType:o,chromaFormatIdc:n.chromaFormatIdc,bitDepthLumaMinus8:n.bitDepthLumaMinus8,bitDepthChromaMinus8:n.bitDepthChromaMinus8,avgFrameRate:0,constantFrameRate:0,numTemporalLayers:n.spsMaxSubLayersMinus1+1,temporalIdNested:n.spsTemporalIdNestingFlag,lengthSizeMinusOne:3,arrays:s}}catch(e){return console.error("Error building HEVC Decoder Configuration Record:",e),null}},th=(e,t)=>{let r=e.readBits(2),i=e.readBits(1),a=e.readBits(5),n=0;for(let t=0;t<32;t++)n=n<<1|e.readBits(1);let o=new Uint8Array(6);for(let t=0;t<6;t++)o[t]=e.readBits(8);let s=e.readBits(8),l=[],u=[];for(let r=0;r<t;r++)l.push(e.readBits(1)),u.push(e.readBits(1));if(t>0)for(let r=t;r<8;r++)e.skipBits(2);for(let r=0;r<t;r++)l[r]&&e.skipBits(88),u[r]&&e.skipBits(8);return{general_profile_space:r,general_tier_flag:i,general_profile_idc:a,general_profile_compatibility_flags:n,general_constraint_indicator_flags:o,general_level_idc:s}},tm=e=>{for(let t=0;t<4;t++)for(let r=0;r<(3===t?2:6);r++)if(e.readBits(1)){let r=Math.min(64,1<<4+(t<<1));t>1&&x(e);for(let t=0;t<r;t++)x(e)}else b(e)},tg=(e,t)=>{let r=[];for(let i=0;i<t;i++)r[i]=tv(e,i,t,r)},tv=(e,t,r,i)=>{let a=0,n=0,o=0;if(0!==t&&(n=e.readBits(1)),n){o=t===r?t-(b(e)+1):t-1,e.readBits(1),b(e);let n=i[o]??0;for(let t=0;t<=n;t++)e.readBits(1)||e.readBits(1);a=i[o]}else{let t=b(e),r=b(e);for(let r=0;r<t;r++)b(e),e.readBits(1);for(let t=0;t<r;t++)b(e),e.readBits(1);a=t+r}return a},ty=(e,t)=>{let r=2,i=2,a=2,n=0,o=0;return e.readBits(1)&&255===e.readBits(8)&&(e.readBits(16),e.readBits(16)),e.readBits(1)&&e.readBits(1),e.readBits(1)&&(e.readBits(3),n=e.readBits(1),e.readBits(1)&&(r=e.readBits(8),i=e.readBits(8),a=e.readBits(8))),e.readBits(1)&&(b(e),b(e)),e.readBits(1),e.readBits(1),e.readBits(1),e.readBits(1)&&(b(e),b(e),b(e),b(e)),e.readBits(1)&&(e.readBits(32),e.readBits(32),e.readBits(1)&&b(e),e.readBits(1)&&tb(e,!0,t)),e.readBits(1)&&(e.readBits(1),e.readBits(1),e.readBits(1),o=b(e),b(e),b(e),b(e),b(e)),{colourPrimaries:r,transferCharacteristics:i,matrixCoefficients:a,fullRangeFlag:n,minSpatialSegmentationIdc:o}},tb=(e,t,r)=>{let i=!1,a=!1,n=!1;t&&(i=1===e.readBits(1),a=1===e.readBits(1),(i||a)&&((n=1===e.readBits(1))&&(e.readBits(8),e.readBits(5),e.readBits(1),e.readBits(5)),e.readBits(4),e.readBits(4),n&&e.readBits(4),e.readBits(5),e.readBits(5),e.readBits(5)));for(let t=0;t<=r;t++){let t=1===e.readBits(1),r=!0;t||(r=1===e.readBits(1));let o=!1;r?b(e):o=1===e.readBits(1);let s=1;o||(s=b(e)+1),i&&tx(e,s,n),a&&tx(e,s,n)}},tx=(e,t,r)=>{for(let i=0;i<t;i++)b(e),b(e),r&&(b(e),b(e)),e.readBits(1)},tw=e=>{let t=new y(e);if(2!==t.readBits(2))return null;let r=t.readBits(1),i=(t.readBits(1)<<1)+r;if(3===i&&t.skipBits(1),1===t.readBits(1)||0!==t.readBits(1)||(t.skipBits(2),4817730!==t.readBits(24)))return null;let a=8;i>=2&&(a=t.readBits(1)?12:10);let n=t.readBits(3),o=0,s=0;if(7!==n)if(s=t.readBits(1),1===i||3===i){let e=t.readBits(1),r=t.readBits(1);o=e||r?e&&!r?2:1:3,t.skipBits(1)}else o=1;else o=3,s=1;let l=(t.readBits(16)+1)*(t.readBits(16)+1),u=g(eF).level;for(let e of eF)if(l<=e.maxPictureSize){u=e.level;break}return{profile:i,level:u,bitDepth:a,chromaSubsampling:o,videoFullRangeFlag:s,colourPrimaries:2===n?1:1===n?6:2,transferCharacteristics:2===n?1:1===n?6:2,matrixCoefficients:7===n?0:2===n?1:1===n?6:2}},tS=function*(e){let t=new y(e),r=()=>{let e=0;for(let r=0;r<8;r++){let i=t.readAlignedByte();if(e|=(127&i)<<7*r,!(128&i))break;if(7===r&&128&i)return null}return e>=0x100000000-1?null:e};for(;t.getBitsLeft()>=8;){let i;t.skipBits(1);let a=t.readBits(4),n=t.readBits(1),o=t.readBits(1);if(t.skipBits(1),n&&t.skipBits(8),o){let e=r();if(null===e)return;i=e}else i=Math.floor(t.getBitsLeft()/8);h(t.pos%8==0),yield{type:a,data:e.subarray(t.pos/8,t.pos/8+i)},t.skipBits(8*i)}},tk=e=>{for(let{type:t,data:r}of tS(e)){if(1!==t)continue;let e=new y(r),i=e.readBits(3);e.readBits(1);let a=e.readBits(1),n=0,o=0,s=0;if(a)n=e.readBits(5);else{if(e.readBits(1)&&(e.skipBits(32),e.skipBits(32),e.readBits(1)))return null;let t=e.readBits(1);t&&(s=e.readBits(5),e.skipBits(32),e.skipBits(5),e.skipBits(5));let r=e.readBits(5);for(let i=0;i<=r;i++){e.skipBits(12);let r=e.readBits(5);if(0===i&&(n=r),r>7){let t=e.readBits(1);0===i&&(o=t)}if(t&&e.readBits(1)){let t=s+1;e.skipBits(t),e.skipBits(t),e.skipBits(1)}e.readBits(1)&&e.skipBits(4)}}let l=e.readBits(4),u=e.readBits(4),c=l+1;e.skipBits(c);let d=u+1;e.skipBits(d);if((a?0:e.readBits(1))&&(e.skipBits(4),e.skipBits(3)),e.skipBits(1),e.skipBits(1),e.skipBits(1),!a){e.skipBits(1),e.skipBits(1),e.skipBits(1),e.skipBits(1);let t=e.readBits(1);t&&(e.skipBits(1),e.skipBits(1));let r=e.readBits(1);(r?2:e.readBits(1))>0&&(e.readBits(1)||e.skipBits(1)),t&&e.skipBits(3)}e.skipBits(1),e.skipBits(1),e.skipBits(1);let p=e.readBits(1),f=8;2===i&&p?f=e.readBits(1)?12:10:i<=2&&(f=p?10:8);let h=0;1!==i&&(h=e.readBits(1));let m=1,g=1,v=0;return!h&&(0===i?(m=1,g=1):1===i?(m=0,g=0):12===f&&(m=e.readBits(1))&&(g=e.readBits(1)),m&&g&&(v=e.readBits(2))),{profile:i,level:n,tier:o,bitDepth:f,monochrome:h,chromaSubsamplingX:m,chromaSubsamplingY:g,chromaSamplePosition:v}}return null},tC=e=>{let t=S(e),r=t.getUint8(9),i=t.getUint16(10,!0),a=t.getUint32(12,!0),n=t.getInt16(16,!0),o=t.getUint8(18),s=null;return o&&(s=e.subarray(19,21+r)),{outputChannelCount:r,preSkip:i,inputSampleRate:a,outputGain:n,channelMappingFamily:o,channelMappingTable:s}},tE=[480,960,1920,2880,480,960,1920,2880,480,960,1920,2880,480,960,480,960,120,240,480,960,120,240,480,960,120,240,480,960,120,240,480,960],t_=e=>{if(e.length<7)throw Error("Setup header is too short.");if(5!==e[0])throw Error("Wrong packet type in Setup header.");if("vorbis"!==String.fromCharCode(...e.slice(1,7)))throw Error("Invalid packet signature in Setup header.");let t=e.length,r=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e[t-1-i];let i=new y(r),a=0;for(;i.getBitsLeft()>97;)if(1===i.readBits(1)){a=i.pos;break}if(0===a)throw Error("Invalid Setup header: framing bit not found.");let n=0,o=!1,s=0;for(;i.getBitsLeft()>=97;){let e=i.pos,t=i.readBits(8),r=i.readBits(16),a=i.readBits(16);if(t>63||0!==r||0!==a){i.pos=e;break}if(i.skipBits(1),++n>64)break;i.clone().readBits(6)+1===n&&(o=!0,s=n)}if(!o)throw Error("Invalid Setup header: mode header not found.");if(s>63)throw Error(`Unsupported mode count: ${s}.`);let l=s;i.pos=0,i.skipBits(a);let u=Array(l).fill(0);for(let e=l-1;e>=0;e--)i.skipBits(40),u[e]=i.readBits(1);return{modeBlockflags:u}},tT=(e,t,r)=>{switch(e){case"avc":for(let e of e7(r,t)){let t=te(r[e.offset]);if(t>=1&&t<=4)break;if(5===t)return"key";if(6===t&&(!eu()||ed()>=144)){let t=tt(r.subarray(e.offset,e.offset+e.length)),i=1;do{let e=0;for(;;){let r=t[i++];if(void 0===r||(e+=r,r<255))break}let r=0;for(;;){let e=t[i++];if(void 0===e||(r+=e,e<255))break}if(6===e){let e=new y(t);e.pos=8*i;let r=b(e),a=e.readBits(1);if(0===r&&1===a)return"key"}i+=r}while(i<t.length-1)}}return"delta";case"hevc":for(let e of tu(r,t)){let t=td(r[e.offset]);if(t<16)break;if(t<=23)return"key"}return"delta";case"vp8":return 0==(1&r[0])?"key":"delta";case"vp9":{let e=new y(r);if(2!==e.readBits(2))return null;let t=e.readBits(1);if(3===(e.readBits(1)<<1)+t&&e.skipBits(1),e.readBits(1))return null;return 0===e.readBits(1)?"key":"delta"}case"av1":{let e=!1;for(let{type:t,data:i}of tS(r))if(1===t){let t=new y(i);t.skipBits(4),e=!!t.readBits(1)}else if(3===t||6===t||7===t){if(e)return"key";let t=new y(i);if(t.readBits(1))return null;return 0===t.readBits(2)?"key":"delta"}return null}default:W(e),h(!1)}},tP=(e,t)=>{let r=S(e),i=0,a=r.getUint32(i,!0);i+=4;let n=k.decode(e.subarray(i,i+a));i+=a,a>0&&(t.raw??={},t.raw.vendor??=n);let o=r.getUint32(i,!0);i+=4;for(let a=0;a<o;a++){let a=r.getUint32(i,!0);i+=4;let n=k.decode(e.subarray(i,i+a));i+=a;let o=n.indexOf("=");if(-1===o)continue;let s=n.slice(0,o).toUpperCase(),l=n.slice(o+1);switch(t.raw??={},t.raw[s]??=l,s){case"TITLE":t.title??=l;break;case"DESCRIPTION":t.description??=l;break;case"ARTIST":t.artist??=l;break;case"ALBUM":t.album??=l;break;case"ALBUMARTIST":t.albumArtist??=l;break;case"COMMENT":t.comment??=l;break;case"LYRICS":t.lyrics??=l;break;case"TRACKNUMBER":{let e=l.split("/"),r=Number.parseInt(e[0],10),i=e[1]&&Number.parseInt(e[1],10);Number.isInteger(r)&&r>0&&(t.trackNumber??=r),i&&Number.isInteger(i)&&i>0&&(t.tracksTotal??=i)}break;case"TRACKTOTAL":{let e=Number.parseInt(l,10);Number.isInteger(e)&&e>0&&(t.tracksTotal??=e)}break;case"DISCNUMBER":{let e=l.split("/"),r=Number.parseInt(e[0],10),i=e[1]&&Number.parseInt(e[1],10);Number.isInteger(r)&&r>0&&(t.discNumber??=r),i&&Number.isInteger(i)&&i>0&&(t.discsTotal??=i)}break;case"DISCTOTAL":{let e=Number.parseInt(l,10);Number.isInteger(e)&&e>0&&(t.discsTotal??=e)}break;case"DATE":{let e=new Date(l);Number.isNaN(e.getTime())||(t.date??=e)}break;case"GENRE":t.genre??=l;break;case"METADATA_BLOCK_PICTURE":{let e=eg(l),r=S(e),i=r.getUint32(0,!1),a=r.getUint32(4,!1),n=String.fromCharCode(...e.subarray(8,8+a)),o=r.getUint32(8+a,!1),s=k.decode(e.subarray(12+a,12+a+o)),u=r.getUint32(a+o+28),c=e.subarray(a+o+32,a+o+32+u);t.images??=[],t.images.push({data:c,mimeType:n,kind:3===i?"coverFront":4===i?"coverBack":"unknown",name:void 0,description:s||void 0})}}}},tI=(e,t,r)=>{let i=[e],a=C.encode("Mediabunny"),n=new Uint8Array(4+a.length),o=new DataView(n.buffer);o.setUint32(0,a.length,!0),n.set(a,4),i.push(n);let s=new Set,l=(e,t)=>{let r=`${e}=${t}`,a=C.encode(r);(o=new DataView((n=new Uint8Array(4+a.length)).buffer)).setUint32(0,a.length,!0),n.set(a,4),i.push(n),s.add(e)};for(let{key:e,value:i}of eh(t))switch(e){case"title":l("TITLE",i);break;case"description":l("DESCRIPTION",i);break;case"artist":l("ARTIST",i);break;case"album":l("ALBUM",i);break;case"albumArtist":l("ALBUMARTIST",i);break;case"genre":l("GENRE",i);break;case"date":{let e=t.raw?.DATE??t.raw?.date;l("DATE",e&&"string"==typeof e?e:i.toISOString().slice(0,10))}break;case"comment":l("COMMENT",i);break;case"lyrics":l("LYRICS",i);break;case"trackNumber":l("TRACKNUMBER",i.toString());break;case"tracksTotal":l("TRACKTOTAL",i.toString());break;case"discNumber":l("DISCNUMBER",i.toString());break;case"discsTotal":l("DISCTOTAL",i.toString());break;case"images":if(!r)break;for(let e of i){let t="coverFront"===e.kind?3:4*("coverBack"===e.kind),r=new Uint8Array(e.mimeType.length);for(let t=0;t<e.mimeType.length;t++)r[t]=e.mimeType.charCodeAt(t);let i=C.encode(e.description??""),a=new Uint8Array(8+r.length+4+i.length+16+4+e.data.length),n=S(a);n.setUint32(0,t,!1),n.setUint32(4,r.length,!1),a.set(r,8),n.setUint32(8+r.length,i.length,!1),a.set(i,12+r.length),n.setUint32(28+r.length+i.length,e.data.length,!1),a.set(e.data,32+r.length+i.length),l("METADATA_BLOCK_PICTURE",ev(a))}break;case"raw":break;default:W(e)}if(t.raw)for(let e in t.raw){let r=t.raw[e]??t.raw[e.toLowerCase()];"vendor"===e||null==r||s.has(e)||"string"==typeof r&&l(e,r)}let u=new Uint8Array(4);S(u).setUint32(0,s.size,!0),i.splice(2,0,u);let c=new Uint8Array(i.reduce((e,t)=>e+t.length,0)),d=0;for(let e of i)c.set(e,d),d+=e.length;return c},tA=class{constructor(e){this.input=e}},tO=class{static supports(e,t){return!1}},tM=class{static supports(e,t){return!1}},tF=class{static supports(e,t){return!1}},tR=class{static supports(e,t){return!1}},tD=[],tj=[],tL=[],tB=[],tN=e=>{if(e.prototype instanceof tO){if(tD.includes(e))return void console.warn("Video decoder already registered.");tD.push(e)}else if(e.prototype instanceof tM){if(tj.includes(e))return void console.warn("Audio decoder already registered.");tj.push(e)}else throw TypeError("Decoder must be a CustomVideoDecoder or CustomAudioDecoder.")},t$=e=>{if(e.prototype instanceof tF){if(tL.includes(e))return void console.warn("Video encoder already registered.");tL.push(e)}else if(e.prototype instanceof tR){if(tB.includes(e))return void console.warn("Audio encoder already registered.");tB.push(e)}else throw TypeError("Encoder must be a CustomVideoEncoder or CustomAudioEncoder.")},tz=new Uint8Array(0),tU=class e{constructor(e,t,r,i,a=-1,n,o){if(this.data=e,this.type=t,this.timestamp=r,this.duration=i,this.sequenceNumber=a,e===tz&&void 0===n)throw Error("Internal error: byteLength must be explicitly provided when constructing metadata-only packets.");if(void 0===n&&(n=e.byteLength),!(e instanceof Uint8Array))throw TypeError("data must be a Uint8Array.");if("key"!==t&&"delta"!==t)throw TypeError('type must be either "key" or "delta".');if(!Number.isFinite(r))throw TypeError("timestamp must be a number.");if(!Number.isFinite(i)||i<0)throw TypeError("duration must be a non-negative number.");if(!Number.isFinite(a))throw TypeError("sequenceNumber must be a number.");if(!Number.isInteger(n)||n<0)throw TypeError("byteLength must be a non-negative integer.");if(void 0!==o&&("object"!=typeof o||!o))throw TypeError("sideData, when provided, must be an object.");if(o?.alpha!==void 0&&!(o.alpha instanceof Uint8Array))throw TypeError("sideData.alpha, when provided, must be a Uint8Array.");if(o?.alphaByteLength!==void 0&&(!Number.isInteger(o.alphaByteLength)||o.alphaByteLength<0))throw TypeError("sideData.alphaByteLength, when provided, must be a non-negative integer.");this.byteLength=n,this.sideData=o??{},this.sideData.alpha&&void 0===this.sideData.alphaByteLength&&(this.sideData.alphaByteLength=this.sideData.alpha.byteLength)}get isMetadataOnly(){return this.data===tz}get microsecondTimestamp(){return Math.trunc(Y*this.timestamp)}get microsecondDuration(){return Math.trunc(Y*this.duration)}toEncodedVideoChunk(){if(this.isMetadataOnly)throw TypeError("Metadata-only packets cannot be converted to a video chunk.");if("u"<typeof EncodedVideoChunk)throw Error("Your browser does not support EncodedVideoChunk.");return new EncodedVideoChunk({data:this.data,type:this.type,timestamp:this.microsecondTimestamp,duration:this.microsecondDuration})}alphaToEncodedVideoChunk(e=this.type){if(!this.sideData.alpha)throw TypeError("This packet does not contain alpha side data.");if(this.isMetadataOnly)throw TypeError("Metadata-only packets cannot be converted to a video chunk.");if("u"<typeof EncodedVideoChunk)throw Error("Your browser does not support EncodedVideoChunk.");return new EncodedVideoChunk({data:this.sideData.alpha,type:e,timestamp:this.microsecondTimestamp,duration:this.microsecondDuration})}toEncodedAudioChunk(){if(this.isMetadataOnly)throw TypeError("Metadata-only packets cannot be converted to an audio chunk.");if("u"<typeof EncodedAudioChunk)throw Error("Your browser does not support EncodedAudioChunk.");return new EncodedAudioChunk({data:this.data,type:this.type,timestamp:this.microsecondTimestamp,duration:this.microsecondDuration})}static fromEncodedChunk(t,r){if(!(t instanceof EncodedVideoChunk||t instanceof EncodedAudioChunk))throw TypeError("chunk must be an EncodedVideoChunk or EncodedAudioChunk.");let i=new Uint8Array(t.byteLength);return t.copyTo(i),new e(i,t.type,t.timestamp/1e6,(t.duration??0)/1e6,void 0,void 0,r)}clone(t){if(void 0!==t&&("object"!=typeof t||null===t))throw TypeError("options, when provided, must be an object.");if(t?.data!==void 0&&!(t.data instanceof Uint8Array))throw TypeError("options.data, when provided, must be a Uint8Array.");if(t?.type!==void 0&&"key"!==t.type&&"delta"!==t.type)throw TypeError('options.type, when provided, must be either "key" or "delta".');if(t?.timestamp!==void 0&&!Number.isFinite(t.timestamp))throw TypeError("options.timestamp, when provided, must be a number.");if(t?.duration!==void 0&&!Number.isFinite(t.duration))throw TypeError("options.duration, when provided, must be a number.");if(t?.sequenceNumber!==void 0&&!Number.isFinite(t.sequenceNumber))throw TypeError("options.sequenceNumber, when provided, must be a number.");if(t?.sideData!==void 0&&("object"!=typeof t.sideData||null===t.sideData))throw TypeError("options.sideData, when provided, must be an object.");return new e(t?.data??this.data,t?.type??this.type,t?.timestamp??this.timestamp,t?.duration??this.duration,t?.sequenceNumber??this.sequenceNumber,this.byteLength,t?.sideData??this.sideData)}};eb();var tV=-1/0,tH=-1/0,tW=null;"u">typeof FinalizationRegistry&&(tW=new FinalizationRegistry(e=>{let t=Date.now();"video"===e.type?(t-tV>=1e3&&(console.error("A VideoSample was garbage collected without first being closed. For proper resource management, make sure to call close() on all your VideoSamples as soon as you're done using them."),tV=t),"u">typeof VideoFrame&&e.data instanceof VideoFrame&&e.data.close()):(t-tH>=1e3&&(console.error("An AudioSample was garbage collected without first being closed. For proper resource management, make sure to call close() on all your AudioSamples as soon as you're done using them."),tH=t),"u">typeof AudioData&&e.data instanceof AudioData&&e.data.close())}));var tq=["I420","I420P10","I420P12","I420A","I420AP10","I420AP12","I422","I422P10","I422P12","I422A","I422AP10","I422AP12","I444","I444P10","I444P12","I444A","I444AP10","I444AP12","NV12","RGBA","RGBX","BGRA","BGRX"],tG=new Set(tq),tZ=class e{constructor(t,r){if(this._closed=!1,t instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&t instanceof SharedArrayBuffer||ArrayBuffer.isView(t)){if(!r||"object"!=typeof r)throw TypeError("init must be an object.");if(void 0===r.format||!tG.has(r.format))throw TypeError("init.format must be one of: "+tq.join(", "));if(!Number.isInteger(r.codedWidth)||r.codedWidth<=0)throw TypeError("init.codedWidth must be a positive integer.");if(!Number.isInteger(r.codedHeight)||r.codedHeight<=0)throw TypeError("init.codedHeight must be a positive integer.");if(void 0!==r.rotation&&![0,90,180,270].includes(r.rotation))throw TypeError("init.rotation, when provided, must be 0, 90, 180, or 270.");if(!Number.isFinite(r.timestamp))throw TypeError("init.timestamp must be a number.");if(void 0!==r.duration&&(!Number.isFinite(r.duration)||r.duration<0))throw TypeError("init.duration, when provided, must be a non-negative number.");this._data=w(t).slice(),this._layout=r.layout??t0(r.format,r.codedWidth,r.codedHeight),this.format=r.format,this.codedWidth=r.codedWidth,this.codedHeight=r.codedHeight,this.rotation=r.rotation??0,this.timestamp=r.timestamp,this.duration=r.duration??0,this.colorSpace=new tK(r.colorSpace)}else if("u">typeof VideoFrame&&t instanceof VideoFrame){if(r?.rotation!==void 0&&![0,90,180,270].includes(r.rotation))throw TypeError("init.rotation, when provided, must be 0, 90, 180, or 270.");if(r?.timestamp!==void 0&&!Number.isFinite(r?.timestamp))throw TypeError("init.timestamp, when provided, must be a number.");if(r?.duration!==void 0&&(!Number.isFinite(r.duration)||r.duration<0))throw TypeError("init.duration, when provided, must be a non-negative number.");this._data=t,this._layout=null,this.format=t.format,this.codedWidth=t.displayWidth,this.codedHeight=t.displayHeight,this.rotation=r?.rotation??0,this.timestamp=r?.timestamp??t.timestamp/1e6,this.duration=r?.duration??(t.duration??0)/1e6,this.colorSpace=new tK(t.colorSpace)}else if("u">typeof HTMLImageElement&&t instanceof HTMLImageElement||"u">typeof SVGImageElement&&t instanceof SVGImageElement||"u">typeof ImageBitmap&&t instanceof ImageBitmap||"u">typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"u">typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"u">typeof OffscreenCanvas&&t instanceof OffscreenCanvas){if(!r||"object"!=typeof r)throw TypeError("init must be an object.");if(void 0!==r.rotation&&![0,90,180,270].includes(r.rotation))throw TypeError("init.rotation, when provided, must be 0, 90, 180, or 270.");if(!Number.isFinite(r.timestamp))throw TypeError("init.timestamp must be a number.");if(void 0!==r.duration&&(!Number.isFinite(r.duration)||r.duration<0))throw TypeError("init.duration, when provided, must be a non-negative number.");if("u">typeof VideoFrame)return new e(new VideoFrame(t,{timestamp:Math.trunc(r.timestamp*Y),duration:Math.trunc((r.duration??0)*Y)||void 0}),r);let i=0,a=0;if("naturalWidth"in t?(i=t.naturalWidth,a=t.naturalHeight):"videoWidth"in t?(i=t.videoWidth,a=t.videoHeight):"width"in t&&(i=Number(t.width),a=Number(t.height)),!i||!a)throw TypeError("Could not determine dimensions.");const n=new OffscreenCanvas(i,a),o=n.getContext("2d",{alpha:es(),willReadFrequently:!0});h(o),o.drawImage(t,0,0),this._data=n,this._layout=null,this.format="RGBX",this.codedWidth=i,this.codedHeight=a,this.rotation=r.rotation??0,this.timestamp=r.timestamp,this.duration=r.duration??0,this.colorSpace=new tK({matrix:"rgb",primaries:"bt709",transfer:"iec61966-2-1",fullRange:!0})}else throw TypeError("Invalid data type: Must be a BufferSource or CanvasImageSource.");tW?.register(this,{type:"video",data:this._data},this)}get displayWidth(){return this.rotation%180==0?this.codedWidth:this.codedHeight}get displayHeight(){return this.rotation%180==0?this.codedHeight:this.codedWidth}get microsecondTimestamp(){return Math.trunc(Y*this.timestamp)}get microsecondDuration(){return Math.trunc(Y*this.duration)}get hasAlpha(){return this.format&&this.format.includes("A")}clone(){if(this._closed)throw Error("VideoSample is closed.");return(h(null!==this._data),tQ(this._data))?new e(this._data.clone(),{timestamp:this.timestamp,duration:this.duration,rotation:this.rotation}):this._data instanceof Uint8Array?(h(this._layout),new e(this._data,{format:this.format,layout:this._layout,codedWidth:this.codedWidth,codedHeight:this.codedHeight,timestamp:this.timestamp,duration:this.duration,colorSpace:this.colorSpace,rotation:this.rotation})):new e(this._data,{format:this.format,codedWidth:this.codedWidth,codedHeight:this.codedHeight,timestamp:this.timestamp,duration:this.duration,colorSpace:this.colorSpace,rotation:this.rotation})}close(){this._closed||(tW?.unregister(this),tQ(this._data)?this._data.close():this._data=null,this._closed=!0)}allocationSize(e={}){if(tY(e),this._closed)throw Error("VideoSample is closed.");if(null===this.format)throw Error("Cannot get allocation size when format is null. Sorry!");if(h(null!==this._data),!tQ(this._data)&&(e.colorSpace||e.format&&e.format!==this.format||e.layout||e.rect)){let t=this.toVideoFrame(),r=t.allocationSize(e);return t.close(),r}return tQ(this._data)?this._data.allocationSize(e):this._data instanceof Uint8Array?this._data.byteLength:this.codedWidth*this.codedHeight*4}async copyTo(e,t={}){if(!R(e))throw TypeError("destination must be an ArrayBuffer or an ArrayBuffer view.");if(tY(t),this._closed)throw Error("VideoSample is closed.");if(null===this.format)throw Error("Cannot copy video sample data when format is null. Sorry!");if(h(null!==this._data),!tQ(this._data)&&(t.colorSpace||t.format&&t.format!==this.format||t.layout||t.rect)){let r=this.toVideoFrame(),i=await r.copyTo(e,t);return r.close(),i}if(tQ(this._data))return this._data.copyTo(e,t);if(this._data instanceof Uint8Array)return h(this._layout),w(e).set(this._data),this._layout;{let t=this._data.getContext("2d");h(t);let r=t.getImageData(0,0,this.codedWidth,this.codedHeight);return w(e).set(r.data),[{offset:0,stride:4*this.codedWidth}]}}toVideoFrame(){if(this._closed)throw Error("VideoSample is closed.");return(h(null!==this._data),tQ(this._data))?new VideoFrame(this._data,{timestamp:this.microsecondTimestamp,duration:this.microsecondDuration||void 0}):this._data instanceof Uint8Array?new VideoFrame(this._data,{format:this.format,codedWidth:this.codedWidth,codedHeight:this.codedHeight,timestamp:this.microsecondTimestamp,duration:this.microsecondDuration||void 0,colorSpace:this.colorSpace}):new VideoFrame(this._data,{timestamp:this.microsecondTimestamp,duration:this.microsecondDuration||void 0})}draw(e,t,r,i,a,n,o,s,l){let u=0,c=0,d=this.displayWidth,p=this.displayHeight,f=0,h=0,m=this.displayWidth,g=this.displayHeight;if(void 0!==n?(u=t,c=r,d=i,p=a,f=n,h=o,void 0!==s?(m=s,g=l):(m=d,g=p)):(f=t,h=r,void 0!==i&&(m=i,g=a)),!("u">typeof CanvasRenderingContext2D&&e instanceof CanvasRenderingContext2D||"u">typeof OffscreenCanvasRenderingContext2D&&e instanceof OffscreenCanvasRenderingContext2D))throw TypeError("context must be a CanvasRenderingContext2D or OffscreenCanvasRenderingContext2D.");if(!Number.isFinite(u))throw TypeError("sx must be a number.");if(!Number.isFinite(c))throw TypeError("sy must be a number.");if(!Number.isFinite(d)||d<0)throw TypeError("sWidth must be a non-negative number.");if(!Number.isFinite(p)||p<0)throw TypeError("sHeight must be a non-negative number.");if(!Number.isFinite(f))throw TypeError("dx must be a number.");if(!Number.isFinite(h))throw TypeError("dy must be a number.");if(!Number.isFinite(m)||m<0)throw TypeError("dWidth must be a non-negative number.");if(!Number.isFinite(g)||g<0)throw TypeError("dHeight must be a non-negative number.");if(this._closed)throw Error("VideoSample is closed.");({sx:u,sy:c,sWidth:d,sHeight:p}=this._rotateSourceRegion(u,c,d,p,this.rotation));let v=this.toCanvasImageSource();e.save();let y=f+m/2,b=h+g/2;e.translate(y,b),e.rotate(this.rotation*Math.PI/180);let x=this.rotation%180==0?1:m/g;e.scale(1/x,x),e.drawImage(v,u,c,d,p,-m/2,-g/2,m,g),e.restore()}drawWithFit(e,t){let r,i,a,n;if(!("u">typeof CanvasRenderingContext2D&&e instanceof CanvasRenderingContext2D||"u">typeof OffscreenCanvasRenderingContext2D&&e instanceof OffscreenCanvasRenderingContext2D))throw TypeError("context must be a CanvasRenderingContext2D or OffscreenCanvasRenderingContext2D.");if(!t||"object"!=typeof t)throw TypeError("options must be an object.");if(!["fill","contain","cover"].includes(t.fit))throw TypeError("options.fit must be 'fill', 'contain', or 'cover'.");if(void 0!==t.rotation&&![0,90,180,270].includes(t.rotation))throw TypeError("options.rotation, when provided, must be 0, 90, 180, or 270.");void 0!==t.crop&&tJ(t.crop,"options.");let o=e.canvas.width,s=e.canvas.height,l=t.rotation??this.rotation,[u,c]=l%180==0?[this.codedWidth,this.codedHeight]:[this.codedHeight,this.codedWidth];t.crop&&tX(t.crop,u,c);let{sx:d,sy:p,sWidth:f,sHeight:h}=this._rotateSourceRegion(t.crop?.left??0,t.crop?.top??0,t.crop?.width??u,t.crop?.height??c,l);if("fill"===t.fit)r=0,i=0,a=o,n=s;else{let[e,l]=t.crop?[t.crop.width,t.crop.height]:[u,c],d="contain"===t.fit?Math.min(o/e,s/l):Math.max(o/e,s/l);a=e*d,n=l*d,r=(o-a)/2,i=(s-n)/2}e.save();let m=l%180==0?1:a/n;e.translate(o/2,s/2),e.rotate(l*Math.PI/180),e.scale(1/m,m),e.translate(-o/2,-s/2),e.drawImage(this.toCanvasImageSource(),d,p,f,h,r,i,a,n),e.restore()}_rotateSourceRegion(e,t,r,i,a){return 90===a?[e,t,r,i]=[t,this.codedHeight-e-r,i,r]:180===a?[e,t]=[this.codedWidth-e-r,this.codedHeight-t-i]:270===a&&([e,t,r,i]=[this.codedWidth-t-i,e,i,r]),{sx:e,sy:t,sWidth:r,sHeight:i}}toCanvasImageSource(){if(this._closed)throw Error("VideoSample is closed.");if(h(null!==this._data),!(this._data instanceof Uint8Array))return this._data;{let e=this.toVideoFrame();return queueMicrotask(()=>e.close()),e}}setRotation(e){if(![0,90,180,270].includes(e))throw TypeError("newRotation must be 0, 90, 180, or 270.");this.rotation=e}setTimestamp(e){if(!Number.isFinite(e))throw TypeError("newTimestamp must be a number.");this.timestamp=e}setDuration(e){if(!Number.isFinite(e)||e<0)throw TypeError("newDuration must be a non-negative number.");this.duration=e}[Symbol.dispose](){this.close()}},tK=class{constructor(e){this.primaries=e?.primaries??null,this.transfer=e?.transfer??null,this.matrix=e?.matrix??null,this.fullRange=e?.fullRange??null}toJSON(){return{primaries:this.primaries,transfer:this.transfer,matrix:this.matrix,fullRange:this.fullRange}}},tQ=e=>"u">typeof VideoFrame&&e instanceof VideoFrame,tX=(e,t,r)=>{e.left=Math.min(e.left,t),e.top=Math.min(e.top,r),e.width=Math.min(e.width,t-e.left),e.height=Math.min(e.height,r-e.top),h(e.width>=0),h(e.height>=0)},tJ=(e,t)=>{if(!e||"object"!=typeof e)throw TypeError(t+"crop, when provided, must be an object.");if(!Number.isInteger(e.left)||e.left<0)throw TypeError(t+"crop.left must be a non-negative integer.");if(!Number.isInteger(e.top)||e.top<0)throw TypeError(t+"crop.top must be a non-negative integer.");if(!Number.isInteger(e.width)||e.width<0)throw TypeError(t+"crop.width must be a non-negative integer.");if(!Number.isInteger(e.height)||e.height<0)throw TypeError(t+"crop.height must be a non-negative integer.")},tY=e=>{if(!e||"object"!=typeof e)throw TypeError("options must be an object.");if(void 0!==e.colorSpace&&!["display-p3","srgb"].includes(e.colorSpace))throw TypeError("options.colorSpace, when provided, must be 'display-p3' or 'srgb'.");if(void 0!==e.format&&"string"!=typeof e.format)throw TypeError("options.format, when provided, must be a string.");if(void 0!==e.layout){if(!Array.isArray(e.layout))throw TypeError("options.layout, when provided, must be an array.");for(let t of e.layout){if(!t||"object"!=typeof t)throw TypeError("Each entry in options.layout must be an object.");if(!Number.isInteger(t.offset)||t.offset<0)throw TypeError("plane.offset must be a non-negative integer.");if(!Number.isInteger(t.stride)||t.stride<0)throw TypeError("plane.stride must be a non-negative integer.")}}if(void 0!==e.rect){if(!e.rect||"object"!=typeof e.rect)throw TypeError("options.rect, when provided, must be an object.");if(void 0!==e.rect.x&&(!Number.isInteger(e.rect.x)||e.rect.x<0))throw TypeError("options.rect.x, when provided, must be a non-negative integer.");if(void 0!==e.rect.y&&(!Number.isInteger(e.rect.y)||e.rect.y<0))throw TypeError("options.rect.y, when provided, must be a non-negative integer.");if(void 0!==e.rect.width&&(!Number.isInteger(e.rect.width)||e.rect.width<0))throw TypeError("options.rect.width, when provided, must be a non-negative integer.");if(void 0!==e.rect.height&&(!Number.isInteger(e.rect.height)||e.rect.height<0))throw TypeError("options.rect.height, when provided, must be a non-negative integer.")}},t0=(e,t,r)=>{let i=t1(e),a=[],n=0;for(let e of i){let i=Math.ceil(t/e.widthDivisor),o=Math.ceil(r/e.heightDivisor),s=i*e.sampleBytes,l=s*o;a.push({offset:n,stride:s}),n+=l}return a},t1=e=>{let t=(e,t,r,i,a)=>{let n=[{sampleBytes:e,widthDivisor:1,heightDivisor:1},{sampleBytes:t,widthDivisor:r,heightDivisor:i},{sampleBytes:t,widthDivisor:r,heightDivisor:i}];return a&&n.push({sampleBytes:e,widthDivisor:1,heightDivisor:1}),n};switch(e){case"I420":return t(1,1,2,2,!1);case"I420P10":case"I420P12":return t(2,2,2,2,!1);case"I420A":return t(1,1,2,2,!0);case"I420AP10":case"I420AP12":return t(2,2,2,2,!0);case"I422":return t(1,1,2,1,!1);case"I422P10":case"I422P12":return t(2,2,2,1,!1);case"I422A":return t(1,1,2,1,!0);case"I422AP10":case"I422AP12":return t(2,2,2,1,!0);case"I444":return t(1,1,1,1,!1);case"I444P10":case"I444P12":return t(2,2,1,1,!1);case"I444A":return t(1,1,1,1,!0);case"I444AP10":case"I444AP12":return t(2,2,1,1,!0);case"NV12":return[{sampleBytes:1,widthDivisor:1,heightDivisor:1},{sampleBytes:2,widthDivisor:2,heightDivisor:2}];case"RGBA":case"RGBX":case"BGRA":case"BGRX":return[{sampleBytes:4,widthDivisor:1,heightDivisor:1}];default:W(e),h(!1)}},t2=new Set(["f32","f32-planar","s16","s16-planar","s32","s32-planar","u8","u8-planar"]),t4=class e{constructor(e){if(this._closed=!1,t7(e)){if(null===e.format)throw TypeError("AudioData with null format is not supported.");this._data=e,this.format=e.format,this.sampleRate=e.sampleRate,this.numberOfFrames=e.numberOfFrames,this.numberOfChannels=e.numberOfChannels,this.timestamp=e.timestamp/1e6,this.duration=e.numberOfFrames/e.sampleRate}else{let t;if(!e||"object"!=typeof e)throw TypeError("Invalid AudioDataInit: must be an object.");if(!t2.has(e.format))throw TypeError("Invalid AudioDataInit: invalid format.");if(!Number.isFinite(e.sampleRate)||e.sampleRate<=0)throw TypeError("Invalid AudioDataInit: sampleRate must be > 0.");if(!Number.isInteger(e.numberOfChannels)||0===e.numberOfChannels)throw TypeError("Invalid AudioDataInit: numberOfChannels must be an integer > 0.");if(!Number.isFinite(e?.timestamp))throw TypeError("init.timestamp must be a number.");const r=e.data.byteLength/(t3(e.format)*e.numberOfChannels);if(!Number.isInteger(r))throw TypeError("Invalid AudioDataInit: data size is not a multiple of frame size.");if(this.format=e.format,this.sampleRate=e.sampleRate,this.numberOfFrames=r,this.numberOfChannels=e.numberOfChannels,this.timestamp=e.timestamp,this.duration=r/e.sampleRate,e.data instanceof ArrayBuffer)t=new Uint8Array(e.data);else if(ArrayBuffer.isView(e.data))t=new Uint8Array(e.data.buffer,e.data.byteOffset,e.data.byteLength);else throw TypeError("Invalid AudioDataInit: data is not a BufferSource.");const i=this.numberOfFrames*this.numberOfChannels*t3(this.format);if(t.byteLength<i)throw TypeError("Invalid AudioDataInit: insufficient data size.");this._data=t}tW?.register(this,{type:"audio",data:this._data},this)}get microsecondTimestamp(){return Math.trunc(Y*this.timestamp)}get microsecondDuration(){return Math.trunc(Y*this.duration)}allocationSize(e){if(!e||"object"!=typeof e)throw TypeError("options must be an object.");if(!Number.isInteger(e.planeIndex)||e.planeIndex<0)throw TypeError("planeIndex must be a non-negative integer.");if(void 0!==e.format&&!t2.has(e.format))throw TypeError("Invalid format.");if(void 0!==e.frameOffset&&(!Number.isInteger(e.frameOffset)||e.frameOffset<0))throw TypeError("frameOffset must be a non-negative integer.");if(void 0!==e.frameCount&&(!Number.isInteger(e.frameCount)||e.frameCount<0))throw TypeError("frameCount must be a non-negative integer.");if(this._closed)throw Error("AudioSample is closed.");let t=e.format??this.format,r=e.frameOffset??0;if(r>=this.numberOfFrames)throw RangeError("frameOffset out of range");let i=void 0!==e.frameCount?e.frameCount:this.numberOfFrames-r;if(i>this.numberOfFrames-r)throw RangeError("frameCount out of range");let a=t3(t),n=t6(t);if(n&&e.planeIndex>=this.numberOfChannels||!n&&0!==e.planeIndex)throw RangeError("planeIndex out of range");return(n?i:i*this.numberOfChannels)*a}copyTo(e,t){if(!R(e))throw TypeError("destination must be an ArrayBuffer or an ArrayBuffer view.");if(!t||"object"!=typeof t)throw TypeError("options must be an object.");if(!Number.isInteger(t.planeIndex)||t.planeIndex<0)throw TypeError("planeIndex must be a non-negative integer.");if(void 0!==t.format&&!t2.has(t.format))throw TypeError("Invalid format.");if(void 0!==t.frameOffset&&(!Number.isInteger(t.frameOffset)||t.frameOffset<0))throw TypeError("frameOffset must be a non-negative integer.");if(void 0!==t.frameCount&&(!Number.isInteger(t.frameCount)||t.frameCount<0))throw TypeError("frameCount must be a non-negative integer.");if(this._closed)throw Error("AudioSample is closed.");let{planeIndex:r,format:i,frameCount:a,frameOffset:n}=t,o=this.format,s=i??this.format;if(!s)throw Error("Destination format not determined");let l=this.numberOfFrames,u=this.numberOfChannels,c=n??0;if(c>=l)throw RangeError("frameOffset out of range");let d=void 0!==a?a:l-c;if(d>l-c)throw RangeError("frameCount out of range");let p=t3(s),f=t6(s);if(f&&r>=u||!f&&0!==r)throw RangeError("planeIndex out of range");let h=f?d:d*u;if(e.byteLength<h*p)throw RangeError("Destination buffer is too small");let m=S(e),g=t5(s);if(t7(this._data))en()&&u>2&&s!==o?t9(this._data,m,o,s,u,r,c,d):this._data.copyTo(e,{planeIndex:r,frameOffset:c,frameCount:d,format:s});else{let e=S(this._data),t=t8(o),i=t3(o),a=t6(o);for(let n=0;n<d;n++)if(f)g(m,n*p,t(e,a?(r*l+(n+c))*i:((n+c)*u+r)*i));else for(let r=0;r<u;r++)g(m,(n*u+r)*p,t(e,a?(r*l+(n+c))*i:((n+c)*u+r)*i))}}clone(){if(this._closed)throw Error("AudioSample is closed.");if(!t7(this._data))return new e({format:this.format,sampleRate:this.sampleRate,numberOfFrames:this.numberOfFrames,numberOfChannels:this.numberOfChannels,timestamp:this.timestamp,data:this._data});{let t=new e(this._data.clone());return t.setTimestamp(this.timestamp),t}}close(){this._closed||(tW?.unregister(this),t7(this._data)?this._data.close():this._data=new Uint8Array(0),this._closed=!0)}toAudioData(){if(this._closed)throw Error("AudioSample is closed.");if(!t7(this._data))return new AudioData({format:this.format,sampleRate:this.sampleRate,numberOfFrames:this.numberOfFrames,numberOfChannels:this.numberOfChannels,timestamp:this.microsecondTimestamp,data:this._data.buffer instanceof ArrayBuffer?this._data.buffer:this._data.slice()});if(this._data.timestamp===this.microsecondTimestamp)return this._data.clone();if(t6(this.format)){let e=this.allocationSize({planeIndex:0,format:this.format}),t=new ArrayBuffer(e*this.numberOfChannels);for(let r=0;r<this.numberOfChannels;r++)this.copyTo(new Uint8Array(t,r*e,e),{planeIndex:r,format:this.format});return new AudioData({format:this.format,sampleRate:this.sampleRate,numberOfFrames:this.numberOfFrames,numberOfChannels:this.numberOfChannels,timestamp:this.microsecondTimestamp,data:t})}{let e=new ArrayBuffer(this.allocationSize({planeIndex:0,format:this.format}));return this.copyTo(e,{planeIndex:0,format:this.format}),new AudioData({format:this.format,sampleRate:this.sampleRate,numberOfFrames:this.numberOfFrames,numberOfChannels:this.numberOfChannels,timestamp:this.microsecondTimestamp,data:e})}}toAudioBuffer(){if(this._closed)throw Error("AudioSample is closed.");let e=new AudioBuffer({numberOfChannels:this.numberOfChannels,length:this.numberOfFrames,sampleRate:this.sampleRate}),t=new Float32Array(this.allocationSize({planeIndex:0,format:"f32-planar"})/4);for(let r=0;r<this.numberOfChannels;r++)this.copyTo(t,{planeIndex:r,format:"f32-planar"}),e.copyToChannel(t,r);return e}setTimestamp(e){if(!Number.isFinite(e))throw TypeError("newTimestamp must be a number.");this.timestamp=e}[Symbol.dispose](){this.close()}static*_fromAudioBuffer(t,r){if(!(t instanceof AudioBuffer))throw TypeError("audioBuffer must be an AudioBuffer.");let i=t.numberOfChannels,a=t.sampleRate,n=t.length,o=Math.floor(24e4/i),s=0,l=n;for(;l>0;){let n=Math.min(o,l),u=new Float32Array(i*n);for(let e=0;e<i;e++)t.copyFromChannel(u.subarray(e*n,(e+1)*n),e,s);yield new e({format:"f32-planar",sampleRate:a,numberOfFrames:n,numberOfChannels:i,timestamp:r+s/a,data:u}),s+=n,l-=n}}static fromAudioBuffer(t,r){if(!(t instanceof AudioBuffer))throw TypeError("audioBuffer must be an AudioBuffer.");let i=t.numberOfChannels,a=t.sampleRate,n=t.length,o=Math.floor(24e4/i),s=0,l=n,u=[];for(;l>0;){let n=Math.min(o,l),c=new Float32Array(i*n);for(let e=0;e<i;e++)t.copyFromChannel(c.subarray(e*n,(e+1)*n),e,s);let d=new e({format:"f32-planar",sampleRate:a,numberOfFrames:n,numberOfChannels:i,timestamp:r+s/a,data:c});u.push(d),s+=n,l-=n}return u}},t3=e=>{switch(e){case"u8":case"u8-planar":return 1;case"s16":case"s16-planar":return 2;case"s32":case"s32-planar":case"f32":case"f32-planar":return 4;default:throw Error("Unknown AudioSampleFormat")}},t6=e=>{switch(e){case"u8-planar":case"s16-planar":case"s32-planar":case"f32-planar":return!0;default:return!1}},t8=e=>{switch(e){case"u8":case"u8-planar":return(e,t)=>(e.getUint8(t)-128)/128;case"s16":case"s16-planar":return(e,t)=>e.getInt16(t,!0)/32768;case"s32":case"s32-planar":return(e,t)=>e.getInt32(t,!0)/0x80000000;case"f32":case"f32-planar":return(e,t)=>e.getFloat32(t,!0)}},t5=e=>{switch(e){case"u8":case"u8-planar":return(e,t,r)=>e.setUint8(t,K((r+1)*127.5,0,255));case"s16":case"s16-planar":return(e,t,r)=>e.setInt16(t,K(Math.round(32767*r),-32768,32767),!0);case"s32":case"s32-planar":return(e,t,r)=>e.setInt32(t,K(Math.round(0x7fffffff*r),-0x80000000,0x7fffffff),!0);case"f32":case"f32-planar":return(e,t,r)=>e.setFloat32(t,r,!0)}},t7=e=>"u">typeof AudioData&&e instanceof AudioData,t9=(e,t,r,i,a,n,o,s)=>{let l=t8(r),u=t5(i),c=t3(r),d=t3(i),p=t6(r);if(t6(i))if(p){let i=new ArrayBuffer(s*c),a=S(i);e.copyTo(i,{planeIndex:n,frameOffset:o,frameCount:s,format:r});for(let e=0;e<s;e++){let r=e*c;u(t,e*d,l(a,r))}}else{let i=new ArrayBuffer(s*a*c),p=S(i);e.copyTo(i,{planeIndex:0,frameOffset:o,frameCount:s,format:r});for(let e=0;e<s;e++){let r=(e*a+n)*c;u(t,e*d,l(p,r))}}else if(p){let i=new ArrayBuffer(s*c),n=S(i);for(let p=0;p<a;p++){e.copyTo(i,{planeIndex:p,frameOffset:o,frameCount:s,format:r});for(let e=0;e<s;e++){let r=e*c;u(t,(e*a+p)*d,l(n,r))}}}else{let i=new ArrayBuffer(s*a*c),n=S(i);e.copyTo(i,{planeIndex:0,frameOffset:o,frameCount:s,format:r});for(let e=0;e<s;e++)for(let r=0;r<a;r++){let i=e*a+r,o=i*c;u(t,i*d,l(n,o))}}},re=e=>{if(!e||"object"!=typeof e)throw TypeError("options must be an object.");if(void 0!==e.metadataOnly&&"boolean"!=typeof e.metadataOnly)throw TypeError("options.metadataOnly, when defined, must be a boolean.");if(void 0!==e.verifyKeyPackets&&"boolean"!=typeof e.verifyKeyPackets)throw TypeError("options.verifyKeyPackets, when defined, must be a boolean.");if(e.verifyKeyPackets&&e.metadataOnly)throw TypeError("options.verifyKeyPackets and options.metadataOnly cannot be enabled together.")},rt=e=>{if(!ex(e))throw TypeError("timestamp must be a number.")},rr=(e,t,r)=>r.verifyKeyPackets?t.then(async t=>{if(!t||"delta"===t.type)return t;let r=await e.determinePacketType(t);return r&&(t.type=r),t}):t,ri=class{constructor(e){if(!(e instanceof rm))throw TypeError("track must be an InputTrack.");this._track=e}getFirstPacket(e={}){if(re(e),this._track.input._disposed)throw new ax;return rr(this._track,this._track._backing.getFirstPacket(e),e)}getPacket(e,t={}){if(rt(e),re(t),this._track.input._disposed)throw new ax;return rr(this._track,this._track._backing.getPacket(e,t),t)}getNextPacket(e,t={}){if(!(e instanceof tU))throw TypeError("packet must be an EncodedPacket.");if(re(t),this._track.input._disposed)throw new ax;return rr(this._track,this._track._backing.getNextPacket(e,t),t)}async getKeyPacket(e,t={}){if(rt(e),re(t),this._track.input._disposed)throw new ax;if(!t.verifyKeyPackets)return this._track._backing.getKeyPacket(e,t);let r=await this._track._backing.getKeyPacket(e,t);return r&&(h("key"===r.type),"delta"===await this._track.determinePacketType(r))?this.getKeyPacket(r.timestamp-1/this._track.timeResolution,t):r}async getNextKeyPacket(e,t={}){if(!(e instanceof tU))throw TypeError("packet must be an EncodedPacket.");if(re(t),this._track.input._disposed)throw new ax;if(!t.verifyKeyPackets)return this._track._backing.getNextKeyPacket(e,t);let r=await this._track._backing.getNextKeyPacket(e,t);return r&&(h("key"===r.type),"delta"===await this._track.determinePacketType(r))?this.getNextKeyPacket(r,t):r}packets(e,t,r={}){if(void 0!==e&&!(e instanceof tU))throw TypeError("startPacket must be an EncodedPacket.");if(void 0!==e&&e.isMetadataOnly&&!r?.metadataOnly)throw TypeError("startPacket can only be metadata-only if options.metadataOnly is enabled.");if(void 0!==t&&!(t instanceof tU))throw TypeError("endPacket must be an EncodedPacket.");if(re(r),this._track.input._disposed)throw new ax;let i=[],{promise:a,resolve:n}=z(),{promise:o,resolve:s}=z(),l=!1,u=!1,c=null,d=[],p=()=>Math.max(2,d.length);(async()=>{let c=e??await this.getFirstPacket(r);for(;c&&!u&&!this._track.input._disposed&&!(t&&c.sequenceNumber>=t?.sequenceNumber);){if(i.length>p()){({promise:o,resolve:s}=z()),await o;continue}i.push(c),n(),({promise:a,resolve:n}=z()),c=await this.getNextPacket(c,r)}l=!0,n()})().catch(e=>{c||(c=e,n())});let f=this._track;return{async next(){for(;;)if(f.input._disposed)throw new ax;else if(u)return{value:void 0,done:!0};else if(c)throw c;else if(i.length>0){let e=i.shift(),t=performance.now();for(d.push(t);d.length>0&&t-d[0]>=1e3;)d.shift();return s(),{value:e,done:!1}}else{if(l)return{value:void 0,done:!0};await a}},return:async()=>(u=!0,s(),n(),{value:void 0,done:!0}),async throw(e){throw e},[Symbol.asyncIterator](){return this}}}},ra=class{constructor(e,t){this.onSample=e,this.onError=t}},rn=class{mediaSamplesInRange(e=0,t=1/0){rt(e),rt(t);let r=[],i=!1,a=null,{promise:n,resolve:o}=z(),{promise:s,resolve:l}=z(),u=!1,c=!1,d=!1,p=null;(async()=>{let f=await this._createDecoder(s=>{(l(),s.timestamp>=t&&(c=!0),c)?s.close():(a&&(s.timestamp>e?(r.push(a),i=!0):a.close()),s.timestamp>=e&&(r.push(s),i=!0),a=i?null:s,r.length>0&&(o(),{promise:n,resolve:o}=z()))},e=>{p||(p=e,o())}),h=this._createPacketSink(),m=await h.getKeyPacket(e,{verifyKeyPackets:!0})??await h.getFirstPacket(),g=m,v=h.packets(m??void 0,void 0);for(await v.next();g&&!c&&!this._track.input._disposed;){let e=ro(r.length);if(r.length+f.getDecodeQueueSize()>e){({promise:s,resolve:l}=z()),await s;continue}f.decode(g);let t=await v.next();if(t.done)break;g=t.value}await v.return(),d||this._track.input._disposed||await f.flush(),f.close(),!i&&a&&r.push(a),u=!0,o()})().catch(e=>{p||(p=e,o())});let f=this._track,h=()=>{for(let e of(a?.close(),r))e.close()};return{async next(){for(;;)if(f.input._disposed)throw h(),new ax;else if(d)return{value:void 0,done:!0};else if(p)throw h(),p;else if(r.length>0){let e=r.shift();return l(),{value:e,done:!1}}else{if(u)return{value:void 0,done:!0};await n}},return:async()=>(d=!0,c=!0,l(),o(),h(),{value:void 0,done:!0}),async throw(e){throw e},[Symbol.asyncIterator](){return this}}}mediaSamplesAtTimestamps(e){if(!(Symbol.iterator in e)&&!(Symbol.asyncIterator in e))throw TypeError("Argument must be an iterable or async iterable.");let t=H(e),r=[],i=[],{promise:a,resolve:n}=z(),{promise:o,resolve:s}=z(),l=!1,u=!1,c=null,d=e=>{i.push(e),n(),{promise:a,resolve:n}=z()};(async()=>{let e=await this._createDecoder(e=>{if(s(),u)return void e.close();let t=0;for(;r.length>0&&e.timestamp-r[0]>-1e-10;)t++,r.shift();if(t>0)for(let r=0;r<t;r++)d(r<t-1?e.clone():e);else e.close()},e=>{c||(c=e,n())}),a=this._createPacketSink(),p=null,f=null,m=-1,g=async()=>{h(f);let t=f;for(e.decode(t);t.sequenceNumber<m;){let r=ro(i.length);for(;i.length+e.getDecodeQueueSize()>r&&!u;)({promise:o,resolve:s}=z()),await o;if(u)break;let n=await a.getNextPacket(t);h(n),e.decode(n),t=n}m=-1},v=async()=>{await e.flush();for(let e=0;e<r.length;e++)d(null);r.length=0};for await(let e of t){if(rt(e),u||this._track.input._disposed)break;let t=await a.getPacket(e),i=t&&await a.getKeyPacket(e,{verifyKeyPackets:!0});if(!i){-1!==m&&(await g(),await v()),d(null),p=null;continue}p&&(i.sequenceNumber!==f.sequenceNumber||t.timestamp<p.timestamp)&&(await g(),await v()),r.push(t.timestamp),m=Math.max(t.sequenceNumber,m),p=t,f=i}u||this._track.input._disposed||(-1!==m&&await g(),await v()),e.close(),l=!0,n()})().catch(e=>{c||(c=e,n())});let p=this._track,f=()=>{for(let e of i)e?.close()};return{async next(){for(;;)if(p.input._disposed)throw f(),new ax;else if(u)return{value:void 0,done:!0};else if(c)throw f(),c;else if(i.length>0){let e=i.shift();return h(void 0!==e),s(),{value:e,done:!1}}else{if(l)return{value:void 0,done:!0};await a}},return:async()=>(u=!0,s(),n(),f(),{value:void 0,done:!0}),async throw(e){throw e},[Symbol.asyncIterator](){return this}}}},ro=e=>0===e?40:8,rs=class extends ra{constructor(e,t,r,i,a,n){super(e,t),this.codec=r,this.decoderConfig=i,this.rotation=a,this.timeResolution=n,this.decoder=null,this.customDecoder=null,this.customDecoderCallSerializer=new ei,this.customDecoderQueueSize=0,this.inputTimestamps=[],this.sampleQueue=[],this.currentPacketIndex=0,this.raslSkipped=!1,this.alphaDecoder=null,this.alphaHadKeyframe=!1,this.colorQueue=[],this.alphaQueue=[],this.merger=null,this.mergerCreationFailed=!1,this.decodedAlphaChunkCount=0,this.alphaDecoderQueueSize=0,this.nullAlphaFrameQueue=[],this.currentAlphaPacketIndex=0,this.alphaRaslSkipped=!1;const o=tD.find(e=>e.supports(r,i));if(o)this.customDecoder=new o,this.customDecoder.codec=r,this.customDecoder.config=i,this.customDecoder.onSample=e=>{if(!(e instanceof tZ))throw TypeError("The argument passed to onSample must be a VideoSample.");this.finalizeAndEmitSample(e)},this.customDecoderCallSerializer.call(()=>this.customDecoder.init());else{const e=e=>{if(this.alphaQueue.length>0){let t=this.alphaQueue.shift();h(void 0!==t),this.mergeAlpha(e,t)}else this.colorQueue.push(e)};if("avc"===r&&this.decoderConfig.description&&eu()){const e=to(w(this.decoderConfig.description));if(e&&e.sequenceParameterSets.length>0){const t=ts(e.sequenceParameterSets[0]);t&&0===t.frameMbsOnlyFlag&&(this.decoderConfig={...this.decoderConfig,hardwareAcceleration:"prefer-software"})}}const t=Error("Decoding error").stack;this.decoder=new VideoDecoder({output:t=>{try{e(t)}catch(e){this.onError(e)}},error:e=>{e.stack=t,this.onError(e)}}),this.decoder.configure(this.decoderConfig)}}getDecodeQueueSize(){return this.customDecoder?this.customDecoderQueueSize:(h(this.decoder),Math.max(this.decoder.decodeQueueSize,this.alphaDecoder?.decodeQueueSize??0))}decode(e){if("hevc"===this.codec&&this.currentPacketIndex>0&&!this.raslSkipped){if(this.hasHevcRaslPicture(e.data))return;this.raslSkipped=!0}if(this.customDecoder)this.customDecoderQueueSize++,this.customDecoderCallSerializer.call(()=>this.customDecoder.decode(e)).then(()=>this.customDecoderQueueSize--);else{if(h(this.decoder),en()||$(this.inputTimestamps,e.timestamp,e=>e),eu()&&0===this.currentPacketIndex&&"avc"===this.codec){var t,r;let i=[];for(let t of e7(e.data,this.decoderConfig)){let r=te(e.data[t.offset]);r>=20&&r<=31||i.push(e.data.subarray(t.offset,t.offset+t.length))}e=new tU((t=i,!(r=this.decoderConfig).description?ti(t):ta(t,(3&w(r.description)[4])+1)),e.type,e.timestamp,e.duration)}this.decoder.decode(e.toEncodedVideoChunk()),this.decodeAlphaData(e)}this.currentPacketIndex++}decodeAlphaData(e){if(!e.sideData.alpha||this.mergerCreationFailed)return void this.pushNullAlphaFrame();if(!this.merger)try{this.merger=new rl}catch(t){console.error("Due to an error, only color data will be decoded.",t),this.mergerCreationFailed=!0,this.decodeAlphaData(e);return}if(!this.alphaDecoder){let e=e=>{if(this.alphaDecoderQueueSize--,this.colorQueue.length>0){let t=this.colorQueue.shift();h(void 0!==t),this.mergeAlpha(t,e)}else this.alphaQueue.push(e);for(this.decodedAlphaChunkCount++;this.nullAlphaFrameQueue.length>0&&this.nullAlphaFrameQueue[0]===this.decodedAlphaChunkCount;)if(this.nullAlphaFrameQueue.shift(),this.colorQueue.length>0){let e=this.colorQueue.shift();h(void 0!==e),this.mergeAlpha(e,null)}else this.alphaQueue.push(null)},t=Error("Decoding error").stack;this.alphaDecoder=new VideoDecoder({output:t=>{try{e(t)}catch(e){this.onError(e)}},error:e=>{e.stack=t,this.onError(e)}}),this.alphaDecoder.configure(this.decoderConfig)}let t=tT(this.codec,this.decoderConfig,e.sideData.alpha);if(this.alphaHadKeyframe||(this.alphaHadKeyframe="key"===t),this.alphaHadKeyframe){if("hevc"===this.codec&&this.currentAlphaPacketIndex>0&&!this.alphaRaslSkipped){if(this.hasHevcRaslPicture(e.sideData.alpha))return void this.pushNullAlphaFrame();this.alphaRaslSkipped=!0}this.currentAlphaPacketIndex++,this.alphaDecoder.decode(e.alphaToEncodedVideoChunk(t??e.type)),this.alphaDecoderQueueSize++}else this.pushNullAlphaFrame()}pushNullAlphaFrame(){0===this.alphaDecoderQueueSize?this.alphaQueue.push(null):this.nullAlphaFrameQueue.push(this.decodedAlphaChunkCount+this.alphaDecoderQueueSize)}hasHevcRaslPicture(e){for(let t of tu(e,this.decoderConfig)){let r=td(e[t.offset]);if(8===r||9===r)return!0}return!1}sampleHandler(e){if(en()){if(this.sampleQueue.length>0&&e.timestamp>=g(this.sampleQueue).timestamp){for(let e of this.sampleQueue)this.finalizeAndEmitSample(e);this.sampleQueue.length=0}$(this.sampleQueue,e,e=>e.timestamp)}else{let t=this.inputTimestamps.shift();h(void 0!==t),e.setTimestamp(t),this.finalizeAndEmitSample(e)}}finalizeAndEmitSample(e){e.setTimestamp(Math.round(e.timestamp*this.timeResolution)/this.timeResolution),e.setDuration(Math.round(e.duration*this.timeResolution)/this.timeResolution),e.setRotation(this.rotation),this.onSample(e)}mergeAlpha(e,t){if(!t){let t=new tZ(e);this.sampleHandler(t);return}h(this.merger),this.merger.update(e,t),e.close(),t.close();let r=new tZ(new VideoFrame(this.merger.canvas,{timestamp:e.timestamp,duration:e.duration??void 0}));this.sampleHandler(r)}async flush(){if(this.customDecoder?await this.customDecoderCallSerializer.call(()=>this.customDecoder.flush()):(h(this.decoder),await Promise.all([this.decoder.flush(),this.alphaDecoder?.flush()]),this.colorQueue.forEach(e=>e.close()),this.colorQueue.length=0,this.alphaQueue.forEach(e=>e?.close()),this.alphaQueue.length=0,this.alphaHadKeyframe=!1,this.decodedAlphaChunkCount=0,this.alphaDecoderQueueSize=0,this.nullAlphaFrameQueue.length=0,this.currentAlphaPacketIndex=0,this.alphaRaslSkipped=!1),en()){for(let e of this.sampleQueue)this.finalizeAndEmitSample(e);this.sampleQueue.length=0}this.currentPacketIndex=0,this.raslSkipped=!1}close(){for(let e of(this.customDecoder?this.customDecoderCallSerializer.call(()=>this.customDecoder.close()):(h(this.decoder),this.decoder.close(),this.alphaDecoder?.close(),this.colorQueue.forEach(e=>e.close()),this.colorQueue.length=0,this.alphaQueue.forEach(e=>e?.close()),this.alphaQueue.length=0,this.merger?.close()),this.sampleQueue))e.close();this.sampleQueue.length=0}},rl=class{constructor(){"u">typeof OffscreenCanvas?this.canvas=new OffscreenCanvas(300,150):this.canvas=document.createElement("canvas");const e=this.canvas.getContext("webgl2",{premultipliedAlpha:!1});if(!e)throw Error("Couldn't acquire WebGL 2 context.");this.gl=e,this.program=this.createProgram(),this.vao=this.createVAO(),this.colorTexture=this.createTexture(),this.alphaTexture=this.createTexture(),this.gl.useProgram(this.program),this.gl.uniform1i(this.gl.getUniformLocation(this.program,"u_colorTexture"),0),this.gl.uniform1i(this.gl.getUniformLocation(this.program,"u_alphaTexture"),1)}createProgram(){let e=this.createShader(this.gl.VERTEX_SHADER,`#version 300 es
			in vec2 a_position;
			in vec2 a_texCoord;
			out vec2 v_texCoord;
			
			void main() {
				gl_Position = vec4(a_position, 0.0, 1.0);
				v_texCoord = a_texCoord;
			}
		`),t=this.createShader(this.gl.FRAGMENT_SHADER,`#version 300 es
			precision highp float;
			
			uniform sampler2D u_colorTexture;
			uniform sampler2D u_alphaTexture;
			in vec2 v_texCoord;
			out vec4 fragColor;
			
			void main() {
				vec3 color = texture(u_colorTexture, v_texCoord).rgb;
				float alpha = texture(u_alphaTexture, v_texCoord).r;
				fragColor = vec4(color, alpha);
			}
		`),r=this.gl.createProgram();return this.gl.attachShader(r,e),this.gl.attachShader(r,t),this.gl.linkProgram(r),r}createShader(e,t){let r=this.gl.createShader(e);return this.gl.shaderSource(r,t),this.gl.compileShader(r),r}createVAO(){let e=this.gl.createVertexArray();this.gl.bindVertexArray(e);let t=new Float32Array([-1,-1,0,1,1,-1,1,1,-1,1,0,0,1,1,1,0]),r=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,r),this.gl.bufferData(this.gl.ARRAY_BUFFER,t,this.gl.STATIC_DRAW);let i=this.gl.getAttribLocation(this.program,"a_position"),a=this.gl.getAttribLocation(this.program,"a_texCoord");return this.gl.enableVertexAttribArray(i),this.gl.vertexAttribPointer(i,2,this.gl.FLOAT,!1,16,0),this.gl.enableVertexAttribArray(a),this.gl.vertexAttribPointer(a,2,this.gl.FLOAT,!1,16,8),e}createTexture(){let e=this.gl.createTexture();return this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),e}update(e,t){(e.displayWidth!==this.canvas.width||e.displayHeight!==this.canvas.height)&&(this.canvas.width=e.displayWidth,this.canvas.height=e.displayHeight),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.colorTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this.alphaTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t),this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.bindVertexArray(this.vao),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}close(){this.gl.getExtension("WEBGL_lose_context")?.loseContext(),this.gl=null}},ru=class extends rn{constructor(e){if(!(e instanceof rg))throw TypeError("videoTrack must be an InputVideoTrack.");super(),this._track=e}async _createDecoder(e,t){if(!await this._track.canDecode())throw Error("This video track cannot be decoded by this browser. Make sure to check decodability before using a track.");let r=this._track.codec,i=this._track.rotation,a=await this._track.getDecoderConfig(),n=this._track.timeResolution;return h(r&&a),new rs(e,t,r,a,i,n)}_createPacketSink(){return new ri(this._track)}async getSample(e){for await(let t of(rt(e),this.mediaSamplesAtTimestamps([e])))return t;throw Error("Internal error: Iterator returned nothing.")}samples(e=0,t=1/0){return this.mediaSamplesInRange(e,t)}samplesAtTimestamps(e){return this.mediaSamplesAtTimestamps(e)}},rc=class{constructor(e,t={}){if(this._nextCanvasIndex=0,!(e instanceof rg))throw TypeError("videoTrack must be an InputVideoTrack.");if(t&&"object"!=typeof t)throw TypeError("options must be an object.");if(void 0!==t.alpha&&"boolean"!=typeof t.alpha)throw TypeError("options.alpha, when provided, must be a boolean.");if(void 0!==t.width&&(!Number.isInteger(t.width)||t.width<=0))throw TypeError("options.width, when defined, must be a positive integer.");if(void 0!==t.height&&(!Number.isInteger(t.height)||t.height<=0))throw TypeError("options.height, when defined, must be a positive integer.");if(void 0!==t.fit&&!["fill","contain","cover"].includes(t.fit))throw TypeError('options.fit, when provided, must be one of "fill", "contain", or "cover".');if(void 0!==t.width&&void 0!==t.height&&void 0===t.fit)throw TypeError("When both options.width and options.height are provided, options.fit must also be provided.");if(void 0!==t.rotation&&![0,90,180,270].includes(t.rotation))throw TypeError("options.rotation, when provided, must be 0, 90, 180 or 270.");if(void 0!==t.crop&&tJ(t.crop,"options."),void 0!==t.poolSize&&("number"!=typeof t.poolSize||!Number.isInteger(t.poolSize)||t.poolSize<0))throw TypeError("poolSize must be a non-negative integer.");const r=t.rotation??e.rotation,[i,a]=r%180==0?[e.codedWidth,e.codedHeight]:[e.codedHeight,e.codedWidth],n=t.crop;n&&tX(n,i,a);let[o,s]=n?[n.width,n.height]:[i,a];const l=o/s;void 0!==t.width&&void 0===t.height?s=Math.round((o=t.width)/l):void 0===t.width&&void 0!==t.height?o=Math.round((s=t.height)*l):void 0!==t.width&&void 0!==t.height&&(o=t.width,s=t.height),this._videoTrack=e,this._alpha=t.alpha??!1,this._width=o,this._height=s,this._rotation=r,this._crop=n,this._fit=t.fit??"fill",this._videoSampleSink=new ru(e),this._canvasPool=Array.from({length:t.poolSize??0},()=>null)}_videoSampleToWrappedCanvas(e){let t=this._canvasPool[this._nextCanvasIndex],r=!1;t||("u">typeof document?((t=document.createElement("canvas")).width=this._width,t.height=this._height):t=new OffscreenCanvas(this._width,this._height),this._canvasPool.length>0&&(this._canvasPool[this._nextCanvasIndex]=t),r=!0),this._canvasPool.length>0&&(this._nextCanvasIndex=(this._nextCanvasIndex+1)%this._canvasPool.length);let i=t.getContext("2d",{alpha:this._alpha||es()});h(i),i.resetTransform(),r||(!this._alpha&&es()?(i.fillStyle="black",i.fillRect(0,0,this._width,this._height)):i.clearRect(0,0,this._width,this._height)),e.drawWithFit(i,{fit:this._fit,rotation:this._rotation,crop:this._crop});let a={canvas:t,timestamp:e.timestamp,duration:e.duration};return e.close(),a}async getCanvas(e){rt(e);let t=await this._videoSampleSink.getSample(e);return t&&this._videoSampleToWrappedCanvas(t)}canvases(e=0,t=1/0){return Z(this._videoSampleSink.samples(e,t),e=>this._videoSampleToWrappedCanvas(e))}canvasesAtTimestamps(e){return Z(this._videoSampleSink.samplesAtTimestamps(e),e=>e&&this._videoSampleToWrappedCanvas(e))}},rd=class extends ra{constructor(e,t,r,i){super(e,t),this.decoder=null,this.customDecoder=null,this.customDecoderCallSerializer=new ei,this.customDecoderQueueSize=0,this.currentTimestamp=null;const a=t=>{(null===this.currentTimestamp||Math.abs(t.timestamp-this.currentTimestamp)>=t.duration)&&(this.currentTimestamp=t.timestamp);let r=this.currentTimestamp;if(this.currentTimestamp+=t.duration,0===t.numberOfFrames)return void t.close();let a=i.sampleRate;t.setTimestamp(Math.round(r*a)/a),e(t)},n=tj.find(e=>e.supports(r,i));if(n)this.customDecoder=new n,this.customDecoder.codec=r,this.customDecoder.config=i,this.customDecoder.onSample=e=>{if(!(e instanceof t4))throw TypeError("The argument passed to onSample must be an AudioSample.");a(e)},this.customDecoderCallSerializer.call(()=>this.customDecoder.init());else{const e=Error("Decoding error").stack;this.decoder=new AudioDecoder({output:e=>{try{a(new t4(e))}catch(e){this.onError(e)}},error:t=>{t.stack=e,this.onError(t)}}),this.decoder.configure(i)}}getDecodeQueueSize(){return this.customDecoder?this.customDecoderQueueSize:(h(this.decoder),this.decoder.decodeQueueSize)}decode(e){this.customDecoder?(this.customDecoderQueueSize++,this.customDecoderCallSerializer.call(()=>this.customDecoder.decode(e)).then(()=>this.customDecoderQueueSize--)):(h(this.decoder),this.decoder.decode(e.toEncodedAudioChunk()))}flush(){return this.customDecoder?this.customDecoderCallSerializer.call(()=>this.customDecoder.flush()):(h(this.decoder),this.decoder.flush())}close(){this.customDecoder?this.customDecoderCallSerializer.call(()=>this.customDecoder.close()):(h(this.decoder),this.decoder.close())}},rp=class extends ra{constructor(e,t,r){super(e,t),this.decoderConfig=r,this.currentTimestamp=null,h(eT.includes(r.codec)),this.codec=r.codec;const{dataType:i,sampleSize:a,littleEndian:n}=eW(this.codec);switch(this.inputSampleSize=a,a){case 1:"unsigned"===i?this.readInputValue=(e,t)=>e.getUint8(t)-128:"signed"===i?this.readInputValue=(e,t)=>e.getInt8(t):"ulaw"===i?this.readInputValue=(e,t)=>{var r;let i,a,n,o;return r=e.getUint8(t),i=0,a=0,128&(n=~r)&&(n&=-129,i=-1),o=(1<<(a=((240&n)>>4)+5)|(15&n)<<a-4|1<<a-5)-33,0===i?o:-o}:"alaw"===i?this.readInputValue=(e,t)=>{var r;let i,a,n,o;return r=e.getUint8(t),i=0,a=0,128&(n=85^r)&&(n&=-129,i=-1),o=0,o=4!=(a=((240&n)>>4)+4)?1<<a|(15&n)<<a-4|1<<a-5:n<<1|1,0===i?o:-o}:h(!1);break;case 2:"unsigned"===i?this.readInputValue=(e,t)=>e.getUint16(t,n)-32768:"signed"===i?this.readInputValue=(e,t)=>e.getInt16(t,n):h(!1);break;case 3:"unsigned"===i?this.readInputValue=(e,t)=>q(e,t,n)-8388608:"signed"===i?this.readInputValue=(e,t)=>q(e,t,n)<<8>>8:h(!1);break;case 4:"unsigned"===i?this.readInputValue=(e,t)=>e.getUint32(t,n)-0x80000000:"signed"===i?this.readInputValue=(e,t)=>e.getInt32(t,n):"float"===i?this.readInputValue=(e,t)=>e.getFloat32(t,n):h(!1);break;case 8:"float"===i?this.readInputValue=(e,t)=>e.getFloat64(t,n):h(!1);break;default:W(a),h(!1)}switch(a){case 1:"ulaw"===i||"alaw"===i?(this.outputSampleSize=2,this.outputFormat="s16",this.writeOutputValue=(e,t,r)=>e.setInt16(t,r,!0)):(this.outputSampleSize=1,this.outputFormat="u8",this.writeOutputValue=(e,t,r)=>e.setUint8(t,r+128));break;case 2:this.outputSampleSize=2,this.outputFormat="s16",this.writeOutputValue=(e,t,r)=>e.setInt16(t,r,!0);break;case 3:this.outputSampleSize=4,this.outputFormat="s32",this.writeOutputValue=(e,t,r)=>e.setInt32(t,r<<8,!0);break;case 4:this.outputSampleSize=4,"float"===i?(this.outputFormat="f32",this.writeOutputValue=(e,t,r)=>e.setFloat32(t,r,!0)):(this.outputFormat="s32",this.writeOutputValue=(e,t,r)=>e.setInt32(t,r,!0));break;case 8:this.outputSampleSize=4,this.outputFormat="f32",this.writeOutputValue=(e,t,r)=>e.setFloat32(t,r,!0);break;default:W(a),h(!1)}}getDecodeQueueSize(){return 0}decode(e){let t=S(e.data),r=e.byteLength/this.decoderConfig.numberOfChannels/this.inputSampleSize,i=new ArrayBuffer(r*this.decoderConfig.numberOfChannels*this.outputSampleSize),a=new DataView(i);for(let e=0;e<r*this.decoderConfig.numberOfChannels;e++){let r=e*this.inputSampleSize,i=e*this.outputSampleSize,n=this.readInputValue(t,r);this.writeOutputValue(a,i,n)}let n=r/this.decoderConfig.sampleRate;(null===this.currentTimestamp||Math.abs(e.timestamp-this.currentTimestamp)>=n)&&(this.currentTimestamp=e.timestamp);let o=this.currentTimestamp;this.currentTimestamp+=n;let s=new t4({format:this.outputFormat,data:i,numberOfChannels:this.decoderConfig.numberOfChannels,sampleRate:this.decoderConfig.sampleRate,numberOfFrames:r,timestamp:o});this.onSample(s)}async flush(){}close(){}},rf=class extends rn{constructor(e){if(!(e instanceof rv))throw TypeError("audioTrack must be an InputAudioTrack.");super(),this._track=e}async _createDecoder(e,t){if(!await this._track.canDecode())throw Error("This audio track cannot be decoded by this browser. Make sure to check decodability before using a track.");let r=this._track.codec,i=await this._track.getDecoderConfig();return(h(r&&i),eT.includes(i.codec))?new rp(e,t,i):new rd(e,t,r,i)}_createPacketSink(){return new ri(this._track)}async getSample(e){for await(let t of(rt(e),this.mediaSamplesAtTimestamps([e])))return t;throw Error("Internal error: Iterator returned nothing.")}samples(e=0,t=1/0){return this.mediaSamplesInRange(e,t)}samplesAtTimestamps(e){return this.mediaSamplesAtTimestamps(e)}},rh=class{constructor(e){if(!(e instanceof rv))throw TypeError("audioTrack must be an InputAudioTrack.");this._audioSampleSink=new rf(e)}_audioSampleToWrappedArrayBuffer(e){let t={buffer:e.toAudioBuffer(),timestamp:e.timestamp,duration:e.duration};return e.close(),t}async getBuffer(e){rt(e);let t=await this._audioSampleSink.getSample(e);return t&&this._audioSampleToWrappedArrayBuffer(t)}buffers(e=0,t=1/0){return Z(this._audioSampleSink.samples(e,t),e=>this._audioSampleToWrappedArrayBuffer(e))}buffersAtTimestamps(e){return Z(this._audioSampleSink.samplesAtTimestamps(e),e=>e&&this._audioSampleToWrappedArrayBuffer(e))}},rm=class{constructor(e,t){this.input=e,this._backing=t}isVideoTrack(){return this instanceof rg}isAudioTrack(){return this instanceof rv}get id(){return this._backing.getId()}get internalCodecId(){return this._backing.getInternalCodecId()}get languageCode(){return this._backing.getLanguageCode()}get name(){return this._backing.getName()}get timeResolution(){return this._backing.getTimeResolution()}get disposition(){return this._backing.getDisposition()}getFirstTimestamp(){return this._backing.getFirstTimestamp()}computeDuration(){return this._backing.computeDuration()}async computePacketStats(e=1/0){let t=new ri(this),r=1/0,i=-1/0,a=0,n=0;for await(let o of t.packets(void 0,void 0,{metadataOnly:!0})){if(a>=e&&o.timestamp>=i)break;r=Math.min(r,o.timestamp),i=Math.max(i,o.timestamp+o.duration),a++,n+=o.byteLength}return{packetCount:a,averagePacketRate:a?Number((a/(i-r)).toPrecision(16)):0,averageBitrate:a?Number((8*n/(i-r)).toPrecision(16)):0}}},rg=class extends rm{constructor(e,t){super(e,t),this._backing=t}get type(){return"video"}get codec(){return this._backing.getCodec()}get codedWidth(){return this._backing.getCodedWidth()}get codedHeight(){return this._backing.getCodedHeight()}get rotation(){return this._backing.getRotation()}get displayWidth(){return this._backing.getRotation()%180==0?this._backing.getCodedWidth():this._backing.getCodedHeight()}get displayHeight(){return this._backing.getRotation()%180==0?this._backing.getCodedHeight():this._backing.getCodedWidth()}getColorSpace(){return this._backing.getColorSpace()}async hasHighDynamicRange(){let e=await this._backing.getColorSpace();return"bt2020"===e.primaries||"smpte432"===e.primaries||"pg"===e.transfer||"hlg"===e.transfer||"bt2020-ncl"===e.matrix}canBeTransparent(){return this._backing.canBeTransparent()}getDecoderConfig(){return this._backing.getDecoderConfig()}async getCodecParameterString(){let e=await this._backing.getDecoderConfig();return e?.codec??null}async canDecode(){try{let e=await this._backing.getDecoderConfig();if(!e)return!1;let t=this._backing.getCodec();if(h(null!==t),tD.some(r=>r.supports(t,e)))return!0;if("u"<typeof VideoDecoder)return!1;let r=await VideoDecoder.isConfigSupported(e);return!0===r.supported}catch(e){return console.error("Error during decodability check:",e),!1}}async determinePacketType(e){if(!(e instanceof tU))throw TypeError("packet must be an EncodedPacket.");if(e.isMetadataOnly)throw TypeError("packet must not be metadata-only to determine its type.");if(null===this.codec)return null;let t=await this.getDecoderConfig();return h(t),tT(this.codec,t,e.data)}},rv=class extends rm{constructor(e,t){super(e,t),this._backing=t}get type(){return"audio"}get codec(){return this._backing.getCodec()}get numberOfChannels(){return this._backing.getNumberOfChannels()}get sampleRate(){return this._backing.getSampleRate()}getDecoderConfig(){return this._backing.getDecoderConfig()}async getCodecParameterString(){let e=await this._backing.getDecoderConfig();return e?.codec??null}async canDecode(){try{let e=await this._backing.getDecoderConfig();if(!e)return!1;let t=this._backing.getCodec();if(h(null!==t),tj.some(r=>r.supports(t,e))||e.codec.startsWith("pcm-"))return!0;{if("u"<typeof AudioDecoder)return!1;let t=await AudioDecoder.isConfigSupported(e);return!0===t.supported}}catch(e){return console.error("Error during decodability check:",e),!1}}async determinePacketType(e){if(!(e instanceof tU))throw TypeError("packet must be an EncodedPacket.");return null===this.codec?null:"key"}},ry=e=>{let t=(e.hasVideo?"video/":e.hasAudio?"audio/":"application/")+(e.isQuickTime?"quicktime":"mp4");if(e.codecStrings.length>0){let r=[...new Set(e.codecStrings)];t+=`; codecs="${r.join(", ")}"`}return t},rb=e=>{let t=aO(e),r=a$(e,4),i=8;1===t&&(t=aD(e),i=16);let a=t-i;return a<0?null:{name:r,totalSize:t,headerSize:i,contentSize:a}},rx=e=>aF(e)/65536,rw=e=>{let t=0;for(let r=0;r<4;r++){t<<=7;let r=aE(e);if(t|=127&r,(128&r)==0)break}return t},rS=e=>{let t=aT(e);return e.skip(2),t=Math.min(t,e.remainingLength),k.decode(aC(e,t))},rk=e=>{let t=rb(e);if(!t||"data"!==t.name||e.remainingLength<8)return null;let r=aO(e);e.skip(4);let i=aC(e,t.contentSize-8);switch(r){case 1:return k.decode(i);case 2:return new TextDecoder("utf-16be").decode(i);case 13:return new ew(i,"image/jpeg");case 14:return new ew(i,"image/png");case 27:return new ew(i,"image/bmp");default:return i}},rC=class extends tA{constructor(e){super(e),this.moovSlice=null,this.currentTrack=null,this.tracks=[],this.metadataPromise=null,this.movieTimescale=-1,this.movieDurationInTimescale=-1,this.isQuickTime=!1,this.metadataTags={},this.currentMetadataKeys=null,this.isFragmented=!1,this.fragmentTrackDefaults=[],this.currentFragment=null,this.lastReadFragment=null,this.reader=e._reader}async computeDuration(){let e=await this.getTracks();return Math.max(0,...await Promise.all(e.map(e=>e.computeDuration())))}async getTracks(){return await this.readMetadata(),this.tracks.map(e=>e.inputTrack)}async getMimeType(){await this.readMetadata();let e=await Promise.all(this.tracks.map(e=>e.inputTrack.getCodecParameterString()));return ry({isQuickTime:this.isQuickTime,hasVideo:this.tracks.some(e=>e.info?.type==="video"),hasAudio:this.tracks.some(e=>e.info?.type==="audio"),codecStrings:e.filter(Boolean)})}async getMetadataTags(){return await this.readMetadata(),this.metadataTags}readMetadata(){return this.metadataPromise??=(async()=>{let e=0;for(;;){let t=this.reader.requestSliceRange(e,8,16);if(t instanceof Promise&&(t=await t),!t)break;let r=e,i=rb(t);if(!i)break;if("ftyp"===i.name){let e=a$(t,4);this.isQuickTime="qt  "===e}else if("moov"===i.name){let e=this.reader.requestSlice(t.filePos,i.contentSize);if(e instanceof Promise&&(e=await e),!e)break;for(let t of(this.moovSlice=e,this.readContiguousBoxes(this.moovSlice),this.tracks.sort((e,t)=>Number(t.disposition.default)-Number(e.disposition.default)),this.tracks)){let e=t.editListPreviousSegmentDurations/this.movieTimescale;t.editListOffset-=Math.round(e*t.timescale)}break}e=r+i.totalSize}if(this.isFragmented&&null!==this.reader.fileSize){let e=this.reader.requestSlice(this.reader.fileSize-4,4);e instanceof Promise&&(e=await e),h(e);let t=aO(e),r=this.reader.fileSize-t;if(r>=0&&r<=this.reader.fileSize-16){let e=this.reader.requestSliceRange(r,8,16);if(e instanceof Promise&&(e=await e),e){let t=rb(e);if(t&&"mfra"===t.name){let r=this.reader.requestSlice(e.filePos,t.contentSize);r instanceof Promise&&(r=await r),r&&this.readContiguousBoxes(r)}}}}})()}getSampleTableForTrack(e){if(e.sampleTable)return e.sampleTable;let t={sampleTimingEntries:[],sampleCompositionTimeOffsets:[],sampleSizes:[],keySampleIndices:null,chunkOffsets:[],sampleToChunk:[],presentationTimestamps:null,presentationTimestampIndexMap:null};e.sampleTable=t,h(this.moovSlice);let r=this.moovSlice.slice(e.sampleTableByteOffset);if(this.currentTrack=e,this.traverseBox(r),this.currentTrack=null,e.info?.type==="audio"&&e.info.codec&&eT.includes(e.info.codec)&&0===t.sampleCompositionTimeOffsets.length){h(e.info?.type==="audio");let r=eW(e.info.codec),i=[],a=[];for(let n=0;n<t.sampleToChunk.length;n++){let o=t.sampleToChunk[n],s=t.sampleToChunk[n+1],l=(s?s.startChunkIndex:t.chunkOffsets.length)-o.startChunkIndex;for(let n=0;n<l;n++){let s=o.startSampleIndex+n*o.samplesPerChunk,l=s+o.samplesPerChunk,u=N(t.sampleTimingEntries,s,e=>e.startIndex),c=t.sampleTimingEntries[u],d=N(t.sampleTimingEntries,l,e=>e.startIndex),p=t.sampleTimingEntries[d],f=c.startDecodeTimestamp+(s-c.startIndex)*c.delta,h=p.startDecodeTimestamp+(l-p.startIndex)*p.delta-f,m=g(i);m&&m.delta===h?m.count++:i.push({startIndex:o.startChunkIndex+n,startDecodeTimestamp:f,count:1,delta:h});let v=o.samplesPerChunk*r.sampleSize*e.info.numberOfChannels;a.push(v)}o.startSampleIndex=o.startChunkIndex,o.samplesPerChunk=1}t.sampleTimingEntries=i,t.sampleSizes=a}if(t.sampleCompositionTimeOffsets.length>0){for(let e of(t.presentationTimestamps=[],t.sampleTimingEntries))for(let r=0;r<e.count;r++)t.presentationTimestamps.push({presentationTimestamp:e.startDecodeTimestamp+r*e.delta,sampleIndex:e.startIndex+r});for(let e of t.sampleCompositionTimeOffsets)for(let r=0;r<e.count;r++){let i=e.startIndex+r,a=t.presentationTimestamps[i];a&&(a.presentationTimestamp+=e.offset)}t.presentationTimestamps.sort((e,t)=>e.presentationTimestamp-t.presentationTimestamp),t.presentationTimestampIndexMap=Array(t.presentationTimestamps.length).fill(-1);for(let e=0;e<t.presentationTimestamps.length;e++)t.presentationTimestampIndexMap[t.presentationTimestamps[e].sampleIndex]=e}return t}async readFragment(e){if(this.lastReadFragment?.moofOffset===e)return this.lastReadFragment;let t=this.reader.requestSliceRange(e,8,16);t instanceof Promise&&(t=await t),h(t);let r=rb(t);h(r?.name==="moof");let i=this.reader.requestSlice(e,r.totalSize);i instanceof Promise&&(i=await i),h(i),this.traverseBox(i);let a=this.lastReadFragment;for(let[,t]of(h(a&&a.moofOffset===e),a.trackData)){let e=t.track,{fragmentPositionCache:r}=e;if(!t.startTimestampIsFinal){let i=e.fragmentLookupTable.find(e=>e.moofOffset===a.moofOffset);if(i)rM(t,i.timestamp);else{let e=N(r,a.moofOffset-1,e=>e.moofOffset);-1!==e&&rM(t,r[e].endTimestamp)}t.startTimestampIsFinal=!0}let i=N(r,t.startTimestamp,e=>e.startTimestamp);(-1===i||r[i].moofOffset!==a.moofOffset)&&r.splice(i+1,0,{moofOffset:a.moofOffset,startTimestamp:t.startTimestamp,endTimestamp:t.endTimestamp})}return a}readContiguousBoxes(e){let t=e.filePos;for(;e.filePos-t<=e.length-8&&this.traverseBox(e););}*iterateContiguousBoxes(e){let t=e.filePos;for(;e.filePos-t<=e.length-8;){let t=e.filePos,r=rb(e);if(!r)break;yield{boxInfo:r,slice:e},e.filePos=t+r.totalSize}}traverseBox(e){let t=e.filePos,r=rb(e);if(!r)return!1;let i=e.filePos,a=t+r.totalSize;switch(r.name){case"mdia":case"minf":case"dinf":case"mfra":case"edts":case"wave":this.readContiguousBoxes(e.slice(i,r.contentSize));break;case"mvhd":{let t=aE(e);e.skip(3),1===t?(e.skip(16),this.movieTimescale=aO(e),this.movieDurationInTimescale=aD(e)):(e.skip(8),this.movieTimescale=aO(e),this.movieDurationInTimescale=aO(e))}break;case"trak":{let t={id:-1,demuxer:this,inputTrack:null,disposition:{...eE},info:null,timescale:-1,durationInMovieTimescale:-1,durationInMediaTimescale:-1,rotation:0,internalCodecId:null,name:null,languageCode:"und",sampleTableByteOffset:-1,sampleTable:null,fragmentLookupTable:[],currentFragmentState:null,fragmentPositionCache:[],editListPreviousSegmentDurations:0,editListOffset:0};this.currentTrack=t,this.readContiguousBoxes(e.slice(i,r.contentSize)),-1!==t.id&&-1!==t.timescale&&null!==t.info&&("video"===t.info.type&&-1!==t.info.width?(t.inputTrack=new rg(this.input,new r_(t)),this.tracks.push(t)):"audio"===t.info.type&&-1!==t.info.numberOfChannels&&(t.inputTrack=new rv(this.input,new rT(t)),this.tracks.push(t))),this.currentTrack=null}break;case"tkhd":{let t=this.currentTrack;if(!t)break;let r=aE(e),i=aP(e);if(t.disposition.default=!!(1&i),0===r)e.skip(8),t.id=aO(e),e.skip(4),t.durationInMovieTimescale=aO(e);else if(1===r)e.skip(16),t.id=aO(e),e.skip(4),t.durationInMovieTimescale=aD(e);else throw Error(`Incorrect track header version ${r}.`);e.skip(16);let a=m(X(rF([rx(e),rx(e),aF(e)/0x40000000,rx(e),rx(e),aF(e)/0x40000000,rx(e),rx(e),aF(e)/0x40000000]),90));h(0===a||90===a||180===a||270===a),t.rotation=a}break;case"elst":{let t=this.currentTrack;if(!t)break;let r=aE(e);e.skip(3);let i=!1,a=0,n=aO(e);for(let o=0;o<n;o++){let n=1===r?aD(e):aO(e),o=1===r?aj(e):aF(e),s=rx(e);if(0!==n){if(i){console.warn("Unsupported edit list: multiple edits are not currently supported. Only using first edit.");break}if(-1===o){a+=n;continue}if(1!==s){console.warn("Unsupported edit list entry: media rate must be 1.");break}t.editListPreviousSegmentDurations=a,t.editListOffset=o,i=!0}}}break;case"mdhd":{let t=this.currentTrack;if(!t)break;let r=aE(e);e.skip(3),0===r?(e.skip(8),t.timescale=aO(e),t.durationInMediaTimescale=aO(e)):1===r&&(e.skip(16),t.timescale=aO(e),t.durationInMediaTimescale=aD(e));let i=aT(e);if(i>0){let e;t.languageCode="";for(let e=0;e<3;e++)t.languageCode=String.fromCharCode(96+(31&i))+t.languageCode,i>>=5;e=t.languageCode,J.test(e)||(t.languageCode="und")}}break;case"hdlr":{let t=this.currentTrack;if(!t)break;e.skip(8);let r=a$(e,4);"vide"===r?t.info={type:"video",width:-1,height:-1,codec:null,codecDescription:null,colorSpace:null,avcType:null,avcCodecInfo:null,hevcCodecInfo:null,vp9CodecInfo:null,av1CodecInfo:null}:"soun"===r&&(t.info={type:"audio",numberOfChannels:-1,sampleRate:-1,codec:null,codecDescription:null,aacCodecInfo:null})}break;case"stbl":{let a=this.currentTrack;if(!a)break;a.sampleTableByteOffset=t,this.readContiguousBoxes(e.slice(i,r.contentSize))}break;case"stsd":{let t=this.currentTrack;if(!t||null===t.info||t.sampleTable)break;let r=aE(e);e.skip(3);let i=aO(e);for(let a=0;a<i;a++){let i=e.filePos,a=rb(e);if(!a)break;t.internalCodecId=a.name;let n=a.name.toLowerCase();if("video"===t.info.type)"avc1"===n||"avc3"===n?(t.info.codec="avc",t.info.avcType="avc1"===n?1:3):"hvc1"===n||"hev1"===n?t.info.codec="hevc":"vp08"===n?t.info.codec="vp8":"vp09"===n?t.info.codec="vp9":"av01"===n?t.info.codec="av1":console.warn(`Unsupported video codec (sample entry type '${a.name}').`),e.skip(24),t.info.width=aT(e),t.info.height=aT(e),e.skip(50),this.readContiguousBoxes(e.slice(e.filePos,i+a.totalSize-e.filePos));else{"mp4a"===n||("opus"===n?t.info.codec="opus":"flac"===n?t.info.codec="flac":"twos"===n||"sowt"===n||"raw "===n||"in24"===n||"in32"===n||"fl32"===n||"fl64"===n||"lpcm"===n||"ipcm"===n||"fpcm"===n||("ulaw"===n?t.info.codec="ulaw":"alaw"===n?t.info.codec="alaw":console.warn(`Unsupported audio codec (sample entry type '${a.name}').`))),e.skip(8);let o=aT(e);e.skip(6);let s=aT(e),l=aT(e);e.skip(4);let u=aO(e)/65536;if(0===r&&o>0){if(1===o)e.skip(4),l=8*aO(e),e.skip(8);else if(2===o){e.skip(4),u=aN(e),s=aO(e),e.skip(4),l=aO(e);let r=aO(e);if(e.skip(8),"lpcm"===n){let e=l+7>>3,i=!!(1&r),a=!!(2&r),n=4&r?-1:0;l>0&&l<=64&&(i?32===l&&(t.info.codec=a?"pcm-f32be":"pcm-f32"):n&1<<e-1?1===e?t.info.codec="pcm-s8":2===e?t.info.codec=a?"pcm-s16be":"pcm-s16":3===e?t.info.codec=a?"pcm-s24be":"pcm-s24":4===e&&(t.info.codec=a?"pcm-s32be":"pcm-s32"):1===e&&(t.info.codec="pcm-u8")),null===t.info.codec&&console.warn("Unsupported PCM format.")}}}"opus"===t.info.codec&&(u=48e3),t.info.numberOfChannels=s,t.info.sampleRate=u,"twos"===n?8===l?t.info.codec="pcm-s8":16===l?t.info.codec="pcm-s16be":(console.warn(`Unsupported sample size ${l} for codec 'twos'.`),t.info.codec=null):"sowt"===n?8===l?t.info.codec="pcm-s8":16===l?t.info.codec="pcm-s16":(console.warn(`Unsupported sample size ${l} for codec 'sowt'.`),t.info.codec=null):"raw "===n?t.info.codec="pcm-u8":"in24"===n?t.info.codec="pcm-s24be":"in32"===n?t.info.codec="pcm-s32be":"fl32"===n?t.info.codec="pcm-f32be":"fl64"===n?t.info.codec="pcm-f64be":"ipcm"===n?t.info.codec="pcm-s16be":"fpcm"===n&&(t.info.codec="pcm-f32be"),this.readContiguousBoxes(e.slice(e.filePos,i+a.totalSize-e.filePos))}}}break;case"avcC":{let t=this.currentTrack;if(!t)break;h(t.info),t.info.codecDescription=aC(e,r.contentSize)}break;case"hvcC":{let t=this.currentTrack;if(!t)break;h(t.info),t.info.codecDescription=aC(e,r.contentSize)}break;case"vpcC":{let t=this.currentTrack;if(!t)break;h(t.info?.type==="video"),e.skip(4);let r=aE(e),i=aE(e),a=aE(e),n=aE(e),o=aE(e),s=aE(e);t.info.vp9CodecInfo={profile:r,level:i,bitDepth:a>>4,chromaSubsampling:a>>1&7,videoFullRangeFlag:1&a,colourPrimaries:n,transferCharacteristics:o,matrixCoefficients:s}}break;case"av1C":{let t=this.currentTrack;if(!t)break;h(t.info?.type==="video"),e.skip(1);let r=aE(e),i=r>>5,a=aE(e),n=a>>6&1;t.info.av1CodecInfo={profile:i,level:31&r,tier:a>>7,bitDepth:2===i&&n?a>>5&1?12:10:n?10:8,monochrome:a>>4&1,chromaSubsamplingX:a>>3&1,chromaSubsamplingY:a>>2&1,chromaSamplePosition:3&a}}break;case"colr":{let t=this.currentTrack;if(!t||(h(t.info?.type==="video"),"nclx"!==a$(e,4)))break;let r=aT(e),i=aT(e),a=aT(e),n=!!(128&aE(e));t.info.colorSpace={primaries:P[r],transfer:A[i],matrix:M[a],fullRange:n}}break;case"esds":{let t=this.currentTrack;if(!t)break;h(t.info?.type==="audio"),e.skip(4),h(3===aE(e)),rw(e),e.skip(2);let r=aE(e);if((128&r)!=0&&e.skip(2),(64&r)!=0){let t=aE(e);e.skip(t)}(32&r)!=0&&e.skip(2),h(4===aE(e));let i=rw(e),a=e.filePos,n=aE(e);if(64===n||103===n?(t.info.codec="aac",t.info.aacCodecInfo={isMpeg2:103===n,objectType:null}):105===n||107===n?t.info.codec="mp3":221===n?t.info.codec="vorbis":console.warn(`Unsupported audio codec (objectTypeIndication ${n}) - discarding track.`),e.skip(12),i>e.filePos-a){h(5===aE(e));let r=rw(e);if(t.info.codecDescription=aC(e,r),"aac"===t.info.codec){let e=eU(t.info.codecDescription);null!==e.numberOfChannels&&(t.info.numberOfChannels=e.numberOfChannels),null!==e.sampleRate&&(t.info.sampleRate=e.sampleRate)}}}break;case"enda":{let t=this.currentTrack;if(!t)break;h(t.info?.type==="audio"),255&aT(e)&&("pcm-s16be"===t.info.codec?t.info.codec="pcm-s16":"pcm-s24be"===t.info.codec?t.info.codec="pcm-s24":"pcm-s32be"===t.info.codec?t.info.codec="pcm-s32":"pcm-f32be"===t.info.codec?t.info.codec="pcm-f32":"pcm-f64be"===t.info.codec&&(t.info.codec="pcm-f64"))}break;case"pcmC":{let t=this.currentTrack;if(!t)break;h(t.info?.type==="audio"),e.skip(4);let r=!!(1&aE(e)),i=aE(e);"pcm-s16be"===t.info.codec?r?16===i?t.info.codec="pcm-s16":24===i?t.info.codec="pcm-s24":32===i?t.info.codec="pcm-s32":(console.warn(`Invalid ipcm sample size ${i}.`),t.info.codec=null):16===i?t.info.codec="pcm-s16be":24===i?t.info.codec="pcm-s24be":32===i?t.info.codec="pcm-s32be":(console.warn(`Invalid ipcm sample size ${i}.`),t.info.codec=null):"pcm-f32be"===t.info.codec&&(r?32===i?t.info.codec="pcm-f32":64===i?t.info.codec="pcm-f64":(console.warn(`Invalid fpcm sample size ${i}.`),t.info.codec=null):32===i?t.info.codec="pcm-f32be":64===i?t.info.codec="pcm-f64be":(console.warn(`Invalid fpcm sample size ${i}.`),t.info.codec=null));break}case"dOps":{let t,r=this.currentTrack;if(!r)break;h(r.info?.type==="audio"),e.skip(1);let i=aE(e),a=aT(e),n=aO(e),o=aI(e),s=aE(e);t=0!==s?aC(e,2+i):new Uint8Array(0);let l=new Uint8Array(19+t.byteLength),u=new DataView(l.buffer);u.setUint32(0,0x4f707573,!1),u.setUint32(4,0x48656164,!1),u.setUint8(8,1),u.setUint8(9,i),u.setUint16(10,a,!0),u.setUint32(12,n,!0),u.setInt16(16,o,!0),u.setUint8(18,s),l.set(t,19),r.info.codecDescription=l,r.info.numberOfChannels=i}break;case"dfLa":{let t=this.currentTrack;if(!t)break;h(t.info?.type==="audio"),e.skip(4);let r=e.filePos;for(;e.filePos<a;){let r=aE(e),i=aP(e);if(0==(127&r)){e.skip(10);let r=aO(e),i=r>>>12,a=(r>>9&7)+1;t.info.sampleRate=i,t.info.numberOfChannels=a,e.skip(20)}else e.skip(i);if(128&r)break}let i=e.filePos;e.filePos=r;let n=aC(e,i-r),o=new Uint8Array(4+n.byteLength);new DataView(o.buffer).setUint32(0,0x664c6143,!1),o.set(n,4),t.info.codecDescription=o}break;case"stts":{let t=this.currentTrack;if(!t||!t.sampleTable)break;e.skip(4);let r=aO(e),i=0,a=0;for(let n=0;n<r;n++){let r=aO(e),n=aO(e);t.sampleTable.sampleTimingEntries.push({startIndex:i,startDecodeTimestamp:a,count:r,delta:n}),i+=r,a+=r*n}}break;case"ctts":{let t=this.currentTrack;if(!t||!t.sampleTable)break;e.skip(4);let r=aO(e),i=0;for(let a=0;a<r;a++){let r=aO(e),a=aF(e);t.sampleTable.sampleCompositionTimeOffsets.push({startIndex:i,count:r,offset:a}),i+=r}}break;case"stsz":{let t=this.currentTrack;if(!t||!t.sampleTable)break;e.skip(4);let r=aO(e),i=aO(e);if(0===r)for(let r=0;r<i;r++){let r=aO(e);t.sampleTable.sampleSizes.push(r)}else t.sampleTable.sampleSizes.push(r)}break;case"stz2":{let t=this.currentTrack;if(!t||!t.sampleTable)break;e.skip(4),e.skip(3);let r=aE(e),i=aO(e),a=new y(aC(e,Math.ceil(i*r/8)));for(let e=0;e<i;e++){let e=a.readBits(r);t.sampleTable.sampleSizes.push(e)}}break;case"stss":{let t=this.currentTrack;if(!t||!t.sampleTable)break;e.skip(4),t.sampleTable.keySampleIndices=[];let r=aO(e);for(let i=0;i<r;i++){let r=aO(e)-1;t.sampleTable.keySampleIndices.push(r)}0!==t.sampleTable.keySampleIndices[0]&&t.sampleTable.keySampleIndices.unshift(0)}break;case"stsc":{let t=this.currentTrack;if(!t||!t.sampleTable)break;e.skip(4);let r=aO(e);for(let i=0;i<r;i++){let r=aO(e)-1,i=aO(e),a=aO(e);t.sampleTable.sampleToChunk.push({startSampleIndex:-1,startChunkIndex:r,samplesPerChunk:i,sampleDescriptionIndex:a})}let i=0;for(let e=0;e<t.sampleTable.sampleToChunk.length;e++)t.sampleTable.sampleToChunk[e].startSampleIndex=i,e<t.sampleTable.sampleToChunk.length-1&&(i+=(t.sampleTable.sampleToChunk[e+1].startChunkIndex-t.sampleTable.sampleToChunk[e].startChunkIndex)*t.sampleTable.sampleToChunk[e].samplesPerChunk)}break;case"stco":{let t=this.currentTrack;if(!t||!t.sampleTable)break;e.skip(4);let r=aO(e);for(let i=0;i<r;i++){let r=aO(e);t.sampleTable.chunkOffsets.push(r)}}break;case"co64":{let t=this.currentTrack;if(!t||!t.sampleTable)break;e.skip(4);let r=aO(e);for(let i=0;i<r;i++){let r=aD(e);t.sampleTable.chunkOffsets.push(r)}}break;case"mvex":this.isFragmented=!0,this.readContiguousBoxes(e.slice(i,r.contentSize));break;case"mehd":{let t=aE(e);e.skip(3);let r=1===t?aD(e):aO(e);this.movieDurationInTimescale=r}break;case"trex":{e.skip(4);let t=aO(e),r=aO(e),i=aO(e),a=aO(e),n=aO(e);this.fragmentTrackDefaults.push({trackId:t,defaultSampleDescriptionIndex:r,defaultSampleDuration:i,defaultSampleSize:a,defaultSampleFlags:n})}break;case"tfra":{let t=aE(e);e.skip(3);let r=aO(e),i=this.tracks.find(e=>e.id===r);if(!i)break;let a=aO(e),n=[aE,aT,aP,aO],o=n[(48&a)>>4],s=n[(12&a)>>2],l=n[3&a],u=aO(e);for(let r=0;r<u;r++){let r=1===t?aD(e):aO(e),a=1===t?aD(e):aO(e);o(e),s(e),l(e),i.fragmentLookupTable.push({timestamp:r,moofOffset:a})}i.fragmentLookupTable.sort((e,t)=>e.timestamp-t.timestamp);for(let e=0;e<i.fragmentLookupTable.length-1;e++){let t=i.fragmentLookupTable[e],r=i.fragmentLookupTable[e+1];t.timestamp===r.timestamp&&(i.fragmentLookupTable.splice(e+1,1),e--)}}break;case"moof":this.currentFragment={moofOffset:t,moofSize:r.totalSize,implicitBaseDataOffset:t,trackData:new Map},this.readContiguousBoxes(e.slice(i,r.contentSize)),this.lastReadFragment=this.currentFragment,this.currentFragment=null;break;case"traf":if(h(this.currentFragment),this.readContiguousBoxes(e.slice(i,r.contentSize)),this.currentTrack){let e=this.currentFragment.trackData.get(this.currentTrack.id);if(e){let{currentFragmentState:t}=this.currentTrack;h(t),null!==t.startTimestamp&&(rM(e,t.startTimestamp),e.startTimestampIsFinal=!0)}this.currentTrack.currentFragmentState=null,this.currentTrack=null}break;case"tfhd":{h(this.currentFragment),e.skip(1);let t=aP(e),r=aO(e),i=this.tracks.find(e=>e.id===r);if(!i)break;let a=this.fragmentTrackDefaults.find(e=>e.trackId===r);this.currentTrack=i,i.currentFragmentState={baseDataOffset:this.currentFragment.implicitBaseDataOffset,sampleDescriptionIndex:a?.defaultSampleDescriptionIndex??null,defaultSampleDuration:a?.defaultSampleDuration??null,defaultSampleSize:a?.defaultSampleSize??null,defaultSampleFlags:a?.defaultSampleFlags??null,startTimestamp:null},1&t?i.currentFragmentState.baseDataOffset=aD(e):131072&t&&(i.currentFragmentState.baseDataOffset=this.currentFragment.moofOffset),2&t&&(i.currentFragmentState.sampleDescriptionIndex=aO(e)),8&t&&(i.currentFragmentState.defaultSampleDuration=aO(e)),16&t&&(i.currentFragmentState.defaultSampleSize=aO(e)),32&t&&(i.currentFragmentState.defaultSampleFlags=aO(e)),65536&t&&(i.currentFragmentState.defaultSampleDuration=0)}break;case"tfdt":{let t=this.currentTrack;if(!t)break;h(t.currentFragmentState);let r=aE(e);e.skip(3);let i=0===r?aO(e):aD(e);t.currentFragmentState.startTimestamp=i}break;case"trun":{let t=this.currentTrack;if(!t)break;if(h(this.currentFragment),h(t.currentFragmentState),this.currentFragment.trackData.has(t.id)){console.warn("Can't have two trun boxes for the same track in one fragment. Ignoring...");break}let r=aE(e),i=aP(e),a=!!(256&i),n=!!(512&i),o=!!(1024&i),s=!!(2048&i),l=aO(e),u=t.currentFragmentState.baseDataOffset;1&i&&(u+=aF(e));let c=null;4&i&&(c=aO(e));let d=u;if(0===l){this.currentFragment.implicitBaseDataOffset=d;break}let p=0,f={track:t,startTimestamp:0,endTimestamp:0,firstKeyFrameTimestamp:null,samples:[],presentationTimestamps:[],startTimestampIsFinal:!1};this.currentFragment.trackData.set(t.id,f);for(let i=0;i<l;i++){let l,u,m;a?l=aO(e):(h(null!==t.currentFragmentState.defaultSampleDuration),l=t.currentFragmentState.defaultSampleDuration),n?u=aO(e):(h(null!==t.currentFragmentState.defaultSampleSize),u=t.currentFragmentState.defaultSampleSize),o?m=aO(e):(h(null!==t.currentFragmentState.defaultSampleFlags),m=t.currentFragmentState.defaultSampleFlags),0===i&&null!==c&&(m=c);let g=0;s&&(g=0===r?aO(e):aF(e));let v=!(65536&m);f.samples.push({presentationTimestamp:p+g,duration:l,byteOffset:d,byteSize:u,isKeyFrame:v}),d+=u,p+=l}f.presentationTimestamps=f.samples.map((e,t)=>({presentationTimestamp:e.presentationTimestamp,sampleIndex:t})).sort((e,t)=>e.presentationTimestamp-t.presentationTimestamp);for(let e=0;e<f.presentationTimestamps.length;e++){let t=f.presentationTimestamps[e],r=f.samples[t.sampleIndex];null===f.firstKeyFrameTimestamp&&r.isKeyFrame&&(f.firstKeyFrameTimestamp=r.presentationTimestamp),e<f.presentationTimestamps.length-1&&(r.duration=f.presentationTimestamps[e+1].presentationTimestamp-t.presentationTimestamp)}let m=f.samples[f.presentationTimestamps[0].sampleIndex],v=f.samples[g(f.presentationTimestamps).sampleIndex];f.startTimestamp=m.presentationTimestamp,f.endTimestamp=v.presentationTimestamp+v.duration,this.currentFragment.implicitBaseDataOffset=d}break;case"udta":for(let{boxInfo:t,slice:a}of this.iterateContiguousBoxes(e.slice(i,r.contentSize))){if("meta"!==t.name&&!this.currentTrack){let e=a.filePos;this.metadataTags.raw??={},""===t.name[0]?this.metadataTags.raw[t.name]??=rS(a):this.metadataTags.raw[t.name]??=aC(a,t.contentSize),a.filePos=e}switch(t.name){case"meta":a.skip(-t.headerSize),this.traverseBox(a);break;case"nam":case"name":this.currentTrack?this.currentTrack.name=k.decode(aC(a,t.contentSize)):this.metadataTags.title??=rS(a);break;case"des":this.currentTrack||(this.metadataTags.description??=rS(a));break;case"ART":this.currentTrack||(this.metadataTags.artist??=rS(a));break;case"alb":this.currentTrack||(this.metadataTags.album??=rS(a));break;case"albr":this.currentTrack||(this.metadataTags.albumArtist??=rS(a));break;case"gen":this.currentTrack||(this.metadataTags.genre??=rS(a));break;case"day":if(!this.currentTrack){let e=new Date(rS(a));Number.isNaN(e.getTime())||(this.metadataTags.date??=e)}break;case"cmt":this.currentTrack||(this.metadataTags.comment??=rS(a));break;case"lyr":this.currentTrack||(this.metadataTags.lyrics??=rS(a))}}break;case"meta":{if(this.currentTrack)break;let t=aO(e);this.currentMetadataKeys=new Map,0!==t?this.readContiguousBoxes(e.slice(i,r.contentSize)):this.readContiguousBoxes(e.slice(i+4,r.contentSize-4)),this.currentMetadataKeys=null}break;case"keys":{if(!this.currentMetadataKeys)break;e.skip(4);let t=aO(e);for(let r=0;r<t;r++){let t=aO(e);e.skip(4);let i=k.decode(aC(e,t-8));this.currentMetadataKeys.set(r+1,i)}}break;case"ilst":if(!this.currentMetadataKeys)break;for(let{boxInfo:t,slice:a}of this.iterateContiguousBoxes(e.slice(i,r.contentSize))){let e=t.name,r=(e.charCodeAt(0)<<24)+(e.charCodeAt(1)<<16)+(e.charCodeAt(2)<<8)+e.charCodeAt(3);this.currentMetadataKeys.has(r)&&(e=this.currentMetadataKeys.get(r));let i=rk(a);switch(this.metadataTags.raw??={},this.metadataTags.raw[e]??=i,e){case"nam":case"titl":case"com.apple.quicktime.title":case"title":"string"==typeof i&&(this.metadataTags.title??=i);break;case"des":case"desc":case"dscp":case"com.apple.quicktime.description":case"description":"string"==typeof i&&(this.metadataTags.description??=i);break;case"ART":case"com.apple.quicktime.artist":case"artist":"string"==typeof i&&(this.metadataTags.artist??=i);break;case"alb":case"albm":case"com.apple.quicktime.album":case"album":"string"==typeof i&&(this.metadataTags.album??=i);break;case"aART":case"album_artist":"string"==typeof i&&(this.metadataTags.albumArtist??=i);break;case"cmt":case"com.apple.quicktime.comment":case"comment":"string"==typeof i&&(this.metadataTags.comment??=i);break;case"gen":case"gnre":case"com.apple.quicktime.genre":case"genre":"string"==typeof i&&(this.metadataTags.genre??=i);break;case"lyr":case"lyrics":"string"==typeof i&&(this.metadataTags.lyrics??=i);break;case"day":case"rldt":case"com.apple.quicktime.creationdate":case"date":if("string"==typeof i){let e=new Date(i);Number.isNaN(e.getTime())||(this.metadataTags.date??=e)}break;case"covr":case"com.apple.quicktime.artwork":i instanceof ew?(this.metadataTags.images??=[],this.metadataTags.images.push({data:i.data,kind:"coverFront",mimeType:i.mimeType})):i instanceof Uint8Array&&(this.metadataTags.images??=[],this.metadataTags.images.push({data:i,kind:"coverFront",mimeType:"image/*"}));break;case"track":if("string"==typeof i){let e=i.split("/"),t=Number.parseInt(e[0],10),r=e[1]&&Number.parseInt(e[1],10);Number.isInteger(t)&&t>0&&(this.metadataTags.trackNumber??=t),r&&Number.isInteger(r)&&r>0&&(this.metadataTags.tracksTotal??=r)}break;case"trkn":if(i instanceof Uint8Array&&i.length>=6){let e=S(i),t=e.getUint16(2,!1),r=e.getUint16(4,!1);t>0&&(this.metadataTags.trackNumber??=t),r>0&&(this.metadataTags.tracksTotal??=r)}break;case"disc":case"disk":if(i instanceof Uint8Array&&i.length>=6){let e=S(i),t=e.getUint16(2,!1),r=e.getUint16(4,!1);t>0&&(this.metadataTags.discNumber??=t),r>0&&(this.metadataTags.discsTotal??=r)}}}}return e.filePos=a,!0}},rE=class{constructor(e){this.internalTrack=e,this.packetToSampleIndex=new WeakMap,this.packetToFragmentLocation=new WeakMap}getId(){return this.internalTrack.id}getCodec(){throw Error("Not implemented on base class.")}getInternalCodecId(){return this.internalTrack.internalCodecId}getName(){return this.internalTrack.name}getLanguageCode(){return this.internalTrack.languageCode}getTimeResolution(){return this.internalTrack.timescale}getDisposition(){return this.internalTrack.disposition}async computeDuration(){let e=await this.getPacket(1/0,{metadataOnly:!0});return(e?.timestamp??0)+(e?.duration??0)}async getFirstTimestamp(){let e=await this.getFirstPacket({metadataOnly:!0});return e?.timestamp??0}async getFirstPacket(e){let t=await this.fetchPacketForSampleIndex(0,e);return t||!this.internalTrack.demuxer.isFragmented?t:this.performFragmentedLookup(null,e=>e.trackData.get(this.internalTrack.id)?{sampleIndex:0,correctSampleFound:!0}:{sampleIndex:-1,correctSampleFound:!1},-1/0,1/0,e)}mapTimestampIntoTimescale(e){return Q(e*this.internalTrack.timescale)+this.internalTrack.editListOffset}async getPacket(e,t){let r=this.mapTimestampIntoTimescale(e),i=this.internalTrack.demuxer.getSampleTableForTrack(this.internalTrack),a=rP(i,r),n=await this.fetchPacketForSampleIndex(a,t);return rR(i)&&this.internalTrack.demuxer.isFragmented?this.performFragmentedLookup(null,e=>{let t=e.trackData.get(this.internalTrack.id);if(!t)return{sampleIndex:-1,correctSampleFound:!1};let i=N(t.presentationTimestamps,r,e=>e.presentationTimestamp);return{sampleIndex:-1!==i?t.presentationTimestamps[i].sampleIndex:-1,correctSampleFound:-1!==i&&r<t.endTimestamp}},r,r,t):n}async getNextPacket(e,t){let r=this.packetToSampleIndex.get(e);if(void 0!==r)return this.fetchPacketForSampleIndex(r+1,t);let i=this.packetToFragmentLocation.get(e);if(void 0===i)throw Error("Packet was not created from this track.");return this.performFragmentedLookup(i.fragment,e=>{if(e===i.fragment){let t=e.trackData.get(this.internalTrack.id);if(i.sampleIndex+1<t.samples.length)return{sampleIndex:i.sampleIndex+1,correctSampleFound:!0}}else if(e.trackData.get(this.internalTrack.id))return{sampleIndex:0,correctSampleFound:!0};return{sampleIndex:-1,correctSampleFound:!1}},-1/0,1/0,t)}async getKeyPacket(e,t){let r=this.mapTimestampIntoTimescale(e),i=this.internalTrack.demuxer.getSampleTableForTrack(this.internalTrack),a=rI(i,r),n=await this.fetchPacketForSampleIndex(a,t);return rR(i)&&this.internalTrack.demuxer.isFragmented?this.performFragmentedLookup(null,e=>{let t=e.trackData.get(this.internalTrack.id);if(!t)return{sampleIndex:-1,correctSampleFound:!1};let i=V(t.presentationTimestamps,e=>t.samples[e.sampleIndex].isKeyFrame&&e.presentationTimestamp<=r);return{sampleIndex:-1!==i?t.presentationTimestamps[i].sampleIndex:-1,correctSampleFound:-1!==i&&r<t.endTimestamp}},r,r,t):n}async getNextKeyPacket(e,t){let r=this.packetToSampleIndex.get(e);if(void 0!==r){let e=rO(this.internalTrack.demuxer.getSampleTableForTrack(this.internalTrack),r);return this.fetchPacketForSampleIndex(e,t)}let i=this.packetToFragmentLocation.get(e);if(void 0===i)throw Error("Packet was not created from this track.");return this.performFragmentedLookup(i.fragment,e=>{if(e===i.fragment){let t=e.trackData.get(this.internalTrack.id).samples.findIndex((e,t)=>e.isKeyFrame&&t>i.sampleIndex);if(-1!==t)return{sampleIndex:t,correctSampleFound:!0}}else{let t=e.trackData.get(this.internalTrack.id);if(t&&null!==t.firstKeyFrameTimestamp){let e=t.samples.findIndex(e=>e.isKeyFrame);return h(-1!==e),{sampleIndex:e,correctSampleFound:!0}}}return{sampleIndex:-1,correctSampleFound:!1}},-1/0,1/0,t)}async fetchPacketForSampleIndex(e,t){let r;if(-1===e)return null;let i=rA(this.internalTrack.demuxer.getSampleTableForTrack(this.internalTrack),e);if(!i)return null;if(t.metadataOnly)r=tz;else{let e=this.internalTrack.demuxer.reader.requestSlice(i.sampleOffset,i.sampleSize);e instanceof Promise&&(e=await e),h(e),r=aC(e,i.sampleSize)}let a=(i.presentationTimestamp-this.internalTrack.editListOffset)/this.internalTrack.timescale,n=i.duration/this.internalTrack.timescale,o=new tU(r,i.isKeyFrame?"key":"delta",a,n,e,i.sampleSize);return this.packetToSampleIndex.set(o,e),o}async fetchPacketInFragment(e,t,r){let i;if(-1===t)return null;let a=e.trackData.get(this.internalTrack.id).samples[t];if(h(a),r.metadataOnly)i=tz;else{let e=this.internalTrack.demuxer.reader.requestSlice(a.byteOffset,a.byteSize);e instanceof Promise&&(e=await e),h(e),i=aC(e,a.byteSize)}let n=(a.presentationTimestamp-this.internalTrack.editListOffset)/this.internalTrack.timescale,o=a.duration/this.internalTrack.timescale,s=new tU(i,a.isKeyFrame?"key":"delta",n,o,e.moofOffset+t,a.byteSize);return this.packetToFragmentLocation.set(s,{fragment:e,sampleIndex:t}),s}async performFragmentedLookup(e,t,r,i,a){let n,o=this.internalTrack.demuxer,s=null,l=null,u=-1;if(e){let{sampleIndex:r,correctSampleFound:i}=t(e);if(i)return this.fetchPacketInFragment(e,r,a);-1!==r&&(l=e,u=r)}let c=N(this.internalTrack.fragmentLookupTable,r,e=>e.timestamp),d=-1!==c?this.internalTrack.fragmentLookupTable[c]:null,p=N(this.internalTrack.fragmentPositionCache,r,e=>e.startTimestamp),f=-1!==p?this.internalTrack.fragmentPositionCache[p]:null,m=Math.max(d?.moofOffset??0,f?.moofOffset??0)||null;for(e?null===m||e.moofOffset>=m?(n=e.moofOffset+e.moofSize,s=e):n=m:n=m??0;;){if(s){let e=s.trackData.get(this.internalTrack.id);if(e&&e.startTimestamp>i)break}let e=o.reader.requestSliceRange(n,8,16);if(e instanceof Promise&&(e=await e),!e)break;let r=n,c=rb(e);if(!c)break;if("moof"===c.name){let{sampleIndex:e,correctSampleFound:i}=t(s=await o.readFragment(r));if(i)return this.fetchPacketInFragment(s,e,a);-1!==e&&(l=s,u=e)}n=r+c.totalSize}if(d&&(!l||l.moofOffset<d.moofOffset)){let e=this.internalTrack.fragmentLookupTable[c-1];h(!e||e.timestamp<d.timestamp);let r=e?.timestamp??-1/0;return this.performFragmentedLookup(null,t,r,i,a)}return l?this.fetchPacketInFragment(l,u,a):null}},r_=class extends rE{constructor(e){super(e),this.decoderConfigPromise=null,this.internalTrack=e}getCodec(){return this.internalTrack.info.codec}getCodedWidth(){return this.internalTrack.info.width}getCodedHeight(){return this.internalTrack.info.height}getRotation(){return this.internalTrack.rotation}async getColorSpace(){return{primaries:this.internalTrack.info.colorSpace?.primaries,transfer:this.internalTrack.info.colorSpace?.transfer,matrix:this.internalTrack.info.colorSpace?.matrix,fullRange:this.internalTrack.info.colorSpace?.fullRange}}async canBeTransparent(){return!1}async getDecoderConfig(){return this.internalTrack.info.codec?this.decoderConfigPromise??=(async()=>{if("vp9"!==this.internalTrack.info.codec||this.internalTrack.info.vp9CodecInfo){if("av1"===this.internalTrack.info.codec&&!this.internalTrack.info.av1CodecInfo){let e=await this.getFirstPacket({});this.internalTrack.info.av1CodecInfo=e&&tk(e.data)}}else{let e=await this.getFirstPacket({});this.internalTrack.info.vp9CodecInfo=e&&tw(e.data)}return{codec:eB(this.internalTrack.info),codedWidth:this.internalTrack.info.width,codedHeight:this.internalTrack.info.height,description:this.internalTrack.info.codecDescription??void 0,colorSpace:this.internalTrack.info.colorSpace??void 0}})():null}},rT=class extends rE{constructor(e){super(e),this.decoderConfig=null,this.internalTrack=e}getCodec(){return this.internalTrack.info.codec}getNumberOfChannels(){return this.internalTrack.info.numberOfChannels}getSampleRate(){return this.internalTrack.info.sampleRate}async getDecoderConfig(){return this.internalTrack.info.codec?this.decoderConfig??={codec:eN(this.internalTrack.info),numberOfChannels:this.internalTrack.info.numberOfChannels,sampleRate:this.internalTrack.info.sampleRate,description:this.internalTrack.info.codecDescription??void 0}:null}},rP=(e,t)=>{if(e.presentationTimestamps){let r=N(e.presentationTimestamps,t,e=>e.presentationTimestamp);return -1===r?-1:e.presentationTimestamps[r].sampleIndex}{let r=N(e.sampleTimingEntries,t,e=>e.startDecodeTimestamp);if(-1===r)return -1;let i=e.sampleTimingEntries[r];return i.startIndex+Math.min(Math.floor((t-i.startDecodeTimestamp)/i.delta),i.count-1)}},rI=(e,t)=>{if(!e.keySampleIndices)return rP(e,t);if(e.presentationTimestamps){let r=N(e.presentationTimestamps,t,e=>e.presentationTimestamp);if(-1===r)return -1;for(let t=r;t>=0;t--){let r=e.presentationTimestamps[t].sampleIndex;if(-1!==B(e.keySampleIndices,r,e=>e))return r}return -1}{let r=rP(e,t),i=N(e.keySampleIndices,r,e=>e);return e.keySampleIndices[i]??-1}},rA=(e,t)=>{let r=N(e.sampleTimingEntries,t,e=>e.startIndex),i=e.sampleTimingEntries[r];if(!i||i.startIndex+i.count<=t)return null;let a=i.startDecodeTimestamp+(t-i.startIndex)*i.delta,n=N(e.sampleCompositionTimeOffsets,t,e=>e.startIndex),o=e.sampleCompositionTimeOffsets[n];o&&t-o.startIndex<o.count&&(a+=o.offset);let s=e.sampleSizes[Math.min(t,e.sampleSizes.length-1)],l=N(e.sampleToChunk,t,e=>e.startSampleIndex),u=e.sampleToChunk[l];h(u);let c=u.startChunkIndex+Math.floor((t-u.startSampleIndex)/u.samplesPerChunk),d=e.chunkOffsets[c],p=u.startSampleIndex+(c-u.startChunkIndex)*u.samplesPerChunk,f=0,m=d;if(1===e.sampleSizes.length)m+=s*(t-p),f+=s*u.samplesPerChunk;else for(let r=p;r<p+u.samplesPerChunk;r++){let i=e.sampleSizes[r];r<t&&(m+=i),f+=i}let g=i.delta;if(e.presentationTimestamps){let r=e.presentationTimestampIndexMap[t];h(void 0!==r),r<e.presentationTimestamps.length-1&&(g=e.presentationTimestamps[r+1].presentationTimestamp-a)}return{presentationTimestamp:a,duration:g,sampleOffset:m,sampleSize:s,chunkOffset:d,chunkSize:f,isKeyFrame:!e.keySampleIndices||-1!==B(e.keySampleIndices,t,e=>e)}},rO=(e,t)=>{if(!e.keySampleIndices)return t+1;let r=N(e.keySampleIndices,t,e=>e);return e.keySampleIndices[r+1]??-1},rM=(e,t)=>{for(let r of(e.startTimestamp+=t,e.endTimestamp+=t,e.samples))r.presentationTimestamp+=t;for(let r of e.presentationTimestamps)r.presentationTimestamp+=t},rF=e=>{let[t,,,r]=e,i=Math.hypot(t,r),a=-(180/Math.PI*Math.atan2(r/i,t/i));return Number.isFinite(a)?a:0},rR=e=>0===e.sampleSizes.length,rD=class{constructor(e){this.value=e}},rj=class{constructor(e){this.value=e}},rL=class{constructor(e){this.value=e}},rB=class{constructor(e){this.value=e}},rN=[0x114d9b74,0x1549a966,0x1f43b675,0x1654ae6b,0x1c53bb6b,0x1941a469,0x1043a770,0x1254c367],r$=[0x1a45dfa3,0x18538067,...rN],rz=e=>{if(e<256)return 1;if(e<65536)return 2;if(e<0x1000000)return 3;if(e<0x100000000)return 4;if(e<0x10000000000)return 5;else return 6},rU=e=>{if(e<1n<<8n)return 1;if(e<1n<<16n)return 2;if(e<1n<<24n)return 3;if(e<1n<<32n)return 4;if(e<1n<<40n)return 5;else if(e<1n<<48n)return 6;else if(e<1n<<56n)return 7;else return 8},rV=e=>{if(e>=-64&&e<64)return 1;if(e>=-8192&&e<8192)return 2;if(e>=-1048576&&e<1048576)return 3;if(e>=-0x8000000&&e<0x8000000)return 4;if(e>=-0x400000000&&e<0x400000000)return 5;else return 6},rH=e=>{if(e<127)return 1;if(e<16383)return 2;if(e<2097151)return 3;if(e<0xfffffff)return 4;if(e<0x800000000-1)return 5;else if(e<0x40000000000-1)return 6;else throw Error("EBML varint size not supported "+e)},rW=class{constructor(e){this.writer=e,this.helper=new Uint8Array(8),this.helperView=new DataView(this.helper.buffer),this.offsets=new WeakMap,this.dataOffsets=new WeakMap}writeByte(e){this.helperView.setUint8(0,e),this.writer.write(this.helper.subarray(0,1))}writeFloat32(e){this.helperView.setFloat32(0,e,!1),this.writer.write(this.helper.subarray(0,4))}writeFloat64(e){this.helperView.setFloat64(0,e,!1),this.writer.write(this.helper)}writeUnsignedInt(e,t=rz(e)){let r=0;switch(t){case 6:this.helperView.setUint8(r++,e/0x10000000000|0);case 5:this.helperView.setUint8(r++,e/0x100000000|0);case 4:this.helperView.setUint8(r++,e>>24);case 3:this.helperView.setUint8(r++,e>>16);case 2:this.helperView.setUint8(r++,e>>8);case 1:this.helperView.setUint8(r++,e);break;default:throw Error("Bad unsigned int size "+t)}this.writer.write(this.helper.subarray(0,r))}writeUnsignedBigInt(e,t=rU(e)){let r=0;for(let i=t-1;i>=0;i--)this.helperView.setUint8(r++,Number(e>>BigInt(8*i)&255n));this.writer.write(this.helper.subarray(0,r))}writeSignedInt(e,t=rV(e)){e<0&&(e+=2**(8*t)),this.writeUnsignedInt(e,t)}writeVarInt(e,t=rH(e)){let r=0;switch(t){case 1:this.helperView.setUint8(r++,128|e);break;case 2:this.helperView.setUint8(r++,64|e>>8),this.helperView.setUint8(r++,e);break;case 3:this.helperView.setUint8(r++,32|e>>16),this.helperView.setUint8(r++,e>>8),this.helperView.setUint8(r++,e);break;case 4:this.helperView.setUint8(r++,16|e>>24),this.helperView.setUint8(r++,e>>16),this.helperView.setUint8(r++,e>>8),this.helperView.setUint8(r++,e);break;case 5:this.helperView.setUint8(r++,8|e/0x100000000&7),this.helperView.setUint8(r++,e>>24),this.helperView.setUint8(r++,e>>16),this.helperView.setUint8(r++,e>>8),this.helperView.setUint8(r++,e);break;case 6:this.helperView.setUint8(r++,4|e/0x10000000000&3),this.helperView.setUint8(r++,e/0x100000000|0),this.helperView.setUint8(r++,e>>24),this.helperView.setUint8(r++,e>>16),this.helperView.setUint8(r++,e>>8),this.helperView.setUint8(r++,e);break;default:throw Error("Bad EBML varint size "+t)}this.writer.write(this.helper.subarray(0,r))}writeAsciiString(e){this.writer.write(new Uint8Array(e.split("").map(e=>e.charCodeAt(0))))}writeEBML(e){if(null!==e)if(e instanceof Uint8Array)this.writer.write(e);else if(Array.isArray(e))for(let t of e)this.writeEBML(t);else if(this.offsets.set(e,this.writer.getPos()),this.writeUnsignedInt(e.id),Array.isArray(e.data)){let t=this.writer.getPos(),r=-1===e.size?1:e.size??4;-1===e.size?this.writeByte(255):this.writer.seek(this.writer.getPos()+r);let i=this.writer.getPos();if(this.dataOffsets.set(e,i),this.writeEBML(e.data),-1!==e.size){let e=this.writer.getPos()-i,a=this.writer.getPos();this.writer.seek(t),this.writeVarInt(e,r),this.writer.seek(a)}}else if("number"==typeof e.data){let t=e.size??rz(e.data);this.writeVarInt(t),this.writeUnsignedInt(e.data,t)}else if("bigint"==typeof e.data){let t=e.size??rU(e.data);this.writeVarInt(t),this.writeUnsignedBigInt(e.data,t)}else if("string"==typeof e.data)this.writeVarInt(e.data.length),this.writeAsciiString(e.data);else if(e.data instanceof Uint8Array)this.writeVarInt(e.data.byteLength,e.size),this.writer.write(e.data);else if(e.data instanceof rD)this.writeVarInt(4),this.writeFloat32(e.data.value);else if(e.data instanceof rj)this.writeVarInt(8),this.writeFloat64(e.data.value);else if(e.data instanceof rL){let t=e.size??rV(e.data.value);this.writeVarInt(t),this.writeSignedInt(e.data.value,t)}else if(e.data instanceof rB){let t=C.encode(e.data.value);this.writeVarInt(t.length),this.writer.write(t)}else W(e.data)}},rq=e=>{if(e.remainingLength<1)return null;let t=aE(e);if(e.skip(-1),0===t)return null;let r=1,i=128;for(;(t&i)==0;)r++,i>>=1;return e.remainingLength<r?null:r},rG=e=>{if(e.remainingLength<1)return null;let t=aE(e);if(0===t)return null;let r=1,i=128;for(;(t&i)==0;)r++,i>>=1;if(e.remainingLength<r-1)return null;let a=t&i-1;for(let t=1;t<r;t++)a*=256,a+=aE(e);return a},rZ=(e,t)=>{if(t<1||t>8)throw Error("Bad unsigned int size "+t);let r=0;for(let i=0;i<t;i++)r*=256,r+=aE(e);return r},rK=e=>{let t=rq(e);return null===t||e.remainingLength<t?null:rZ(e,t)},rQ=e=>{if(e.remainingLength<1)return null;if(255===aE(e))return;e.skip(-1);let t=rG(e);return null===t?null:0x100000000000000!==t?t:void 0},rX=e=>{h(e.remainingLength>=2);let t=rK(e);if(null===t)return null;let r=rQ(e);return null===r?null:{id:t,size:r}},rJ=(e,t)=>{let r=aC(e,t),i=0;for(;i<t&&0!==r[i];)i+=1;return String.fromCharCode(...r.subarray(0,i))},rY=(e,t)=>{let r=aC(e,t),i=0;for(;i<t&&0!==r[i];)i+=1;return k.decode(r.subarray(0,i))},r0=(e,t)=>{if(0===t)return 0;if(4!==t&&8!==t)throw Error("Bad float size "+t);return 4===t?aB(e):aN(e)},r1=async(e,t,r,i)=>{let a=new Set(r),n=t;for(;null===i||n<i;){let t=e.requestSliceRange(n,2,16);if(t instanceof Promise&&(t=await t),!t)break;let r=rX(t);if(!r)break;if(a.has(r.id))return{pos:n,found:!0};r3(r.size),n=t.filePos+r.size}return{pos:null!==i&&i>n?i:n,found:!1}},r2=async(e,t,r,i)=>{let a=new Set(r),n=t;for(;n<i;){let t=e.requestSliceRange(n,0,Math.min(65536,i-n));if(t instanceof Promise&&(t=await t),!t||t.length<8)break;for(let e=0;e<t.length-8;e++){t.filePos=n;let e=rK(t);if(null!==e&&a.has(e))return n;n++}}return null},r4={avc:"V_MPEG4/ISO/AVC",hevc:"V_MPEGH/ISO/HEVC",vp8:"V_VP8",vp9:"V_VP9",av1:"V_AV1",aac:"A_AAC",mp3:"A_MPEG/L3",opus:"A_OPUS",vorbis:"A_VORBIS",flac:"A_FLAC","pcm-u8":"A_PCM/INT/LIT","pcm-s16":"A_PCM/INT/LIT","pcm-s16be":"A_PCM/INT/BIG","pcm-s24":"A_PCM/INT/LIT","pcm-s24be":"A_PCM/INT/BIG","pcm-s32":"A_PCM/INT/LIT","pcm-s32be":"A_PCM/INT/BIG","pcm-f32":"A_PCM/FLOAT/IEEE","pcm-f64":"A_PCM/FLOAT/IEEE",webvtt:"S_TEXT/WEBVTT"};function r3(e){if(void 0===e)throw Error("Undefined element size is used in a place where it is not supported.")}var r6=e=>{let t=(e.hasVideo?"video/":e.hasAudio?"audio/":"application/")+(e.isWebM?"webm":"x-matroska");if(e.codecStrings.length>0){let r=[...new Set(e.codecStrings.filter(Boolean))];t+=`; codecs="${r.join(", ")}"`}return t},r8=[{id:0x114d9b74,flag:"seekHeadSeen"},{id:0x1549a966,flag:"infoSeen"},{id:0x1654ae6b,flag:"tracksSeen"},{id:0x1c53bb6b,flag:"cuesSeen"}],r5=class extends tA{constructor(e){super(e),this.readMetadataPromise=null,this.segments=[],this.currentSegment=null,this.currentTrack=null,this.currentCluster=null,this.currentBlock=null,this.currentBlockAdditional=null,this.currentCueTime=null,this.currentDecodingInstruction=null,this.currentTagTargetIsMovie=!0,this.currentSimpleTagName=null,this.currentAttachedFile=null,this.isWebM=!1,this.reader=e._reader}async computeDuration(){let e=await this.getTracks();return Math.max(0,...await Promise.all(e.map(e=>e.computeDuration())))}async getTracks(){return await this.readMetadata(),this.segments.flatMap(e=>e.tracks.map(e=>e.inputTrack))}async getMimeType(){await this.readMetadata();let e=await this.getTracks(),t=await Promise.all(e.map(e=>e.getCodecParameterString()));return r6({isWebM:this.isWebM,hasVideo:this.segments.some(e=>e.tracks.some(e=>e.info?.type==="video")),hasAudio:this.segments.some(e=>e.tracks.some(e=>e.info?.type==="audio")),codecStrings:t.filter(Boolean)})}async getMetadataTags(){for(let e of(await this.readMetadata(),this.segments))e.metadataTagsCollected||(null!==this.reader.fileSize&&await this.loadSegmentMetadata(e),e.metadataTagsCollected=!0);let e={};for(let t of this.segments)e={...e,...t.metadataTags};return e}readMetadata(){return this.readMetadataPromise??=(async()=>{let e=0;for(;;){let t=this.reader.requestSliceRange(e,2,16);if(t instanceof Promise&&(t=await t),!t)break;let r=rX(t);if(!r)break;let i=r.id,a=r.size,n=t.filePos;if(0x1a45dfa3===i){r3(a);let e=this.reader.requestSlice(n,a);if(e instanceof Promise&&(e=await e),!e)break;this.readContiguousElements(e)}else if(0x18538067===i){if(await this.readSegment(n,a),void 0===a||null===this.reader.fileSize)break}else if(0x1f43b675===i){if(null===this.reader.fileSize)break;void 0===a&&(a=(await r1(this.reader,n,r$,this.reader.fileSize)).pos-n);let e=g(this.segments);e&&(e.elementEndPos=n+a)}r3(a),e=n+a}})()}async readSegment(e,t){this.currentSegment={seekHeadSeen:!1,infoSeen:!1,tracksSeen:!1,cuesSeen:!1,tagsSeen:!1,attachmentsSeen:!1,timestampScale:-1,timestampFactor:-1,duration:-1,seekEntries:[],tracks:[],cuePoints:[],dataStartPos:e,elementEndPos:void 0===t?null:e+t,clusterSeekStartPos:e,lastReadCluster:null,metadataTags:{},metadataTagsCollected:!1},this.segments.push(this.currentSegment);let r=e;for(;null===this.currentSegment.elementEndPos||r<this.currentSegment.elementEndPos;){let e=this.reader.requestSliceRange(r,2,16);if(e instanceof Promise&&(e=await e),!e)break;let t=r,i=rX(e);if(!i||!rN.includes(i.id)&&236!==i.id){let e=await r2(this.reader,t,rN,Math.min(this.currentSegment.elementEndPos??1/0,t+0xa00000));if(e){r=e;continue}break}let{id:a,size:n}=i,o=e.filePos,s=r8.findIndex(e=>e.id===a);if(-1!==s){let e=r8[s].flag;this.currentSegment[e]=!0,r3(n);let t=this.reader.requestSlice(o,n);t instanceof Promise&&(t=await t),t&&this.readContiguousElements(t)}else if(0x1254c367===a||0x1941a469===a){0x1254c367===a?this.currentSegment.tagsSeen=!0:this.currentSegment.attachmentsSeen=!0,r3(n);let e=this.reader.requestSlice(o,n);e instanceof Promise&&(e=await e),e&&this.readContiguousElements(e)}else if(0x1f43b675===a){this.currentSegment.clusterSeekStartPos=t;break}if(void 0===n)break;r=o+n}if(this.currentSegment.seekEntries.sort((e,t)=>e.segmentPosition-t.segmentPosition),null!==this.reader.fileSize)for(let t of this.currentSegment.seekEntries){let r=r8.find(e=>e.id===t.id);if(!r||this.currentSegment[r.flag])continue;let i=this.reader.requestSliceRange(e+t.segmentPosition,2,16);if(i instanceof Promise&&(i=await i),!i)continue;let a=rX(i);if(!a)continue;let{id:n,size:o}=a;if(n!==r.id)continue;r3(o),this.currentSegment[r.flag]=!0;let s=this.reader.requestSlice(i.filePos,o);s instanceof Promise&&(s=await s),s&&this.readContiguousElements(s)}for(let e of(-1===this.currentSegment.timestampScale&&(this.currentSegment.timestampScale=1e6,this.currentSegment.timestampFactor=1e3),this.currentSegment.tracks))null!==e.defaultDurationNs&&(e.defaultDuration=this.currentSegment.timestampFactor*e.defaultDurationNs/1e9);this.currentSegment.tracks.sort((e,t)=>Number(t.disposition.default)-Number(e.disposition.default));let i=new Map(this.currentSegment.tracks.map(e=>[e.id,e]));for(let e of this.currentSegment.cuePoints){let t=i.get(e.trackId);t&&t.cuePoints.push(e)}for(let e of this.currentSegment.tracks){e.cuePoints.sort((e,t)=>e.time-t.time);for(let t=0;t<e.cuePoints.length-1;t++){let r=e.cuePoints[t],i=e.cuePoints[t+1];r.time===i.time&&(e.cuePoints.splice(t+1,1),t--)}}let a=null,n=-1/0;for(let e of this.currentSegment.tracks)e.cuePoints.length>n&&(n=e.cuePoints.length,a=e);for(let e of this.currentSegment.tracks)0===e.cuePoints.length&&(e.cuePoints=a.cuePoints);this.currentSegment=null}async readCluster(e,t){if(t.lastReadCluster?.elementStartPos===e)return t.lastReadCluster;let r=this.reader.requestSliceRange(e,2,16);r instanceof Promise&&(r=await r),h(r);let i=rX(r);h(i),h(0x1f43b675===i.id);let a=i.size,n=r.filePos;void 0===a&&(a=(await r1(this.reader,n,r$,t.elementEndPos)).pos-n);let o=this.reader.requestSlice(n,a);o instanceof Promise&&(o=await o);let s={segment:t,elementStartPos:e,elementEndPos:n+a,dataStartPos:n,timestamp:-1,trackData:new Map};for(let[,t]of(this.currentCluster=s,o&&(s.elementEndPos=this.readContiguousElements(o,r$)),s.trackData)){let r=t.track;h(t.blocks.length>0);let i=!1;for(let e=0;e<t.blocks.length;e++){let r=t.blocks[e];r.timestamp+=s.timestamp,i||=0!==r.lacing}t.presentationTimestamps=t.blocks.map((e,t)=>({timestamp:e.timestamp,blockIndex:t})).sort((e,t)=>e.timestamp-t.timestamp);for(let e=0;e<t.presentationTimestamps.length;e++){let i=t.presentationTimestamps[e],a=t.blocks[i.blockIndex];null===t.firstKeyFrameTimestamp&&a.isKeyFrame&&(t.firstKeyFrameTimestamp=a.timestamp),e<t.presentationTimestamps.length-1?a.duration=t.presentationTimestamps[e+1].timestamp-a.timestamp:0===a.duration&&null!=r.defaultDuration&&0===a.lacing&&(a.duration=r.defaultDuration)}i&&(this.expandLacedBlocks(t.blocks,r),t.presentationTimestamps=t.blocks.map((e,t)=>({timestamp:e.timestamp,blockIndex:t})).sort((e,t)=>e.timestamp-t.timestamp));let a=t.blocks[t.presentationTimestamps[0].blockIndex],n=t.blocks[g(t.presentationTimestamps).blockIndex];t.startTimestamp=a.timestamp,t.endTimestamp=n.timestamp+n.duration;let o=N(r.clusterPositionCache,t.startTimestamp,e=>e.startTimestamp);(-1===o||r.clusterPositionCache[o].elementStartPos!==e)&&r.clusterPositionCache.splice(o+1,0,{elementStartPos:s.elementStartPos,startTimestamp:t.startTimestamp})}return t.lastReadCluster=s,s}getTrackDataInCluster(e,t){let r=e.trackData.get(t);if(!r){let i=e.segment.tracks.find(e=>e.id===t);if(!i)return null;r={track:i,startTimestamp:0,endTimestamp:0,firstKeyFrameTimestamp:null,blocks:[],presentationTimestamps:[]},e.trackData.set(t,r)}return r}expandLacedBlocks(e,t){for(let r=0;r<e.length;r++){let i=e[r];if(0===i.lacing)continue;i.decoded||(i.data=this.decodeBlockData(t,i.data),i.decoded=!0);let a=aS.tempFromBytes(i.data),n=[],o=aE(a)+1;switch(i.lacing){case 1:{let e=0;for(let t=0;t<o-1;t++){let t=0;for(;a.bufferPos<a.length;){let r=aE(a);if(t+=r,r<255){n.push(t),e+=t;break}}}n.push(a.length-(a.bufferPos+e))}break;case 2:{let e=Math.floor((a.length-1)/o);for(let t=0;t<o;t++)n.push(e)}break;case 3:{let e=rG(a);h(null!==e);let t=e;n.push(t);let r=t;for(let e=1;e<o-1;e++){let e=a.bufferPos,i=rG(a);h(null!==i),t+=i-((1<<7*(a.bufferPos-e)-1)-1),n.push(t),r+=t}n.push(a.length-(a.bufferPos+r))}break;default:h(!1)}h(n.length===o),e.splice(r,1);let s=i.duration||o*(t.defaultDuration??0);for(let t=0;t<o;t++){let l=aC(a,n[t]),u=i.timestamp+s*t/o,c=s/o;e.splice(r+t,0,{timestamp:u,duration:c,isKeyFrame:i.isKeyFrame,data:l,lacing:0,decoded:!0,mainAdditional:i.mainAdditional})}r+=o,r--}}async loadSegmentMetadata(e){for(let t of e.seekEntries){if((0x1254c367!==t.id||e.tagsSeen)&&(0x1941a469!==t.id||e.attachmentsSeen))continue;let r=this.reader.requestSliceRange(e.dataStartPos+t.segmentPosition,2,16);if(r instanceof Promise&&(r=await r),!r)continue;let i=rX(r);if(!i||i.id!==t.id)continue;let{size:a}=i;r3(a),h(!this.currentSegment),this.currentSegment=e;let n=this.reader.requestSlice(r.filePos,a);n instanceof Promise&&(n=await n),n&&this.readContiguousElements(n),this.currentSegment=null,0x1254c367===t.id?e.tagsSeen=!0:0x1941a469===t.id&&(e.attachmentsSeen=!0)}}readContiguousElements(e,t){for(;e.remainingLength>=2;){let r=e.filePos;if(!this.traverseElement(e,t))return r}return e.filePos}traverseElement(e,t){let r=rX(e);if(!r||t&&t.includes(r.id))return!1;let{id:i,size:a}=r,n=e.filePos;switch(r3(a),i){case 17026:this.isWebM="webm"===rJ(e,a);break;case 19899:{if(!this.currentSegment)break;let t={id:-1,segmentPosition:-1};this.currentSegment.seekEntries.push(t),this.readContiguousElements(e.slice(n,a)),(-1===t.id||-1===t.segmentPosition)&&this.currentSegment.seekEntries.pop()}break;case 21419:{let t=this.currentSegment?.seekEntries[this.currentSegment.seekEntries.length-1];if(!t)break;t.id=rZ(e,a)}break;case 21420:{let t=this.currentSegment?.seekEntries[this.currentSegment.seekEntries.length-1];if(!t)break;t.segmentPosition=rZ(e,a)}break;case 2807729:if(!this.currentSegment)break;this.currentSegment.timestampScale=rZ(e,a),this.currentSegment.timestampFactor=1e9/this.currentSegment.timestampScale;break;case 17545:if(!this.currentSegment)break;this.currentSegment.duration=r0(e,a);break;case 174:if(!this.currentSegment||(this.currentTrack={id:-1,segment:this.currentSegment,demuxer:this,clusterPositionCache:[],cuePoints:[],disposition:{...eE},inputTrack:null,codecId:null,codecPrivate:null,defaultDuration:null,defaultDurationNs:null,name:null,languageCode:"und",decodingInstructions:[],info:null},this.readContiguousElements(e.slice(n,a)),!this.currentTrack))break;if(this.currentTrack.decodingInstructions.some(e=>e.data?.type!=="decompress"||1!==e.scope||3!==e.data.algorithm)&&(console.warn(`Track #${this.currentTrack.id} has an unsupported content encoding; dropping.`),this.currentTrack=null),this.currentTrack&&-1!==this.currentTrack.id&&this.currentTrack.codecId&&this.currentTrack.info){let e=this.currentTrack.codecId.indexOf("/"),t=-1===e?this.currentTrack.codecId:this.currentTrack.codecId.slice(0,e);if("video"===this.currentTrack.info.type&&-1!==this.currentTrack.info.width&&-1!==this.currentTrack.info.height){this.currentTrack.codecId===r4.avc?(this.currentTrack.info.codec="avc",this.currentTrack.info.codecDescription=this.currentTrack.codecPrivate):this.currentTrack.codecId===r4.hevc?(this.currentTrack.info.codec="hevc",this.currentTrack.info.codecDescription=this.currentTrack.codecPrivate):t===r4.vp8?this.currentTrack.info.codec="vp8":t===r4.vp9?this.currentTrack.info.codec="vp9":t===r4.av1&&(this.currentTrack.info.codec="av1");let e=this.currentTrack,r=new rg(this.input,new r9(e));this.currentTrack.inputTrack=r,this.currentSegment.tracks.push(this.currentTrack)}else if("audio"===this.currentTrack.info.type&&-1!==this.currentTrack.info.numberOfChannels&&-1!==this.currentTrack.info.sampleRate){t===r4.aac?(this.currentTrack.info.codec="aac",this.currentTrack.info.aacCodecInfo={isMpeg2:this.currentTrack.codecId.includes("MPEG2"),objectType:null},this.currentTrack.info.codecDescription=this.currentTrack.codecPrivate):this.currentTrack.codecId===r4.mp3?this.currentTrack.info.codec="mp3":t===r4.opus?(this.currentTrack.info.codec="opus",this.currentTrack.info.codecDescription=this.currentTrack.codecPrivate,this.currentTrack.info.sampleRate=48e3):t===r4.vorbis?(this.currentTrack.info.codec="vorbis",this.currentTrack.info.codecDescription=this.currentTrack.codecPrivate):t===r4.flac?(this.currentTrack.info.codec="flac",this.currentTrack.info.codecDescription=this.currentTrack.codecPrivate):"A_PCM/INT/LIT"===this.currentTrack.codecId?8===this.currentTrack.info.bitDepth?this.currentTrack.info.codec="pcm-u8":16===this.currentTrack.info.bitDepth?this.currentTrack.info.codec="pcm-s16":24===this.currentTrack.info.bitDepth?this.currentTrack.info.codec="pcm-s24":32===this.currentTrack.info.bitDepth&&(this.currentTrack.info.codec="pcm-s32"):"A_PCM/INT/BIG"===this.currentTrack.codecId?8===this.currentTrack.info.bitDepth?this.currentTrack.info.codec="pcm-u8":16===this.currentTrack.info.bitDepth?this.currentTrack.info.codec="pcm-s16be":24===this.currentTrack.info.bitDepth?this.currentTrack.info.codec="pcm-s24be":32===this.currentTrack.info.bitDepth&&(this.currentTrack.info.codec="pcm-s32be"):"A_PCM/FLOAT/IEEE"===this.currentTrack.codecId&&(32===this.currentTrack.info.bitDepth?this.currentTrack.info.codec="pcm-f32":64===this.currentTrack.info.bitDepth&&(this.currentTrack.info.codec="pcm-f64"));let e=this.currentTrack,r=new rv(this.input,new ie(e));this.currentTrack.inputTrack=r,this.currentSegment.tracks.push(this.currentTrack)}}this.currentTrack=null;break;case 215:if(!this.currentTrack)break;this.currentTrack.id=rZ(e,a);break;case 131:{if(!this.currentTrack)break;let t=rZ(e,a);1===t?this.currentTrack.info={type:"video",width:-1,height:-1,rotation:0,codec:null,codecDescription:null,colorSpace:null,alphaMode:!1}:2===t&&(this.currentTrack.info={type:"audio",numberOfChannels:-1,sampleRate:-1,bitDepth:-1,codec:null,codecDescription:null,aacCodecInfo:null})}break;case 185:if(!this.currentTrack)break;rZ(e,a)||(this.currentTrack=null);break;case 136:if(!this.currentTrack)break;this.currentTrack.disposition.default=!!rZ(e,a);break;case 21930:if(!this.currentTrack)break;this.currentTrack.disposition.forced=!!rZ(e,a);break;case 21934:if(!this.currentTrack)break;this.currentTrack.disposition.original=!!rZ(e,a);break;case 21931:if(!this.currentTrack)break;this.currentTrack.disposition.hearingImpaired=!!rZ(e,a);break;case 21932:if(!this.currentTrack)break;this.currentTrack.disposition.visuallyImpaired=!!rZ(e,a);break;case 21935:if(!this.currentTrack)break;this.currentTrack.disposition.commentary=!!rZ(e,a);break;case 134:if(!this.currentTrack)break;this.currentTrack.codecId=rJ(e,a);break;case 25506:if(!this.currentTrack)break;this.currentTrack.codecPrivate=aC(e,a);break;case 2352003:if(!this.currentTrack)break;this.currentTrack.defaultDurationNs=rZ(e,a);break;case 21358:if(!this.currentTrack)break;this.currentTrack.name=rY(e,a);break;case 2274716:let o;if(!this.currentTrack||"und"!==this.currentTrack.languageCode)break;this.currentTrack.languageCode=rJ(e,a),o=this.currentTrack.languageCode,J.test(o)||(this.currentTrack.languageCode="und");break;case 2274717:{if(!this.currentTrack)break;let t=rJ(e,a).split("-")[0];t?this.currentTrack.languageCode=t:this.currentTrack.languageCode="und"}break;case 224:case 30320:if(this.currentTrack?.info?.type!=="video")break;this.readContiguousElements(e.slice(n,a));break;case 176:if(this.currentTrack?.info?.type!=="video")break;this.currentTrack.info.width=rZ(e,a);break;case 186:if(this.currentTrack?.info?.type!=="video")break;this.currentTrack.info.height=rZ(e,a);break;case 21440:if(this.currentTrack?.info?.type!=="video")break;this.currentTrack.info.alphaMode=1===rZ(e,a);break;case 21936:if(this.currentTrack?.info?.type!=="video")break;this.currentTrack.info.colorSpace={},this.readContiguousElements(e.slice(n,a));break;case 21937:{if(this.currentTrack?.info?.type!=="video"||!this.currentTrack.info.colorSpace)break;let t=M[rZ(e,a)]??null;this.currentTrack.info.colorSpace.matrix=t}break;case 21945:if(this.currentTrack?.info?.type!=="video"||!this.currentTrack.info.colorSpace)break;this.currentTrack.info.colorSpace.fullRange=2===rZ(e,a);break;case 21946:{if(this.currentTrack?.info?.type!=="video"||!this.currentTrack.info.colorSpace)break;let t=A[rZ(e,a)]??null;this.currentTrack.info.colorSpace.transfer=t}break;case 21947:{if(this.currentTrack?.info?.type!=="video"||!this.currentTrack.info.colorSpace)break;let t=P[rZ(e,a)]??null;this.currentTrack.info.colorSpace.primaries=t}break;case 30325:{if(this.currentTrack?.info?.type!=="video")break;let t=r0(e,a);try{this.currentTrack.info.rotation=m(-t)}catch{}}break;case 225:if(this.currentTrack?.info?.type!=="audio")break;this.readContiguousElements(e.slice(n,a));break;case 181:if(this.currentTrack?.info?.type!=="audio")break;this.currentTrack.info.sampleRate=r0(e,a);break;case 159:if(this.currentTrack?.info?.type!=="audio")break;this.currentTrack.info.numberOfChannels=rZ(e,a);break;case 25188:if(this.currentTrack?.info?.type!=="audio")break;this.currentTrack.info.bitDepth=rZ(e,a);break;case 187:if(!this.currentSegment)break;this.readContiguousElements(e.slice(n,a)),this.currentCueTime=null;break;case 179:this.currentCueTime=rZ(e,a);break;case 183:{if(null===this.currentCueTime)break;h(this.currentSegment);let t={time:this.currentCueTime,trackId:-1,clusterPosition:-1};this.currentSegment.cuePoints.push(t),this.readContiguousElements(e.slice(n,a)),(-1===t.trackId||-1===t.clusterPosition)&&this.currentSegment.cuePoints.pop()}break;case 247:{let t=this.currentSegment?.cuePoints[this.currentSegment.cuePoints.length-1];if(!t)break;t.trackId=rZ(e,a)}break;case 241:{let t=this.currentSegment?.cuePoints[this.currentSegment.cuePoints.length-1];if(!t)break;h(this.currentSegment),t.clusterPosition=this.currentSegment.dataStartPos+rZ(e,a)}break;case 231:if(!this.currentCluster)break;this.currentCluster.timestamp=rZ(e,a);break;case 163:{if(!this.currentCluster)break;let t=rG(e);if(null===t)break;let r=this.getTrackDataInCluster(this.currentCluster,t);if(!r)break;let i=aI(e),o=aE(e),s=!!(128&o);r.track.info?.type==="audio"&&r.track.info.codec&&(s=!0);let l=aC(e,a-(e.filePos-n)),u=r.track.decodingInstructions.length>0;r.blocks.push({timestamp:i,duration:0,isKeyFrame:s,data:l,lacing:o>>1&3,decoded:!u,mainAdditional:null})}break;case 160:if(!this.currentCluster)break;this.readContiguousElements(e.slice(n,a)),this.currentBlock=null;break;case 161:{if(!this.currentCluster)break;let t=rG(e);if(null===t)break;let r=this.getTrackDataInCluster(this.currentCluster,t);if(!r)break;let i=aI(e),o=aE(e),s=aC(e,a-(e.filePos-n)),l=r.track.decodingInstructions.length>0;this.currentBlock={timestamp:i,duration:0,isKeyFrame:!0,data:s,lacing:o>>1&3,decoded:!l,mainAdditional:null},r.blocks.push(this.currentBlock)}break;case 30113:case 25536:this.readContiguousElements(e.slice(n,a));break;case 166:if(!this.currentBlock)break;this.currentBlockAdditional={addId:1,data:null},this.readContiguousElements(e.slice(n,a)),this.currentBlockAdditional.data&&1===this.currentBlockAdditional.addId&&(this.currentBlock.mainAdditional=this.currentBlockAdditional.data),this.currentBlockAdditional=null;break;case 165:if(!this.currentBlockAdditional)break;this.currentBlockAdditional.data=aC(e,a);break;case 238:if(!this.currentBlockAdditional)break;this.currentBlockAdditional.addId=rZ(e,a);break;case 155:if(!this.currentBlock)break;this.currentBlock.duration=rZ(e,a);break;case 251:if(!this.currentBlock)break;this.currentBlock.isKeyFrame=!1;break;case 29555:this.currentTagTargetIsMovie=!0,this.readContiguousElements(e.slice(n,a));break;case 26826:50!==rZ(e,a)&&(this.currentTagTargetIsMovie=!1);break;case 25541:case 25545:case 25540:case 25542:this.currentTagTargetIsMovie=!1;break;case 26568:if(!this.currentTagTargetIsMovie)break;this.currentSimpleTagName=null,this.readContiguousElements(e.slice(n,a));break;case 17827:this.currentSimpleTagName=rY(e,a);break;case 17543:{if(!this.currentSimpleTagName)break;let t=rY(e,a);this.processTagValue(this.currentSimpleTagName,t)}break;case 17541:{if(!this.currentSimpleTagName)break;let t=aC(e,a);this.processTagValue(this.currentSimpleTagName,t)}break;case 24999:{if(!this.currentSegment)break;this.currentAttachedFile={fileUid:null,fileName:null,fileMediaType:null,fileData:null,fileDescription:null},this.readContiguousElements(e.slice(n,a));let t=this.currentSegment.metadataTags;if(this.currentAttachedFile.fileUid&&this.currentAttachedFile.fileData&&(t.raw??={},t.raw[this.currentAttachedFile.fileUid.toString()]=new eS(this.currentAttachedFile.fileData,this.currentAttachedFile.fileMediaType??void 0,this.currentAttachedFile.fileName??void 0,this.currentAttachedFile.fileDescription??void 0)),this.currentAttachedFile.fileMediaType?.startsWith("image/")&&this.currentAttachedFile.fileData){let e=this.currentAttachedFile.fileName,r="unknown";if(e){let t=e.toLowerCase();t.startsWith("cover.")?r="coverFront":t.startsWith("back.")&&(r="coverBack")}t.images??=[],t.images.push({data:this.currentAttachedFile.fileData,mimeType:this.currentAttachedFile.fileMediaType,kind:r,name:this.currentAttachedFile.fileName??void 0,description:this.currentAttachedFile.fileDescription??void 0})}this.currentAttachedFile=null}break;case 18094:if(!this.currentAttachedFile)break;this.currentAttachedFile.fileUid=((e,t)=>{if(t<1)throw Error("Bad unsigned int size "+t);let r=0n;for(let i=0;i<t;i++)r<<=8n,r+=BigInt(aE(e));return r})(e,a);break;case 18030:if(!this.currentAttachedFile)break;this.currentAttachedFile.fileName=rY(e,a);break;case 18016:if(!this.currentAttachedFile)break;this.currentAttachedFile.fileMediaType=rJ(e,a);break;case 18012:if(!this.currentAttachedFile)break;this.currentAttachedFile.fileData=aC(e,a);break;case 18046:if(!this.currentAttachedFile)break;this.currentAttachedFile.fileDescription=rY(e,a);break;case 28032:if(!this.currentTrack)break;this.readContiguousElements(e.slice(n,a)),this.currentTrack.decodingInstructions.sort((e,t)=>t.order-e.order);break;case 25152:this.currentDecodingInstruction={order:0,scope:1,data:null},this.readContiguousElements(e.slice(n,a)),this.currentDecodingInstruction.data&&this.currentTrack.decodingInstructions.push(this.currentDecodingInstruction),this.currentDecodingInstruction=null;break;case 20529:if(!this.currentDecodingInstruction)break;this.currentDecodingInstruction.order=rZ(e,a);break;case 20530:if(!this.currentDecodingInstruction)break;this.currentDecodingInstruction.scope=rZ(e,a);break;case 20532:if(!this.currentDecodingInstruction)break;this.currentDecodingInstruction.data={type:"decompress",algorithm:0,settings:null},this.readContiguousElements(e.slice(n,a));break;case 16980:if(this.currentDecodingInstruction?.data?.type!=="decompress")break;this.currentDecodingInstruction.data.algorithm=rZ(e,a);break;case 16981:if(this.currentDecodingInstruction?.data?.type!=="decompress")break;this.currentDecodingInstruction.data.settings=aC(e,a);break;case 20533:if(!this.currentDecodingInstruction)break;this.currentDecodingInstruction.data={type:"decrypt"}}return e.filePos=n+a,!0}decodeBlockData(e,t){h(e.decodingInstructions.length>0);let r=t;for(let t of e.decodingInstructions)if(h(t.data),"decompress"===t.data.type&&3===t.data.algorithm&&t.data.settings&&t.data.settings.length>0){let e=t.data.settings,i=new Uint8Array(e.length+r.length);i.set(e,0),i.set(r,e.length),r=i}return r}processTagValue(e,t){if(!this.currentSegment?.metadataTags)return;let r=this.currentSegment.metadataTags;if(r.raw??={},r.raw[e]??=t,"string"==typeof t)switch(e.toLowerCase()){case"title":r.title??=t;break;case"description":r.description??=t;break;case"artist":r.artist??=t;break;case"album":r.album??=t;break;case"album_artist":r.albumArtist??=t;break;case"genre":r.genre??=t;break;case"comment":r.comment??=t;break;case"lyrics":r.lyrics??=t;break;case"date":{let e=new Date(t);Number.isNaN(e.getTime())||(r.date??=e)}break;case"track_number":case"part_number":{let e=t.split("/"),i=Number.parseInt(e[0],10),a=e[1]&&Number.parseInt(e[1],10);Number.isInteger(i)&&i>0&&(r.trackNumber??=i),a&&Number.isInteger(a)&&a>0&&(r.tracksTotal??=a)}break;case"disc_number":case"disc":{let e=t.split("/"),i=Number.parseInt(e[0],10),a=e[1]&&Number.parseInt(e[1],10);Number.isInteger(i)&&i>0&&(r.discNumber??=i),a&&Number.isInteger(a)&&a>0&&(r.discsTotal??=a)}}}},r7=class{constructor(e){this.internalTrack=e,this.packetToClusterLocation=new WeakMap}getId(){return this.internalTrack.id}getCodec(){throw Error("Not implemented on base class.")}getInternalCodecId(){return this.internalTrack.codecId}async computeDuration(){let e=await this.getPacket(1/0,{metadataOnly:!0});return(e?.timestamp??0)+(e?.duration??0)}getName(){return this.internalTrack.name}getLanguageCode(){return this.internalTrack.languageCode}async getFirstTimestamp(){let e=await this.getFirstPacket({metadataOnly:!0});return e?.timestamp??0}getTimeResolution(){return this.internalTrack.segment.timestampFactor}getDisposition(){return this.internalTrack.disposition}async getFirstPacket(e){return this.performClusterLookup(null,e=>e.trackData.get(this.internalTrack.id)?{blockIndex:0,correctBlockFound:!0}:{blockIndex:-1,correctBlockFound:!1},-1/0,1/0,e)}intoTimescale(e){return Q(e*this.internalTrack.segment.timestampFactor)}async getPacket(e,t){let r=this.intoTimescale(e);return this.performClusterLookup(null,e=>{let t=e.trackData.get(this.internalTrack.id);if(!t)return{blockIndex:-1,correctBlockFound:!1};let i=N(t.presentationTimestamps,r,e=>e.timestamp);return{blockIndex:-1!==i?t.presentationTimestamps[i].blockIndex:-1,correctBlockFound:-1!==i&&r<t.endTimestamp}},r,r,t)}async getNextPacket(e,t){let r=this.packetToClusterLocation.get(e);if(void 0===r)throw Error("Packet was not created from this track.");return this.performClusterLookup(r.cluster,e=>{if(e===r.cluster){let t=e.trackData.get(this.internalTrack.id);if(r.blockIndex+1<t.blocks.length)return{blockIndex:r.blockIndex+1,correctBlockFound:!0}}else if(e.trackData.get(this.internalTrack.id))return{blockIndex:0,correctBlockFound:!0};return{blockIndex:-1,correctBlockFound:!1}},-1/0,1/0,t)}async getKeyPacket(e,t){let r=this.intoTimescale(e);return this.performClusterLookup(null,e=>{let t=e.trackData.get(this.internalTrack.id);if(!t)return{blockIndex:-1,correctBlockFound:!1};let i=V(t.presentationTimestamps,e=>t.blocks[e.blockIndex].isKeyFrame&&e.timestamp<=r);return{blockIndex:-1!==i?t.presentationTimestamps[i].blockIndex:-1,correctBlockFound:-1!==i&&r<t.endTimestamp}},r,r,t)}async getNextKeyPacket(e,t){let r=this.packetToClusterLocation.get(e);if(void 0===r)throw Error("Packet was not created from this track.");return this.performClusterLookup(r.cluster,e=>{if(e===r.cluster){let t=e.trackData.get(this.internalTrack.id).blocks.findIndex((e,t)=>e.isKeyFrame&&t>r.blockIndex);if(-1!==t)return{blockIndex:t,correctBlockFound:!0}}else{let t=e.trackData.get(this.internalTrack.id);if(t&&null!==t.firstKeyFrameTimestamp){let e=t.blocks.findIndex(e=>e.isKeyFrame);return h(-1!==e),{blockIndex:e,correctBlockFound:!0}}}return{blockIndex:-1,correctBlockFound:!1}},-1/0,1/0,t)}async fetchPacketInCluster(e,t,r){if(-1===t)return null;let i=e.trackData.get(this.internalTrack.id).blocks[t];h(i),i.decoded||(i.data=this.internalTrack.demuxer.decodeBlockData(this.internalTrack,i.data),i.decoded=!0);let a=r.metadataOnly?tz:i.data,n=i.timestamp/this.internalTrack.segment.timestampFactor,o=i.duration/this.internalTrack.segment.timestampFactor,s={};i.mainAdditional&&this.internalTrack.info?.type==="video"&&this.internalTrack.info.alphaMode&&(s.alpha=r.metadataOnly?tz:i.mainAdditional,s.alphaByteLength=i.mainAdditional.byteLength);let l=new tU(a,i.isKeyFrame?"key":"delta",n,o,e.dataStartPos+t,i.data.byteLength,s);return this.packetToClusterLocation.set(l,{cluster:e,blockIndex:t}),l}async performClusterLookup(e,t,r,i,a){let n,{demuxer:o,segment:s}=this.internalTrack,l=null,u=null,c=-1;if(e){let{blockIndex:r,correctBlockFound:i}=t(e);if(i)return this.fetchPacketInCluster(e,r,a);-1!==r&&(u=e,c=r)}let d=N(this.internalTrack.cuePoints,r,e=>e.time),p=-1!==d?this.internalTrack.cuePoints[d]:null,f=N(this.internalTrack.clusterPositionCache,r,e=>e.startTimestamp),m=-1!==f?this.internalTrack.clusterPositionCache[f]:null,g=Math.max(p?.clusterPosition??0,m?.elementStartPos??0)||null;for(e?null===g||e.elementStartPos>=g?(n=e.elementEndPos,l=e):n=g:n=g??s.clusterSeekStartPos;null===s.elementEndPos||n<=s.elementEndPos-2;){if(l){let e=l.trackData.get(this.internalTrack.id);if(e&&e.startTimestamp>i)break}let e=o.reader.requestSliceRange(n,2,16);if(e instanceof Promise&&(e=await e),!e)break;let r=n,d=rX(e);if(!d||!rN.includes(d.id)&&236!==d.id){let e=await r2(o.reader,r,rN,Math.min(s.elementEndPos??1/0,r+0xa00000));if(e){n=e;continue}break}let p=d.id,f=d.size,m=e.filePos;if(0x1f43b675===p){f=(l=await o.readCluster(r,s)).elementEndPos-m;let{blockIndex:e,correctBlockFound:i}=t(l);if(i)return this.fetchPacketInCluster(l,e,a);-1!==e&&(u=l,c=e)}void 0===f&&(h(0x1f43b675!==p),f=(await r1(o.reader,m,r$,s.elementEndPos)).pos-m);let g=m+f;if(null===s.elementEndPos){let e=o.reader.requestSliceRange(g,2,16);if(e instanceof Promise&&(e=await e),!e)break;if(0x18538067===rK(e)){s.elementEndPos=g;break}}n=g}if(p&&(!u||u.elementStartPos<p.clusterPosition)){let e=this.internalTrack.cuePoints[d-1];h(!e||e.time<p.time);let r=e?.time??-1/0;return this.performClusterLookup(null,t,r,i,a)}return u?this.fetchPacketInCluster(u,c,a):null}},r9=class extends r7{constructor(e){super(e),this.decoderConfigPromise=null,this.internalTrack=e}getCodec(){return this.internalTrack.info.codec}getCodedWidth(){return this.internalTrack.info.width}getCodedHeight(){return this.internalTrack.info.height}getRotation(){return this.internalTrack.info.rotation}async getColorSpace(){return{primaries:this.internalTrack.info.colorSpace?.primaries,transfer:this.internalTrack.info.colorSpace?.transfer,matrix:this.internalTrack.info.colorSpace?.matrix,fullRange:this.internalTrack.info.colorSpace?.fullRange}}async canBeTransparent(){return this.internalTrack.info.alphaMode}async getDecoderConfig(){return this.internalTrack.info.codec?this.decoderConfigPromise??=(async()=>{let e=null;return"vp9"!==this.internalTrack.info.codec&&"av1"!==this.internalTrack.info.codec&&("avc"!==this.internalTrack.info.codec||this.internalTrack.info.codecDescription)&&("hevc"!==this.internalTrack.info.codec||this.internalTrack.info.codecDescription)||(e=await this.getFirstPacket({})),{codec:eB({width:this.internalTrack.info.width,height:this.internalTrack.info.height,codec:this.internalTrack.info.codec,codecDescription:this.internalTrack.info.codecDescription,colorSpace:this.internalTrack.info.colorSpace,avcType:1,avcCodecInfo:"avc"===this.internalTrack.info.codec&&e?tn(e.data):null,hevcCodecInfo:"hevc"===this.internalTrack.info.codec&&e?tf(e.data):null,vp9CodecInfo:"vp9"===this.internalTrack.info.codec&&e?tw(e.data):null,av1CodecInfo:"av1"===this.internalTrack.info.codec&&e?tk(e.data):null}),codedWidth:this.internalTrack.info.width,codedHeight:this.internalTrack.info.height,description:this.internalTrack.info.codecDescription??void 0,colorSpace:this.internalTrack.info.colorSpace??void 0}})():null}},ie=class extends r7{constructor(e){super(e),this.decoderConfig=null,this.internalTrack=e}getCodec(){return this.internalTrack.info.codec}getNumberOfChannels(){return this.internalTrack.info.numberOfChannels}getSampleRate(){return this.internalTrack.info.sampleRate}async getDecoderConfig(){return this.internalTrack.info.codec?this.decoderConfig??={codec:eN({codec:this.internalTrack.info.codec,codecDescription:this.internalTrack.info.codecDescription,aacCodecInfo:this.internalTrack.info.aacCodecInfo}),numberOfChannels:this.internalTrack.info.numberOfChannels,sampleRate:this.internalTrack.info.sampleRate,description:this.internalTrack.info.codecDescription??void 0}:null}},it=[44100,48e3,32e3],ir=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1,-1,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1,-1,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1,-1,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1,-1,32,48,56,64,80,96,112,128,144,160,176,192,224,256,-1],ii=(e,t,r,i,a)=>0===t?0:1===t?Math.floor(144*r/(i<<e))+a:2===t?Math.floor(144*r/i)+a:(Math.floor(12*r/i)+a)*4,ia=(e,t)=>3===e?3===t?21:36:3===t?13:21,io=(e,t)=>{let r,i=e>>>24,a=e>>>16&255,n=e>>>8&255,o=255&e;if(255!==i&&255!==a&&255!==n&&255!==o)return{header:null,bytesAdvanced:4};if(255!==i||(224&a)!=224)return{header:null,bytesAdvanced:1};let s=0,l=0;16&a?s=8&a?0:1:(s=1,l=1);let u=a>>3&3,c=a>>1&3,d=(n>>2&3)%3,p=ir[16*s*4+16*c+(n>>4&15)];if(-1===p)return{header:null,bytesAdvanced:1};let f=1e3*p,h=it[d]>>s+l,m=ii(s,c,f,h,n>>1&1);return null!==t&&t<m?{header:null,bytesAdvanced:1}:(r=3===u?3===c?384:1152:3===c?384:2===c?1152:576,{header:{totalSize:m,mpegVersionId:u,layer:c,bitrate:f,frequencyIndex:d,sampleRate:h,channel:o>>6&3,modeExtension:o>>4&3,copyright:o>>3&1,original:o>>2&1,emphasis:3&o,audioSamplesInFrame:r},bytesAdvanced:1})},is=e=>{let t=0x7f000000,r=0;for(;0!==t;)r>>=1,r|=e&t,t>>=8;return r},il=["Blues","Classic rock","Country","Dance","Disco","Funk","Grunge","Hip-hop","Jazz","Metal","New age","Oldies","Other","Pop","Rhythm and blues","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death metal","Pranks","Soundtrack","Euro-techno","Ambient","Trip-hop","Vocal","Jazz & funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound clip","Gospel","Noise","Alternative rock","Bass","Soul","Punk","Space","Meditative","Instrumental pop","Instrumental rock","Ethnic","Gothic","Darkwave","Techno-industrial","Electronic","Pop-folk","Eurodance","Dream","Southern rock","Comedy","Cult","Gangsta","Top 40","Christian rap","Pop/funk","Jungle music","Native US","Cabaret","New wave","Psychedelic","Rave","Showtunes","Trailer","Lo-fi","Tribal","Acid punk","Acid jazz","Polka","Retro","Musical","Rock 'n' roll","Hard rock","Folk","Folk rock","National folk","Swing","Fast fusion","Bebop","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic rock","Progressive rock","Psychedelic rock","Symphonic rock","Slow rock","Big band","Chorus","Easy listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber music","Sonata","Symphony","Booty bass","Primus","Porn groove","Satire","Slow jam","Club","Tango","Samba","Folklore","Ballad","Power ballad","Rhythmic Soul","Freestyle","Duet","Punk rock","Drum solo","A cappella","Euro-house","Dance hall","Goa music","Drum & bass","Club-house","Hardcore techno","Terror","Indie","Britpop","Negerpunk","Polsk punk","Beat","Christian gangsta rap","Heavy metal","Black metal","Crossover","Contemporary Christian","Christian rock","Merengue","Salsa","Thrash metal","Anime","Jpop","Synthpop","Christmas","Art rock","Baroque","Bhangra","Big beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math rock","New romantic","Nu-breakz","Post-punk","Post-rock","Psytrance","Shoegaze","Space rock","Trop rock","World music","Neoclassical","Audiobook","Audio theatre","Neue Deutsche Welle","Podcast","Indie rock","G-Funk","Dubstep","Garage rock","Psybient"],iu=(e,t)=>{let r=aC(e,t),i=ep(r.indexOf(0),r.length),a=r.subarray(0,i),n="";for(let e=0;e<a.length;e++)n+=String.fromCharCode(a[e]);return n.trimEnd()},ic=e=>{let t=e.filePos,r=a$(e,3),i=aE(e),a=aE(e),n=aE(e),o=aO(e);return"ID3"!==r||255===i||255===a||(0x80808080&o)!=0?(e.filePos=t,null):{majorVersion:i,revision:a,flags:n,size:is(o)}},id=(e,t,r)=>{if(![2,3,4].includes(t.majorVersion))return void console.warn(`Unsupported ID3v2 major version: ${t.majorVersion}`);let i=aC(e,t.size),a=new ip(t,i);if(16&t.flags&&a.removeFooter(),128&t.flags&&3===t.majorVersion&&a.ununsynchronizeAll(),64&t.flags){let e=a.readU32();3===t.majorVersion?a.pos+=e:a.pos+=e-4}for(;a.pos<=a.bytes.length-a.frameHeaderSize();){let e=a.readId3V2Frame();if(!e)break;let i=a.pos,n=a.pos+e.size,o=!1,s=!1,l=!1;if(3===t.majorVersion?(o=!!(64&e.flags),s=!!(128&e.flags)):4===t.majorVersion&&(o=!!(4&e.flags),s=!!(8&e.flags),l=!!(2&e.flags)||!!(128&t.flags)),o){console.warn(`Skipping encrypted ID3v2 frame ${e.id}`),a.pos=n;continue}if(s){console.warn(`Skipping compressed ID3v2 frame ${e.id}`),a.pos=n;continue}switch(l&&a.ununsynchronizeRegion(a.pos,n),r.raw??={},"T"===e.id[0]?r.raw[e.id]??=a.readId3V2EncodingAndText(n):r.raw[e.id]??=a.readBytes(e.size),a.pos=i,e.id){case"TIT2":case"TT2":r.title??=a.readId3V2EncodingAndText(n);break;case"TIT3":case"TT3":r.description??=a.readId3V2EncodingAndText(n);break;case"TPE1":case"TP1":r.artist??=a.readId3V2EncodingAndText(n);break;case"TALB":case"TAL":r.album??=a.readId3V2EncodingAndText(n);break;case"TPE2":case"TP2":r.albumArtist??=a.readId3V2EncodingAndText(n);break;case"TRCK":case"TRK":{let e=a.readId3V2EncodingAndText(n).split("/"),t=Number.parseInt(e[0],10),i=e[1]&&Number.parseInt(e[1],10);Number.isInteger(t)&&t>0&&(r.trackNumber??=t),i&&Number.isInteger(i)&&i>0&&(r.tracksTotal??=i)}break;case"TPOS":case"TPA":{let e=a.readId3V2EncodingAndText(n).split("/"),t=Number.parseInt(e[0],10),i=e[1]&&Number.parseInt(e[1],10);Number.isInteger(t)&&t>0&&(r.discNumber??=t),i&&Number.isInteger(i)&&i>0&&(r.discsTotal??=i)}break;case"TCON":case"TCO":{let e=a.readId3V2EncodingAndText(n),t=/^\((\d+)\)/.exec(e);if(t){let e=Number.parseInt(t[1]);if(void 0!==il[e]){r.genre??=il[e];break}}if(t=/^\d+$/.exec(e)){let e=Number.parseInt(t[0]);if(void 0!==il[e]){r.genre??=il[e];break}}r.genre??=e}break;case"TDRC":case"TDAT":{let e=new Date(a.readId3V2EncodingAndText(n));Number.isNaN(e.getTime())||(r.date??=e)}break;case"TYER":case"TYE":{let e=Number.parseInt(a.readId3V2EncodingAndText(n),10);Number.isInteger(e)&&(r.date??=new Date(e,0,1))}break;case"USLT":case"ULT":{let e=a.readU8();a.pos+=3,a.readId3V2Text(e,n),r.lyrics??=a.readId3V2Text(e,n)}break;case"COMM":case"COM":{let e=a.readU8();a.pos+=3,a.readId3V2Text(e,n),r.comment??=a.readId3V2Text(e,n)}break;case"APIC":case"PIC":{let e,i=a.readId3V2TextEncoding();if(2===t.majorVersion){let t=a.readAscii(3);e="PNG"===t?"image/png":"JPG"===t?"image/jpeg":"image/*"}else e=a.readId3V2Text(i,n);let o=a.readU8(),s=a.readId3V2Text(i,n).trimEnd(),l=n-a.pos;if(l>=0){let t=a.readBytes(l);r.images||(r.images=[]),r.images.push({data:t,mimeType:e,kind:3===o?"coverFront":4===o?"coverBack":"unknown",description:s})}}break;default:a.pos+=e.size}a.pos=n}},ip=class{constructor(e,t){this.header=e,this.bytes=t,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength)}frameHeaderSize(){return 2===this.header.majorVersion?6:10}ununsynchronizeAll(){let e=[];for(let t=0;t<this.bytes.length;t++){let r=this.bytes[t];e.push(r),255===r&&t!==this.bytes.length-1&&0===this.bytes[t]&&t++}this.bytes=new Uint8Array(e),this.view=new DataView(this.bytes.buffer)}ununsynchronizeRegion(e,t){let r=[];for(let i=e;i<t;i++){let e=this.bytes[i];r.push(e),255===e&&i!==t-1&&0===this.bytes[i+1]&&i++}let i=this.bytes.subarray(0,e),a=this.bytes.subarray(t);this.bytes=new Uint8Array(i.length+r.length+a.length),this.bytes.set(i,0),this.bytes.set(r,i.length),this.bytes.set(a,i.length+r.length),this.view=new DataView(this.bytes.buffer)}removeFooter(){this.bytes=this.bytes.subarray(0,this.bytes.length-10),this.view=new DataView(this.bytes.buffer)}readBytes(e){let t=this.bytes.subarray(this.pos,this.pos+e);return this.pos+=e,t}readU8(){let e=this.view.getUint8(this.pos);return this.pos+=1,e}readU16(){let e=this.view.getUint16(this.pos,!1);return this.pos+=2,e}readU24(){let e=this.view.getUint16(this.pos,!1),t=this.view.getUint8(this.pos+1);return this.pos+=3,256*e+t}readU32(){let e=this.view.getUint32(this.pos,!1);return this.pos+=4,e}readAscii(e){let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(this.view.getUint8(this.pos+r));return this.pos+=e,t}readId3V2Frame(){if(2===this.header.majorVersion){let e=this.readAscii(3);return"\0\0\0"===e?null:{id:e,size:this.readU24(),flags:0}}{let e=this.readAscii(4);if("\0\0\0\0"===e)return null;let t=this.readU32(),r=4===this.header.majorVersion?is(t):t,i=this.readU16(),a=this.pos,n=e=>{let t=this.pos+e;if(t>this.bytes.length)return!1;if(t<=this.bytes.length-this.frameHeaderSize()){this.pos+=e;let t=this.readAscii(4);if("\0\0\0\0"!==t&&!/[0-9A-Z]{4}/.test(t))return!1}return!0};if(!n(r)){let e=4===this.header.majorVersion?t:is(t);n(e)&&(r=e)}return this.pos=a,{id:e,size:r,flags:i}}}readId3V2TextEncoding(){let e=this.readU8();if(e>3)throw Error(`Unsupported text encoding: ${e}`);return e}readId3V2Text(e,t){let r=this.pos,i=this.readBytes(t-this.pos);switch(e){case 0:{let e="";for(let t=0;t<i.length;t++){let a=i[t];if(0===a){this.pos=r+t+1;break}e+=String.fromCharCode(a)}return e}case 1:if(255===i[0]&&254===i[1]){let e=new TextDecoder("utf-16le"),t=ep(i.findIndex((e,t)=>0===e&&0===i[t+1]&&t%2==0),i.length);return this.pos=r+Math.min(t+2,i.length),e.decode(i.subarray(2,t))}if(254===i[0]&&255===i[1]){let e=new TextDecoder("utf-16be"),t=ep(i.findIndex((e,t)=>0===e&&0===i[t+1]&&t%2==0),i.length);return this.pos=r+Math.min(t+2,i.length),e.decode(i.subarray(2,t))}{let e=ep(i.findIndex(e=>0===e),i.length);return this.pos=r+Math.min(e+1,i.length),k.decode(i.subarray(0,e))}case 2:{let e=new TextDecoder("utf-16be"),t=ep(i.findIndex((e,t)=>0===e&&0===i[t+1]&&t%2==0),i.length);return this.pos=r+Math.min(t+2,i.length),e.decode(i.subarray(0,t))}case 3:{let e=ep(i.findIndex(e=>0===e),i.length);return this.pos=r+Math.min(e+1,i.length),k.decode(i.subarray(0,e))}}}readId3V2EncodingAndText(e){if(this.pos>=e)return"";let t=this.readId3V2TextEncoding();return this.readId3V2Text(t,e)}},ih=class{constructor(e){this.helper=new Uint8Array(8),this.helperView=S(this.helper),this.writer=e}writeId3V2Tag(e){let t=this.writer.getPos();this.writeAscii("ID3"),this.writeU8(4),this.writeU8(0),this.writeU8(0),this.writeSynchsafeU32(0);let r=this.writer.getPos(),i=new Set;for(let{key:t,value:r}of eh(e))switch(t){case"title":this.writeId3V2TextFrame("TIT2",r),i.add("TIT2");break;case"description":this.writeId3V2TextFrame("TIT3",r),i.add("TIT3");break;case"artist":this.writeId3V2TextFrame("TPE1",r),i.add("TPE1");break;case"album":this.writeId3V2TextFrame("TALB",r),i.add("TALB");break;case"albumArtist":this.writeId3V2TextFrame("TPE2",r),i.add("TPE2");break;case"trackNumber":{let t=void 0!==e.tracksTotal?`${r}/${e.tracksTotal}`:r.toString();this.writeId3V2TextFrame("TRCK",t),i.add("TRCK")}break;case"discNumber":{let t=void 0!==e.discsTotal?`${r}/${e.discsTotal}`:r.toString();this.writeId3V2TextFrame("TPOS",t),i.add("TPOS")}break;case"genre":this.writeId3V2TextFrame("TCON",r),i.add("TCON");break;case"date":this.writeId3V2TextFrame("TDRC",r.toISOString().slice(0,10)),i.add("TDRC");break;case"lyrics":this.writeId3V2LyricsFrame(r),i.add("USLT");break;case"comment":this.writeId3V2CommentFrame(r),i.add("COMM");break;case"images":{let e={coverFront:3,coverBack:4,unknown:0};for(let t of r){let r=e[t.kind]??0,i=t.description??"";this.writeId3V2ApicFrame(t.mimeType,r,i,t.data)}}break;case"tracksTotal":case"discsTotal":case"raw":break;default:W(t)}if(e.raw)for(let t in e.raw){let r,a=e.raw[t];if(!(null==a||4!==t.length||i.has(t))){if("string"==typeof a){let e=C.encode(a);(r=new Uint8Array(e.byteLength+2))[0]=3,r.set(e,1)}else{if(!(a instanceof Uint8Array))continue;r=a}this.writeAscii(t),this.writeSynchsafeU32(r.byteLength),this.writeU16(0),this.writer.write(r)}}let a=this.writer.getPos(),n=a-r;return this.writer.seek(t+6),this.writeSynchsafeU32(n),this.writer.seek(a),n+10}writeU8(e){this.helper[0]=e,this.writer.write(this.helper.subarray(0,1))}writeU16(e){this.helperView.setUint16(0,e,!1),this.writer.write(this.helper.subarray(0,2))}writeU32(e){this.helperView.setUint32(0,e,!1),this.writer.write(this.helper.subarray(0,4))}writeAscii(e){for(let t=0;t<e.length;t++)this.helper[t]=e.charCodeAt(t);this.writer.write(this.helper.subarray(0,e.length))}writeSynchsafeU32(e){this.writeU32((e=>{let t=127,r=0,i=e;for(;(0x7fffffff^t)!=0;)r=(i&~t)<<1|i&t,t=(t+1<<8)-1,i=r;return r})(e))}writeIsoString(e){let t=new Uint8Array(e.length+1);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);t[e.length]=0,this.writer.write(t)}writeUtf8String(e){let t=C.encode(e);this.writer.write(t),this.writeU8(0)}writeId3V2TextFrame(e,t){let r=E(t),i=r?t.length:C.encode(t).byteLength;this.writeAscii(e),this.writeSynchsafeU32(1+i+1),this.writeU16(0),this.writeU8(3*!r),r?this.writeIsoString(t):this.writeUtf8String(t)}writeId3V2LyricsFrame(e){let t=E(e),r=5+e.length+1;this.writeAscii("USLT"),this.writeSynchsafeU32(r),this.writeU16(0),this.writeU8(3*!t),this.writeAscii("und"),t?(this.writeIsoString(""),this.writeIsoString(e)):(this.writeUtf8String(""),this.writeUtf8String(e))}writeId3V2CommentFrame(e){let t=E(e),r=t?e.length:C.encode(e).byteLength;this.writeAscii("COMM"),this.writeSynchsafeU32(5+r+1),this.writeU16(0),this.writeU8(3*!t),this.writeU8(117),this.writeU8(110),this.writeU8(100),t?(this.writeIsoString(""),this.writeIsoString(e)):(this.writeUtf8String(""),this.writeUtf8String(e))}writeId3V2ApicFrame(e,t,r,i){let a=E(e)&&E(r),n=a?r.length:C.encode(r).byteLength,o=1+e.length+1+1+n+1+i.byteLength;this.writeAscii("APIC"),this.writeSynchsafeU32(o),this.writeU16(0),this.writeU8(3*!a),a?this.writeIsoString(e):this.writeUtf8String(e),this.writeU8(t),a?this.writeIsoString(r):this.writeUtf8String(r),this.writer.write(i)}},im=async(e,t,r)=>{let i=t;for(;null===r||i<r;){let t=e.requestSlice(i,4);if(t instanceof Promise&&(t=await t),!t)break;let r=io(aO(t),null!==e.fileSize?e.fileSize-i:null);if(r.header)return{header:r.header,startPos:i};i+=r.bytesAdvanced}return null},ig=class extends tA{constructor(e){super(e),this.metadataPromise=null,this.firstFrameHeader=null,this.loadedSamples=[],this.metadataTags=null,this.tracks=[],this.readingMutex=new D,this.lastSampleLoaded=!1,this.lastLoadedPos=0,this.nextTimestampInSamples=0,this.reader=e._reader}async readMetadata(){return this.metadataPromise??=(async()=>{for(;!this.firstFrameHeader&&!this.lastSampleLoaded;)await this.advanceReader();if(!this.firstFrameHeader)throw Error("No valid MP3 frame found.");this.tracks=[new rv(this.input,new iv(this))]})()}async advanceReader(){if(0===this.lastLoadedPos)for(;;){let e=this.reader.requestSlice(this.lastLoadedPos,10);if(e instanceof Promise&&(e=await e),!e){this.lastSampleLoaded=!0;return}let t=ic(e);if(!t)break;this.lastLoadedPos=e.filePos+t.size}let e=await im(this.reader,this.lastLoadedPos,this.reader.fileSize);if(!e){this.lastSampleLoaded=!0;return}let t=e.header;this.lastLoadedPos=e.startPos+t.totalSize-1;let r=ia(t.mpegVersionId,t.channel),i=this.reader.requestSlice(e.startPos+r,4);if(i instanceof Promise&&(i=await i),i){let e=aO(i);if(0x58696e67===e||0x496e666f===e)return}this.firstFrameHeader||(this.firstFrameHeader=t),t.sampleRate!==this.firstFrameHeader.sampleRate&&console.warn(`MP3 changed sample rate mid-file: ${this.firstFrameHeader.sampleRate} Hz to ${t.sampleRate} Hz. Might be a bug, so please report this file.`);let a=t.audioSamplesInFrame/this.firstFrameHeader.sampleRate,n={timestamp:this.nextTimestampInSamples/this.firstFrameHeader.sampleRate,duration:a,dataStart:e.startPos,dataSize:t.totalSize};this.loadedSamples.push(n),this.nextTimestampInSamples+=t.audioSamplesInFrame}async getMimeType(){return"audio/mpeg"}async getTracks(){return await this.readMetadata(),this.tracks}async computeDuration(){await this.readMetadata();let e=this.tracks[0];return h(e),e.computeDuration()}async getMetadataTags(){let e=await this.readingMutex.acquire();try{if(await this.readMetadata(),this.metadataTags)return this.metadataTags;this.metadataTags={};let e=0,t=!1;for(;;){let r=this.reader.requestSlice(e,10);if(r instanceof Promise&&(r=await r),!r)break;let i=ic(r);if(!i)break;t=!0;let a=this.reader.requestSlice(r.filePos,i.size);if(a instanceof Promise&&(a=await a),!a)break;id(a,i,this.metadataTags),e=r.filePos+i.size}if(!t&&null!==this.reader.fileSize&&this.reader.fileSize>=128){let e=this.reader.requestSlice(this.reader.fileSize-128,128);e instanceof Promise&&(e=await e),h(e);let t=a$(e,3);"TAG"===t&&((e,t)=>{let r,i=e.filePos;t.raw??={},t.raw.TAG??=aC(e,125),e.filePos=i;let a=iu(e,30);a&&(t.title??=a);let n=iu(e,30);n&&(t.artist??=n);let o=iu(e,30);o&&(t.album??=o);let s=Number.parseInt(iu(e,4),10);Number.isInteger(s)&&s>0&&(t.date??=new Date(s,0,1));let l=aC(e,30);if(0===l[28]&&0!==l[29]){let i=l[29];i>0&&(t.trackNumber??=i),e.skip(-30),r=iu(e,28),e.skip(2)}else e.skip(-30),r=iu(e,30);r&&(t.comment??=r);let u=aE(e);u<il.length&&(t.genre??=il[u])})(e,this.metadataTags)}return this.metadataTags}finally{e()}}},iv=class{constructor(e){this.demuxer=e}getId(){return 1}async getFirstTimestamp(){return 0}getTimeResolution(){return h(this.demuxer.firstFrameHeader),this.demuxer.firstFrameHeader.sampleRate/this.demuxer.firstFrameHeader.audioSamplesInFrame}async computeDuration(){let e=await this.getPacket(1/0,{metadataOnly:!0});return(e?.timestamp??0)+(e?.duration??0)}getName(){return null}getLanguageCode(){return"und"}getCodec(){return"mp3"}getInternalCodecId(){return null}getNumberOfChannels(){return h(this.demuxer.firstFrameHeader),3===this.demuxer.firstFrameHeader.channel?1:2}getSampleRate(){return h(this.demuxer.firstFrameHeader),this.demuxer.firstFrameHeader.sampleRate}getDisposition(){return{...eE}}async getDecoderConfig(){return h(this.demuxer.firstFrameHeader),{codec:"mp3",numberOfChannels:3===this.demuxer.firstFrameHeader.channel?1:2,sampleRate:this.demuxer.firstFrameHeader.sampleRate}}async getPacketAtIndex(e,t){let r;if(-1===e)return null;let i=this.demuxer.loadedSamples[e];if(!i)return null;if(t.metadataOnly)r=tz;else{let e=this.demuxer.reader.requestSlice(i.dataStart,i.dataSize);if(e instanceof Promise&&(e=await e),!e)return null;r=aC(e,i.dataSize)}return new tU(r,"key",i.timestamp,i.duration,e,i.dataSize)}getFirstPacket(e){return this.getPacketAtIndex(0,e)}async getNextPacket(e,t){let r=await this.demuxer.readingMutex.acquire();try{let r=B(this.demuxer.loadedSamples,e.timestamp,e=>e.timestamp);if(-1===r)throw Error("Packet was not created from this track.");let i=r+1;for(;i>=this.demuxer.loadedSamples.length&&!this.demuxer.lastSampleLoaded;)await this.demuxer.advanceReader();return this.getPacketAtIndex(i,t)}finally{r()}}async getPacket(e,t){let r=await this.demuxer.readingMutex.acquire();try{for(;;){let r=N(this.demuxer.loadedSamples,e,e=>e.timestamp);if(-1===r&&this.demuxer.loadedSamples.length>0)return null;if(this.demuxer.lastSampleLoaded||r>=0&&r+1<this.demuxer.loadedSamples.length)return this.getPacketAtIndex(r,t);await this.demuxer.advanceReader()}}finally{r()}}getKeyPacket(e,t){return this.getPacket(e,t)}getNextKeyPacket(e,t){return this.getNextPacket(e,t)}},iy=new Uint32Array(256);for(let e=0;e<256;e++){let t=e<<24;for(let e=0;e<8;e++)t=0x80000000&t?t<<1^0x4c11db7:t<<1;iy[e]=t>>>0}var ib=e=>{let t=S(e),r=t.getUint32(22,!0);t.setUint32(22,0,!0);let i=0;for(let t=0;t<e.length;t++)i=(i<<8^iy[i>>>24^e[t]])>>>0;return t.setUint32(22,r,!0),i},ix=(e,t,r)=>{let i=0,a=null;if(e.length>0)if("vorbis"===t.codec){h(t.vorbisInfo);let n=(1<<(e=>{let t=0;for(;e;)t++,e>>=1;return t})(t.vorbisInfo.modeBlockflags.length-1))-1<<1,o=(e[0]&n)>>1;if(o>=t.vorbisInfo.modeBlockflags.length)throw Error("Invalid mode number.");let s=r,l=t.vorbisInfo.modeBlockflags[o];if(a=t.vorbisInfo.blocksizes[l],1===l){let r=e[0]&(1|n)+1?1:0;s=t.vorbisInfo.blocksizes[r]}i=null!==s?s+a>>2:0}else"opus"===t.codec&&(i=({durationInSamples:tE[e[0]>>3]}).durationInSamples);return{durationInSamples:i,vorbisBlockSize:a}},iw=e=>{let t="audio/ogg";if(e.codecStrings){let r=[...new Set(e.codecStrings)];t+=`; codecs="${r.join(", ")}"`}return t},iS=e=>{let t=e.filePos;if(0x5367674f!==aM(e))return null;e.skip(1);let r=aE(e),i=aL(e),a=aM(e),n=aM(e),o=aM(e),s=aE(e),l=new Uint8Array(s);for(let t=0;t<s;t++)l[t]=aE(e);let u=27+s,c=l.reduce((e,t)=>e+t,0);return{headerStartPos:t,totalSize:u+c,dataStartPos:t+u,dataSize:c,headerType:r,granulePosition:i,serialNumber:a,sequenceNumber:n,checksum:o,lacingValues:l}},ik=(e,t)=>{for(;e.filePos<t-3;){let t=aM(e),r=255&t,i=t>>>8&255,a=t>>>16&255,n=t>>>24&255;if(79===r||79===i||79===a||79===n){if(e.skip(-4),0x5367674f===t)return!0;e.skip(1)}}return!1},iC=class extends tA{constructor(e){super(e),this.metadataPromise=null,this.bitstreams=[],this.tracks=[],this.metadataTags={},this.reader=e._reader}async readMetadata(){return this.metadataPromise??=(async()=>{let e=0;for(;;){let t=this.reader.requestSliceRange(e,27,282);if(t instanceof Promise&&(t=await t),!t)break;let r=iS(t);if(!r||!(2&r.headerType))break;this.bitstreams.push({serialNumber:r.serialNumber,bosPage:r,description:null,numberOfChannels:-1,sampleRate:-1,codecInfo:{codec:null,vorbisInfo:null,opusInfo:null},lastMetadataPacket:null}),e=r.headerStartPos+r.totalSize}for(let e of this.bitstreams){let t=await this.readPacket(e.bosPage,0);t&&(t.data.byteLength>=7&&1===t.data[0]&&118===t.data[1]&&111===t.data[2]&&114===t.data[3]&&98===t.data[4]&&105===t.data[5]&&115===t.data[6]?await this.readVorbisMetadata(t,e):t.data.byteLength>=8&&79===t.data[0]&&112===t.data[1]&&117===t.data[2]&&115===t.data[3]&&72===t.data[4]&&101===t.data[5]&&97===t.data[6]&&100===t.data[7]&&await this.readOpusMetadata(t,e),null!==e.codecInfo.codec&&this.tracks.push(new rv(this.input,new iE(e,this))))}})()}async readVorbisMetadata(e,t){let r=await this.findNextPacketStart(e);if(!r)return;let i=await this.readPacket(r.startPage,r.startSegmentIndex);if(!i||!(r=await this.findNextPacketStart(i)))return;let a=await this.readPacket(r.startPage,r.startSegmentIndex);if(!a||3!==i.data[0]||5!==a.data[0])return;let n=[],o=e=>{for(;n.push(Math.min(255,e)),!(e<255);)e-=255};o(e.data.length),o(i.data.length);let s=new Uint8Array(1+n.length+e.data.length+i.data.length+a.data.length);s[0]=2,s.set(n,1),s.set(e.data,1+n.length),s.set(i.data,1+n.length+e.data.length),s.set(a.data,1+n.length+e.data.length+i.data.length),t.codecInfo.codec="vorbis",t.description=s,t.lastMetadataPacket=a;let l=S(e.data);t.numberOfChannels=l.getUint8(11),t.sampleRate=l.getUint32(12,!0);let u=l.getUint8(28);t.codecInfo.vorbisInfo={blocksizes:[1<<(15&u),1<<(u>>4)],modeBlockflags:t_(a.data).modeBlockflags},tP(i.data.subarray(7),this.metadataTags)}async readOpusMetadata(e,t){let r=await this.findNextPacketStart(e);if(!r)return;let i=await this.readPacket(r.startPage,r.startSegmentIndex);if(!i)return;t.codecInfo.codec="opus",t.description=e.data,t.lastMetadataPacket=i;let a=tC(e.data);t.numberOfChannels=a.outputChannelCount,t.sampleRate=48e3,t.codecInfo.opusInfo={preSkip:a.preSkip},tP(i.data.subarray(8),this.metadataTags)}async readPacket(e,t){h(t<e.lacingValues.length);let r=0;for(let i=0;i<t;i++)r+=e.lacingValues[i];let i=e,a=r,n=t,o=[];i:for(;;){let t=this.reader.requestSlice(i.dataStartPos,i.dataSize);t instanceof Promise&&(t=await t),h(t);let s=aC(t,i.dataSize);for(;;){if(n===i.lacingValues.length){o.push(s.subarray(r,a));break}let e=i.lacingValues[n];if(a+=e,e<255){o.push(s.subarray(r,a));break i}n++}let l=i.headerStartPos+i.totalSize;for(;;){let t=this.reader.requestSliceRange(l,27,282);if(t instanceof Promise&&(t=await t),!t)return null;let r=iS(t);if(!r)return null;if((i=r).serialNumber===e.serialNumber)break;l=i.headerStartPos+i.totalSize}r=0,a=0,n=0}let s=o.reduce((e,t)=>e+t.length,0);if(0===s)return null;let l=new Uint8Array(s),u=0;for(let e=0;e<o.length;e++){let t=o[e];l.set(t,u),u+=t.length}return{data:l,endPage:i,endSegmentIndex:n}}async findNextPacketStart(e){if(e.endSegmentIndex<e.endPage.lacingValues.length-1)return{startPage:e.endPage,startSegmentIndex:e.endSegmentIndex+1};if(4&e.endPage.headerType)return null;let t=e.endPage.headerStartPos+e.endPage.totalSize;for(;;){let r=this.reader.requestSliceRange(t,27,282);if(r instanceof Promise&&(r=await r),!r)return null;let i=iS(r);if(!i)return null;if(i.serialNumber===e.endPage.serialNumber)return{startPage:i,startSegmentIndex:0};t=i.headerStartPos+i.totalSize}}async getMimeType(){return await this.readMetadata(),iw({codecStrings:(await Promise.all(this.tracks.map(e=>e.getCodecParameterString()))).filter(Boolean)})}async getTracks(){return await this.readMetadata(),this.tracks}async computeDuration(){let e=await this.getTracks();return Math.max(0,...await Promise.all(e.map(e=>e.computeDuration())))}async getMetadataTags(){return await this.readMetadata(),this.metadataTags}},iE=class{constructor(e,t){this.bitstream=e,this.demuxer=t,this.encodedPacketToMetadata=new WeakMap,this.sequentialScanCache=[],this.sequentialScanMutex=new D,this.internalSampleRate="opus"===e.codecInfo.codec?48e3:e.sampleRate}getId(){return this.bitstream.serialNumber}getNumberOfChannels(){return this.bitstream.numberOfChannels}getSampleRate(){return this.bitstream.sampleRate}getTimeResolution(){return this.bitstream.sampleRate}getCodec(){return this.bitstream.codecInfo.codec}getInternalCodecId(){return null}async getDecoderConfig(){return h(this.bitstream.codecInfo.codec),{codec:this.bitstream.codecInfo.codec,numberOfChannels:this.bitstream.numberOfChannels,sampleRate:this.bitstream.sampleRate,description:this.bitstream.description??void 0}}getName(){return null}getLanguageCode(){return"und"}getDisposition(){return{...eE}}async getFirstTimestamp(){return 0}async computeDuration(){let e=await this.getPacket(1/0,{metadataOnly:!0});return(e?.timestamp??0)+(e?.duration??0)}granulePositionToTimestampInSamples(e){return"opus"===this.bitstream.codecInfo.codec?(h(this.bitstream.codecInfo.opusInfo),e-this.bitstream.codecInfo.opusInfo.preSkip):e}createEncodedPacketFromOggPacket(e,t,r){if(!e)return null;let{durationInSamples:i,vorbisBlockSize:a}=ix(e.data,this.bitstream.codecInfo,t.vorbisLastBlocksize),n=new tU(r.metadataOnly?tz:e.data,"key",Math.max(0,t.timestampInSamples)/this.internalSampleRate,i/this.internalSampleRate,e.endPage.headerStartPos+e.endSegmentIndex,e.data.byteLength);return this.encodedPacketToMetadata.set(n,{packet:e,timestampInSamples:t.timestampInSamples,durationInSamples:i,vorbisLastBlockSize:t.vorbisLastBlocksize,vorbisBlockSize:a}),n}async getFirstPacket(e){h(this.bitstream.lastMetadataPacket);let t=await this.demuxer.findNextPacketStart(this.bitstream.lastMetadataPacket);if(!t)return null;let r=0;"opus"===this.bitstream.codecInfo.codec&&(h(this.bitstream.codecInfo.opusInfo),r-=this.bitstream.codecInfo.opusInfo.preSkip);let i=await this.demuxer.readPacket(t.startPage,t.startSegmentIndex);return this.createEncodedPacketFromOggPacket(i,{timestampInSamples:r,vorbisLastBlocksize:null},e)}async getNextPacket(e,t){let r=this.encodedPacketToMetadata.get(e);if(!r)throw Error("Packet was not created from this track.");let i=await this.demuxer.findNextPacketStart(r.packet);if(!i)return null;let a=r.timestampInSamples+r.durationInSamples,n=await this.demuxer.readPacket(i.startPage,i.startSegmentIndex);return this.createEncodedPacketFromOggPacket(n,{timestampInSamples:a,vorbisLastBlocksize:r.vorbisBlockSize},t)}async getPacket(e,t){let r,i;if(null===this.demuxer.reader.fileSize)return this.getPacketSequential(e,t);let a=Q(e*this.internalSampleRate);if(0===a)return this.getFirstPacket(t);if(a<0)return null;h(this.bitstream.lastMetadataPacket);let n=await this.demuxer.findNextPacketStart(this.bitstream.lastMetadataPacket);if(!n)return null;let o=n.startPage,s=this.demuxer.reader.fileSize,l=[o];i:for(;o.headerStartPos+o.totalSize<s;){let e=Math.floor((o.headerStartPos+s)/2),t=e;for(;;){let r=Math.min(t+65307,s-27),i=this.demuxer.reader.requestSlice(t,r-t);if(i instanceof Promise&&(i=await i),h(i),!ik(i,r)){s=e+27;continue i}let n=this.demuxer.reader.requestSliceRange(i.filePos,27,282);n instanceof Promise&&(n=await n),h(n);let u=iS(n);h(u);let c=!1;if(u.serialNumber===this.bitstream.serialNumber)c=!0;else{let e=this.demuxer.reader.requestSlice(u.headerStartPos,u.totalSize);e instanceof Promise&&(e=await e),h(e),c=ib(aC(e,u.totalSize))===u.checksum}if(!c){t=u.headerStartPos+4;continue}if(c&&u.serialNumber!==this.bitstream.serialNumber||-1===u.granulePosition){t=u.headerStartPos+u.totalSize;continue}this.granulePositionToTimestampInSamples(u.granulePosition)>a?s=u.headerStartPos:(o=u,l.push(u));continue i}}let u=n.startPage;for(let e of l){if(e.granulePosition===o.granulePosition)break;(!u||e.headerStartPos>u.headerStartPos)&&(u=e)}let c=u,d=[c];for(;c.serialNumber!==this.bitstream.serialNumber||c.granulePosition!==o.granulePosition;){let e=c.headerStartPos+c.totalSize,t=this.demuxer.reader.requestSliceRange(e,27,282);t instanceof Promise&&(t=await t),h(t);let r=iS(t);h(r),(c=r).serialNumber===this.bitstream.serialNumber&&d.push(c)}h(-1!==c.granulePosition);let p=null,f=c,m=0;if(c.headerStartPos===n.startPage.headerStartPos)r=this.granulePositionToTimestampInSamples(0),i=!0,p=0;else{r=0,i=!1;for(let e=c.lacingValues.length-1;e>=0;e--)if(c.lacingValues[e]<255){p=e+1;break}if(null===p)throw Error("Invalid page with granule position: no packets end on this page.");let e={data:tz,endPage:f,endSegmentIndex:m=p-1};if(await this.demuxer.findNextPacketStart(e)){let e=iT(d,c,p);h(e);let t=i_(d,e.page,e.segmentIndex);t&&(c=t.page,p=t.segmentIndex)}else for(;;){let e=iT(d,c,p);if(!e)break;let t=i_(d,e.page,e.segmentIndex);if(!t)break;if(c=t.page,p=t.segmentIndex,e.page.headerStartPos!==f.headerStartPos){f=e.page,m=e.segmentIndex;break}}}let g=null,v=null;for(;null!==c;){h(null!==p);let e=await this.demuxer.readPacket(c,p);if(!e)break;if(!(c.headerStartPos===n.startPage.headerStartPos&&p<n.startSegmentIndex)){let n=this.createEncodedPacketFromOggPacket(e,{timestampInSamples:r,vorbisLastBlocksize:v?.vorbisBlockSize??null},t);h(n);let o=this.encodedPacketToMetadata.get(n);if(h(o),i||e.endPage.headerStartPos!==f.headerStartPos||e.endSegmentIndex!==m?r+=o.durationInSamples:(r=this.granulePositionToTimestampInSamples(c.granulePosition),i=!0,h(n=this.createEncodedPacketFromOggPacket(e,{timestampInSamples:r-o.durationInSamples,vorbisLastBlocksize:v?.vorbisBlockSize??null},t)),h(o=this.encodedPacketToMetadata.get(n))),g=n,v=o,i&&(Math.max(r,0)>a||Math.max(o.timestampInSamples,0)===a))break}let o=await this.demuxer.findNextPacketStart(e);if(!o)break;c=o.startPage,p=o.startSegmentIndex}return g}async getPacketSequential(e,t){let r=await this.sequentialScanMutex.acquire();try{let r,i=Q(e*this.internalSampleRate);e=i/this.internalSampleRate;let a=N(this.sequentialScanCache,i,e=>e.timestampInSamples);if(-1!==a){let e=this.sequentialScanCache[a];r=this.createEncodedPacketFromOggPacket(e.packet,{timestampInSamples:e.timestampInSamples,vorbisLastBlocksize:e.vorbisLastBlockSize},t)}else r=await this.getFirstPacket(t);let n=0;for(;r&&r.timestamp<e;){let i=await this.getNextPacket(r,t);if(!i||i.timestamp>e)break;if(r=i,n++,100===n){n=0;let e=this.encodedPacketToMetadata.get(r);h(e),this.sequentialScanCache.length>0&&h(g(this.sequentialScanCache).timestampInSamples<=e.timestampInSamples),this.sequentialScanCache.push(e)}}return r}finally{r()}}getKeyPacket(e,t){return this.getPacket(e,t)}getNextKeyPacket(e,t){return this.getNextPacket(e,t)}},i_=(e,t,r)=>{let i=t,a=r;i:for(;;){for(a--;a>=0;a--)if(i.lacingValues[a]<255){a++;break i}if(h(-1===a),!(1&i.headerType)){a=0;break}let t=U(e,e=>e.headerStartPos<i.headerStartPos);if(!t)return null;a=(i=t).lacingValues.length}if(h(-1!==a),a===i.lacingValues.length){let t=e[e.indexOf(i)+1];h(t),i=t,a=0}return{page:i,segmentIndex:a}},iT=(e,t,r)=>{if(r>0)return{page:t,segmentIndex:r-1};let i=U(e,e=>e.headerStartPos<t.headerStartPos);return i?{page:i,segmentIndex:i.lacingValues.length-1}:null},iP=class extends tA{constructor(e){super(e),this.metadataPromise=null,this.dataStart=-1,this.dataSize=-1,this.audioInfo=null,this.tracks=[],this.lastKnownPacketIndex=0,this.metadataTags={},this.reader=e._reader}async readMetadata(){return this.metadataPromise??=(async()=>{let e=this.reader.requestSlice(0,12);e instanceof Promise&&(e=await e),h(e);let t=a$(e,4),r="RIFX"!==t,i="RF64"===t,a=aA(e,r),n=i?this.reader.fileSize:Math.min(a+8,this.reader.fileSize??1/0);if("WAVE"!==a$(e,4))throw Error("Invalid WAVE file - wrong format");let o=0,s=null,l=e.filePos;for(;null===n||l<n;){let e=this.reader.requestSlice(l,8);if(e instanceof Promise&&(e=await e),!e)break;let t=a$(e,4),a=aA(e,r),u=e.filePos;if(i&&0===o&&"ds64"!==t)throw Error('Invalid RF64 file: First chunk must be "ds64".');if("fmt "===t)await this.parseFmtChunk(u,a,r);else if("data"===t){if(s??=a,this.dataStart=e.filePos,this.dataSize=Math.min(s,(n??1/0)-this.dataStart),null===this.reader.fileSize)break}else if("ds64"===t){let e=this.reader.requestSlice(u,a);if(e instanceof Promise&&(e=await e),!e)break;let t=aR(e,r);s=aR(e,r),n=Math.min(t+8,this.reader.fileSize??1/0)}else"LIST"===t?await this.parseListChunk(u,a,r):("ID3 "===t||"id3 "===t)&&await this.parseId3Chunk(u,a);l=u+a+(1&a),o++}if(!this.audioInfo)throw Error('Invalid WAVE file - missing "fmt " chunk');if(-1===this.dataStart)throw Error('Invalid WAVE file - missing "data" chunk');let u=this.audioInfo.blockSizeInBytes;this.dataSize=Math.floor(this.dataSize/u)*u,this.tracks.push(new rv(this.input,new iI(this)))})()}async parseFmtChunk(e,t,r){let i,a=this.reader.requestSlice(e,t);if(a instanceof Promise&&(a=await a),!a)return;let n=a_(a,r),o=a_(a,r),s=aA(a,r);a.skip(4);let l=a_(a,r);if((i=14===t?8:a_(a,r),t>=18&&357!==n)&&Math.min(t-18,a_(a,r))>=22&&65534===n){a.skip(6);let e=aC(a,16);n=e[0]|e[1]<<8}(7===n||6===n)&&(i=8),this.audioInfo={format:n,numberOfChannels:o,sampleRate:s,sampleSizeInBytes:Math.ceil(i/8),blockSizeInBytes:l}}async parseListChunk(e,t,r){let i=this.reader.requestSlice(e,t);if(i instanceof Promise&&(i=await i),!i)return;let a=a$(i,4);if("INFO"!==a&&"INF0"!==a)return;let n=i.filePos;for(;n<=e+t-8;){i.filePos=n;let e=a$(i,4),t=aA(i,r),a=aC(i,t),o=0;for(let e=0;e<a.length&&0!==a[e];e++)o++;let s=String.fromCharCode(...a.subarray(0,o));switch(this.metadataTags.raw??={},this.metadataTags.raw[e]=s,e){case"INAM":case"TITL":this.metadataTags.title??=s;break;case"TIT3":this.metadataTags.description??=s;break;case"IART":this.metadataTags.artist??=s;break;case"IPRD":this.metadataTags.album??=s;break;case"IPRT":case"ITRK":case"TRCK":{let e=s.split("/"),t=Number.parseInt(e[0],10),r=e[1]&&Number.parseInt(e[1],10);Number.isInteger(t)&&t>0&&(this.metadataTags.trackNumber??=t),r&&Number.isInteger(r)&&r>0&&(this.metadataTags.tracksTotal??=r)}break;case"ICRD":case"IDIT":{let e=new Date(s);Number.isNaN(e.getTime())||(this.metadataTags.date??=e)}break;case"YEAR":{let e=Number.parseInt(s,10);Number.isInteger(e)&&e>0&&(this.metadataTags.date??=new Date(e,0,1))}break;case"IGNR":case"GENR":this.metadataTags.genre??=s;break;case"ICMT":case"CMNT":case"COMM":this.metadataTags.comment??=s}n+=8+t+(1&t)}}async parseId3Chunk(e,t){let r=this.reader.requestSlice(e,t);if(r instanceof Promise&&(r=await r),!r)return;let i=ic(r);i&&id(r.slice(e+10,i.size),i,this.metadataTags)}getCodec(){if(h(this.audioInfo),7===this.audioInfo.format)return"ulaw";if(6===this.audioInfo.format)return"alaw";if(1===this.audioInfo.format){if(1===this.audioInfo.sampleSizeInBytes)return"pcm-u8";else if(2===this.audioInfo.sampleSizeInBytes)return"pcm-s16";else if(3===this.audioInfo.sampleSizeInBytes)return"pcm-s24";else if(4===this.audioInfo.sampleSizeInBytes)return"pcm-s32"}return 3===this.audioInfo.format&&4===this.audioInfo.sampleSizeInBytes?"pcm-f32":null}async getMimeType(){return"audio/wav"}async computeDuration(){await this.readMetadata();let e=this.tracks[0];return h(e),e.computeDuration()}async getTracks(){return await this.readMetadata(),this.tracks}async getMetadataTags(){return await this.readMetadata(),this.metadataTags}},iI=class{constructor(e){this.demuxer=e}getId(){return 1}getCodec(){return this.demuxer.getCodec()}getInternalCodecId(){return h(this.demuxer.audioInfo),this.demuxer.audioInfo.format}async getDecoderConfig(){let e=this.demuxer.getCodec();return e?(h(this.demuxer.audioInfo),{codec:e,numberOfChannels:this.demuxer.audioInfo.numberOfChannels,sampleRate:this.demuxer.audioInfo.sampleRate}):null}async computeDuration(){let e=await this.getPacket(1/0,{metadataOnly:!0});return(e?.timestamp??0)+(e?.duration??0)}getNumberOfChannels(){return h(this.demuxer.audioInfo),this.demuxer.audioInfo.numberOfChannels}getSampleRate(){return h(this.demuxer.audioInfo),this.demuxer.audioInfo.sampleRate}getTimeResolution(){return h(this.demuxer.audioInfo),this.demuxer.audioInfo.sampleRate}getName(){return null}getLanguageCode(){return"und"}getDisposition(){return{...eE}}async getFirstTimestamp(){return 0}async getPacketAtIndex(e,t){let r;h(this.demuxer.audioInfo);let i=2048*e*this.demuxer.audioInfo.blockSizeInBytes;if(i>=this.demuxer.dataSize)return null;let a=Math.min(2048*this.demuxer.audioInfo.blockSizeInBytes,this.demuxer.dataSize-i);if(null===this.demuxer.reader.fileSize){let e=this.demuxer.reader.requestSlice(this.demuxer.dataStart+i,a);if(e instanceof Promise&&(e=await e),!e)return null}if(t.metadataOnly)r=tz;else{let e=this.demuxer.reader.requestSlice(this.demuxer.dataStart+i,a);e instanceof Promise&&(e=await e),h(e),r=aC(e,a)}let n=2048*e/this.demuxer.audioInfo.sampleRate,o=a/this.demuxer.audioInfo.blockSizeInBytes/this.demuxer.audioInfo.sampleRate;return this.demuxer.lastKnownPacketIndex=Math.max(e,n),new tU(r,"key",n,o,e,a)}getFirstPacket(e){return this.getPacketAtIndex(0,e)}async getPacket(e,t){h(this.demuxer.audioInfo);let r=Math.floor(Math.min(e*this.demuxer.audioInfo.sampleRate/2048,(this.demuxer.dataSize-1)/(2048*this.demuxer.audioInfo.blockSizeInBytes))),i=await this.getPacketAtIndex(r,t);if(i)return i;if(0===r)return null;h(null===this.demuxer.reader.fileSize);let a=await this.getPacketAtIndex(this.demuxer.lastKnownPacketIndex,t);for(;a;){let e=await this.getNextPacket(a,t);if(!e)break;a=e}return a}getNextPacket(e,t){h(this.demuxer.audioInfo);let r=Math.round(e.timestamp*this.demuxer.audioInfo.sampleRate/2048);return this.getPacketAtIndex(r+1,t)}getKeyPacket(e,t){return this.getPacket(e,t)}getNextKeyPacket(e,t){return this.getNextPacket(e,t)}},iA=e=>{let t=e.filePos,r=new y(aC(e,9));if(4095!==r.readBits(12)||(r.skipBits(1),0!==r.readBits(2)))return null;let i=r.readBits(1),a=r.readBits(2)+1,n=r.readBits(4);if(15===n)return null;r.skipBits(1);let o=r.readBits(3);if(0===o)throw Error("ADTS frames with channel configuration 0 are not supported.");r.skipBits(1),r.skipBits(1),r.skipBits(1),r.skipBits(1);let s=r.readBits(13);r.skipBits(11);let l=r.readBits(2)+1;if(1!==l)throw Error("ADTS frames with more than one AAC frame are not supported.");let u=null;return 1===i?e.filePos-=2:u=r.readBits(16),{objectType:a,samplingFrequencyIndex:n,channelConfiguration:o,frameLength:s,numberOfAacFrames:l,crcCheck:u,startPos:t}},iO=class extends tA{constructor(e){super(e),this.metadataPromise=null,this.firstFrameHeader=null,this.loadedSamples=[],this.tracks=[],this.readingMutex=new D,this.lastSampleLoaded=!1,this.lastLoadedPos=0,this.nextTimestampInSamples=0,this.reader=e._reader}async readMetadata(){return this.metadataPromise??=(async()=>{for(;!this.firstFrameHeader&&!this.lastSampleLoaded;)await this.advanceReader();h(this.firstFrameHeader),this.tracks=[new rv(this.input,new iM(this))]})()}async advanceReader(){let e=this.reader.requestSliceRange(this.lastLoadedPos,7,9);if(e instanceof Promise&&(e=await e),!e){this.lastSampleLoaded=!0;return}let t=iA(e);if(!t||null!==this.reader.fileSize&&t.startPos+t.frameLength>this.reader.fileSize){this.lastSampleLoaded=!0;return}this.firstFrameHeader||(this.firstFrameHeader=t);let r=e$[t.samplingFrequencyIndex];h(void 0!==r);let i={timestamp:this.nextTimestampInSamples/r,duration:1024/r,dataStart:t.startPos,dataSize:t.frameLength};this.loadedSamples.push(i),this.nextTimestampInSamples+=1024,this.lastLoadedPos=t.startPos+t.frameLength}async getMimeType(){return"audio/aac"}async getTracks(){return await this.readMetadata(),this.tracks}async computeDuration(){await this.readMetadata();let e=this.tracks[0];return h(e),e.computeDuration()}async getMetadataTags(){return{}}},iM=class{constructor(e){this.demuxer=e}getId(){return 1}async getFirstTimestamp(){return 0}getTimeResolution(){return this.getSampleRate()/1024}async computeDuration(){let e=await this.getPacket(1/0,{metadataOnly:!0});return(e?.timestamp??0)+(e?.duration??0)}getName(){return null}getLanguageCode(){return"und"}getCodec(){return"aac"}getInternalCodecId(){return h(this.demuxer.firstFrameHeader),this.demuxer.firstFrameHeader.objectType}getNumberOfChannels(){h(this.demuxer.firstFrameHeader);let e=ez[this.demuxer.firstFrameHeader.channelConfiguration];return h(void 0!==e),e}getSampleRate(){h(this.demuxer.firstFrameHeader);let e=e$[this.demuxer.firstFrameHeader.samplingFrequencyIndex];return h(void 0!==e),e}getDisposition(){return{...eE}}async getDecoderConfig(){return h(this.demuxer.firstFrameHeader),{codec:`mp4a.40.${this.demuxer.firstFrameHeader.objectType}`,numberOfChannels:this.getNumberOfChannels(),sampleRate:this.getSampleRate()}}async getPacketAtIndex(e,t){let r;if(-1===e)return null;let i=this.demuxer.loadedSamples[e];if(!i)return null;if(t.metadataOnly)r=tz;else{let e=this.demuxer.reader.requestSlice(i.dataStart,i.dataSize);if(e instanceof Promise&&(e=await e),!e)return null;r=aC(e,i.dataSize)}return new tU(r,"key",i.timestamp,i.duration,e,i.dataSize)}getFirstPacket(e){return this.getPacketAtIndex(0,e)}async getNextPacket(e,t){let r=await this.demuxer.readingMutex.acquire();try{let r=B(this.demuxer.loadedSamples,e.timestamp,e=>e.timestamp);if(-1===r)throw Error("Packet was not created from this track.");let i=r+1;for(;i>=this.demuxer.loadedSamples.length&&!this.demuxer.lastSampleLoaded;)await this.demuxer.advanceReader();return this.getPacketAtIndex(i,t)}finally{r()}}async getPacket(e,t){let r=await this.demuxer.readingMutex.acquire();try{for(;;){let r=N(this.demuxer.loadedSamples,e,e=>e.timestamp);if(-1===r&&this.demuxer.loadedSamples.length>0)return null;if(this.demuxer.lastSampleLoaded||r>=0&&r+1<this.demuxer.loadedSamples.length)return this.getPacketAtIndex(r,t);await this.demuxer.advanceReader()}}finally{r()}}getKeyPacket(e,t){return this.getPacket(e,t)}getNextKeyPacket(e,t){return this.getNextPacket(e,t)}},iF=e=>{if(0===e)return null;if(1===e)return 192;if(e>=2&&e<=5)return 144*2**e;if(6===e)return"uncommon-u8";if(7===e)return"uncommon-u16";else if(e>=8&&e<=15)return 2**e;else return null},iR=e=>{let t=0,r=new y(aC(e,1));for(;1===r.readBits(1);)t++;if(0===t)return r.readBits(7);let i=[],a=t-1,n=new y(aC(e,a)),o=8-t-1;for(let e=0;e<o;e++)i.unshift(r.readBits(1));for(let e=0;e<a;e++)for(let e=0;e<8;e++){let t=n.readBits(1);e<2||i.unshift(t)}return i.reduce((e,t,r)=>e|t<<r,0)},iD=(e,t)=>"uncommon-u16"===t?aT(e)+1:"uncommon-u8"===t?aE(e)+1:"number"==typeof t?t:void(W(t),h(!1)),ij=class extends tA{constructor(e){super(e),this.loadedSamples=[],this.metadataPromise=null,this.track=null,this.metadataTags={},this.audioInfo=null,this.lastLoadedPos=null,this.blockingBit=null,this.readingMutex=new D,this.lastSampleLoaded=!1,this.reader=e._reader}async computeDuration(){return await this.readMetadata(),h(this.track),this.track.computeDuration()}async getMetadataTags(){return await this.readMetadata(),this.metadataTags}async getTracks(){return await this.readMetadata(),h(this.track),[this.track]}async getMimeType(){return"audio/flac"}async readMetadata(){let e=4;return this.metadataPromise??=(async()=>{for(;null===this.reader.fileSize||e<this.reader.fileSize;){let t=this.reader.requestSlice(e,4);if(t instanceof Promise&&(t=await t),e+=4,null===t)throw Error(`Metadata block at position ${e} is too small! Corrupted file.`);h(t);let r=aE(t),i=aP(t),a=(128&r)!=0;switch(127&r){case 0:{let t=this.reader.requestSlice(e,i);if(t instanceof Promise&&(t=await t),h(t),null===t)throw Error(`StreamInfo block at position ${e} is too small! Corrupted file.`);let r=aC(t,34),a=new y(r),n=a.readBits(16),o=a.readBits(16),s=a.readBits(24),l=a.readBits(24),u=a.readBits(20),c=a.readBits(3)+1;a.readBits(5);let d=a.readBits(36);a.skipBits(128);let p=new Uint8Array(42);p.set(new Uint8Array([102,76,97,67]),0),p.set(new Uint8Array([128,0,0,34]),4),p.set(r,8),this.audioInfo={numberOfChannels:c,sampleRate:u,totalSamples:d,minimumBlockSize:n,maximumBlockSize:o,minimumFrameSize:s,maximumFrameSize:l,description:p},this.track=new rv(this.input,new iL(this));break}case 4:{let t=this.reader.requestSlice(e,i);t instanceof Promise&&(t=await t),h(t),tP(aC(t,i),this.metadataTags);break}case 6:{let t=this.reader.requestSlice(e,i);t instanceof Promise&&(t=await t),h(t);let r=aO(t),a=aO(t),n=k.decode(aC(t,a)),o=aO(t),s=k.decode(aC(t,o));t.skip(16);let l=aO(t),u=aC(t,l);this.metadataTags.images??=[],this.metadataTags.images.push({data:u,mimeType:n,kind:3===r?"coverFront":4===r?"coverBack":"unknown",description:s})}}if(e+=i,a){this.lastLoadedPos=e;break}}})()}async readNextFlacFrame({startPos:e,isFirstPacket:t}){h(this.audioInfo);let r=this.audioInfo.maximumFrameSize+16,i=await this.reader.requestSliceRange(e,this.audioInfo.minimumFrameSize,r);if(!i)return null;let a=this.readFlacFrameHeader({slice:i,isFirstPacket:t});if(!a)return null;for(i.filePos=e+this.audioInfo.minimumFrameSize;;){if(i.filePos>i.end-6)return{num:a.num,blockSize:a.blockSize,sampleRate:a.sampleRate,size:i.end-e,isLastFrame:!0};if(255===aE(i)){let t=i.filePos;if(aE(i)!==(1===this.blockingBit?249:248)){i.filePos=t;continue}i.skip(-2);let r=i.filePos-e,n=this.readFlacFrameHeader({slice:i,isFirstPacket:!1});if(!n){i.filePos=t;continue}if(0===this.blockingBit){if(n.num-a.num!=1){i.filePos=t;continue}}else if(n.num-a.num!==a.blockSize){i.filePos=t;continue}return{num:a.num,blockSize:a.blockSize,sampleRate:a.sampleRate,size:r,isLastFrame:!1}}}}readFlacFrameHeader({slice:e,isFirstPacket:t}){let r=e.filePos,i=new y(aC(e,4));if(32764!==i.readBits(15))return null;if(null===this.blockingBit){h(t);let e=i.readBits(1);this.blockingBit=e}else if(1===this.blockingBit){if(h(!t),1!==i.readBits(1))return null}else if(0===this.blockingBit){if(h(!t),0!==i.readBits(1))return null}else throw Error("Invalid blocking bit");let a=iF(i.readBits(4));if(!a)return null;h(this.audioInfo);let n=((e,t)=>{switch(e){case 0:return t;case 1:return 88200;case 2:return 176400;case 3:return 192e3;case 4:return 8e3;case 5:return 16e3;case 6:return 22050;case 7:return 24e3;case 8:return 32e3;case 9:return 44100;case 10:return 48e3;case 11:return 96e3;case 12:return"uncommon-u8";case 13:return"uncommon-u16";case 14:return"uncommon-u16-10";default:return null}})(i.readBits(4),this.audioInfo.sampleRate);if(!n||(i.readBits(4),i.readBits(3),0!==i.readBits(1)))return null;let o=iR(e),s=iD(e,a),l="uncommon-u16"===n?aT(e):"uncommon-u16-10"===n?10*aT(e):"uncommon-u8"===n?aE(e):"number"==typeof n?n:null;if(null===l||l!==this.audioInfo.sampleRate)return null;let u=e.filePos-r,c=aE(e);return(e.skip(-u),e.skip(-1),c!==(e=>{let t=0;for(let r of e){t^=r;for(let e=0;e<8;e++)(128&t)!=0?t=t<<1^7:t<<=1,t&=255}return t})(aC(e,u)))?null:{num:o,blockSize:s,sampleRate:l}}async advanceReader(){await this.readMetadata(),h(null!==this.lastLoadedPos),h(this.audioInfo);let e=this.lastLoadedPos,t=await this.readNextFlacFrame({startPos:e,isFirstPacket:0===this.loadedSamples.length});if(!t){this.lastSampleLoaded=!0;return}let r=this.loadedSamples[this.loadedSamples.length-1],i={blockOffset:r?r.blockOffset+r.blockSize:0,blockSize:t.blockSize,byteOffset:e,byteSize:t.size};if(this.lastLoadedPos=this.lastLoadedPos+t.size,this.loadedSamples.push(i),t.isLastFrame){this.lastSampleLoaded=!0;return}}},iL=class{constructor(e){this.demuxer=e}getId(){return 1}getCodec(){return"flac"}getInternalCodecId(){return null}getNumberOfChannels(){return h(this.demuxer.audioInfo),this.demuxer.audioInfo.numberOfChannels}async computeDuration(){let e=await this.getPacket(1/0,{metadataOnly:!0});return(e?.timestamp??0)+(e?.duration??0)}getSampleRate(){return h(this.demuxer.audioInfo),this.demuxer.audioInfo.sampleRate}getName(){return null}getLanguageCode(){return"und"}getTimeResolution(){return h(this.demuxer.audioInfo),this.demuxer.audioInfo.sampleRate}getDisposition(){return{...eE}}async getFirstTimestamp(){return 0}async getDecoderConfig(){return h(this.demuxer.audioInfo),{codec:"flac",numberOfChannels:this.demuxer.audioInfo.numberOfChannels,sampleRate:this.demuxer.audioInfo.sampleRate,description:this.demuxer.audioInfo.description}}async getPacket(e,t){if(h(this.demuxer.audioInfo),e<0)throw Error("Timestamp cannot be negative");let r=await this.demuxer.readingMutex.acquire();try{for(;;){let r=N(this.demuxer.loadedSamples,e,e=>e.blockOffset/this.demuxer.audioInfo.sampleRate);if(-1===r){await this.demuxer.advanceReader();continue}let i=this.demuxer.loadedSamples[r],a=i.blockOffset/this.demuxer.audioInfo.sampleRate,n=i.blockSize/this.demuxer.audioInfo.sampleRate;if(a+n<=e){if(this.demuxer.lastSampleLoaded)return this.getPacketAtIndex(this.demuxer.loadedSamples.length-1,t);await this.demuxer.advanceReader();continue}return this.getPacketAtIndex(r,t)}}finally{r()}}async getNextPacket(e,t){let r=await this.demuxer.readingMutex.acquire();try{let r=e.sequenceNumber+1;if(this.demuxer.lastSampleLoaded&&r>=this.demuxer.loadedSamples.length)return null;for(;r>=this.demuxer.loadedSamples.length&&!this.demuxer.lastSampleLoaded;)await this.demuxer.advanceReader();return this.getPacketAtIndex(r,t)}finally{r()}}getKeyPacket(e,t){return this.getPacket(e,t)}getNextKeyPacket(e,t){return this.getNextPacket(e,t)}async getPacketAtIndex(e,t){let r,i=this.demuxer.loadedSamples[e];if(!i)return null;if(t.metadataOnly)r=tz;else{let e=this.demuxer.reader.requestSlice(i.byteOffset,i.byteSize);if(e instanceof Promise&&(e=await e),!e)return null;r=aC(e,i.byteSize)}return h(this.demuxer.audioInfo),new tU(r,"key",i.blockOffset/this.demuxer.audioInfo.sampleRate,i.blockSize/this.demuxer.audioInfo.sampleRate,e,i.byteSize)}async getFirstPacket(e){for(;0===this.demuxer.loadedSamples.length&&!this.demuxer.lastSampleLoaded;)await this.demuxer.advanceReader();return this.getPacketAtIndex(0,e)}},iB=e=>{let t="video/MP2T",r=[...new Set(e.filter(Boolean))];return r.length>0&&(t+=`; codecs="${r.join(", ")}"`),t},iN="No PES packet found where one was expected.",i$=class extends tA{constructor(e){super(e),this.metadataPromise=null,this.elementaryStreams=[],this.tracks=[],this.packetOffset=0,this.packetStride=-1,this.reader=e._reader}async readMetadata(){return this.metadataPromise??=(async()=>{let e=this.reader.requestSlice(0,205);e instanceof Promise&&(e=await e),h(e);let t=aC(e,205);if(71===t[0]&&71===t[188])this.packetOffset=0,this.packetStride=188;else if(71===t[0]&&71===t[204])this.packetOffset=0,this.packetStride=204;else if(71===t[4]&&71===t[192])this.packetOffset=4,this.packetStride=188;else throw Error("Unreachable.");let r=this.packetOffset,i=null,a=!1,n=!1;for(;;){let e=await this.readSection(r,!0);if(!e)break;if(0!==e.pid||a)if(e.pid!==i||n){let t=this.elementaryStreams.find(t=>t.pid===e.pid);if(t&&!t.initialized){let r=iU(e);if(!r)throw Error(`Couldn't read first PES packet for Elementary Stream with PID ${t.pid}`);if(t.firstSection=e,"video"===t.info.type)if("avc"===t.info.codec){if(t.info.avcCodecInfo=tn(r.data),!t.info.avcCodecInfo)throw Error("Invalid AVC video stream; could not extract AVCDecoderConfigurationRecord from first packet.");let e=t.info.avcCodecInfo.sequenceParameterSets[0];h(e);let i=ts(e);t.info.width=i.displayWidth,t.info.height=i.displayHeight,t.info.colorSpace={primaries:P[i.colourPrimaries],transfer:A[i.transferCharacteristics],matrix:M[i.matrixCoefficients],fullRange:!!i.fullRangeFlag},t.info.reorderSize=i.maxDecFrameBuffering,t.initialized=!0}else if("hevc"===t.info.codec){if(t.info.hevcCodecInfo=tf(r.data),!t.info.hevcCodecInfo)throw Error("Invalid HEVC video stream; could not extract HVCDecoderConfigurationRecord from first packet.");let e=t.info.hevcCodecInfo.arrays.find(e=>33===e.nalUnitType).nalUnits[0];h(e);let i=tp(e);t.info.width=i.displayWidth,t.info.height=i.displayHeight,t.info.colorSpace={primaries:P[i.colourPrimaries],transfer:A[i.transferCharacteristics],matrix:M[i.matrixCoefficients],fullRange:!!i.fullRangeFlag},t.info.reorderSize=i.maxDecFrameBuffering,t.initialized=!0}else throw Error("Unhandled.");else if("aac"===t.info.codec){let e=iA(aS.tempFromBytes(r.data));if(!e)throw Error("Invalid AAC audio stream; could not read ADTS frame header from first packet.");t.info.aacCodecInfo={isMpeg2:!1,objectType:e.objectType},t.info.numberOfChannels=ez[e.channelConfiguration],t.info.sampleRate=e$[e.samplingFrequencyIndex],t.initialized=!0}else if("mp3"===t.info.codec){let e=io(aO(aS.tempFromBytes(r.data)),r.data.byteLength);if(!e.header)throw Error("Invalid MP3 audio stream; could not read frame header from first packet.");t.info.numberOfChannels=3===e.header.channel?1:2,t.info.sampleRate=e.header.sampleRate,t.initialized=!0}else throw Error("Unhandled.")}}else{let t=new y(e.payload),r=t.readAlignedByte();t.skipBits(8*r),t.skipBits(12);let i=t.readBits(12);t.skipBits(43),t.readBits(13),t.skipBits(6);let a=t.readBits(10);for(t.skipBits(8*a);8*(i+3)-t.pos>32;){let e=t.readBits(8);t.skipBits(3);let r=t.readBits(13);t.skipBits(6);let i=t.readBits(10);t.skipBits(8*i);let a=null;switch(e){case 3:case 4:case 15:a={type:"audio",codec:15===e?"aac":"mp3",aacCodecInfo:null,numberOfChannels:-1,sampleRate:-1};break;case 27:case 36:a={type:"video",codec:27===e?"avc":"hevc",avcCodecInfo:null,hevcCodecInfo:null,colorSpace:{primaries:null,transfer:null,matrix:null,fullRange:null},width:-1,height:-1,reorderSize:-1}}a&&this.elementaryStreams.push({demuxer:this,pid:r,streamType:e,initialized:!1,firstSection:null,info:a})}n=!0}else{let t=new y(e.payload),r=t.readAlignedByte();t.skipBits(8*r),t.skipBits(14);let n=t.readBits(10);for(t.skipBits(40);8*(n+3)-t.pos>32;){let e=t.readBits(16);if(t.skipBits(3),0!==e)if(null!==i)throw Error("Only files with a single program are supported.");else i=t.readBits(13)}if(null===i)throw Error("Program Association Table must link to a Program Map Table.");a=!0}if(n&&this.elementaryStreams.every(e=>e.initialized))break;h(null!==e.endPos),r=e.endPos}for(let e of this.elementaryStreams)"video"===e.info.type?this.tracks.push(new rg(this.input,new iH(e))):this.tracks.push(new rv(this.input,new iW(e)))})()}async getTracks(){return await this.readMetadata(),this.tracks}async getMetadataTags(){return{}}async computeDuration(){let e=await this.getTracks();return Math.max(0,...await Promise.all(e.map(e=>e.computeDuration())))}async getMimeType(){await this.readMetadata();let e=await this.getTracks();return iB(await Promise.all(e.map(e=>e.getCodecParameterString())))}async readSection(e,t){let r,i=e,a=e,n=[],o=0,s=null;for(;;){let e=await this.readPacket(a);if(a+=this.packetStride,!e)break;if(s){if(e.pid!==s.pid)continue;if(1===e.payloadUnitStartIndicator)break}else{if(0===e.payloadUnitStartIndicator)break;s=e}let r=!!(2&e.adaptationFieldControl),l=!!(1&e.adaptationFieldControl),u=0;if(r&&(u=1+e.body[0]),l&&(0===u?(n.push(e.body),o+=e.body.byteLength):(n.push(e.body.subarray(u)),o+=e.body.byteLength-u)),i=a,!t&&o>=64)break}if(!s)return null;if(1===n.length)r=n[0];else{r=new Uint8Array(n.reduce((e,t)=>e+t.length,0));let e=0;for(let t of n)r.set(t,e),e+=t.length}return{startPos:e,endPos:t?i:null,pid:s.pid,payload:r}}async readPacketHeader(e){let t=this.reader.requestSlice(e,4);if(t instanceof Promise&&(t=await t),!t)return null;if(71!==aE(t))throw Error("Invalid TS packet sync byte. Likely an internal bug, please report this file.");let r=aT(t);return{payloadUnitStartIndicator:r>>14&1,pid:8191&r,adaptationFieldControl:aE(t)>>4&3}}async readPacket(e){let t=this.reader.requestSlice(e,188);if(t instanceof Promise&&(t=await t),!t)return null;let r=aC(t,188);if(71!==r[0])throw Error("Invalid TS packet sync byte. Likely an internal bug, please report this file.");let i=(r[1]<<8)+r[2];return{payloadUnitStartIndicator:i>>14&1,pid:8191&i,adaptationFieldControl:r[3]>>4&3,body:r.subarray(4)}}},iz=e=>{let t=new y(e.payload);if(1!==t.readBits(24))return null;let r=t.readBits(8);if(t.skipBits(16),188===r||190===r||191===r||240===r||241===r||255===r||242===r||248===r)return null;t.skipBits(8);let i=t.readBits(2);t.skipBits(14);let a=0;if(2===i||3===i)t.skipBits(4),a+=0x40000000*t.readBits(3),t.skipBits(1),a+=32768*t.readBits(15),t.skipBits(1),a+=t.readBits(15);else throw Error("PES packets without PTS are not currently supported. If you think this file should be supported, please report it.");return{sectionStartPos:e.startPos,sectionEndPos:e.endPos,pts:a}},iU=e=>{h(null!==e.endPos);let t=iz(e);if(!t)return null;let r=new y(e.payload);r.skipBits(32);let i=r.readBits(16);r.skipBits(16);let a=r.readBits(8),n=r.pos+8*a;r.pos=n;let o=n/8;h(Number.isInteger(o));let s=e.payload.subarray(o,i>0?6+i:e.payload.byteLength);return{...t,data:s}},iV=class{constructor(e){this.elementaryStream=e,this.referencePesPackets=[],this.endReferencePesPacketAdded=!1,this.packetBuffers=new WeakMap,this.packetSectionStarts=new WeakMap,this.mutex=new D}getId(){return this.elementaryStream.pid}getCodec(){throw Error("Not implemented on base class.")}getInternalCodecId(){return this.elementaryStream.streamType}getName(){return null}getLanguageCode(){return"und"}getDisposition(){return eE}getTimeResolution(){return 9e4}async computeDuration(){let e=await this.getPacket(1/0,{metadataOnly:!0});return(e?.timestamp??0)+(e?.duration??0)}async getFirstTimestamp(){let e=await this.getFirstPacket({metadataOnly:!0});return e?.timestamp??0}createEncodedPacket(e,t,r){return new tU(r.metadataOnly?tz:e.data,this.getPacketType(e.data),e.pts/9e4,Math.max(t/9e4,0),e.sequenceNumber,e.data.byteLength)}maybeInsertReferencePacket(e,t,r){if(r&&this.mutex.pending>0)return;let i=N(this.referencePesPackets,e.pts,e=>e.pts);if(i>=0){let r=this.referencePesPackets[i];if(e.sectionStartPos<=r.sectionStartPos||!t&&e.pts-r.pts<45e3)return!1;if(i<this.referencePesPackets.length-1){let r=this.referencePesPackets[i+1];if(r.sectionStartPos<e.sectionStartPos||!t&&r.pts-e.pts<45e3)return!1}}return this.referencePesPackets.splice(i+1,0,e),!0}async getFirstPacket(e){let t=this.elementaryStream.firstSection;h(t);let r=iU(t);h(r);let i=new iG(this,new iq(this,r,!0)),a=await i.readNext();if(!a)return null;let n=this.createEncodedPacket(a.packet,a.duration,e);return this.packetBuffers.set(n,i),this.packetSectionStarts.set(n,a.packet.sectionStartPos),n}async getNextPacket(e,t){let r=this.packetBuffers.get(e);if(r){let i=await r.readNext();if(!i)return null;this.packetBuffers.delete(e);let a=this.createEncodedPacket(i.packet,i.duration,t);return this.packetBuffers.set(a,r),this.packetSectionStarts.set(a,i.packet.sectionStartPos),a}let i=this.packetSectionStarts.get(e);if(void 0===i)throw Error("Packet was not created from this track.");let a=this.elementaryStream.demuxer,n=await a.readSection(i,!0);h(n);let o=iU(n);h(o),r=new iG(this,new iq(this,o,!0));let s=e.sequenceNumber;for(;;){let e=await r.readNext();if(!e)return null;if(e.packet.sequenceNumber>s){let i=this.createEncodedPacket(e.packet,e.duration,t);return this.packetBuffers.set(i,r),this.packetSectionStarts.set(i,e.packet.sectionStartPos),i}}}async getNextKeyPacket(e,t){let r=e;for(;;){if(!(r=await this.getNextPacket(r,t)))return null;if("key"===r.type)return r}}getPacket(e,t){return this.doPacketLookup(e,!1,t)}getKeyPacket(e,t){return this.doPacketLookup(e,!0,t)}async doPacketLookup(e,t,r){let i,a=Q(9e4*e),n=this.elementaryStream.demuxer,o=n.reader,s=await this.mutex.acquire();try{if(0===this.referencePesPackets.length){let e=this.elementaryStream.firstSection;h(e);let t=iz(e);h(t),this.maybeInsertReferencePacket(t,!1,!1),h(1===this.referencePesPackets.length)}let e=N(this.referencePesPackets,a,e=>e.pts);if(-1===e)return null;if(null!==o.fileSize&&e===this.referencePesPackets.length-1&&!this.endReferencePesPacketAdded){let e=o.fileSize-n.packetStride+n.packetOffset,t=await n.readPacketHeader(e);if(!t)return null;for(;t.pid!==this.elementaryStream.pid||0===t.payloadUnitStartIndicator;){e-=n.packetStride;let r=await n.readPacketHeader(e);if(!r)return null;t=r}let r=await n.readSection(e,!1);h(r);let i=iz(r);if(!i)throw Error(iN);this.maybeInsertReferencePacket(i,!0,!1),this.endReferencePesPacketAdded=!0}for(e=N(this.referencePesPackets,a,e=>e.pts),h(-1!==e);null!==o.fileSize;){let t=this.referencePesPackets[e],r=this.referencePesPackets[e+1];if(a-t.pts<9e4||!r)break;let i=X((t.sectionStartPos+r.sectionStartPos)/2,n.packetStride)+n.packetOffset,o=await n.readPacketHeader(i);for(h(o);i<r.sectionStartPos&&(o.pid!==this.elementaryStream.pid||0===o.payloadUnitStartIndicator);){i+=n.packetStride;let e=await n.readPacketHeader(i);if(!e)return null;o=e}if(i>=r.sectionStartPos)break;let s=await n.readSection(i,!1);h(s);let l=iz(s);if(!l)throw Error(iN);if(!this.maybeInsertReferencePacket(l,!1,!1))break;l.pts<=a&&e++}i=this.referencePesPackets[e],h(i.pts<=a)}finally{s()}s();i:for(;;){let e=i.sectionStartPos+n.packetStride;for(;;){let t=await n.readPacketHeader(e);if(!t)break i;if(t.pid===this.elementaryStream.pid&&1===t.payloadUnitStartIndicator)break;e+=n.packetStride}let t=await n.readSection(e,!1);if(!t)break;let r=iz(t);if(!r)throw Error(iN);if(r.pts>a)break;i=r,null===o.fileSize&&this.maybeInsertReferencePacket(r,!1,!0)}let l=this.getReorderSize();for(let e=0;e<l;e++){let e=i.sectionStartPos-n.packetStride;for(;;){let t=await n.readPacketHeader(e);if(!t)break;if(t.pid===this.elementaryStream.pid&&1===t.payloadUnitStartIndicator){let t=await n.readSection(e,!1);h(t);let r=iz(t);if(!r)throw Error(iN);i=r;break}e-=n.packetStride}}let u=await n.readSection(i.sectionStartPos,!0);h(u);let c=iU(u);h(c);let d=new iG(this,new iq(this,c,!0));for(;!((g(d.presentationOrderPackets)?.pts??-1/0)>=a)&&await d.readNextDecodeOrderPacket(););let p=V(d.presentationOrderPackets,e=>e.pts<=a&&(!t||"key"===this.getPacketType(e.data)));if(-1!==p){let e=d.presentationOrderPackets[p],t=0===p?0:e.pts-d.presentationOrderPackets[p-1].pts;for(;d.decodeOrderPackets[0]!==e;)d.decodeOrderPackets.shift();d.lastDuration=t;let i=await d.readNext();h(i);let a=this.createEncodedPacket(i.packet,i.duration,r);return this.packetBuffers.set(a,d),this.packetSectionStarts.set(a,i.packet.sectionStartPos),a}if(!t)return null;let f=i.sectionStartPos;for(;;){f-=n.packetStride;let e=await n.readPacketHeader(f);if(!e)return null;if(e.pid!==this.elementaryStream.pid||1!==e.payloadUnitStartIndicator)continue;let t=await n.readSection(f,!0);h(t);let i=iU(t);if(!i)throw Error(iN);let a=new iq(this,i,!1);if(await this.markNextPacket(a),!a.suppliedPacket||"key"!==this.getPacketType(a.suppliedPacket.data))continue;a.uncapped=!0;let o=new iG(this,a),s=await o.readNext();h(s);let l=this.createEncodedPacket(s.packet,s.duration,r);return this.packetBuffers.set(l,o),this.packetSectionStarts.set(l,s.packet.sectionStartPos),l}}},iH=class extends iV{constructor(e){super(e),this.elementaryStream=e,this.decoderConfig={codec:eB({width:this.elementaryStream.info.width,height:this.elementaryStream.info.height,codec:this.elementaryStream.info.codec,codecDescription:null,colorSpace:this.elementaryStream.info.colorSpace,avcType:1,avcCodecInfo:this.elementaryStream.info.avcCodecInfo,hevcCodecInfo:this.elementaryStream.info.hevcCodecInfo,vp9CodecInfo:null,av1CodecInfo:null}),codedWidth:this.elementaryStream.info.width,codedHeight:this.elementaryStream.info.height,colorSpace:this.elementaryStream.info.colorSpace}}getCodec(){return this.elementaryStream.info.codec}getCodedWidth(){return this.elementaryStream.info.width}getCodedHeight(){return this.elementaryStream.info.height}getRotation(){return 0}async getColorSpace(){return this.elementaryStream.info.colorSpace}async canBeTransparent(){return!1}async getDecoderConfig(){return this.decoderConfig}getPacketType(e){return tT(this.elementaryStream.info.codec,this.decoderConfig,e)??"key"}getReorderSize(){return this.elementaryStream.info.reorderSize}async markNextPacket(e){h(!e.suppliedPacket);let t=this.elementaryStream.info.codec,r=null;for(;;){let i=e.ensureBuffered(1024);if(i instanceof Promise&&(i=await i),0===i)break;let a=e.currentPos,n=e.readBytes(i),o=n.byteLength,s=0;for(;s<o;){let i=n.indexOf(0,s);if(-1===i||i>=o)break;let l=a+(s=i);if(s+4>=o){e.seekTo(l);break}let u=n[s+1],c=n[s+2],d=n[s+3],p=0,f=null;if(0===u&&0===c&&1===d?(p=4,f=n[s+4]):0===u&&1===c&&(p=3,f=d),0===p){s++;continue}if(null===r){r=l,s+=p;continue}if(null!==f){let i="avc"===t?te(f):td(f);if("avc"===t?9===i:35===i){let t=l-r;return e.seekTo(r),e.supplyPacket(t,0)}}s+=p}if(i<1024)break}if(null!==r){let t=e.endPos-r;return e.seekTo(r),e.supplyPacket(t,0)}}},iW=class extends iV{constructor(e){super(e),this.elementaryStream=e}getCodec(){return this.elementaryStream.info.codec}getNumberOfChannels(){return this.elementaryStream.info.numberOfChannels}getSampleRate(){return this.elementaryStream.info.sampleRate}async getDecoderConfig(){return{codec:eN({codec:this.elementaryStream.info.codec,codecDescription:null,aacCodecInfo:this.elementaryStream.info.aacCodecInfo}),numberOfChannels:this.elementaryStream.info.numberOfChannels,sampleRate:this.elementaryStream.info.sampleRate}}getPacketType(e){return"key"}getReorderSize(){return 1}async markNextPacket(e){h(!e.suppliedPacket);let t=this.elementaryStream.info.codec;for(;;){let r=e.ensureBuffered(128);r instanceof Promise&&(r=await r);let i=e.currentPos;for(;e.currentPos-i<r;){let r=e.readU8();if("aac"===t){if(255!==r)continue;e.skip(-1);let t=e.currentPos,i=e.ensureBuffered(9);if(i instanceof Promise&&(i=await i),i<9)return;let a=e.readBytes(9),n=iA(aS.tempFromBytes(a));if(n){e.seekTo(t);let r=e.ensureBuffered(n.frameLength);return r instanceof Promise&&(r=await r),e.supplyPacket(r,Math.round(9216e4/this.elementaryStream.info.sampleRate))}e.seekTo(t+1)}else if("mp3"===t){if(255!==r)continue;e.skip(-1);let t=e.currentPos,i=e.ensureBuffered(4);if(i instanceof Promise&&(i=await i),i<4)return;let a=io(S(e.readBytes(4)).getUint32(0),null);if(a.header){e.seekTo(t);let r=e.ensureBuffered(a.header.totalSize);r instanceof Promise&&(r=await r);let i=9e4*a.header.audioSamplesInFrame/this.elementaryStream.info.sampleRate;return e.supplyPacket(r,Math.round(i))}e.seekTo(t+1)}else throw Error("Unreachable")}if(r<128)break}}},iq=class e{constructor(e,t,r){this.currentPos=0,this.pesPackets=[],this.currentPesPacketIndex=0,this.currentPesPacketPos=0,this.endPos=0,this.nextPts=0,this.suppliedPacket=null,this.backing=e,this.pid=e.elementaryStream.pid,this.demuxer=e.elementaryStream.demuxer,this.startingPesPacket=t,this.uncapped=r}clone(){let t=new e(this.backing,this.startingPesPacket,!0);return t.currentPos=this.currentPos,t.pesPackets=[...this.pesPackets],t.currentPesPacketIndex=this.currentPesPacketIndex,t.currentPesPacketPos=this.currentPesPacketPos,t.endPos=this.endPos,t.nextPts=this.nextPts,t}ensureBuffered(e){let t=this.endPos-this.currentPos;return t>=e?e:this.bufferData(e-t).then(()=>Math.min(this.endPos-this.currentPos,e))}getCurrentPesPacket(){let e=this.pesPackets[this.currentPesPacketIndex];return h(e),e}async bufferData(e){let t=this.endPos+e;for(;this.endPos<t;){let e;if(0===this.pesPackets.length)e=this.startingPesPacket;else{let t=g(this.pesPackets).sectionEndPos;for(h(null!==t);;){let e=await this.demuxer.readPacketHeader(t);if(!e)return;if(e.pid===this.pid)break;t+=this.demuxer.packetStride}let r=await this.demuxer.readSection(t,!0);if(!r)return;let i=iU(r);if(!i)throw Error(iN);e=i}this.pesPackets.push(e),this.endPos+=e.data.byteLength,1===this.pesPackets.length&&(this.nextPts=e.pts)}}readBytes(e){let t=this.getCurrentPesPacket(),r=this.currentPos-this.currentPesPacketPos,i=r+e;if(this.currentPos+=e,i<=t.data.byteLength)return t.data.subarray(r,i);let a=new Uint8Array(e);a.set(t.data.subarray(r));let n=t.data.byteLength-r;for(;;){this.advanceCurrentPacket();let t=this.getCurrentPesPacket(),r=e-n;if(r<=t.data.byteLength){a.set(t.data.subarray(0,r),n);break}a.set(t.data,n),n+=t.data.byteLength}return a}readU8(){let e=this.getCurrentPesPacket(),t=this.currentPos-this.currentPesPacketPos;return(this.currentPos++,t<e.data.byteLength)?e.data[t]:(this.advanceCurrentPacket(),(e=this.getCurrentPesPacket()).data[0])}seekTo(e){if(e!==this.currentPos){if(e<this.currentPos)for(;e<this.currentPesPacketPos;){this.currentPesPacketIndex--;let e=this.getCurrentPesPacket();this.currentPesPacketPos-=e.data.byteLength,this.nextPts=e.pts}else for(;;){let t=this.getCurrentPesPacket();if(e<this.currentPesPacketPos+t.data.byteLength)break;this.currentPesPacketPos+=t.data.byteLength,this.currentPesPacketIndex++,this.nextPts=this.getCurrentPesPacket().pts}this.currentPos=e}}skip(e){this.seekTo(this.currentPos+e)}advanceCurrentPacket(){this.currentPesPacketPos+=this.getCurrentPesPacket().data.byteLength,this.currentPesPacketIndex++,this.nextPts=this.getCurrentPesPacket().pts}supplyPacket(e,t){let r=this.getCurrentPesPacket();if(!this.uncapped&&r!==this.startingPesPacket){this.suppliedPacket=null;return}this.backing.maybeInsertReferencePacket(r,!1,!0);let i=this.nextPts;this.nextPts+=t;let a=r.sectionStartPos,n=a+(this.currentPos-this.currentPesPacketPos),o=this.readBytes(e);this.suppliedPacket={pts:i,data:o,sequenceNumber:n,sectionStartPos:a},this.pesPackets.splice(0,this.currentPesPacketIndex),this.currentPesPacketIndex=0}},iG=class{constructor(e,t){this.decodeOrderPackets=[],this.reorderBuffer=[],this.presentationOrderPackets=[],this.reachedEnd=!1,this.lastDuration=0,this.backing=e,this.context=t,this.reorderSize=e.getReorderSize(),h(this.reorderSize>=0)}async readNext(){let e;if(0===this.decodeOrderPackets.length&&!await this.readNextDecodeOrderPacket())return null;await this.ensureCurrentPacketHasNext();let t=this.decodeOrderPackets[0],r=this.presentationOrderPackets.indexOf(t);for(h(-1!==r),r===this.presentationOrderPackets.length-1?e=this.lastDuration:(e=this.presentationOrderPackets[r+1].pts-t.pts,this.lastDuration=e),this.decodeOrderPackets.shift();this.presentationOrderPackets.length>0;){let e=this.presentationOrderPackets[0];if(this.decodeOrderPackets.includes(e))break;this.presentationOrderPackets.shift()}return{packet:t,duration:e}}async readNextDecodeOrderPacket(){let e;return!this.reachedEnd&&((this.context.suppliedPacket||await this.backing.markNextPacket(this.context),e=this.context.suppliedPacket,this.context.suppliedPacket=null,e)?(this.decodeOrderPackets.push(e),this.processPacketThroughReorderBuffer(e),!0):(this.reachedEnd=!0,this.flushReorderBuffer(),!1))}async ensureCurrentPacketHasNext(){let e=this.decodeOrderPackets[0];for(h(e);;){let t=this.presentationOrderPackets.indexOf(e);if(-1!==t&&t<=this.presentationOrderPackets.length-2||!await this.readNextDecodeOrderPacket())break}}processPacketThroughReorderBuffer(e){if(this.reorderBuffer.push(e),this.reorderBuffer.length>=this.reorderSize){let e=0;for(let t=1;t<this.reorderBuffer.length;t++)this.reorderBuffer[t].pts<this.reorderBuffer[e].pts&&(e=t);let t=this.reorderBuffer.splice(e,1)[0];this.presentationOrderPackets.push(t)}}flushReorderBuffer(){this.reorderBuffer.sort((e,t)=>e.pts-t.pts),this.presentationOrderPackets.push(...this.reorderBuffer),this.reorderBuffer.length=0}},iZ=class{},iK=class extends iZ{async _getMajorBrand(e){let t=e._reader.requestSlice(0,12);return(t instanceof Promise&&(t=await t),t)?(t.skip(4),"ftyp"!==a$(t,4))?null:a$(t,4):null}_createDemuxer(e){return new rC(e)}},iQ=class extends iK{async _canReadInput(e){let t=await this._getMajorBrand(e);return!!t&&"qt  "!==t}get name(){return"MP4"}get mimeType(){return"video/mp4"}},iX=class extends iK{async _canReadInput(e){return"qt  "===await this._getMajorBrand(e)}get name(){return"QuickTime File Format"}get mimeType(){return"video/quicktime"}},iJ=class extends iZ{async isSupportedEBMLOfDocType(e,t){let r=e._reader.requestSlice(0,16);if(r instanceof Promise&&(r=await r),!r)return!1;let i=rq(r);if(null===i||i<1||i>8||0x1a45dfa3!==rZ(r,i))return!1;let a=rQ(r);if("number"!=typeof a)return!1;let n=e._reader.requestSlice(r.filePos,a);if(n instanceof Promise&&(n=await n),!n)return!1;let o=r.filePos;for(;n.filePos<=o+a-2;){let e=rX(n);if(!e)break;let{id:r,size:i}=e,a=n.filePos;if(void 0===i)return!1;switch(r){case 17030:case 17143:if(1!==rZ(n,i))return!1;break;case 17026:if(rJ(n,i)!==t)return!1;break;case 17031:if(rZ(n,i)>4)return!1}n.filePos=a+i}return!0}_canReadInput(e){return this.isSupportedEBMLOfDocType(e,"matroska")}_createDemuxer(e){return new r5(e)}get name(){return"Matroska"}get mimeType(){return"video/x-matroska"}},iY=class extends iJ{_canReadInput(e){return this.isSupportedEBMLOfDocType(e,"webm")}get name(){return"WebM"}get mimeType(){return"video/webm"}},i0=class extends iZ{async _canReadInput(e){let t=e._reader.requestSlice(0,10);if(t instanceof Promise&&(t=await t),!t)return!1;let r=0,i=!1;for(;;){let t=e._reader.requestSlice(r,10);if(t instanceof Promise&&(t=await t),!t)break;let a=ic(t);if(!a)break;i=!0,r=t.filePos+a.size}let a=await im(e._reader,r,r+4096);if(!a)return!1;if(i)return!0;r=a.startPos+a.header.totalSize;let n=await im(e._reader,r,r+4);if(!n)return!1;let o=a.header,s=n.header;return o.channel===s.channel&&o.sampleRate===s.sampleRate}_createDemuxer(e){return new ig(e)}get name(){return"MP3"}get mimeType(){return"audio/mpeg"}},i1=class extends iZ{async _canReadInput(e){let t=e._reader.requestSlice(0,12);if(t instanceof Promise&&(t=await t),!t)return!1;let r=a$(t,4);return("RIFF"===r||"RIFX"===r||"RF64"===r)&&(t.skip(4),"WAVE"===a$(t,4))}_createDemuxer(e){return new iP(e)}get name(){return"WAVE"}get mimeType(){return"audio/wav"}},i2=class extends iZ{async _canReadInput(e){let t=e._reader.requestSlice(0,4);return t instanceof Promise&&(t=await t),!!t&&"OggS"===a$(t,4)}_createDemuxer(e){return new iC(e)}get name(){return"Ogg"}get mimeType(){return"application/ogg"}},i4=class extends iZ{async _canReadInput(e){let t=e._reader.requestSlice(0,4);return t instanceof Promise&&(t=await t),!!t&&"fLaC"===a$(t,4)}get name(){return"FLAC"}get mimeType(){return"audio/flac"}_createDemuxer(e){return new ij(e)}},i3=class extends iZ{async _canReadInput(e){let t=e._reader.requestSliceRange(0,7,9);if(t instanceof Promise&&(t=await t),!t)return!1;let r=iA(t);if(!r||((t=e._reader.requestSliceRange(r.frameLength,7,9))instanceof Promise&&(t=await t),!t))return!1;let i=iA(t);return!!i&&r.objectType===i.objectType&&r.samplingFrequencyIndex===i.samplingFrequencyIndex&&r.channelConfiguration===i.channelConfiguration}_createDemuxer(e){return new iO(e)}get name(){return"ADTS"}get mimeType(){return"audio/aac"}},i6=class extends iZ{async _canReadInput(e){let t=e._reader.requestSlice(0,205);if(t instanceof Promise&&(t=await t),!t)return!1;let r=aC(t,205);return 71===r[0]&&71===r[188]||71===r[0]&&71===r[204]||71===r[4]&&71===r[192]||!1}_createDemuxer(e){return new i$(e)}get name(){return"MPEG Transport Stream"}get mimeType(){return"video/MP2T"}},i8=new iQ,i5=new iX,i7=new iJ,i9=new iY,ae=new i0,at=new i1,ar=new i2,ai=new i3,aa=new i4,an=new i6,ao=[i8,i5,i7,i9,at,ar,aa,ae,ai,an],as=u(c(),1),al=void 0!==as?as:void 0,au=class{constructor(){this._disposed=!1,this._sizePromise=null,this.onread=null}async getSizeOrNull(){if(this._disposed)throw new ax;return this._sizePromise??=Promise.resolve(this._retrieveSize())}async getSize(){if(this._disposed)throw new ax;let e=await this.getSizeOrNull();if(null===e)throw Error("Cannot determine the size of an unsized source.");return e}},ac=class extends au{constructor(e){if(!(e instanceof ArrayBuffer)&&!("u">typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)&&!ArrayBuffer.isView(e))throw TypeError("buffer must be an ArrayBuffer, SharedArrayBuffer, or ArrayBufferView.");super(),this._onreadCalled=!1,this._bytes=w(e),this._view=S(e)}_retrieveSize(){return this._bytes.byteLength}_read(){return this._onreadCalled||(this.onread?.(0,this._bytes.byteLength),this._onreadCalled=!0),{bytes:this._bytes,view:this._view,offset:0}}_dispose(){}},ad=class extends au{constructor(e,t={}){if(!(e instanceof Blob))throw TypeError("blob must be a Blob.");if(!t||"object"!=typeof t)throw TypeError("options must be an object.");if(void 0!==t.maxCacheSize&&(!ex(t.maxCacheSize)||t.maxCacheSize<0))throw TypeError("options.maxCacheSize, when provided, must be a non-negative number.");super(),this._readers=new WeakMap,this._blob=e,this._orchestrator=new ay({maxCacheSize:t.maxCacheSize??8388608,maxWorkerCount:4,runWorker:this._runWorker.bind(this),prefetchProfile:av.fileSystem})}_retrieveSize(){let e=this._blob.size;return this._orchestrator.fileSize=e,e}_read(e,t){return this._orchestrator.read(e,t)}async _runWorker(e){let t=this._readers.get(e);for(void 0===t&&(t=("stream"in this._blob)&&!en()?this._blob.slice(e.currentPos).stream().getReader():null,this._readers.set(e,t));e.currentPos<e.targetPos&&!e.aborted;)if(t){let{done:r,value:i}=await t.read();if(r)throw this._orchestrator.forgetWorker(e),Error("Blob reader stopped unexpectedly before all requested data was read.");if(e.aborted)break;this.onread?.(e.currentPos,e.currentPos+i.length),this._orchestrator.supplyWorkerData(e,i)}else{let t=await this._blob.slice(e.currentPos,e.targetPos).arrayBuffer();if(e.aborted)break;this.onread?.(e.currentPos,e.currentPos+t.byteLength),this._orchestrator.supplyWorkerData(e,new Uint8Array(t))}e.running=!1,e.aborted&&await t?.cancel()}_dispose(){this._orchestrator.dispose()}},ap=(e,t,r)=>(t instanceof Error&&(t.message.includes("Failed to fetch")||t.message.includes("Load failed")||t.message.includes("NetworkError when attempting to fetch resource"))&&("u"<typeof navigator||"boolean"!=typeof navigator.onLine||navigator.onLine),Math.min(2**(e-2),16)),af=class extends au{constructor(e,t={}){if("string"!=typeof e&&!(e instanceof URL)&&!("u">typeof Request&&e instanceof Request))throw TypeError("url must be a string, URL or Request.");if(!t||"object"!=typeof t)throw TypeError("options must be an object.");if(void 0!==t.requestInit&&(!t.requestInit||"object"!=typeof t.requestInit))throw TypeError("options.requestInit, when provided, must be an object.");if(void 0!==t.getRetryDelay&&"function"!=typeof t.getRetryDelay)throw TypeError("options.getRetryDelay, when provided, must be a function.");if(void 0!==t.maxCacheSize&&(!ex(t.maxCacheSize)||t.maxCacheSize<0))throw TypeError("options.maxCacheSize, when provided, must be a non-negative number.");if(void 0!==t.fetchFn&&"function"!=typeof t.fetchFn)throw TypeError("options.fetchFn, when provided, must be a function.");super(),this._existingResponses=new WeakMap,this._url=e,this._options=t,this._getRetryDelay=t.getRetryDelay??ap,this._orchestrator=new ay({maxCacheSize:t.maxCacheSize??0x4000000,maxWorkerCount:2,runWorker:this._runWorker.bind(this),prefetchProfile:av.network})}async _retrieveSize(){let e,t,r=new AbortController,i=await er(this._options.fetchFn??fetch,this._url,ee(this._options.requestInit??{},{headers:{Range:"bytes=0-"},signal:r.signal}),this._getRetryDelay,()=>this._disposed);if(!i.ok)throw Error(`Error fetching ${String(this._url)}: ${i.status} ${i.statusText}`);if(206===i.status)t=this._getTotalLengthFromRangeResponse(i),e=this._orchestrator.createWorker(0,Math.min(t,524288));else{let r=i.headers.get("Content-Length");if(r)t=Number(r),e=this._orchestrator.createWorker(0,t),this._orchestrator.options.maxCacheSize=1/0,console.warn("HTTP server did not respond with 206 Partial Content, meaning the entire remote resource now has to be downloaded. For efficient media file streaming across a network, please make sure your server supports range requests.");else throw Error(`HTTP response (status ${i.status}) must surface Content-Length header.`)}return this._orchestrator.fileSize=t,this._existingResponses.set(e,{response:i,abortController:r}),this._orchestrator.runWorker(e),t}_read(e,t){return this._orchestrator.read(e,t)}async _runWorker(e){for(;;){let t=this._existingResponses.get(e);this._existingResponses.delete(e);let r=t?.abortController,i=t?.response;if(r||(r=new AbortController,i=await er(this._options.fetchFn??fetch,this._url,ee(this._options.requestInit??{},{headers:{Range:`bytes=${e.currentPos}-`},signal:r.signal}),this._getRetryDelay,()=>this._disposed)),h(i),!i.ok)throw Error(`Error fetching ${String(this._url)}: ${i.status} ${i.statusText}`);if(e.currentPos>0&&206!==i.status)throw Error("HTTP server did not respond with 206 Partial Content to a range request. To enable efficient media file streaming across a network, please make sure your server supports range requests.");if(!i.body)throw Error("Missing HTTP response body stream. The used fetch function must provide the response body as a ReadableStream.");let a=i.body.getReader();for(;;){let t;if(e.currentPos>=e.targetPos||e.aborted){r.abort(),e.running=!1;return}try{t=await a.read()}catch(t){if(this._disposed)throw t;let e=this._getRetryDelay(1,t,this._url);if(null!==e){console.error("Error while reading response stream. Attempting to resume.",t),await new Promise(t=>setTimeout(t,1e3*e));break}throw t}if(e.aborted)continue;let{done:i,value:n}=t;if(i){if(e.currentPos>=e.targetPos){this._orchestrator.forgetWorker(e),e.running=!1;return}break}this.onread?.(e.currentPos,e.currentPos+n.length),this._orchestrator.supplyWorkerData(e,n)}}}_getTotalLengthFromRangeResponse(e){let t=e.headers.get("Content-Range");if(t){let e=/\/(\d+)/.exec(t);if(e)return Number(e[1])}let r=e.headers.get("Content-Length");if(r)return Number(r);throw Error("Partial HTTP response (status 206) must surface either Content-Range or Content-Length header.")}_dispose(){this._orchestrator.dispose()}},ah=class extends au{constructor(e,t={}){if("string"!=typeof e)throw TypeError("filePath must be a string.");if(!t||"object"!=typeof t)throw TypeError("options must be an object.");if(void 0!==t.maxCacheSize&&(!ex(t.maxCacheSize)||t.maxCacheSize<0))throw TypeError("options.maxCacheSize, when provided, must be a non-negative number.");super(),this._fileHandle=null,this._streamSource=new am({getSize:async()=>(this._fileHandle=await al.fs.open(e,"r"),(await this._fileHandle.stat()).size),read:async(e,t)=>{h(this._fileHandle);let r=new Uint8Array(t-e);return await this._fileHandle.read(r,0,t-e,e),r},maxCacheSize:t.maxCacheSize,prefetchProfile:"fileSystem"})}_read(e,t){return this._streamSource._read(e,t)}_retrieveSize(){return this._streamSource._retrieveSize()}_dispose(){this._streamSource._dispose(),this._fileHandle?.close(),this._fileHandle=null}},am=class extends au{constructor(e){if(!e||"object"!=typeof e)throw TypeError("options must be an object.");if("function"!=typeof e.getSize)throw TypeError("options.getSize must be a function.");if("function"!=typeof e.read)throw TypeError("options.read must be a function.");if(void 0!==e.dispose&&"function"!=typeof e.dispose)throw TypeError("options.dispose, when provided, must be a function.");if(void 0!==e.maxCacheSize&&(!ex(e.maxCacheSize)||e.maxCacheSize<0))throw TypeError("options.maxCacheSize, when provided, must be a non-negative number.");if(e.prefetchProfile&&!["none","fileSystem","network"].includes(e.prefetchProfile))throw TypeError("options.prefetchProfile, when provided, must be one of 'none', 'fileSystem' or 'network'.");super(),this._options=e,this._orchestrator=new ay({maxCacheSize:e.maxCacheSize??8388608,maxWorkerCount:2,prefetchProfile:av[e.prefetchProfile??"none"],runWorker:this._runWorker.bind(this)})}_retrieveSize(){let e=this._options.getSize();if(e instanceof Promise)return e.then(e=>{if(!Number.isInteger(e)||e<0)throw TypeError("options.getSize must return or resolve to a non-negative integer.");return this._orchestrator.fileSize=e,e});if(!Number.isInteger(e)||e<0)throw TypeError("options.getSize must return or resolve to a non-negative integer.");return this._orchestrator.fileSize=e,e}_read(e,t){return this._orchestrator.read(e,t)}async _runWorker(e){for(;e.currentPos<e.targetPos&&!e.aborted;){let t=e.currentPos,r=e.targetPos,i=this._options.read(e.currentPos,r);if(i instanceof Promise&&(i=await i),e.aborted)break;if(i instanceof Uint8Array){if((i=w(i)).length!==r-e.currentPos)throw Error(`options.read returned a Uint8Array with unexpected length: Requested ${r-e.currentPos} bytes, but got ${i.length}.`);this.onread?.(e.currentPos,e.currentPos+i.length),this._orchestrator.supplyWorkerData(e,i)}else if(i instanceof ReadableStream){let a=i.getReader();for(;e.currentPos<r&&!e.aborted;){let{done:i,value:n}=await a.read();if(i){if(e.currentPos<r)throw Error(`ReadableStream returned by options.read ended before supplying enough data. Requested ${r-t} bytes, but got ${e.currentPos-t}`);break}if(!(n instanceof Uint8Array))throw TypeError("ReadableStream returned by options.read must yield Uint8Array chunks.");if(e.aborted)break;let o=w(n);this.onread?.(e.currentPos,e.currentPos+o.length),this._orchestrator.supplyWorkerData(e,o)}}else throw TypeError("options.read must return or resolve to a Uint8Array or a ReadableStream.")}e.running=!1}_dispose(){this._orchestrator.dispose(),this._options.dispose?.()}},ag=class extends au{constructor(e,t={}){if(!(e instanceof ReadableStream))throw TypeError("stream must be a ReadableStream.");if(!t||"object"!=typeof t)throw TypeError("options must be an object.");if(void 0!==t.maxCacheSize&&(!ex(t.maxCacheSize)||t.maxCacheSize<0))throw TypeError("options.maxCacheSize, when provided, must be a non-negative number.");super(),this._reader=null,this._cache=[],this._pendingSlices=[],this._currentIndex=0,this._targetIndex=0,this._maxRequestedIndex=0,this._endIndex=null,this._pulling=!1,this._stream=e,this._maxCacheSize=t.maxCacheSize??0x1000000}_retrieveSize(){return this._endIndex}_read(e,t){if(null!==this._endIndex&&t>this._endIndex)return null;this._maxRequestedIndex=Math.max(this._maxRequestedIndex,t);let r=N(this._cache,e,e=>e.start),i=-1!==r?this._cache[r]:null;if(i&&i.start<=e&&t<=i.end)return{bytes:i.bytes,view:i.view,offset:i.start};let a=e,n=new Uint8Array(t-e);if(-1!==r)for(let i=r;i<this._cache.length;i++){let r=this._cache[i];if(r.start>=t)break;let o=Math.max(e,r.start);o>a&&this._throwDueToCacheMiss();let s=Math.min(t,r.end);o<s&&(n.set(r.bytes.subarray(o-r.start,s-r.start),o-e),a=s)}if(a===t)return{bytes:n,view:S(n),offset:e};this._currentIndex>a&&this._throwDueToCacheMiss();let{promise:o,resolve:s,reject:l}=z();return this._pendingSlices.push({start:e,end:t,bytes:n,resolve:s,reject:l}),this._targetIndex=Math.max(this._targetIndex,t),this._pulling||(this._pulling=!0,this._pull().catch(e=>{if(this._pulling=!1,this._pendingSlices.length>0)this._pendingSlices.forEach(t=>t.reject(e)),this._pendingSlices.length=0;else throw e})),o}_throwDueToCacheMiss(){throw Error("Read is before the cached region. With ReadableStreamSource, you must access the data more sequentially or increase the size of its cache.")}async _pull(){for(this._reader??=this._stream.getReader();this._currentIndex<this._targetIndex&&!this._disposed;){let{done:e,value:t}=await this._reader.read();if(e){for(let e of this._pendingSlices)e.resolve(null);this._pendingSlices.length=0,this._endIndex=this._currentIndex;break}let r=this._currentIndex,i=this._currentIndex+t.byteLength;for(let e=0;e<this._pendingSlices.length;e++){let a=this._pendingSlices[e],n=Math.max(r,a.start),o=Math.min(i,a.end);n<o&&(a.bytes.set(t.subarray(n-r,o-r),n-a.start),o===a.end&&(a.resolve({bytes:a.bytes,view:S(a.bytes),offset:a.start}),this._pendingSlices.splice(e,1),e--))}for(this._cache.push({start:r,end:i,bytes:t,view:S(t),age:0});this._cache.length>0;){let e=this._cache[0];if(this._maxRequestedIndex-e.end<=this._maxCacheSize)break;this._cache.shift()}this._currentIndex+=t.byteLength}this._pulling=!1}_dispose(){this._pendingSlices.length=0,this._cache.length=0}},av={none:(e,t)=>({start:e,end:t}),fileSystem:(e,t)=>({start:e=65536*Math.floor((e-65536)/65536),end:t=65536*Math.ceil((t+65536)/65536)}),network:(e,t,r)=>{for(let i of(e=Math.max(0,65536*Math.floor((e-65536)/65536)),r))if(ef(e,t,Math.max((i.startPos+i.targetPos)/2,i.targetPos-8388608),i.targetPos)){let e=i.targetPos-i.startPos,r=8388608*Math.ceil((e+1)/8388608),a=Math.min(2**Math.ceil(Math.log2(e+1)),r);t=Math.max(t,i.startPos+a)}return t=Math.max(t,e+524288),{start:e,end:t}}},ay=class{constructor(e){this.options=e,this.fileSize=null,this.nextAge=0,this.workers=[],this.cache=[],this.currentCacheSize=0,this.disposed=!1}read(e,t){h(null!==this.fileSize);let r=this.options.prefetchProfile(e,t,this.workers),i=Math.max(r.start,0),a=Math.min(r.end,this.fileSize);h(i<=e&&t<=a);let n=null,o=N(this.cache,e,e=>e.start),s=-1!==o?this.cache[o]:null;s&&s.start<=e&&t<=s.end&&(s.age=this.nextAge++,n={bytes:s.bytes,view:s.view,offset:s.start});let l=N(this.cache,i,e=>e.start),u=n?null:new Uint8Array(t-e),c=0,d=i,p=[];if(-1!==l){for(let r=l;r<this.cache.length;r++){let n=this.cache[r];if(n.start>=a)break;if(n.end<=i)continue;let o=Math.max(i,n.start),s=Math.min(a,n.end);if(h(o<=s),d<o&&p.push({start:d,end:o}),d=s,u){let r=Math.max(e,n.start),i=Math.min(t,n.end);if(r<i){let t=r-e;u.set(n.bytes.subarray(r-n.start,i-n.start),t),t===c&&(c=i-e)}}n.age=this.nextAge++}d<a&&p.push({start:d,end:a})}else p.push({start:i,end:a});if(u&&c>=u.length&&(n={bytes:u,view:S(u),offset:e}),0===p.length)return h(n),n;let{promise:f,resolve:m,reject:g}=z(),v=[];for(let r of p){let i=Math.max(e,r.start),a=Math.min(t,r.end);i===r.start&&a===r.end?v.push(r):i<a&&v.push({start:i,end:a})}for(let t of p){let r=u&&{start:e,bytes:u,holes:v,resolve:m,reject:g},i=!1;for(let e of this.workers)if(ef(t.start-131072,t.start,e.currentPos,e.targetPos)){e.targetPos=Math.max(e.targetPos,t.end),i=!0,r&&!e.pendingSlices.includes(r)&&e.pendingSlices.push(r),e.running||this.runWorker(e);break}if(!i){let e=this.createWorker(t.start,t.end);r&&(e.pendingSlices=[r]),this.runWorker(e)}}return n||(h(u),n=f.then(t=>({bytes:t,view:S(t),offset:e}))),n}createWorker(e,t){let r={startPos:e,currentPos:e,targetPos:t,running:!1,aborted:this.disposed,pendingSlices:[],age:this.nextAge++};for(this.workers.push(r);this.workers.length>this.options.maxWorkerCount;){let e=0,t=this.workers[0];for(let r=1;r<this.workers.length;r++){let i=this.workers[r];i.age<t.age&&(e=r,t=i)}if(t.running&&t.pendingSlices.length>0)break;t.aborted=!0,this.workers.splice(e,1)}return r}runWorker(e){h(!e.running),h(e.currentPos<e.targetPos),e.running=!0,e.age=this.nextAge++,this.options.runWorker(e).catch(t=>{if(e.running=!1,e.pendingSlices.length>0)e.pendingSlices.forEach(e=>e.reject(t)),e.pendingSlices.length=0;else throw t})}supplyWorkerData(e,t){h(!e.aborted);let r=e.currentPos,i=r+t.length;this.insertIntoCache({start:r,end:i,bytes:t,view:S(t),age:this.nextAge++}),e.currentPos+=t.length,e.targetPos=Math.max(e.targetPos,e.currentPos);for(let a=0;a<e.pendingSlices.length;a++){let n=e.pendingSlices[a],o=Math.max(r,n.start),s=Math.min(i,n.start+n.bytes.length);o<s&&n.bytes.set(t.subarray(o-r,s-r),o-n.start);for(let e=0;e<n.holes.length;e++){let t=n.holes[e];r<=t.start&&i>t.start&&(t.start=i),t.end<=t.start&&(n.holes.splice(e,1),e--)}0===n.holes.length&&(n.resolve(n.bytes),e.pendingSlices.splice(a,1),a--)}for(let t=0;t<this.workers.length;t++){let a=this.workers[t];e!==a&&!a.running&&ef(r,i,a.currentPos,a.targetPos)&&(this.workers.splice(t,1),t--)}}forgetWorker(e){let t=this.workers.indexOf(e);h(-1!==t),this.workers.splice(t,1)}insertIntoCache(e){if(0===this.options.maxCacheSize)return;let t=N(this.cache,e.start,e=>e.start)+1;if(t>0){let r=this.cache[t-1];if(r.end>=e.end)return;if(r.end>e.start){let i=new Uint8Array(e.end-r.start);i.set(r.bytes,0),i.set(e.bytes,e.start-r.start),this.currentCacheSize+=e.end-r.end,r.bytes=i,r.view=S(i),r.end=e.end,t--,e=r}else this.cache.splice(t,0,e),this.currentCacheSize+=e.bytes.length}else this.cache.splice(t,0,e),this.currentCacheSize+=e.bytes.length;for(let r=t+1;r<this.cache.length;r++){let t=this.cache[r];if(e.end<=t.start)break;if(e.end>=t.end){this.cache.splice(r,1),this.currentCacheSize-=t.bytes.length,r--;continue}let i=new Uint8Array(t.end-e.start);i.set(e.bytes,0),i.set(t.bytes,t.start-e.start),this.currentCacheSize-=e.end-t.start,e.bytes=i,e.view=S(i),e.end=t.end,this.cache.splice(r,1);break}for(;this.currentCacheSize>this.options.maxCacheSize;){let e=0,t=this.cache[0];for(let r=1;r<this.cache.length;r++){let i=this.cache[r];i.age<t.age&&(e=r,t=i)}if(this.currentCacheSize-t.bytes.length<=this.options.maxCacheSize)break;this.cache.splice(e,1),this.currentCacheSize-=t.bytes.length}}dispose(){for(let e of this.workers)e.aborted=!0;this.workers.length=0,this.cache.length=0,this.disposed=!0}};eb();var ab=class{constructor(e){if(this._demuxerPromise=null,this._format=null,this._disposed=!1,!e||"object"!=typeof e)throw TypeError("options must be an object.");if(!Array.isArray(e.formats)||e.formats.some(e=>!(e instanceof iZ)))throw TypeError("options.formats must be an array of InputFormat.");if(!(e.source instanceof au))throw TypeError("options.source must be a Source.");if(e.source._disposed)throw Error("options.source must not be disposed.");this._formats=e.formats,this._source=e.source,this._reader=new aw(e.source)}get disposed(){return this._disposed}_getDemuxer(){return this._demuxerPromise??=(async()=>{for(let e of(this._reader.fileSize=await this._source.getSizeOrNull(),this._formats))if(await e._canReadInput(this))return this._format=e,e._createDemuxer(this);throw Error("Input has an unsupported or unrecognizable format.")})()}get source(){return this._source}async getFormat(){return await this._getDemuxer(),h(this._format),this._format}async computeDuration(){return(await this._getDemuxer()).computeDuration()}async getFirstTimestamp(){let e=await this.getTracks();return 0===e.length?0:Math.min(...await Promise.all(e.map(e=>e.getFirstTimestamp())))}async getTracks(){return(await this._getDemuxer()).getTracks()}async getVideoTracks(){return(await this.getTracks()).filter(e=>e.isVideoTrack())}async getAudioTracks(){return(await this.getTracks()).filter(e=>e.isAudioTrack())}async getPrimaryVideoTrack(){return(await this.getTracks()).find(e=>e.isVideoTrack())??null}async getPrimaryAudioTrack(){return(await this.getTracks()).find(e=>e.isAudioTrack())??null}async getMimeType(){return(await this._getDemuxer()).getMimeType()}async getMetadataTags(){return(await this._getDemuxer()).getMetadataTags()}dispose(){this._disposed||(this._disposed=!0,this._source._disposed=!0,this._source._dispose())}[Symbol.dispose](){this.dispose()}},ax=class extends Error{constructor(e="Input has been disposed."){super(e),this.name="InputDisposedError"}},aw=class{constructor(e){this.source=e}requestSlice(e,t){if(this.source._disposed)throw new ax;if(e<0||null!==this.fileSize&&e+t>this.fileSize)return null;let r=e+t,i=this.source._read(e,r);return i instanceof Promise?i.then(t=>t?new aS(t.bytes,t.view,t.offset,e,r):null):i?new aS(i.bytes,i.view,i.offset,e,r):null}requestSliceRange(e,t,r){if(this.source._disposed)throw new ax;if(e<0)return null;if(null!==this.fileSize)return this.requestSlice(e,K(this.fileSize-e,t,r));{let i=this.requestSlice(e,r),a=i=>{if(i)return i;let a=i=>(h(null!==i),this.requestSlice(e,K(i-e,t,r))),n=this.source._retrieveSize();return n instanceof Promise?n.then(a):a(n)};return i instanceof Promise?i.then(a):a(i)}}},aS=class e{constructor(e,t,r,i,a){this.bytes=e,this.view=t,this.offset=r,this.start=i,this.end=a,this.bufferPos=i-r}static tempFromBytes(t){return new e(t,S(t),0,0,t.length)}get length(){return this.end-this.start}get filePos(){return this.offset+this.bufferPos}set filePos(e){this.bufferPos=e-this.offset}get remainingLength(){return Math.max(this.end-this.filePos,0)}skip(e){this.bufferPos+=e}slice(t,r=this.end-t){if(t<this.start||t+r>this.end)throw RangeError("Slicing outside of original slice.");return new e(this.bytes,this.view,this.offset,t,t+r)}},ak=(e,t)=>{if(e.filePos<e.start||e.filePos+t>e.end)throw RangeError(`Tried reading [${e.filePos}, ${e.filePos+t}), but slice is [${e.start}, ${e.end}). This is likely an internal error, please report it alongside the file that caused it.`)},aC=(e,t)=>{ak(e,t);let r=e.bytes.subarray(e.bufferPos,e.bufferPos+t);return e.bufferPos+=t,r},aE=e=>(ak(e,1),e.view.getUint8(e.bufferPos++)),a_=(e,t)=>{ak(e,2);let r=e.view.getUint16(e.bufferPos,t);return e.bufferPos+=2,r},aT=e=>{ak(e,2);let t=e.view.getUint16(e.bufferPos,!1);return e.bufferPos+=2,t},aP=e=>{ak(e,3);let t=q(e.view,e.bufferPos,!1);return e.bufferPos+=3,t},aI=e=>{ak(e,2);let t=e.view.getInt16(e.bufferPos,!1);return e.bufferPos+=2,t},aA=(e,t)=>{ak(e,4);let r=e.view.getUint32(e.bufferPos,t);return e.bufferPos+=4,r},aO=e=>{ak(e,4);let t=e.view.getUint32(e.bufferPos,!1);return e.bufferPos+=4,t},aM=e=>{ak(e,4);let t=e.view.getUint32(e.bufferPos,!0);return e.bufferPos+=4,t},aF=e=>{ak(e,4);let t=e.view.getInt32(e.bufferPos,!1);return e.bufferPos+=4,t},aR=(e,t)=>{let r,i;return t?(r=aA(e,!0),i=aA(e,!0)):(i=aA(e,!1),r=aA(e,!1)),0x100000000*i+r},aD=e=>0x100000000*aO(e)+aO(e),aj=e=>0x100000000*aF(e)+aO(e),aL=e=>{let t,r=aM(e);return 0x100000000*(ak(e,4),t=e.view.getInt32(e.bufferPos,!0),e.bufferPos+=4,t)+r},aB=e=>{ak(e,4);let t=e.view.getFloat32(e.bufferPos,!1);return e.bufferPos+=4,t},aN=e=>{ak(e,8);let t=e.view.getFloat64(e.bufferPos,!1);return e.bufferPos+=8,t},a$=(e,t)=>{ak(e,t);let r="";for(let i=0;i<t;i++)r+=String.fromCharCode(e.bytes[e.bufferPos++]);return r},az=new Uint8Array([102,76,97,67]),aU=class extends e2{constructor(e,t){super(e),this.metadataWritten=!1,this.blockSizes=[],this.frameSizes=[],this.sampleRate=null,this.channels=null,this.bitsPerSample=null,this.writer=e._writer,this.format=t}async start(){this.writer.write(az)}writeHeader({bitsPerSample:e,minimumBlockSize:t,maximumBlockSize:r,minimumFrameSize:i,maximumFrameSize:a,sampleRate:n,channels:o,totalSamples:s}){h(4===this.writer.getPos());let l=!eC(this.output._metadataTags),u=new y(new Uint8Array(4));u.writeBits(1,Number(!l)),u.writeBits(7,0),u.writeBits(24,34),this.writer.write(u.bytes);let c=new y(new Uint8Array(18));if(c.writeBits(16,t),c.writeBits(16,r),c.writeBits(24,i),c.writeBits(24,a),c.writeBits(20,n),c.writeBits(3,o-1),c.writeBits(5,e-1),s>=0x100000000)throw Error("This muxer only supports writing up to 2 ** 32 samples");c.writeBits(4,0),c.writeBits(32,s),this.writer.write(c.bytes),this.writer.write(new Uint8Array(16))}writePictureBlock(e){let t=32+e.mimeType.length+(e.description?.length??0)+e.data.length,r=new Uint8Array(t),i=0,a=S(r);a.setUint32(i,"coverFront"===e.kind?3:4*("coverBack"===e.kind)),i+=4,a.setUint32(i,e.mimeType.length),i+=4,r.set(C.encode(e.mimeType),8),i+=e.mimeType.length,a.setUint32(i,e.description?.length??0),i+=4,r.set(C.encode(e.description??""),i),i+=e.description?.length??0,i+=16,a.setUint32(i,e.data.length),i+=4,r.set(e.data,i),h((i+=e.data.length)===t);let n=new y(new Uint8Array(4));n.writeBits(1,0),n.writeBits(7,6),n.writeBits(24,t),this.writer.write(n.bytes),this.writer.write(r)}writeVorbisCommentAndPictureBlock(){if(this.writer.seek(38+az.byteLength),eC(this.output._metadataTags)){this.metadataWritten=!0;return}for(let e of this.output._metadataTags.images??[])this.writePictureBlock(e);let e=tI(new Uint8Array(0),this.output._metadataTags,!1),t=new y(new Uint8Array(4));t.writeBits(1,1),t.writeBits(7,4),t.writeBits(24,e.length),this.writer.write(t.bytes),this.writer.write(e),this.metadataWritten=!0}async getMimeType(){return"audio/flac"}async addEncodedVideoPacket(){throw Error("FLAC does not support video.")}async addEncodedAudioPacket(e,t,r){let i=await this.mutex.acquire();e0(r),h(r),h(r.decoderConfig),h(r.decoderConfig.description);try{if(this.validateAndNormalizeTimestamp(e,t.timestamp,"key"===t.type),null===this.sampleRate&&(this.sampleRate=r.decoderConfig.sampleRate),null===this.channels&&(this.channels=r.decoderConfig.numberOfChannels),null===this.bitsPerSample){let e=new y(w(r.decoderConfig.description));e.skipBits(167);let t=e.readBits(5)+1;this.bitsPerSample=t}this.metadataWritten||this.writeVorbisCommentAndPictureBlock();let i=aS.tempFromBytes(t.data);aC(i,2);let a=aC(i,2),n=new y(a),o=iF(n.readBits(4));if(null===o)throw Error("Invalid FLAC frame: Invalid block size.");iR(i);let s=iD(i,o);this.blockSizes.push(s),this.frameSizes.push(t.data.length);let l=this.writer.getPos();this.writer.write(t.data),this.format._options.onFrame&&this.format._options.onFrame(t.data,l),await this.writer.flush()}finally{i()}}addSubtitleCue(){throw Error("FLAC does not support subtitles.")}async finalize(){let e=await this.mutex.acquire(),t=1/0,r=0,i=1/0,a=0,n=0;for(let e=0;e<this.blockSizes.length;e++)i=Math.min(i,this.frameSizes[e]),a=Math.max(a,this.frameSizes[e]),r=Math.max(r,this.blockSizes[e]),n+=this.blockSizes[e],e!==this.blockSizes.length-1&&(t=Math.min(t,this.blockSizes[e]));h(null!==this.sampleRate),h(null!==this.channels),h(null!==this.bitsPerSample),this.writer.seek(4),this.writeHeader({minimumBlockSize:t,maximumBlockSize:r,minimumFrameSize:i,maximumFrameSize:a,sampleRate:this.sampleRate,channels:this.channels,bitsPerSample:this.bitsPerSample,totalSamples:n}),e()}},aV=/(?:(.+?)\n)?((?:\d{2}:)?\d{2}:\d{2}.\d{3})\s+-->\s+((?:\d{2}:)?\d{2}:\d{2}.\d{3})/g,aH=/^WEBVTT(.|\n)*?\n{2}/,aW=/<(?:(\d{2}):)?(\d{2}):(\d{2}).(\d{3})>/g,aq=class{constructor(e){this.preambleText=null,this.preambleEmitted=!1,this.options=e}parse(e){let t;if(e=e.replaceAll("\r\n","\n").replaceAll("\r","\n"),aV.lastIndex=0,!this.preambleText){if(!aH.test(e))throw Error("WebVTT preamble incorrect.");t=aV.exec(e);let r=e.slice(0,t?.index??e.length).trimEnd();if(!r)throw Error("No WebVTT preamble provided.");this.preambleText=r,t&&(e=e.slice(t.index),aV.lastIndex=0)}for(;t=aV.exec(e);){let r=e.slice(0,t.index),i=t[1],a=t.index+t[0].length,n=e.indexOf("\n",a)+1,o=e.slice(a,n).trim(),s=e.indexOf("\n\n",a);-1===s&&(s=e.length);let l=aZ(t[2]),u=aZ(t[3])-l,c=e.slice(n,s).trim();e=e.slice(s).trimStart(),aV.lastIndex=0;let d={timestamp:l/1e3,duration:u/1e3,text:c,identifier:i,settings:o,notes:r},p={};this.preambleEmitted||(p.config={description:this.preambleText},this.preambleEmitted=!0),this.options.output(d,p)}}},aG=/(?:(\d{2}):)?(\d{2}):(\d{2}).(\d{3})/,aZ=e=>{let t=aG.exec(e);if(!t)throw Error("Expected match.");return 36e5*Number(t[1]||"0")+6e4*Number(t[2])+1e3*Number(t[3])+Number(t[4])},aK=e=>{let t=Math.floor(e/36e5),r=Math.floor(e%36e5/6e4),i=Math.floor(e%6e4/1e3);return t.toString().padStart(2,"0")+":"+r.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0")+"."+(e%1e3).toString().padStart(3,"0")},aQ=class{constructor(e){this.writer=e,this.helper=new Uint8Array(8),this.helperView=new DataView(this.helper.buffer),this.offsets=new WeakMap}writeU32(e){this.helperView.setUint32(0,e,!1),this.writer.write(this.helper.subarray(0,4))}writeU64(e){this.helperView.setUint32(0,Math.floor(e/0x100000000),!1),this.helperView.setUint32(4,e,!1),this.writer.write(this.helper.subarray(0,8))}writeAscii(e){for(let t=0;t<e.length;t++)this.helperView.setUint8(t%8,e.charCodeAt(t)),t%8==7&&this.writer.write(this.helper);e.length%8!=0&&this.writer.write(this.helper.subarray(0,e.length%8))}writeBox(e){if(this.offsets.set(e,this.writer.getPos()),e.contents&&!e.children)this.writeBoxHeader(e,e.size??e.contents.byteLength+8),this.writer.write(e.contents);else{let t=this.writer.getPos();if(this.writeBoxHeader(e,0),e.contents&&this.writer.write(e.contents),e.children)for(let t of e.children)t&&this.writeBox(t);let r=this.writer.getPos(),i=e.size??r-t;this.writer.seek(t),this.writeBoxHeader(e,i),this.writer.seek(r)}}writeBoxHeader(e,t){this.writeU32(e.largeSize?1:t),this.writeAscii(e.type),e.largeSize&&this.writeU64(t)}measureBoxHeader(e){return 8+8*!!e.largeSize}patchBox(e){let t=this.offsets.get(e);h(void 0!==t);let r=this.writer.getPos();this.writer.seek(t),this.writeBox(e),this.writer.seek(r)}measureBox(e){if(e.contents&&!e.children)return this.measureBoxHeader(e)+e.contents.byteLength;{let t=this.measureBoxHeader(e);if(e.contents&&(t+=e.contents.byteLength),e.children)for(let r of e.children)r&&(t+=this.measureBox(r));return t}}},aX=new Uint8Array(8),aJ=new DataView(aX.buffer),aY=e=>[(e%256+256)%256],a0=e=>(aJ.setUint16(0,e,!1),[aX[0],aX[1]]),a1=e=>(aJ.setInt16(0,e,!1),[aX[0],aX[1]]),a2=e=>(aJ.setUint32(0,e,!1),[aX[1],aX[2],aX[3]]),a4=e=>(aJ.setUint32(0,e,!1),[aX[0],aX[1],aX[2],aX[3]]),a3=e=>(aJ.setInt32(0,e,!1),[aX[0],aX[1],aX[2],aX[3]]),a6=e=>(aJ.setUint32(0,Math.floor(e/0x100000000),!1),aJ.setUint32(4,e,!1),[aX[0],aX[1],aX[2],aX[3],aX[4],aX[5],aX[6],aX[7]]),a8=e=>(aJ.setInt16(0,256*e,!1),[aX[0],aX[1]]),a5=e=>(aJ.setInt32(0,65536*e,!1),[aX[0],aX[1],aX[2],aX[3]]),a7=e=>(aJ.setInt32(0,0x40000000*e,!1),[aX[0],aX[1],aX[2],aX[3]]),a9=(e,t)=>{let r=[],i=e;do{let e=127&i;i>>=7,r.length>0&&(e|=128),r.push(e),void 0!==t&&t--}while(i>0||t)return r.reverse()},ne=(e,t=!1)=>{let r=Array(e.length).fill(null).map((t,r)=>e.charCodeAt(r));return t&&r.push(0),r},nt=e=>{let t=null;for(let r of e)(!t||r.timestamp>t.timestamp)&&(t=r);return t},nr=e=>{let t=Math.PI/180*e,r=Math.round(Math.cos(t)),i=Math.round(Math.sin(t));return[r,i,0,-i,r,0,0,0,1]},ni=nr(0),na=e=>[a5(e[0]),a5(e[1]),a7(e[2]),a5(e[3]),a5(e[4]),a7(e[5]),a5(e[6]),a5(e[7]),a7(e[8])],nn=(e,t,r)=>({type:e,contents:t&&new Uint8Array(t.flat(10)),children:r}),no=(e,t,r,i,a)=>nn(e,[aY(t),a2(r),i??[]],a),ns=e=>({type:"mdat",largeSize:e}),nl=e=>nn("moov",void 0,[nu(e.creationTime,e.trackDatas),...e.trackDatas.map(t=>nc(t,e.creationTime)),e.isFragmented?nV(e.trackDatas):null,n2(e)]),nu=(e,t)=>{let r=ox(Math.max(0,...t.filter(e=>e.samples.length>0).map(e=>{let t=nt(e.samples);return t.timestamp+t.duration})),oy),i=Math.max(0,...t.map(e=>e.track.id))+1,a=!v(e)||!v(r),n=a?a6:a4;return no("mvhd",+a,0,[n(e),n(e),a4(oy),n(r),a5(1),a8(1),Array(10).fill(0),na(ni),Array(24).fill(0),a4(i)])},nc=(e,t)=>{let r=ob(e);return nn("trak",void 0,[nd(e,t),np(e,t),void 0!==r.name?nn("udta",void 0,[nn("name",[...C.encode(r.name)])]):null])},nd=(e,t)=>{let r,i=nt(e.samples),a=ox(i?i.timestamp+i.duration:0,oy),n=!v(t)||!v(a),o=n?a6:a4;r="video"===e.type?nr(e.track.metadata.rotation??0):ni;let s=2;return e.track.metadata.disposition?.default!==!1&&(s|=1),no("tkhd",+n,s,[o(t),o(t),a4(e.track.id),a4(0),o(a),Array(8).fill(0),a0(0),a0(e.track.id),a8(+("audio"===e.type)),a0(0),na(r),a5("video"===e.type?e.info.width:0),a5("video"===e.type?e.info.height:0)])},np=(e,t)=>nn("mdia",void 0,[nf(e,t),ng(!0,nh[e.type],nm[e.type]),nv(e)]),nf=(e,t)=>{let r=nt(e.samples),i=ox(r?r.timestamp+r.duration:0,e.timescale),a=!v(t)||!v(i),n=a?a6:a4;return no("mdhd",+a,0,[n(t),n(t),a4(e.timescale),n(i),a0(oo(e.track.metadata.languageCode??"und")),a0(0)])},nh={video:"vide",audio:"soun",subtitle:"text"},nm={video:"MediabunnyVideoHandler",audio:"MediabunnySoundHandler",subtitle:"MediabunnyTextHandler"},ng=(e,t,r,i="\0\0\0\0")=>no("hdlr",0,0,[e?ne("mhlr"):a4(0),ne(t),ne(i),a4(0),a4(0),ne(r,!0)]),nv=e=>nn("minf",void 0,[ny[e.type](),nb(),nS(e)]),ny={video:()=>no("vmhd",0,1,[a0(0),a0(0),a0(0),a0(0)]),audio:()=>no("smhd",0,0,[a0(0),a0(0)]),subtitle:()=>no("nmhd",0,0)},nb=()=>nn("dinf",void 0,[nx()]),nx=()=>no("dref",0,0,[a4(1)],[nw()]),nw=()=>no("url ",0,1),nS=e=>{let t=e.compositionTimeOffsetTable.length>1||e.compositionTimeOffsetTable.some(e=>0!==e.sampleCompositionTimeOffset);return nn("stbl",void 0,[nk(e),nj(e),t?nz(e):null,t?nU(e):null,nB(e),nN(e),n$(e),nL(e)])},nk=e=>{let t;if("video"===e.type)t=nC(oe(e.track.source._codec,e.info.decoderConfig.codec),e);else if("audio"===e.type){let r=or(e.track.source._codec,e.muxer.isQuickTime);h(r),t=nT(r,e)}else"subtitle"===e.type&&(t=nD(oa[e.track.source._codec],e));return h(t),no("stsd",0,0,[a4(1)],[t])},nC=(e,t)=>nn(e,[Array(6).fill(0),a0(1),a0(0),a0(0),Array(12).fill(0),a0(t.info.width),a0(t.info.height),a4(4718592),a4(4718592),a4(0),a0(1),Array(32).fill(0),a0(24),a1(65535)],[ot[t.track.source._codec](t),F(t.info.decoderConfig.colorSpace)?nE(t):null]),nE=e=>nn("colr",[ne("nclx"),a0(T[e.info.decoderConfig.colorSpace.primaries]),a0(I[e.info.decoderConfig.colorSpace.transfer]),a0(O[e.info.decoderConfig.colorSpace.matrix]),aY(!!e.info.decoderConfig.colorSpace.fullRange<<7)]),n_=e=>{if(!e.info.decoderConfig)return null;let t=e.info.decoderConfig,r=t.codec.split("."),i=Number(r[1]),a=Number(r[2]),n=Number(r[3]),o=r[4]?Number(r[4]):1,s=r[8]?Number(r[8]):Number(t.colorSpace?.fullRange??0),l=r[5]?Number(r[5]):t.colorSpace?.primaries?T[t.colorSpace.primaries]:2,u=r[6]?Number(r[6]):t.colorSpace?.transfer?I[t.colorSpace.transfer]:2,c=r[7]?Number(r[7]):t.colorSpace?.matrix?O[t.colorSpace.matrix]:2;return no("vpcC",1,0,[aY(i),aY(a),aY((n<<4)+(o<<1)+s),aY(l),aY(u),aY(c),a0(0)])},nT=(e,t)=>{let r=0,i=16;if(eT.includes(t.track.source._codec)){let{sampleSize:e}=eW(t.track.source._codec);(i=8*e)>16&&(r=1)}return nn(e,0===r?[Array(6).fill(0),a0(1),a0(r),a0(0),a4(0),a0(t.info.numberOfChannels),a0(i),a0(0),a0(0),a0(t.info.sampleRate<65536?t.info.sampleRate:0),a0(0)]:[Array(6).fill(0),a0(1),a0(r),a0(0),a4(0),a0(t.info.numberOfChannels),a0(Math.min(i,16)),a0(0),a0(0),a0(t.info.sampleRate<65536?t.info.sampleRate:0),a0(0),a4(1),a4(i/8),a4(t.info.numberOfChannels*i/8),a4(2)],[oi(t.track.source._codec,t.muxer.isQuickTime)?.(t)??null])},nP=e=>{let t;switch(e.track.source._codec){case"aac":t=64;break;case"mp3":t=107;break;case"vorbis":t=221;break;default:throw Error(`Unhandled audio codec: ${e.track.source._codec}`)}let r=[...aY(t),...aY(21),...a2(0),...a4(0),...a4(0)];if(e.info.decoderConfig.description){let t=w(e.info.decoderConfig.description);r=[...r,...aY(5),...a9(t.byteLength),...t]}return r=[...a0(1),...aY(0),...aY(4),...a9(r.length),...r,...aY(6),...aY(1),...aY(2)],no("esds",0,0,r=[...aY(3),...a9(r.length),...r])},nI=e=>nn("wave",void 0,[nA(e),nO(e),nn("\0\0\0\0")]),nA=e=>nn("frma",[ne(or(e.track.source._codec,e.muxer.isQuickTime))]),nO=e=>{let{littleEndian:t}=eW(e.track.source._codec);return nn("enda",[a0(+t)])},nM=e=>{let t=e.info.numberOfChannels,r=3840,i=e.info.sampleRate,a=0,n=0,o=new Uint8Array(0),s=e.info.decoderConfig?.description;if(s){h(s.byteLength>=18);let e=tC(w(s));t=e.outputChannelCount,r=e.preSkip,i=e.inputSampleRate,a=e.outputGain,n=e.channelMappingFamily,e.channelMappingTable&&(o=e.channelMappingTable)}return nn("dOps",[aY(0),aY(t),a0(r),a4(i),a1(a),aY(n),...o])},nF=e=>{let t=e.info.decoderConfig?.description;return h(t),no("dfLa",0,0,[...w(t).subarray(4)])},nR=e=>{let{littleEndian:t,sampleSize:r}=eW(e.track.source._codec);return no("pcmC",0,0,[aY(+t),aY(8*r)])},nD=(e,t)=>nn(e,[Array(6).fill(0),a0(1)],[on[t.track.source._codec](t)]),nj=e=>no("stts",0,0,[a4(e.timeToSampleTable.length),e.timeToSampleTable.map(e=>[a4(e.sampleCount),a4(e.sampleDelta)])]),nL=e=>{if(e.samples.every(e=>"key"===e.type))return null;let t=[...e.samples.entries()].filter(([,e])=>"key"===e.type);return no("stss",0,0,[a4(t.length),t.map(([e])=>a4(e+1))])},nB=e=>no("stsc",0,0,[a4(e.compactlyCodedChunkTable.length),e.compactlyCodedChunkTable.map(e=>[a4(e.firstChunk),a4(e.samplesPerChunk),a4(1)])]),nN=e=>{if("audio"===e.type&&e.info.requiresPcmTransformation){let{sampleSize:t}=eW(e.track.source._codec);return no("stsz",0,0,[a4(t*e.info.numberOfChannels),a4(e.samples.reduce((t,r)=>t+ox(r.duration,e.timescale),0))])}return no("stsz",0,0,[a4(0),a4(e.samples.length),e.samples.map(e=>a4(e.size))])},n$=e=>e.finalizedChunks.length>0&&g(e.finalizedChunks).offset>=0x100000000?no("co64",0,0,[a4(e.finalizedChunks.length),e.finalizedChunks.map(e=>a6(e.offset))]):no("stco",0,0,[a4(e.finalizedChunks.length),e.finalizedChunks.map(e=>a4(e.offset))]),nz=e=>no("ctts",1,0,[a4(e.compositionTimeOffsetTable.length),e.compositionTimeOffsetTable.map(e=>[a4(e.sampleCount),a3(e.sampleCompositionTimeOffset)])]),nU=e=>{let t=1/0,r=-1/0,i=1/0,a=-1/0;h(e.compositionTimeOffsetTable.length>0),h(e.samples.length>0);for(let i=0;i<e.compositionTimeOffsetTable.length;i++){let a=e.compositionTimeOffsetTable[i];t=Math.min(t,a.sampleCompositionTimeOffset),r=Math.max(r,a.sampleCompositionTimeOffset)}for(let t=0;t<e.samples.length;t++){let r=e.samples[t];i=Math.min(i,ox(r.timestamp,e.timescale)),a=Math.max(a,ox(r.timestamp+r.duration,e.timescale))}let n=Math.max(-t,0);return a>=0x80000000?null:no("cslg",0,0,[a3(n),a3(t),a3(r),a3(i),a3(a)])},nV=e=>nn("mvex",void 0,e.map(nH)),nH=e=>no("trex",0,0,[a4(e.track.id),a4(1),a4(0),a4(0),a4(0)]),nW=(e,t)=>nn("moof",void 0,[nq(e),...t.map(nZ)]),nq=e=>no("mfhd",0,0,[a4(e)]),nG=e=>{let t=0,r=0,i="delta"===e.type;return r|=i,i?t|=1:t|=2,t<<24|r<<16},nZ=e=>nn("traf",void 0,[nK(e),nQ(e),nX(e)]),nK=e=>{h(e.currentChunk);let t=e.currentChunk.samples[1]??e.currentChunk.samples[0],r={duration:t.timescaleUnitsToNextSample,size:t.size,flags:nG(t)};return no("tfhd",0,131128,[a4(e.track.id),a4(r.duration),a4(r.size),a4(r.flags)])},nQ=e=>(h(e.currentChunk),no("tfdt",1,0,[a6(ox(e.currentChunk.startTimestamp,e.timescale))])),nX=e=>{h(e.currentChunk);let t=e.currentChunk.samples.map(e=>e.timescaleUnitsToNextSample),r=e.currentChunk.samples.map(e=>e.size),i=e.currentChunk.samples.map(nG),a=e.currentChunk.samples.map(t=>ox(t.timestamp-t.decodeTimestamp,e.timescale)),n=new Set(t),o=new Set(r),s=new Set(i),l=new Set(a),u=2===s.size&&i[0]!==i[1],c=n.size>1,d=o.size>1,p=!u&&s.size>1,f=l.size>1||[...l].some(e=>0!==e);return no("trun",1,1|4*u|256*c|512*d|1024*p|2048*f,[a4(e.currentChunk.samples.length),a4(e.currentChunk.offset-e.currentChunk.moofOffset||0),u?a4(i[0]):[],e.currentChunk.samples.map((e,n)=>[c?a4(t[n]):[],d?a4(r[n]):[],p?a4(i[n]):[],f?a3(a[n]):[]])])},nJ=(e,t)=>no("tfra",1,0,[a4(e.track.id),a4(63),a4(e.finalizedChunks.length),e.finalizedChunks.map(r=>[a6(ox(r.samples[0].timestamp,e.timescale)),a6(r.moofOffset),a4(t+1),a4(1),a4(1)])]),nY=()=>nn("vtte"),n0=(e,t,r,i,a)=>nn("vttc",void 0,[null!==a?nn("vsid",[a3(a)]):null,null!==r?nn("iden",[...C.encode(r)]):null,null!==t?nn("ctim",[...C.encode(aK(t))]):null,null!==i?nn("sttg",[...C.encode(i)]):null,nn("payl",[...C.encode(e)])]),n1=e=>nn("vtta",[...C.encode(e)]),n2=e=>{let t=[],r=e.format._options.metadataFormat??"auto",i=e.output._metadataTags;if("mdir"!==r&&("auto"!==r||e.isQuickTime))if("mdta"===r){let e=n7(i);e&&t.push(e)}else("udta"===r||"auto"===r&&e.isQuickTime)&&n4(t,e.output._metadataTags);else{let e=n5(i);e&&t.push(e)}return 0===t.length?null:nn("udta",void 0,t)},n4=(e,t)=>{for(let{key:r,value:i}of eh(t))switch(r){case"title":e.push(n3("nam",i));break;case"description":e.push(n3("des",i));break;case"artist":e.push(n3("ART",i));break;case"album":e.push(n3("alb",i));break;case"albumArtist":e.push(n3("albr",i));break;case"genre":e.push(n3("gen",i));break;case"date":e.push(n3("day",i.toISOString().slice(0,10)));break;case"comment":e.push(n3("cmt",i));break;case"lyrics":e.push(n3("lyr",i));break;case"raw":case"discNumber":case"discsTotal":case"trackNumber":case"tracksTotal":case"images":break;default:W(r)}if(t.raw)for(let r in t.raw){let i=t.raw[r];!(null==i||4!==r.length||e.some(e=>e.type===r))&&("string"==typeof i?e.push(n3(r,i)):i instanceof Uint8Array&&e.push(nn(r,Array.from(i))))}},n3=(e,t)=>{let r=C.encode(t);return nn(e,[a0(r.length),a0(oo("und")),Array.from(r)])},n6={"image/jpeg":13,"image/png":14,"image/bmp":27},n8=(e,t)=>{let r=[];for(let{key:i,value:a}of eh(e))switch(i){case"title":r.push({key:t?"title":"nam",value:n9(a)});break;case"description":r.push({key:t?"description":"des",value:n9(a)});break;case"artist":r.push({key:t?"artist":"ART",value:n9(a)});break;case"album":r.push({key:t?"album":"alb",value:n9(a)});break;case"albumArtist":r.push({key:t?"album_artist":"aART",value:n9(a)});break;case"comment":r.push({key:t?"comment":"cmt",value:n9(a)});break;case"genre":r.push({key:t?"genre":"gen",value:n9(a)});break;case"lyrics":r.push({key:t?"lyrics":"lyr",value:n9(a)});break;case"date":r.push({key:t?"date":"day",value:n9(a.toISOString().slice(0,10))});break;case"images":for(let e of a)"coverFront"===e.kind&&r.push({key:"covr",value:nn("data",[a4(n6[e.mimeType]??0),a4(0),Array.from(e.data)])});break;case"trackNumber":if(t){let t=void 0!==e.tracksTotal?`${a}/${e.tracksTotal}`:a.toString();r.push({key:"track",value:n9(t)})}else r.push({key:"trkn",value:nn("data",[a4(0),a4(0),a0(0),a0(a),a0(e.tracksTotal??0),a0(0)])});break;case"discNumber":t||r.push({key:"disc",value:nn("data",[a4(0),a4(0),a0(0),a0(a),a0(e.discsTotal??0),a0(0)])});break;case"tracksTotal":case"discsTotal":case"raw":break;default:W(i)}if(e.raw)for(let i in e.raw){let a=e.raw[i];!(null==a||!t&&4!==i.length||r.some(e=>e.key===i))&&("string"==typeof a?r.push({key:i,value:n9(a)}):a instanceof Uint8Array?r.push({key:i,value:nn("data",[a4(0),a4(0),Array.from(a)])}):a instanceof ew&&r.push({key:i,value:nn("data",[a4(n6[a.mimeType]??0),a4(0),Array.from(a.data)])}))}return r},n5=e=>{let t=n8(e,!1);return 0===t.length?null:no("meta",0,0,void 0,[ng(!1,"mdir","","appl"),nn("ilst",void 0,t.map(e=>nn(e.key,void 0,[e.value])))])},n7=e=>{let t=n8(e,!0);return 0===t.length?null:nn("meta",void 0,[ng(!1,"mdta",""),no("keys",0,0,[a4(t.length)],t.map(e=>nn("mdta",[...C.encode(e.key)]))),nn("ilst",void 0,t.map((e,t)=>nn(String.fromCharCode(...a4(t+1)),void 0,[e.value])))])},n9=e=>nn("data",[a4(1),a4(0),...C.encode(e)]),oe=(e,t)=>{switch(e){case"avc":return t.startsWith("avc3")?"avc3":"avc1";case"hevc":return"hvc1";case"vp8":return"vp08";case"vp9":return"vp09";case"av1":return"av01"}},ot={avc:e=>e.info.decoderConfig&&nn("avcC",[...w(e.info.decoderConfig.description)]),hevc:e=>e.info.decoderConfig&&nn("hvcC",[...w(e.info.decoderConfig.description)]),vp8:n_,vp9:n_,av1:e=>nn("av1C",eL(e.info.decoderConfig.codec))},or=(e,t)=>{switch(e){case"aac":case"mp3":case"vorbis":return"mp4a";case"opus":return"Opus";case"flac":return"fLaC";case"ulaw":return"ulaw";case"alaw":return"alaw";case"pcm-u8":return"raw ";case"pcm-s8":return"sowt"}if(t)switch(e){case"pcm-s16":return"sowt";case"pcm-s16be":return"twos";case"pcm-s24":case"pcm-s24be":return"in24";case"pcm-s32":case"pcm-s32be":return"in32";case"pcm-f32":case"pcm-f32be":return"fl32";case"pcm-f64":case"pcm-f64be":return"fl64"}else switch(e){case"pcm-s16":case"pcm-s16be":case"pcm-s24":case"pcm-s24be":case"pcm-s32":case"pcm-s32be":return"ipcm";case"pcm-f32":case"pcm-f32be":case"pcm-f64":case"pcm-f64be":return"fpcm"}},oi=(e,t)=>{switch(e){case"aac":case"mp3":case"vorbis":return nP;case"opus":return nM;case"flac":return nF}if(t)switch(e){case"pcm-s24":case"pcm-s24be":case"pcm-s32":case"pcm-s32be":case"pcm-f32":case"pcm-f32be":case"pcm-f64":case"pcm-f64be":return nI}else switch(e){case"pcm-s16":case"pcm-s16be":case"pcm-s24":case"pcm-s24be":case"pcm-s32":case"pcm-s32be":case"pcm-f32":case"pcm-f32be":case"pcm-f64":case"pcm-f64be":return nR}return null},oa={webvtt:"wvtt"},on={webvtt:e=>nn("vttC",[...C.encode(e.info.config.description)])},oo=e=>{h(3===e.length);let t=0;for(let r=0;r<3;r++)t<<=5,t+=e.charCodeAt(r)-96;return t},os=class{constructor(){this.ensureMonotonicity=!1,this.trackedWrites=null,this.trackedStart=-1,this.trackedEnd=-1}start(){}maybeTrackWrites(e){if(!this.trackedWrites)return;let t=this.getPos();if(t<this.trackedStart){if(t+e.byteLength<=this.trackedStart)return;e=e.subarray(this.trackedStart-t),t=0}let r=t+e.byteLength-this.trackedStart,i=this.trackedWrites.byteLength;for(;i<r;)i*=2;if(i!==this.trackedWrites.byteLength){let e=new Uint8Array(i);e.set(this.trackedWrites,0),this.trackedWrites=e}this.trackedWrites.set(e,t-this.trackedStart),this.trackedEnd=Math.max(this.trackedEnd,t+e.byteLength)}startTrackingWrites(){this.trackedWrites=new Uint8Array(1024),this.trackedStart=this.getPos(),this.trackedEnd=this.trackedStart}stopTrackingWrites(){if(!this.trackedWrites)throw Error("Internal error: Can't get tracked writes since nothing was tracked.");let e={data:this.trackedWrites.subarray(0,this.trackedEnd-this.trackedStart),start:this.trackedStart,end:this.trackedEnd};return this.trackedWrites=null,e}},ol=class extends os{constructor(e){if(super(),this.pos=0,this.maxPos=0,this.target=e,this.supportsResize="resize"in new ArrayBuffer(0),this.supportsResize)try{this.buffer=new ArrayBuffer(65536,{maxByteLength:0x100000000})}catch{this.buffer=new ArrayBuffer(65536),this.supportsResize=!1}else this.buffer=new ArrayBuffer(65536);this.bytes=new Uint8Array(this.buffer)}ensureSize(e){let t=this.buffer.byteLength;for(;t<e;)t*=2;if(t!==this.buffer.byteLength){if(t>0x100000000)throw Error("ArrayBuffer exceeded maximum size of 4294967296 bytes. Please consider using another target.");if(this.supportsResize)this.buffer.resize(t);else{let e=new ArrayBuffer(t),r=new Uint8Array(e);r.set(this.bytes,0),this.buffer=e,this.bytes=r}}}write(e){this.maybeTrackWrites(e),this.ensureSize(this.pos+e.byteLength),this.bytes.set(e,this.pos),this.target.onwrite?.(this.pos,this.pos+e.byteLength),this.pos+=e.byteLength,this.maxPos=Math.max(this.maxPos,this.pos)}seek(e){this.pos=e}getPos(){return this.pos}async flush(){}async finalize(){this.ensureSize(this.pos),this.target.buffer=this.buffer.slice(0,Math.max(this.maxPos,this.pos))}async close(){}getSlice(e,t){return this.bytes.slice(e,t)}},ou=class extends os{constructor(e){super(),this.pos=0,this.sections=[],this.lastWriteEnd=0,this.lastFlushEnd=0,this.writer=null,this.chunks=[],this.target=e,this.chunked=e._options.chunked??!1,this.chunkSize=e._options.chunkSize??0x1000000}start(){this.writer=this.target._writable.getWriter()}write(e){if(this.pos>this.lastWriteEnd){let e=this.pos-this.lastWriteEnd;this.pos=this.lastWriteEnd,this.write(new Uint8Array(e))}this.maybeTrackWrites(e),this.sections.push({data:e.slice(),start:this.pos}),this.target.onwrite?.(this.pos,this.pos+e.byteLength),this.pos+=e.byteLength,this.lastWriteEnd=Math.max(this.lastWriteEnd,this.pos)}seek(e){this.pos=e}getPos(){return this.pos}async flush(){if(this.pos>this.lastWriteEnd){let e=this.pos-this.lastWriteEnd;this.pos=this.lastWriteEnd,this.write(new Uint8Array(e))}if(h(this.writer),0===this.sections.length)return;let e=[],t=[...this.sections].sort((e,t)=>e.start-t.start);e.push({start:t[0].start,size:t[0].data.byteLength});for(let r=1;r<t.length;r++){let i=e[e.length-1],a=t[r];a.start<=i.start+i.size?i.size=Math.max(i.size,a.start+a.data.byteLength-i.start):e.push({start:a.start,size:a.data.byteLength})}for(let t of e){for(let e of(t.data=new Uint8Array(t.size),this.sections))t.start<=e.start&&e.start<t.start+t.size&&t.data.set(e.data,e.start-t.start);if(null!==this.writer.desiredSize&&this.writer.desiredSize<=0&&await this.writer.ready,this.chunked)this.writeDataIntoChunks(t.data,t.start),this.tryToFlushChunks();else{if(this.ensureMonotonicity&&t.start!==this.lastFlushEnd)throw Error("Internal error: Monotonicity violation.");this.writer.write({type:"write",data:t.data,position:t.start}),this.lastFlushEnd=t.start+t.data.byteLength}}this.sections.length=0}writeDataIntoChunks(e,t){let r=this.chunks.findIndex(e=>e.start<=t&&t<e.start+this.chunkSize);-1===r&&(r=this.createChunk(t));let i=this.chunks[r],a=t-i.start,n=e.subarray(0,Math.min(this.chunkSize-a,e.byteLength));i.data.set(n,a);let o={start:a,end:a+n.byteLength};if(this.insertSectionIntoChunk(i,o),0===i.written[0].start&&i.written[0].end===this.chunkSize&&(i.shouldFlush=!0),this.chunks.length>2){for(let e=0;e<this.chunks.length-1;e++)this.chunks[e].shouldFlush=!0;this.tryToFlushChunks()}n.byteLength<e.byteLength&&this.writeDataIntoChunks(e.subarray(n.byteLength),t+n.byteLength)}insertSectionIntoChunk(e,t){let r=0,i=e.written.length-1,a=-1;for(;r<=i;){let n=Math.floor(r+(i-r+1)/2);e.written[n].start<=t.start?(r=n+1,a=n):i=n-1}for(e.written.splice(a+1,0,t),(-1===a||e.written[a].end<t.start)&&a++;a<e.written.length-1&&e.written[a].end>=e.written[a+1].start;)e.written[a].end=Math.max(e.written[a].end,e.written[a+1].end),e.written.splice(a+1,1)}createChunk(e){let t={start:Math.floor(e/this.chunkSize)*this.chunkSize,data:new Uint8Array(this.chunkSize),written:[],shouldFlush:!1};return this.chunks.push(t),this.chunks.sort((e,t)=>e.start-t.start),this.chunks.indexOf(t)}tryToFlushChunks(e=!1){h(this.writer);for(let t=0;t<this.chunks.length;t++){let r=this.chunks[t];if(r.shouldFlush||e){for(let e of r.written){let t=r.start+e.start;if(this.ensureMonotonicity&&t!==this.lastFlushEnd)throw Error("Internal error: Monotonicity violation.");this.writer.write({type:"write",data:r.data.subarray(e.start,e.end),position:t}),this.lastFlushEnd=r.start+e.end}this.chunks.splice(t--,1)}}}finalize(){return this.chunked&&this.tryToFlushChunks(!0),h(this.writer),this.writer.close()}async close(){return this.writer?.close()}},oc=class extends os{constructor(e){super(),this.target=e,this.pos=0}write(e){this.maybeTrackWrites(e),this.target.onwrite?.(this.pos,this.pos+e.byteLength),this.pos+=e.byteLength}getPos(){return this.pos}seek(e){this.pos=e}async flush(){}async finalize(){}async close(){}},od=u(c(),1),op=void 0!==od?od:void 0,of=class{constructor(){this._output=null,this.onwrite=null}},oh=class extends of{constructor(){super(...arguments),this.buffer=null}_createWriter(){return new ol(this)}},om=class extends of{constructor(e,t={}){if(super(),!(e instanceof WritableStream))throw TypeError("StreamTarget requires a WritableStream instance.");if(null!=t&&"object"!=typeof t)throw TypeError("StreamTarget options, when provided, must be an object.");if(void 0!==t.chunked&&"boolean"!=typeof t.chunked)throw TypeError("options.chunked, when provided, must be a boolean.");if(void 0!==t.chunkSize&&(!Number.isInteger(t.chunkSize)||t.chunkSize<1024))throw TypeError("options.chunkSize, when provided, must be an integer and not smaller than 1024.");this._writable=e,this._options=t}_createWriter(){return new ou(this)}},og=class extends of{constructor(e,t={}){if("string"!=typeof e)throw TypeError("filePath must be a string.");if(!t||"object"!=typeof t)throw TypeError("options must be an object.");super(),this._fileHandle=null;const r=new WritableStream({start:async()=>{this._fileHandle=await op.fs.open(e,"w")},write:async e=>{h(this._fileHandle),await this._fileHandle.write(e.data,0,e.data.byteLength,e.position)},close:async()=>{this._fileHandle&&(await this._fileHandle.close(),this._fileHandle=null)}});this._streamTarget=new om(r,{chunked:!0,...t}),this._streamTarget._output=this._output}_createWriter(){return this._streamTarget._createWriter()}},ov=class extends of{_createWriter(){return new oc(this)}},oy=1e3,ob=e=>{let t={},r=e.track;return void 0!==r.metadata.name&&(t.name=r.metadata.name),t},ox=(e,t,r=!0)=>{let i=e*t;return r?Math.round(i):i},ow=class extends e2{constructor(e,t){super(e),this.auxTarget=new oh,this.auxWriter=this.auxTarget._createWriter(),this.auxBoxWriter=new aQ(this.auxWriter),this.mdat=null,this.ftypSize=null,this.trackDatas=[],this.allTracksKnown=z(),this.creationTime=Math.floor(Date.now()/1e3)+0x7c25b080,this.finalizedChunks=[],this.nextFragmentNumber=1,this.maxWrittenTimestamp=-1/0,this.format=t,this.writer=e._writer,this.boxWriter=new aQ(this.writer),this.isQuickTime=t instanceof o$;const r=this.writer instanceof ol&&"in-memory";this.fastStart=t._options.fastStart??r,this.isFragmented="fragmented"===this.fastStart,("in-memory"===this.fastStart||this.isFragmented)&&(this.writer.ensureMonotonicity=!0),this.minimumFragmentDuration=t._options.minimumFragmentDuration??1}async start(){var e;let t=await this.mutex.acquire(),r=this.output._tracks.some(e=>"video"===e.type&&"avc"===e.source._codec);if(this.format._options.onFtyp&&this.writer.startTrackingWrites(),this.boxWriter.writeBox((e={isQuickTime:this.isQuickTime,holdsAvc:r,fragmented:this.isFragmented}).isQuickTime?nn("ftyp",[ne("qt  "),a4(512),ne("qt  ")]):e.fragmented?nn("ftyp",[ne("iso5"),a4(512),ne("iso5"),ne("iso6"),ne("mp41")]):nn("ftyp",[ne("isom"),a4(512),ne("isom"),e.holdsAvc?ne("avc1"):[],ne("mp41")])),this.format._options.onFtyp){let{data:e,start:t}=this.writer.stopTrackingWrites();this.format._options.onFtyp(e,t)}if(this.ftypSize=this.writer.getPos(),"in-memory"===this.fastStart);else if("reserve"===this.fastStart){for(let e of this.output._tracks)if(void 0===e.metadata.maximumPacketCount)throw Error("All tracks must specify maximumPacketCount in their metadata when using fastStart: 'reserve'.")}else this.isFragmented||(this.format._options.onMdat&&this.writer.startTrackingWrites(),this.mdat=ns(!0),this.boxWriter.writeBox(this.mdat));await this.writer.flush(),t()}allTracksAreKnown(){for(let e of this.output._tracks)if(!e.source._closed&&!this.trackDatas.some(t=>t.track===e))return!1;return!0}async getMimeType(){await this.allTracksKnown.promise;let e=this.trackDatas.map(e=>"video"===e.type||"audio"===e.type?e.info.decoderConfig.codec:({webvtt:"wvtt"})[e.track.source._codec]);return ry({isQuickTime:this.isQuickTime,hasVideo:this.trackDatas.some(e=>"video"===e.type),hasAudio:this.trackDatas.some(e=>"audio"===e.type),codecStrings:e})}getVideoTrackData(e,t,r){let i=this.trackDatas.find(t=>t.track===e);if(i)return i;eJ(r),h(r),h(r.decoderConfig);let a={...r.decoderConfig};h(void 0!==a.codedWidth),h(void 0!==a.codedHeight);let n=!1;if("avc"!==e.source._codec||a.description){if("hevc"===e.source._codec&&!a.description){let e=tf(t.data);if(!e)throw Error("Couldn't extract an HEVCDecoderConfigurationRecord from the HEVC packet. Make sure the packets are in Annex B format (as specified in ITU-T-REC-H.265) when not providing a description, or provide a description (must be an HEVCDecoderConfigurationRecord as specified in ISO 14496-15) and ensure the packets are in HEVC format.");a.description=(e=>{let t=[];for(let r of(t.push(e.configurationVersion),t.push((3&e.generalProfileSpace)<<6|(1&e.generalTierFlag)<<5|31&e.generalProfileIdc),t.push(e.generalProfileCompatibilityFlags>>>24&255),t.push(e.generalProfileCompatibilityFlags>>>16&255),t.push(e.generalProfileCompatibilityFlags>>>8&255),t.push(255&e.generalProfileCompatibilityFlags),t.push(...e.generalConstraintIndicatorFlags),t.push(255&e.generalLevelIdc),t.push(240|e.minSpatialSegmentationIdc>>8&15),t.push(255&e.minSpatialSegmentationIdc),t.push(252|3&e.parallelismType),t.push(252|3&e.chromaFormatIdc),t.push(248|7&e.bitDepthLumaMinus8),t.push(248|7&e.bitDepthChromaMinus8),t.push(e.avgFrameRate>>8&255),t.push(255&e.avgFrameRate),t.push((3&e.constantFrameRate)<<6|(7&e.numTemporalLayers)<<3|(1&e.temporalIdNested)<<2|3&e.lengthSizeMinusOne),t.push(255&e.arrays.length),e.arrays))for(let e of(t.push((1&r.arrayCompleteness)<<7|63&r.nalUnitType),t.push(r.nalUnits.length>>8&255),t.push(255&r.nalUnits.length),r.nalUnits)){t.push(e.length>>8&255),t.push(255&e.length);for(let r=0;r<e.length;r++)t.push(e[r])}return new Uint8Array(t)})(e),n=!0}}else{let e=tn(t.data);if(!e)throw Error("Couldn't extract an AVCDecoderConfigurationRecord from the AVC packet. Make sure the packets are in Annex B format (as specified in ITU-T-REC-H.264) when not providing a description, or provide a description (must be an AVCDecoderConfigurationRecord as specified in ISO 14496-15) and ensure the packets are in AVCC format.");a.description=(e=>{let t=[];for(let r of(t.push(e.configurationVersion),t.push(e.avcProfileIndication),t.push(e.profileCompatibility),t.push(e.avcLevelIndication),t.push(252|3&e.lengthSizeMinusOne),t.push(224|31&e.sequenceParameterSets.length),e.sequenceParameterSets)){let e=r.byteLength;t.push(e>>8),t.push(255&e);for(let i=0;i<e;i++)t.push(r[i])}for(let r of(t.push(e.pictureParameterSets.length),e.pictureParameterSets)){let e=r.byteLength;t.push(e>>8),t.push(255&e);for(let i=0;i<e;i++)t.push(r[i])}if(100===e.avcProfileIndication||110===e.avcProfileIndication||122===e.avcProfileIndication||144===e.avcProfileIndication)for(let r of(h(null!==e.chromaFormat),h(null!==e.bitDepthLumaMinus8),h(null!==e.bitDepthChromaMinus8),h(null!==e.sequenceParameterSetExt),t.push(252|3&e.chromaFormat),t.push(248|7&e.bitDepthLumaMinus8),t.push(248|7&e.bitDepthChromaMinus8),t.push(e.sequenceParameterSetExt.length),e.sequenceParameterSetExt)){let e=r.byteLength;t.push(e>>8),t.push(255&e);for(let i=0;i<e;i++)t.push(r[i])}return new Uint8Array(t)})(e),n=!0}let o=((e,t)=>{let r=e<0?-1:1,i=0,a=1,n=1,o=0,s=e=Math.abs(e);for(;;){let e=Math.floor(s),r=e*n+i,l=e*o+a;if(l>t||(i=n,a=o,n=r,o=l,!isFinite(s=1/(s-e))))break}return{numerator:r*n,denominator:o}})(1/(e.metadata.frameRate??57600),1e6).denominator,s={muxer:this,track:e,type:"video",info:{width:a.codedWidth,height:a.codedHeight,decoderConfig:a,requiresAnnexBTransformation:n},timescale:o,samples:[],sampleQueue:[],timestampProcessingQueue:[],timeToSampleTable:[],compositionTimeOffsetTable:[],lastTimescaleUnits:null,lastSample:null,finalizedChunks:[],currentChunk:null,compactlyCodedChunkTable:[]};return this.trackDatas.push(s),this.trackDatas.sort((e,t)=>e.track.id-t.track.id),this.allTracksAreKnown()&&this.allTracksKnown.resolve(),s}getAudioTrackData(e,t,r){let i=this.trackDatas.find(t=>t.track===e);if(i)return i;e0(r),h(r),h(r.decoderConfig);let a={...r.decoderConfig},n=!1;if("aac"===e.source._codec&&!a.description){let e=iA(aS.tempFromBytes(t.data));if(!e)throw Error("Couldn't parse ADTS header from the AAC packet. Make sure the packets are in ADTS format (as specified in ISO 13818-7) when not providing a description, or provide a description (must be an AudioSpecificConfig as specified in ISO 14496-3) and ensure the packets are raw AAC data.");let r=e$[e.samplingFrequencyIndex],i=ez[e.channelConfiguration];if(void 0===r||void 0===i)throw Error("Invalid ADTS frame header.");a.description=eV({objectType:e.objectType,sampleRate:r,numberOfChannels:i}),n=!0}let o={muxer:this,track:e,type:"audio",info:{numberOfChannels:r.decoderConfig.numberOfChannels,sampleRate:r.decoderConfig.sampleRate,decoderConfig:a,requiresPcmTransformation:!this.isFragmented&&eT.includes(e.source._codec),requiresAdtsStripping:n},timescale:r.decoderConfig.sampleRate,samples:[],sampleQueue:[],timestampProcessingQueue:[],timeToSampleTable:[],compositionTimeOffsetTable:[],lastTimescaleUnits:null,lastSample:null,finalizedChunks:[],currentChunk:null,compactlyCodedChunkTable:[]};return this.trackDatas.push(o),this.trackDatas.sort((e,t)=>e.track.id-t.track.id),this.allTracksAreKnown()&&this.allTracksKnown.resolve(),o}getSubtitleTrackData(e,t){let r=this.trackDatas.find(t=>t.track===e);if(r)return r;e1(t),h(t),h(t.config);let i={muxer:this,track:e,type:"subtitle",info:{config:t.config},timescale:1e3,samples:[],sampleQueue:[],timestampProcessingQueue:[],timeToSampleTable:[],compositionTimeOffsetTable:[],lastTimescaleUnits:null,lastSample:null,finalizedChunks:[],currentChunk:null,compactlyCodedChunkTable:[],lastCueEndTimestamp:0,cueQueue:[],nextSourceId:0,cueToSourceId:new WeakMap};return this.trackDatas.push(i),this.trackDatas.sort((e,t)=>e.track.id-t.track.id),this.allTracksAreKnown()&&this.allTracksKnown.resolve(),i}async addEncodedVideoPacket(e,t,r){let i=await this.mutex.acquire();try{let i=this.getVideoTrackData(e,t,r),a=t.data;if(i.info.requiresAnnexBTransformation){let e=[...e8(a)].map(e=>a.subarray(e.offset,e.offset+e.length));if(0===e.length)throw Error("Failed to transform packet data. Make sure all packets are provided in Annex B format, as specified in ITU-T-REC-H.264 and ITU-T-REC-H.265.");a=ta(e,4)}let n=this.validateAndNormalizeTimestamp(i.track,t.timestamp,"key"===t.type),o=this.createSampleForTrack(i,a,n,t.duration,t.type);await this.registerSample(i,o)}finally{i()}}async addEncodedAudioPacket(e,t,r){let i=await this.mutex.acquire();try{let i=this.getAudioTrackData(e,t,r),a=t.data;if(i.info.requiresAdtsStripping){let e=iA(aS.tempFromBytes(a));if(!e)throw Error("Expected ADTS frame, didn't get one.");let t=null===e.crcCheck?7:9;a=a.subarray(t)}let n=this.validateAndNormalizeTimestamp(i.track,t.timestamp,"key"===t.type),o=this.createSampleForTrack(i,a,n,t.duration,t.type);i.info.requiresPcmTransformation&&await this.maybePadWithSilence(i,n),await this.registerSample(i,o)}finally{i()}}async maybePadWithSilence(e,t){let r=g(e.samples),i=r?r.timestamp+r.duration:0,a=t-i,n=ox(a,e.timescale);if(n>0){let{sampleSize:t,silentValue:r}=eW(e.info.decoderConfig.codec),o=new Uint8Array(t*(n*e.info.numberOfChannels)).fill(r),s=this.createSampleForTrack(e,new Uint8Array(o.buffer),i,a,"key");await this.registerSample(e,s)}}async addSubtitleCue(e,t,r){let i=await this.mutex.acquire();try{let i=this.getSubtitleTrackData(e,r);this.validateAndNormalizeTimestamp(i.track,t.timestamp,!0),"webvtt"===e.source._codec&&(i.cueQueue.push(t),await this.processWebVTTCues(i,t.timestamp))}finally{i()}}async processWebVTTCues(e,t){for(;e.cueQueue.length>0;){let r=new Set([]);for(let i of e.cueQueue)h(i.timestamp<=t),h(e.lastCueEndTimestamp<=i.timestamp+i.duration),r.add(Math.max(i.timestamp,e.lastCueEndTimestamp)),r.add(i.timestamp+i.duration);let i=[...r].sort((e,t)=>e-t),a=i[0],n=i[1]??a;if(t<n)break;if(e.lastCueEndTimestamp<a){this.auxWriter.seek(0);let t=nY();this.auxBoxWriter.writeBox(t);let r=this.auxWriter.getSlice(0,this.auxWriter.getPos()),i=this.createSampleForTrack(e,r,e.lastCueEndTimestamp,a-e.lastCueEndTimestamp,"key");await this.registerSample(e,i),e.lastCueEndTimestamp=a}this.auxWriter.seek(0);for(let t=0;t<e.cueQueue.length;t++){let r=e.cueQueue[t];if(r.timestamp>=n)break;aW.lastIndex=0;let i=aW.test(r.text),o=r.timestamp+r.duration,s=e.cueToSourceId.get(r);if(void 0===s&&n<o&&(s=e.nextSourceId++,e.cueToSourceId.set(r,s)),r.notes){let e=n1(r.notes);this.auxBoxWriter.writeBox(e)}let l=n0(r.text,i?a:null,r.identifier??null,r.settings??null,s??null);this.auxBoxWriter.writeBox(l),o===n&&e.cueQueue.splice(t--,1)}let o=this.auxWriter.getSlice(0,this.auxWriter.getPos()),s=this.createSampleForTrack(e,o,a,n-a,"key");await this.registerSample(e,s),e.lastCueEndTimestamp=n}}createSampleForTrack(e,t,r,i,a){return{timestamp:r,decodeTimestamp:r,duration:i,data:t,size:t.byteLength,type:a,timescaleUnitsToNextSample:ox(i,e.timescale)}}processTimestamps(e,t){if(0===e.timestampProcessingQueue.length)return;if("audio"===e.type&&e.info.requiresPcmTransformation){let t=0;for(let r=0;r<e.timestampProcessingQueue.length;r++)t+=ox(e.timestampProcessingQueue[r].duration,e.timescale);if(0===e.timeToSampleTable.length)e.timeToSampleTable.push({sampleCount:t,sampleDelta:1});else{let r=g(e.timeToSampleTable);r.sampleCount+=t}e.timestampProcessingQueue.length=0;return}let r=e.timestampProcessingQueue.map(e=>e.timestamp).sort((e,t)=>e-t);for(let t=0;t<e.timestampProcessingQueue.length;t++){let i=e.timestampProcessingQueue[t];i.decodeTimestamp=r[t],this.isFragmented||null!==e.lastTimescaleUnits||(i.decodeTimestamp=0);let a=ox(i.timestamp-i.decodeTimestamp,e.timescale),n=ox(i.duration,e.timescale);if(null!==e.lastTimescaleUnits){h(e.lastSample);let t=Math.round(ox(i.decodeTimestamp,e.timescale,!1)-e.lastTimescaleUnits);if(h(t>=0),e.lastTimescaleUnits+=t,e.lastSample.timescaleUnitsToNextSample=t,!this.isFragmented){let r=g(e.timeToSampleTable);if(h(r),1===r.sampleCount){r.sampleDelta=t;let i=e.timeToSampleTable[e.timeToSampleTable.length-2];i&&i.sampleDelta===t&&(i.sampleCount++,e.timeToSampleTable.pop(),r=i)}else r.sampleDelta!==t&&(r.sampleCount--,e.timeToSampleTable.push(r={sampleCount:1,sampleDelta:t}));r.sampleDelta===n?r.sampleCount++:e.timeToSampleTable.push({sampleCount:1,sampleDelta:n});let i=g(e.compositionTimeOffsetTable);h(i),i.sampleCompositionTimeOffset===a?i.sampleCount++:e.compositionTimeOffsetTable.push({sampleCount:1,sampleCompositionTimeOffset:a})}}else e.lastTimescaleUnits=ox(i.decodeTimestamp,e.timescale,!1),this.isFragmented||(e.timeToSampleTable.push({sampleCount:1,sampleDelta:n}),e.compositionTimeOffsetTable.push({sampleCount:1,sampleCompositionTimeOffset:a}));e.lastSample=i}if(e.timestampProcessingQueue.length=0,h(e.lastSample),h(null!==e.lastTimescaleUnits),void 0!==t&&0===e.lastSample.timescaleUnitsToNextSample){h("key"===t.type);let r=Math.round(ox(t.timestamp,e.timescale,!1)-e.lastTimescaleUnits);e.lastSample.timescaleUnitsToNextSample=r}}async registerSample(e,t){"key"===t.type&&this.processTimestamps(e,t),e.timestampProcessingQueue.push(t),this.isFragmented?(e.sampleQueue.push(t),await this.interleaveSamples()):"reserve"===this.fastStart?await this.registerSampleFastStartReserve(e,t):await this.addSampleToTrack(e,t)}async addSampleToTrack(e,t){if(!this.isFragmented&&(e.samples.push(t),"reserve"===this.fastStart)){let t=e.track.metadata.maximumPacketCount;if(h(void 0!==t),e.samples.length>t)throw Error(`Track #${e.track.id} has already reached the maximum packet count (${t}). Either add less packets or increase the maximum packet count.`)}let r=!1;if(e.currentChunk){e.currentChunk.startTimestamp=Math.min(e.currentChunk.startTimestamp,t.timestamp);let i=t.timestamp-e.currentChunk.startTimestamp;if(this.isFragmented){let a=this.trackDatas.every(r=>{if(e===r)return"key"===t.type;let i=r.sampleQueue[0];return i?"key"===i.type:r.track.source._closed});i>=this.minimumFragmentDuration&&a&&t.timestamp>this.maxWrittenTimestamp&&(r=!0,await this.finalizeFragment())}else r=i>=.5}else r=!0;r&&(e.currentChunk&&await this.finalizeCurrentChunk(e),e.currentChunk={startTimestamp:t.timestamp,samples:[],offset:null,moofOffset:null}),h(e.currentChunk),e.currentChunk.samples.push(t),this.isFragmented&&(this.maxWrittenTimestamp=Math.max(this.maxWrittenTimestamp,t.timestamp))}async finalizeCurrentChunk(e){if(h(!this.isFragmented),!e.currentChunk)return;e.finalizedChunks.push(e.currentChunk),this.finalizedChunks.push(e.currentChunk);let t=e.currentChunk.samples.length;if("audio"===e.type&&e.info.requiresPcmTransformation&&(t=e.currentChunk.samples.reduce((t,r)=>t+ox(r.duration,e.timescale),0)),(0===e.compactlyCodedChunkTable.length||g(e.compactlyCodedChunkTable).samplesPerChunk!==t)&&e.compactlyCodedChunkTable.push({firstChunk:e.finalizedChunks.length,samplesPerChunk:t}),"in-memory"===this.fastStart){e.currentChunk.offset=0;return}for(let t of(e.currentChunk.offset=this.writer.getPos(),e.currentChunk.samples))h(t.data),this.writer.write(t.data),t.data=null;await this.writer.flush()}async interleaveSamples(e=!1){if(h(this.isFragmented),e||this.allTracksAreKnown())i:for(;;){let t=null,r=1/0;for(let i of this.trackDatas){if(!e&&0===i.sampleQueue.length&&!i.track.source._closed)break i;i.sampleQueue.length>0&&i.sampleQueue[0].timestamp<r&&(t=i,r=i.sampleQueue[0].timestamp)}if(!t)break;let i=t.sampleQueue.shift();await this.addSampleToTrack(t,i)}}async finalizeFragment(e=!0){h(this.isFragmented);let t=this.nextFragmentNumber++;if(1===t){this.format._options.onMoov&&this.writer.startTrackingWrites();let e=nl(this);if(this.boxWriter.writeBox(e),this.format._options.onMoov){let{data:e,start:t}=this.writer.stopTrackingWrites();this.format._options.onMoov(e,t)}}let r=this.trackDatas.filter(e=>e.currentChunk),i=nW(t,r),a=this.writer.getPos(),n=a+this.boxWriter.measureBox(i),o=n+8,s=1/0;for(let e of r){for(let t of(e.currentChunk.offset=o,e.currentChunk.moofOffset=a,e.currentChunk.samples))o+=t.size;s=Math.min(s,e.currentChunk.startTimestamp)}let l=o-n,u=l>=0x100000000;if(u)for(let e of r)e.currentChunk.offset+=8;this.format._options.onMoof&&this.writer.startTrackingWrites();let c=nW(t,r);if(this.boxWriter.writeBox(c),this.format._options.onMoof){let{data:e,start:t}=this.writer.stopTrackingWrites();this.format._options.onMoof(e,t,s)}h(this.writer.getPos()===n),this.format._options.onMdat&&this.writer.startTrackingWrites();let d=ns(u);for(let e of(d.size=l,this.boxWriter.writeBox(d),this.writer.seek(n+(u?16:8)),r))for(let t of e.currentChunk.samples)this.writer.write(t.data),t.data=null;if(this.format._options.onMdat){let{data:e,start:t}=this.writer.stopTrackingWrites();this.format._options.onMdat(e,t)}for(let e of r)e.finalizedChunks.push(e.currentChunk),this.finalizedChunks.push(e.currentChunk),e.currentChunk=null;e&&await this.writer.flush()}async registerSampleFastStartReserve(e,t){if(this.allTracksAreKnown()){if(!this.mdat){let e=nl(this),t=this.boxWriter.measureBox(e)+this.computeSampleTableSizeUpperBound()+4096;for(let e of(h(null!==this.ftypSize),this.writer.seek(this.ftypSize+t),this.format._options.onMdat&&this.writer.startTrackingWrites(),this.mdat=ns(!0),this.boxWriter.writeBox(this.mdat),this.trackDatas)){for(let t of e.sampleQueue)await this.addSampleToTrack(e,t);e.sampleQueue.length=0}}await this.addSampleToTrack(e,t)}else e.sampleQueue.push(t)}computeSampleTableSizeUpperBound(){h("reserve"===this.fastStart);let e=0;for(let t of this.trackDatas){let r=t.track.metadata.maximumPacketCount;h(void 0!==r),e+=8*Math.ceil(2/3*r)+4*r+8*Math.ceil(2/3*r)+12*Math.ceil(2/3*r)+4*r+8*r}return e}async onTrackClose(e){let t=await this.mutex.acquire();if("subtitle"===e.type&&"webvtt"===e.source._codec){let t=this.trackDatas.find(t=>t.track===e);t&&await this.processWebVTTCues(t,1/0)}this.allTracksAreKnown()&&this.allTracksKnown.resolve(),this.isFragmented&&await this.interleaveSamples(),t()}async finalize(){let e=await this.mutex.acquire();for(let e of(this.allTracksKnown.resolve(),this.trackDatas))"subtitle"===e.type&&"webvtt"===e.track.source._codec&&await this.processWebVTTCues(e,1/0);if(this.isFragmented){for(let e of(await this.interleaveSamples(!0),this.trackDatas))this.processTimestamps(e);await this.finalizeFragment(!1)}else for(let e of this.trackDatas)this.processTimestamps(e),await this.finalizeCurrentChunk(e);if("in-memory"===this.fastStart){let e;this.mdat=ns(!1);for(let t=0;t<2;t++){let t=nl(this),r=this.boxWriter.measureBox(t);e=this.boxWriter.measureBox(this.mdat);let i=this.writer.getPos()+r+e;for(let t of this.finalizedChunks)for(let{data:r}of(t.offset=i,t.samples))h(r),i+=r.byteLength,e+=r.byteLength;if(i<0x100000000)break;e>=0x100000000&&(this.mdat.largeSize=!0)}this.format._options.onMoov&&this.writer.startTrackingWrites();let t=nl(this);if(this.boxWriter.writeBox(t),this.format._options.onMoov){let{data:e,start:t}=this.writer.stopTrackingWrites();this.format._options.onMoov(e,t)}for(let t of(this.format._options.onMdat&&this.writer.startTrackingWrites(),this.mdat.size=e,this.boxWriter.writeBox(this.mdat),this.finalizedChunks))for(let e of t.samples)h(e.data),this.writer.write(e.data),e.data=null;if(this.format._options.onMdat){let{data:e,start:t}=this.writer.stopTrackingWrites();this.format._options.onMdat(e,t)}}else if(this.isFragmented){let e=this.writer.getPos(),t=nn("mfra",void 0,[...this.trackDatas.map(nJ),no("mfro",0,0,[a4(0)])]);this.boxWriter.writeBox(t);let r=this.writer.getPos()-e;this.writer.seek(this.writer.getPos()-4),this.boxWriter.writeU32(r)}else{h(this.mdat);let e=this.boxWriter.offsets.get(this.mdat);h(void 0!==e);let t=this.writer.getPos()-e;if(this.mdat.size=t,this.mdat.largeSize=t>=0x100000000,this.boxWriter.patchBox(this.mdat),this.format._options.onMdat){let{data:e,start:t}=this.writer.stopTrackingWrites();this.format._options.onMdat(e,t)}let r=nl(this);if("reserve"===this.fastStart){h(null!==this.ftypSize),this.writer.seek(this.ftypSize),this.format._options.onMoov&&this.writer.startTrackingWrites(),this.boxWriter.writeBox(r);let e=this.boxWriter.offsets.get(this.mdat)-this.writer.getPos();this.boxWriter.writeBox({type:"free",size:e})}else this.format._options.onMoov&&this.writer.startTrackingWrites(),this.boxWriter.writeBox(r);if(this.format._options.onMoov){let{data:e,start:t}=this.writer.stopTrackingWrites();this.format._options.onMoov(e,t)}}e()}},oS="Mediabunny",ok={video:1,audio:2,subtitle:17},oC=class extends e2{constructor(e,t){super(e),this.trackDatas=[],this.allTracksKnown=z(),this.segment=null,this.segmentInfo=null,this.seekHead=null,this.tracksElement=null,this.tagsElement=null,this.attachmentsElement=null,this.segmentDuration=null,this.cues=null,this.currentCluster=null,this.currentClusterStartMsTimestamp=null,this.currentClusterMaxMsTimestamp=null,this.trackDatasInCurrentCluster=new Map,this.duration=0,this.writer=e._writer,this.format=t,this.ebmlWriter=new rW(this.writer),this.format._options.appendOnly&&(this.writer.ensureMonotonicity=!0)}async start(){let e=await this.mutex.acquire();this.writeEBMLHeader(),this.createSegmentInfo(),this.createCues(),await this.writer.flush(),e()}writeEBMLHeader(){this.format._options.onEbmlHeader&&this.writer.startTrackingWrites();let e={id:0x1a45dfa3,data:[{id:17030,data:1},{id:17143,data:1},{id:17138,data:4},{id:17139,data:8},{id:17026,data:this.format instanceof oU?"webm":"matroska"},{id:17031,data:2},{id:17029,data:2}]};if(this.ebmlWriter.writeEBML(e),this.format._options.onEbmlHeader){let{data:e,start:t}=this.writer.stopTrackingWrites();this.format._options.onEbmlHeader(e,t)}}maybeCreateSeekHead(e){if(this.format._options.appendOnly)return;let t=new Uint8Array([28,83,187,107]),r=new Uint8Array([21,73,169,102]),i=new Uint8Array([22,84,174,107]),a=new Uint8Array([25,65,164,105]),n=new Uint8Array([18,84,195,103]),o={id:0x114d9b74,data:[{id:19899,data:[{id:21419,data:t},{id:21420,size:5,data:e?this.ebmlWriter.offsets.get(this.cues)-this.segmentDataOffset:0}]},{id:19899,data:[{id:21419,data:r},{id:21420,size:5,data:e?this.ebmlWriter.offsets.get(this.segmentInfo)-this.segmentDataOffset:0}]},{id:19899,data:[{id:21419,data:i},{id:21420,size:5,data:e?this.ebmlWriter.offsets.get(this.tracksElement)-this.segmentDataOffset:0}]},this.attachmentsElement?{id:19899,data:[{id:21419,data:a},{id:21420,size:5,data:e?this.ebmlWriter.offsets.get(this.attachmentsElement)-this.segmentDataOffset:0}]}:null,this.tagsElement?{id:19899,data:[{id:21419,data:n},{id:21420,size:5,data:e?this.ebmlWriter.offsets.get(this.tagsElement)-this.segmentDataOffset:0}]}:null]};this.seekHead=o}createSegmentInfo(){let e={id:17545,data:new rj(0)};this.segmentDuration=e;let t={id:0x1549a966,data:[{id:2807729,data:1e6},{id:19840,data:oS},{id:22337,data:oS},this.format._options.appendOnly?null:e]};this.segmentInfo=t}createTracks(){let e={id:0x1654ae6b,data:[]};for(let t of(this.tracksElement=e,this.trackDatas)){let r=r4[t.track.source._codec];h(r);let i=0;if("audio"===t.type&&"opus"===t.track.source._codec){i=1e6*80;let e=t.info.decoderConfig.description;e&&(i=Math.round(1e9*(tC(w(e)).preSkip/48e3)))}e.data.push({id:174,data:[{id:215,data:t.track.id},{id:29637,data:t.track.id},{id:131,data:ok[t.type]},t.track.metadata.disposition?.default===!1?{id:136,data:0}:null,t.track.metadata.disposition?.forced?{id:21930,data:1}:null,t.track.metadata.disposition?.hearingImpaired?{id:21931,data:1}:null,t.track.metadata.disposition?.visuallyImpaired?{id:21932,data:1}:null,t.track.metadata.disposition?.original?{id:21934,data:1}:null,t.track.metadata.disposition?.commentary?{id:21935,data:1}:null,{id:156,data:0},{id:2274716,data:t.track.metadata.languageCode??"und"},{id:134,data:r},{id:22186,data:0},{id:22203,data:i},void 0!==t.track.metadata.name?{id:21358,data:new rB(t.track.metadata.name)}:null,"video"===t.type?this.videoSpecificTrackInfo(t):null,"audio"===t.type?this.audioSpecificTrackInfo(t):null,"subtitle"===t.type?this.subtitleSpecificTrackInfo(t):null]})}}videoSpecificTrackInfo(e){let{frameRate:t,rotation:r}=e.track.metadata,i=[e.info.decoderConfig.description?{id:25506,data:w(e.info.decoderConfig.description)}:null,t?{id:2352003,data:1e9/t}:null],a=r?m(-r):0,n=e.info.decoderConfig.colorSpace;return i.push({id:224,data:[{id:176,data:e.info.width},{id:186,data:e.info.height},e.info.alphaMode?{id:21440,data:1}:null,F(n)?{id:21936,data:[{id:21937,data:O[n.matrix]},{id:21946,data:I[n.transfer]},{id:21947,data:T[n.primaries]},{id:21945,data:n.fullRange?2:1}]}:null,a?{id:30320,data:[{id:30321,data:0},{id:30325,data:new rD((a+180)%360-180)}]}:null]}),i}audioSpecificTrackInfo(e){let t=eT.includes(e.track.source._codec)?eW(e.track.source._codec):null;return[e.info.decoderConfig.description?{id:25506,data:w(e.info.decoderConfig.description)}:null,{id:225,data:[{id:181,data:new rD(e.info.sampleRate)},{id:159,data:e.info.numberOfChannels},t?{id:25188,data:8*t.sampleSize}:null]}]}subtitleSpecificTrackInfo(e){return[{id:25506,data:C.encode(e.info.config.description)}]}maybeCreateTags(){let e=[],t=(t,r)=>{e.push({id:26568,data:[{id:17827,data:new rB(t)},"string"==typeof r?{id:17543,data:new rB(r)}:{id:17541,data:r}]})},r=this.output._metadataTags,i=new Set;for(let{key:e,value:a}of eh(r))switch(e){case"title":t("TITLE",a),i.add("TITLE");break;case"description":t("DESCRIPTION",a),i.add("DESCRIPTION");break;case"artist":t("ARTIST",a),i.add("ARTIST");break;case"album":t("ALBUM",a),i.add("ALBUM");break;case"albumArtist":t("ALBUM_ARTIST",a),i.add("ALBUM_ARTIST");break;case"genre":t("GENRE",a),i.add("GENRE");break;case"comment":t("COMMENT",a),i.add("COMMENT");break;case"lyrics":t("LYRICS",a),i.add("LYRICS");break;case"date":t("DATE",a.toISOString().slice(0,10)),i.add("DATE");break;case"trackNumber":t("PART_NUMBER",void 0!==r.tracksTotal?`${a}/${r.tracksTotal}`:a.toString()),i.add("PART_NUMBER");break;case"discNumber":t("DISC",void 0!==r.discsTotal?`${a}/${r.discsTotal}`:a.toString()),i.add("DISC");break;case"tracksTotal":case"discsTotal":case"images":case"raw":break;default:W(e)}if(r.raw)for(let e in r.raw){let a=r.raw[e];!(null==a||i.has(e))&&("string"==typeof a||a instanceof Uint8Array)&&t(e,a)}0!==e.length&&(this.tagsElement={id:0x1254c367,data:[{id:29555,data:[{id:25536,data:[{id:26826,data:50},{id:25546,data:"MOVIE"}]},...e]}]})}maybeCreateAttachments(){let e=this.output._metadataTags,t=[],r=new Set,i=e.images??[];for(let e of i){let i,a=e.name;for(void 0===a&&(a=("coverFront"===e.kind?"cover":"coverBack"===e.kind?"back":"image")+(em(e.mimeType)??""));;){i=0n;for(let e=0;e<8;e++)i<<=8n,i|=BigInt(Math.floor(256*Math.random()));if(0n!==i&&!r.has(i))break}r.add(i),t.push({id:24999,data:[void 0!==e.description?{id:18046,data:new rB(e.description)}:null,{id:18030,data:new rB(a)},{id:18016,data:e.mimeType},{id:18012,data:e.data},{id:18094,data:i}]})}for(let[r,a]of Object.entries(e.raw??{}))a instanceof eS&&/^\d+$/.test(r)&&(i.find(e=>e.mimeType===a.mimeType&&ey(e.data,a.data))||t.push({id:24999,data:[void 0!==a.description?{id:18046,data:new rB(a.description)}:null,{id:18030,data:new rB(a.name??"")},{id:18016,data:a.mimeType??""},{id:18012,data:a.data},{id:18094,data:BigInt(r)}]}));0!==t.length&&(this.attachmentsElement={id:0x1941a469,data:t})}createSegment(){this.createTracks(),this.maybeCreateTags(),this.maybeCreateAttachments(),this.maybeCreateSeekHead(!1);let e={id:0x18538067,size:this.format._options.appendOnly?-1:6,data:[this.seekHead,this.segmentInfo,this.tracksElement,this.attachmentsElement,this.tagsElement]};if(this.segment=e,this.format._options.onSegmentHeader&&this.writer.startTrackingWrites(),this.ebmlWriter.writeEBML(e),this.format._options.onSegmentHeader){let{data:e,start:t}=this.writer.stopTrackingWrites();this.format._options.onSegmentHeader(e,t)}}createCues(){this.cues={id:0x1c53bb6b,data:[]}}get segmentDataOffset(){return h(this.segment),this.ebmlWriter.dataOffsets.get(this.segment)}allTracksAreKnown(){for(let e of this.output._tracks)if(!e.source._closed&&!this.trackDatas.some(t=>t.track===e))return!1;return!0}async getMimeType(){await this.allTracksKnown.promise;let e=this.trackDatas.map(e=>"video"===e.type||"audio"===e.type?e.info.decoderConfig.codec:({webvtt:"wvtt"})[e.track.source._codec]);return r6({isWebM:this.format instanceof oU,hasVideo:this.trackDatas.some(e=>"video"===e.type),hasAudio:this.trackDatas.some(e=>"audio"===e.type),codecStrings:e})}getVideoTrackData(e,t,r){let i=this.trackDatas.find(t=>t.track===e);if(i)return i;eJ(r),h(r),h(r.decoderConfig),h(void 0!==r.decoderConfig.codedWidth),h(void 0!==r.decoderConfig.codedHeight);let a={track:e,type:"video",info:{width:r.decoderConfig.codedWidth,height:r.decoderConfig.codedHeight,decoderConfig:r.decoderConfig,alphaMode:!!t.sideData.alpha},chunkQueue:[],lastWrittenMsTimestamp:null};if("vp9"===e.source._codec){let e,t,r;a.info.decoderConfig={...a.info.decoderConfig,description:new Uint8Array((t=Number((e=a.info.decoderConfig.codec.split("."))[1]),r=Number(e[2]),[1,1,t,2,1,r,3,1,Number(e[3]),4,1,e[4]?Number(e[4]):1]))}}else"av1"===e.source._codec&&(a.info.decoderConfig={...a.info.decoderConfig,description:new Uint8Array(eL(a.info.decoderConfig.codec))});return this.trackDatas.push(a),this.trackDatas.sort((e,t)=>e.track.id-t.track.id),this.allTracksAreKnown()&&this.allTracksKnown.resolve(),a}getAudioTrackData(e,t,r){let i=this.trackDatas.find(t=>t.track===e);if(i)return i;e0(r),h(r),h(r.decoderConfig);let a={...r.decoderConfig},n=!1;if("aac"===e.source._codec&&!a.description){let e=iA(aS.tempFromBytes(t.data));if(!e)throw Error("Couldn't parse ADTS header from the AAC packet. Make sure the packets are in ADTS format (as specified in ISO 13818-7) when not providing a description, or provide a description (must be an AudioSpecificConfig as specified in ISO 14496-3) and ensure the packets are raw AAC data.");let r=e$[e.samplingFrequencyIndex],i=ez[e.channelConfiguration];if(void 0===r||void 0===i)throw Error("Invalid ADTS frame header.");a.description=eV({objectType:e.objectType,sampleRate:r,numberOfChannels:i}),n=!0}let o={track:e,type:"audio",info:{numberOfChannels:r.decoderConfig.numberOfChannels,sampleRate:r.decoderConfig.sampleRate,decoderConfig:a,requiresAdtsStripping:n},chunkQueue:[],lastWrittenMsTimestamp:null};return this.trackDatas.push(o),this.trackDatas.sort((e,t)=>e.track.id-t.track.id),this.allTracksAreKnown()&&this.allTracksKnown.resolve(),o}getSubtitleTrackData(e,t){let r=this.trackDatas.find(t=>t.track===e);if(r)return r;e1(t),h(t),h(t.config);let i={track:e,type:"subtitle",info:{config:t.config},chunkQueue:[],lastWrittenMsTimestamp:null};return this.trackDatas.push(i),this.trackDatas.sort((e,t)=>e.track.id-t.track.id),this.allTracksAreKnown()&&this.allTracksKnown.resolve(),i}async addEncodedVideoPacket(e,t,r){let i=await this.mutex.acquire();try{let i=this.getVideoTrackData(e,t,r),a="key"===t.type,n=this.validateAndNormalizeTimestamp(i.track,t.timestamp,a),o=t.duration;void 0!==e.metadata.frameRate&&(n=X(n,1/e.metadata.frameRate),o=X(o,1/e.metadata.frameRate));let s=i.info.alphaMode?t.sideData.alpha??null:null,l=this.createInternalChunk(t.data,n,o,t.type,s);"vp9"===e.source._codec&&this.fixVP9ColorSpace(i,l),i.chunkQueue.push(l),await this.interleaveChunks()}finally{i()}}async addEncodedAudioPacket(e,t,r){let i=await this.mutex.acquire();try{let i=this.getAudioTrackData(e,t,r),a=t.data;if(i.info.requiresAdtsStripping){let e=iA(aS.tempFromBytes(a));if(!e)throw Error("Expected ADTS frame, didn't get one.");let t=null===e.crcCheck?7:9;a=a.subarray(t)}let n="key"===t.type,o=this.validateAndNormalizeTimestamp(i.track,t.timestamp,n),s=this.createInternalChunk(a,o,t.duration,t.type);i.chunkQueue.push(s),await this.interleaveChunks()}finally{i()}}async addSubtitleCue(e,t,r){let i=await this.mutex.acquire();try{let i=this.getSubtitleTrackData(e,r),a=this.validateAndNormalizeTimestamp(i.track,t.timestamp,!0),n=t.text,o=Math.round(1e3*a);aW.lastIndex=0,n=n.replace(aW,e=>{let t=aZ(e.slice(1,-1));return`<${aK(t-o)}>`});let s=C.encode(n),l=`${t.settings??""}
${t.identifier??""}
${t.notes??""}`,u=this.createInternalChunk(s,a,t.duration,"key",l.trim()?C.encode(l):null);i.chunkQueue.push(u),await this.interleaveChunks()}finally{i()}}async interleaveChunks(e=!1){if(e||this.allTracksAreKnown()){i:for(;;){let t=null,r=1/0;for(let i of this.trackDatas){if(!e&&0===i.chunkQueue.length&&!i.track.source._closed)break i;i.chunkQueue.length>0&&i.chunkQueue[0].timestamp<r&&(t=i,r=i.chunkQueue[0].timestamp)}if(!t)break;let i=t.chunkQueue.shift();this.writeBlock(t,i)}e||await this.writer.flush()}}fixVP9ColorSpace(e,t){if("key"!==t.type||!e.info.decoderConfig.colorSpace||!e.info.decoderConfig.colorSpace.matrix)return;let r=new y(t.data);r.skipBits(2);let i=r.readBits(1),a=(r.readBits(1)<<1)+i;if(3===a&&r.skipBits(1),r.readBits(1)||0!==r.readBits(1)||(r.skipBits(2),4817730!==r.readBits(24)))return;a>=2&&r.skipBits(1);let n={rgb:7,bt709:2,bt470bg:1,smpte170m:3}[e.info.decoderConfig.colorSpace.matrix];((e,t,r,i)=>{for(let a=t;a<r;a++){let t=Math.floor(a/8),n=e[t],o=7-(7&a);n&=~(1<<o),n|=(i&1<<r-a-1)>>r-a-1<<o,e[t]=n}})(t.data,r.pos,r.pos+3,n)}createInternalChunk(e,t,r,i,a=null){return{data:e,type:i,timestamp:t,duration:r,additions:a}}writeBlock(e,t){this.segment||this.createSegment();let r=Math.round(1e3*t.timestamp),i=this.trackDatas.every(r=>{if(e===r)return"key"===t.type;let i=r.chunkQueue[0];return i?"key"===i.type:r.track.source._closed}),a=!1;if(this.currentCluster){h(null!==this.currentClusterStartMsTimestamp),h(null!==this.currentClusterMaxMsTimestamp);let e=r-this.currentClusterStartMsTimestamp;a=i&&r>this.currentClusterMaxMsTimestamp&&e>=1e3*(this.format._options.minimumClusterDuration??1)||e>32767}else a=!0;a&&this.createNewCluster(r);let n=r-this.currentClusterStartMsTimestamp;if(n<-32768)return;let o=new Uint8Array(4),s=new DataView(o.buffer);s.setUint8(0,128|e.track.id),s.setInt16(1,n,!1);let l=Math.round(1e3*t.duration);if(t.additions){let i={id:160,data:[{id:161,data:[o,t.data]},"delta"===t.type?{id:251,data:new rL(e.lastWrittenMsTimestamp-r)}:null,t.additions?{id:30113,data:[{id:166,data:[{id:238,data:1},{id:165,data:t.additions}]}]}:null,l>0?{id:155,data:l}:null]};this.ebmlWriter.writeEBML(i)}else{s.setUint8(3,Number("key"===t.type)<<7);let e={id:163,data:[o,t.data]};this.ebmlWriter.writeEBML(e)}this.duration=Math.max(this.duration,r+l),e.lastWrittenMsTimestamp=r,this.trackDatasInCurrentCluster.has(e)||this.trackDatasInCurrentCluster.set(e,{firstMsTimestamp:r}),this.currentClusterMaxMsTimestamp=Math.max(this.currentClusterMaxMsTimestamp,r)}createNewCluster(e){this.currentCluster&&this.finalizeCurrentCluster(),this.format._options.onCluster&&this.writer.startTrackingWrites(),this.currentCluster={id:0x1f43b675,size:this.format._options.appendOnly?-1:5,data:[{id:231,data:e}]},this.ebmlWriter.writeEBML(this.currentCluster),this.currentClusterStartMsTimestamp=e,this.currentClusterMaxMsTimestamp=e,this.trackDatasInCurrentCluster.clear()}finalizeCurrentCluster(){if(h(this.currentCluster),!this.format._options.appendOnly){let e=this.writer.getPos()-this.ebmlWriter.dataOffsets.get(this.currentCluster),t=this.writer.getPos();this.writer.seek(this.ebmlWriter.offsets.get(this.currentCluster)+4),this.ebmlWriter.writeVarInt(e,5),this.writer.seek(t)}if(this.format._options.onCluster){h(null!==this.currentClusterStartMsTimestamp);let{data:e,start:t}=this.writer.stopTrackingWrites();this.format._options.onCluster(e,t,this.currentClusterStartMsTimestamp/1e3)}let e=this.ebmlWriter.offsets.get(this.currentCluster)-this.segmentDataOffset,t=new Map;for(let[e,{firstMsTimestamp:r}]of this.trackDatasInCurrentCluster)t.has(r)||t.set(r,[]),t.get(r).push(e);for(let[r,i]of[...t.entries()].sort((e,t)=>e[0]-t[0]))h(this.cues),this.cues.data.push({id:187,data:[{id:179,data:r},...i.map(t=>({id:183,data:[{id:247,data:t.track.id},{id:241,data:e}]}))]})}async onTrackClose(){let e=await this.mutex.acquire();this.allTracksAreKnown()&&this.allTracksKnown.resolve(),await this.interleaveChunks(),e()}async finalize(){let e=await this.mutex.acquire();if(this.allTracksKnown.resolve(),this.segment||this.createSegment(),await this.interleaveChunks(!0),this.currentCluster&&this.finalizeCurrentCluster(),h(this.cues),this.ebmlWriter.writeEBML(this.cues),!this.format._options.appendOnly){let e=this.writer.getPos(),t=this.writer.getPos()-this.segmentDataOffset;this.writer.seek(this.ebmlWriter.offsets.get(this.segment)+4),this.ebmlWriter.writeVarInt(t,6),this.segmentDuration.data=new rj(this.duration),this.writer.seek(this.ebmlWriter.offsets.get(this.segmentDuration)),this.ebmlWriter.writeEBML(this.segmentDuration),h(this.seekHead),this.writer.seek(this.ebmlWriter.offsets.get(this.seekHead)),this.maybeCreateSeekHead(!0),this.ebmlWriter.writeEBML(this.seekHead),this.writer.seek(e)}e()}},oE=class{constructor(e){this.writer=e,this.helper=new Uint8Array(8),this.helperView=new DataView(this.helper.buffer)}writeU32(e){this.helperView.setUint32(0,e,!1),this.writer.write(this.helper.subarray(0,4))}writeXingFrame(e){let t,r=this.writer.getPos(),i=224|e.mpegVersionId<<3|e.layer<<1;t=2&e.mpegVersionId&&1&e.mpegVersionId?0:1;let a=-1,n=16*t*4+16*e.layer;for(let r=0;r<16;r++){let i=ir[n+r];if(ii(t,e.layer,1e3*i,e.sampleRate,0)>=155){a=r;break}}if(-1===a)throw Error("No suitable bitrate found.");let o=a<<4|e.frequencyIndex<<2,s=e.channel<<6|e.modeExtension<<4|e.copyright<<3|e.original<<2|e.emphasis;this.helper[0]=255,this.helper[1]=i,this.helper[2]=o,this.helper[3]=s,this.writer.write(this.helper.subarray(0,4));let l=ia(e.mpegVersionId,e.channel);this.writer.seek(r+l),this.writeU32(0x58696e67);let u=0;null!==e.frameCount&&(u|=1),null!==e.fileSize&&(u|=2),null!==e.toc&&(u|=4),this.writeU32(u),this.writeU32(e.frameCount??0),this.writeU32(e.fileSize??0),this.writer.write(e.toc??new Uint8Array(100));let c=ir[n+a],d=ii(t,e.layer,1e3*c,e.sampleRate,0);this.writer.seek(r+d)}},o_=class extends e2{constructor(e,t){super(e),this.xingFrameData=null,this.frameCount=0,this.framePositions=[],this.xingFramePos=null,this.format=t,this.writer=e._writer,this.mp3Writer=new oE(e._writer)}async start(){eC(this.output._metadataTags)||new ih(this.writer).writeId3V2Tag(this.output._metadataTags)}async getMimeType(){return"audio/mpeg"}async addEncodedVideoPacket(){throw Error("MP3 does not support video.")}async addEncodedAudioPacket(e,t){let r=await this.mutex.acquire();try{let r=!1!==this.format._options.xingHeader;if(!this.xingFrameData&&r){let e=S(t.data);if(e.byteLength<4)throw Error("Invalid MP3 header in sample.");let r=e.getUint32(0,!1),i=io(r,null).header;if(!i)throw Error("Invalid MP3 header in sample.");let a=ia(i.mpegVersionId,i.channel);if(e.byteLength>=a+4){let t=e.getUint32(a,!1);if(0x58696e67===t||0x496e666f===t)return}this.xingFrameData={mpegVersionId:i.mpegVersionId,layer:i.layer,frequencyIndex:i.frequencyIndex,sampleRate:i.sampleRate,channel:i.channel,modeExtension:i.modeExtension,copyright:i.copyright,original:i.original,emphasis:i.emphasis,frameCount:null,fileSize:null,toc:null},this.xingFramePos=this.writer.getPos(),this.mp3Writer.writeXingFrame(this.xingFrameData),this.frameCount++}this.validateAndNormalizeTimestamp(e,t.timestamp,"key"===t.type),this.writer.write(t.data),this.frameCount++,await this.writer.flush(),r&&this.framePositions.push(this.writer.getPos())}finally{r()}}async addSubtitleCue(){throw Error("MP3 does not support subtitles.")}async finalize(){if(!this.xingFrameData||null===this.xingFramePos)return;let e=await this.mutex.acquire(),t=this.writer.getPos();this.writer.seek(this.xingFramePos);let r=new Uint8Array(100);for(let e=0;e<100;e++){let i=Math.floor(this.framePositions.length*(e/100));h(-1!==i&&i<this.framePositions.length);let a=this.framePositions[i];r[e]=a/t*256}if(this.xingFrameData.frameCount=this.frameCount,this.xingFrameData.fileSize=t,this.xingFrameData.toc=r,this.format._options.onXingFrame&&this.writer.startTrackingWrites(),this.mp3Writer.writeXingFrame(this.xingFrameData),this.format._options.onXingFrame){let{data:e,start:t}=this.writer.stopTrackingWrites();this.format._options.onXingFrame(e,t)}this.writer.seek(t),e()}},oT=class extends e2{constructor(e,t){super(e),this.trackDatas=[],this.bosPagesWritten=!1,this.allTracksKnown=z(),this.pageBytes=new Uint8Array(65307),this.pageView=new DataView(this.pageBytes.buffer),this.format=t,this.writer=e._writer,this.writer.ensureMonotonicity=!0}async start(){}async getMimeType(){return await this.allTracksKnown.promise,iw({codecStrings:this.trackDatas.map(e=>e.codecInfo.codec)})}addEncodedVideoPacket(){throw Error("Video tracks are not supported.")}getTrackData(e,t){let r,i=this.trackDatas.find(t=>t.track===e);if(i)return i;do r=Math.floor(0x100000000*Math.random());while(this.trackDatas.some(e=>e.serialNumber===r))h("vorbis"===e.source._codec||"opus"===e.source._codec),e0(t),h(t),h(t.decoderConfig);let a={track:e,serialNumber:r,internalSampleRate:"opus"===e.source._codec?48e3:t.decoderConfig.sampleRate,codecInfo:{codec:e.source._codec,vorbisInfo:null,opusInfo:null},vorbisLastBlocksize:null,packetQueue:[],currentTimestampInSamples:0,pagesWritten:0,currentGranulePosition:0,currentLacingValues:[],currentPageData:[],currentPageSize:27,currentPageStartsWithFreshPacket:!0,currentPageStartTimestampInSamples:0};return this.queueHeaderPackets(a,t),this.trackDatas.push(a),this.allTracksAreKnown()&&this.allTracksKnown.resolve(),a}queueHeaderPackets(e,t){if(h(t.decoderConfig),"vorbis"===e.track.source._codec){h(t.decoderConfig.description);let r=w(t.decoderConfig.description);if(2!==r[0])throw TypeError("First byte of Vorbis decoder description must be 2.");let i=1,a=()=>{let e=0;for(;;){let t=r[i++];if(void 0===t)throw TypeError("Vorbis decoder description is too short.");if(e+=t,t<255)return e}},n=a(),o=a();if(r.length-i<=0)throw TypeError("Vorbis decoder description is too short.");let s=r.subarray(i,i+=n);i+=o;let l=r.subarray(i),u=new Uint8Array(7);u[0]=3,u[1]=118,u[2]=111,u[3]=114,u[4]=98,u[5]=105,u[6]=115;let c=tI(u,this.output._metadataTags,!0);e.packetQueue.push({data:s,timestampInSamples:0,durationInSamples:0,forcePageFlush:!0},{data:c,timestampInSamples:0,durationInSamples:0,forcePageFlush:!1},{data:l,timestampInSamples:0,durationInSamples:0,forcePageFlush:!0});let d=S(s).getUint8(28);e.codecInfo.vorbisInfo={blocksizes:[1<<(15&d),1<<(d>>4)],modeBlockflags:t_(l).modeBlockflags}}else if("opus"===e.track.source._codec){if(!t.decoderConfig.description)throw TypeError("For Ogg, Opus decoder description is required.");let r=w(t.decoderConfig.description),i=new Uint8Array(8),a=S(i);a.setUint32(0,0x4f707573,!1),a.setUint32(4,0x54616773,!1);let n=tI(i,this.output._metadataTags,!0);e.packetQueue.push({data:r,timestampInSamples:0,durationInSamples:0,forcePageFlush:!0},{data:n,timestampInSamples:0,durationInSamples:0,forcePageFlush:!0}),e.codecInfo.opusInfo={preSkip:tC(r).preSkip}}}async addEncodedAudioPacket(e,t,r){let i=await this.mutex.acquire();try{let i=this.getTrackData(e,r);this.validateAndNormalizeTimestamp(i.track,t.timestamp,"key"===t.type);let a=i.currentTimestampInSamples,{durationInSamples:n,vorbisBlockSize:o}=ix(t.data,i.codecInfo,i.vorbisLastBlocksize);i.currentTimestampInSamples+=n,i.vorbisLastBlocksize=o,i.packetQueue.push({data:t.data,timestampInSamples:a,durationInSamples:n,forcePageFlush:!1}),await this.interleavePages()}finally{i()}}addSubtitleCue(){throw Error("Subtitle tracks are not supported.")}allTracksAreKnown(){for(let e of this.output._tracks)if(!e.source._closed&&!this.trackDatas.some(t=>t.track===e))return!1;return!0}async interleavePages(e=!1){if(!this.bosPagesWritten){if(!this.allTracksAreKnown()&&!e)return;for(let e of this.trackDatas)for(;e.packetQueue.length>0;){let t=e.packetQueue.shift();if(this.writePacket(e,t,!1),t.forcePageFlush)break}this.bosPagesWritten=!0}i:for(;;){let t=null,r=1/0;for(let i of this.trackDatas){if(!e&&i.packetQueue.length<=1&&!i.track.source._closed)break i;i.packetQueue.length>0&&i.packetQueue[0].timestampInSamples<r&&(t=i,r=i.packetQueue[0].timestampInSamples)}if(!t)break;let i=t.packetQueue.shift(),a=0===t.packetQueue.length;this.writePacket(t,i,a)}e||await this.writer.flush()}writePacket(e,t,r){let i=t.timestampInSamples+t.durationInSamples;if(void 0!==this.format._options.maximumPageDuration){let t=this.format._options.maximumPageDuration*e.internalSampleRate;e.currentLacingValues.length>0&&i-e.currentPageStartTimestampInSamples>t&&this.writePage(e,!1)}let a=t.data.length,n=0,o=0;for(;;){0===e.currentLacingValues.length&&n>0&&(e.currentPageStartsWithFreshPacket=!1);let i=Math.min(255,a);e.currentLacingValues.push(i),e.currentPageSize++,o+=i;let s=a<255;if(255===e.currentLacingValues.length){let i=t.data.subarray(n,o);if(n=o,e.currentPageData.push(i),e.currentPageSize+=i.length,this.writePage(e,r&&s),s)return}if(s)break;a-=255}let s=t.data.subarray(n);e.currentPageData.push(s),e.currentPageSize+=s.length,e.currentGranulePosition=i,(e.currentPageSize>=8192||t.forcePageFlush)&&this.writePage(e,r)}writePage(e,t){var r;this.pageView.setUint32(0,0x5367674f,!0),this.pageView.setUint8(4,0);let i=0;e.currentPageStartsWithFreshPacket||(i|=1),0===e.pagesWritten&&(i|=2),t&&(i|=4),this.pageView.setUint8(5,i);let a=e.currentLacingValues.every(e=>255===e)?-1:e.currentGranulePosition;r=this.pageView,r.setUint32(6,a,!0),r.setInt32(10,Math.floor(a/0x100000000),!0),this.pageView.setUint32(14,e.serialNumber,!0),this.pageView.setUint32(18,e.pagesWritten,!0),this.pageView.setUint32(22,0,!0),this.pageView.setUint8(26,e.currentLacingValues.length),this.pageBytes.set(e.currentLacingValues,27);let n=27+e.currentLacingValues.length;for(let t of e.currentPageData)this.pageBytes.set(t,n),n+=t.length;let o=this.pageBytes.subarray(0,n),s=ib(o);if(this.pageView.setUint32(22,s,!0),e.pagesWritten++,e.currentLacingValues.length=0,e.currentPageData.length=0,e.currentPageSize=27,e.currentPageStartsWithFreshPacket=!0,e.currentPageStartTimestampInSamples=e.currentGranulePosition,this.format._options.onPage&&this.writer.startTrackingWrites(),this.writer.write(o),this.format._options.onPage){let{data:t,start:r}=this.writer.stopTrackingWrites();this.format._options.onPage(t,r,e.track.source)}}async onTrackClose(){let e=await this.mutex.acquire();this.allTracksAreKnown()&&this.allTracksKnown.resolve(),await this.interleavePages(),e()}async finalize(){let e=await this.mutex.acquire();for(let e of(this.allTracksKnown.resolve(),await this.interleavePages(!0),this.trackDatas))e.currentLacingValues.length>0&&this.writePage(e,!0);e()}},oP=new Uint8Array([9,240]),oI=new Uint8Array([70,1]),oA=class extends e2{constructor(e,t){super(e),this.trackDatas=[],this.tablesWritten=!1,this.continuityCounters=new Map,this.packetBuffer=new Uint8Array(188),this.packetView=S(this.packetBuffer),this.allTracksKnown=z(),this.videoTrackIndex=0,this.audioTrackIndex=0,this.pesHeaderBuffer=new Uint8Array(14),this.pesHeaderView=S(this.pesHeaderBuffer),this.ptsBitstream=new y(this.pesHeaderBuffer.subarray(9,14)),this.adaptationFieldBuffer=new Uint8Array(184),this.payloadBuffer=new Uint8Array(184),this.format=t,this.writer=e._writer,this.writer.ensureMonotonicity=!0}async start(){}async getMimeType(){return await this.allTracksKnown.promise,iB(this.trackDatas.map(e=>e.codecString))}getVideoTrackData(e,t){let r=this.trackDatas.find(t=>t.track===e);if(r)return r;eJ(t),h(t?.decoderConfig);let i=e.source._codec;h("avc"===i||"hevc"===i);let a={track:e,pid:256+this.trackDatas.length,streamType:"avc"===i?27:36,streamId:224+this.videoTrackIndex++,codecString:t.decoderConfig.codec,packetQueue:[],inputIsAnnexB:null,inputIsAdts:null,avcDecoderConfig:null,hevcDecoderConfig:null,adtsHeader:null,adtsHeaderBitstream:null,firstPacketWritten:!1};return this.trackDatas.push(a),this.allTracksAreKnown()&&this.allTracksKnown.resolve(),a}getAudioTrackData(e,t){let r=this.trackDatas.find(t=>t.track===e);if(r)return r;e0(t),h(t?.decoderConfig);let i=e.source._codec;h("aac"===i||"mp3"===i);let a={track:e,pid:256+this.trackDatas.length,streamType:"aac"===i?15:3,streamId:192+this.audioTrackIndex++,codecString:t.decoderConfig.codec,packetQueue:[],inputIsAnnexB:null,inputIsAdts:null,avcDecoderConfig:null,hevcDecoderConfig:null,adtsHeader:null,adtsHeaderBitstream:null,firstPacketWritten:!1};return this.trackDatas.push(a),this.allTracksAreKnown()&&this.allTracksKnown.resolve(),a}async addEncodedVideoPacket(e,t,r){let i=await this.mutex.acquire();try{let i=this.getVideoTrackData(e,r),a=this.validateAndNormalizeTimestamp(i.track,t.timestamp,"key"===t.type),n=this.prepareVideoPacket(i,t,r);i.packetQueue.push({data:n,timestamp:a,isKeyframe:"key"===t.type}),await this.interleavePackets()}finally{i()}}async addEncodedAudioPacket(e,t,r){let i=await this.mutex.acquire();try{let i=this.getAudioTrackData(e,r),a=this.validateAndNormalizeTimestamp(i.track,t.timestamp,"key"===t.type),n=this.prepareAudioPacket(i,t,r);i.packetQueue.push({data:n,timestamp:a,isKeyframe:"key"===t.type}),await this.interleavePackets()}finally{i()}}async addSubtitleCue(){throw Error("MPEG-TS does not support subtitles.")}prepareVideoPacket(e,t,r){let i=e.track.source._codec;if(null===e.inputIsAnnexB){let t=r?.decoderConfig?.description;if(e.inputIsAnnexB=!t,!e.inputIsAnnexB){let r=w(t);"avc"===i?e.avcDecoderConfig=to(r):e.hevcDecoderConfig=(e=>{try{let t=S(e),r=0,i=t.getUint8(r++),a=t.getUint8(r++),n=t.getUint32(r,!1);r+=4;let o=e.subarray(r,r+6);r+=6;let s=t.getUint8(r++),l=(15&t.getUint8(r++))<<8|t.getUint8(r++),u=3&t.getUint8(r++),c=3&t.getUint8(r++),d=7&t.getUint8(r++),p=7&t.getUint8(r++),f=t.getUint16(r,!1);r+=2;let h=t.getUint8(r++),m=t.getUint8(r++),g=[];for(let i=0;i<m;i++){let i=t.getUint8(r++),a=i>>7&1,n=63&i,o=t.getUint16(r,!1);r+=2;let s=[];for(let i=0;i<o;i++){let i=t.getUint16(r,!1);r+=2,s.push(e.subarray(r,r+i)),r+=i}g.push({arrayCompleteness:a,nalUnitType:n,nalUnits:s})}return{configurationVersion:i,generalProfileSpace:a>>6&3,generalTierFlag:a>>5&1,generalProfileIdc:31&a,generalProfileCompatibilityFlags:n,generalConstraintIndicatorFlags:o,generalLevelIdc:s,minSpatialSegmentationIdc:l,parallelismType:u,chromaFormatIdc:c,bitDepthLumaMinus8:d,bitDepthChromaMinus8:p,avgFrameRate:f,constantFrameRate:h>>6&3,numTemporalLayers:h>>3&7,temporalIdNested:h>>2&1,lengthSizeMinusOne:3&h,arrays:g}}catch(e){return console.error("Error deserializing HEVC Decoder Configuration Record:",e),null}})(r)}}return e.inputIsAnnexB?this.prepareAnnexBVideoPacket(t.data,i):this.prepareLengthPrefixedVideoPacket(e,t,i)}prepareAnnexBVideoPacket(e,t){let r=[];for(let i of e8(e)){let a=e.subarray(i.offset,i.offset+i.length);("avc"===t?9===te(a[0]):35===td(a[0]))||r.push(a)}return r.unshift("avc"===t?oP:oI),ti(r)}prepareLengthPrefixedVideoPacket(e,t,r){let i=t.data,a="avc"===r?e.avcDecoderConfig.lengthSizeMinusOne+1:e.hevcDecoderConfig.lengthSizeMinusOne+1,n=[];for(let e of e5(i,a)){let t=i.subarray(e.offset,e.offset+e.length);("avc"===r?9===te(t[0]):35===td(t[0]))||n.push(t)}if("key"===t.type)if("avc"===r){let t=e.avcDecoderConfig;for(let e of t.pictureParameterSets)n.unshift(e);for(let e of t.sequenceParameterSets)n.unshift(e)}else{let t=e.hevcDecoderConfig;for(let e of t.arrays)if(34===e.nalUnitType)for(let t of e.nalUnits)n.unshift(t);for(let e of t.arrays)if(33===e.nalUnitType)for(let t of e.nalUnits)n.unshift(t);for(let e of t.arrays)if(32===e.nalUnitType)for(let t of e.nalUnits)n.unshift(t)}return n.unshift("avc"===r?oP:oI),ti(n)}prepareAudioPacket(e,t,r){if("mp3"===e.track.source._codec)return t.data;if(null===e.inputIsAdts){let t=r?.decoderConfig?.description;if(e.inputIsAdts=!t,!e.inputIsAdts){let r=e4(eU(w(t)));e.adtsHeader=r.header,e.adtsHeaderBitstream=r.bitstream}}if(e.inputIsAdts)return t.data;h(e.adtsHeader),h(e.adtsHeaderBitstream);let i=e.adtsHeader,a=t.data.byteLength+i.byteLength;e3(e.adtsHeaderBitstream,a);let n=new Uint8Array(a);return n.set(i,0),n.set(t.data,i.byteLength),n}allTracksAreKnown(){for(let e of this.output._tracks)if(!e.source._closed&&!this.trackDatas.some(t=>t.track===e))return!1;return!0}async interleavePackets(e=!1){if(!this.tablesWritten){if(!this.allTracksAreKnown()&&!e)return;this.writeTables()}i:for(;;){let t=null,r=1/0;for(let i of this.trackDatas){if(!e&&0===i.packetQueue.length&&!i.track.source._closed)break i;i.packetQueue.length>0&&i.packetQueue[0].timestamp<r&&(t=i,r=i.packetQueue[0].timestamp)}if(!t)break;let i=t.packetQueue.shift();this.writePesPacket(t,i)}e||await this.writer.flush()}writeTables(){h(!this.tablesWritten),this.writePsiSection(0,oF),this.writePsiSection(4096,oR(this.trackDatas)),this.tablesWritten=!0}writePsiSection(e,t){let r=0,i=!0;for(;r<t.length;){let a,n=Math.min(184-!!i,t.length-r);i?((a=this.payloadBuffer.subarray(0,1+n))[0]=0,a.set(t.subarray(r,r+n),1)):a=t.subarray(r,r+n),this.writeTsPacket(e,i,null,a),r+=n,i=!1}}writePesPacket(e,t){let r=this.pesHeaderView;G(r,0,1,!1),this.pesHeaderBuffer[3]=e.streamId;let i="video"===e.track.type?0:Math.min(8+t.data.length,65535);r.setUint16(4,i,!1),r.setUint8(6,132),r.setUint8(7,128),r.setUint8(8,5);let a=Math.round(9e4*t.timestamp);this.ptsBitstream.pos=0,this.ptsBitstream.writeBits(4,2),this.ptsBitstream.writeBits(3,a>>>30&7),this.ptsBitstream.writeBits(1,1),this.ptsBitstream.writeBits(15,a>>>15&32767),this.ptsBitstream.writeBits(1,1),this.ptsBitstream.writeBits(15,32767&a),this.ptsBitstream.writeBits(1,1);let n=this.pesHeaderBuffer.length+t.data.length,o=0,s=!0;for(;o<n;){let r,i=s,a=n-o,l=s&&t.isKeyframe,u=s&&!e.firstPacketWritten,c=Math.max(0,184-a),d=null;if((r=l||u?Math.max(2,c):c)>0){let e=this.adaptationFieldBuffer;1===r?e[0]=0:(e[0]=r-1,e[1]=Number(u)<<7|Number(l)<<6,e.fill(255,2,r)),d=e.subarray(0,r)}let p=Math.min(184-r,a),f=this.payloadBuffer.subarray(0,p),h=0;if(o<this.pesHeaderBuffer.length){let e=Math.min(this.pesHeaderBuffer.length-o,p);f.set(this.pesHeaderBuffer.subarray(o,o+e),0),h=e}let m=Math.max(0,o-this.pesHeaderBuffer.length),g=m+(p-h);h<p&&f.set(t.data.subarray(m,g),h),this.writeTsPacket(e.pid,i,d,f),o+=p,s=!1}e.firstPacketWritten=!0}writeTsPacket(e,t,r,i){let a=this.continuityCounters.get(e)??0,n=i.length>0,o=r?n?3:2:+!!n;this.packetBuffer[0]=71,this.packetView.setUint16(1,16384*!!t|8191&e,!1),this.packetBuffer[3]=o<<4|15&a,n&&this.continuityCounters.set(e,a+1&15);let s=4;r&&(this.packetBuffer.set(r,s),s+=r.length),this.packetBuffer.set(i,s),(s+=i.length)<188&&this.packetBuffer.fill(255,s);let l=this.writer.getPos();this.writer.write(this.packetBuffer),this.format._options.onPacket&&this.format._options.onPacket(this.packetBuffer.slice(),l)}async onTrackClose(){let e=await this.mutex.acquire();this.allTracksAreKnown()&&this.allTracksKnown.resolve(),await this.interleavePackets(),e()}async finalize(){let e=await this.mutex.acquire();this.allTracksKnown.resolve(),await this.interleavePackets(!0),e()}},oO=new Uint32Array(256);for(let e=0;e<256;e++){let t=e<<24;for(let e=0;e<8;e++)t=0x80000000&t?t<<1^0x4c11db7:t<<1;oO[e]=t>>>0}var oM=e=>{let t=0xffffffff;for(let r=0;r<e.length;r++)t=(t<<8^oO[t>>>24^e[r]])>>>0;return t},oF=new Uint8Array(16);{let e=S(oF);oF[0]=0,e.setUint16(1,45069,!1),e.setUint16(3,1,!1),oF[5]=193,oF[6]=0,oF[7]=0,e.setUint16(8,1,!1),e.setUint16(10,61440,!1),e.setUint32(12,oM(oF.subarray(0,12)),!1)}var oR=e=>{let t=9+5*e.length+4,r=new Uint8Array(3+t-4),i=S(r);r[0]=2,i.setUint16(1,45056|4095&t,!1),i.setUint16(3,1,!1),r[5]=193,r[6]=0,r[7]=0,i.setUint16(8,65535,!1),i.setUint16(10,61440,!1);let a=12;for(let t of e)r[a++]=t.streamType,i.setUint16(a,57344|8191&t.pid,!1),a+=2,i.setUint16(a,61440,!1),a+=2;let n=oM(r),o=new Uint8Array(r.length+4);return o.set(r,0),S(o).setUint32(r.length,n,!1),o},oD=class{constructor(e){this.writer=e,this.helper=new Uint8Array(8),this.helperView=new DataView(this.helper.buffer)}writeU16(e){this.helperView.setUint16(0,e,!0),this.writer.write(this.helper.subarray(0,2))}writeU32(e){this.helperView.setUint32(0,e,!0),this.writer.write(this.helper.subarray(0,4))}writeU64(e){this.helperView.setUint32(0,e,!0),this.helperView.setUint32(4,Math.floor(e/0x100000000),!0),this.writer.write(this.helper)}writeAscii(e){this.writer.write(new TextEncoder().encode(e))}},oj=class extends e2{constructor(e,t){super(e),this.headerWritten=!1,this.dataSize=0,this.sampleRate=null,this.sampleCount=0,this.riffSizePos=null,this.dataSizePos=null,this.ds64RiffSizePos=null,this.ds64DataSizePos=null,this.ds64SampleCountPos=null,this.format=t,this.writer=e._writer,this.riffWriter=new oD(e._writer),this.isRf64=!!t._options.large}async start(){}async getMimeType(){return"audio/wav"}async addEncodedVideoPacket(){throw Error("WAVE does not support video.")}async addEncodedAudioPacket(e,t,r){let i=await this.mutex.acquire();try{if(this.headerWritten||(e0(r),h(r),h(r.decoderConfig),this.writeHeader(e,r.decoderConfig),this.sampleRate=r.decoderConfig.sampleRate,this.headerWritten=!0),this.validateAndNormalizeTimestamp(e,t.timestamp,"key"===t.type),!this.isRf64&&this.writer.getPos()+t.data.byteLength>=0x100000000)throw Error("Adding more audio data would exceed the maximum RIFF size of 4 GiB. To write larger files, use RF64 by setting `large: true` in the WavOutputFormatOptions.");this.writer.write(t.data),this.dataSize+=t.data.byteLength,this.sampleCount+=Math.round(t.duration*this.sampleRate),await this.writer.flush()}finally{i()}}async addSubtitleCue(){throw Error("WAVE does not support subtitles.")}writeHeader(e,t){let r;this.format._options.onHeader&&this.writer.startTrackingWrites();let i=eW(e.source._codec);r="ulaw"===i.dataType?7:"alaw"===i.dataType?6:"float"===i.dataType?3:1;let a=t.numberOfChannels,n=t.sampleRate,o=i.sampleSize*a;if(this.riffWriter.writeAscii(this.isRf64?"RF64":"RIFF"),this.isRf64?this.riffWriter.writeU32(0xffffffff):(this.riffSizePos=this.writer.getPos(),this.riffWriter.writeU32(0)),this.riffWriter.writeAscii("WAVE"),this.isRf64&&(this.riffWriter.writeAscii("ds64"),this.riffWriter.writeU32(28),this.ds64RiffSizePos=this.writer.getPos(),this.riffWriter.writeU64(0),this.ds64DataSizePos=this.writer.getPos(),this.riffWriter.writeU64(0),this.ds64SampleCountPos=this.writer.getPos(),this.riffWriter.writeU64(0),this.riffWriter.writeU32(0)),this.riffWriter.writeAscii("fmt "),this.riffWriter.writeU32(16),this.riffWriter.writeU16(r),this.riffWriter.writeU16(a),this.riffWriter.writeU32(n),this.riffWriter.writeU32(n*o),this.riffWriter.writeU16(o),this.riffWriter.writeU16(8*i.sampleSize),!eC(this.output._metadataTags)){let e=this.format._options.metadataFormat??"info";"info"===e?this.writeInfoChunk(this.output._metadataTags):"id3"===e?this.writeId3Chunk(this.output._metadataTags):W(e)}if(this.riffWriter.writeAscii("data"),this.isRf64?this.riffWriter.writeU32(0xffffffff):(this.dataSizePos=this.writer.getPos(),this.riffWriter.writeU32(0)),this.format._options.onHeader){let{data:e,start:t}=this.writer.stopTrackingWrites();this.format._options.onHeader(e,t)}}writeInfoChunk(e){let t=this.writer.getPos();this.riffWriter.writeAscii("LIST"),this.riffWriter.writeU32(0),this.riffWriter.writeAscii("INFO");let r=new Set,i=(e,t)=>{if(!E(t))return void console.warn(`Didn't write tag '${e}' because '${t}' is not ISO 8859-1-compatible.`);let i=t.length+1,a=new Uint8Array(i);for(let e=0;e<t.length;e++)a[e]=t.charCodeAt(e);this.riffWriter.writeAscii(e),this.riffWriter.writeU32(i),this.writer.write(a),1&i&&this.writer.write(new Uint8Array(1)),r.add(e)};for(let{key:t,value:a}of eh(e))switch(t){case"title":i("INAM",a),r.add("INAM");break;case"artist":i("IART",a),r.add("IART");break;case"album":i("IPRD",a),r.add("IPRD");break;case"trackNumber":i("ITRK",void 0!==e.tracksTotal?`${a}/${e.tracksTotal}`:a.toString()),r.add("ITRK");break;case"genre":i("IGNR",a),r.add("IGNR");break;case"date":i("ICRD",a.toISOString().slice(0,10)),r.add("ICRD");break;case"comment":i("ICMT",a),r.add("ICMT");break;case"albumArtist":case"discNumber":case"tracksTotal":case"discsTotal":case"description":case"lyrics":case"images":case"raw":break;default:W(t)}if(e.raw)for(let t in e.raw){let a=e.raw[t];null==a||4!==t.length||r.has(t)||"string"==typeof a&&i(t,a)}let a=this.writer.getPos(),n=a-t-8;this.writer.seek(t+4),this.riffWriter.writeU32(n),this.writer.seek(a),1&n&&this.writer.write(new Uint8Array(1))}writeId3Chunk(e){let t=this.writer.getPos();this.riffWriter.writeAscii("ID3 "),this.riffWriter.writeU32(0);let r=new ih(this.writer).writeId3V2Tag(e),i=this.writer.getPos();this.writer.seek(t+4),this.riffWriter.writeU32(r),this.writer.seek(i),1&r&&this.writer.write(new Uint8Array(1))}async finalize(){let e=await this.mutex.acquire(),t=this.writer.getPos();this.isRf64?(h(null!==this.ds64RiffSizePos),this.writer.seek(this.ds64RiffSizePos),this.riffWriter.writeU64(t-8),h(null!==this.ds64DataSizePos),this.writer.seek(this.ds64DataSizePos),this.riffWriter.writeU64(this.dataSize),h(null!==this.ds64SampleCountPos),this.writer.seek(this.ds64SampleCountPos),this.riffWriter.writeU64(this.sampleCount)):(h(null!==this.riffSizePos),this.writer.seek(this.riffSizePos),this.riffWriter.writeU32(t-8),h(null!==this.dataSizePos),this.writer.seek(this.dataSizePos),this.riffWriter.writeU32(this.dataSize)),this.writer.seek(t),e()}},oL=class{getSupportedVideoCodecs(){return this.getSupportedCodecs().filter(e=>e_.includes(e))}getSupportedAudioCodecs(){return this.getSupportedCodecs().filter(e=>eI.includes(e))}getSupportedSubtitleCodecs(){return this.getSupportedCodecs().filter(e=>eA.includes(e))}_codecUnsupportedHint(e){return""}},oB=class extends oL{constructor(e={}){if(!e||"object"!=typeof e)throw TypeError("options must be an object.");if(void 0!==e.fastStart&&![!1,"in-memory","reserve","fragmented"].includes(e.fastStart))throw TypeError("options.fastStart, when provided, must be false, 'in-memory', 'reserve', or 'fragmented'.");if(void 0!==e.minimumFragmentDuration&&(!Number.isFinite(e.minimumFragmentDuration)||e.minimumFragmentDuration<0))throw TypeError("options.minimumFragmentDuration, when provided, must be a non-negative number.");if(void 0!==e.onFtyp&&"function"!=typeof e.onFtyp)throw TypeError("options.onFtyp, when provided, must be a function.");if(void 0!==e.onMoov&&"function"!=typeof e.onMoov)throw TypeError("options.onMoov, when provided, must be a function.");if(void 0!==e.onMdat&&"function"!=typeof e.onMdat)throw TypeError("options.onMdat, when provided, must be a function.");if(void 0!==e.onMoof&&"function"!=typeof e.onMoof)throw TypeError("options.onMoof, when provided, must be a function.");if(void 0!==e.metadataFormat&&!["mdir","mdta","udta","auto"].includes(e.metadataFormat))throw TypeError("options.metadataFormat, when provided, must be either 'auto', 'mdir', 'mdta', or 'udta'.");super(),this._options=e}getSupportedTrackCounts(){return{video:{min:0,max:0x100000000-1},audio:{min:0,max:0x100000000-1},subtitle:{min:0,max:0x100000000-1},total:{min:1,max:0x100000000-1}}}get supportsVideoRotationMetadata(){return!0}_createMuxer(e){return new ow(e,this)}},oN=class extends oB{constructor(e){super(e)}get _name(){return"MP4"}get fileExtension(){return".mp4"}get mimeType(){return"video/mp4"}getSupportedCodecs(){return[...e_,...eP,"pcm-s16","pcm-s16be","pcm-s24","pcm-s24be","pcm-s32","pcm-s32be","pcm-f32","pcm-f32be","pcm-f64","pcm-f64be",...eA]}_codecUnsupportedHint(e){return new o$().getSupportedCodecs().includes(e)?" Switching to MOV will grant support for this codec.":""}},o$=class extends oB{constructor(e){super(e)}get _name(){return"MOV"}get fileExtension(){return".mov"}get mimeType(){return"video/quicktime"}getSupportedCodecs(){return[...e_,...eI]}_codecUnsupportedHint(e){return new oN().getSupportedCodecs().includes(e)?" Switching to MP4 will grant support for this codec.":""}},oz=class extends oL{constructor(e={}){if(!e||"object"!=typeof e)throw TypeError("options must be an object.");if(void 0!==e.appendOnly&&"boolean"!=typeof e.appendOnly)throw TypeError("options.appendOnly, when provided, must be a boolean.");if(void 0!==e.minimumClusterDuration&&(!Number.isFinite(e.minimumClusterDuration)||e.minimumClusterDuration<0))throw TypeError("options.minimumClusterDuration, when provided, must be a non-negative number.");if(void 0!==e.onEbmlHeader&&"function"!=typeof e.onEbmlHeader)throw TypeError("options.onEbmlHeader, when provided, must be a function.");if(void 0!==e.onSegmentHeader&&"function"!=typeof e.onSegmentHeader)throw TypeError("options.onHeader, when provided, must be a function.");if(void 0!==e.onCluster&&"function"!=typeof e.onCluster)throw TypeError("options.onCluster, when provided, must be a function.");super(),this._options=e}_createMuxer(e){return new oC(e,this)}get _name(){return"Matroska"}getSupportedTrackCounts(){return{video:{min:0,max:127},audio:{min:0,max:127},subtitle:{min:0,max:127},total:{min:1,max:127}}}get fileExtension(){return".mkv"}get mimeType(){return"video/x-matroska"}getSupportedCodecs(){return[...e_,...eP,...eT.filter(e=>!["pcm-s8","pcm-f32be","pcm-f64be","ulaw","alaw"].includes(e)),...eA]}get supportsVideoRotationMetadata(){return!1}},oU=class extends oz{constructor(e){super(e)}getSupportedCodecs(){return[...e_.filter(e=>["vp8","vp9","av1"].includes(e)),...eI.filter(e=>["opus","vorbis"].includes(e)),...eA]}get _name(){return"WebM"}get fileExtension(){return".webm"}get mimeType(){return"video/webm"}_codecUnsupportedHint(e){return new oz().getSupportedCodecs().includes(e)?" Switching to MKV will grant support for this codec.":""}},oV=class extends oL{constructor(e={}){if(!e||"object"!=typeof e)throw TypeError("options must be an object.");if(void 0!==e.xingHeader&&"boolean"!=typeof e.xingHeader)throw TypeError("options.xingHeader, when provided, must be a boolean.");if(void 0!==e.onXingFrame&&"function"!=typeof e.onXingFrame)throw TypeError("options.onXingFrame, when provided, must be a function.");super(),this._options=e}_createMuxer(e){return new o_(e,this)}get _name(){return"MP3"}getSupportedTrackCounts(){return{video:{min:0,max:0},audio:{min:1,max:1},subtitle:{min:0,max:0},total:{min:1,max:1}}}get fileExtension(){return".mp3"}get mimeType(){return"audio/mpeg"}getSupportedCodecs(){return["mp3"]}get supportsVideoRotationMetadata(){return!1}},oH=class extends oL{constructor(e={}){if(!e||"object"!=typeof e)throw TypeError("options must be an object.");if(void 0!==e.large&&"boolean"!=typeof e.large)throw TypeError("options.large, when provided, must be a boolean.");if(void 0!==e.metadataFormat&&!["info","id3"].includes(e.metadataFormat))throw TypeError("options.metadataFormat, when provided, must be either 'info' or 'id3'.");if(void 0!==e.onHeader&&"function"!=typeof e.onHeader)throw TypeError("options.onHeader, when provided, must be a function.");super(),this._options=e}_createMuxer(e){return new oj(e,this)}get _name(){return"WAVE"}getSupportedTrackCounts(){return{video:{min:0,max:0},audio:{min:1,max:1},subtitle:{min:0,max:0},total:{min:1,max:1}}}get fileExtension(){return".wav"}get mimeType(){return"audio/wav"}getSupportedCodecs(){return[...eT.filter(e=>["pcm-s16","pcm-s24","pcm-s32","pcm-f32","pcm-u8","ulaw","alaw"].includes(e))]}get supportsVideoRotationMetadata(){return!1}},oW=class extends oL{constructor(e={}){if(!e||"object"!=typeof e)throw TypeError("options must be an object.");if(void 0!==e.maximumPageDuration&&(!Number.isFinite(e.maximumPageDuration)||e.maximumPageDuration<=0))throw TypeError("options.maximumPageDuration, when provided, must be a positive number.");if(void 0!==e.onPage&&"function"!=typeof e.onPage)throw TypeError("options.onPage, when provided, must be a function.");super(),this._options=e}_createMuxer(e){return new oT(e,this)}get _name(){return"Ogg"}getSupportedTrackCounts(){return{video:{min:0,max:0},audio:{min:0,max:0x100000000},subtitle:{min:0,max:0},total:{min:1,max:0x100000000}}}get fileExtension(){return".ogg"}get mimeType(){return"application/ogg"}getSupportedCodecs(){return[...eI.filter(e=>["vorbis","opus"].includes(e))]}get supportsVideoRotationMetadata(){return!1}},oq=class extends oL{constructor(e={}){if(!e||"object"!=typeof e)throw TypeError("options must be an object.");if(void 0!==e.onFrame&&"function"!=typeof e.onFrame)throw TypeError("options.onFrame, when provided, must be a function.");super(),this._options=e}_createMuxer(e){return new e6(e,this)}get _name(){return"ADTS"}getSupportedTrackCounts(){return{video:{min:0,max:0},audio:{min:1,max:1},subtitle:{min:0,max:0},total:{min:1,max:1}}}get fileExtension(){return".aac"}get mimeType(){return"audio/aac"}getSupportedCodecs(){return["aac"]}get supportsVideoRotationMetadata(){return!1}},oG=class extends oL{constructor(e={}){if(!e||"object"!=typeof e)throw TypeError("options must be an object.");super(),this._options=e}_createMuxer(e){return new aU(e,this)}get _name(){return"FLAC"}getSupportedTrackCounts(){return{video:{min:0,max:0},audio:{min:1,max:1},subtitle:{min:0,max:0},total:{min:1,max:1}}}get fileExtension(){return".flac"}get mimeType(){return"audio/flac"}getSupportedCodecs(){return["flac"]}get supportsVideoRotationMetadata(){return!1}},oZ=class extends oL{constructor(e={}){if(!e||"object"!=typeof e)throw TypeError("options must be an object.");if(void 0!==e.onPacket&&"function"!=typeof e.onPacket)throw TypeError("options.onPacket, when provided, must be a function.");super(),this._options=e}_createMuxer(e){return new oA(e,this)}get _name(){return"MPEG-TS"}getSupportedTrackCounts(){return{video:{min:0,max:16},audio:{min:0,max:32},subtitle:{min:0,max:0},total:{min:1,max:48}}}get fileExtension(){return".ts"}get mimeType(){return"video/MP2T"}getSupportedCodecs(){return[...e_.filter(e=>["avc","hevc"].includes(e)),...eI.filter(e=>["aac","mp3"].includes(e))]}get supportsVideoRotationMetadata(){return!1}},oK=e=>{if(!e||"object"!=typeof e)throw TypeError("Encoding config must be an object.");if(!e_.includes(e.codec))throw TypeError(`Invalid video codec '${e.codec}'. Must be one of: ${e_.join(", ")}.`);if(!(e.bitrate instanceof o1)&&(!Number.isInteger(e.bitrate)||e.bitrate<=0))throw TypeError("config.bitrate must be a positive integer or a quality.");if(void 0!==e.keyFrameInterval&&(!Number.isFinite(e.keyFrameInterval)||e.keyFrameInterval<0))throw TypeError("config.keyFrameInterval, when provided, must be a non-negative number.");if(void 0!==e.sizeChangeBehavior&&!["deny","passThrough","fill","contain","cover"].includes(e.sizeChangeBehavior))throw TypeError("config.sizeChangeBehavior, when provided, must be 'deny', 'passThrough', 'fill', 'contain' or 'cover'.");if(void 0!==e.onEncodedPacket&&"function"!=typeof e.onEncodedPacket)throw TypeError("config.onEncodedChunk, when provided, must be a function.");if(void 0!==e.onEncoderConfig&&"function"!=typeof e.onEncoderConfig)throw TypeError("config.onEncoderConfig, when provided, must be a function.");oQ(e.codec,e)},oQ=(e,t)=>{if(!t||"object"!=typeof t)throw TypeError("Encoding options must be an object.");if(void 0!==t.alpha&&!["discard","keep"].includes(t.alpha))throw TypeError("options.alpha, when provided, must be 'discard' or 'keep'.");if(void 0!==t.bitrateMode&&!["constant","variable"].includes(t.bitrateMode))throw TypeError("bitrateMode, when provided, must be 'constant' or 'variable'.");if(void 0!==t.latencyMode&&!["quality","realtime"].includes(t.latencyMode))throw TypeError("latencyMode, when provided, must be 'quality' or 'realtime'.");if(void 0!==t.fullCodecString&&"string"!=typeof t.fullCodecString)throw TypeError("fullCodecString, when provided, must be a string.");if(void 0!==t.fullCodecString&&eq(t.fullCodecString)!==e)throw TypeError(`fullCodecString, when provided, must be a string that matches the specified codec (${e}).`);if(void 0!==t.hardwareAcceleration&&!["no-preference","prefer-hardware","prefer-software"].includes(t.hardwareAcceleration))throw TypeError("hardwareAcceleration, when provided, must be 'no-preference', 'prefer-hardware' or 'prefer-software'.");if(void 0!==t.scalabilityMode&&"string"!=typeof t.scalabilityMode)throw TypeError("scalabilityMode, when provided, must be a string.");if(void 0!==t.contentHint&&"string"!=typeof t.contentHint)throw TypeError("contentHint, when provided, must be a string.")},oX=e=>{var t;let r=e.bitrate instanceof o1?e.bitrate._toVideoBitrate(e.codec,e.width,e.height):e.bitrate;return{codec:e.fullCodecString??((e,t,r,i)=>{if("avc"===e){let e=Math.ceil(t/16)*Math.ceil(r/16),a=eO.find(t=>e<=t.maxMacroblocks&&i<=t.maxBitrate)??g(eO),n=a?a.level:0,o="64".padStart(2,"0"),s=n.toString(16).padStart(2,"0");return`avc1.${o}00${s}`}if("hevc"===e){let e=t*r,a=eM.find(t=>e<=t.maxPictureSize&&i<=t.maxBitrate)??g(eM);return`hev1.1.6.${a.tier}${a.level}.B0`}if("vp8"===e)return"vp8";if("vp9"===e){let e=t*r,a=eF.find(t=>e<=t.maxPictureSize&&i<=t.maxBitrate)??g(eF);return`vp09.00.${a.level.toString().padStart(2,"0")}.08`}if("av1"===e){let e=t*r,a=eR.find(t=>e<=t.maxPictureSize&&i<=t.maxBitrate)??g(eR),n=a.level.toString().padStart(2,"0");return`av01.0.${n}${a.tier}.08`}throw TypeError(`Unhandled codec '${e}'.`)})(e.codec,e.width,e.height,r),width:e.width,height:e.height,bitrate:r,bitrateMode:e.bitrateMode,alpha:e.alpha??"discard",framerate:e.framerate,latencyMode:e.latencyMode,hardwareAcceleration:e.hardwareAcceleration,scalabilityMode:e.scalabilityMode,contentHint:e.contentHint,..."avc"===(t=e.codec)?{avc:{format:"avc"}}:"hevc"===t?{hevc:{format:"hevc"}}:{}}},oJ=e=>{if(!e||"object"!=typeof e)throw TypeError("Encoding config must be an object.");if(!eI.includes(e.codec))throw TypeError(`Invalid audio codec '${e.codec}'. Must be one of: ${eI.join(", ")}.`);if(void 0===e.bitrate&&(!eT.includes(e.codec)||"flac"===e.codec))throw TypeError("config.bitrate must be provided for compressed audio codecs.");if(void 0!==e.bitrate&&!(e.bitrate instanceof o1)&&(!Number.isInteger(e.bitrate)||e.bitrate<=0))throw TypeError("config.bitrate, when provided, must be a positive integer or a quality.");if(void 0!==e.onEncodedPacket&&"function"!=typeof e.onEncodedPacket)throw TypeError("config.onEncodedChunk, when provided, must be a function.");if(void 0!==e.onEncoderConfig&&"function"!=typeof e.onEncoderConfig)throw TypeError("config.onEncoderConfig, when provided, must be a function.");oY(e.codec,e)},oY=(e,t)=>{if(!t||"object"!=typeof t)throw TypeError("Encoding options must be an object.");if(void 0!==t.bitrateMode&&!["constant","variable"].includes(t.bitrateMode))throw TypeError("bitrateMode, when provided, must be 'constant' or 'variable'.");if(void 0!==t.fullCodecString&&"string"!=typeof t.fullCodecString)throw TypeError("fullCodecString, when provided, must be a string.");if(void 0!==t.fullCodecString&&eq(t.fullCodecString)!==e)throw TypeError(`fullCodecString, when provided, must be a string that matches the specified codec (${e}).`)},o0=e=>{var t;let r=e.bitrate instanceof o1?e.bitrate._toAudioBitrate(e.codec):e.bitrate;return{codec:e.fullCodecString??((e,t,r)=>{if("aac"===e)return t>=2&&r<=24e3?"mp4a.40.29":r<=24e3?"mp4a.40.5":"mp4a.40.2";if("mp3"===e)return"mp3";if("opus"===e)return"opus";if("vorbis"===e)return"vorbis";if("flac"===e)return"flac";else if(eT.includes(e))return e;throw TypeError(`Unhandled codec '${e}'.`)})(e.codec,e.numberOfChannels,e.sampleRate),numberOfChannels:e.numberOfChannels,sampleRate:e.sampleRate,bitrate:r,bitrateMode:e.bitrateMode,..."aac"===(t=e.codec)?{aac:{format:"aac"}}:"opus"===t?{opus:{format:"opus"}}:{}}},o1=class{constructor(e){this._factor=e}_toVideoBitrate(e,t,r){return 1e3*Math.ceil(3e6*Math.pow(t*r/2073600,.95)*({avc:1,hevc:.6,vp9:.6,av1:.4,vp8:1.2})[e]*this._factor/1e3)}_toAudioBitrate(e){if(eT.includes(e)||"flac"===e)return;let t={aac:128e3,opus:64e3,mp3:16e4,vorbis:64e3}[e];if(!t)throw Error(`Unhandled codec: ${e}`);let r=t*this._factor;return"aac"===e?r=[96e3,128e3,16e4,192e3].reduce((e,t)=>Math.abs(t-r)<Math.abs(e-r)?t:e):"opus"===e||"vorbis"===e?r=Math.max(6e3,r):"mp3"===e&&(r=[8e3,16e3,24e3,32e3,4e4,48e3,64e3,8e4,96e3,112e3,128e3,16e4,192e3,224e3,256e3,32e4].reduce((e,t)=>Math.abs(t-r)<Math.abs(e-r)?t:e)),1e3*Math.round(r/1e3)}},o2=new o1(.3),o4=new o1(.6),o3=new o1(1),o6=new o1(2),o8=new o1(4),o5=e=>{if(e_.includes(e))return o7(e);if(eI.includes(e))return o9(e);if(eA.includes(e))return se(e);throw TypeError(`Unknown codec '${e}'.`)},o7=async(e,t={})=>{let{width:r=1280,height:i=720,bitrate:a=1e6,...n}=t;if(!e_.includes(e))return!1;if(!Number.isInteger(r)||r<=0)throw TypeError("width must be a positive integer.");if(!Number.isInteger(i)||i<=0)throw TypeError("height must be a positive integer.");if(!(a instanceof o1)&&(!Number.isInteger(a)||a<=0))throw TypeError("bitrate must be a positive integer or a quality.");oQ(e,n);let o=null;return!!(tL.length>0&&(o??=oX({codec:e,width:r,height:i,bitrate:a,framerate:void 0,...n}),tL.some(t=>t.supports(e,o))))||!("u"<typeof VideoEncoder)&&(r%2!=1&&i%2!=1||"avc"!==e&&"hevc"!==e)&&(o??=oX({codec:e,width:r,height:i,bitrate:a,framerate:void 0,...n,alpha:"discard"}),!!(await VideoEncoder.isConfigSupported(o)).supported&&(!es()||new Promise(async e=>{try{let t=new VideoEncoder({output:()=>{},error:()=>e(!1)});t.configure(o);let a=new Uint8Array(r*i*4),n=new VideoFrame(a,{format:"RGBA",codedWidth:r,codedHeight:i,timestamp:0});t.encode(n),n.close(),await t.flush(),e(!0)}catch{e(!1)}})))},o9=async(e,t={})=>{let{numberOfChannels:r=2,sampleRate:i=48e3,bitrate:a=128e3,...n}=t;if(!eI.includes(e))return!1;if(!Number.isInteger(r)||r<=0)throw TypeError("numberOfChannels must be a positive integer.");if(!Number.isInteger(i)||i<=0)throw TypeError("sampleRate must be a positive integer.");if(!(a instanceof o1)&&(!Number.isInteger(a)||a<=0))throw TypeError("bitrate must be a positive integer.");oY(e,n);let o=null;return!!(tB.length>0&&(o??=o0({codec:e,numberOfChannels:r,sampleRate:i,bitrate:a,...n}),tB.some(t=>t.supports(e,o))))||!!eT.includes(e)||!("u"<typeof AudioEncoder)&&(o??=o0({codec:e,numberOfChannels:r,sampleRate:i,bitrate:a,...n}),!0===(await AudioEncoder.isConfigSupported(o)).supported)},se=async e=>!!eA.includes(e),st=async()=>{let[e,t,r]=await Promise.all([sr(),si(),sa()]);return[...e,...t,...r]},sr=async(e=e_,t)=>{let r=await Promise.all(e.map(e=>o7(e,t)));return e.filter((e,t)=>r[t])},si=async(e=eI,t)=>{let r=await Promise.all(e.map(e=>o9(e,t)));return e.filter((e,t)=>r[t])},sa=async(e=eA)=>{let t=await Promise.all(e.map(se));return e.filter((e,r)=>t[r])},sn=async(e,t)=>{for(let r of e)if(await o7(r,t))return r;return null},so=async(e,t)=>{for(let r of e)if(await o9(r,t))return r;return null},ss=async e=>{for(let t of e)if(await se(t))return t;return null},sl=class{constructor(){this._connectedTrack=null,this._closingPromise=null,this._closed=!1,this._timestampOffset=0}_ensureValidAdd(){if(!this._connectedTrack)throw Error("Source is not connected to an output track.");if("canceled"===this._connectedTrack.output.state)throw Error("Output has been canceled.");if("finalizing"===this._connectedTrack.output.state||"finalized"===this._connectedTrack.output.state)throw Error("Output has been finalized.");if("pending"===this._connectedTrack.output.state)throw Error("Output has not started.");if(this._closed)throw Error("Source is closed.")}async _start(){}async _flushAndClose(e){}close(){if(this._closingPromise)return;let e=this._connectedTrack;if(!e)throw Error("Cannot call close without connecting the source to an output track.");if("pending"===e.output.state)throw Error("Cannot call close before output has been started.");this._closingPromise=(async()=>{await this._flushAndClose(!1),this._closed=!0,"finalizing"!==e.output.state&&"finalized"!==e.output.state&&e.output._muxer.onTrackClose(e)})()}async _flushOrWaitForOngoingClose(e){return this._closingPromise??=(async()=>{await this._flushAndClose(e),this._closed=!0})()}},su=class extends sl{constructor(e){if(super(),this._connectedTrack=null,!e_.includes(e))throw TypeError(`Invalid video codec '${e}'. Must be one of: ${e_.join(", ")}.`);this._codec=e}},sc=class extends su{constructor(e){super(e)}add(e,t){if(!(e instanceof tU))throw TypeError("packet must be an EncodedPacket.");if(e.isMetadataOnly)throw TypeError("Metadata-only packets cannot be added.");if(void 0!==t&&(!t||"object"!=typeof t))throw TypeError("meta, when provided, must be an object.");return this._ensureValidAdd(),this._connectedTrack.output._muxer.addEncodedVideoPacket(this._connectedTrack,e,t)}},sd=class{constructor(e,t){this.source=e,this.encodingConfig=t,this.ensureEncoderPromise=null,this.encoderInitialized=!1,this.encoder=null,this.muxer=null,this.lastMultipleOfKeyFrameInterval=-1,this.codedWidth=null,this.codedHeight=null,this.resizeCanvas=null,this.customEncoder=null,this.customEncoderCallSerializer=new ei,this.customEncoderQueueSize=0,this.alphaEncoder=null,this.splitter=null,this.splitterCreationFailed=!1,this.alphaFrameQueue=[],this.error=null,this.errorNeedsNewStack=!0}async add(e,t,r){try{if(this.checkForEncoderError(),this.source._ensureValidAdd(),null!==this.codedWidth&&null!==this.codedHeight){if(e.codedWidth!==this.codedWidth||e.codedHeight!==this.codedHeight){let r=this.encodingConfig.sizeChangeBehavior??"deny";if("passThrough"===r);else if("deny"===r)throw Error(`Video sample size must remain constant. Expected ${this.codedWidth}x${this.codedHeight}, got ${e.codedWidth}x${e.codedHeight}. To allow the sample size to change over time, set \`sizeChangeBehavior\` to a value other than 'strict' in the encoding options.`);else{let i=!1;this.resizeCanvas||("u">typeof document?(this.resizeCanvas=document.createElement("canvas"),this.resizeCanvas.width=this.codedWidth,this.resizeCanvas.height=this.codedHeight):this.resizeCanvas=new OffscreenCanvas(this.codedWidth,this.codedHeight),i=!0);let a=this.resizeCanvas.getContext("2d",{alpha:es()});h(a),i||(es()?(a.fillStyle="black",a.fillRect(0,0,this.codedWidth,this.codedHeight)):a.clearRect(0,0,this.codedWidth,this.codedHeight)),e.drawWithFit(a,{fit:r}),t&&e.close(),e=new tZ(this.resizeCanvas,{timestamp:e.timestamp,duration:e.duration,rotation:e.rotation}),t=!0}}}else this.codedWidth=e.codedWidth,this.codedHeight=e.codedHeight;!this.encoderInitialized&&(this.ensureEncoderPromise||this.ensureEncoder(e),this.encoderInitialized||await this.ensureEncoderPromise),h(this.encoderInitialized);let i=this.encodingConfig.keyFrameInterval??5,a=Math.floor(e.timestamp/i),n={...r,keyFrame:r?.keyFrame||0===i||a!==this.lastMultipleOfKeyFrameInterval};if(this.lastMultipleOfKeyFrameInterval=a,this.customEncoder){this.customEncoderQueueSize++;let t=e.clone(),r=this.customEncoderCallSerializer.call(()=>this.customEncoder.encode(t,n)).then(()=>this.customEncoderQueueSize--).catch(e=>this.error??=e).finally(()=>{t.close()});this.customEncoderQueueSize>=4&&await r}else{h(this.encoder);let r=e.toVideoFrame();if(this.alphaEncoder)if(r.format&&!r.format.includes("A")||this.splitterCreationFailed)this.alphaFrameQueue.push(null),this.encoder.encode(r,n),r.close();else{let e=r.displayWidth,t=r.displayHeight;if(!this.splitter)try{this.splitter=new sp(e,t)}catch(e){console.error("Due to an error, only color data will be encoded.",e),this.splitterCreationFailed=!0,this.alphaFrameQueue.push(null),this.encoder.encode(r,n),r.close()}if(this.splitter){let e=this.splitter.extractColor(r),t=this.splitter.extractAlpha(r);this.alphaFrameQueue.push(t),this.encoder.encode(e,n),e.close(),r.close()}}else this.encoder.encode(r,n),r.close();t&&e.close(),this.encoder.encodeQueueSize>=4&&await new Promise(e=>this.encoder.addEventListener("dequeue",e,{once:!0}))}await this.muxer.mutex.currentPromise}finally{t&&e.close()}}ensureEncoder(e){let t=Error();this.ensureEncoderPromise=(async()=>{let r=oX({width:e.codedWidth,height:e.codedHeight,...this.encodingConfig,framerate:this.source._connectedTrack?.metadata.frameRate});this.encodingConfig.onEncoderConfig?.(r);let i=tL.find(e=>e.supports(this.encodingConfig.codec,r));if(i)this.customEncoder=new i,this.customEncoder.codec=this.encodingConfig.codec,this.customEncoder.config=r,this.customEncoder.onPacket=(e,t)=>{if(!(e instanceof tU))throw TypeError("The first argument passed to onPacket must be an EncodedPacket.");if(void 0!==t&&(!t||"object"!=typeof t))throw TypeError("The second argument passed to onPacket must be an object or undefined.");this.encodingConfig.onEncodedPacket?.(e,t),this.muxer.addEncodedVideoPacket(this.source._connectedTrack,e,t).catch(e=>{this.error??=e,this.errorNeedsNewStack=!1})},await this.customEncoder.init();else{if("u"<typeof VideoEncoder)throw Error("VideoEncoder is not supported by this browser.");if(r.alpha="discard","keep"===this.encodingConfig.alpha&&(r.latencyMode="quality"),(r.width%2==1||r.height%2==1)&&("avc"===this.encodingConfig.codec||"hevc"===this.encodingConfig.codec))throw Error(`The dimensions ${r.width}x${r.height} are not supported for codec '${this.encodingConfig.codec}'; both width and height must be even numbers. Make sure to round your dimensions to the nearest even number.`);if(!(await VideoEncoder.isConfigSupported(r)).supported)throw Error(`This specific encoder configuration (${r.codec}, ${r.bitrate} bps, ${r.width}x${r.height}, hardware acceleration: ${r.hardwareAcceleration??"no-preference"}) is not supported by this browser. Consider using another codec or changing your video parameters.`);let e=[],i=[],a=0,n=0,o=(e,t,r)=>{let i={};if(t){let e=new Uint8Array(t.byteLength);t.copyTo(e),i.alpha=e}let a=tU.fromEncodedChunk(e,i);this.encodingConfig.onEncodedPacket?.(a,r),this.muxer.addEncodedVideoPacket(this.source._connectedTrack,a,r).catch(e=>{this.error??=e,this.errorNeedsNewStack=!1})};this.encoder=new VideoEncoder({output:(t,r)=>{if(!this.alphaEncoder)return void o(t,null,r);let s=this.alphaFrameQueue.shift();h(void 0!==s),s?(this.alphaEncoder.encode(s,{keyFrame:"key"===t.type}),n++,s.close(),e.push({chunk:t,meta:r})):0===n?o(t,null,r):(i.push(a+n),e.push({chunk:t,meta:r}))},error:e=>{e.stack=t.stack,this.error??=e}}),this.encoder.configure(r),"keep"===this.encodingConfig.alpha&&(this.alphaEncoder=new VideoEncoder({output:(t,r)=>{n--;let s=e.shift();for(h(void 0!==s),o(s.chunk,t,s.meta),a++;i.length>0&&i[0]===a;){i.shift();let t=e.shift();h(void 0!==t),o(t.chunk,null,t.meta)}},error:e=>{e.stack=t.stack,this.error??=e}}),this.alphaEncoder.configure(r))}h(this.source._connectedTrack),this.muxer=this.source._connectedTrack.output._muxer,this.encoderInitialized=!0})()}async flushAndClose(e){e||this.checkForEncoderError(),this.customEncoder?(e||this.customEncoderCallSerializer.call(()=>this.customEncoder.flush()),await this.customEncoderCallSerializer.call(()=>this.customEncoder.close())):this.encoder&&(e||(await this.encoder.flush(),await this.alphaEncoder?.flush()),"closed"!==this.encoder.state&&this.encoder.close(),this.alphaEncoder&&"closed"!==this.alphaEncoder.state&&this.alphaEncoder.close(),this.alphaFrameQueue.forEach(e=>e?.close()),this.splitter?.close()),e||this.checkForEncoderError()}getQueueSize(){return this.customEncoder?this.customEncoderQueueSize:this.encoder?.encodeQueueSize??0}checkForEncoderError(){if(this.error)throw this.errorNeedsNewStack&&(this.error.stack=Error().stack),this.error}},sp=class{constructor(e,t){this.lastFrame=null,"u">typeof OffscreenCanvas?this.canvas=new OffscreenCanvas(e,t):(this.canvas=document.createElement("canvas"),this.canvas.width=e,this.canvas.height=t);const r=this.canvas.getContext("webgl2",{alpha:!0});if(!r)throw Error("Couldn't acquire WebGL 2 context.");this.gl=r,this.colorProgram=this.createColorProgram(),this.alphaProgram=this.createAlphaProgram(),this.vao=this.createVAO(),this.sourceTexture=this.createTexture(),this.alphaResolutionLocation=this.gl.getUniformLocation(this.alphaProgram,"u_resolution"),this.gl.useProgram(this.colorProgram),this.gl.uniform1i(this.gl.getUniformLocation(this.colorProgram,"u_sourceTexture"),0),this.gl.useProgram(this.alphaProgram),this.gl.uniform1i(this.gl.getUniformLocation(this.alphaProgram,"u_sourceTexture"),0)}createVertexShader(){return this.createShader(this.gl.VERTEX_SHADER,`#version 300 es
			in vec2 a_position;
			in vec2 a_texCoord;
			out vec2 v_texCoord;
			
			void main() {
				gl_Position = vec4(a_position, 0.0, 1.0);
				v_texCoord = a_texCoord;
			}
		`)}createColorProgram(){let e=this.createVertexShader(),t=this.createShader(this.gl.FRAGMENT_SHADER,`#version 300 es
			precision highp float;
			
			uniform sampler2D u_sourceTexture;
			in vec2 v_texCoord;
			out vec4 fragColor;
			
			void main() {
				vec4 source = texture(u_sourceTexture, v_texCoord);
				fragColor = vec4(source.rgb, 1.0);
			}
		`),r=this.gl.createProgram();return this.gl.attachShader(r,e),this.gl.attachShader(r,t),this.gl.linkProgram(r),r}createAlphaProgram(){let e=this.createVertexShader(),t=this.createShader(this.gl.FRAGMENT_SHADER,`#version 300 es
			precision highp float;
			
			uniform sampler2D u_sourceTexture;
			uniform vec2 u_resolution; // The width and height of the canvas
			in vec2 v_texCoord;
			out vec4 fragColor;

			// This function determines the value for a single byte in the YUV stream
			float getByteValue(float byteOffset) {
				float width = u_resolution.x;
				float height = u_resolution.y;

				float yPlaneSize = width * height;

				if (byteOffset < yPlaneSize) {
					// This byte is in the luma plane. Find the corresponding pixel coordinates to sample from
					float y = floor(byteOffset / width);
					float x = mod(byteOffset, width);
					
					// Add 0.5 to sample the center of the texel
					vec2 sampleCoord = (vec2(x, y) + 0.5) / u_resolution;
					
					// The luma value is the alpha from the source texture
					return texture(u_sourceTexture, sampleCoord).a;
				} else {
					// Write a fixed value for chroma and beyond
					return 128.0 / 255.0;
				}
			}
			
			void main() {
				// Each fragment writes 4 bytes (R, G, B, A)
				float pixelIndex = floor(gl_FragCoord.y) * u_resolution.x + floor(gl_FragCoord.x);
				float baseByteOffset = pixelIndex * 4.0;

				vec4 result;
				for (int i = 0; i < 4; i++) {
					float currentByteOffset = baseByteOffset + float(i);
					result[i] = getByteValue(currentByteOffset);
				}
				
				fragColor = result;
			}
		`),r=this.gl.createProgram();return this.gl.attachShader(r,e),this.gl.attachShader(r,t),this.gl.linkProgram(r),r}createShader(e,t){let r=this.gl.createShader(e);return this.gl.shaderSource(r,t),this.gl.compileShader(r),this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS)||console.error("Shader compile error:",this.gl.getShaderInfoLog(r)),r}createVAO(){let e=this.gl.createVertexArray();this.gl.bindVertexArray(e);let t=new Float32Array([-1,-1,0,1,1,-1,1,1,-1,1,0,0,1,1,1,0]),r=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,r),this.gl.bufferData(this.gl.ARRAY_BUFFER,t,this.gl.STATIC_DRAW);let i=this.gl.getAttribLocation(this.colorProgram,"a_position"),a=this.gl.getAttribLocation(this.colorProgram,"a_texCoord");return this.gl.enableVertexAttribArray(i),this.gl.vertexAttribPointer(i,2,this.gl.FLOAT,!1,16,0),this.gl.enableVertexAttribArray(a),this.gl.vertexAttribPointer(a,2,this.gl.FLOAT,!1,16,8),e}createTexture(){let e=this.gl.createTexture();return this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),e}updateTexture(e){this.lastFrame!==e&&((e.displayWidth!==this.canvas.width||e.displayHeight!==this.canvas.height)&&(this.canvas.width=e.displayWidth,this.canvas.height=e.displayHeight),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.sourceTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e),this.lastFrame=e)}extractColor(e){return this.updateTexture(e),this.gl.useProgram(this.colorProgram),this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.bindVertexArray(this.vao),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),new VideoFrame(this.canvas,{timestamp:e.timestamp,duration:e.duration??void 0,alpha:"discard"})}extractAlpha(e){this.updateTexture(e),this.gl.useProgram(this.alphaProgram),this.gl.uniform2f(this.alphaResolutionLocation,this.canvas.width,this.canvas.height),this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.bindVertexArray(this.vao),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4);let{width:t,height:r}=this.canvas,i=Math.ceil(t/2)*Math.ceil(r/2),a=t*r+2*i,n=Math.ceil(a/(4*t)),o=new Uint8Array(4*t*n);this.gl.readPixels(0,0,t,n,this.gl.RGBA,this.gl.UNSIGNED_BYTE,o),h(128===(o=o.subarray(0,a))[t*r]),h(128===o[o.length-1]);let s={format:"I420",codedWidth:t,codedHeight:r,timestamp:e.timestamp,duration:e.duration??void 0,transfer:[o.buffer]};return new VideoFrame(o,s)}close(){this.gl.getExtension("WEBGL_lose_context")?.loseContext(),this.gl=null}},sf=class extends su{constructor(e){oK(e),super(e.codec),this._encoder=new sd(this,e)}add(e,t){if(!(e instanceof tZ))throw TypeError("videoSample must be a VideoSample.");return this._encoder.add(e,!1,t)}_flushAndClose(e){return this._encoder.flushAndClose(e)}},sh=class extends su{constructor(e,t){if(!("u">typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement)&&!("u">typeof OffscreenCanvas&&e instanceof OffscreenCanvas))throw TypeError("canvas must be an HTMLCanvasElement or OffscreenCanvas.");oK(t),super(t.codec),this._encoder=new sd(this,t),this._canvas=e}add(e,t=0,r){if(!Number.isFinite(e)||e<0)throw TypeError("timestamp must be a non-negative number.");if(!Number.isFinite(t)||t<0)throw TypeError("duration must be a non-negative number.");let i=new tZ(this._canvas,{timestamp:e,duration:t});return this._encoder.add(i,!0,r)}_flushAndClose(e){return this._encoder.flushAndClose(e)}},sm=class extends su{constructor(e,t){if(!(e instanceof MediaStreamTrack)||"video"!==e.kind)throw TypeError("track must be a video MediaStreamTrack.");oK(t),super((t={...t,latencyMode:"realtime"}).codec),this._abortController=null,this._workerTrackId=null,this._workerListener=null,this._promiseWithResolvers=z(),this._errorPromiseAccessed=!1,this._paused=!1,this._lastSampleTimestamp=null,this._pauseOffset=0,this._encoder=new sd(this,t),this._track=e}get errorPromise(){return this._errorPromiseAccessed=!0,this._promiseWithResolvers.promise}get paused(){return this._paused}async _start(){this._errorPromiseAccessed||console.warn("Make sure not to ignore the `errorPromise` field on MediaStreamVideoTrackSource, so that any internal errors get bubbled up properly."),this._abortController=new AbortController;let e=null,t=!1,r=r=>{if(t)return void r.close();let i=r.timestamp/1e6;if(this._paused){if(null!==e){if(null!==this._lastSampleTimestamp){let e=i-this._lastSampleTimestamp;this._pauseOffset-=e}this._lastSampleTimestamp=i}r.close();return}if(null===e){e=i;let t=this._connectedTrack.output._muxer;null===t.firstMediaStreamTimestamp?(t.firstMediaStreamTimestamp=performance.now()/1e3,this._timestampOffset=-e):this._timestampOffset=performance.now()/1e3-t.firstMediaStreamTimestamp-e}if(this._lastSampleTimestamp=i,this._encoder.getQueueSize()>=4)return void r.close();let a=new tZ(r,{timestamp:i+this._pauseOffset});this._encoder.add(a,!0).catch(e=>{t=!0,this._abortController?.abort(),this._promiseWithResolvers.reject(e),null!==this._workerTrackId&&sT({type:"stopTrack",trackId:this._workerTrackId})})};if("u">typeof MediaStreamTrackProcessor){let e=new MediaStreamTrackProcessor({track:this._track}),t=new WritableStream({write:r});e.readable.pipeTo(t,{signal:this._abortController.signal}).catch(e=>{e instanceof DOMException&&"AbortError"===e.name||this._promiseWithResolvers.reject(e)})}else if(await s_())this._workerTrackId=sk++,sT({type:"videoTrack",trackId:this._workerTrackId,track:this._track}),this._workerListener=e=>{let t=e.data;"videoFrame"===t.type&&t.trackId===this._workerTrackId?r(t.videoFrame):"error"===t.type&&t.trackId===this._workerTrackId&&this._promiseWithResolvers.reject(t.error)},sC.addEventListener("message",this._workerListener);else throw Error("MediaStreamTrackProcessor is required but not supported by this browser.")}pause(){this._paused=!0}resume(){this._paused=!1}async _flushAndClose(e){this._abortController&&(this._abortController.abort(),this._abortController=null),null!==this._workerTrackId&&(h(this._workerListener),sT({type:"stopTrack",trackId:this._workerTrackId}),await new Promise(e=>{let t=r=>{let i=r.data;"trackStopped"===i.type&&i.trackId===this._workerTrackId&&(h(this._workerListener),sC.removeEventListener("message",this._workerListener),sC.removeEventListener("message",t),e())};sC.addEventListener("message",t)})),await this._encoder.flushAndClose(e)}},sg=class extends sl{constructor(e){if(super(),this._connectedTrack=null,!eI.includes(e))throw TypeError(`Invalid audio codec '${e}'. Must be one of: ${eI.join(", ")}.`);this._codec=e}},sv=class extends sg{constructor(e){super(e)}add(e,t){if(!(e instanceof tU))throw TypeError("packet must be an EncodedPacket.");if(e.isMetadataOnly)throw TypeError("Metadata-only packets cannot be added.");if(void 0!==t&&(!t||"object"!=typeof t))throw TypeError("meta, when provided, must be an object.");return this._ensureValidAdd(),this._connectedTrack.output._muxer.addEncodedAudioPacket(this._connectedTrack,e,t)}},sy=class{constructor(e,t){this.source=e,this.encodingConfig=t,this.ensureEncoderPromise=null,this.encoderInitialized=!1,this.encoder=null,this.muxer=null,this.lastNumberOfChannels=null,this.lastSampleRate=null,this.isPcmEncoder=!1,this.outputSampleSize=null,this.writeOutputValue=null,this.customEncoder=null,this.customEncoderCallSerializer=new ei,this.customEncoderQueueSize=0,this.lastEndSampleIndex=null,this.error=null,this.errorNeedsNewStack=!0}async add(e,t){try{if(this.checkForEncoderError(),this.source._ensureValidAdd(),null!==this.lastNumberOfChannels&&null!==this.lastSampleRate){if(e.numberOfChannels!==this.lastNumberOfChannels||e.sampleRate!==this.lastSampleRate)throw Error(`Audio parameters must remain constant. Expected ${this.lastNumberOfChannels} channels at ${this.lastSampleRate} Hz, got ${e.numberOfChannels} channels at ${e.sampleRate} Hz.`)}else this.lastNumberOfChannels=e.numberOfChannels,this.lastSampleRate=e.sampleRate;!this.encoderInitialized&&(this.ensureEncoderPromise||this.ensureEncoder(e),this.encoderInitialized||await this.ensureEncoderPromise),h(this.encoderInitialized);{let t=Math.round(e.timestamp*e.sampleRate),r=Math.round((e.timestamp+e.duration)*e.sampleRate);if(null===this.lastEndSampleIndex)this.lastEndSampleIndex=r;else{let r=t-this.lastEndSampleIndex;if(r>=64){let t=new t4({data:new Float32Array(r*e.numberOfChannels),format:"f32-planar",sampleRate:e.sampleRate,numberOfChannels:e.numberOfChannels,numberOfFrames:r,timestamp:this.lastEndSampleIndex/e.sampleRate});await this.add(t,!0)}this.lastEndSampleIndex+=e.numberOfFrames}}if(this.customEncoder){this.customEncoderQueueSize++;let t=e.clone(),r=this.customEncoderCallSerializer.call(()=>this.customEncoder.encode(t)).then(()=>this.customEncoderQueueSize--).catch(e=>this.error??=e).finally(()=>{t.close()});this.customEncoderQueueSize>=4&&await r,await this.muxer.mutex.currentPromise}else if(this.isPcmEncoder)await this.doPcmEncoding(e,t);else{h(this.encoder);let r=e.toAudioData();this.encoder.encode(r),r.close(),t&&e.close(),this.encoder.encodeQueueSize>=4&&await new Promise(e=>this.encoder.addEventListener("dequeue",e,{once:!0})),await this.muxer.mutex.currentPromise}}finally{t&&e.close()}}async doPcmEncoding(e,t){h(this.outputSampleSize),h(this.writeOutputValue);let{numberOfChannels:r,numberOfFrames:i,sampleRate:a,timestamp:n}=e,o=[];for(let t=0;t<i;t+=2048){let i=Math.min(2048,e.numberOfFrames-t),a=new DataView(new ArrayBuffer(i*r*this.outputSampleSize));o.push({frameCount:i,view:a})}let s=new Float32Array(e.allocationSize({planeIndex:0,format:"f32-planar"})/Float32Array.BYTES_PER_ELEMENT);for(let t=0;t<r;t++){e.copyTo(s,{planeIndex:t,format:"f32-planar"});for(let e=0;e<o.length;e++){let{frameCount:i,view:a}=o[e];for(let n=0;n<i;n++)this.writeOutputValue(a,(n*r+t)*this.outputSampleSize,s[2048*e+n])}}t&&e.close();let l={decoderConfig:{codec:this.encodingConfig.codec,numberOfChannels:r,sampleRate:a}};for(let e=0;e<o.length;e++){let{frameCount:t,view:r}=o[e],i=r.buffer,s=2048*e,u=new tU(new Uint8Array(i),"key",n+s/a,t/a);this.encodingConfig.onEncodedPacket?.(u,l),await this.muxer.addEncodedAudioPacket(this.source._connectedTrack,u,l)}}ensureEncoder(e){let t=Error();this.ensureEncoderPromise=(async()=>{let{numberOfChannels:r,sampleRate:i}=e,a=o0({numberOfChannels:r,sampleRate:i,...this.encodingConfig});this.encodingConfig.onEncoderConfig?.(a);let n=tB.find(e=>e.supports(this.encodingConfig.codec,a));if(n)this.customEncoder=new n,this.customEncoder.codec=this.encodingConfig.codec,this.customEncoder.config=a,this.customEncoder.onPacket=(e,t)=>{if(!(e instanceof tU))throw TypeError("The first argument passed to onPacket must be an EncodedPacket.");if(void 0!==t&&(!t||"object"!=typeof t))throw TypeError("The second argument passed to onPacket must be an object or undefined.");this.encodingConfig.onEncodedPacket?.(e,t),this.muxer.addEncodedAudioPacket(this.source._connectedTrack,e,t).catch(e=>{this.error??=e,this.errorNeedsNewStack=!1})},await this.customEncoder.init();else if(eT.includes(this.encodingConfig.codec))this.initPcmEncoder();else{if("u"<typeof AudioEncoder)throw Error("AudioEncoder is not supported by this browser.");if(!(await AudioEncoder.isConfigSupported(a)).supported)throw Error(`This specific encoder configuration (${a.codec}, ${a.bitrate} bps, ${a.numberOfChannels} channels, ${a.sampleRate} Hz) is not supported by this browser. Consider using another codec or changing your audio parameters.`);this.encoder=new AudioEncoder({output:(e,t)=>{if("aac"===this.encodingConfig.codec&&t?.decoderConfig&&(!t.decoderConfig.description||t.decoderConfig.description.byteLength<2||0===eU(w(t.decoderConfig.description)).objectType)){let e=Number(g(a.codec.split(".")));t.decoderConfig.description=eV({objectType:e,numberOfChannels:t.decoderConfig.numberOfChannels,sampleRate:t.decoderConfig.sampleRate})}let r=tU.fromEncodedChunk(e);this.encodingConfig.onEncodedPacket?.(r,t),this.muxer.addEncodedAudioPacket(this.source._connectedTrack,r,t).catch(e=>{this.error??=e,this.errorNeedsNewStack=!1})},error:e=>{e.stack=t.stack,this.error??=e}}),this.encoder.configure(a)}h(this.source._connectedTrack),this.muxer=this.source._connectedTrack.output._muxer,this.encoderInitialized=!0})()}initPcmEncoder(){this.isPcmEncoder=!0;let{dataType:e,sampleSize:t,littleEndian:r}=eW(this.encodingConfig.codec);switch(this.outputSampleSize=t,t){case 1:"unsigned"===e?this.writeOutputValue=(e,t,r)=>e.setUint8(t,K((r+1)*127.5,0,255)):"signed"===e?this.writeOutputValue=(e,t,r)=>{e.setInt8(t,K(Math.round(128*r),-128,127))}:"ulaw"===e?this.writeOutputValue=(e,t,r)=>{let i=K(Math.floor(32767*r),-32768,32767);e.setUint8(t,(e=>{let t=e,r=4096,i=0,a=12,n=0;for(t<0&&(t=-t,i=128),(t+=33)>8191&&(t=8191);(t&r)!==r&&a>=5;)r>>=1,a--;return n=t>>a-4&15,255&~(i|a-5<<4|n)})(i))}:"alaw"===e?this.writeOutputValue=(e,t,r)=>{let i=K(Math.floor(32767*r),-32768,32767);e.setUint8(t,(e=>{let t=2048,r=0,i=11,a=0,n=e;for(n<0&&(n=-n,r=128),n>4095&&(n=4095);(n&t)!==t&&i>=5;)t>>=1,i--;return a=n>>(4===i?1:i-4)&15,(r|i-4<<4|a)^85})(i))}:h(!1);break;case 2:"unsigned"===e?this.writeOutputValue=(e,t,i)=>e.setUint16(t,K((i+1)*32767.5,0,65535),r):"signed"===e?this.writeOutputValue=(e,t,i)=>e.setInt16(t,K(Math.round(32767*i),-32768,32767),r):h(!1);break;case 3:"unsigned"===e?this.writeOutputValue=(e,t,i)=>G(e,t,K((i+1)*8388607.5,0,0xffffff),r):"signed"===e?this.writeOutputValue=(e,t,i)=>{var a;return a=K(Math.round(8388607*i),-8388608,8388607),void((a=K(a,-8388608,8388607))<0&&(a=a+0x1000000&0xffffff),G(e,t,a,r))}:h(!1);break;case 4:"unsigned"===e?this.writeOutputValue=(e,t,i)=>e.setUint32(t,K((i+1)*2147483647.5,0,0xffffffff),r):"signed"===e?this.writeOutputValue=(e,t,i)=>e.setInt32(t,K(Math.round(0x7fffffff*i),-0x80000000,0x7fffffff),r):"float"===e?this.writeOutputValue=(e,t,i)=>e.setFloat32(t,i,r):h(!1);break;case 8:"float"===e?this.writeOutputValue=(e,t,i)=>e.setFloat64(t,i,r):h(!1);break;default:W(t),h(!1)}}async flushAndClose(e){e||this.checkForEncoderError(),this.customEncoder?(e||this.customEncoderCallSerializer.call(()=>this.customEncoder.flush()),await this.customEncoderCallSerializer.call(()=>this.customEncoder.close())):this.encoder&&(e||await this.encoder.flush(),"closed"!==this.encoder.state&&this.encoder.close()),e||this.checkForEncoderError()}getQueueSize(){return this.customEncoder?this.customEncoderQueueSize:this.isPcmEncoder?0:this.encoder?.encodeQueueSize??0}checkForEncoderError(){if(this.error)throw this.errorNeedsNewStack&&(this.error.stack=Error().stack),this.error}},sb=class extends sg{constructor(e){oJ(e),super(e.codec),this._encoder=new sy(this,e)}add(e){if(!(e instanceof t4))throw TypeError("audioSample must be an AudioSample.");return this._encoder.add(e,!1)}_flushAndClose(e){return this._encoder.flushAndClose(e)}},sx=class extends sg{constructor(e){oJ(e),super(e.codec),this._accumulatedTime=0,this._encoder=new sy(this,e)}async add(e){if(!(e instanceof AudioBuffer))throw TypeError("audioBuffer must be an AudioBuffer.");let t=t4._fromAudioBuffer(e,this._accumulatedTime);for(let r of(this._accumulatedTime+=e.duration,t))await this._encoder.add(r,!0)}_flushAndClose(e){return this._encoder.flushAndClose(e)}},sw=class extends sg{constructor(e,t){if(!(e instanceof MediaStreamTrack)||"audio"!==e.kind)throw TypeError("track must be an audio MediaStreamTrack.");oJ(t),super(t.codec),this._abortController=null,this._audioContext=null,this._scriptProcessorNode=null,this._promiseWithResolvers=z(),this._errorPromiseAccessed=!1,this._paused=!1,this._lastSampleTimestamp=null,this._pauseOffset=0,this._encoder=new sy(this,t),this._track=e}get errorPromise(){return this._errorPromiseAccessed=!0,this._promiseWithResolvers.promise}get paused(){return this._paused}async _start(){this._errorPromiseAccessed||console.warn("Make sure not to ignore the `errorPromise` field on MediaStreamVideoTrackSource, so that any internal errors get bubbled up properly."),this._abortController=new AbortController;let e=null,t=!1,r=r=>{if(t)return void r.close();let i=r.timestamp;if(this._paused){if(null!==e){if(null!==this._lastSampleTimestamp){let e=i-this._lastSampleTimestamp;this._pauseOffset-=e}this._lastSampleTimestamp=i}r.close();return}if(null===e){e=r.timestamp;let t=this._connectedTrack.output._muxer;null===t.firstMediaStreamTimestamp?(t.firstMediaStreamTimestamp=performance.now()/1e3,this._timestampOffset=-e):this._timestampOffset=performance.now()/1e3-t.firstMediaStreamTimestamp-e}(this._lastSampleTimestamp=i,this._encoder.getQueueSize()>=4)?r.close():(r.setTimestamp(i+this._pauseOffset),this._encoder.add(r,!0).catch(e=>{t=!0,this._abortController?.abort(),this._promiseWithResolvers.reject(e),this._audioContext?.suspend()}))};if("u">typeof MediaStreamTrackProcessor){let e=new MediaStreamTrackProcessor({track:this._track}),t=new WritableStream({write:e=>r(new t4(e))});e.readable.pipeTo(t,{signal:this._abortController.signal}).catch(e=>{e instanceof DOMException&&"AbortError"===e.name||this._promiseWithResolvers.reject(e)})}else{let e=window.AudioContext||window.webkitAudioContext;this._audioContext=new e({sampleRate:this._track.getSettings().sampleRate});let t=this._audioContext.createMediaStreamSource(new MediaStream([this._track]));this._scriptProcessorNode=this._audioContext.createScriptProcessor(4096),"suspended"===this._audioContext.state&&await this._audioContext.resume(),t.connect(this._scriptProcessorNode),this._scriptProcessorNode.connect(this._audioContext.destination);let i=0;this._scriptProcessorNode.onaudioprocess=e=>{let t=t4._fromAudioBuffer(e.inputBuffer,i);for(let a of(i+=e.inputBuffer.duration,t))r(a)}}}pause(){this._paused=!0}resume(){this._paused=!1}async _flushAndClose(e){this._abortController&&(this._abortController.abort(),this._abortController=null),this._audioContext&&(h(this._scriptProcessorNode),this._scriptProcessorNode.disconnect(),await this._audioContext.suspend()),await this._encoder.flushAndClose(e)}},sS=()=>{let e=(e,t)=>{t?self.postMessage(e,{transfer:t}):self.postMessage(e)};e({type:"support",supported:"u">typeof MediaStreamTrackProcessor});let t=new Map,r=new Map;self.addEventListener("message",i=>{let a=i.data;switch(a.type){case"videoTrack":{r.set(a.trackId,a.track);let i=new MediaStreamTrackProcessor({track:a.track}),n=new WritableStream({write:t=>{r.has(a.trackId)?e({type:"videoFrame",trackId:a.trackId,videoFrame:t},[t]):t.close()}}),o=new AbortController;t.set(a.trackId,o),i.readable.pipeTo(n,{signal:o.signal}).catch(t=>{t instanceof DOMException&&"AbortError"===t.name||e({type:"error",trackId:a.trackId,error:t})})}break;case"stopTrack":{let i=t.get(a.trackId);i&&(i.abort(),t.delete(a.trackId));let n=r.get(a.trackId);n?.stop(),r.delete(a.trackId),e({type:"trackStopped",trackId:a.trackId})}break;default:W(a)}})},sk=0,sC=null,sE=null,s_=async()=>{let e;return null!==sE?sE:(sC||(e=new Blob([`(${sS.toString()})()`],{type:"application/javascript"}),sC=new Worker(URL.createObjectURL(e))),new Promise(e=>{h(sC);let t=r=>{let i=r.data;"support"===i.type&&(sE=i.supported,sC.removeEventListener("message",t),e(i.supported))};sC.addEventListener("message",t)}))},sT=(e,t)=>{h(sC),t?sC.postMessage(e,t):sC.postMessage(e)},sP=class extends sl{constructor(e){if(super(),this._connectedTrack=null,!eA.includes(e))throw TypeError(`Invalid subtitle codec '${e}'. Must be one of: ${eA.join(", ")}.`);this._codec=e}},sI=class extends sP{constructor(e){super(e),this._error=null,this._parser=new aq({codec:e,output:(e,t)=>{this._connectedTrack?.output._muxer.addSubtitleCue(this._connectedTrack,e,t).catch(e=>{this._error??=e})}})}add(e){if("string"!=typeof e)throw TypeError("text must be a string.");return this._checkForError(),this._ensureValidAdd(),this._parser.parse(e),this._connectedTrack.output._muxer.mutex.currentPromise}_checkForError(){if(this._error)throw this._error}async _flushAndClose(e){e||this._checkForError()}},sA=["video","audio","subtitle"],sO=e=>{let t;if(!e||"object"!=typeof e)throw TypeError("metadata must be an object.");if(void 0!==e.languageCode&&(t=e.languageCode,!J.test(t)))throw TypeError("metadata.languageCode, when provided, must be a three-letter, ISO 639-2/T language code.");if(void 0!==e.name&&"string"!=typeof e.name)throw TypeError("metadata.name, when provided, must be a string.");if(void 0!==e.disposition&&(e=>{if(!e||"object"!=typeof e)throw TypeError("disposition must be an object.");if(void 0!==e.default&&"boolean"!=typeof e.default)throw TypeError("disposition.default must be a boolean.");if(void 0!==e.forced&&"boolean"!=typeof e.forced)throw TypeError("disposition.forced must be a boolean.");if(void 0!==e.original&&"boolean"!=typeof e.original)throw TypeError("disposition.original must be a boolean.");if(void 0!==e.commentary&&"boolean"!=typeof e.commentary)throw TypeError("disposition.commentary must be a boolean.");if(void 0!==e.hearingImpaired&&"boolean"!=typeof e.hearingImpaired)throw TypeError("disposition.hearingImpaired must be a boolean.");if(void 0!==e.visuallyImpaired&&"boolean"!=typeof e.visuallyImpaired)throw TypeError("disposition.visuallyImpaired must be a boolean.")})(e.disposition),void 0!==e.maximumPacketCount&&(!Number.isInteger(e.maximumPacketCount)||e.maximumPacketCount<0))throw TypeError("metadata.maximumPacketCount, when provided, must be a non-negative integer.")},sM=class{constructor(e){if(this.state="pending",this._tracks=[],this._startPromise=null,this._cancelPromise=null,this._finalizePromise=null,this._mutex=new D,this._metadataTags={},!e||"object"!=typeof e)throw TypeError("options must be an object.");if(!(e.format instanceof oL))throw TypeError("options.format must be an OutputFormat.");if(!(e.target instanceof of))throw TypeError("options.target must be a Target.");if(e.target._output)throw Error("Target is already used for another output.");e.target._output=this,this.format=e.format,this.target=e.target,this._writer=e.target._createWriter(),this._muxer=e.format._createMuxer(this)}addVideoTrack(e,t={}){if(!(e instanceof su))throw TypeError("source must be a VideoSource.");if(sO(t),void 0!==t.rotation&&![0,90,180,270].includes(t.rotation))throw TypeError(`Invalid video rotation: ${t.rotation}. Has to be 0, 90, 180 or 270.`);if(!this.format.supportsVideoRotationMetadata&&t.rotation)throw Error(`${this.format._name} does not support video rotation metadata.`);if(void 0!==t.frameRate&&(!Number.isFinite(t.frameRate)||t.frameRate<=0))throw TypeError(`Invalid video frame rate: ${t.frameRate}. Must be a positive number.`);this._addTrack("video",e,t)}addAudioTrack(e,t={}){if(!(e instanceof sg))throw TypeError("source must be an AudioSource.");sO(t),this._addTrack("audio",e,t)}addSubtitleTrack(e,t={}){if(!(e instanceof sP))throw TypeError("source must be a SubtitleSource.");sO(t),this._addTrack("subtitle",e,t)}setMetadataTags(e){if(ek(e),"pending"!==this.state)throw Error("Cannot set metadata tags after output has been started or canceled.");this._metadataTags=e}_addTrack(e,t,r){if("pending"!==this.state)throw Error("Cannot add track after output has been started or canceled.");if(t._connectedTrack)throw Error("Source is already used for a track.");let i=this.format.getSupportedTrackCounts(),a=this._tracks.reduce((t,r)=>t+ +(r.type===e),0),n=i[e].max;if(a===n)throw Error(0===n?`${this.format._name} does not support ${e} tracks.`:`${this.format._name} does not support more than ${n} ${e} track${1===n?"":"s"}.`);let o=i.total.max;if(this._tracks.length===o)throw Error(`${this.format._name} does not support more than ${o} tracks${1===o?"":"s"} in total.`);let s={id:this._tracks.length+1,output:this,type:e,source:t,metadata:r};if("video"===s.type){let e=this.format.getSupportedVideoCodecs();if(0===e.length)throw Error(`${this.format._name} does not support video tracks.`+this.format._codecUnsupportedHint(s.source._codec));if(!e.includes(s.source._codec))throw Error(`Codec '${s.source._codec}' cannot be contained within ${this.format._name}. Supported video codecs are: ${e.map(e=>`'${e}'`).join(", ")}.`+this.format._codecUnsupportedHint(s.source._codec))}else if("audio"===s.type){let e=this.format.getSupportedAudioCodecs();if(0===e.length)throw Error(`${this.format._name} does not support audio tracks.`+this.format._codecUnsupportedHint(s.source._codec));if(!e.includes(s.source._codec))throw Error(`Codec '${s.source._codec}' cannot be contained within ${this.format._name}. Supported audio codecs are: ${e.map(e=>`'${e}'`).join(", ")}.`+this.format._codecUnsupportedHint(s.source._codec))}else if("subtitle"===s.type){let e=this.format.getSupportedSubtitleCodecs();if(0===e.length)throw Error(`${this.format._name} does not support subtitle tracks.`+this.format._codecUnsupportedHint(s.source._codec));if(!e.includes(s.source._codec))throw Error(`Codec '${s.source._codec}' cannot be contained within ${this.format._name}. Supported subtitle codecs are: ${e.map(e=>`'${e}'`).join(", ")}.`+this.format._codecUnsupportedHint(s.source._codec))}this._tracks.push(s),t._connectedTrack=s}async start(){let e=this.format.getSupportedTrackCounts();for(let t of sA){let r=this._tracks.reduce((e,r)=>e+ +(r.type===t),0),i=e[t].min;if(r<i)throw Error(i===e[t].max?`${this.format._name} requires exactly ${i} ${t} track${1===i?"":"s"}.`:`${this.format._name} requires at least ${i} ${t} track${1===i?"":"s"}.`)}let t=e.total.min;if(this._tracks.length<t)throw Error(t===e.total.max?`${this.format._name} requires exactly ${t} track${1===t?"":"s"}.`:`${this.format._name} requires at least ${t} track${1===t?"":"s"}.`);if("canceled"===this.state)throw Error("Output has been canceled.");return this._startPromise?(console.warn("Output has already been started."),this._startPromise):this._startPromise=(async()=>{this.state="started",this._writer.start();let e=await this._mutex.acquire();await this._muxer.start();let t=this._tracks.map(e=>e.source._start());await Promise.all(t),e()})()}getMimeType(){return this._muxer.getMimeType()}async cancel(){return this._cancelPromise?(console.warn("Output has already been canceled."),this._cancelPromise):"finalizing"===this.state||"finalized"===this.state?void console.warn("Output has already been finalized."):this._cancelPromise=(async()=>{this.state="canceled";let e=await this._mutex.acquire(),t=this._tracks.map(e=>e.source._flushOrWaitForOngoingClose(!0));await Promise.all(t),await this._writer.close(),e()})()}async finalize(){if("pending"===this.state)throw Error("Cannot finalize before starting.");if("canceled"===this.state)throw Error("Cannot finalize after canceling.");return this._finalizePromise?(console.warn("Output has already been finalized."),this._finalizePromise):this._finalizePromise=(async()=>{this.state="finalizing";let e=await this._mutex.acquire(),t=this._tracks.map(e=>e.source._flushOrWaitForOngoingClose(!1));await Promise.all(t),await this._muxer.finalize(),await this._writer.flush(),await this._writer.finalize(),this.state="finalized",e()})()}},sF=e=>{if(void 0!==e&&(!e||"object"!=typeof e))throw TypeError("options.video, when provided, must be an object.");if(e?.discard!==void 0&&"boolean"!=typeof e.discard)throw TypeError("options.video.discard, when provided, must be a boolean.");if(e?.forceTranscode!==void 0&&"boolean"!=typeof e.forceTranscode)throw TypeError("options.video.forceTranscode, when provided, must be a boolean.");if(e?.codec!==void 0&&!e_.includes(e.codec))throw TypeError(`options.video.codec, when provided, must be one of: ${e_.join(", ")}.`);if(e?.bitrate!==void 0&&!(e.bitrate instanceof o1)&&(!Number.isInteger(e.bitrate)||e.bitrate<=0))throw TypeError("options.video.bitrate, when provided, must be a positive integer or a quality.");if(e?.width!==void 0&&(!Number.isInteger(e.width)||e.width<=0))throw TypeError("options.video.width, when provided, must be a positive integer.");if(e?.height!==void 0&&(!Number.isInteger(e.height)||e.height<=0))throw TypeError("options.video.height, when provided, must be a positive integer.");if(e?.fit!==void 0&&!["fill","contain","cover"].includes(e.fit))throw TypeError("options.video.fit, when provided, must be one of 'fill', 'contain', or 'cover'.");if(e?.width!==void 0&&void 0!==e.height&&void 0===e.fit)throw TypeError("When both options.video.width and options.video.height are provided, options.video.fit must also be provided.");if(e?.rotate!==void 0&&![0,90,180,270].includes(e.rotate))throw TypeError("options.video.rotate, when provided, must be 0, 90, 180 or 270.");if(e?.allowRotationMetadata!==void 0&&"boolean"!=typeof e.allowRotationMetadata)throw TypeError("options.video.allowRotationMetadata, when provided, must be a boolean.");if(e?.crop!==void 0&&tJ(e.crop,"options.video."),e?.frameRate!==void 0&&(!Number.isFinite(e.frameRate)||e.frameRate<=0))throw TypeError("options.video.frameRate, when provided, must be a finite positive number.");if(e?.alpha!==void 0&&!["discard","keep"].includes(e.alpha))throw TypeError("options.video.alpha, when provided, must be either 'discard' or 'keep'.");if(e?.keyFrameInterval!==void 0&&(!Number.isFinite(e.keyFrameInterval)||e.keyFrameInterval<0))throw TypeError("options.video.keyFrameInterval, when provided, must be a non-negative number.");if(e?.process!==void 0&&"function"!=typeof e.process)throw TypeError("options.video.process, when provided, must be a function.");if(e?.processedWidth!==void 0&&(!Number.isInteger(e.processedWidth)||e.processedWidth<=0))throw TypeError("options.video.processedWidth, when provided, must be a positive integer.");if(e?.processedHeight!==void 0&&(!Number.isInteger(e.processedHeight)||e.processedHeight<=0))throw TypeError("options.video.processedHeight, when provided, must be a positive integer.");if(e?.hardwareAcceleration!==void 0&&!["no-preference","prefer-hardware","prefer-software"].includes(e.hardwareAcceleration))throw TypeError("options.video.hardwareAcceleration, when provided, must be 'no-preference', 'prefer-hardware' or 'prefer-software'.")},sR=e=>{if(void 0!==e&&(!e||"object"!=typeof e))throw TypeError("options.audio, when provided, must be an object.");if(e?.discard!==void 0&&"boolean"!=typeof e.discard)throw TypeError("options.audio.discard, when provided, must be a boolean.");if(e?.forceTranscode!==void 0&&"boolean"!=typeof e.forceTranscode)throw TypeError("options.audio.forceTranscode, when provided, must be a boolean.");if(e?.codec!==void 0&&!eI.includes(e.codec))throw TypeError(`options.audio.codec, when provided, must be one of: ${eI.join(", ")}.`);if(e?.bitrate!==void 0&&!(e.bitrate instanceof o1)&&(!Number.isInteger(e.bitrate)||e.bitrate<=0))throw TypeError("options.audio.bitrate, when provided, must be a positive integer or a quality.");if(e?.numberOfChannels!==void 0&&(!Number.isInteger(e.numberOfChannels)||e.numberOfChannels<=0))throw TypeError("options.audio.numberOfChannels, when provided, must be a positive integer.");if(e?.sampleRate!==void 0&&(!Number.isInteger(e.sampleRate)||e.sampleRate<=0))throw TypeError("options.audio.sampleRate, when provided, must be a positive integer.");if(e?.process!==void 0&&"function"!=typeof e.process)throw TypeError("options.audio.process, when provided, must be a function.");if(e?.processedNumberOfChannels!==void 0&&(!Number.isInteger(e.processedNumberOfChannels)||e.processedNumberOfChannels<=0))throw TypeError("options.audio.processedNumberOfChannels, when provided, must be a positive integer.");if(e?.processedSampleRate!==void 0&&(!Number.isInteger(e.processedSampleRate)||e.processedSampleRate<=0))throw TypeError("options.audio.processedSampleRate, when provided, must be a positive integer.")},sD=class e{constructor(e){if(this._addedCounts={video:0,audio:0,subtitle:0},this._totalTrackCount=0,this._trackPromises=[],this._executed=!1,this._synchronizer=new sL,this._totalDuration=null,this._maxTimestamps=new Map,this._canceled=!1,this.onProgress=void 0,this._computeProgress=!1,this._lastProgress=0,this.isValid=!1,this.utilizedTracks=[],this.discardedTracks=[],!e||"object"!=typeof e)throw TypeError("options must be an object.");if(!(e.input instanceof ab))throw TypeError("options.input must be an Input.");if(!(e.output instanceof sM))throw TypeError("options.output must be an Output.");if(e.output._tracks.length>0||Object.keys(e.output._metadataTags).length>0||"pending"!==e.output.state)throw TypeError("options.output must be fresh: no tracks or metadata tags added and not started.");if("function"!=typeof e.video&&sF(e.video),"function"!=typeof e.audio&&sR(e.audio),void 0!==e.trim&&(!e.trim||"object"!=typeof e.trim))throw TypeError("options.trim, when provided, must be an object.");if(e.trim?.start!==void 0&&(!Number.isFinite(e.trim.start)||e.trim.start<0))throw TypeError("options.trim.start, when provided, must be a non-negative number.");if(e.trim?.end!==void 0&&(!Number.isFinite(e.trim.end)||e.trim.end<0))throw TypeError("options.trim.end, when provided, must be a non-negative number.");if(e.trim?.start!==void 0&&void 0!==e.trim.end&&e.trim.start>=e.trim.end)throw TypeError("options.trim.start must be less than options.trim.end.");if(void 0!==e.tags&&("object"!=typeof e.tags||!e.tags)&&"function"!=typeof e.tags)throw TypeError("options.tags, when provided, must be an object or a function.");if("object"==typeof e.tags&&ek(e.tags),void 0!==e.showWarnings&&"boolean"!=typeof e.showWarnings)throw TypeError("options.showWarnings, when provided, must be a boolean.");this._options=e,this.input=e.input,this.output=e.output;const{promise:t,resolve:r}=z();this._started=t,this._start=r}static async init(t){let r=new e(t);return await r._init(),r}async _init(){let e;this._startTimestamp=this._options.trim?.start??Math.max(await this.input.getFirstTimestamp(),0),this._endTimestamp=this._options.trim?.end??1/0;let t=await this.input.getTracks(),r=this.output.format.getSupportedTrackCounts(),i=1,a=1;for(let e of t){let t;if(e.isVideoTrack()?this._options.video&&("function"==typeof this._options.video?(sF(t=await this._options.video(e,i)),i++):t=this._options.video):e.isAudioTrack()?this._options.audio&&("function"==typeof this._options.audio?(sR(t=await this._options.audio(e,a)),a++):t=this._options.audio):h(!1),t?.discard){this.discardedTracks.push({track:e,reason:"discarded_by_user"});continue}if(this._totalTrackCount===r.total.max){this.discardedTracks.push({track:e,reason:"max_track_count_reached"});continue}if(this._addedCounts[e.type]===r[e.type].max){this.discardedTracks.push({track:e,reason:"max_track_count_of_type_reached"});continue}e.isVideoTrack()?await this._processVideoTrack(e,t??{}):e.isAudioTrack()&&await this._processAudioTrack(e,t??{})}let n=await this.input.getMetadataTags();if(this._options.tags){let t="function"==typeof this._options.tags?await this._options.tags(n):this._options.tags;ek(t),e=t}else e=n;let o=(await this.input.getFormat()).mimeType===this.output.format.mimeType,s=n.raw===e.raw;if(n.raw&&s&&!o&&delete e.raw,this.output.setMetadataTags(e),this.isValid=this._totalTrackCount>=r.total.min&&this._addedCounts.video>=r.video.min&&this._addedCounts.audio>=r.audio.min&&this._addedCounts.subtitle>=r.subtitle.min,this._options.showWarnings??!0){let e=[],t=this.discardedTracks.filter(e=>"discarded_by_user"!==e.reason);t.length>0&&e.push("Some tracks had to be discarded from the conversion:",t),this.isValid||e.push("\n\n"+this._getInvalidityExplanation().join("")),e.length>0&&console.warn(...e)}}_getInvalidityExplanation(){let e=[];if(0===this.discardedTracks.length)e.push("Due to missing tracks, this conversion cannot be executed.");else{let t=this.discardedTracks.every(e=>"discarded_by_user"===e.reason||"no_encodable_target_codec"===e.reason);if(e.push("Due to discarded tracks, this conversion cannot be executed."),t){let t=this.discardedTracks.flatMap(e=>"discarded_by_user"===e.reason?[]:"video"===e.track.type?this.output.format.getSupportedVideoCodecs():"audio"===e.track.type?this.output.format.getSupportedAudioCodecs():this.output.format.getSupportedSubtitleCodecs());1===t.length?e.push(`
Tracks were discarded because your environment is not able to encode '${t[0]}'.`):e.push(`
Tracks were discarded because your environment is not able to encode any of the following codecs: ${t.map(e=>`'${e}'`).join(", ")}.`),t.includes("mp3")&&e.push(`
The @mediabunny/mp3-encoder extension package provides support for encoding MP3.`)}else e.push("\nCheck the discardedTracks field for more info.")}return e}async execute(){if(!this.isValid)throw Error("Cannot execute this conversion because its output configuration is invalid. Make sure to always check the isValid field before executing a conversion.\n"+this._getInvalidityExplanation().join(""));if(this._executed)throw Error("Conversion cannot be executed twice.");if(this._executed=!0,this.onProgress){for(let e of(this._computeProgress=!0,this._totalDuration=Math.min(await this.input.computeDuration()-this._startTimestamp,this._endTimestamp-this._startTimestamp),this.utilizedTracks))this._maxTimestamps.set(e.id,0);this.onProgress?.(0)}await this.output.start(),this._start();try{await Promise.all(this._trackPromises)}catch(e){throw this._canceled||this.cancel(),e}if(this._canceled)throw new sj;await this.output.finalize(),this._computeProgress&&this.onProgress?.(1)}async cancel(){if("finalizing"!==this.output.state&&"finalized"!==this.output.state){if(this._canceled)return void console.warn("Conversion already canceled.");this._canceled=!0,await this.output.cancel()}}async _processVideoTrack(e,t){let r,i,a=e.codec;if(!a)return void this.discardedTracks.push({track:e,reason:"unknown_source_codec"});let n=m(e.rotation+(t.rotate??0)),o=this.output.format.supportsVideoRotationMetadata&&(t.allowRotationMetadata??!0),[s,l]=n%180==0?[e.codedWidth,e.codedHeight]:[e.codedHeight,e.codedWidth],u=t.crop;u&&tX(u,s,l);let[c,d]=u?[u.width,u.height]:[s,l],p=c,f=d,g=p/f,v=e=>2*Math.ceil(e/2);void 0!==t.width&&void 0===t.height?(p=v(t.width),f=v(Math.round(p/g))):void 0===t.width&&void 0!==t.height?(f=v(t.height),p=v(Math.round(f*g))):void 0!==t.width&&void 0!==t.height&&(p=v(t.width),f=v(t.height));let y=await e.getFirstTimestamp(),b=!!t.forceTranscode||y<this._startTimestamp||!!t.frameRate||void 0!==t.keyFrameInterval||void 0!==t.process,x=p!==c||f!==d||0!==n&&(!o||void 0!==t.process)||!!u,w=t.alpha??"discard",S=this.output.format.getSupportedVideoCodecs();if(!(!b&&!t.bitrate&&!x&&S.includes(a))||t.codec&&t.codec!==a){if(!await e.canDecode())return void this.discardedTracks.push({track:e,reason:"undecodable_source_codec"});t.codec&&(S=S.filter(e=>e===t.codec));let i=t.bitrate??o6,a=await sn(S,{width:t.process&&t.processedWidth?t.processedWidth:p,height:t.process&&t.processedHeight?t.processedHeight:f,bitrate:i});if(!a)return void this.discardedTracks.push({track:e,reason:"no_encodable_target_codec"});let o={codec:a,bitrate:i,keyFrameInterval:t.keyFrameInterval,sizeChangeBehavior:t.fit??"passThrough",alpha:w,hardwareAcceleration:t.hardwareAcceleration},s=new sf(o);if(r=s,!x){let t=new sM({format:new oN,target:new ov}),r=new sf(o);t.addVideoTrack(r),await t.start();let i=new ru(e),a=await i.getSample(y);if(a)try{await r.add(a),a.close(),await t.finalize()}catch(e){console.info("Error when probing encoder support. Falling back to rerender path.",e),x=!0,t.cancel()}else await t.cancel()}x?this._trackPromises.push((async()=>{await this._started;let r=new rc(e,{width:p,height:f,fit:t.fit??"fill",rotation:n,crop:t.crop,poolSize:1,alpha:"keep"===w}).canvases(this._startTimestamp,this._endTimestamp),i=t.frameRate,a=null,o=null,l=null,u=async r=>{h(a),h(void 0!==i);let n=Math.round((r-o)*i);for(let r=1;r<n;r++){let n=new tZ(a,{timestamp:o+r/i,duration:1/i});await this._registerVideoSample(e,t,s,n),n.close()}};for await(let{canvas:n,timestamp:c,duration:d}of r){if(this._canceled)return;let r=Math.max(c-this._startTimestamp,0);if(l=r+d,void 0!==i){let e=Math.floor(r*i)/i;if(null!==a)if(e<=o){a=n,o=e;continue}else await u(e);r=e}let p=new tZ(n,{timestamp:r,duration:void 0!==i?1/i:d});await this._registerVideoSample(e,t,s,p),p.close(),void 0!==i&&(a=n,o=r)}a&&(h(null!==l),h(void 0!==i),await u(Math.floor(l*i)/i)),s.close(),this._synchronizer.closeTrack(e.id)})()):this._trackPromises.push((async()=>{await this._started;let r=new ru(e),i=t.frameRate,a=null,n=null,o=null,l=async r=>{h(a),h(void 0!==i);let o=Math.round((r-n)*i);for(let r=1;r<o;r++)a.setTimestamp(n+r/i),a.setDuration(1/i),await this._registerVideoSample(e,t,s,a);a.close()};for await(let u of r.samples(this._startTimestamp,this._endTimestamp)){if(this._canceled){u.close(),a?.close();return}let r=Math.max(u.timestamp-this._startTimestamp,0);if(o=r+u.duration,void 0!==i){let e=Math.floor(r*i)/i;if(null!==a)if(e<=n){a.close(),a=u,n=e;continue}else await l(e);r=e,u.setDuration(1/i)}u.setTimestamp(r),await this._registerVideoSample(e,t,s,u),void 0!==i?(a=u,n=r):u.close()}a&&(h(null!==o),h(void 0!==i),await l(Math.floor(o*i)/i)),s.close(),this._synchronizer.closeTrack(e.id)})())}else{let t=new sc(a);r=t,this._trackPromises.push((async()=>{await this._started;let r=new ri(e),i={decoderConfig:await e.getDecoderConfig()??void 0},a=Number.isFinite(this._endTimestamp)?await r.getPacket(this._endTimestamp,{metadataOnly:!0})??void 0:void 0;for await(let n of r.packets(void 0,a,{verifyKeyPackets:!0})){if(this._canceled)return;let r=n.clone({timestamp:n.timestamp-this._startTimestamp,sideData:"discard"===w?{}:n.sideData});h(r.timestamp>=0),this._reportProgress(e.id,r.timestamp),await t.add(r,i),this._synchronizer.shouldWait(e.id,r.timestamp)&&await this._synchronizer.wait(r.timestamp)}t.close(),this._synchronizer.closeTrack(e.id)})())}this.output.addVideoTrack(r,{frameRate:t.frameRate,languageCode:(i=e.languageCode,J.test(i))?e.languageCode:void 0,name:e.name??void 0,disposition:e.disposition,rotation:x?0:n}),this._addedCounts.video++,this._totalTrackCount++,this.utilizedTracks.push(e)}async _registerVideoSample(e,t,r,i){let a;if(!this._canceled){if(this._reportProgress(e.id,i.timestamp),t.process){let e=t.process(i);e instanceof Promise&&(e=await e),Array.isArray(e)||(e=null===e?[]:[e]),a=e.map(e=>e instanceof tZ?e:"u">typeof VideoFrame&&e instanceof VideoFrame?new tZ(e):new tZ(e,{timestamp:i.timestamp,duration:i.duration}))}else a=[i];for(let t of a){if(this._canceled)break;await r.add(t),this._synchronizer.shouldWait(e.id,t.timestamp)&&await this._synchronizer.wait(t.timestamp)}for(let e of a)e!==i&&e.close()}}async _processAudioTrack(e,t){let r,i,a=e.codec;if(!a)return void this.discardedTracks.push({track:e,reason:"unknown_source_codec"});let n=e.numberOfChannels,o=e.sampleRate,s=await e.getFirstTimestamp(),l=t.numberOfChannels??n,u=t.sampleRate??o,c=l!==n||u!==o||s<this._startTimestamp,d=this.output.format.getSupportedAudioCodecs();if(!(!t.forceTranscode&&!t.bitrate&&!c&&d.includes(a))||t.codec&&t.codec!==a||t.process){if(!await e.canDecode())return void this.discardedTracks.push({track:e,reason:"undecodable_source_codec"});let i=null;t.codec&&(d=d.filter(e=>e===t.codec));let a=t.bitrate??o6,n=await si(d,{numberOfChannels:t.process&&t.processedNumberOfChannels?t.processedNumberOfChannels:l,sampleRate:t.process&&t.processedSampleRate?t.processedSampleRate:u,bitrate:a});if(!n.some(e=>eP.includes(e))&&d.some(e=>eP.includes(e))&&(2!==l||48e3!==u)){let e=(await si(d,{numberOfChannels:2,sampleRate:48e3,bitrate:a})).find(e=>eP.includes(e));e&&(c=!0,i=e,l=2,u=48e3)}else i=n[0]??null;if(null===i)return void this.discardedTracks.push({track:e,reason:"no_encodable_target_codec"});if(c)r=this._resampleAudio(e,t,i,l,u,a);else{let n=new sb({codec:i,bitrate:a});r=n,this._trackPromises.push((async()=>{for await(let r of(await this._started,new rf(e).samples(void 0,this._endTimestamp))){if(this._canceled)return void r.close();r.setTimestamp(r.timestamp-this._startTimestamp),await this._registerAudioSample(e,t,n,r),r.close()}n.close(),this._synchronizer.closeTrack(e.id)})())}}else{let t=new sv(a);r=t,this._trackPromises.push((async()=>{await this._started;let r=new ri(e),i={decoderConfig:await e.getDecoderConfig()??void 0},a=Number.isFinite(this._endTimestamp)?await r.getPacket(this._endTimestamp,{metadataOnly:!0})??void 0:void 0;for await(let n of r.packets(void 0,a)){if(this._canceled)return;let r=n.clone({timestamp:n.timestamp-this._startTimestamp});h(r.timestamp>=0),this._reportProgress(e.id,r.timestamp),await t.add(r,i),this._synchronizer.shouldWait(e.id,r.timestamp)&&await this._synchronizer.wait(r.timestamp)}t.close(),this._synchronizer.closeTrack(e.id)})())}this.output.addAudioTrack(r,{languageCode:(i=e.languageCode,J.test(i))?e.languageCode:void 0,name:e.name??void 0,disposition:e.disposition}),this._addedCounts.audio++,this._totalTrackCount++,this.utilizedTracks.push(e)}async _registerAudioSample(e,t,r,i){let a;if(!this._canceled){if(this._reportProgress(e.id,i.timestamp),t.process){let e=t.process(i);if(e instanceof Promise&&(e=await e),Array.isArray(e)||(e=null===e?[]:[e]),!e.every(e=>e instanceof t4))throw TypeError("The audio process function must return an AudioSample, null, or an array of AudioSamples.");a=e}else a=[i];for(let t of a){if(this._canceled)break;await r.add(t),this._synchronizer.shouldWait(e.id,t.timestamp)&&await this._synchronizer.wait(t.timestamp)}for(let e of a)e!==i&&e.close()}}_resampleAudio(e,t,r,i,a,n){let o=new sb({codec:r,bitrate:n});return this._trackPromises.push((async()=>{await this._started;let r=new sB({targetNumberOfChannels:i,targetSampleRate:a,startTime:this._startTimestamp,endTime:this._endTimestamp,onSample:async r=>{await this._registerAudioSample(e,t,o,r),r.close()}});for await(let t of new rf(e).samples(this._startTimestamp,this._endTimestamp)){if(this._canceled)return void t.close();await r.add(t),t.close()}await r.finalize(),o.close(),this._synchronizer.closeTrack(e.id)})()),o}_reportProgress(e,t){if(!this._computeProgress)return;h(null!==this._totalDuration),this._maxTimestamps.set(e,Math.max(t,this._maxTimestamps.get(e)));let r=K(Math.min(...this._maxTimestamps.values())/this._totalDuration,0,1);r!==this._lastProgress&&(this._lastProgress=r,this.onProgress?.(r))}},sj=class extends Error{constructor(e="Conversion has been canceled."){super(e),this.name="ConversionCanceledError"}},sL=class{constructor(){this.maxTimestamps=new Map,this.resolvers=[]}computeMinAndMaybeResolve(){let e=1/0;for(let[,t]of this.maxTimestamps)e=Math.min(e,t);for(let t=0;t<this.resolvers.length;t++){let r=this.resolvers[t];r.timestamp-e<5&&(r.resolve(),this.resolvers.splice(t,1),t--)}return e}shouldWait(e,t){return this.maxTimestamps.set(e,Math.max(t,this.maxTimestamps.get(e)??-1/0)),t-this.computeMinAndMaybeResolve()>=5}wait(e){let{promise:t,resolve:r}=z();return this.resolvers.push({timestamp:e,resolve:r}),t}closeTrack(e){this.maxTimestamps.delete(e),this.computeMinAndMaybeResolve()}},sB=class{constructor(e){this.sourceSampleRate=null,this.sourceNumberOfChannels=null,this.targetSampleRate=e.targetSampleRate,this.targetNumberOfChannels=e.targetNumberOfChannels,this.startTime=e.startTime,this.endTime=e.endTime,this.onSample=e.onSample,this.bufferSizeInFrames=Math.floor(5*this.targetSampleRate),this.bufferSizeInSamples=this.bufferSizeInFrames*this.targetNumberOfChannels,this.outputBuffer=new Float32Array(this.bufferSizeInSamples),this.bufferStartFrame=0,this.maxWrittenFrame=-1}doChannelMixerSetup(){h(null!==this.sourceNumberOfChannels);let e=this.sourceNumberOfChannels,t=this.targetNumberOfChannels;1===e&&2===t?this.channelMixer=(t,r)=>t[r*e]:1===e&&4===t?this.channelMixer=(t,r,i)=>t[r*e]*(i<2):1===e&&6===t?this.channelMixer=(t,r,i)=>t[r*e]*(2===i):2===e&&1===t?this.channelMixer=(t,r)=>{let i=r*e;return .5*(t[i]+t[i+1])}:2===e&&4===t?this.channelMixer=(t,r,i)=>t[r*e+i]*(i<2):2===e&&6===t?this.channelMixer=(t,r,i)=>t[r*e+i]*(i<2):4===e&&1===t?this.channelMixer=(t,r)=>{let i=r*e;return .25*(t[i]+t[i+1]+t[i+2]+t[i+3])}:4===e&&2===t?this.channelMixer=(t,r,i)=>{let a=r*e;return .5*(t[a+i]+t[a+i+2])}:4===e&&6===t?this.channelMixer=(t,r,i)=>{let a=r*e;return i<2?t[a+i]:2===i||3===i?0:t[a+i-2]}:6===e&&1===t?this.channelMixer=(t,r)=>{let i=r*e;return Math.SQRT1_2*(t[i]+t[i+1])+t[i+2]+.5*(t[i+4]+t[i+5])}:6===e&&2===t?this.channelMixer=(t,r,i)=>{let a=r*e;return t[a+i]+Math.SQRT1_2*(t[a+2]+t[a+i+4])}:6===e&&4===t?this.channelMixer=(t,r,i)=>{let a=r*e;return i<2?t[a+i]+Math.SQRT1_2*t[a+2]:t[a+i+2]}:this.channelMixer=(t,r,i)=>i<e?t[r*e+i]:0}ensureTempBufferSize(e){let t=this.tempSourceBuffer.length;for(;t<e;)t*=2;if(t!==this.tempSourceBuffer.length){let e=new Float32Array(t);e.set(this.tempSourceBuffer),this.tempSourceBuffer=e}}async add(e){null===this.sourceSampleRate&&(this.sourceSampleRate=e.sampleRate,this.sourceNumberOfChannels=e.numberOfChannels,this.tempSourceBuffer=new Float32Array(this.sourceSampleRate*this.sourceNumberOfChannels),this.doChannelMixerSetup());let t=e.numberOfFrames*e.numberOfChannels;this.ensureTempBufferSize(t);let r=e.allocationSize({planeIndex:0,format:"f32"}),i=new Float32Array(this.tempSourceBuffer.buffer,0,r/4);e.copyTo(i,{planeIndex:0,format:"f32"});let a=e.timestamp-this.startTime,n=Math.min(a+e.numberOfFrames/this.sourceSampleRate,this.endTime-this.startTime),o=Math.floor(a*this.targetSampleRate),s=Math.ceil(n*this.targetSampleRate);for(let t=o;t<s;t++){if(t<this.bufferStartFrame)continue;for(;t>=this.bufferStartFrame+this.bufferSizeInFrames;)await this.finalizeCurrentBuffer(),this.bufferStartFrame+=this.bufferSizeInFrames;let r=t-this.bufferStartFrame;h(r<this.bufferSizeInFrames);let n=(t/this.targetSampleRate-a)*this.sourceSampleRate,o=Math.floor(n),s=Math.ceil(n),l=n-o;for(let t=0;t<this.targetNumberOfChannels;t++){let a=0,n=0;o>=0&&o<e.numberOfFrames&&(a=this.channelMixer(i,o,t)),s>=0&&s<e.numberOfFrames&&(n=this.channelMixer(i,s,t));let u=a+l*(n-a),c=r*this.targetNumberOfChannels+t;this.outputBuffer[c]+=u}this.maxWrittenFrame=Math.max(this.maxWrittenFrame,r)}}async finalizeCurrentBuffer(){if(this.maxWrittenFrame<0)return;let e=(this.maxWrittenFrame+1)*this.targetNumberOfChannels,t=new Float32Array(e);t.set(this.outputBuffer.subarray(0,e));let r=this.bufferStartFrame/this.targetSampleRate,i=new t4({format:"f32",sampleRate:this.targetSampleRate,numberOfChannels:this.targetNumberOfChannels,timestamp:r,data:t});await this.onSample(i),this.outputBuffer.fill(0),this.maxWrittenFrame=-1}finalize(){return this.finalizeCurrentBuffer()}};return l(i({},"__esModule",{value:!0}),d)})();"object"==typeof t.exports&&Object.assign(t.exports,i)},857772,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.combineFloat32Arrays=void 0,r.combineFloat32Arrays=e=>{if(0===e.length)return new Float32Array([]);if(1===e.length)return e[0];let t=0;for(let r of e)t+=r.length;let r=new Float32Array(t),i=0;for(let t of e)r.set(t,i),i+=t.length;return r}},563983,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getPartialAudioData=void 0;let i=e.r(129795);r.getPartialAudioData=async({track:e,fromSeconds:t,toSeconds:r,channelIndex:a,signal:n,isMatroska:o=!1})=>{if(n.aborted)throw Error("Operation was aborted");let s=[],l=o?0:Math.max(0,t-1.5),u=new i.AudioBufferSink(e).buffers(l,r);for await(let{buffer:e,timestamp:i,duration:o}of u){if(n.aborted)break;let l=e.getChannelData(a),u=i+o,c=Math.max(i,t),d=Math.min(u,r);if(c>=d)continue;let p=Math.floor((c-i)*e.sampleRate),f=Math.ceil((d-i)*e.sampleRate),h=l.slice(p,f);s.push(h)}await u.return();let c=new Float32Array(s.reduce((e,t)=>e+t.length,0)),d=0;for(let e of s)c.set(e,d),d+=e.length;return c}},442208,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useWindowedAudioData=void 0;let i=e.r(129795),a=e.r(347540),n=e.r(49019),o=e.r(857772),s=e.r(563983),l=e.r(999859),u={};r.useWindowedAudioData=({src:e,frame:t,fps:r,windowInSeconds:c,channelIndex:d=0})=>{let p=(0,a.useRef)(!0),[f,h]=(0,a.useState)(null),[m,g]=(0,a.useState)({}),v=(0,a.useRef)({}),[y]=(0,a.useState)(c);if(c!==y)throw Error("windowInSeconds cannot be changed dynamically");(0,a.useEffect)(()=>(p.current=!0,()=>{p.current=!1,Object.values(v.current).forEach(e=>{e&&e.abort()}),v.current={},g({}),f&&f.input.dispose()}),[f]);let{delayRender:b,continueRender:x}=(0,n.useDelayRender)(),w=(0,a.useCallback)(async t=>{let r=b(`Waiting for audio metadata with src="${e}" to be loaded`),a=()=>{x(r)};t.addEventListener("abort",a,{once:!0});let o=new i.Input({formats:i.ALL_FORMATS,source:new i.UrlSource(e)}),s=()=>{o.dispose()};t.addEventListener("abort",s,{once:!0});try{let e=await o.computeDuration(),t=await o.getPrimaryAudioTrack();if(!t)throw Error("No audio track found");if(!await t.canDecode())throw Error("Audio track cannot be decoded");if(d>=t.numberOfChannels||d<0)throw Error(`Invalid channel index ${d} for audio with ${t.numberOfChannels} channels`);let{numberOfChannels:a,sampleRate:n}=t,s=await o.getFormat(),l=s===i.MATROSKA||s===i.WEBM;p.current&&h({input:o,track:t,metadata:{durationInSeconds:e,numberOfChannels:a,sampleRate:n},isMatroska:l}),x(r)}catch(e){(0,n.cancelRender)(e)}finally{t.removeEventListener("abort",a),t.removeEventListener("abort",s)}},[e,b,x,d]);(0,a.useLayoutEffect)(()=>{let e=new AbortController;return w(e.signal),()=>{e.abort()}},[w]);let S=t/r,k=Math.floor(S/c),C=(0,a.useMemo)(()=>(null==f?void 0:f.metadata)?[0===k?null:k-1,k,k+1>Math.floor(f.metadata.durationInSeconds/c-1e-12)?null:k+1].filter(e=>null!==e).filter(e=>e>=0):[],[k,f,c]),E=(0,a.useCallback)(async t=>{if(!(null==f?void 0:f.metadata)||!f)throw Error("MediaBunny context is not loaded yet");let r=v.current[t];r&&r.abort();let a=new AbortController;if(v.current[t]=a,a.signal.aborted)return;let o=t*c,l=(t+1)*c;if(!(o>=f.metadata.durationInSeconds)&&!(l<=0))try{let{isMatroska:r}=f;r&&!u[e]&&(u[e]=!0,n.Internals.Log.warn({logLevel:"info",tag:"@remotion/media-utils"},`[useWindowedAudioData] Matroska/WebM file detected at "${e}".

Due to format limitation, audio decoding must start from the beginning of the file, which may lead to increased memory usage and slower performance for large files. Consider converting the audio to a more suitable format like MP3 or AAC for better performance.`));let i=await (0,s.getPartialAudioData)({track:f.track,fromSeconds:o,toSeconds:l,channelIndex:d,signal:a.signal,isMatroska:r});a.signal.aborted||g(e=>{let r=Object.keys(e).filter(e=>!C.includes(Number(e)));return{...e,...r.reduce((e,t)=>(e[t]=null,e),{}),[t]:i}})}catch(e){if(a.signal.aborted||e instanceof i.InputDisposedError)return;throw e}finally{v.current[t]===a&&(v.current[t]=null)}},[d,f,c,C,e]);(0,a.useEffect)(()=>{if(!(null==f?void 0:f.metadata))return;for(let e of Object.keys(v.current).filter(e=>!C.includes(Number(e)))){let t=v.current[e];t&&(t.abort(),v.current[e]=null)}let e=C.filter(e=>!m[e]&&!v.current[e]);if(0===e.length)return;let t=e.includes(k),r=e.filter(e=>e!==k);(async()=>{t&&await E(k),r.length>0&&await Promise.all(r.map(e=>E(e)))})().catch(e=>{var t,r,i,a,o;(null==(t=e.stack)?void 0:t.includes("Cancelled"))||(null==(i=null==(r=e.stack)?void 0:r.toLowerCase())?void 0:i.includes("aborted"))||null!=(o=null==(a=e.message)?void 0:a.toLowerCase())&&o.includes("aborted")||(0,n.cancelRender)(e)})},[E,f,C,m,k]);let _=(0,a.useMemo)(()=>C.filter(e=>m[e]),[C,m]),T=(0,a.useMemo)(()=>{if(!(null==f?void 0:f.metadata)||0===_.length)return null;let t=_.map(e=>m[e]);return{channelWaveforms:[(0,o.combineFloat32Arrays)(t)],durationInSeconds:f.metadata.durationInSeconds,isRemote:(0,l.isRemoteAsset)(e),numberOfChannels:1,resultId:`${e}-windows-${_.join(",")}`,sampleRate:f.metadata.sampleRate}},[e,m,f,_]),P=!!f&&S>=f.metadata.durationInSeconds;return(0,a.useLayoutEffect)(()=>{if(T||P)return;let t=b(`Waiting for audio data with src="${e}" to be loaded`);return()=>{x(t)}},[T,e,b,x,P]),{audioData:P?null:T,dataOffsetInSeconds:_.length>0?_[0]*c:0}}},56242,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.complexMagnitude=r.complexMultiply=r.complexSubtract=r.complexAdd=void 0,r.complexAdd=function(e,t){return[e[0]+t[0],e[1]+t[1]]},r.complexSubtract=function(e,t){return[e[0]-t[0],e[1]-t[1]]},r.complexMultiply=function(e,t){return[e[0]*t[0]-e[1]*t[1],e[0]*t[1]+e[1]*t[0]]},r.complexMagnitude=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}},979213,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.exponent=void 0;let i={};r.exponent=function(e,t){let r=-2*Math.PI*(e/t);return i[t]=i[t]||{},i[t][e]=i[t][e]||[Math.cos(r),Math.sin(r)],i[t][e]}},680953,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fftAccurate=void 0;let i=e.r(56242),a=e.r(979213);r.fftAccurate=function(e){let t=[],n=e.length;if(1===n)return Array.isArray(e[0])?[[e[0][0],e[0][1]]]:[[e[0],0]];let o=(0,r.fftAccurate)(e.filter((e,t)=>t%2==0)),s=(0,r.fftAccurate)(e.filter((e,t)=>t%2==1));for(let e=0;e<n/2;e++){let r=o[e],l=(0,i.complexMultiply)((0,a.exponent)(e,n),s[e]);t[e]=(0,i.complexAdd)(r,l),t[e+n/2]=(0,i.complexSubtract)(r,l)}return t}},155290,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fftFast=void 0,r.fftFast=function(e){let t=e.length,r=Array(t);if(t<=1){for(let t=0;t<e.length;t++){let i=e[t];r[t]=[2*i,0]}return r}let i=function(e){let t=Array(e);for(let r=0;r<e;r++)t[r]=.8-.46*Math.cos(2*Math.PI*r/(e-1));return t}(t);for(let a=0;a<t;a++)r[a]=[e[a]*i[a],0];let a=function(e){let t=Array(e);for(let r=0;r<e;r++)t[r]=function(e,t){let r=0;for(let i=0;i<t;i++)r=r<<1|e>>i&1;return r}(r,Math.log2(e));return t}(t);for(let i=0;i<t;i++)r[i]=[e[a[i]],0];for(let e=1;e<=Math.log2(t);e++){let i=1<<e,a=i/2,n=2*Math.PI/i;for(let e=0;e<t;e+=i){let t=1,i=0;for(let o=0;o<a;o++){let s=t*r[e+o+a][0]-i*r[e+o+a][1],l=t*r[e+o+a][1]+i*r[e+o+a][0],u=r[e+o][0],c=r[e+o][1];r[e+o]=[u+s,c+l],r[e+o+a]=[u-s,c-l];let d=t*Math.cos(n)-i*Math.sin(n);i=t*Math.sin(n)+i*Math.cos(n),t=d}}}return r}},553256,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fftMag=void 0;let i=e.r(56242);r.fftMag=function(e){let t=e.map(e=>(0,i.complexMagnitude)(e));return t.slice(0,t.length/2)}},623726,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.smoothen=void 0,r.smoothen=function(e){let t=e,r=[];for(let e=0;e<3;e++){let e=Math.floor(1.5),i=1/(2*e+1);for(let i=0;i<e;i++)r[i]=t[i],r[t.length-i-1]=t[t.length-i-1];for(let a=e;a<t.length-e;a++){let n=0;for(let r=-e;r<=e;r++)n+=i*t[a+r]+r;r[a]=n}t=r}return r}},204464,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.toInt16=void 0,r.toInt16=e=>e>0?32767*e:32768*e},642911,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getVisualization=void 0;let i=e.r(680953),a=e.r(155290),n=e.r(553256),o=e.r(623726),s=e.r(204464);r.getVisualization=({sampleSize:e,data:t,sampleRate:r,frame:l,fps:u,maxInt:c,optimizeFor:d,dataOffsetInSeconds:p})=>{if(!(e>0&&(e&e-1)==0))throw TypeError(`The argument "bars" must be a power of two. For example: 64, 128. Got instead: ${e}`);if(!u)throw TypeError('The argument "fps" was not provided');if(t.length<e)throw TypeError("Audio data is not big enough to provide "+e+" bars.");let f=Math.max(0,Math.floor((l/u-p)*r)-e/2),h=new Int16Array({length:e});h.set(t.subarray(f,f+e).map(e=>(0,s.toInt16)(e)));let m=("accuracy"===d?i.fftAccurate:a.fftFast)(h),g=(0,n.fftMag)(m).map(e=>e);return(0,o.smoothen)(g).map(t=>t/(e/2)/c)}},414735,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getMaxPossibleMagnitude=void 0;let i=e.r(204464),a={};r.getMaxPossibleMagnitude=e=>{if(a[e.resultId])return a[e.resultId];let t=(0,i.toInt16)((e=>{let t=0;for(let r=0;r<e.length;r++){let i=e[r];i>t&&(t=i)}return t})(e.channelWaveforms[0]));return a[e.resultId]=t,t}},610973,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.visualizeAudio=void 0;let i=e.r(758927),a=e.r(642911),n=e.r(414735),o={},s=({audioData:e,frame:t,fps:r,numberOfSamples:i,optimizeFor:s,dataOffsetInSeconds:l})=>{let u=e.resultId+t+r+i;if(o[u])return o[u];let c=(0,n.getMaxPossibleMagnitude)(e);return(0,a.getVisualization)({sampleSize:2*i,data:e.channelWaveforms[0],frame:t,fps:r,sampleRate:e.sampleRate,maxInt:c,optimizeFor:s,dataOffsetInSeconds:l})};r.visualizeAudio=({smoothing:e=!0,optimizeFor:t=i.NoReactInternals.ENABLE_V5_BREAKING_CHANGES?"speed":"accuracy",dataOffsetInSeconds:r=0,...a})=>{if(!e)return s({...a,optimizeFor:t,dataOffsetInSeconds:r,smoothing:e});let n=[a.frame-1,a.frame,a.frame+1],o=n.map(i=>s({...a,frame:i,dataOffsetInSeconds:r,optimizeFor:t,smoothing:e}));return Array(a.numberOfSamples).fill(!0).map((e,t)=>Array(n.length).fill(!0).map((e,r)=>o[r][t]).reduce((e,t)=>e+t,0)/n.length)}},183340,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.visualizeAudioWaveform=void 0;let i=e.r(927513),a={};r.visualizeAudioWaveform=e=>(({audioData:e,frame:t,fps:r,numberOfSamples:n,windowInSeconds:o,channel:s,dataOffsetInSeconds:l,normalize:u=!1})=>{if(o*e.sampleRate<n)throw TypeError(o+"s audiodata does not have "+n+" bars. Increase windowInSeconds or decrease numberOfSamples");let c=e.resultId+t+r+n+"waveform"+l;return a[c]?a[c]:(0,i.getWaveformPortion)({audioData:e,startTimeInSeconds:t/r-o/2,durationInSeconds:o,numberOfSamples:n,outputRange:"minus-one-to-one",channel:s,dataOffsetInSeconds:l,normalize:u})})(e).map(e=>e.amplitude)},66646,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.visualizeAudioWaveform=r.visualizeAudio=r.useWindowedAudioData=r.useAudioData=r.getWaveformPortion=r.getVideoMetadata=r.getImageDimensions=r.getAudioDurationInSeconds=r.getAudioDuration=r.getAudioData=r.createSmoothSvgPath=r.audioBufferToDataUrl=void 0;var n=e.r(309660);Object.defineProperty(r,"audioBufferToDataUrl",{enumerable:!0,get:function(){return n.audioBufferToDataUrl}});var o=e.r(812930);Object.defineProperty(r,"createSmoothSvgPath",{enumerable:!0,get:function(){return o.createSmoothSvgPath}});var s=e.r(722216);Object.defineProperty(r,"getAudioData",{enumerable:!0,get:function(){return s.getAudioData}});var l=e.r(985225);Object.defineProperty(r,"getAudioDuration",{enumerable:!0,get:function(){return l.getAudioDuration}}),Object.defineProperty(r,"getAudioDurationInSeconds",{enumerable:!0,get:function(){return l.getAudioDurationInSeconds}});var u=e.r(786530);Object.defineProperty(r,"getImageDimensions",{enumerable:!0,get:function(){return u.getImageDimensions}});var c=e.r(62284);Object.defineProperty(r,"getVideoMetadata",{enumerable:!0,get:function(){return c.getVideoMetadata}});var d=e.r(927513);Object.defineProperty(r,"getWaveformPortion",{enumerable:!0,get:function(){return d.getWaveformPortion}}),a(e.r(939593),r);var p=e.r(827499);Object.defineProperty(r,"useAudioData",{enumerable:!0,get:function(){return p.useAudioData}});var f=e.r(442208);Object.defineProperty(r,"useWindowedAudioData",{enumerable:!0,get:function(){return f.useWindowedAudioData}});var h=e.r(610973);Object.defineProperty(r,"visualizeAudio",{enumerable:!0,get:function(){return h.visualizeAudio}});var m=e.r(183340);Object.defineProperty(r,"visualizeAudioWaveform",{enumerable:!0,get:function(){return m.visualizeAudioWaveform}})},577731,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getAssetMetadata=r.remotion_outputsBase=void 0;let i=e.r(66646),a=e.r(49019),n=e.r(432269);r.remotion_outputsBase=window.remotion_staticBase.replace("static","outputs");let o=async(e,t)=>{if("output-blob"===e.type)return{type:"found",size:e.sizeInBytes,dimensions:{width:e.width,height:e.height},fetchedAt:Date.now()};if("composition"===e.type)throw Error("cannot get dimensions for composition");let o="asset"===e.type?(0,a.staticFile)(e.asset):r.remotion_outputsBase+e.path,s=await fetch(o,{method:"HEAD"});if(404===s.status)return{type:"not-found"};if(200!==s.status)throw Error(`Expected status code 200 or 404 for file, got ${s.status}`);let l=s.headers.get("content-length");if(!l)throw Error("Unexpected error: content-length is null");let u=Date.now(),c=t?`${o}?date=${u}`:o,d=(0,n.getPreviewFileType)(o);if("video"===d){let e=await (0,i.getVideoMetadata)(c);return{type:"found",size:Number(l),dimensions:{width:e.width,height:e.height},fetchedAt:u}}return"image"===d?await new Promise((e,t)=>{let r=new Image;r.onload=()=>{e({type:"found",size:Number(l),dimensions:{width:r.width,height:r.height},fetchedAt:u})},r.onerror=()=>{t(Error("Failed to load image"))},r.src=c}):{type:"found",dimensions:"none",size:Number(l),fetchedAt:u}};r.getAssetMetadata=o},310099,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RemotionInput=r.getInputBorderColor=r.inputBaseStyle=r.RightAlignInput=r.INPUT_HORIZONTAL_PADDING=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(260240);r.INPUT_HORIZONTAL_PADDING=8;let s={marginRight:-r.INPUT_HORIZONTAL_PADDING};r.RightAlignInput=({children:e})=>(0,i.jsx)("div",{style:s,children:e}),r.inputBaseStyle={padding:`${r.INPUT_HORIZONTAL_PADDING}px 10px`,color:"white",borderStyle:"solid",borderWidth:1,fontSize:14},r.getInputBorderColor=({status:e,isFocused:t,isHovered:r})=>"warning"===e?n.WARNING_COLOR:"error"===e?n.FAIL_COLOR:t?n.SELECTED_BACKGROUND:r?n.INPUT_BORDER_COLOR_HOVERED:n.INPUT_BORDER_COLOR_UNHOVERED,r.RemotionInput=(0,a.forwardRef)(({status:e,rightAlign:t,...s},l)=>{let[u,c]=(0,a.useState)(!1),[d,p]=(0,a.useState)(!1),f=(0,a.useRef)(null),{tabIndex:h}=(0,o.useZIndex)(),m=(0,a.useMemo)(()=>{var i;return{backgroundColor:n.INPUT_BACKGROUND,...r.inputBaseStyle,width:"100%",borderColor:(0,r.getInputBorderColor)({isFocused:u,isHovered:d,status:e}),textAlign:t?"right":"left",...null!=(i=s.style)?i:{}}},[u,d,t,s.style,e]);return(0,a.useImperativeHandle)(l,()=>f.current,[]),(0,a.useEffect)(()=>{if(!f.current)return;let{current:e}=f,t=()=>c(!0),r=()=>c(!1),i=()=>p(!0),a=()=>p(!1);return e.addEventListener("focus",t),e.addEventListener("blur",r),e.addEventListener("mouseenter",i),e.addEventListener("mouseleave",a),()=>{e.removeEventListener("focus",t),e.removeEventListener("blur",r),e.removeEventListener("mouseenter",i),e.removeEventListener("mouseleave",a)}},[f]),(0,i.jsx)("input",{ref:f,tabIndex:h,...s,style:m})})},898002,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RemTextarea=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(260240),s=e.r(494296),l=e.r(310099),u={padding:`${l.INPUT_HORIZONTAL_PADDING}px 10px`,color:"white",borderStyle:"solid",borderWidth:1,fontSize:14,resize:"none",overflowX:"hidden"};r.RemTextarea=(0,a.forwardRef)(({status:e,...t},r)=>{let[c,d]=(0,a.useState)(!1),[p,f]=(0,a.useState)(!1),h=(0,a.useRef)(null),{tabIndex:m}=(0,o.useZIndex)();(0,a.useImperativeHandle)(r,()=>h.current,[]);let g=(0,a.useMemo)(()=>{var r;return{backgroundColor:n.INPUT_BACKGROUND,...u,width:"100%",borderColor:(0,l.getInputBorderColor)({isFocused:c,isHovered:p,status:e}),...null!=(r=t.style)?r:{}}},[c,p,t.style,e]);return(0,a.useEffect)(()=>{if(!h.current)return;let{current:e}=h,t=()=>d(!0),r=()=>d(!1),i=()=>f(!0),a=()=>f(!1),n=e=>{if(h.current&&h.current===document.activeElement&&("Tab"===e.code&&(e.preventDefault(),document.execCommand("insertText",!1," ".repeat(2))),"Enter"===e.code)){e.preventDefault();let{selectionStart:t,selectionEnd:r,value:i}=h.current;if(t!==r)return;let a=t;for(let e=t-1;e>=0&&"\n"!==i[e];e--)a=e;let n=i.substring(a,t),o=n.trim(),s=n.length-o.length;document.execCommand("insertText",!1,"\n"+" ".repeat(s))}};return e.addEventListener("focus",t),e.addEventListener("blur",r),e.addEventListener("mouseenter",i),e.addEventListener("mouseleave",a),e.addEventListener("keydown",n),()=>{e.removeEventListener("focus",t),e.removeEventListener("blur",r),e.removeEventListener("mouseenter",i),e.removeEventListener("mouseleave",a),e.removeEventListener("keydown",n)}},[h]),(0,i.jsx)("textarea",{ref:h,tabIndex:m,...t,className:s.VERTICAL_SCROLLBAR_CLASSNAME,style:g})})},293453,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.JSONViewer=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(898002),o={marginTop:14,marginBottom:14,fontFamily:"monospace",flex:1};r.JSONViewer=({src:e})=>{let[t,r]=(0,a.useState)(null);return(0,a.useEffect)(()=>{fetch(e).then(e=>e.json()).then(e=>{r(JSON.stringify(e,null,2))})},[e]),(0,i.jsx)(n.RemTextarea,{value:null!=t?t:void 0,status:"ok",onChange:()=>null,style:o})}},733475,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TextViewer=void 0;let i=e.r(222260),a=e.r(347540),n={margin:14,fontFamily:"monospace",flex:1,color:"white",whiteSpace:"pre-wrap"};r.TextViewer=({src:e})=>{let[t,r]=(0,a.useState)("");return(0,a.useEffect)(()=>{fetch(e).then(async e=>{e.ok&&e.body&&r(await e.text())})},[e]),(0,i.jsxs)("div",{style:n,children:[t," "]})}},754661,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FilePreview=void 0;let i=e.r(222260),a=e.r(213637),n=e.r(293453),o=e.r(733475),s=e.r(146575),l={fontSize:13,color:"white",fontFamily:"sans-serif",display:"flex",justifyContent:"center"};r.FilePreview=({fileType:e,src:t,currentAsset:r,assetMetadata:u})=>{if(!u)throw Error("expected to have assetMetadata");if("not-found"===u.type)throw Error('expected to have assetMetadata, got "not-found"');return"audio"===e?(0,i.jsx)("audio",{src:t,controls:!0}):"video"===e?(0,i.jsx)("video",{src:t,controls:!0}):"image"===e?(0,i.jsx)("img",{src:t}):"json"===e?(0,i.jsx)(n.JSONViewer,{src:t}):"txt"===e?(0,i.jsx)(o.TextViewer,{src:t}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:l,children:r}),(0,i.jsx)(s.Spacing,{y:.5}),(0,i.jsxs)("div",{style:l,children:["Size: ",(0,a.formatBytes)(u.size)," "]})]})}},153698,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RenderPreview=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(850586),o=e.r(921224),s=e.r(577731),l=e.r(754661),u=e.r(432269),c={fontSize:13,color:"white",fontFamily:"sans-serif",display:"flex",justifyContent:"center"},d={...c,color:o.LIGHT_TEXT};r.RenderPreview=({path:e,assetMetadata:t,getBlob:r})=>{let o=(0,u.getPreviewFileType)(e),p=(0,a.useContext)(n.StudioServerConnectionCtx).previewServerState.type,[f,h]=(0,a.useState)(null),[m,g]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!r){h(null),g(null);return}let e=!1,t=null;return g(null),r().then(r=>{let i=URL.createObjectURL(r);e?URL.revokeObjectURL(i):(t=i,h(i))}).catch(t=>{e||g(t instanceof Error?t:Error(String(t)))}),()=>{e=!0,t&&URL.revokeObjectURL(t)}},[r]);let v=null!=f?f:s.remotion_outputsBase+e;return"disconnected"===p?(0,i.jsx)("div",{style:d,children:"Studio server disconnected"}):r&&m?(0,i.jsxs)("div",{style:d,children:["Failed to load preview: ",m.message]}):r&&!f?(0,i.jsx)("div",{style:c,children:"Loading preview..."}):(0,i.jsx)(l.FilePreview,{assetMetadata:t,currentAsset:e,fileType:o,src:v})}},444732,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Spinner=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o="__remotion_spinner_line",s="__remotion_spinner_animation";r.Spinner=({size:e,duration:t})=>{let r=(0,a.useMemo)(()=>({width:e,height:e}),[e]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("style",{type:"text/css",children:`
				@keyframes ${s} {
          0% {
            opacity: 1;
          }
          100% {
            opacity: 0.15;
          }
        }
        
        .${o} {
            animation: ${s} ${t}s linear infinite;
        }        
			`}),(0,i.jsx)("svg",{style:r,viewBox:"0 0 100 100",children:Array(8).fill(!0).map((e,r)=>(0,i.jsx)("path",{className:o,style:{rotate:`${r*Math.PI*2/8}rad`,transformOrigin:"center center",animationDelay:`${t/8*r-t}s`},d:"M 44 0 L 50 0 a 6 6 0 0 1 6 6 L 56 26 a 6 6 0 0 1 -6 6 L 50 32 a 6 6 0 0 1 -6 -6 L 44 6 a 6 6 0 0 1 6 -6 Z",fill:n.LIGHT_TEXT},r))})]})}},560004,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StaticFilePreview=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(208795),s=e.r(850586),l=e.r(921224),u=e.r(754661),c=e.r(432269),d={...{fontSize:13,color:"white",fontFamily:"sans-serif",display:"flex",justifyContent:"center"},color:l.LIGHT_TEXT};r.StaticFilePreview=({currentAsset:e,assetMetadata:t})=>{let r=(0,c.getPreviewFileType)(e),l=(0,n.staticFile)(e),p=(0,o.getStaticFiles)(),f=(0,a.useContext)(s.StudioServerConnectionCtx).previewServerState.type,h=p.find(t=>t.name===e);return"disconnected"===f?(0,i.jsx)("div",{style:d,children:"Studio server disconnected"}):h?e?(0,i.jsx)(u.FilePreview,{currentAsset:e,fileType:r,src:`${l}?date=${t&&"found"===t.type?t.fetchedAt:0}`,assetMetadata:t}):null:(0,i.jsxs)("div",{style:d,children:[e," does not exist in your public folder."]})}},432269,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VideoPreview=r.getPreviewFileType=void 0;let i=e.r(222260),a=e.r(853987),n=e.r(347540),o=e.r(49019),s=e.r(110487),l=e.r(921224),u=e.r(786676),c=e.r(153698),d=e.r(444732),p=e.r(560004),f={display:"flex",flex:1,justifyContent:"center",alignItems:"center"},h={fontFamily:"sans-serif",fontSize:14,color:l.LIGHT_TEXT};r.getPreviewFileType=e=>{var t;if(!e)return"other";let r=null==(t=e.split(".").pop())?void 0:t.toLowerCase();if(void 0===r)throw Error("File extension is undefined");return["mp3","wav","ogg","aac"].includes(r)?"audio":["mp4","avi","mkv","mov","webm"].includes(r)?"video":["jpg","jpeg","png","gif","bmp"].includes(r)?"image":"json"===r?"json":"txt"===r?"txt":"other"},r.VideoPreview=({canvasSize:e,contentDimensions:t,canvasContent:r,assetMetadata:a})=>a&&"not-found"===a.type?(0,i.jsx)("div",{style:f,children:(0,i.jsx)("div",{style:h,children:"File does not exist"})}):null===t?(0,i.jsx)("div",{style:f,children:(0,i.jsx)(d.Spinner,{duration:.5,size:24})}):(0,i.jsx)(m,{contentDimensions:t,canvasSize:e,canvasContent:r,assetMetadata:a});let m=({contentDimensions:e,canvasSize:t,canvasContent:s,assetMetadata:l})=>{let{size:u}=(0,n.useContext)(o.Internals.PreviewSizeContext),{centerX:d,centerY:f,yCorrection:h,xCorrection:m,scale:v}=(0,n.useMemo)(()=>"none"===e?{centerX:0,centerY:0,yCorrection:0,xCorrection:0,scale:1}:a.PlayerInternals.calculateCanvasTransformation({canvasSize:t,compositionHeight:e.height,compositionWidth:e.width,previewSize:u.size}),[t,e,u.size]),y=(0,n.useMemo)(()=>({width:"none"===e?"100%":e.width*v,height:"none"===e?"100%":e.height*v,display:"flex",flexDirection:"column",position:"absolute",left:d-u.translation.x,top:f-u.translation.y,overflow:"hidden",justifyContent:"asset"===s.type?"center":"flex-start",alignItems:"asset"===s.type&&"audio"===(0,r.getPreviewFileType)(s.asset)?"center":"normal"}),[e,v,d,u.translation.x,u.translation.y,f,s]);return"asset"===s.type?(0,i.jsx)("div",{style:y,children:(0,i.jsx)(p.StaticFilePreview,{assetMetadata:l,currentAsset:s.asset})}):"output"===s.type?(0,i.jsx)("div",{style:y,children:(0,i.jsx)(c.RenderPreview,{path:s.path,assetMetadata:l})}):"output-blob"===s.type?(0,i.jsx)("div",{style:y,children:(0,i.jsx)(c.RenderPreview,{path:s.displayName,assetMetadata:l,getBlob:s.getBlob})}):(0,i.jsx)("div",{style:y,children:(0,i.jsx)(g,{contentDimensions:e,scale:v,xCorrection:m,yCorrection:h})})},g=({scale:e,xCorrection:t,yCorrection:r,contentDimensions:a})=>{let{checkerboard:l}=(0,n.useContext)(u.CheckerboardContext),c=(0,n.useMemo)(()=>{let i;return i={checkerboard:l,scale:e,xCorrection:t,yCorrection:r,width:a.width,height:a.height},{transform:`scale(${i.scale})`,marginLeft:i.xCorrection,marginTop:i.yCorrection,width:i.width,height:i.height,display:"flex",position:"absolute",backgroundColor:(0,s.checkerboardBackgroundColor)(i.checkerboard),backgroundImage:(0,s.checkerboardBackgroundImage)(i.checkerboard),backgroundSize:(0,s.getCheckerboardBackgroundSize)(49),backgroundPosition:(0,s.getCheckerboardBackgroundPos)(49)}},[l,a.height,a.width,e,t,r]);(0,n.useEffect)(()=>{let{current:e}=d;return null==e||e.appendChild(o.Internals.portalNode()),()=>{null==e||e.removeChild(o.Internals.portalNode())}},[]);let d=(0,n.useRef)(null);return(0,i.jsx)("div",{ref:d,style:c})}},700434,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SizeSelector=r.getUniqueSizes=r.getPreviewSizeLabel=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(170260),s=e.r(488441),l=e.r(432804),u=e.r(432269),c=[{size:"auto",translation:{x:0,y:0}},{size:.25,translation:{x:0,y:0}},{size:.5,translation:{x:0,y:0}},{size:1,translation:{x:0,y:0}}];r.getPreviewSizeLabel=e=>"auto"===e.size?"Fit":`${(100*e.size).toFixed(0)}%`;let d="Preview Size",p={width:80};r.getUniqueSizes=e=>{let t=[];return[e,...c].forEach(e=>{t.find(t=>t.size===e.size)||t.push(e)}),t.sort((e,t)=>"auto"===e.size?-1:"auto"===t.size?1:e.size-t.size)};let f=["video","image"];r.SizeSelector=()=>{let{size:e,setSize:t}=(0,a.useContext)(n.Internals.PreviewSizeContext),{canvasContent:c}=(0,a.useContext)(n.Internals.CompositionManager),h=(0,a.useMemo)(()=>({padding:s.CONTROL_BUTTON_PADDING}),[]),m=(0,a.useMemo)(()=>c?!!("composition"===c.type||"asset"===c.type&&f.includes((0,u.getPreviewFileType)(c.asset))||"output"===c.type&&f.includes((0,u.getPreviewFileType)(c.path))):null,[c]),g=(0,a.useMemo)(()=>(0,r.getUniqueSizes)(e).map(a=>({id:String(a.size),label:(0,r.getPreviewSizeLabel)(a),onClick:()=>t(()=>a),type:"item",value:a.size,keyHint:"auto"===a.size?"0":null,leftItem:String(e.size)===String(a.size)?(0,i.jsx)(o.Checkmark,{}):null,subMenu:null,quickSwitcherLabel:null})),[t,e]);return m?(0,i.jsx)("div",{style:h,"aria-label":d,children:(0,i.jsx)(l.Combobox,{title:d,style:p,selectedId:String(e.size),values:g})}):null}},800915,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimelineOutPointer=r.TimelineInPointer=void 0;let i=e.r(222260);r.TimelineInPointer=e=>(0,i.jsx)("svg",{viewBox:"0 0 256 256",fill:"none",...e,children:(0,i.jsx)("path",{d:"M158 25H99V230.5H158",stroke:e.color,strokeWidth:"42",strokeLinecap:"round",strokeLinejoin:"round"})}),r.TimelineOutPointer=e=>(0,i.jsx)("svg",{viewBox:"0 0 256 256",fill:"none",...e,children:(0,i.jsx)("path",{d:"M98 25H157V230.5H98",stroke:e.color,strokeWidth:"42",strokeLinecap:"round",strokeLinejoin:"round"})})},535932,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useTimelineSetInOutFramePosition=r.useTimelineInOutFramePosition=r.SetTimelineInOutContext=r.TimelineInOutContext=void 0;let i=e.r(347540),a=e.r(49019);r.TimelineInOutContext=(0,i.createContext)({}),r.SetTimelineInOutContext=(0,i.createContext)({setInAndOutFrames:()=>{throw Error("default")}}),r.useTimelineInOutFramePosition=()=>{let e=a.Internals.useUnsafeVideoConfig(),t=(0,i.useContext)(r.TimelineInOutContext),n=null==e?void 0:e.id,o=null==e?void 0:e.durationInFrames;return(0,i.useMemo)(()=>{var e,r,i,a;if(!n||!o)return{inFrame:null,outFrame:null};let s=o-1,l=null!=(r=null==(e=t[n])?void 0:e.inFrame)?r:null,u=null!=(a=null==(i=t[n])?void 0:i.outFrame)?a:null;return{inFrame:null===l||l>=s?null:l,outFrame:null===u||u>=s?null:u}},[o,n,t])},r.useTimelineSetInOutFramePosition=()=>{let{setInAndOutFrames:e}=(0,i.useContext)(r.SetTimelineInOutContext);return{setInAndOutFrames:e}}},8115,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimelineInOutPointToggle=r.defaultInOutValue=r.inOutHandles=void 0;let i=e.r(222260),a=e.r(853987),n=e.r(347540),o=e.r(49019),s=e.r(758927),l=e.r(921224),u=e.r(362087),c=e.r(800915),d=e.r(535932),p=e.r(488441),f=(e,t)=>[`Mark ${e}`,(0,u.areKeyboardShortcutsDisabled)()?null:`(${t})`,"- right click to clear"].filter(s.NoReactInternals.truthy).join(" "),h={width:16,height:16};r.inOutHandles=(0,n.createRef)(),r.defaultInOutValue={inFrame:null,outFrame:null},r.TimelineInOutPointToggle=()=>{let{inFrame:e,outFrame:t}=(0,d.useTimelineInOutFramePosition)(),{setInAndOutFrames:s}=(0,d.useTimelineSetInOutFramePosition)(),m=o.Internals.useUnsafeVideoConfig(),g=(0,u.useKeybinding)(),{getCurrentFrame:v,isFirstFrame:y,isLastFrame:b}=a.PlayerInternals.usePlayer(),x=(0,n.useCallback)(e=>{s(t=>({...t,[e]:{inFrame:null,outFrame:null}}))},[s]),w=(0,n.useCallback)(e=>m?(null==e?void 0:e.shiftKey)?(s(e=>{var t;return{...e,[m.id]:{...null!=(t=e[m.id])?t:r.defaultInOutValue,inFrame:null}}}),null):void s(e=>{var t,i,a,n,o;let s=null==(t=e[m.id])?void 0:t.outFrame,l=Math.min(v(),null==s?1/0:s-1);if(0===l)return{...e,[m.id]:{...null!=(i=e[m.id])?i:r.defaultInOutValue,inFrame:null}};let u=null==(a=e[m.id])?void 0:a.inFrame;return null!=u&&u===l?{...e,[m.id]:{...null!=(n=e[m.id])?n:r.defaultInOutValue,inFrame:null}}:{...e,[m.id]:{...null!=(o=e[m.id])?o:r.defaultInOutValue,inFrame:l}}}):null,[v,s,m]),S=(0,n.useCallback)(e=>{if(!m)return null;e.preventDefault(),s(e=>{var t;return{...e,[m.id]:{...null!=(t=e[m.id])?t:r.defaultInOutValue,inFrame:null}}})},[s,m]),k=(0,n.useCallback)(e=>{if(!m)return null;null==e||e.preventDefault(),s(e=>{var t;return{...e,[m.id]:{...null!=(t=e[m.id])?t:r.defaultInOutValue,outFrame:null}}})},[s,m]),C=(0,n.useCallback)(e=>m?(null==e?void 0:e.shiftKey)?void s(e=>{var t;return{...e,[m.id]:{...null!=(t=e[m.id])?t:r.defaultInOutValue,outFrame:null}}}):void s(e=>{var t,i,a,n,o;let s=null==(t=e[m.id])?void 0:t.inFrame,l=Math.max(v(),null==s?-1/0:s+1);if(l===m.durationInFrames-1)return{...e,[m.id]:{...null!=(i=e[m.id])?i:r.defaultInOutValue,outFrame:null}};let u=null==(a=e[m.id])?void 0:a.outFrame;return null!=u&&u===l?{...e,[m.id]:{...null!=(n=e[m.id])?n:r.defaultInOutValue,outFrame:null}}:{...e,[m.id]:{...null!=(o=e[m.id])?o:r.defaultInOutValue,outFrame:l}}}):null,[v,s,m]),E=null==m?void 0:m.id;return(0,n.useEffect)(()=>{if(!E)return;let e=g.registerKeybinding({event:"keypress",key:"i",callback:e=>{w(e)},commandCtrlKey:!1,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1}),t=g.registerKeybinding({event:"keypress",key:"o",callback:e=>{C(e)},commandCtrlKey:!1,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1}),r=g.registerKeybinding({event:"keypress",key:"x",callback:()=>{x(E)},commandCtrlKey:!1,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1});return()=>{t.unregister(),e.unregister(),r.unregister()}},[E,g,w,x,C]),(0,n.useImperativeHandle)(r.inOutHandles,()=>({clearMarks:()=>{E&&x(E)},inMarkClick:w,outMarkClick:C}),[E,w,x,C]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.ControlButton,{title:f("In","I"),"aria-label":f("In","I"),onClick:w,onContextMenu:S,disabled:!m||y,children:(0,i.jsx)(c.TimelineInPointer,{color:null===e?"white":l.BLUE,style:h})}),(0,i.jsx)(p.ControlButton,{title:f("Out","O"),"aria-label":f("Out","O"),onClick:C,onContextMenu:k,disabled:!m||b,children:(0,i.jsx)(c.TimelineOutPointer,{color:null===t?"white":l.BLUE,style:h})})]})}},597066,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ShortcutHint=r.cmdOrCtrlCharacter=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(362087);r.cmdOrCtrlCharacter=window.navigator.platform.startsWith("Mac")?"":"Ctrl";let o={display:"inline-block",marginLeft:6,opacity:.6,verticalAlign:"middle",fontSize:14};r.ShortcutHint=({keyToPress:e,cmdOrCtrl:t})=>{let s=(0,a.useMemo)(()=>""===e?{display:"inline-block",transform:"translateY(2px)",fontSize:14}:{},[e]);return(0,n.areKeyboardShortcutsDisabled)()?null:(0,i.jsxs)("span",{style:o,children:[t?`${r.cmdOrCtrlCharacter}`:"",(0,i.jsx)("span",{style:s,children:e.toUpperCase()})]})}},6256,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.EditorShowGuidesContext=r.loadGuidesList=r.persistGuidesList=r.loadEditorShowGuidesOption=r.persistEditorShowGuidesOption=void 0;let i=e.r(347540);r.persistEditorShowGuidesOption=e=>{localStorage.setItem("remotion.editorShowGuides",String(e))},r.loadEditorShowGuidesOption=()=>"true"===localStorage.getItem("remotion.editorShowGuides"),r.persistGuidesList=e=>{localStorage.setItem("remotion.guidesList",JSON.stringify(e))},r.loadGuidesList=()=>{let e=localStorage.getItem("remotion.guidesList");return e?JSON.parse(e):[]},r.EditorShowGuidesContext=(0,i.createContext)({editorShowGuides:!1,setEditorShowGuides:()=>void 0,guidesList:[],setGuidesList:()=>void 0,selectedGuideId:null,setSelectedGuideId:()=>void 0,shouldCreateGuideRef:{current:!1},shouldDeleteGuideRef:{current:!1},hoveredGuideId:null,setHoveredGuideId:()=>void 0})},816811,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MINIMUM_RULER_MARKING_GAP_PX=r.MAXIMUM_PREDEFINED_RULER_SCALE_GAP=r.PREDEFINED_RULER_SCALE_GAPS=r.MINIMUM_VISIBLE_CANVAS_SIZE=r.RULER_WIDTH=r.EditorShowRulersContext=r.loadEditorShowRulersOption=r.persistEditorShowRulersOption=void 0;let i=e.r(347540);r.persistEditorShowRulersOption=e=>{localStorage.setItem("remotion.editorShowRulers",String(e))},r.loadEditorShowRulersOption=()=>"true"===localStorage.getItem("remotion.editorShowRulers"),r.EditorShowRulersContext=(0,i.createContext)({editorShowRulers:(0,r.loadEditorShowRulersOption)(),setEditorShowRulers:()=>void 0}),r.RULER_WIDTH=20,r.MINIMUM_VISIBLE_CANVAS_SIZE=50,r.PREDEFINED_RULER_SCALE_GAPS=[1,2,5,10,20,50,100,250,500,1e3,2e3,5e3],r.MAXIMUM_PREDEFINED_RULER_SCALE_GAP=5e3,r.MINIMUM_RULER_MARKING_GAP_PX=50},601679,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.EditorZoomGesturesContext=r.loadEditorZoomGesturesOption=r.persistEditorZoomGesturesOption=void 0;let i=e.r(347540);r.persistEditorZoomGesturesOption=e=>{localStorage.setItem("remotion.editorZoomGestures",String(e))},r.loadEditorZoomGesturesOption=()=>"false"!==localStorage.getItem("remotion.editorZoomGestures"),r.EditorZoomGesturesContext=(0,i.createContext)({editorZoomGestures:(0,r.loadEditorZoomGesturesOption)(),setEditorZoomGestures:()=>void 0})},203797,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.checkFullscreenSupport=void 0,r.checkFullscreenSupport=()=>document.fullscreenEnabled||document.webkitFullscreenEnabled},239203,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getGitMenuItem=r.getGitRefUrl=r.getGitSourceBranchUrl=r.getGitSourceName=void 0,r.getGitSourceName=e=>{if("github"===e.type)return"GitHub";throw Error("Unknown git source type")},r.getGitSourceBranchUrl=e=>{if("github"===e.type)return`https://github.com/${e.org}/${e.name}/tree/${e.ref}${e.relativeFromGitRoot?`/${e.relativeFromGitRoot}`:""}`;throw Error("Unknown git source type")},r.getGitRefUrl=(e,t)=>{if("github"===e.type)return`https://github.com/${e.org}/${e.name}/tree/${e.ref}/${e.relativeFromGitRoot?`${e.relativeFromGitRoot}/`:""}${t.source}#L${t.line}`;throw Error("Unknown git source type")},r.getGitMenuItem=()=>window.remotion_gitSource?{id:"open-git-source",value:"open-git-source",label:`Open ${(0,r.getGitSourceName)(window.remotion_gitSource)} Repo`,onClick:()=>{window.open((0,r.getGitSourceBranchUrl)(window.remotion_gitSource),"_blank")},type:"item",keyHint:null,leftItem:null,subMenu:null,quickSwitcherLabel:`Open ${(0,r.getGitSourceName)(window.remotion_gitSource)} repo`}:null},412361,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.openOriginalPositionInEditor=r.openInEditor=void 0,r.openInEditor=e=>{let{originalFileName:t,originalLineNumber:r,originalColumnNumber:i,originalFunctionName:a,originalScriptCode:n}=e;return fetch("/api/open-in-editor",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({stack:{originalFileName:t,originalLineNumber:r,originalColumnNumber:i,originalFunctionName:a,originalScriptCode:n}})})};let i=async e=>{await (0,r.openInEditor)({originalColumnNumber:e.column,originalFileName:e.source,originalFunctionName:null,originalLineNumber:e.line,originalScriptCode:null})};r.openOriginalPositionInEditor=i},765148,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ColorDot=void 0;let i=e.r(222260),a=e.r(347540),n={height:16,width:16,backgroundColor:"red",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:8};r.ColorDot=({color:e})=>{let t=(0,a.useMemo)(()=>({...n,backgroundColor:e}),[e]);return(0,i.jsx)("div",{style:t})}},948382,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.pickColor=void 0;let i=e.r(222260),a=e.r(146575),n=e.r(765148),o=e.r(277984),s=e.r(238666);r.pickColor=()=>{new EyeDropper().open().then(e=>{(0,s.copyText)(e.sRGBHex).then(()=>{(0,o.showNotification)((0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.ColorDot,{color:e.sRGBHex})," ",(0,i.jsx)(a.Spacing,{x:1})," Copied"," ",e.sRGBHex]}),2e3)}).catch(e=>{(0,o.showNotification)(`Could not copy: ${e.message}`,2e3)})}).catch(e=>{e.message.includes("canceled")||(0,o.showNotification)("Could not pick color.",2e3)})}},605769,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SHOW_BROWSER_RENDERING=void 0,r.SHOW_BROWSER_RENDERING=!!process.env.EXPERIMENTAL_CLIENT_SIDE_RENDERING_ENABLED},679249,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.makeSearchResults=r.useMenuStructure=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(758927),s=e.r(604638),l=e.r(413088),u=e.r(277984),c=e.r(700434),d=e.r(8115),p=e.r(146575),f=e.r(597066),h=e.r(170260),m=e.r(184085),g=e.r(786676),v=e.r(6256),y=e.r(816811),b=e.r(601679),x=e.r(137798),w=e.r(839270),S=e.r(203797),k=e.r(850586),C=e.r(239203),E=e.r(321743),_=e.r(412361),T=e.r(948382),P=e.r(605769),I=e.r(362087),A=e=>{window.open(e,"_blank")},O={transform:"rotate(90deg)"};r.useMenuStructure=(e,t)=>{let{setSelectedModal:r}=(0,a.useContext)(x.ModalsContext),{checkerboard:M,setCheckerboard:F}=(0,a.useContext)(g.CheckerboardContext),{editorZoomGestures:R,setEditorZoomGestures:D}=(0,a.useContext)(b.EditorZoomGesturesContext),{editorShowRulers:j,setEditorShowRulers:L}=(0,a.useContext)(y.EditorShowRulersContext),{editorShowGuides:B,setEditorShowGuides:N}=(0,a.useContext)(v.EditorShowGuidesContext),{size:$,setSize:z}=(0,a.useContext)(n.Internals.PreviewSizeContext),{type:U}=(0,a.useContext)(k.StudioServerConnectionCtx).previewServerState,{setSidebarCollapsedState:V,sidebarCollapsedStateLeft:H,sidebarCollapsedStateRight:W}=(0,a.useContext)(w.SidebarContext),q=(0,a.useMemo)(()=>(0,c.getUniqueSizes)($),[$]),G=(0,S.checkFullscreenSupport)(),{remotion_packageManager:Z}=window,K=q.findIndex(e=>String($.size)===String(e.size)),Q=(0,E.useMobileLayout)();return(0,a.useMemo)(()=>{let a=[{id:"remotion",label:(0,i.jsx)(p.Row,{align:"center",justify:"center",children:(0,i.jsx)("svg",{width:16,height:16,viewBox:"-100 -100 400 400",style:O,children:(0,i.jsx)("path",{fill:"#fff",stroke:"#fff",strokeWidth:"100",strokeLinejoin:"round",d:"M 2 172 a 196 100 0 0 0 195 5 A 196 240 0 0 0 100 2.259 A 196 240 0 0 0 2 172 z"})})}),leaveLeftPadding:!1,items:[{id:"about",value:"about",label:"About Remotion",onClick:()=>{e(),A("https://remotion.dev")},type:"item",keyHint:null,leftItem:null,subMenu:null,quickSwitcherLabel:"Help: About Remotion"},{id:"changelog",value:"changelog",label:"Changelog",onClick:()=>{e(),A("https://github.com/remotion-dev/remotion/releases")},type:"item",keyHint:null,leftItem:null,subMenu:null,quickSwitcherLabel:"Help: Changelog"},{id:"license",value:"license",label:"License",onClick:()=>{e(),A("https://github.com/remotion-dev/remotion/blob/main/LICENSE.md")},type:"item",keyHint:null,leftItem:null,subMenu:null,quickSwitcherLabel:"Help: License"},{id:"acknowledgements",value:"acknowledgements",label:"Acknowledgements",onClick:()=>{e(),A("https://remotion.dev/acknowledgements")},type:"item",keyHint:null,leftItem:null,subMenu:null,quickSwitcherLabel:"Help: Acknowledgements"},{type:"divider",id:"timeline-divider-1"},{id:"restart-studio",value:"restart-studio",label:"Restart Studio Server",onClick:()=>{e(),(0,s.restartStudio)()},type:"item",keyHint:null,leftItem:null,subMenu:null,quickSwitcherLabel:"Restart Studio Server"}],quickSwitcherLabel:null},(({readOnlyStudio:e,closeMenu:t,previewServerState:r,setSelectedModal:i})=>{let a=[window.remotion_isReadOnlyStudio?{id:"input-props-override",value:"input-props-override",label:"Set input props...",onClick:()=>{t(),i({type:"input-props-override"})},type:"item",keyHint:null,leftItem:null,subMenu:null,quickSwitcherLabel:"Override input props"}:null,e?null:{id:"render",value:"render",label:"Render...",onClick:()=>{(t(),"connected"!==r)?(0,u.showNotification)("Restart the studio to render",2e3):document.getElementById("render-modal-button-server").click()},type:"item",keyHint:"R",leftItem:null,subMenu:null,quickSwitcherLabel:"Render..."},P.SHOW_BROWSER_RENDERING&&!e?{id:"render-on-web",value:"render-on-web",label:"Render on web...",onClick:()=>{t(),document.getElementById("render-modal-button-client").click()},type:"item",keyHint:null,leftItem:null,subMenu:null,quickSwitcherLabel:"Render on web..."}:null,window.remotion_editorName&&!e?{type:"divider",id:"open-in-editor-divider"}:null,window.remotion_editorName&&!e?{id:"open-in-editor",value:"open-in-editor",label:`Open in ${window.remotion_editorName}`,onClick:async()=>{await (0,_.openInEditor)({originalFileName:`${window.remotion_cwd}`,originalLineNumber:1,originalColumnNumber:1,originalFunctionName:null,originalScriptCode:null}).then(e=>e.json()).then(({success:e})=>{e||(0,u.showNotification)(`Could not open ${window.remotion_editorName}`,2e3)}).catch(e=>{console.error(e),(0,u.showNotification)(`Could not open ${window.remotion_editorName}`,2e3)})},type:"item",keyHint:null,leftItem:null,subMenu:null,quickSwitcherLabel:"Open in editor..."}:null,(0,C.getGitMenuItem)()].filter(o.NoReactInternals.truthy);return 0===a.length?null:{id:"file",label:"File",leaveLeftPadding:!1,items:a,quickSwitcherLabel:null}})({readOnlyStudio:t,closeMenu:e,previewServerState:U,setSelectedModal:r}),{id:"view",label:"View",leaveLeftPadding:!0,items:[{id:"preview-size",keyHint:null,label:"Preview size",onClick:()=>void 0,type:"item",value:"preview-size",leftItem:null,subMenu:{leaveLeftSpace:!0,preselectIndex:K,items:q.map(t=>({id:String(t.size),keyHint:1===t.size?"0":null,label:(0,c.getPreviewSizeLabel)(t),leftItem:String(t.size)===String($.size)?(0,i.jsx)(h.Checkmark,{}):null,onClick:()=>{e(),z(()=>t)},subMenu:null,type:"item",value:t.size,quickSwitcherLabel:null})),quickSwitcherLabel:null},quickSwitcherLabel:null},{id:"editor-zoom-gestures",keyHint:null,label:"Zoom and Pan Gestures",onClick:()=>{e(),D(e=>!e)},type:"item",value:"editor-zoom-gestures",leftItem:R?(0,i.jsx)(h.Checkmark,{}):null,subMenu:null,quickSwitcherLabel:R?"Disable Zoom and Pan Gestures":"Enable Zoom and Pan Gestures"},{id:"show-rulers",keyHint:null,label:"Show Rulers",onClick:()=>{e(),L(e=>!e)},type:"item",value:"show-ruler",leftItem:j?(0,i.jsx)(h.Checkmark,{}):null,subMenu:null,quickSwitcherLabel:j?"Hide Rulers":"Show Rulers"},{id:"show-guides",keyHint:null,label:"Show Guides",onClick:()=>{e(),N(e=>!e)},type:"item",value:"show-guides",leftItem:B?(0,i.jsx)(h.Checkmark,{}):null,subMenu:null,quickSwitcherLabel:B?"Hide Guides":"Show Guides"},{id:"timeline-divider-1",type:"divider"},{id:"left-sidebar",label:"Left Sidebar",keyHint:null,type:"item",value:"preview-size",leftItem:null,quickSwitcherLabel:null,subMenu:{leaveLeftSpace:!0,preselectIndex:0,items:[{id:"left-sidebar-responsive",keyHint:null,label:"Responsive",leftItem:"responsive"===H?(0,i.jsx)(h.Checkmark,{}):null,onClick:()=>{e(),V({left:"responsive",right:null})},subMenu:null,type:"item",value:"responsive",quickSwitcherLabel:null},{id:"left-sidebar-expanded",keyHint:null,label:"Expanded",leftItem:"expanded"===H?(0,i.jsx)(h.Checkmark,{}):null,onClick:()=>{e(),V({left:"expanded",right:null})},subMenu:null,type:"item",value:"expanded",quickSwitcherLabel:"Expand"},{id:"left-sidebar-collapsed",keyHint:null,label:"Collapsed",leftItem:"collapsed"===H?(0,i.jsx)(h.Checkmark,{}):null,onClick:()=>{e(),V({left:"collapsed",right:null})},subMenu:null,type:"item",value:"collapsed",quickSwitcherLabel:"Collapse"}]},onClick:()=>void 0},{id:"right-sidebar",label:"Right Sidebar",keyHint:null,type:"item",value:"preview-size",leftItem:null,quickSwitcherLabel:null,subMenu:{leaveLeftSpace:!0,preselectIndex:0,items:[{id:"sidebar-expanded",keyHint:null,label:"Expanded",leftItem:"expanded"===W?(0,i.jsx)(h.Checkmark,{}):null,onClick:()=>{e(),V({left:null,right:"expanded"})},subMenu:null,type:"item",value:"expanded",quickSwitcherLabel:"Expand"},{id:"right-sidebar-collapsed",keyHint:null,label:"Collapsed",leftItem:"collapsed"===W?(0,i.jsx)(h.Checkmark,{}):null,onClick:()=>{e(),V({left:null,right:"collapsed"})},subMenu:null,type:"item",value:"collapsed",quickSwitcherLabel:"Collapse"}]},onClick:()=>void 0},{id:"timeline-divider-2",type:"divider"},{id:"checkerboard",keyHint:"T",label:"Transparency as checkerboard",onClick:()=>{e(),F(e=>!e)},type:"item",value:"checkerboard",leftItem:M?(0,i.jsx)(h.Checkmark,{}):null,subMenu:null,quickSwitcherLabel:M?"Disable Checkerboard Transparency":"Enable Checkerboard Transparency"},{id:"timeline-divider-3",type:"divider"},{id:"quick-switcher",keyHint:`${f.cmdOrCtrlCharacter}+K`,label:"Quick Switcher",onClick:()=>{e(),r({type:"quick-switcher",mode:"compositions",invocationTimestamp:Date.now()})},type:"item",value:"quick-switcher",leftItem:null,subMenu:null,quickSwitcherLabel:"Switch composition"},{id:"in-out-divider-5",type:"divider"},{id:"in-mark",keyHint:"I",label:"In Mark",leftItem:null,onClick:()=>{var t;e(),null==(t=d.inOutHandles.current)||t.inMarkClick(null)},subMenu:null,type:"item",value:"in-mark",quickSwitcherLabel:"Timeline: Set In Mark"},{id:"out-mark",keyHint:"O",label:"Out Mark",leftItem:null,onClick:()=>{var t;e(),null==(t=d.inOutHandles.current)||t.outMarkClick(null)},subMenu:null,type:"item",value:"out-mark",quickSwitcherLabel:"Timeline: Set Out Mark"},{id:"x-mark",keyHint:"X",label:"Clear In/Out Marks",leftItem:null,onClick:()=>{var t;e(),null==(t=d.inOutHandles.current)||t.clearMarks()},subMenu:null,type:"item",value:"clear-marks",quickSwitcherLabel:"Timeline: Clear In and Out Mark"},{id:"goto-time",keyHint:"G",label:"Go to frame",leftItem:null,onClick:()=>{var t;e(),null==(t=n.Internals.timeValueRef.current)||t.goToFrame()},subMenu:null,type:"item",value:"clear-marks",quickSwitcherLabel:"Timeline: Go to frame"},{id:"fullscreen-divider",type:"divider"},G?{id:"fullscreen",keyHint:null,label:"Fullscreen",leftItem:null,onClick:()=>{var t;e(),null==(t=m.drawRef.current)||t.requestFullscreen()},subMenu:null,type:"item",value:"fullscreen",quickSwitcherLabel:"Go Fullscreen"}:null].filter(n.Internals.truthy)},{id:"tools",label:"Tools",leaveLeftPadding:!1,items:[process.env.ASK_AI_ENABLED?{id:"ask-ai",value:"ask-ai",label:"Ask AI",onClick:()=>{var t;e(),null==(t=l.askAiModalRef.current)||t.toggle()},leftItem:null,keyHint:`${f.cmdOrCtrlCharacter}+I`,subMenu:null,type:"item",quickSwitcherLabel:"Ask AI"}:null,"EyeDropper"in window?{id:"color-picker",value:"color-picker",label:"Color Picker",onClick:()=>{e(),(0,T.pickColor)()},leftItem:null,keyHint:null,subMenu:null,type:"item",quickSwitcherLabel:"Show Color Picker"}:null,{id:"spring-editor",value:"spring-editor",label:"Timing Editor",onClick:()=>{e(),window.open("https://www.remotion.dev/timing-editor","_blank")},leftItem:null,keyHint:null,subMenu:null,type:"item",quickSwitcherLabel:"Open spring() Editor"}].filter(n.Internals.truthy),quickSwitcherLabel:null},t||"unknown"===Z?null:{id:"install",label:"Packages",leaveLeftPadding:!1,items:[{id:"install-packages",value:"install-packages",label:"Install...",onClick:()=>{e(),r({type:"install-packages",packageManager:Z})},type:"item",keyHint:null,leftItem:null,subMenu:null,quickSwitcherLabel:"Install packages"}]},{id:"help",label:"Help",leaveLeftPadding:!1,items:[{id:"shortcuts",value:"shortcuts",label:(0,I.areKeyboardShortcutsDisabled)()?"Shortcuts (disabled)":"Shortcuts",onClick:()=>{e(),r({type:"quick-switcher",mode:"docs",invocationTimestamp:Date.now()})},keyHint:"?",leftItem:null,subMenu:null,type:"item",quickSwitcherLabel:(0,I.areKeyboardShortcutsDisabled)()?"Show all Keyboard Shortcuts (disabled)":"Show all Keyboard Shortcuts"},{id:"docs",value:"docs",label:"Docs",onClick:()=>{e(),A("https://remotion.dev/docs")},type:"item",keyHint:null,leftItem:null,subMenu:null,quickSwitcherLabel:"Visit Documentation"},{id:"file-issue",value:"file-issue",label:"File an issue",onClick:()=>{e(),A("https://github.com/remotion-dev/remotion/issues/new/choose")},type:"item",keyHint:null,leftItem:null,subMenu:null,quickSwitcherLabel:"File GitHub issue"},{id:"discord",value:"discord",label:"Join Discord community",onClick:()=>{e(),A("https://discord.com/invite/6VzzNDwUwV")},type:"item",keyHint:null,leftItem:null,subMenu:null,quickSwitcherLabel:null},{id:"help-divider-6",type:"divider"},{id:"insta",value:"insta",label:"Instagram",onClick:()=>{e(),A("https://instagram.com/remotion")},type:"item",keyHint:null,leftItem:null,subMenu:null,quickSwitcherLabel:"Follow Remotion on Instagram"},{id:"x",value:"x",label:"X",onClick:()=>{e(),A("https://x.com/remotion")},type:"item",keyHint:null,leftItem:null,subMenu:null,quickSwitcherLabel:"Follow Remotion on X"},{id:"youtube",value:"youtube",label:"YouTube",onClick:()=>{e(),A("https://www.youtube.com/@remotion_dev")},type:"item",keyHint:null,leftItem:null,subMenu:null,quickSwitcherLabel:"Watch Remotion on YouTube"},{id:"linkedin",value:"linkedin",label:"LinkedIn",onClick:()=>{e(),A("https://www.linkedin.com/company/remotion-dev/")},type:"item",keyHint:null,leftItem:null,subMenu:null,quickSwitcherLabel:"Follow Remotion on LinkedIn"},{id:"tiktok",value:"tiktok",label:"TikTok",onClick:()=>{e(),A("https://www.tiktok.com/@remotion")},type:"item",keyHint:null,leftItem:null,subMenu:null,quickSwitcherLabel:"Follow Remotion on TikTok"}]}].filter(n.Internals.truthy);return Q&&(a=[{...a[0],items:[...a.slice(1).map(e=>({...e,keyHint:null,onClick:()=>void 0,type:"item",value:e.id,leftItem:null,subMenu:{items:e.items,leaveLeftSpace:!0,preselectIndex:0},quickSwitcherLabel:null})),...a[0].items]}]),a},[t,e,U,K,q,R,j,B,H,W,M,G,Z,Q,$.size,z,D,L,N,V,F,r])};let M=e=>{var t;return null!==e.quickSwitcherLabel?e.quickSwitcherLabel:"string"==typeof e.label?e.label:null==(t=e.label)?void 0:t.toString()},F=(e,t,r)=>e.subMenu?e.subMenu.items.map(i=>"divider"===i.type?null:F(i,t,[...r,M(e)])).flat(1).filter(o.NoReactInternals.truthy):[{type:"menu-item",id:e.id,onSelected:()=>{t(null),e.onClick(e.id,null)},title:[...r,M(e)].join(": ")}];r.makeSearchResults=(e,t)=>e.map(e=>e.items.map(e=>"divider"===e.type?null:F(e,t,[]))).flat(1/0).filter(o.NoReactInternals.truthy)},439949,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.MenuItem=void 0;let a=e.r(222260),n=e.r(853987),o=e.r(347540),s=i(e.r(149579)),l=e.r(921224),u=e.r(260240),c=e.r(67405),d=e.r(494296),p=e.r(414321),f=e.r(490586),h={fontSize:13,color:"white",paddingLeft:10,paddingRight:10,cursor:"default",paddingTop:8,paddingBottom:8,userSelect:"none",WebkitUserSelect:"none",border:"none"};r.MenuItem=({label:e,selected:t,id:r,onItemSelected:i,onItemHovered:m,onItemQuit:g,onPreviousMenu:v,onNextMenu:y,menu:b})=>{let[x,w]=(0,o.useState)(!1),S=(0,o.useRef)(null),k=n.PlayerInternals.useElementSize(S,{triggerOnWindowResize:!0,shouldApplyCssTransforms:!0}),{tabIndex:C,currentZIndex:E}=(0,u.useZIndex)(),_=(0,o.useMemo)(()=>({...h,backgroundColor:(0,l.getBackgroundFromHoverState)({hovered:x,selected:t})}),[x,t]),T=(0,o.useMemo)(()=>t&&k?{...f.menuContainerTowardsBottom,left:k.left,top:k.top+k.height}:null,[t,k]),P=(0,o.useCallback)(()=>{m(r),w(!0)},[r,m]),I=(0,o.useCallback)(()=>{w(!1)},[]),A=(0,o.useCallback)(e=>{0===e.button&&(i(r),window.addEventListener("pointerup",e=>{(0,d.isMenuItem)(e.target)||g()},{once:!0}))},[r,g,i]),O=(0,o.useCallback)(e=>{e.stopPropagation(),0===e.detail&&i(e=>null===e?r:null)},[r,i]),M=(0,o.useMemo)(()=>{var e,t;return{...f.outerPortal,top:(null!=(e=null==k?void 0:k.top)?e:0)+(null!=(t=null==k?void 0:k.height)?t:0)}},[k]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{ref:S,role:"button",tabIndex:C,onPointerEnter:P,onPointerLeave:I,onPointerDown:A,onClick:O,style:_,type:"button",className:d.MENU_INITIATOR_CLASSNAME,children:e}),T?s.default.createPortal((0,a.jsx)("div",{className:"css-reset",style:M,children:(0,a.jsx)(u.HigherZIndex,{onEscape:g,onOutsideClick:g,children:(0,a.jsx)("div",{style:T,children:(0,a.jsx)(c.MenuContent,{onNextMenu:v,onPreviousMenu:y,values:b.items,onHide:g,leaveLeftSpace:b.leaveLeftPadding,preselectIndex:!1,topItemCanBeUnselected:!0,fixedHeight:null})})})}),(0,p.getPortal)(E)):null]})}},523018,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OpenEditorButton=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(239203),s=e.r(412361),l=e.r(277984),u={width:11,height:11},c={border:"none",height:"20px",display:"flex",paddingInline:"6px",justifyContent:"center",alignItems:"center"};r.OpenEditorButton=({type:e})=>{let[t,r]=(0,a.useState)(!1),d=(0,a.useMemo)(()=>t?"white":n.LIGHT_TEXT,[t]),p=(0,a.useCallback)(async()=>{if("editor"===e&&await (0,s.openInEditor)({originalFileName:`${window.remotion_cwd}`,originalLineNumber:1,originalColumnNumber:1,originalFunctionName:null,originalScriptCode:null}).then(e=>e.json()).then(({success:e})=>{e||(0,l.showNotification)(`Could not open ${window.remotion_editorName}`,2e3)}).catch(e=>{console.error(e),(0,l.showNotification)(`Could not open ${window.remotion_editorName}`,2e3)}),"git"===e){if(!window.remotion_gitSource)throw Error("No git source");window.open((0,o.getGitSourceBranchUrl)(window.remotion_gitSource),"_blank")}},[e]),f="git"===e?`Open ${(0,o.getGitSourceName)(window.remotion_gitSource)} Repo`:`Open in ${window.remotion_editorName}`,h=(0,i.jsx)("svg",{viewBox:"0 0 512 512",style:u,children:(0,i.jsx)("path",{fill:d,d:"M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32h82.7L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3V192c0 17.7 14.3 32 32 32s32-14.3 32-32V32c0-17.7-14.3-32-32-32H320zM80 32C35.8 32 0 67.8 0 112V432c0 44.2 35.8 80 80 80H400c44.2 0 80-35.8 80-80V320c0-17.7-14.3-32-32-32s-32 14.3-32 32V432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16H192c17.7 0 32-14.3 32-32s-14.3-32-32-32H80z"})}),m=(0,a.useCallback)(()=>{r(!0)},[]),g=(0,a.useCallback)(()=>{r(!1)},[]);return(0,i.jsx)("button",{title:f,type:"button",onPointerEnter:m,onPointerLeave:g,style:c,onClick:p,children:h})}},419004,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MenuBuildIndicator=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(850586),o=e.r(523018),s=e.r(444732),l=e.r(146575),u={fontSize:13,opacity:.8,display:"flex",alignItems:"center",justifyContent:"center"},c={position:"relative",width:14,marginTop:4},d={position:"relative",width:14};r.MenuBuildIndicator=()=>{let[e,t]=(0,a.useState)(!1),r=(0,a.useContext)(n.StudioServerConnectionCtx).previewServerState,p=window.remotion_editorName&&"connected"===r.type;return(0,a.useEffect)(()=>(window.remotion_isBuilding=()=>{t(!0)},window.remotion_finishedBuilding=()=>{t(!1)},()=>{window.remotion_isBuilding=void 0,window.remotion_finishedBuilding=void 0}),[]),(0,i.jsxs)("div",{style:u,title:window.remotion_cwd,children:[p?(0,i.jsx)(l.Spacing,{x:2}):null,e?(0,i.jsx)("div",{style:c,children:(0,i.jsx)(s.Spinner,{duration:.5,size:14})}):(0,i.jsx)("div",{style:d}),p?(0,i.jsx)(l.Spacing,{x:.5}):null,window.remotion_projectName,p?(0,i.jsx)(l.Spacing,{x:.25}):null,p?(0,i.jsx)(o.OpenEditorButton,{type:"editor"}):window.remotion_gitSource?(0,i.jsx)(o.OpenEditorButton,{type:"git"}):null]})}},336961,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useBreakpoint=function(e){let[t,r]=(0,i.useState)(window.innerWidth<e);return(0,i.useEffect)(()=>{function t(){r(window.innerWidth<e)}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[e]),t};let i=e.r(347540)},959569,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Overlay=r.setErrorsRef=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(521098),s=e.r(82790);r.setErrorsRef=(0,a.createRef)(),r.Overlay=()=>{let[e,t]=(0,a.useState)({type:"clear"}),l=(0,a.useCallback)(e=>{t(t=>"errors"===t.type?t.errors.some(t=>t.stack===e.stack&&t.message===e.message)?t:{...t,errors:[...t.errors,e]}:{type:"errors",errors:[e]})},[]);return((0,a.useImperativeHandle)(r.setErrorsRef,()=>({setErrors:t,addError:l}),[l]),"clear"===e.type||0===e.errors.length)?null:(0,i.jsx)(o.KeybindingContextProvider,{children:(0,i.jsx)(n.AbsoluteFill,{style:{backgroundColor:"#1f2428",overflow:"auto",color:"white"},children:e.errors.map((e,t)=>{var r;return(0,i.jsx)(s.ErrorLoader,{keyboardShortcuts:0===t,error:e,onRetry:null,canHaveDismissButton:!0,calculateMetadata:!1},(null!=(r=e.stack)?r:"")+t)})})})}},994478,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.massageWarning=function(e,t){let r,i,a=e.split("\n").filter(e=>!e.match(/^\s*in/)).join("\n"),n="";for(let e=0;e<t.length;++e){let{fileName:a,lineNumber:o}=t[e];if(null===a||null==o||void 0===a||a===r&&"number"==typeof o&&"number"==typeof i&&3>Math.abs(o-i))continue;r=a,i=o;let{name:s}=t[e];s=s||"(anonymous function)",n+=`in ${s} (at ${a}:${o})
`}return{message:a,stack:n}}},409277,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.unregisterReactStack=r.registerReactStack=r.permanentRegister=void 0;let i=[];r.registerReactStack=()=>{"u">typeof console&&(console.reactStack=e=>i.push(e),console.reactStackEnd=()=>i.pop())},r.unregisterReactStack=()=>{"u">typeof console&&(console.reactStack=void 0,console.reactStackEnd=void 0)},r.permanentRegister=function(e,t){if("u">typeof console){let r=console[e];"function"==typeof r&&(console[e]=function(...e){try{let r=e[0];"string"==typeof r&&i.length>0&&t({type:"webpack-error",message:r,frames:i[i.length-1]}),r instanceof Error&&t({type:"build-error",error:r})}catch(e){setTimeout(()=>{throw e})}return r.apply(this,e)})}}},843335,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.register=function(e=50){if(!i)try{a=Error.stackTraceLimit,Error.stackTraceLimit=e,i=!0}catch(e){}},r.unregister=function(){if(i)try{Error.stackTraceLimit=a,i=!1}catch(e){}};let i=!1,a=10},871275,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.register=function(e,t){null===i&&(i=a.bind(void 0,t),e.addEventListener("error",i))},r.unregister=function(e){null!==i&&(e.removeEventListener("error",i),i=null)};let i=null;function a(e,t){if(!t.error)return;let{error:r}=t;e(r instanceof Error?r:Error(r))}},99651,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.register=function(e,t){null===i&&(i=a.bind(void 0,t),e.addEventListener("unhandledrejection",i))},r.unregister=function(e){null!==i&&(e.removeEventListener("unhandledrejection",i),i=null)};let i=null;function a(e,t){if(!(null==t?void 0:t.reason))return e(Error("Unknown"));let{reason:r}=t;return e(r instanceof Error?r:Error(r))}},39126,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.resolveFileSource=void 0,r.resolveFileSource=async(e,t)=>{let r=await fetch(`/api/file-source?f=${encodeURIComponent(e.fileName)}`),i=(await r.text()).split("\n").map((e,t)=>[t+1,e]).filter(([r])=>Math.abs(r-e.lineNumber)<=t).map(([t,r])=>({content:r,highlight:e.lineNumber===t,lineNumber:t}));return{originalColumnNumber:e.columnNumber,originalFunctionName:null,originalFileName:e.fileName,originalLineNumber:e.lineNumber,originalScriptCode:i}}},146750,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.makeStackFrame=void 0,r.makeStackFrame=({functionName:e,fileName:t,lineNumber:r,columnNumber:i})=>(e&&0===e.indexOf("Object.")&&(e=e.slice(7)),"friendlySyntaxErrorLabel"!==e&&"exports.__esModule"!==e&&"<anonymous>"!==e&&e||(e=null),{columnNumber:i,fileName:t,functionName:e,lineNumber:r})},979754,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseError=void 0,r.parseStack=c;let i=e.r(213637),a=e.r(39126),n=e.r(146750),o=/\(?(.+?)(?::(\d+))?(?::(\d+))?\)?$/;function s(e){let t=o.exec(e);if(!t)throw Error("Could not match in extractLocation");return t.slice(1).map(e=>{let t=Number(e);return isNaN(t)?e:t})}let l=/^\s*(at|in)\s.+(:\d+)/,u=/(^|@)\S+:\d+|.+line\s+\d+\s+>\s+(eval|Function).+/;function c(e){return e.filter(e=>l.test(e)||u.test(e)).map(e=>{if(u.test(e)){let t=!1;/ > (eval|Function)/.test(e)&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > (eval|Function):\d+:\d+/g,":$1"),t=!0);let r=e.split(/[@]/g),i=r.pop();if(!i)throw Error("could not get last");let[a,o,l]=s(i);return(0,n.makeStackFrame)({functionName:r.join("@")||(t?"eval":null),fileName:a,lineNumber:o,columnNumber:l})}-1!==e.indexOf("(eval ")&&(e=e.replace(/(\(eval at [^()]*)|(\),.*$)/g,"")),-1!==e.indexOf("(at ")&&(e=e.replace(/\(at /,"("));let t=e.trim().split(/\s+/g).slice(1),r=t.pop();if(!r)throw Error("could not get last");let[i,a,o]=s(r);return(0,n.makeStackFrame)({functionName:t.join(" ")||null,fileName:i,lineNumber:a,columnNumber:o})})}r.parseError=async(e,t)=>{if(null===e)throw Error("You cannot pass a null object.");if("string"==typeof e)return c(e.split("\n")).map(e=>({type:"transpiled",frame:e}));if(Array.isArray(e))return c(e).map(e=>({type:"transpiled",frame:e}));let r=(0,i.getLocationFromBuildError)(e);return r?[{type:"symbolicated",frame:await (0,a.resolveFileSource)(r,t)}]:"string"==typeof e.stack?c(e.stack.split("\n")).map(e=>({type:"transpiled",frame:e})):[]}},604403,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getLinesAround=function(e,t,r){let i=[];for(let a=Math.max(0,e-1-t);a<=Math.min(r.length-1,e-1+t);++a)i.push({lineNumber:a+1,content:r[a],highlight:a===e-1});return i}},754369,(e,t,r)=>{let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");r.encode=function(e){if(0<=e&&e<i.length)return i[e];throw TypeError("Must be between 0 and 63: "+e)}},456750,(e,t,r)=>{let i=e.r(754369);r.encode=function(e){let t,r="",a=e<0?(-e<<1)+1:(e<<1)+0;do t=31&a,(a>>>=5)>0&&(t|=32),r+=i.encode(t);while(a>0)return r}},302073,(e,t,r)=>{var i;let a;r.getArg=function(e,t,r){if(t in e)return e[t];if(3==arguments.length)return r;throw Error('"'+t+'" is a required argument.')};let n=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,o=/^data:.+\,.+$/;function s(e){let t=e.match(n);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function l(e){let t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}r.urlParse=s,r.urlGenerate=l;let u=(i=function(e){let t=e,i=s(e);if(i){if(!i.path)return e;t=i.path}let a=r.isAbsolute(t),n=[],o=0,u=0;for(;;){if(o=u,-1===(u=t.indexOf("/",o))){n.push(t.slice(o));break}for(n.push(t.slice(o,u));u<t.length&&"/"===t[u];)u++}let c=0;for(u=n.length-1;u>=0;u--){let e=n[u];"."===e?n.splice(u,1):".."===e?c++:c>0&&(""===e?(n.splice(u+1,c),c=0):(n.splice(u,2),c--))}return(""===(t=n.join("/"))&&(t=a?"/":"."),i)?(i.path=t,l(i)):t},a=[],function(e){for(let t=0;t<a.length;t++)if(a[t].input===e){let e=a[0];return a[0]=a[t],a[t]=e,a[0].result}let t=i(e);return a.unshift({input:e,result:t}),a.length>32&&a.pop(),t});function c(e,t){""===e&&(e="."),""===t&&(t=".");let r=s(t),i=s(e);if(i&&(e=i.path||"/"),r&&!r.scheme)return i&&(r.scheme=i.scheme),l(r);if(r||t.match(o))return t;if(i&&!i.host&&!i.path)return i.host=t,l(i);let a="/"===t.charAt(0)?t:u(e.replace(/\/+$/,"")+"/"+t);return i?(i.path=a,l(i)):a}r.normalize=u,r.join=c,r.isAbsolute=function(e){return"/"===e.charAt(0)||n.test(e)},r.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");let r=0;for(;0!==t.indexOf(e+"/");){let i=e.lastIndexOf("/");if(i<0||(e=e.slice(0,i)).match(/^([^\/]+:\/)?\/*$/))return t;++r}return Array(r+1).join("../")+t.substr(e.length+1)};let d=!("__proto__"in Object.create(null));function p(e){return e}function f(e){if(!e)return!1;let t=e.length;if(t<9||95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(let r=t-10;r>=0;r--)if(36!==e.charCodeAt(r))return!1;return!0}function h(e,t){return e===t?0:null===e?1:null===t?-1:e>t?1:-1}r.toSetString=d?p:function(e){return f(e)?"$"+e:e},r.fromSetString=d?p:function(e){return f(e)?e.slice(1):e},r.compareByOriginalPositions=function(e,t,r){let i=h(e.source,t.source);return 0!==i||0!=(i=e.originalLine-t.originalLine)||0!=(i=e.originalColumn-t.originalColumn)||r||0!=(i=e.generatedColumn-t.generatedColumn)||0!=(i=e.generatedLine-t.generatedLine)?i:h(e.name,t.name)},r.compareByGeneratedPositionsDeflated=function(e,t,r){let i=e.generatedLine-t.generatedLine;return 0!==i||0!=(i=e.generatedColumn-t.generatedColumn)||r||0!==(i=h(e.source,t.source))||0!=(i=e.originalLine-t.originalLine)||0!=(i=e.originalColumn-t.originalColumn)?i:h(e.name,t.name)},r.compareByGeneratedPositionsInflated=function(e,t){let r=e.generatedLine-t.generatedLine;return 0!==r||0!=(r=e.generatedColumn-t.generatedColumn)||0!==(r=h(e.source,t.source))||0!=(r=e.originalLine-t.originalLine)||0!=(r=e.originalColumn-t.originalColumn)?r:h(e.name,t.name)},r.parseSourceMapInput=function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},r.computeSourceURL=function(e,t,r){if(t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t),r){let e=s(r);if(!e)throw Error("sourceMapURL could not be parsed");if(e.path){let t=e.path.lastIndexOf("/");t>=0&&(e.path=e.path.substring(0,t+1))}t=c(l(e),t)}return u(t)}},101777,(e,t,r)=>{class i{constructor(){this._array=[],this._set=new Map}static fromArray(e,t){let r=new i;for(let i=0,a=e.length;i<a;i++)r.add(e[i],t);return r}size(){return this._set.size}add(e,t){let r=this.has(e),i=this._array.length;(!r||t)&&this._array.push(e),r||this._set.set(e,i)}has(e){return this._set.has(e)}indexOf(e){let t=this._set.get(e);if(t>=0)return t;throw Error('"'+e+'" is not in the set.')}at(e){if(e>=0&&e<this._array.length)return this._array[e];throw Error("No element indexed by "+e)}toArray(){return this._array.slice()}}r.ArraySet=i},934217,(e,t,r)=>{let i=e.r(302073);r.MappingList=class{constructor(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}unsortedForEach(e,t){this._array.forEach(e,t)}add(e){var t;let r,a,n,o;(t=this._last,r=t.generatedLine,a=e.generatedLine,n=t.generatedColumn,o=e.generatedColumn,a>r||a==r&&o>=n||0>=i.compareByGeneratedPositionsInflated(t,e))?this._last=e:this._sorted=!1,this._array.push(e)}toArray(){return this._sorted||(this._array.sort(i.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}}},128107,(e,t,r)=>{let i=e.r(456750),a=e.r(302073),n=e.r(101777).ArraySet,o=e.r(934217).MappingList;class s{constructor(e){e||(e={}),this._file=a.getArg(e,"file",null),this._sourceRoot=a.getArg(e,"sourceRoot",null),this._skipValidation=a.getArg(e,"skipValidation",!1),this._sources=new n,this._names=new n,this._mappings=new o,this._sourcesContents=null}static fromSourceMap(e){let t=e.sourceRoot,r=new s({file:e.file,sourceRoot:t});return e.eachMapping(function(e){let i={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(i.source=e.source,null!=t&&(i.source=a.relative(t,i.source)),i.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(i.name=e.name)),r.addMapping(i)}),e.sources.forEach(function(i){let n=i;null!==t&&(n=a.relative(t,i)),r._sources.has(n)||r._sources.add(n);let o=e.sourceContentFor(i);null!=o&&r.setSourceContent(i,o)}),r}addMapping(e){let t=a.getArg(e,"generated"),r=a.getArg(e,"original",null),i=a.getArg(e,"source",null),n=a.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,r,i,n),null!=i&&(i=String(i),this._sources.has(i)||this._sources.add(i)),null!=n&&(n=String(n),this._names.has(n)||this._names.add(n)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=r&&r.line,originalColumn:null!=r&&r.column,source:i,name:n})}setSourceContent(e,t){let r=e;null!=this._sourceRoot&&(r=a.relative(this._sourceRoot,r)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[a.toSetString(r)]=t):this._sourcesContents&&(delete this._sourcesContents[a.toSetString(r)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))}applySourceMap(e,t,r){let i=t;if(null==t){if(null==e.file)throw Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');i=e.file}let o=this._sourceRoot;null!=o&&(i=a.relative(o,i));let s=this._mappings.toArray().length>0?new n:this._sources,l=new n;this._mappings.unsortedForEach(function(t){if(t.source===i&&null!=t.originalLine){let i=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=i.source&&(t.source=i.source,null!=r&&(t.source=a.join(r,t.source)),null!=o&&(t.source=a.relative(o,t.source)),t.originalLine=i.line,t.originalColumn=i.column,null!=i.name&&(t.name=i.name))}let n=t.source;null==n||s.has(n)||s.add(n);let u=t.name;null==u||l.has(u)||l.add(u)},this),this._sources=s,this._names=l,e.sources.forEach(function(t){let i=e.sourceContentFor(t);null!=i&&(null!=r&&(t=a.join(r,t)),null!=o&&(t=a.relative(o,t)),this.setSourceContent(t,i))},this)}_validateMapping(e,t,r,i){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!t&&!r&&!i);else if(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&r);else throw Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:t,name:i}))}_serializeMappings(){let e,t,r,n,o=0,s=1,l=0,u=0,c=0,d=0,p="",f=this._mappings.toArray();for(let h=0,m=f.length;h<m;h++){if(t=f[h],e="",t.generatedLine!==s)for(o=0;t.generatedLine!==s;)e+=";",s++;else if(h>0){if(!a.compareByGeneratedPositionsInflated(t,f[h-1]))continue;e+=","}e+=i.encode(t.generatedColumn-o),o=t.generatedColumn,null!=t.source&&(n=this._sources.indexOf(t.source),e+=i.encode(n-d),d=n,e+=i.encode(t.originalLine-1-u),u=t.originalLine-1,e+=i.encode(t.originalColumn-l),l=t.originalColumn,null!=t.name&&(r=this._names.indexOf(t.name),e+=i.encode(r-c),c=r)),p+=e}return p}_generateSourcesContent(e,t){return e.map(function(e){if(!this._sourcesContents)return null;null!=t&&(e=a.relative(t,e));let r=a.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,r)?this._sourcesContents[r]:null},this)}toJSON(){let e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e}toString(){return JSON.stringify(this.toJSON())}}s.prototype._version=3,r.SourceMapGenerator=s},878400,(e,t,r)=>{r.GREATEST_LOWER_BOUND=1,r.LEAST_UPPER_BOUND=2,r.search=function(e,t,i,a){if(0===t.length)return -1;let n=function e(t,i,a,n,o,s){let l=Math.floor((i-t)/2)+t,u=o(a,n[l],!0);return 0===u?l:u>0?i-l>1?e(l,i,a,n,o,s):s==r.LEAST_UPPER_BOUND?i<n.length?i:-1:l:l-t>1?e(t,l,a,n,o,s):s==r.LEAST_UPPER_BOUND?l:t<0?-1:t}(-1,t.length,e,t,i,a||r.GREATEST_LOWER_BOUND);if(n<0)return -1;for(;n-1>=0&&0===i(t[n],t[n-1],!0);)--n;return n}},919724,(e,t,r)=>{if("function"==typeof fetch){let e=null;t.exports=function(){if("string"!=typeof e)throw Error("You must provide the URL of lib/mappings.wasm by calling SourceMapConsumer.initialize({ 'lib/mappings.wasm': ... }) before using SourceMapConsumer");return fetch(e).then(e=>e.arrayBuffer())},t.exports.initialize=t=>e=t}else{let r=e.r(522734),i=e.r(814747);t.exports=function(){return new Promise((e,t)=>{let a=i.join("/ROOT/node_modules/source-map/lib","mappings.wasm");r.readFile(a,null,(r,i)=>{r?t(r):e(i.buffer)})})},t.exports.initialize=e=>{console.debug("SourceMapConsumer.initialize is a no-op when running in node.js")}}},929167,(e,t,r)=>{let i=e.r(919724);function a(){this.generatedLine=0,this.generatedColumn=0,this.lastGeneratedColumn=null,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}let n=null;t.exports=function(){if(n)return n;let e=[];return n=i().then(t=>WebAssembly.instantiate(t,{env:{mapping_callback(t,r,i,n,o,s,l,u,c,d){let p=new a;p.generatedLine=t+1,p.generatedColumn=r,i&&(p.lastGeneratedColumn=n-1),o&&(p.source=s,p.originalLine=l+1,p.originalColumn=u,c&&(p.name=d)),e[e.length-1](p)},start_all_generated_locations_for(){console.time("all_generated_locations_for")},end_all_generated_locations_for(){console.timeEnd("all_generated_locations_for")},start_compute_column_spans(){console.time("compute_column_spans")},end_compute_column_spans(){console.timeEnd("compute_column_spans")},start_generated_location_for(){console.time("generated_location_for")},end_generated_location_for(){console.timeEnd("generated_location_for")},start_original_location_for(){console.time("original_location_for")},end_original_location_for(){console.timeEnd("original_location_for")},start_parse_mappings(){console.time("parse_mappings")},end_parse_mappings(){console.timeEnd("parse_mappings")},start_sort_by_generated_location(){console.time("sort_by_generated_location")},end_sort_by_generated_location(){console.timeEnd("sort_by_generated_location")},start_sort_by_original_location(){console.time("sort_by_original_location")},end_sort_by_original_location(){console.timeEnd("sort_by_original_location")}}})).then(t=>({exports:t.instance.exports,withMappingCallback:(t,r)=>{e.push(t);try{r()}finally{e.pop()}}})).then(null,e=>{throw n=null,e})}},199663,(e,t,r)=>{let i=e.r(302073),a=e.r(878400),n=e.r(101777).ArraySet;e.r(456750);let o=e.r(919724),s=e.r(929167),l=Symbol("smcInternal");class u{constructor(e,t){if(e==l)return Promise.resolve(this);return function(e,t){let r=e;return"string"==typeof e&&(r=i.parseSourceMapInput(e)),Promise.resolve(null!=r.sections?new d(r,t):new c(r,t))}(e,t)}static initialize(e){o.initialize(e["lib/mappings.wasm"])}static fromSourceMap(e,t){var r,i;return r=e,i=t,c.fromSourceMap(r,i)}static with(e,t,r){let i=null;return new u(e,t).then(e=>(i=e,r(e))).then(e=>(i&&i.destroy(),e),e=>{throw i&&i.destroy(),e})}_parseMappings(e,t){throw Error("Subclasses must implement _parseMappings")}eachMapping(e,t,r){throw Error("Subclasses must implement eachMapping")}allGeneratedPositionsFor(e){throw Error("Subclasses must implement allGeneratedPositionsFor")}destroy(){throw Error("Subclasses must implement destroy")}}u.prototype._version=3,u.GENERATED_ORDER=1,u.ORIGINAL_ORDER=2,u.GREATEST_LOWER_BOUND=1,u.LEAST_UPPER_BOUND=2,r.SourceMapConsumer=u;class c extends u{constructor(e,t){return super(l).then(r=>{let a=e;"string"==typeof e&&(a=i.parseSourceMapInput(e));let o=i.getArg(a,"version"),l=i.getArg(a,"sources"),u=i.getArg(a,"names",[]),c=i.getArg(a,"sourceRoot",null),d=i.getArg(a,"sourcesContent",null),p=i.getArg(a,"mappings"),f=i.getArg(a,"file",null);if(o!=r._version)throw Error("Unsupported version: "+o);return c&&(c=i.normalize(c)),l=l.map(String).map(i.normalize).map(function(e){return c&&i.isAbsolute(c)&&i.isAbsolute(e)?i.relative(c,e):e}),r._names=n.fromArray(u.map(String),!0),r._sources=n.fromArray(l,!0),r._absoluteSources=r._sources.toArray().map(function(e){return i.computeSourceURL(c,e,t)}),r.sourceRoot=c,r.sourcesContent=d,r._mappings=p,r._sourceMapURL=t,r.file=f,r._computedColumnSpans=!1,r._mappingsPtr=0,r._wasm=null,s().then(e=>(r._wasm=e,r))})}_findSourceIndex(e){let t=e;if(null!=this.sourceRoot&&(t=i.relative(this.sourceRoot,t)),this._sources.has(t))return this._sources.indexOf(t);for(let t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==e)return t;return -1}static fromSourceMap(e,t){return new c(e.toString())}get sources(){return this._absoluteSources.slice()}_getMappingsPtr(){return 0===this._mappingsPtr&&this._parseMappings(this._mappings,this.sourceRoot),this._mappingsPtr}_parseMappings(e,t){let r=e.length,i=this._wasm.exports.allocate_mappings(r),a=new Uint8Array(this._wasm.exports.memory.buffer,i,r);for(let t=0;t<r;t++)a[t]=e.charCodeAt(t);let n=this._wasm.exports.parse_mappings(i);if(!n){let e=this._wasm.exports.get_last_error(),t=`Error parsing mappings (code ${e}): `;switch(e){case 1:t+="the mappings contained a negative line, column, source index, or name index";break;case 2:t+="the mappings contained a number larger than 2**32";break;case 3:t+="reached EOF while in the middle of parsing a VLQ";break;case 4:t+="invalid base 64 character while parsing a VLQ";break;default:t+="unknown error code"}throw Error(t)}this._mappingsPtr=n}eachMapping(e,t,r){let a=t||null,n=r||u.GENERATED_ORDER,o=this.sourceRoot;this._wasm.withMappingCallback(t=>{null!==t.source&&(t.source=this._sources.at(t.source),t.source=i.computeSourceURL(o,t.source,this._sourceMapURL),null!==t.name&&(t.name=this._names.at(t.name))),e.call(a,t)},()=>{switch(n){case u.GENERATED_ORDER:this._wasm.exports.by_generated_location(this._getMappingsPtr());break;case u.ORIGINAL_ORDER:this._wasm.exports.by_original_location(this._getMappingsPtr());break;default:throw Error("Unknown order of iteration.")}})}allGeneratedPositionsFor(e){let t=i.getArg(e,"source"),r=i.getArg(e,"line"),a=e.column||0;if((t=this._findSourceIndex(t))<0)return[];if(r<1)throw Error("Line numbers must be >= 1");if(a<0)throw Error("Column numbers must be >= 0");let n=[];return this._wasm.withMappingCallback(e=>{let t=e.lastGeneratedColumn;this._computedColumnSpans&&null===t&&(t=1/0),n.push({line:e.generatedLine,column:e.generatedColumn,lastColumn:t})},()=>{this._wasm.exports.all_generated_locations_for(this._getMappingsPtr(),t,r-1,"column"in e,a)}),n}destroy(){0!==this._mappingsPtr&&(this._wasm.exports.free_mappings(this._mappingsPtr),this._mappingsPtr=0)}computeColumnSpans(){this._computedColumnSpans||(this._wasm.exports.compute_column_spans(this._getMappingsPtr()),this._computedColumnSpans=!0)}originalPositionFor(e){let t,r={generatedLine:i.getArg(e,"line"),generatedColumn:i.getArg(e,"column")};if(r.generatedLine<1)throw Error("Line numbers must be >= 1");if(r.generatedColumn<0)throw Error("Column numbers must be >= 0");let a=i.getArg(e,"bias",u.GREATEST_LOWER_BOUND);if(null==a&&(a=u.GREATEST_LOWER_BOUND),this._wasm.withMappingCallback(e=>t=e,()=>{this._wasm.exports.original_location_for(this._getMappingsPtr(),r.generatedLine-1,r.generatedColumn,a)}),t&&t.generatedLine===r.generatedLine){let e=i.getArg(t,"source",null);null!==e&&(e=this._sources.at(e),e=i.computeSourceURL(this.sourceRoot,e,this._sourceMapURL));let r=i.getArg(t,"name",null);return null!==r&&(r=this._names.at(r)),{source:e,line:i.getArg(t,"originalLine",null),column:i.getArg(t,"originalColumn",null),name:r}}return{source:null,line:null,column:null,name:null}}hasContentsOfAllSources(){return!!this.sourcesContent&&this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e})}sourceContentFor(e,t){let r;if(!this.sourcesContent)return null;let a=this._findSourceIndex(e);if(a>=0)return this.sourcesContent[a];let n=e;if(null!=this.sourceRoot&&(n=i.relative(this.sourceRoot,n)),null!=this.sourceRoot&&(r=i.urlParse(this.sourceRoot))){let e=n.replace(/^file:\/\//,"");if("file"==r.scheme&&this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];if((!r.path||"/"==r.path)&&this._sources.has("/"+n))return this.sourcesContent[this._sources.indexOf("/"+n)]}if(t)return null;throw Error('"'+n+'" is not in the SourceMap.')}generatedPositionFor(e){let t,r=i.getArg(e,"source");if((r=this._findSourceIndex(r))<0)return{line:null,column:null,lastColumn:null};let a={source:r,originalLine:i.getArg(e,"line"),originalColumn:i.getArg(e,"column")};if(a.originalLine<1)throw Error("Line numbers must be >= 1");if(a.originalColumn<0)throw Error("Column numbers must be >= 0");let n=i.getArg(e,"bias",u.GREATEST_LOWER_BOUND);if(null==n&&(n=u.GREATEST_LOWER_BOUND),this._wasm.withMappingCallback(e=>t=e,()=>{this._wasm.exports.generated_location_for(this._getMappingsPtr(),a.source,a.originalLine-1,a.originalColumn,n)}),t&&t.source===a.source){let e=t.lastGeneratedColumn;return this._computedColumnSpans&&null===e&&(e=1/0),{line:i.getArg(t,"generatedLine",null),column:i.getArg(t,"generatedColumn",null),lastColumn:e}}return{line:null,column:null,lastColumn:null}}}c.prototype.consumer=u,r.BasicSourceMapConsumer=c;class d extends u{constructor(e,t){return super(l).then(r=>{let a=e;"string"==typeof e&&(a=i.parseSourceMapInput(e));let o=i.getArg(a,"version"),s=i.getArg(a,"sections");if(o!=r._version)throw Error("Unsupported version: "+o);r._sources=new n,r._names=new n,r.__generatedMappings=null,r.__originalMappings=null,r.__generatedMappingsUnsorted=null,r.__originalMappingsUnsorted=null;let l={line:-1,column:0};return Promise.all(s.map(e=>{if(e.url)throw Error("Support for url field in sections not implemented.");let r=i.getArg(e,"offset"),a=i.getArg(r,"line"),n=i.getArg(r,"column");if(a<l.line||a===l.line&&n<l.column)throw Error("Section offsets must be ordered and non-overlapping.");return l=r,new u(i.getArg(e,"map"),t).then(e=>({generatedOffset:{generatedLine:a+1,generatedColumn:n+1},consumer:e}))})).then(e=>(r._sections=e,r))})}get _generatedMappings(){return this.__generatedMappings||this._sortGeneratedMappings(),this.__generatedMappings}get _originalMappings(){return this.__originalMappings||this._sortOriginalMappings(),this.__originalMappings}get _generatedMappingsUnsorted(){return this.__generatedMappingsUnsorted||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappingsUnsorted}get _originalMappingsUnsorted(){return this.__originalMappingsUnsorted||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappingsUnsorted}_sortGeneratedMappings(){let e=this._generatedMappingsUnsorted;e.sort(i.compareByGeneratedPositionsDeflated),this.__generatedMappings=e}_sortOriginalMappings(){let e=this._originalMappingsUnsorted;e.sort(i.compareByOriginalPositions),this.__originalMappings=e}get sources(){let e=[];for(let t=0;t<this._sections.length;t++)for(let r=0;r<this._sections[t].consumer.sources.length;r++)e.push(this._sections[t].consumer.sources[r]);return e}originalPositionFor(e){let t={generatedLine:i.getArg(e,"line"),generatedColumn:i.getArg(e,"column")},r=a.search(t,this._sections,function(e,t){let r=e.generatedLine-t.generatedOffset.generatedLine;return r||e.generatedColumn-t.generatedOffset.generatedColumn}),n=this._sections[r];return n?n.consumer.originalPositionFor({line:t.generatedLine-(n.generatedOffset.generatedLine-1),column:t.generatedColumn-(n.generatedOffset.generatedLine===t.generatedLine?n.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}}hasContentsOfAllSources(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})}sourceContentFor(e,t){for(let t=0;t<this._sections.length;t++){let r=this._sections[t].consumer.sourceContentFor(e,!0);if(r)return r}if(t)return null;throw Error('"'+e+'" is not in the SourceMap.')}generatedPositionFor(e){for(let t=0;t<this._sections.length;t++){let r=this._sections[t];if(-1===r.consumer._findSourceIndex(i.getArg(e,"source")))continue;let a=r.consumer.generatedPositionFor(e);if(a)return{line:a.line+(r.generatedOffset.generatedLine-1),column:a.column+(r.generatedOffset.generatedLine===a.line?r.generatedOffset.generatedColumn-1:0)}}return{line:null,column:null}}_parseMappings(e,t){let r=this.__generatedMappingsUnsorted=[],a=this.__originalMappingsUnsorted=[];for(let e=0;e<this._sections.length;e++){let t=this._sections[e],n=[];t.consumer.eachMapping(e=>n.push(e));for(let e=0;e<n.length;e++){let o=n[e],s=i.computeSourceURL(t.consumer.sourceRoot,null,this._sourceMapURL);this._sources.add(s),s=this._sources.indexOf(s);let l=null;o.name&&(this._names.add(o.name),l=this._names.indexOf(o.name));let u={source:s,generatedLine:o.generatedLine+(t.generatedOffset.generatedLine-1),generatedColumn:o.generatedColumn+(t.generatedOffset.generatedLine===o.generatedLine?t.generatedOffset.generatedColumn-1:0),originalLine:o.originalLine,originalColumn:o.originalColumn,name:l};r.push(u),"number"==typeof u.originalLine&&a.push(u)}}}eachMapping(e,t,r){let a;switch(r||u.GENERATED_ORDER){case u.GENERATED_ORDER:a=this._generatedMappings;break;case u.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw Error("Unknown order of iteration.")}let n=this.sourceRoot;a.map(function(e){let t=null;return null!==e.source&&(t=this._sources.at(e.source),t=i.computeSourceURL(n,t,this._sourceMapURL)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,t||null)}_findMapping(e,t,r,i,n,o){if(e[r]<=0)throw TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[i]<0)throw TypeError("Column must be greater than or equal to 0, got "+e[i]);return a.search(e,t,n,o)}allGeneratedPositionsFor(e){let t=i.getArg(e,"line"),r={source:i.getArg(e,"source"),originalLine:t,originalColumn:i.getArg(e,"column",0)};if(r.source=this._findSourceIndex(r.source),r.source<0)return[];if(r.originalLine<1)throw Error("Line numbers must be >= 1");if(r.originalColumn<0)throw Error("Column numbers must be >= 0");let n=[],o=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",i.compareByOriginalPositions,a.LEAST_UPPER_BOUND);if(o>=0){let r=this._originalMappings[o];if(void 0===e.column){let e=r.originalLine;for(;r&&r.originalLine===e;){let e=r.lastGeneratedColumn;this._computedColumnSpans&&null===e&&(e=1/0),n.push({line:i.getArg(r,"generatedLine",null),column:i.getArg(r,"generatedColumn",null),lastColumn:e}),r=this._originalMappings[++o]}}else{let e=r.originalColumn;for(;r&&r.originalLine===t&&r.originalColumn==e;){let e=r.lastGeneratedColumn;this._computedColumnSpans&&null===e&&(e=1/0),n.push({line:i.getArg(r,"generatedLine",null),column:i.getArg(r,"generatedColumn",null),lastColumn:e}),r=this._originalMappings[++o]}}}return n}destroy(){for(let e=0;e<this._sections.length;e++)this._sections[e].consumer.destroy()}}r.IndexedSourceMapConsumer=d},90603,(e,t,r)=>{let i=e.r(128107).SourceMapGenerator,a=e.r(302073),n=/(\r?\n)/,o="$$$isSourceNode$$$";class s{constructor(e,t,r,i,a){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==r?null:r,this.name=null==a?null:a,this[o]=!0,null!=i&&this.add(i)}static fromStringWithSourceMap(e,t,r){let i,o=new s,l=e.split(n),u=0,c=function(){return e()+(e()||"");function e(){return u<l.length?l[u++]:void 0}},d=1,p=0,f=null;return t.eachMapping(function(e){if(null!==f)if(d<e.generatedLine)h(f,c()),d++,p=0;else{let t=(i=l[u]||"").substr(0,e.generatedColumn-p);l[u]=i.substr(e.generatedColumn-p),p=e.generatedColumn,h(f,t),f=e;return}for(;d<e.generatedLine;)o.add(c()),d++;p<e.generatedColumn&&(i=l[u]||"",o.add(i.substr(0,e.generatedColumn)),l[u]=i.substr(e.generatedColumn),p=e.generatedColumn),f=e},this),u<l.length&&(f&&h(f,c()),o.add(l.splice(u).join(""))),t.sources.forEach(function(e){let i=t.sourceContentFor(e);null!=i&&(null!=r&&(e=a.join(r,e)),o.setSourceContent(e,i))}),o;function h(e,t){if(null===e||void 0===e.source)o.add(t);else{let i=r?a.join(r,e.source):e.source;o.add(new s(e.originalLine,e.originalColumn,i,t,e.name))}}}add(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else if(e[o]||"string"==typeof e)e&&this.children.push(e);else throw TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this}prepend(e){if(Array.isArray(e))for(let t=e.length-1;t>=0;t--)this.prepend(e[t]);else if(e[o]||"string"==typeof e)this.children.unshift(e);else throw TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this}walk(e){let t;for(let r=0,i=this.children.length;r<i;r++)(t=this.children[r])[o]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})}join(e){let t,r,i=this.children.length;if(i>0){for(r=0,t=[];r<i-1;r++)t.push(this.children[r]),t.push(e);t.push(this.children[r]),this.children=t}return this}replaceRight(e,t){let r=this.children[this.children.length-1];return r[o]?r.replaceRight(e,t):"string"==typeof r?this.children[this.children.length-1]=r.replace(e,t):this.children.push("".replace(e,t)),this}setSourceContent(e,t){this.sourceContents[a.toSetString(e)]=t}walkSourceContents(e){for(let t=0,r=this.children.length;t<r;t++)this.children[t][o]&&this.children[t].walkSourceContents(e);let t=Object.keys(this.sourceContents);for(let r=0,i=t.length;r<i;r++)e(a.fromSetString(t[r]),this.sourceContents[t[r]])}toString(){let e="";return this.walk(function(t){e+=t}),e}toStringWithSourceMap(e){let t={code:"",line:1,column:0},r=new i(e),a=!1,n=null,o=null,s=null,l=null;return this.walk(function(e,i){t.code+=e,null!==i.source&&null!==i.line&&null!==i.column?((n!==i.source||o!==i.line||s!==i.column||l!==i.name)&&r.addMapping({source:i.source,original:{line:i.line,column:i.column},generated:{line:t.line,column:t.column},name:i.name}),n=i.source,o=i.line,s=i.column,l=i.name,a=!0):a&&(r.addMapping({generated:{line:t.line,column:t.column}}),n=null,a=!1);for(let o=0,s=e.length;o<s;o++)10===e.charCodeAt(o)?(t.line++,t.column=0,o+1===s?(n=null,a=!1):a&&r.addMapping({source:i.source,original:{line:i.line,column:i.column},generated:{line:t.line,column:t.column},name:i.name})):t.column++}),this.walkSourceContents(function(e,t){r.setSourceContent(e,t)}),{code:t.code,map:r}}}r.SourceNode=s},542591,(e,t,r)=>{r.SourceMapGenerator=e.r(128107).SourceMapGenerator,r.SourceMapConsumer=e.r(199663).SourceMapConsumer,r.SourceNode=e.r(90603).SourceNode},963873,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getOriginalPosition=void 0,r.getSourceMap=a;let i=e.r(542591);async function a(e,t){let r=function(e){let t=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)\s*$/gm,r=null;for(;;){let i=t.exec(e);if(null==i)break;r=i}return(null==r?void 0:r[1])?r[1].toString():null}(t);if(null===r)return null;if(0===r.indexOf("data:")){let e=r.match(/^data:application\/json;([\w=:"-]+;)*base64,/);if(!e)throw Error("Sorry, non-base64 inline source-map encoding is not supported.");let t=window.atob(r.substring(e[0].length));return new i.SourceMapConsumer(JSON.parse(t))}let a=e.lastIndexOf("/"),n=e.substring(0,a+1)+r,o=await fetch(n).then(e=>e.json());return new i.SourceMapConsumer(o)}r.getOriginalPosition=(e,t,r)=>{let i=e.originalPositionFor({line:t,column:r});return{line:i.line,column:i.column,source:i.source}}},479506,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.unmap=r.getFileContents=void 0;let i=e.r(49019),a=e.r(604403),n=e.r(963873);r.getFileContents=async e=>{let t=await fetch(e);return await t.text()};let o=async(e,t)=>{let o=[...new Set(e.filter(e=>"transpiled"===e.type).map(e=>e.frame).map(e=>e.fileName).filter(i.Internals.truthy))],s=await Promise.all(o.map(async e=>{let t=await (0,r.getFileContents)(e);return(0,n.getSourceMap)(e,t)})),l={};for(let e=0;e<o.length;e++)l[o[e]]=s[e];return e.map(e=>{if("symbolicated"===e.type)return e.frame;let r=l[e.frame.fileName];if(!r)return null;let i=(0,n.getOriginalPosition)(r,e.frame.lineNumber,e.frame.columnNumber),{functionName:o}=e.frame,s=null,u=(s=i.source?r.sourceContentFor(i.source,!1):null)&&i.line?(0,a.getLinesAround)(i.line,t,s.split("\n")):null;return{originalColumnNumber:i.column,originalFileName:i.source,originalFunctionName:o,originalLineNumber:i.line,originalScriptCode:u}}).filter(i.Internals.truthy)};r.unmap=o},144404,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getStackFrames=void 0;let i=e.r(979754),a=e.r(479506);r.getStackFrames=async(e,t)=>{let r=await (0,i.parseError)(e,t),n=await (0,a.unmap)(r,t);return 0===n.map(e=>e.originalFileName).filter(e=>null!=e).length?null:n}},623884,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getErrorRecord=void 0,r.listenToRuntimeErrors=function(e){let t=t=>{var r;let a=t.message.startsWith("Rendered fewer hooks")||t.message.startsWith("Rendered more hooks"),n=window.localStorage.getItem("remotion.lastCrashBecauseOfHooks"),o=!!n&&Date.now()-Number(n)<5e3;window.localStorage.setItem("remotion.lastCrashBecauseOfHooks",String(Date.now())),a&&!o?(console.log("Hook order changed. Reloading app..."),window.remotion_unsavedProps=!1,(0,s.reloadUrl)()):(null==(r=i.setErrorsRef.current)||r.addError(t),e())};return(0,l.register)(window,e=>t({message:e.message,stack:e.stack,name:e.name})),(0,u.register)(window,e=>t(e)),(0,o.register)(),(0,n.registerReactStack)(),(0,n.permanentRegister)("error",e=>{if("webpack-error"===e.type){let{message:r,frames:i}=e,n=(0,a.massageWarning)(r,i);t({message:n.message,stack:n.stack,name:""})}"build-error"===e.type&&t(e.error)}),function(){(0,o.unregister)(),(0,u.unregister)(window),(0,l.unregister)(window),(0,n.unregisterReactStack)()}};let i=e.r(959569),a=e.r(994478),n=e.r(409277),o=e.r(843335),s=e.r(910105),l=e.r(871275),u=e.r(99651),c=e.r(144404);r.getErrorRecord=async e=>{let t=await (0,c.getStackFrames)(e,3);return null==t?null:{error:e,contextSize:3,stackFrames:t}}},652693,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Button=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o={border:`1px solid ${n.INPUT_BORDER_COLOR_UNHOVERED}`,borderRadius:4,backgroundColor:n.INPUT_BACKGROUND,appearance:"none",fontFamily:"inherit",fontSize:14,color:"white",flexDirection:"row"};r.Button=(0,a.forwardRef)(({children:e,onClick:t,title:r,disabled:n,style:s,id:l,autoFocus:u,buttonContainerStyle:c},d)=>{let p=(0,a.useMemo)(()=>({...o,...null!=s?s:{}}),[s]),f=(0,a.useMemo)(()=>({padding:10,cursor:n?"inherit":"pointer",fontSize:14,opacity:n?.7:1,...null!=c?c:{}}),[c,n]);return(0,i.jsx)("button",{ref:d,id:l,style:p,type:"button",disabled:n,onClick:t,autoFocus:u,title:r,children:(0,i.jsx)("div",{className:"css-reset",style:f,children:e})})})},815695,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AskOnDiscord=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(652693),o=e.r(362087),s=e.r(597066);r.AskOnDiscord=({canHaveKeyboardShortcuts:e})=>{let t=(0,a.useCallback)(()=>{window.open("https://remotion.dev/discord","_blank")},[]),{registerKeybinding:r}=(0,o.useKeybinding)();return(0,a.useEffect)(()=>{if(!e)return;let{unregister:i}=r({event:"keydown",key:"d",callback:()=>{t()},commandCtrlKey:!0,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1});return()=>i()},[e,t,r]),(0,i.jsxs)(n.Button,{onClick:t,children:["Ask on Discord"," ",e?(0,i.jsx)(s.ShortcutHint,{keyToPress:"d",cmdOrCtrl:!0}):null]})}},627021,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CalculateMetadataErrorExplainer=void 0;let i=e.r(222260),a=e.r(490586),n=e.r(921224);r.CalculateMetadataErrorExplainer=()=>(0,i.jsxs)("div",{style:o,children:["This error occured while calling"," ",(0,i.jsx)("code",{style:a.inlineCodeSnippet,children:"calculateMetadata()"}),"."]});let o={borderRadius:3,color:"white",padding:12,backgroundColor:n.BORDER_COLOR,fontSize:14,fontFamily:"sans-serif"}},695754,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.CompositionIdListItem=r.listItemHoverStyle=r.listItemActiveStyle=r.listItemStyle=void 0;let a=e.r(222260),n=i(e.r(347540)),o=e.r(921224);r.listItemStyle={padding:8,cursor:"pointer",borderRadius:4,lineHeight:1.4,color:o.TEXT_COLOR,fontFamily:"inherit",fontSize:14},r.listItemActiveStyle={backgroundColor:o.SELECTED_BACKGROUND},r.listItemHoverStyle={backgroundColor:o.CLEAR_HOVER},r.CompositionIdListItem=({id:e,isActive:t,onSelect:i})=>{let[o,s]=n.default.useState(!1);return(0,a.jsx)("div",{role:"button",onPointerEnter:()=>s(!0),onPointerLeave:()=>s(!1),onClick:()=>i(e),style:{...r.listItemStyle,...o?r.listItemHoverStyle:{},...t?r.listItemActiveStyle:{}},title:e,children:e})}},646699,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CaretDown=r.CaretRight=void 0;let i=e.r(222260);r.CaretRight=({size:e})=>(0,i.jsx)("svg",{style:{height:null!=e?e:20},"aria-hidden":"true",focusable:"false",role:"img",viewBox:"0 0 192 512",children:(0,i.jsx)("path",{fill:"currentColor",d:"M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"})}),r.CaretDown=({invert:e,size:t})=>(0,i.jsx)("svg",{"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",style:{height:null!=t?t:20,transform:e?"rotate(180deg)":""},children:(0,i.jsx)("path",{fill:"currentColor",d:"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"})})},116345,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CompositionIdsDropdown=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(652693),o=e.r(921224),s=e.r(695754),l=e.r(646699),u={display:"inline-block",position:"relative"},c={position:"absolute",top:"110%",left:0,width:320,maxHeight:300,overflowY:"auto",backgroundColor:o.INPUT_BACKGROUND,border:`1px solid ${o.INPUT_BORDER_COLOR_UNHOVERED}`,borderRadius:8,padding:8,boxShadow:"0 6px 24px rgba(0,0,0,0.35)",zIndex:1e3,fontFamily:"inherit",fontSize:14},d={width:"100%",padding:"6px 8px",borderRadius:6,border:`1px solid ${o.INPUT_BORDER_COLOR_UNHOVERED}`,background:o.INPUT_BACKGROUND,color:o.TEXT_COLOR,marginBottom:8,outline:"none",fontFamily:"inherit",fontSize:14};r.CompositionIdsDropdown=({compositionIds:e,currentId:t})=>{let[r,o]=(0,a.useState)(!1),[p,f]=(0,a.useState)(""),h=(0,a.useRef)(null),m=(0,a.useMemo)(()=>{let t=p.trim().toLowerCase();return t?e.filter(e=>e.toLowerCase().includes(t)):e},[e,p]),g=e=>{window.remotion_isReadOnlyStudio?window.location.href=`${window.location.pathname}?/${e}`:window.location.href=`/${e}`};return(0,a.useEffect)(()=>{if(!r)return;let e=e=>{h.current&&(h.current.contains(e.target)||o(!1))},t=e=>{"Escape"===e.key&&o(!1)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e,{passive:!0}),document.addEventListener("keydown",t),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e),document.removeEventListener("keydown",t)}},[r,h]),(0,i.jsxs)("div",{ref:h,style:u,children:[(0,i.jsxs)(n.Button,{onClick:()=>o(e=>!e),buttonContainerStyle:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,minWidth:180},children:[(0,i.jsx)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"14px",lineHeight:"24px"},children:null!=t?t:"Select composition"}),(0,i.jsx)(l.CaretDown,{size:20,invert:r})]}),r?(0,i.jsxs)("div",{style:c,children:[(0,i.jsx)("input",{value:p,onChange:e=>f(e.target.value),placeholder:"Search compositions...",style:d,"aria-label":"Search compositions"}),(0,i.jsx)("div",{children:0===m.length?(0,i.jsx)("div",{style:{opacity:.7,padding:8,textAlign:"center"},children:"No compositions found"}):m.map(e=>(0,i.jsx)(s.CompositionIdListItem,{id:e,isActive:e===t,onSelect:g},e))})]}):null]})}},27338,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.didUnmountReactApp=void 0,r.startReportingRuntimeErrors=function(e){if(null!==n)throw Error("Already listening");n=(0,a.listenToRuntimeErrors)(()=>{e()})};let i=e.r(49019),a=e.r(623884),n=null;r.didUnmountReactApp=()=>{var e;return!(null==(e=i.Internals.getPreviewDomElement())?void 0:e.hasChildNodes())}},336075,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DismissButton=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(910105),o={height:20,width:20},s={appearance:"none",WebkitAppearance:"none",backgroundColor:"transparent",border:"none",cursor:"pointer"};r.DismissButton=()=>{let e=(0,a.useCallback)(()=>{(0,n.clearUrl)()},[]);return(0,i.jsx)("button",{type:"button",style:s,onClick:e,children:(0,i.jsx)("svg",{focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512",style:o,children:(0,i.jsx)("path",{fill:"white",d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})})})}},28180,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorMessage=void 0;let i=e.r(222260),a=e.r(853987),n=e.r(347540),o=e.r(921224),s=e.r(646699),l="linear-gradient(to bottom, white 60%, transparent)",u={position:"relative",marginBottom:15},c={overflow:"hidden"},d={fontSize:24,lineHeight:1.5},p={width:"100%",display:"flex",justifyContent:"center",position:"absolute",border:`1px solid ${o.INPUT_BORDER_COLOR_HOVERED}`,height:0,marginTop:4},f={height:32,width:32,borderRadius:16,backgroundColor:o.INPUT_BACKGROUND,border:`1px solid ${o.INPUT_BORDER_COLOR_UNHOVERED}`,marginTop:-16,display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",color:"white"};r.ErrorMessage=({message:e})=>{let[t,r]=(0,n.useState)(!1),o=(0,n.useRef)(null),h=a.PlayerInternals.useElementSize(o,{shouldApplyCssTransforms:!1,triggerOnWindowResize:!0}),m=h?h.height/36:null,g=(0,n.useMemo)(()=>{let e=t||null!==m&&m<=2;return{...c,maxHeight:e?void 0:72,maskImage:e?void 0:l,WebkitMaskImage:e?void 0:l}},[m,t]),v=(0,n.useCallback)(()=>{r(e=>!e)},[]);return(0,i.jsxs)("div",{style:u,children:[(0,i.jsx)("div",{style:g,children:(0,i.jsx)("div",{ref:o,style:d,children:e})}),null!==m&&m>2?(0,i.jsx)("div",{style:p,children:(0,i.jsx)("button",{type:"button",onClick:v,style:f,children:(0,i.jsx)(s.CaretDown,{invert:t})})}):null]})}},590034,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Symbolicating=void 0;let i=e.r(222260);r.Symbolicating=e=>(0,i.jsxs)("svg",{id:"loading",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:"16",height:"16",fill:"white",...e,children:[(0,i.jsx)("path",{opacity:".1",d:"M14 0 H18 V8 H14 z",transform:"rotate(0 16 16)",children:(0,i.jsx)("animate",{attributeName:"opacity",from:"1",to:".1",dur:"1s",repeatCount:"indefinite",begin:"0"})}),(0,i.jsx)("path",{opacity:".1",d:"M14 0 H18 V8 H14 z",transform:"rotate(45 16 16)",children:(0,i.jsx)("animate",{attributeName:"opacity",from:"1",to:".1",dur:"1s",repeatCount:"indefinite",begin:"0.125s"})}),(0,i.jsx)("path",{opacity:".1",d:"M14 0 H18 V8 H14 z",transform:"rotate(90 16 16)",children:(0,i.jsx)("animate",{attributeName:"opacity",from:"1",to:".1",dur:"1s",repeatCount:"indefinite",begin:"0.25s"})}),(0,i.jsx)("path",{opacity:".1",d:"M14 0 H18 V8 H14 z",transform:"rotate(135 16 16)",children:(0,i.jsx)("animate",{attributeName:"opacity",from:"1",to:".1",dur:"1s",repeatCount:"indefinite",begin:"0.375s"})}),(0,i.jsx)("path",{opacity:".1",d:"M14 0 H18 V8 H14 z",transform:"rotate(180 16 16)",children:(0,i.jsx)("animate",{attributeName:"opacity",from:"1",to:".1",dur:"1s",repeatCount:"indefinite",begin:"0.5s"})}),(0,i.jsx)("path",{opacity:".1",d:"M14 0 H18 V8 H14 z",transform:"rotate(225 16 16)",children:(0,i.jsx)("animate",{attributeName:"opacity",from:"1",to:".1",dur:"1s",repeatCount:"indefinite",begin:"0.675s"})}),(0,i.jsx)("path",{opacity:".1",d:"M14 0 H18 V8 H14 z",transform:"rotate(270 16 16)",children:(0,i.jsx)("animate",{attributeName:"opacity",from:"1",to:".1",dur:"1s",repeatCount:"indefinite",begin:"0.75s"})}),(0,i.jsx)("path",{opacity:".1",d:"M14 0 H18 V8 H14 z",transform:"rotate(315 16 16)",children:(0,i.jsx)("animate",{attributeName:"opacity",from:"1",to:".1",dur:"1s",repeatCount:"indefinite",begin:"0.875s"})})]})},581750,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorTitle=void 0;let i=e.r(222260),a=e.r(921224),n=e.r(27338),o=e.r(336075),s=e.r(28180),l=e.r(590034),u={marginBottom:8,display:"flex",flexDirection:"row",justifyContent:"center"},c={flex:1,paddingRight:14,fontWeight:"bold",maxWidth:"100%"},d={fontSize:18,color:a.BLUE,display:"inline-block"},p={display:"flex",flexDirection:"row",alignItems:"center"},f={width:5};r.ErrorTitle=({name:e,message:t,symbolicating:r,canHaveDismissButton:a})=>(0,i.jsxs)("div",{style:u,className:"css-reset",children:[(0,i.jsxs)("div",{style:c,children:[(0,i.jsx)("span",{style:d,children:e}),(0,i.jsx)("br",{}),(0,i.jsxs)("div",{style:p,children:[r?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.Symbolicating,{}),(0,i.jsx)("div",{style:f})]}):null,(0,i.jsx)(s.ErrorMessage,{message:t})]})]}),(0,n.didUnmountReactApp)()?null:a?(0,i.jsx)(o.DismissButton,{}):null]})},787881,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HelpLink=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(652693),o=e.r(921224),s=e.r(362087),l=e.r(597066),u={backgroundColor:o.BLUE,color:"white"};r.HelpLink=({canHaveKeyboardShortcuts:e,link:t})=>{let r=(0,a.useCallback)(()=>{window.open(t.url,"_blank")},[t]),{registerKeybinding:o}=(0,s.useKeybinding)();return(0,a.useEffect)(()=>{if(!e)return;let{unregister:t}=o({event:"keydown",key:"h",callback:()=>{r()},commandCtrlKey:!0,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1});return()=>t()},[e,r,o]),(0,i.jsxs)(n.Button,{style:u,onClick:r,children:["Help: ",'"',t.title,'"',e?(0,i.jsx)(l.ShortcutHint,{keyToPress:"h",cmdOrCtrl:!0}):null]})}},430772,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OpenInEditor=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(652693),o=e.r(412361),s=e.r(362087),l=e.r(597066),u={type:"idle"},c=(e,t)=>"start"===t.type?{type:"load"}:"fail"===t.type?{type:"error"}:"reset"===t.type?{type:"idle"}:"succeed"===t.type?{type:"success"}:e;r.OpenInEditor=({stack:e,canHaveKeyboardShortcuts:t})=>{let r=(0,a.useRef)(!0),[d,p]=(0,a.useReducer)(c,u),{registerKeybinding:f}=(0,s.useKeybinding)(),h=(0,a.useCallback)(e=>{!1!==r.current&&p(e)},[]),m=(0,a.useCallback)(()=>{p({type:"start"}),(0,o.openInEditor)(e).then(e=>e.json()).then(e=>{e.success?h({type:"succeed"}):h({type:"fail"})}).catch(e=>{h({type:"fail"}),console.log("Could not open browser",e)}).finally(()=>{setTimeout(()=>{h({type:"reset"})},2e3)})},[h,e]);(0,a.useEffect)(()=>()=>{r.current=!1},[]),(0,a.useEffect)(()=>{if(!t)return;let{unregister:e}=f({event:"keydown",key:"o",callback:()=>{m()},commandCtrlKey:!0,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1});return()=>e()},[t,m,f]);let g=(0,a.useMemo)(()=>{switch(d.type){case"error":return"Failed to open";case"idle":return`Open in ${window.remotion_editorName}`;case"success":return`Opened in ${window.remotion_editorName}`;case"load":return"Opening...";default:throw Error("invalid state")}},[d.type]);return(0,i.jsxs)(n.Button,{onClick:m,disabled:"idle"!==d.type,children:[g,t?(0,i.jsx)(l.ShortcutHint,{keyToPress:"o",cmdOrCtrl:!0}):null]})}},98899,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RetryButton=void 0;let i=e.r(222260),a=e.r(652693);r.RetryButton=({onClick:e})=>(0,i.jsx)(a.Button,{onClick:e,children:"Retry calculateMetadata()"})},557829,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SearchGithubIssues=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(652693),o=e.r(362087),s=e.r(597066);r.SearchGithubIssues=({message:e,canHaveKeyboardShortcuts:t})=>{let r=(0,a.useCallback)(()=>{window.open(`https://github.com/remotion-dev/remotion/issues?q=${encodeURIComponent(e)}`,"_blank")},[e]),{registerKeybinding:l}=(0,o.useKeybinding)();return(0,a.useEffect)(()=>{if(!t)return;let{unregister:e}=l({event:"keydown",key:"g",callback:()=>{r()},commandCtrlKey:!0,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1});return()=>e()},[t,r,l]),(0,i.jsxs)(n.Button,{onClick:r,children:["Search GitHub Issues"," ",t?(0,i.jsx)(s.ShortcutHint,{keyToPress:"g",cmdOrCtrl:!0}):null]})}},622353,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CodeFrame=void 0;let i=e.r(222260),a=e.r(494296),n=e.r(921224),o={display:"flex",flexDirection:"row",width:"100%"},s={backgroundColor:"#070707",marginBottom:20,overflowY:"auto"},l={whiteSpace:"pre",paddingRight:12,color:"inherit",fontSize:14,lineHeight:1.7,width:60,flexShrink:0,display:"inline-flex",alignItems:"center",justifyContent:"flex-end",fontFamily:"monospace"};r.CodeFrame=({source:e,lineNumberWidth:t})=>(0,i.jsx)("div",{style:s,className:a.HORIZONTAL_SCROLLBAR_CLASSNAME,children:e.map((e,r)=>(0,i.jsxs)("div",{style:o,children:[(0,i.jsx)("div",{style:{...l,backgroundColor:e.highlight?"white":"#121212",color:e.highlight?"black":"rgba(255, 255, 255, 0.6)"},children:String(e.lineNumber).padStart(t," ")}),(0,i.jsx)("div",{style:{fontFamily:"monospace",whiteSpace:"pre",tabSize:2,color:e.highlight?"white":"rgba(255, 255, 255, 0.6)",backgroundColor:e.highlight?n.BLUE:"transparent",lineHeight:1.7,paddingRight:12,paddingLeft:12},children:e.content})]},r))})},249316,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.formatLocation=void 0,r.formatLocation=e=>e.startsWith("webpack://")?e.replace("webpack://",""):e},269722,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StackElement=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(652693),o=e.r(622353),s=e.r(646699),l=e.r(249316),u={color:"rgba(255, 255, 255, 0.6)",fontFamily:"monospace",fontSize:14},c={paddingLeft:14,paddingTop:10,paddingBottom:10,paddingRight:14,display:"flex",flexDirection:"row",alignItems:"center",borderBottom:"1px solid rgb(66, 144, 245)",backgroundColor:"black"},d={paddingRight:14,flex:1},p={fontSize:14,lineHeight:1.5,marginBottom:3};r.StackElement=({s:e,lineNumberWidth:t,isFirst:r,defaultFunctionName:f})=>{var h;let[m,g]=(0,a.useState)(()=>{var t,i;return!(null==(t=e.originalFileName)?void 0:t.includes("node_modules"))&&!(null==(i=e.originalFileName)?void 0:i.startsWith("webpack/"))||r}),v=(0,a.useCallback)(()=>{g(e=>!e)},[]);return(0,i.jsxs)("div",{className:"css-reset",children:[(0,i.jsxs)("div",{style:c,children:[(0,i.jsxs)("div",{style:d,children:[(0,i.jsx)("div",{style:p,children:null!=(h=e.originalFunctionName)?h:f}),e.originalFileName?(0,i.jsxs)("div",{style:u,children:[(0,l.formatLocation)(e.originalFileName),":",e.originalLineNumber]}):null]}),e.originalScriptCode&&e.originalScriptCode.length>0?(0,i.jsx)(n.Button,{onClick:v,children:m?(0,i.jsx)(s.CaretDown,{invert:!1}):(0,i.jsx)(s.CaretRight,{})}):null]}),(0,i.jsx)("div",{children:e.originalScriptCode&&e.originalScriptCode.length>0&&m?(0,i.jsx)(o.CodeFrame,{lineNumberWidth:t,source:e.originalScriptCode}):null})]})}},973547,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getHelpLink=void 0,r.getHelpLink=e=>e.includes("See https://www.remotion.dev/docs/the-fundamentals#defining-compositions")?{title:"Defining compositions",url:"See https://www.remotion.dev/docs/the-fundamentals#defining-compositions"}:e.includes("https://remotion.dev/docs/wrong-composition-mount")?{title:"Wrongly mounted <Composition>",url:"https://remotion.dev/docs/wrong-composition-mount"}:e.includes("https://remotion.dev/docs/staticfile-relative-paths")?{title:"staticFile() relative paths",url:"https://remotion.dev/docs/staticfile-relative-paths"}:e.includes("https://remotion.dev/docs/staticfile-remote-urls")?{title:"staticFile() remote URLs",url:"https://remotion.dev/docs/staticfile-remote-urls"}:e.includes("https://remotion.dev/docs/non-seekable-media")?{title:"Non-seekable media",url:"https://remotion.dev/docs/non-seekable-media"}:e.includes("https://remotion.dev/docs/media-playback-error")?{title:"Media playback error",url:"https://remotion.dev/docs/media-playback-error"}:e.includes("Div is not part of the THREE")?{title:"<Sequence> inside <ThreeCanvas>",url:"https://remotion.dev/docs/sequence#note-for-remotionthree"}:null},941315,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorDisplay=void 0;let i=e.r(222260),a=e.r(213637),n=e.r(347540),o=e.r(494296),s=e.r(146575),l=e.r(910105),u=e.r(815695),c=e.r(627021),d=e.r(116345),p=e.r(581750),f=e.r(787881),h=e.r(430772),m=e.r(98899),g=e.r(557829),v=e.r(269722),y=e.r(973547),b={marginTop:17,overflowX:"scroll",marginBottom:"10vh"},x={width:5,display:"inline-block"};r.ErrorDisplay=({display:e,keyboardShortcuts:t,onRetry:r,canHaveDismissButton:w,calculateMetadata:S})=>{var k,C;let E,_,T=null!=(k=null==window?void 0:window.remotion_seenCompositionIds)?k:[],P=Math.max(...e.stackFrames.map(e=>e.originalScriptCode).flat(1).map(e=>{var t;return null!=(t=null==e?void 0:e.lineNumber)?t:0})),I=(0,n.useMemo)(()=>{let t=(0,a.getLocationFromBuildError)(e.error);return t?t.message.replace(/\\n/g,"\n").replace(/\\t/g,"  ").replace(/^error:/,"").trim():e.error.message},[e.error]),A=String(P).length,O=(0,y.getHelpLink)(I);return(0,i.jsxs)("div",{children:[(0,i.jsx)(p.ErrorTitle,{symbolicating:!1,name:e.error.name,message:I,canHaveDismissButton:w}),O?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.HelpLink,{link:O,canHaveKeyboardShortcuts:t}),(0,i.jsx)("div",{style:x})]}):null,e.stackFrames.length>0&&window.remotion_editorName?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.OpenInEditor,{canHaveKeyboardShortcuts:t,stack:e.stackFrames[0]}),(0,i.jsx)("div",{style:x})]}):null,T.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.CompositionIdsDropdown,{compositionIds:T,currentId:(_=(E=(0,l.getRoute)()).startsWith("/")?E.slice(1):E,T.includes(_)?_:null!=(C=T[0])?C:null)}),(0,i.jsx)("div",{style:x})]}):null,(0,i.jsx)(g.SearchGithubIssues,{canHaveKeyboardShortcuts:t,message:e.error.message}),(0,i.jsx)("div",{style:x}),(0,i.jsx)(u.AskOnDiscord,{canHaveKeyboardShortcuts:t}),r?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:x}),(0,i.jsx)(m.RetryButton,{onClick:r})]}):null,S?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("br",{}),(0,i.jsx)(s.Spacing,{y:.5}),(0,i.jsx)(c.CalculateMetadataErrorExplainer,{})]}):null,(0,i.jsx)("div",{style:b,className:o.HORIZONTAL_SCROLLBAR_CLASSNAME,children:e.stackFrames.map((e,t)=>(0,i.jsx)(v.StackElement,{isFirst:0===t,s:e,lineNumberWidth:A,defaultFunctionName:"(anonymous function)"},t))})]})}},82790,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorLoader=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(623884),o=e.r(941315),s=e.r(581750),l={width:"100%",maxWidth:1e3,paddingLeft:14,paddingRight:14,marginLeft:"auto",marginRight:"auto",fontFamily:"SF Pro Text, sans-serif",paddingTop:"5vh"},u={color:"white",lineHeight:1.5,whiteSpace:"pre"};r.ErrorLoader=({error:e,keyboardShortcuts:t,onRetry:r,canHaveDismissButton:c,calculateMetadata:d})=>{let[p,f]=(0,a.useState)({type:"loading"});return((0,a.useEffect)(()=>{(0,n.getErrorRecord)(e).then(e=>{e?f({type:"symbolicated",record:e}):f({type:"no-record"})}).catch(e=>{f({err:e,type:"error"})})},[e]),"loading"===p.type)?(0,i.jsx)("div",{style:l,children:(0,i.jsx)(s.ErrorTitle,{symbolicating:!0,name:e.name,message:e.message,canHaveDismissButton:c})}):"error"===p.type?(0,i.jsxs)("div",{style:l,children:[(0,i.jsx)(s.ErrorTitle,{symbolicating:!1,name:e.name,message:e.message,canHaveDismissButton:c}),(0,i.jsx)("div",{style:u,children:"Error while getting stack trace:"}),(0,i.jsx)("div",{style:u,children:p.err.stack}),(0,i.jsx)("div",{style:u,children:"Report this in the Remotion repo."})]}):"no-record"===p.type?(0,i.jsxs)("div",{style:l,children:[(0,i.jsx)(s.ErrorTitle,{symbolicating:!1,name:e.name,message:e.message,canHaveDismissButton:c}),(0,i.jsx)("div",{style:u,children:"Check the Terminal and browser console for error messages."})]}):(0,i.jsx)("div",{style:l,children:(0,i.jsx)(o.ErrorDisplay,{keyboardShortcuts:t,display:p.record,onRetry:r,canHaveDismissButton:c,calculateMetadata:d})})}},573850,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getCenterPointWhileScrolling=r.getEffectiveTranslation=void 0;r.getEffectiveTranslation=({canvasSize:e,scale:t,compositionHeight:r,compositionWidth:i,translation:a})=>({x:(({canvasSize:e,scale:t,compositionWidth:r,translation:i})=>{let a=Math.abs(e.width/2+t*r/2-50);return Math.max(-a,Math.min(i.x,a))})({canvasSize:e,compositionWidth:i,scale:t,translation:a}),y:(({canvasSize:e,scale:t,compositionHeight:r,translation:i})=>{let a=Math.abs(e.height/2+t*r/2)-50;return Math.max(-a,Math.min(i.y,a))})({canvasSize:e,compositionHeight:r,scale:t,translation:a})}),r.getCenterPointWhileScrolling=({size:e,clientX:t,clientY:r,compositionWidth:i,compositionHeight:a,scale:n,translation:o})=>{let s=t-e.left,l=r-e.top,u=e.width/2-i*n/2-o.x,c=e.height/2-a*n/2-o.y;return{centerX:Math.min(i,Math.max(0,(s-u)/n)),centerY:Math.min(a,Math.max(0,(l-c)/n))}}},31054,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.unsmoothenZoom=r.smoothenZoom=r.MAX_ZOOM=r.MIN_ZOOM=void 0;let i=Math.E/4;r.MIN_ZOOM=.05,r.MAX_ZOOM=10,r.smoothenZoom=e=>i**(e-1),r.unsmoothenZoom=e=>e<0?r.MAX_ZOOM:Math.min(r.MAX_ZOOM,Math.max(r.MIN_ZOOM,Math.log(e)/Math.log(i)+1))},47422,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useStudioCanvasDimensions=void 0;let i=e.r(853987),a=e.r(347540),n=e.r(49019);r.useStudioCanvasDimensions=({canvasSize:e,contentDimensions:t,assetMetadata:r})=>{let{size:o}=(0,a.useContext)(n.Internals.PreviewSizeContext),{centerX:s,centerY:l,scale:u}=(0,a.useMemo)(()=>"none"===t||null===t||r&&"not-found"===r.type||!e?{centerX:o.translation.x,centerY:o.translation.y,scale:1}:i.PlayerInternals.calculateCanvasTransformation({canvasSize:e,compositionHeight:t.height,compositionWidth:t.width,previewSize:o.size}),[e,t,o.size,o.translation.y,o.translation.x,r]);return{canvasPosition:(0,a.useMemo)(()=>({left:s-o.translation.x,top:l-o.translation.y,width:"none"!==t&&t?t.width*u:(null==e?void 0:e.width)||0,height:"none"!==t&&t?t.height*u:(null==e?void 0:e.height)||0}),[u,s,o.translation.x,o.translation.y,l,e,t]),scale:u}}},506930,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(222260),a=e.r(347540),n=e.r(758927),o=e.r(921224),s=e.r(6256),l=e.r(816811),u=e.r(661648);r.default=(0,a.memo)(({guide:e,canvasDimensions:t,scale:r})=>{let{shouldCreateGuideRef:c,setGuidesList:d,setSelectedGuideId:p,selectedGuideId:f,setHoveredGuideId:h,hoveredGuideId:m}=(0,a.useContext)(s.EditorShowGuidesContext),g=(0,a.useCallback)(()=>{h(()=>e.id)},[e.id,h]),v=(0,a.useCallback)(()=>{h(()=>null)},[h]),y="vertical"===e.orientation,b=(0,a.useMemo)(()=>{let i=y?t.left:t.top,a=e.position*r+i;return{position:"absolute",width:`${y?"1px":"100%"}`,height:`${y?"100%":"1px"}`,left:`${y?a-4:0}px`,top:`${y?0:a-4}px`,cursor:`${y?"ew-resize":"ns-resize"}`,padding:y?"0 4px":"4px 0"}},[e,r,t,y]),x=(0,a.useMemo)(()=>({position:"relative",minWidth:`${y?"1px":`calc(100% + ${l.RULER_WIDTH}px`}`,minHeight:`${y?`calc(100% + ${l.RULER_WIDTH}px`:"1px"}`,top:`${y?`-${l.RULER_WIDTH}px`:"0px"}`,left:`${y?"0px":`-${l.RULER_WIDTH}px`}`,display:e.show?"block":"none",backgroundColor:f===e.id||m===e.id?o.SELECTED_GUIDE:o.UNSELECTED_GUIDE}),[y,e.show,e.id,f,m]),w=(0,a.useCallback)(t=>{t.preventDefault(),0===t.button&&(c.current=!0,document.body.style.cursor="no-drop",p(()=>e.id))},[c,p,e.id]),S=(0,a.useMemo)(()=>[{id:"1",keyHint:null,label:"Remove guide",leftItem:null,onClick:()=>{d(t=>{let r=t.filter(t=>t.id!==e.id);return(0,s.persistGuidesList)(r),r})},quickSwitcherLabel:null,subMenu:null,type:"item",value:"remove"}],[e.id,d]);return(0,i.jsx)(u.ContextMenu,{values:S,children:(0,i.jsx)("div",{style:b,onMouseDown:w,className:"__remotion_editor_guide",onPointerEnter:g,onPointerLeave:v,children:(0,i.jsx)("div",{style:x,className:["__remotion_editor_guide_content",f===e.id||m===e.id?"__remotion_editor_guide_selected":null].filter(n.NoReactInternals.truthy).join(" ")})})})})},490292,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let a=e.r(222260),n=e.r(347540),o=e.r(49019),s=e.r(47422),l=e.r(6256),u=i(e.r(506930));r.default=({canvasSize:e,contentDimensions:t,assetMetadata:r})=>{let{canvasPosition:i,scale:c}=(0,s.useStudioCanvasDimensions)({canvasSize:e,contentDimensions:t,assetMetadata:r}),{canvasContent:d}=(0,n.useContext)(o.Internals.CompositionManager);if(null===d||"composition"!==d.type)throw Error("Expected to be in a composition");let{guidesList:p}=(0,n.useContext)(l.EditorShowGuidesContext),f=(0,n.useMemo)(()=>p.filter(e=>e.compositionId===d.compositionId),[d.compositionId,p]);return(0,a.jsx)(a.Fragment,{children:f.map(e=>(0,a.jsx)(u.default,{guide:e,canvasDimensions:i,scale:c},e.id))})}},752116,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getRulerScaleRange=r.getRulerPoints=r.drawMarkingOnRulerCanvas=void 0;let i=e.r(816811),a=e.r(921224),n=({orientation:e,context:t,label:r,originDistance:i,color:a})=>{t.fillStyle=a,"horizontal"===e?t.fillText(r,i+4,16):(t.rotate(-Math.PI/2),t.fillText(r,-i+4,16),t.rotate(Math.PI/2))};r.drawMarkingOnRulerCanvas=({scale:e,points:t,startMarking:r,originOffset:i,markingGaps:s,orientation:l,rulerCanvasRef:u,selectedGuide:c,canvasHeight:d,canvasWidth:p})=>{let f=u.current;if(!f)return;let h=f.getContext("2d");h&&(f.width=p,f.height=d,h.scale(window.devicePixelRatio,window.devicePixelRatio),h.clearRect(0,0,p,d),h.strokeStyle=a.RULER_COLOR,h.lineWidth=1,h.beginPath(),t.forEach(t=>{h.strokeStyle=a.RULER_COLOR,h.lineWidth=1;let o=t.position+i-r*e;h.beginPath(),"horizontal"===l?(h.moveTo(o,0),h.lineTo(o,d)):(h.moveTo(0,o),h.lineTo(p,o));for(let t=1;t<5;t++){let r=t*s*e;"horizontal"===l?(h.moveTo(o+r/5,0),h.lineTo(o+r/5,4)):(h.moveTo(0,o+r/5),h.lineTo(4,o+r/5))}h.stroke(),h.font="10px Arial, Helvetica, sans-serif",h.textAlign="left",h.fillStyle=a.RULER_COLOR,n({orientation:l,context:h,label:t.value.toString(),originDistance:o,color:a.RULER_COLOR})}),c&&l!==c.orientation&&(({selectedGuide:e,scale:t,startMarking:r,context:i,canvasHeight:s,canvasWidth:l,orientation:u,originOffset:c})=>{let d=o({value:e.position,startMarking:r,scale:t})+c-r*t;(({orientation:e,context:t,originDistance:r,canvasHeight:i,canvasWidth:n})=>{let o="horizontal"===e?r-125:0,s="horizontal"===e?0:r-125,l="horizontal"===e?r+125:n,u="horizontal"===e?i:r+125,c=t.createLinearGradient(o,s,l,u);c.addColorStop(0,a.BACKGROUND__TRANSPARENT),c.addColorStop(.25,a.BACKGROUND),c.addColorStop(.75,a.BACKGROUND),c.addColorStop(1,a.BACKGROUND__TRANSPARENT),t.fillStyle=c,t.fillRect(o,s,l-o,u-s)})({canvasHeight:s,context:i,orientation:u,originDistance:d,canvasWidth:l}),i.strokeStyle=a.SELECTED_GUIDE,i.lineWidth=1,i.beginPath(),"horizontal"===u&&"horizontal"===e.orientation||("vertical"!==u||"vertical"!==e.orientation)&&("vertical"===u&&"horizontal"===e.orientation?(i.moveTo(0,d),i.lineTo(l,d),n({context:i,label:e.position.toString(),originDistance:d,orientation:u,color:a.SELECTED_GUIDE})):"horizontal"===u&&"vertical"===e.orientation&&(i.moveTo(d,0),i.lineTo(d,s),n({context:i,label:e.position.toString(),originDistance:d,orientation:u,color:a.SELECTED_GUIDE})),i.stroke())})({canvasHeight:d,canvasWidth:p,context:h,orientation:l,originOffset:i,scale:e,selectedGuide:c,startMarking:r}))},r.getRulerPoints=({rulerScaleRange:e,rulerMarkingGaps:t,scale:r})=>{let i=[],a=Math.ceil(e.start/t),n=Math.floor(e.end/t),s=a*t;for(let e=a;e<=n;e++)i.push({value:e*t,position:o({scale:r,startMarking:s,value:e*t})});return{points:i,startMarking:s}};let o=({value:e,startMarking:t,scale:r})=>(e+t)*r;r.getRulerScaleRange=({canvasLength:e,scale:t,canvasSize:r})=>{let a=(r.width||i.MINIMUM_VISIBLE_CANVAS_SIZE-i.MINIMUM_VISIBLE_CANVAS_SIZE)/t;return{start:-a,end:a+e}}},833420,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(921224),s=e.r(752116),l=e.r(6256),u=e.r(816811);r.default=({scale:e,points:t,originOffset:r,startMarking:c,size:d,markingGaps:p,orientation:f})=>{let h=(0,a.useRef)(null),m="vertical"===f,{shouldCreateGuideRef:g,setGuidesList:v,selectedGuideId:y,hoveredGuideId:b,setSelectedGuideId:x,guidesList:w,setEditorShowGuides:S}=(0,a.useContext)(l.EditorShowGuidesContext),k=n.Internals.useUnsafeVideoConfig();if(!k)throw Error("Video config not set");let[C,E]=(0,a.useState)(m?"ew-resize":"ns-resize"),_=(0,a.useMemo)(()=>{var e,t;return null!=(t=null!=(e=w.find(e=>e.id===y))?e:w.find(e=>e.id===b))?t:null},[w,b,y]),T=m?u.RULER_WIDTH:d.width-u.RULER_WIDTH,P=m?d.height-u.RULER_WIDTH:u.RULER_WIDTH;(0,a.useEffect)(()=>{(0,s.drawMarkingOnRulerCanvas)({scale:e,points:t,startMarking:c,originOffset:r,markingGaps:p,orientation:f,rulerCanvasRef:h,selectedGuide:_,canvasHeight:P*window.devicePixelRatio,canvasWidth:T*window.devicePixelRatio})},[e,t,c,r,p,f,_,d,P,T]);let I=(0,a.useMemo)(()=>({position:"absolute",background:o.BACKGROUND,width:T,height:P,left:m?0:"unset",top:m?"unset":0,borderBottom:m?void 0:"1px solid "+o.RULER_COLOR,borderRight:m?"1px solid "+o.RULER_COLOR:void 0,cursor:C}),[T,P,C,m]),A=(0,a.useCallback)(e=>{if(0!==e.button)return;e.preventDefault(),g.current=!0,document.body.style.cursor="no-drop";let t=Math.random().toString(36).substring(7);S(()=>!0),x(()=>t),v(e=>[...e,{orientation:f,position:-r,show:!1,id:t,compositionId:k.id}])},[g,S,x,v,f,r,k.id]),O=(0,a.useCallback)(e=>{e.preventDefault(),null!==y&&E("no-drop")},[E,y]);return(0,a.useEffect)(()=>{null===y&&E(m?"ew-resize":"ns-resize")},[y,m]),(0,i.jsx)("canvas",{ref:h,width:T*window.devicePixelRatio,height:P*window.devicePixelRatio,style:I,onPointerDown:A,onPointerEnter:O,onPointerLeave:O})}},830977,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.EditorRulers=void 0;let a=e.r(222260),n=e.r(347540),o=e.r(921224),s=e.r(752116),l=e.r(47422),u=e.r(6256),c=e.r(816811),d=i(e.r(833420)),p={position:"absolute",top:0,left:0,borderBottom:"1px solid "+o.RULER_COLOR,borderRight:"1px solid "+o.RULER_COLOR,width:`${c.RULER_WIDTH}px`,height:`${c.RULER_WIDTH}px`,background:o.BACKGROUND};r.EditorRulers=({contentDimensions:e,canvasSize:t,assetMetadata:r,containerRef:i})=>{let{scale:o,canvasPosition:f}=(0,l.useStudioCanvasDimensions)({canvasSize:t,contentDimensions:e,assetMetadata:r}),{shouldCreateGuideRef:h,shouldDeleteGuideRef:m,setGuidesList:g,selectedGuideId:v,setSelectedGuideId:y}=(0,n.useContext)(u.EditorShowGuidesContext),b=(0,n.useMemo)(()=>{let e=c.MINIMUM_RULER_MARKING_GAP_PX;return c.PREDEFINED_RULER_SCALE_GAPS.find(t=>t*o>e)||c.MAXIMUM_PREDEFINED_RULER_SCALE_GAP},[o]),x=(0,n.useMemo)(()=>(0,s.getRulerScaleRange)({canvasLength:f.width,scale:o,canvasSize:t}),[f.width,t,o]),w=(0,n.useMemo)(()=>(0,s.getRulerScaleRange)({canvasLength:f.height,scale:o,canvasSize:t}),[f.height,t,o]),{points:S,startMarking:k}=(0,n.useMemo)(()=>(0,s.getRulerPoints)({rulerScaleRange:x,rulerMarkingGaps:b,scale:o}),[x,b,o]),{points:C,startMarking:E}=(0,n.useMemo)(()=>(0,s.getRulerPoints)({rulerScaleRange:w,rulerMarkingGaps:b,scale:o}),[w,b,o]),_=(0,n.useRef)(null),T=(0,n.useCallback)(e=>{_.current&&cancelAnimationFrame(_.current),_.current=requestAnimationFrame(()=>{var t;let{clientX:r,clientY:a}=e,{left:n=0,top:s=0,right:l=0,bottom:c=0}=(null==(t=i.current)?void 0:t.getBoundingClientRect())||{};r<n||r>l||a<s||a>c?(m.current||(m.current=!0),"no-drop"!==document.body.style.cursor&&(document.body.style.cursor="no-drop"),g(e=>{let t=e.map(e=>e.id!==v?e:{...e,show:!1});return(0,u.persistGuidesList)(t),t})):(m.current&&(m.current=!1),g(e=>e.map(e=>{if(e.id!==v)return e;let t="vertical"===e.orientation?(r-n)/o-f.left/o:(a-s)/o-f.top/o,i="vertical"===e.orientation?"ew-resize":"ns-resize";return document.body.style.cursor!==i&&(document.body.style.cursor=i),{...e,position:Math.floor(t/1),show:!0}})))})},[i,m,g,v,o,f.left,f.top]),P=(0,n.useCallback)(()=>{g(e=>{let t=e.filter(e=>!m.current||e.id!==v);return(0,u.persistGuidesList)(t),t}),m.current=!1,document.body.style.cursor="auto",h.current=!1,y(()=>null),document.removeEventListener("pointerup",P),document.removeEventListener("pointermove",T)},[v,h,m,y,g,T]);return(0,n.useEffect)(()=>(null!==v&&(document.addEventListener("pointermove",T),document.addEventListener("pointerup",P)),()=>{document.removeEventListener("pointermove",T),document.removeEventListener("pointerup",P),_.current&&cancelAnimationFrame(_.current)}),[v,T,P]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:p}),(0,a.jsx)(d.default,{orientation:"horizontal",scale:o,points:S,startMarking:k,markingGaps:b,originOffset:f.left,size:t}),(0,a.jsx)(d.default,{orientation:"vertical",scale:o,points:C,startMarking:E,markingGaps:b,originOffset:f.top,size:t})]})}},472855,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useIsRulerVisible=void 0;let i=e.r(347540),a=e.r(49019),n=e.r(816811);r.useIsRulerVisible=()=>{let{canvasContent:e}=(0,i.useContext)(a.Internals.CompositionManager),{editorShowRulers:t}=(0,i.useContext)(n.EditorShowRulersContext);return t&&e&&"composition"===e.type}},15429,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ResetZoomButton=void 0;let i=e.r(222260),a=e.r(652693);r.ResetZoomButton=({onClick:e})=>(0,i.jsx)(a.Button,{onClick:e,children:"Reset zoom"})},527845,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.Canvas=void 0;let a=e.r(222260),n=e.r(347540),o=e.r(49019),s=e.r(921224),l=e.r(577731),u=e.r(573850),c=e.r(31054),d=e.r(362087),p=e.r(184085),f=e.r(6256),h=e.r(601679),m=i(e.r(490292)),g=e.r(830977),v=e.r(472855),y=e.r(432269),b=e.r(15429),x=e.r(146575),w={flex:1,display:"flex",overflow:"hidden",position:"relative",backgroundColor:s.BACKGROUND},S={position:"absolute",top:2*x.SPACING_UNIT,right:2*x.SPACING_UNIT};r.Canvas=({canvasContent:e,size:t})=>{let{setSize:r,size:i}=(0,n.useContext)(o.Internals.PreviewSizeContext),{editorZoomGestures:s}=(0,n.useContext)(h.EditorZoomGesturesContext),x=(0,d.useKeybinding)(),k=o.Internals.useUnsafeVideoConfig(),C=(0,v.useIsRulerVisible)(),{editorShowGuides:E}=(0,n.useContext)(f.EditorShowGuidesContext),[_,T]=(0,n.useState)(null),P=(0,n.useMemo)(()=>("asset"===e.type||"output"===e.type||"output-blob"===e.type)&&_&&"found"===_.type?_.dimensions:k?{width:k.width,height:k.height}:null,[_,k,e]),I="auto"===i.size,A=(0,n.useCallback)(e=>{if(!s||!t||!P||"none"===P)return;let i=e.ctrlKey||e.metaKey;(i||!I)&&(e.preventDefault(),r(r=>{let a=o.Internals.calculateScale({canvasSize:t,compositionHeight:P.height,compositionWidth:P.width,previewSize:r.size});if(i){let i="auto"===r.size?a:r.size,n=(0,c.smoothenZoom)(i)+.003*e.deltaY,o=(0,c.unsmoothenZoom)(n),{centerX:s,centerY:l}=(0,u.getCenterPointWhileScrolling)({size:t,clientX:e.clientX,clientY:e.clientY,compositionWidth:P.width,compositionHeight:P.height,scale:a,translation:r.translation}),d=o-i,p=s/P.width,f=l/P.height,h=-p*(d*P.width)+(1-p)*d*P.width,m=-f*(d*P.height)+(1-f)*d*P.height;return{translation:(0,u.getEffectiveTranslation)({translation:{x:r.translation.x-h/2,y:r.translation.y-m/2},canvasSize:t,compositionHeight:P.height,compositionWidth:P.width,scale:a}),size:o}}let n=(0,u.getEffectiveTranslation)({translation:r.translation,canvasSize:t,compositionHeight:P.height,compositionWidth:P.width,scale:a});return{...r,translation:(0,u.getEffectiveTranslation)({translation:{x:n.x+e.deltaX,y:n.y+e.deltaY},canvasSize:t,compositionHeight:P.height,compositionWidth:P.width,scale:a})}}))},[s,P,I,r,t]);(0,n.useEffect)(()=>{let{current:e}=p.canvasRef;if(e)return e.addEventListener("wheel",A,{passive:!1}),()=>e.removeEventListener("wheel",A,{passive:!1})},[A]);let O=(0,n.useCallback)(()=>{r(()=>({translation:{x:0,y:0},size:"auto"}))},[r]),M=(0,n.useCallback)(()=>{!P||"none"===P||t&&r(e=>{let r=o.Internals.calculateScale({canvasSize:t,compositionHeight:P.height,compositionWidth:P.width,previewSize:e.size});return{translation:{x:0,y:0},size:Math.min(c.MAX_ZOOM,2*r)}})},[P,r,t]),F=(0,n.useCallback)(()=>{!P||"none"===P||t&&r(e=>{let r=o.Internals.calculateScale({canvasSize:t,compositionHeight:P.height,compositionWidth:P.width,previewSize:e.size});return{translation:{x:0,y:0},size:Math.max(c.MIN_ZOOM,r/2)}})},[P,r,t]);(0,n.useEffect)(()=>{let e=x.registerKeybinding({event:"keydown",key:"0",commandCtrlKey:!1,callback:O,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1}),t=x.registerKeybinding({event:"keydown",key:"+",commandCtrlKey:!1,callback:M,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1}),r=x.registerKeybinding({event:"keydown",key:"-",commandCtrlKey:!1,callback:F,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1});return()=>{e.unregister(),t.unregister(),r.unregister()}},[x,O,M,F]);let R=(0,n.useCallback)(async()=>{T(null),"composition"===e.type||T(await (0,l.getAssetMetadata)(e,"asset"===e.type))},[e]);return(0,n.useEffect)(()=>{if("asset"!==e.type)return;let t=(0,o.watchStaticFile)(e.asset,()=>{R()});return()=>{t.cancel()}},[e,R]),(0,n.useEffect)(()=>{R()},[R]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{ref:p.canvasRef,style:w,children:[t?(0,a.jsx)(y.VideoPreview,{canvasContent:e,contentDimensions:P,canvasSize:t,assetMetadata:_}):null,I?null:(0,a.jsx)("div",{style:S,className:"css-reset",children:(0,a.jsx)(b.ResetZoomButton,{onClick:O})}),E&&"composition"===e.type&&(0,a.jsx)(m.default,{canvasSize:t,contentDimensions:P,assetMetadata:_})]}),C&&(0,a.jsx)(g.EditorRulers,{contentDimensions:P,canvasSize:t,assetMetadata:_,containerRef:p.canvasRef})]})}},391923,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FramePersistor=void 0;let i=e.r(347540),a=e.r(49019);r.FramePersistor=()=>{let[e]=a.Internals.Timeline.usePlayingState(),t=(0,a.useVideoConfig)(),r=a.Internals.Timeline.useTimelinePosition(),n=a.Internals.useTimelineSetFrame();return(0,i.useEffect)(()=>{e||n(e=>{let i={...e,[t.id]:r};return a.Internals.persistCurrentFrame(i),i})},[t.id,r,e,n]),null}},145751,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RunningCalculateMetadata=r.loaderLabel=void 0;let i=e.r(222260),a=e.r(921224),n=e.r(490586),o=e.r(444732),s=e.r(146575);r.loaderLabel={fontSize:14,color:a.LIGHT_TEXT,fontFamily:"sans-serif",lineHeight:1.5};let l={backgroundColor:a.BACKGROUND,display:"inline-flex",justifyContent:"center",alignItems:"center",flexDirection:"row",padding:20};r.RunningCalculateMetadata=()=>(0,i.jsxs)("div",{style:l,children:[(0,i.jsx)(o.Spinner,{size:24,duration:1}),(0,i.jsx)(s.Spacing,{x:2}),(0,i.jsxs)("div",{style:r.loaderLabel,children:["Running ",(0,i.jsx)("code",{style:n.inlineCodeSnippet,children:"calculateMetadata()"}),"..."]})]})},95030,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RefreshCompositionOverlay=r.container=void 0;let i=e.r(222260),a=e.r(49019),n=e.r(145751);r.container={justifyContent:"flex-end",alignItems:"flex-start",padding:20,pointerEvents:"none"};let o={boxShadow:"0 0 4px black"};r.RefreshCompositionOverlay=()=>(0,i.jsx)(a.AbsoluteFill,{style:r.container,children:(0,i.jsx)("div",{style:o,children:(0,i.jsx)(n.RunningCalculateMetadata,{})})})},213947,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CanvasOrLoading=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(82790),s=e.r(921224),l=e.r(818046),u=e.r(527845),c=e.r(391923),d=e.r(494296),p=e.r(95030),f=e.r(145751),h=e.r(440028),m=e.r(166833),g=e.r(954306),v={color:"white",flex:1,justifyContent:"center",alignItems:"center",display:"flex",backgroundColor:s.BACKGROUND,flexDirection:"column"};r.CanvasOrLoading=({size:e})=>{let t=n.Internals.useResolvedVideoConfig(null),{setZoom:r}=(0,a.useContext)(l.TimelineZoomCtx),{canvasContent:o}=(0,a.useContext)(n.Internals.CompositionManager);if((0,a.useEffect)(()=>{if((null==t?void 0:t.type)!=="success"&&(null==t?void 0:t.type)!=="success-and-refreshing")return;let e=t.result;setTimeout(()=>{(0,m.ensureFrameIsInViewport)({direction:"center",frame:(0,h.getCurrentFrame)(),durationInFrames:e.durationInFrames})})},[t,r]),!o){let e=window.location.pathname.replace("/","");return(0,i.jsx)("div",{style:v,className:"css-reset",children:(0,i.jsxs)("div",{style:f.loaderLabel,children:["Composition with ID ",e," not found."]})})}let s=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.ZoomPersistor,{}),(0,i.jsx)(u.Canvas,{size:e,canvasContent:o}),(null==t?void 0:t.type)==="success-and-refreshing"?(0,i.jsx)(p.RefreshCompositionOverlay,{}):null]});return"asset"===o.type||"output"===o.type||"output-blob"===o.type?s:t?"loading"===t.type?(0,i.jsx)("div",{style:v,className:"css-reset",children:(0,i.jsx)(f.RunningCalculateMetadata,{})}):"error"===t.type?(0,i.jsx)(b,{error:t.error}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.FramePersistor,{})," ",s]}):null};let y={marginLeft:"auto",marginRight:"auto",width:"100%",position:"absolute",height:"100%",overflowY:"auto"},b=({error:e})=>(0,i.jsx)("div",{style:y,className:d.VERTICAL_SCROLLBAR_CLASSNAME,children:(0,i.jsx)(o.ErrorLoader,{canHaveDismissButton:!1,keyboardShortcuts:!1,error:e,onRetry:()=>{var e;return null==(e=n.Internals.resolveCompositionsRef.current)?void 0:e.reloadCurrentlySelectedComposition()},calculateMetadata:!0},e.stack)})},104255,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CanvasIfSizeIsAvailable=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(816811),s=e.r(213947),l=e.r(472855);r.CanvasIfSizeIsAvailable=()=>{let e=(0,l.useIsRulerVisible)(),t=(0,a.useContext)(n.Internals.CurrentScaleContext),r=(0,a.useMemo)(()=>{let r=t&&"canvas-size"===t.type?t.canvasSize:null;return e?r?{...r,width:r.width-o.RULER_WIDTH,height:r.height-o.RULER_WIDTH}:null:r},[t,e]);return r?(0,i.jsx)(s.CanvasOrLoading,{size:r}):null}},395096,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setRenderJobs=r.setUnsavedProps=r.setCurrentCanvasContentId=void 0;let i=e.r(758927),a=e.r(896509),n=null,o=!1,s=!1,l=[];r.setCurrentCanvasContentId=e=>{if(!e){n=e,d();return}n=e.split("/").pop(),d()},r.setUnsavedProps=e=>{window.remotion_unsavedProps=e,o=e},r.setRenderJobs=e=>{l=e,d()},document.addEventListener("visibilitychange",()=>{s="hidden"===document.visibilityState,d()});let u="Remotion Studio",c=`- ${u}`,d=()=>{if(!n){document.title=u;return}let e=`${n} / ${window.remotion_projectName}`;document.title=[p(n,l),o&&s?"":null,`${e} ${c}`].filter(i.NoReactInternals.truthy).join(" ")},p=(e,t)=>{let r,i=t.find(e=>"running"===e.status);if(!i)return null;if("running"!==i.status)throw Error("expected running job");if((0,a.isClientRenderJob)(i)){let{renderedFrames:e,totalFrames:t}=i.progress;r=t>0?Math.ceil(e/t*100):0}else r=Math.ceil(100*i.progress.value);return i.compositionId===e?`[${r}%]`:`[${r}% ${i.compositionId}]`};document.addEventListener("visibilitychange",()=>{s="hidden"===document.visibilityState,d()})},32864,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CurrentCompositionKeybindings=r.TitleUpdater=void 0;let i=e.r(347540),a=e.r(49019),n=e.r(850586),o=e.r(395096),s=e.r(362087),l=e.r(277984),u=e.r(896509);r.TitleUpdater=()=>{let e=(0,i.useContext)(u.RenderQueueContext),{canvasContent:t}=(0,i.useContext)(a.Internals.CompositionManager),{jobs:r}=e;return(0,i.useEffect)(()=>{t?"composition"===t.type?(0,o.setCurrentCanvasContentId)(t.compositionId):"output"===t.type?(0,o.setCurrentCanvasContentId)(t.path):"output-blob"===t.type?(0,o.setCurrentCanvasContentId)(t.displayName):(0,o.setCurrentCanvasContentId)(t.asset):(0,o.setCurrentCanvasContentId)(null)},[t]),(0,i.useEffect)(()=>{(0,o.setRenderJobs)(r)},[r]),null},r.CurrentCompositionKeybindings=({readOnlyStudio:e})=>{let t=(0,s.useKeybinding)(),r=a.Internals.useVideo(),{type:o}=(0,i.useContext)(n.StudioServerConnectionCtx).previewServerState,u=(0,i.useCallback)(()=>r?e?(0,l.showNotification)("Studio is read-only",2e3):"connected"!==o?void(0,l.showNotification)("Studio server is offline",2e3):void document.getElementById("render-modal-button").click():void 0,[e,o,r]);return(0,i.useEffect)(()=>{let e=t.registerKeybinding({event:"keydown",key:"r",commandCtrlKey:!1,callback:u,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1});return()=>{e.unregister()}},[t,u]),null}},221827,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({children:e,onClose:t}){let{currentZIndex:r}=(0,s.useZIndex)();return n.default.createPortal((0,a.jsxs)("div",{style:c,children:[(0,a.jsx)("div",{style:d,children:(0,a.jsx)(u.CancelButton,{style:p,onPress:t})}),e]}),(0,l.getPortal)(r))};let a=e.r(222260),n=i(e.r(149579)),o=e.r(921224),s=e.r(260240),l=e.r(414321),u=e.r(39696),c={position:"fixed",top:0,left:0,width:"100%",height:"100%",padding:"0 0px 50px 0px",background:o.BACKGROUND},d={height:"40px",width:"100%",alignItems:"center",display:"flex",justifyContent:"flex-end"},p={height:20,width:20}},49660,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SchemaResetButton=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(841674),o={height:14,color:"currentColor"};r.SchemaResetButton=({onClick:e})=>{let t=(0,a.useCallback)(e=>(0,i.jsx)("svg",{style:o,viewBox:"0 0 512 512",children:(0,i.jsx)("path",{fill:e,d:"M48.5 224H40c-13.3 0-24-10.7-24-24V72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8H48.5z"})}),[]);return(0,i.jsx)(n.InlineAction,{renderAction:t,onClick:e})}},56373,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SchemaSaveButton=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(841674),s={height:14,color:"currentColor"};r.SchemaSaveButton=({onClick:e,disabled:t})=>{let r=(0,a.useCallback)(e=>(0,i.jsx)("svg",{style:s,viewBox:"0 0 448 512",children:(0,i.jsx)("path",{fill:t?n.LIGHT_TEXT:e,d:"M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V173.3c0-17-6.7-33.3-18.7-45.3L352 50.7C340 38.7 323.7 32 306.7 32H64zm0 96c0-17.7 14.3-32 32-32H288c17.7 0 32 14.3 32 32v64c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V128zM224 288a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"})}),[t]);return(0,i.jsx)(o.InlineAction,{renderAction:r,onClick:e,disabled:t})}},89106,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t});Object.defineProperty(r,"__esModule",{value:!0}),r.GlobalPropsEditorUpdateButton=void 0;let s=e.r(222260),l=o(e.r(347540)),u=e.r(49019),c=e.r(742434),d=e.r(277984),p=e.r(49660),f=e.r(56373),h={display:"inline-block",flexDirection:"row"};r.GlobalPropsEditorUpdateButton=({compositionId:e,currentDefaultProps:t})=>{let{fastRefreshes:r}=(0,l.useContext)(u.Internals.NonceContext),[i,a]=l.default.useState(!1),n=(0,l.useCallback)(()=>{a(!0),window.remotion_ignoreFastRefreshUpdate=r+1,(0,c.saveDefaultProps)({compositionId:e,defaultProps:()=>t}).catch(e=>{(0,d.showNotification)(`Cannot update default props: ${e.stack}`,2e3)}).finally(()=>{a(!0)})},[e,t,r]),o=(0,l.useCallback)(()=>{window.remotion_ignoreFastRefreshUpdate=null,window.dispatchEvent(new CustomEvent(u.Internals.PROPS_UPDATED_EXTERNALLY,{detail:{resetUnsaved:e}}))},[e]);return(0,s.jsxs)("div",{style:h,children:[(0,s.jsx)(p.SchemaResetButton,{onClick:o}),(0,s.jsx)(f.SchemaSaveButton,{disabled:i,onClick:n})]})}},97870,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ValidationMessage=r.WarningTriangle=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(146575);r.WarningTriangle=e=>(0,i.jsx)("svg",{viewBox:"0 0 576 512",...e,children:(0,i.jsx)("path",{d:"M248.747 204.705l6.588 112c.373 6.343 5.626 11.295 11.979 11.295h41.37a12 12 0 0 0 11.979-11.295l6.588-112c.405-6.893-5.075-12.705-11.979-12.705h-54.547c-6.903 0-12.383 5.812-11.978 12.705zM330 384c0 23.196-18.804 42-42 42s-42-18.804-42-42 18.804-42 42-42 42 18.804 42 42zm-.423-360.015c-18.433-31.951-64.687-32.009-83.154 0L6.477 440.013C-11.945 471.946 11.118 512 48.054 512H527.94c36.865 0 60.035-39.993 41.577-71.987L329.577 23.985zM53.191 455.002L282.803 57.008c2.309-4.002 8.085-4.002 10.394 0l229.612 397.993c2.308 4-.579 8.998-5.197 8.998H58.388c-4.617.001-7.504-4.997-5.197-8.997z"})});let s={width:12,height:12,flexShrink:0},l={maxWidth:500},u={fontSize:13,color:"white",fontFamily:"sans-serif"};r.ValidationMessage=({message:e,align:t,type:c})=>{let d=(0,a.useMemo)(()=>({...s,fill:"warning"===c?n.WARNING_COLOR:n.FAIL_COLOR}),[c]);return(0,i.jsx)("div",{style:l,children:(0,i.jsxs)(o.Row,{align:"center",justify:t,children:[(0,i.jsx)(r.WarningTriangle,{style:d}),(0,i.jsx)(o.Spacing,{x:1}),(0,i.jsx)("div",{style:u,children:e})]})})}},200539,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SegmentedControl=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(260240),s={display:"flex",flexDirection:"row",overflow:"hidden",border:"1px solid "+n.INPUT_BORDER_COLOR_UNHOVERED,flexWrap:"wrap",maxWidth:350,justifyContent:"flex-end"},l={display:"flex",fontSize:15,padding:"4px 12px",cursor:"pointer",appearance:"none",border:"none",flex:1,justifyContent:"center",whiteSpace:"nowrap"};r.SegmentedControl=({items:e,needsWrapping:t})=>{let r=(0,a.useMemo)(()=>t?{...s,flexWrap:"wrap",maxWidth:"248px",justifyContent:"flex-end",marginBottom:"8px"}:{...s},[t]);return(0,i.jsx)("div",{style:r,children:e.map(e=>(0,i.jsx)(u,{onClick:e.onClick,selected:e.selected,children:e.label},e.key))})};let u=({selected:e,onClick:t,children:r})=>{let[s,u]=(0,a.useState)(!1),{tabIndex:c}=(0,o.useZIndex)(),d=(0,a.useCallback)(()=>{u(!0)},[]),p=(0,a.useCallback)(()=>{u(!1)},[]),f=(0,a.useMemo)(()=>({...l,backgroundColor:e?n.INPUT_BACKGROUND:"transparent",color:e||s?"white":n.LIGHT_TEXT}),[s,e]);return(0,i.jsx)("button",{type:"button",onPointerEnter:d,onPointerLeave:p,style:f,tabIndex:c,onClick:t,children:r})}},39103,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZodErrorMessages=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(97870),s=e.r(146575),l={fontSize:14,color:n.LIGHT_TEXT},u={color:"white",fontSize:13,fontFamily:"sans-serif",display:"flex",alignItems:"center"},c={width:12,height:12,flexShrink:0,fill:n.FAIL_COLOR};r.ZodErrorMessages=({zodValidationResult:e,viewTab:t})=>{if(e.success)throw Error("Expected error");let r=(0,a.useMemo)(()=>"json"===t?u:l,[t]),n=(0,a.useMemo)(()=>({...l,fontFamily:"monospace"}),[]);return"json"===t?(0,i.jsx)("div",{children:e.error.errors.map(e=>(0,i.jsxs)("div",{style:r,children:[(0,i.jsx)(o.WarningTriangle,{style:c}),(0,i.jsx)(s.Spacing,{x:1}),0===e.path.length?"Root":e.path.join("."),":"," ",e.message]},e.path.join(".")))}):(0,i.jsx)("div",{children:e.error.errors.map(e=>(0,i.jsxs)("div",{style:r,children:["-"," ",(0,i.jsx)("code",{style:n,children:0===e.path.length?"Root":e.path.join(".")}),": ",e.message]},e.path.join(".")))})}},363835,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deepEqual=function e(t,r){if(t===r)return!0;if(t instanceof Date&&r instanceof Date)return t.getTime()===r.getTime();if("object"!=typeof t||null===t||"object"!=typeof r||null===r)return!1;let i=Object.keys(t),a=Object.keys(r);if(i.length!==a.length)return!1;for(let n of i)if(!a.includes(n)||!e(t[n],r[n]))return!1;return!0}},709361,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t});Object.defineProperty(r,"__esModule",{value:!0}),r.RenderModalJSONPropsEditor=void 0;let s=e.r(222260),l=o(e.r(347540)),u=e.r(758927),c=e.r(921224),d=e.r(395096),p=e.r(362087),f=e.r(652693),h=e.r(898002),m=e.r(97870),g=e.r(146575),v=e.r(39103),y=e.r(363835),b={fontFamily:"monospace",flex:1},x={padding:"8px 12px",display:"flex",flexDirection:"column",flex:1},w=(e,t)=>{try{let r=u.NoReactInternals.deserializeJSONWithSpecialTypes(e),i=t.safeParse(r);return{str:e,value:r,validJSON:!0,zodValidation:i}}catch(t){return{str:e,validJSON:!1,error:t.message}}};r.RenderModalJSONPropsEditor=({setValue:e,value:t,defaultProps:r,onSave:i,showSaveButton:a,serializedJSON:n,schema:o})=>{if(null===n)throw Error("expecting serializedJSON to be defined");let u=(0,p.useKeybinding)(),[S,k]=l.default.useState(()=>w(n.serializedString,o)),C=(0,l.useCallback)(()=>{if(!S.validJSON)return;let e=JSON.parse(S.str);k({...S,str:JSON.stringify(e,null,2)})},[S,k]),E=(0,l.useCallback)(t=>{let r=w(t.target.value,o);if(r.validJSON){let i=o.safeParse(r.value);k({str:t.target.value,value:r.value,validJSON:r.validJSON,zodValidation:i}),i.success&&e(r.value)}else k({str:t.target.value,validJSON:r.validJSON,error:r.error})},[o,e]),_=(0,l.useMemo)(()=>!(0,y.deepEqual)(t,r),[r,t]);(0,l.useEffect)(()=>{(0,d.setUnsavedProps)(_)},[_]);let T=(0,l.useCallback)(()=>{_&&i()},[_,i]);(0,l.useEffect)(()=>{k(w(S.str,o))},[S.str,o]),(0,l.useEffect)(()=>{let e=u.registerKeybinding({event:"keydown",key:"s",commandCtrlKey:!0,callback:T,preventDefault:!0,triggerIfInputFieldFocused:!0,keepRegisteredWhenNotHighestContext:!1});return()=>{e.unregister()}},[u,T,i]);let P=(0,l.useCallback)(()=>{e(r),k(w(JSON.stringify(r,null,2),o))},[r,o,e]),I=(0,l.useMemo)(()=>S.validJSON&&S.zodValidation.success?b:{...b,borderColor:c.FAIL_COLOR},[S]);return(0,s.jsxs)("div",{style:x,children:[(0,s.jsx)(h.RemTextarea,{onChange:E,value:S.str,status:S.validJSON?"ok":"error",style:I}),(0,s.jsx)(g.Spacing,{y:1}),!1===S.validJSON?(0,s.jsx)(m.ValidationMessage,{align:"flex-start",message:S.error,type:"error"}):!1===S.zodValidation.success?(0,s.jsx)(v.ZodErrorMessages,{zodValidationResult:S.zodValidation,viewTab:"json"}):null,(0,s.jsx)(g.Spacing,{y:1}),(0,s.jsxs)(g.Row,{children:[(0,s.jsx)(f.Button,{disabled:!(_||!S.validJSON),onClick:P,children:"Reset"}),(0,s.jsx)(g.Flex,{}),(0,s.jsx)(f.Button,{disabled:!S.validJSON,onClick:C,children:"Format"}),(0,s.jsx)(g.Spacing,{x:1}),a?(0,s.jsx)(f.Button,{onClick:i,disabled:!(S.validJSON&&S.zodValidation.success)||!S.validJSON||!_,children:"Save"}):null]})]})}},388844,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TopLevelZodValue=r.InvalidSchema=r.InvalidDefaultProps=r.NoDefaultProps=r.NoSchemaDefined=r.ZodNotInstalled=void 0;let i=e.r(222260),a=e.r(921224),n=e.r(652693),o=e.r(490586),s=e.r(146575),l=e.r(39103),u={display:"flex",flex:1,flexDirection:"column",padding:"0 12px",justifyContent:"center",alignItems:"center",textAlign:"center",background:a.BACKGROUND},c={fontSize:14,color:a.LIGHT_TEXT,fontFamily:"sans-serif",lineHeight:1.5},d={fontSize:14,color:a.BLUE,fontFamily:"monospace"},p={padding:"8px 12px",overflowY:"auto"},f=()=>{window.open("https://www.remotion.dev/docs/schemas")};r.ZodNotInstalled=()=>(0,i.jsxs)("div",{style:u,children:[(0,i.jsxs)("div",{style:c,children:["Install ",(0,i.jsx)("code",{style:o.inlineCodeSnippet,children:"zod"})," as a dependency to interactively control the props of the composition."]}),(0,i.jsx)(s.Spacing,{y:2,block:!0}),(0,i.jsx)(n.Button,{onClick:f,children:"Learn how"})]}),r.NoSchemaDefined=()=>(0,i.jsxs)("div",{style:u,children:[(0,i.jsxs)("div",{style:c,children:["Make the props of this composition interactively editable by adding a"," ",(0,i.jsx)("code",{style:o.inlineCodeSnippet,children:"schema"})," prop to the"," ",(0,i.jsx)("code",{style:o.inlineCodeSnippet,children:"<Composition>"})," component."]}),(0,i.jsx)(s.Spacing,{y:2,block:!0}),(0,i.jsx)(n.Button,{onClick:f,children:"Learn how"})]}),r.NoDefaultProps=()=>(0,i.jsxs)("div",{style:u,children:[(0,i.jsxs)("div",{style:c,children:["The schema can not be edited because the"," ",(0,i.jsx)("code",{style:o.inlineCodeSnippet,children:"defaultProps"})," prop in the"," ",(0,i.jsx)("code",{style:o.inlineCodeSnippet,children:"<Composition>"})," does not exist."]}),(0,i.jsx)(s.Spacing,{y:1}),(0,i.jsxs)("div",{style:c,children:["Fix the schema by adding a"," ",(0,i.jsx)("code",{style:o.inlineCodeSnippet,children:"defaultProps"})," prop to your composition."]}),(0,i.jsx)(s.Spacing,{y:2,block:!0}),(0,i.jsx)(n.Button,{onClick:f,children:"Learn more"})]}),r.InvalidDefaultProps=({zodValidationResult:e})=>(0,i.jsxs)("div",{style:p,children:[(0,i.jsxs)("div",{style:c,children:["The schema can not be edited because the"," ",(0,i.jsx)("code",{style:o.inlineCodeSnippet,children:"defaultProps"})," prop in the"," ",(0,i.jsx)("code",{style:o.inlineCodeSnippet,children:"<Composition>"})," is not valid:"]}),(0,i.jsx)(s.Spacing,{y:1,block:!0}),(0,i.jsx)(l.ZodErrorMessages,{zodValidationResult:e,viewTab:"schema"}),(0,i.jsx)(s.Spacing,{y:1,block:!0}),(0,i.jsxs)("div",{style:c,children:["Fix the schema by changing the"," ",(0,i.jsx)("code",{style:o.inlineCodeSnippet,children:"defaultProps"})," prop in your composition so it does not give a type error."]})]}),r.InvalidSchema=({zodValidationResult:e,reset:t})=>(0,i.jsxs)("div",{style:p,children:[(0,i.jsx)("div",{style:c,children:"The data does not satisfy the schema:"}),(0,i.jsx)(s.Spacing,{y:1,block:!0}),(0,i.jsx)(l.ZodErrorMessages,{zodValidationResult:e,viewTab:"schema"}),(0,i.jsx)(s.Spacing,{y:1,block:!0}),(0,i.jsx)("div",{style:c,children:"Fix the schema using the JSON editor."}),(0,i.jsx)(s.Spacing,{y:1,block:!0}),(0,i.jsxs)("div",{style:c,children:["Alternatively, reset the data to the"," ",(0,i.jsx)("code",{style:o.inlineCodeSnippet,children:"defaultProps"})," that you have defined."]}),(0,i.jsx)(s.Spacing,{y:1,block:!0}),(0,i.jsx)(n.Button,{onClick:t,children:"Reset props"})]}),r.TopLevelZodValue=({typeReceived:e})=>(0,i.jsxs)("div",{style:u,children:[(0,i.jsxs)("div",{style:c,children:["The top-level type of the schema must be a pure"," ",(0,i.jsx)("code",{style:d,children:"z.object"}),". Instead got a schema of type"," ",(0,i.jsx)("code",{style:d,children:e})]}),(0,i.jsx)(s.Spacing,{y:1}),(0,i.jsx)("div",{style:c,children:"Fix the schema by changing the top-level Zod type to an object."}),(0,i.jsx)(s.Spacing,{y:2,block:!0}),(0,i.jsx)(n.Button,{onClick:f,children:"Learn more"})]})},462098,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fieldsetLabel=r.fieldSetText=r.input=r.rightRow=r.label=r.optionRow=void 0;let i=e.r(921224);r.optionRow={display:"flex",flexDirection:"row",minHeight:40,paddingLeft:16,paddingRight:16,paddingTop:8,paddingBottom:8},r.label={width:290,fontSize:15,lineHeight:"40px",color:i.LIGHT_TEXT,fontFamily:"sans-serif",display:"flex",flexDirection:"row",alignItems:"center"},r.rightRow={display:"flex",flexDirection:"row",justifyContent:"flex-end",alignSelf:"center",flex:1},r.input={minWidth:250},r.fieldSetText={color:i.LIGHT_TEXT,fontSize:14,fontFamily:"monospace"},r.fieldsetLabel={...r.fieldSetText,display:"flex",flexDirection:"row",alignItems:"center",width:"100%"}},757328,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Fieldset=r.SCHEMA_EDITOR_FIELDSET_PADDING=void 0;let i=e.r(222260),a=e.r(347540);r.SCHEMA_EDITOR_FIELDSET_PADDING=10;let n=(0,a.createContext)(!1);r.Fieldset=({children:e,shouldPad:t})=>{let o=(0,a.useContext)(n),s=(0,a.useMemo)(()=>t?{padding:r.SCHEMA_EDITOR_FIELDSET_PADDING,paddingTop:r.SCHEMA_EDITOR_FIELDSET_PADDING/2,paddingRight:o?0:r.SCHEMA_EDITOR_FIELDSET_PADDING}:{},[o,t]),l=(0,i.jsx)("div",{style:s,children:e});return t?(0,i.jsx)(n.Provider,{value:!0,children:l}):l}},29934,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.InlineRemoveButton=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(841674),o={height:14,color:"currentColor"};r.InlineRemoveButton=({onClick:e})=>{let t=(0,a.useCallback)(e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",style:o,children:(0,i.jsx)("path",{d:"M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z",fill:e})}),[]);return(0,i.jsx)(n.InlineAction,{renderAction:t,onClick:e})}},596045,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSchemaLabel=void 0,r.getSchemaLabel=e=>{let t=e[e.length-1];return"number"==typeof t&&void 0===e[e.length-2]?`[${t}]:`:`${t}:`}},272866,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SchemaLabel=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(146575),s=e.r(29934),l=e.r(49660),u=e.r(56373),c=e.r(596045),d=e.r(850301),p={fontSize:15,color:n.LIGHT_TEXT,fontFamily:"sans-serif",display:"flex",flexDirection:"row",alignItems:"center",flex:1};r.SchemaLabel=({jsonPath:e,isDefaultValue:t,onReset:r,onSave:f,showSaveButton:h,onRemove:m,saving:g,valid:v,saveDisabledByParent:y,suffix:b,handleClick:x})=>{let[w,S]=(0,a.useState)(!1),k=(0,a.useMemo)(()=>({fontFamily:"monospace",fontSize:14,color:v?w?"white":n.LIGHT_TEXT:n.FAIL_COLOR,lineHeight:"24px"}),[w,v]),C=(0,a.useCallback)(()=>{S(!0)},[]),E=(0,a.useCallback)(()=>{S(!1)},[]),_=(0,i.jsxs)("span",{style:k,children:[(0,c.getSchemaLabel)(e)," ",b||null]});return(0,i.jsxs)("div",{style:p,className:d.DEFAULT_PROPS_PATH_CLASSNAME,"data-json-path":e.join("."),children:[x?(0,i.jsx)("button",{onPointerEnter:C,onPointerLeave:E,type:"button",onClick:x,style:{border:"none",padding:0},children:_}):_,(0,i.jsx)(o.Flex,{}),t?null:(0,i.jsx)(l.SchemaResetButton,{onClick:r}),t?null:h?(0,i.jsx)(u.SchemaSaveButton,{onClick:f,disabled:g||!v||y}):null,m?(0,i.jsx)(s.InlineRemoveButton,{onClick:m}):null]})}},80593,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Plus=void 0;let i=e.r(222260);r.Plus=({color:e,...t})=>(0,i.jsx)("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",children:(0,i.jsx)("path",{fill:e,d:"M432 256c0 17.69-14.33 32.01-32 32.01H256v144c0 17.69-14.33 31.99-32 31.99s-32-14.3-32-31.99v-144H48c-17.67 0-32-14.32-32-32.01s14.33-31.99 32-31.99H192v-144c0-17.69 14.33-32.01 32-32.01s32 14.32 32 32.01v144h144C417.7 224 432 238.3 432 256z"})})},412629,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createZodValues=void 0,r.createZodValues=(e,t,i)=>{if(!e)throw Error("Invalid zod schema");let a=e._def,n=a.typeName;switch(n){case t.ZodFirstPartyTypeKind.ZodString:return"";case t.ZodFirstPartyTypeKind.ZodNumber:for(let e of a.checks)if("min"===e.kind||"max"===e.kind&&e.value<0)return e.value;return 0;case t.ZodFirstPartyTypeKind.ZodBigInt:return BigInt(0);case t.ZodFirstPartyTypeKind.ZodBoolean:return!1;case t.ZodFirstPartyTypeKind.ZodNaN:return NaN;case t.ZodFirstPartyTypeKind.ZodDate:return new Date;case t.ZodFirstPartyTypeKind.ZodSymbol:return Symbol("remotion");case t.ZodFirstPartyTypeKind.ZodUndefined:return;case t.ZodFirstPartyTypeKind.ZodNull:return null;case t.ZodFirstPartyTypeKind.ZodAny:throw Error("Cannot create a value for type z.any()");case t.ZodFirstPartyTypeKind.ZodUnknown:throw Error("Cannot create a value for type z.unknown()");case t.ZodFirstPartyTypeKind.ZodNever:throw Error("Cannot create a value for type z.never()");case t.ZodFirstPartyTypeKind.ZodVoid:return;case t.ZodFirstPartyTypeKind.ZodObject:{let e=a.shape();return Object.keys(e).reduce((a,n)=>(a[n]=(0,r.createZodValues)(e[n],t,i),a),{})}case t.ZodFirstPartyTypeKind.ZodArray:return[(0,r.createZodValues)(a.type,t,i)];case t.ZodFirstPartyTypeKind.ZodUnion:{let e=a.options[0];return e?(0,r.createZodValues)(e,t,i):void 0}case t.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:{let e=a.options[0];return(0,r.createZodValues)(e,t,i)}case t.ZodFirstPartyTypeKind.ZodLiteral:return a.value;case t.ZodFirstPartyTypeKind.ZodEffects:if(i&&e._def.description===i.ZodZypesInternals.REMOTION_COLOR_BRAND)return"#ffffff";if(i&&e._def.description===i.ZodZypesInternals.REMOTION_TEXTAREA_BRAND)return"";if(i&&e._def.description===i.ZodZypesInternals.REMOTION_MATRIX_BRAND)return[[1,0,0],[0,1,0],[0,0,1]];return(0,r.createZodValues)(a.schema,t,i);case t.ZodFirstPartyTypeKind.ZodIntersection:{let{left:e,right:n}=a,o=(0,r.createZodValues)(e,t,i);if("object"!=typeof o)throw Error("Cannot create value for type z.intersection: Left side is not an object");let s=(0,r.createZodValues)(n,t,i);if("object"!=typeof s)throw Error("Cannot create value for type z.intersection: Right side is not an object");return{...o,...s}}case t.ZodFirstPartyTypeKind.ZodTuple:return a.items.map(e=>(0,r.createZodValues)(e,t,i));case t.ZodFirstPartyTypeKind.ZodRecord:return{key:(0,r.createZodValues)(a.valueType,t,i)};case t.ZodFirstPartyTypeKind.ZodMap:{let e=(0,r.createZodValues)(a.valueType,t,i);return new Map([[(0,r.createZodValues)(a.keyType,t,i),e]])}case t.ZodFirstPartyTypeKind.ZodLazy:{let e=a.getter();return(0,r.createZodValues)(e,t,i)}case t.ZodFirstPartyTypeKind.ZodSet:return new Set([(0,r.createZodValues)(a.valueType,t,i)]);case t.ZodFirstPartyTypeKind.ZodFunction:throw Error("Cannot create a value for type function");case t.ZodFirstPartyTypeKind.ZodEnum:{let{values:e}=a;return e[0]}case t.ZodFirstPartyTypeKind.ZodNativeEnum:return 0;case t.ZodFirstPartyTypeKind.ZodOptional:case t.ZodFirstPartyTypeKind.ZodNullable:return(0,r.createZodValues)(a.innerType,t,i);case t.ZodFirstPartyTypeKind.ZodDefault:return a.defaultValue();case t.ZodFirstPartyTypeKind.ZodCatch:return(0,r.createZodValues)(a.innerType,t,i);case t.ZodFirstPartyTypeKind.ZodPromise:return Promise.resolve((0,r.createZodValues)(a.type,t,i));case t.ZodFirstPartyTypeKind.ZodBranded:return(0,r.createZodValues)(a.type,t,i);case t.ZodFirstPartyTypeKind.ZodPipeline:return(0,r.createZodValues)(a.out,t,i);default:throw Error("Not implemented: "+n)}}},512891,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SchemaArrayItemSeparationLine=r.SchemaSeparationLine=r.VERTICAL_GUIDE_HEIGHT=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(80593),s=e.r(798207),l=e.r(146575),u=e.r(462098),c=e.r(412629);r.VERTICAL_GUIDE_HEIGHT=24;let d={borderBottom:"1px solid "+n.LINE_COLOR};r.SchemaSeparationLine=()=>(0,i.jsx)("div",{style:d});let p={borderBottom:"1px solid "+n.LINE_COLOR,marginTop:-r.VERTICAL_GUIDE_HEIGHT/2,pointerEvents:"none",width:"100%",flexBasis:"100%"};r.SchemaArrayItemSeparationLine=({onChange:e,index:t,schema:d,isLast:f,showAddButton:h})=>{let[m,g]=(0,a.useState)(!1),[v,y]=(0,a.useState)(!1),b=(0,s.useZodTypesIfPossible)(),x=(0,s.useZodIfPossible)();if(!x)throw Error("expected zod");let w=d._def,S=(0,a.useCallback)(()=>{e(e=>[...e.slice(0,t+1),(0,c.createZodValues)(w.type,x,b),...e.slice(t+1)],!1,!0)},[w.type,t,e,x,b]),k=(0,a.useMemo)(()=>({display:"flex",justifyContent:"center",height:r.VERTICAL_GUIDE_HEIGHT,opacity:m||f?1:0,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}),[f,m]),C=(0,a.useMemo)(()=>({background:n.BACKGROUND,paddingLeft:10,paddingRight:10}),[]),E=(0,a.useCallback)(()=>{g(!0)},[]),_=(0,a.useCallback)(()=>{g(!1)},[]),T=(0,a.useCallback)(()=>{y(!0)},[]),P=(0,a.useCallback)(()=>{y(!1)},[]);return(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"row",height:r.VERTICAL_GUIDE_HEIGHT},children:[(0,i.jsxs)("div",{style:{flex:1,position:"relative",display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[h&&(0,i.jsx)("div",{style:k,onPointerEnter:E,onPointerLeave:_,children:(0,i.jsx)("div",{onClick:S,style:C,onPointerEnter:T,onPointerLeave:P,children:(0,i.jsx)(o.Plus,{color:v?"white":n.LIGHT_TEXT,style:{height:r.VERTICAL_GUIDE_HEIGHT/2}})})}),(0,i.jsx)("div",{style:p})]}),f?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.Spacing,{x:1}),(0,i.jsx)("div",{style:{...u.fieldSetText,alignItems:"center",display:"flex"},children:"]"})]}):null]})}},65609,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SchemaVerticalGuide=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(512891),o={flex:1};r.SchemaVerticalGuide=({isRoot:e,children:t})=>{let r=(0,a.useMemo)(()=>({display:"flex",flexDirection:"row",position:"relative",marginLeft:4*!e}),[e]),s=(0,a.useMemo)(()=>e?{}:{height:`calc(100% - ${n.VERTICAL_GUIDE_HEIGHT/2}px)`,width:1,background:"#363A3E",position:"absolute"},[e]);return(0,i.jsxs)("div",{style:r,children:[(0,i.jsx)("div",{style:s}),(0,i.jsx)("div",{style:o,children:t})]})}},875660,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZodArrayItemEditor=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(798207),o=e.r(411474);r.ZodArrayItemEditor=({def:e,onChange:t,jsonPath:r,index:s,value:l,defaultValue:u,onSave:c,showSaveButton:d,saving:p,saveDisabledByParent:f,mayPad:h,mayRemove:m})=>{if(!(0,n.useZodIfPossible)())throw Error("expected zod");let g=(0,a.useCallback)(()=>{t(e=>[...e.slice(0,s),...e.slice(s+1)],!1,!0)},[s,t]),v=(0,a.useCallback)(e=>{t(t=>[...t.slice(0,s),"function"==typeof e?e(t[s]):e,...t.slice(s+1)],!1,!1)},[s,t]),y=(0,a.useMemo)(()=>[...r,s],[s,r]),b=(0,a.useCallback)(e=>{c(t=>[...t.slice(0,s),e(t[s]),...t.slice(s+1)],!1,!1)},[s,c]);return(0,i.jsx)("div",{children:(0,i.jsx)(o.ZodSwitch,{jsonPath:y,schema:e.type,value:l,setValue:v,defaultValue:u,onSave:b,showSaveButton:d,onRemove:m?g:null,saving:p,saveDisabledByParent:f,mayPad:h})})}},114881,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.InfoTooltip=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(494296),s=e.r(490586),l={height:7,display:"block",overflow:"visible",marginLeft:7},u={...l,transform:"translateY(1px)"},c={...l,marginTop:-1};r.InfoTooltip=({children:e,arrowDirection:t,backgroundColor:r})=>{let l=(0,a.useMemo)(()=>({boxShadow:"down"===t?s.SHADOW_TOWARDS_TOP:s.SHADOW_TOWARDS_BOTTOM,background:r,color:"white",border:"0.5px solid "+n.BORDER_COLOR,maxHeight:200,overflow:"auto",borderRadius:"4px"}),[t,r]);return(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"up"===t?"column-reverse":"column",alignItems:"flex-start"},children:[(0,i.jsx)("div",{style:l,className:o.VERTICAL_SCROLLBAR_CLASSNAME,children:e}),"down"===t?(0,i.jsx)("svg",{viewBox:"0 0 14 7",style:c,children:(0,i.jsx)("path",{d:"M 14 0 L 7 7 L 0 0",fill:r,strokeLinecap:"butt",stroke:n.BORDER_COLOR,strokeWidth:.5})}):null,"up"===t?(0,i.jsx)("svg",{viewBox:"0 0 14 7",style:u,children:(0,i.jsx)("path",{d:"M 0 7 L 7 0 L 14 7",fill:r,strokeLinecap:"butt",stroke:n.BORDER_COLOR,strokeWidth:.5})}):null]})}},175143,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.InfoBubble=void 0;let a=e.r(222260),n=e.r(853987),o=e.r(347540),s=i(e.r(149579)),l=e.r(921224),u=e.r(260240),c=e.r(414321),d=e.r(490586),p=e.r(114881),f={color:l.LIGHT_TEXT,height:15},h={display:"inline-block",border:"none",fontSize:14,verticalAlign:"text-bottom"};r.InfoBubble=({title:e,children:t})=>{let[r,i]=(0,o.useState)(!1),[m,g]=(0,o.useState)(!1),v=(0,o.useRef)(null),{tabIndex:y,currentZIndex:b}=(0,u.useZIndex)(),x=n.PlayerInternals.useElementSize(v,{triggerOnWindowResize:!0,shouldApplyCssTransforms:!0}),w=null==x?void 0:x.refresh,S=(0,o.useCallback)(()=>{g(!1)},[]);(0,o.useEffect)(()=>{let{current:e}=v;if(!e)return;let t=()=>i(!0),r=()=>i(!1),a=()=>g(e=>(e||null==w||w(),!e)),n=e=>{if(e.stopPropagation(),0===e.detail)return g(e=>!e)};return e.addEventListener("mouseenter",t),e.addEventListener("mouseleave",r),e.addEventListener("pointerup",a),e.addEventListener("click",n),()=>{e.removeEventListener("mouseenter",t),e.removeEventListener("mouseleave",r),e.removeEventListener("pointerup",a),e.removeEventListener("click",n)}},[w]);let k=(0,o.useMemo)(()=>{if(!x)return"down";let e=x.windowSize.height-(x.top+x.height);return x.top>e?"down":"up"},[x]),C=(0,o.useMemo)(()=>x&&m?{..."up"===k?{position:"fixed",top:x.top+x.height}:{position:"fixed",bottom:x.windowSize.height-x.top},left:x.left}:null,[k,m,x]),E=(0,o.useMemo)(()=>({...h,userSelect:"none",WebkitUserSelect:"none",color:"white",display:"inline-flex",flexDirection:"row",alignItems:"center",padding:6}),[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{ref:v,tabIndex:y,style:E,title:e,type:"button",children:(0,a.jsx)("svg",{style:f,viewBox:"0 0 512 512",children:(0,a.jsx)("path",{fill:r?"white":l.LIGHT_TEXT,d:"M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336c-13.3 0-24 10.7-24 24s10.7 24 24 24h80c13.3 0 24-10.7 24-24s-10.7-24-24-24h-8V248c0-13.3-10.7-24-24-24H216c-13.3 0-24 10.7-24 24s10.7 24 24 24h24v64H216zm40-144a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"})})}),C?s.default.createPortal((0,a.jsx)("div",{style:d.outerPortal,className:"css-reset",children:(0,a.jsx)(u.HigherZIndex,{onOutsideClick:S,onEscape:S,children:(0,a.jsx)("div",{style:C,children:(0,a.jsx)(p.InfoTooltip,{backgroundColor:l.INPUT_BACKGROUND,arrowDirection:k,children:t})})})}),(0,c.getPortal)(b)):null]})}},419928,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZodFieldValidation=void 0;let i=e.r(222260),a=e.r(146575),n=e.r(97870),o=e.r(175143),s={display:"flex",flexDirection:"row",alignItems:"center"},l={padding:10},u={fontSize:14};r.ZodFieldValidation=({localValue:e,path:t})=>e.zodValidation.success?null:(0,i.jsxs)("div",{style:s,children:[(0,i.jsx)(n.ValidationMessage,{align:"flex-start",message:e.zodValidation.error.format()._errors[0],type:"error"}),(0,i.jsx)(a.Spacing,{x:.5}),(0,i.jsx)(o.InfoBubble,{title:"Zod validation failure",children:(0,i.jsxs)("div",{style:l,children:[(0,i.jsx)("div",{style:u,children:"Zod Validation has failed:"}),e.zodValidation.error.errors.map((e,r)=>(0,i.jsxs)("div",{style:u,children:["Type: ",e.code," ",(0,i.jsx)("br",{}),"Message: ",e.message,(0,i.jsx)("br",{}),"Path: ",t.join(".")]},r))]})}),(0,i.jsx)(a.Spacing,{x:.5})]})},355244,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useLocalState=r.RevisionContext=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(363835);r.RevisionContext=(0,a.createContext)({childResetRevision:0}),r.useLocalState=({unsavedValue:e,schema:t,setValue:s,savedValue:l})=>{let u=(0,a.useContext)(r.RevisionContext).childResetRevision,[c,d]=(0,a.useState)(0),[p,f]=(0,a.useState)(()=>({[u]:{value:e,keyStabilityRevision:0,zodValidation:t.safeParse(e)}})),h=(0,a.useMemo)(()=>{var r;return(null!=(r=p[u])?r:null)===null?{value:e,keyStabilityRevision:0,zodValidation:t.safeParse(e)}:p[u]},[p,u,t,e]);(0,a.useEffect)(()=>{let e=()=>{d(e=>e+1),f({})};return window.addEventListener(n.Internals.PROPS_UPDATED_EXTERNALLY,e),()=>{window.removeEventListener(n.Internals.PROPS_UPDATED_EXTERNALLY,e)}},[]);let m=(0,a.useMemo)(()=>null!=h?h:{value:l,keyStabilityRevision:0,zodValidation:t.safeParse(l)},[h,l,t]),g=(0,a.useRef)(m);g.current=m;let v=(0,a.useCallback)((e,r,i)=>{let a=e(g.current.value);if((0,o.deepEqual)(a,g.current.value))return;let n=t.safeParse(a);(n.success||r)&&s(e,r,i),f(()=>{let e={keyStabilityRevision:m.keyStabilityRevision+ +!!i,value:a,zodValidation:n};return g.current=e,{...h,[u]:e}})},[m.keyStabilityRevision,h,u,t,s]),y=(0,a.useMemo)(()=>({childResetRevision:c}),[c]),b=(0,a.useCallback)(()=>{v(()=>l,!0,!0),d(e=>e+1)},[l,v]),x=(0,a.useCallback)(({children:e})=>(0,i.jsx)(r.RevisionContext.Provider,{value:y,children:e}),[y]);return(0,a.useMemo)(()=>({localValue:m,onChange:v,reset:b,RevisionContextProvider:x}),[x,m,v,b])}},168528,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t});Object.defineProperty(r,"__esModule",{value:!0}),r.ZodArrayEditor=void 0;let s=e.r(222260),l=o(e.r(347540)),u=e.r(798207),c=e.r(757328),d=e.r(272866),p=e.r(512891),f=e.r(65609),h=e.r(875660),m=e.r(419928),g=e.r(412629),v=e.r(363835),y=e.r(355244);r.ZodArrayEditor=({schema:e,jsonPath:t,setValue:r,defaultValue:i,value:a,onSave:n,showSaveButton:o,onRemove:b,saving:x,saveDisabledByParent:w,mayPad:S})=>{let{localValue:k,onChange:C,RevisionContextProvider:E,reset:_}=(0,y.useLocalState)({unsavedValue:a,schema:e,setValue:r,savedValue:i}),[T,P]=(0,l.useState)(!0),I=e._def,A=(0,l.useMemo)(()=>T?" [":" [...] ",[T]),O=(0,u.useZodIfPossible)();if(!O)throw Error("expected zod");let M=(0,u.useZodTypesIfPossible)();if(I.typeName!==O.ZodFirstPartyTypeKind.ZodArray)throw Error("expected object");let F=(0,l.useMemo)(()=>(0,v.deepEqual)(k.value,i),[i,k]);return(0,s.jsxs)(c.Fieldset,{shouldPad:S,success:k.zodValidation.success,children:[(0,s.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:(0,s.jsx)(d.SchemaLabel,{onReset:_,isDefaultValue:F,jsonPath:t,onRemove:b,suffix:A,onSave:()=>{n(()=>k.value,!1,!1)},saveDisabledByParent:w,saving:x,showSaveButton:o,valid:k.zodValidation.success,handleClick:()=>P(!T)})}),T?(0,s.jsx)(E,{children:(0,s.jsxs)(f.SchemaVerticalGuide,{isRoot:!1,children:[k.value.map((r,a)=>{var u;return(0,s.jsxs)(l.default.Fragment,{children:[(0,s.jsx)(h.ZodArrayItemEditor,{onChange:C,value:r,def:I,index:a,jsonPath:t,defaultValue:null!=(u=null==i?void 0:i[a])?u:(0,g.createZodValues)(I.type,O,M),onSave:n,showSaveButton:o,saving:x,saveDisabledByParent:w,mayPad:S,mayRemove:!0}),(0,s.jsx)(p.SchemaArrayItemSeparationLine,{schema:e,index:a,onChange:C,isLast:a===k.value.length-1,showAddButton:!0})]},`${a}${k.keyStabilityRevision}`)}),0===a.length?(0,s.jsx)(p.SchemaArrayItemSeparationLine,{schema:e,index:0,onChange:C,isLast:!0,showAddButton:!0}):null]})}):null,(0,s.jsx)(m.ZodFieldValidation,{path:t,localValue:k})]})}},671927,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Checkbox=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(170260),s={height:20,width:20,position:"relative"},l={width:10,height:10,backgroundColor:n.LIGHT_TEXT,borderRadius:"50%"},u={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",height:20,width:20,top:0,left:0,pointerEvents:"none",color:"white"};r.Checkbox=({checked:e,onChange:t,disabled:r,name:c,rounded:d})=>{let p=(0,a.useRef)(null),f=(0,a.useMemo)(()=>({appearance:"none",background:r?"transparent":n.INPUT_BACKGROUND,border:"1px solid "+n.INPUT_BORDER_COLOR_UNHOVERED,height:20,width:20,top:0,left:0,position:"absolute",margin:0}),[r]);return(0,a.useEffect)(()=>{p.current&&p.current.style.setProperty("border-radius",d?"50%":"0%","important")},[d]),(0,i.jsxs)("div",{style:s,children:[(0,i.jsx)("input",{ref:p,style:f,type:"checkbox",checked:e,onChange:t,disabled:r,name:c}),(0,i.jsx)("div",{style:u,children:e?d?(0,i.jsx)("div",{style:l}):(0,i.jsx)(o.Checkmark,{}):null})]})}},872113,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZodBooleanEditor=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(671927),o=e.r(757328),s=e.r(272866),l=e.r(355244),u={width:"100%"};r.ZodBooleanEditor=({schema:e,jsonPath:t,value:r,setValue:c,onSave:d,defaultValue:p,onRemove:f,showSaveButton:h,saving:m,saveDisabledByParent:g,mayPad:v})=>{let{localValue:y,onChange:b,reset:x}=(0,l.useLocalState)({schema:e,setValue:c,unsavedValue:r,savedValue:p}),w=(0,a.useCallback)(e=>{b(()=>e.target.checked,!1,!1)},[b]),S=(0,a.useCallback)(()=>{d(()=>r,!1,!1)},[d,r]);return(0,i.jsxs)(o.Fieldset,{shouldPad:v,success:y.zodValidation.success,children:[(0,i.jsx)(s.SchemaLabel,{handleClick:null,isDefaultValue:y.value===p,jsonPath:t,onReset:x,onSave:S,showSaveButton:h,onRemove:f,saving:m,valid:!0,saveDisabledByParent:g,suffix:null}),(0,i.jsx)("div",{style:u,children:(0,i.jsx)(n.Checkbox,{name:t.join("."),checked:y.value,onChange:w,disabled:!1})})]})}},423921,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.colorWithNewOpacity=void 0,r.colorWithNewOpacity=(e,t,r)=>{let{r:i,g:a,b:n}=r.ZodZypesInternals.parseColor(e);return t>=255?`#${i.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}`:`rgba(${i}, ${a}, ${n}, ${(t/255).toFixed(2)})`}},190327,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t});Object.defineProperty(r,"__esModule",{value:!0}),r.InputDragger=void 0;let s=e.r(222260),l=o(e.r(347540)),u=e.r(49019),c=e.r(921224),d=e.r(971831),p=e.r(83572),f=e.r(260240),h=e.r(310099);r.InputDragger=l.default.forwardRef(({onValueChange:e,min:t,max:r,step:i,value:a,onTextChange:n,formatter:o=e=>String(e),status:m,rightAlign:g,...v},y)=>{let[b,x]=(0,l.useState)(!1),w=(0,l.useRef)(null),S=(0,l.useMemo)(()=>({...h.inputBaseStyle,backgroundColor:"transparent",borderColor:"transparent"}),[]),k=(0,l.useMemo)(()=>({borderBottom:"1px dotted "+c.BLUE,paddingBottom:1,color:c.BLUE,cursor:"ew-resize",userSelect:"none",WebkitUserSelect:"none",fontSize:13,fontVariantNumeric:"tabular-nums"}),[]),C=(0,l.useCallback)(e=>{(0,p.getClickLock)()||e.stopPropagation(),(0,p.getClickLock)()||x(!0)},[]),E=(0,l.useCallback)(()=>{x(!1)},[]),_=(0,l.useCallback)(()=>{if(!w.current)return;let e=w.current.value;""===e.trim()?E():w.current.checkValidity()?(null==n||n(e),x(!1)):w.current.reportValidity()},[E,n]),T=(0,l.useCallback)(e=>{var t;"Enter"===e.key&&(null==(t=w.current)||t.blur())},[]),P=(0,l.useCallback)(n=>{let{pageX:o,pageY:s,button:l}=n;if(0!==l)return;let c=n=>{var l;let c,d=n.pageX-o,f=Math.sqrt(d**2+(n.pageY-s)**2),h=Number(null!=i?i:1),m=Number(null!=t?t:0),g=Number(null!=r?r:1/0);f>4&&(0,p.setClickLock)(!0);let v=(0,u.interpolate)(d,[-5,-4,0,4,5],[-h,0,0,0,h]);e((l=Math.min(g,Math.max(m,Number(a)+v)),Math.ceil(l*(c=1/h))/c))};window.addEventListener("mousemove",c),window.addEventListener("pointerup",()=>{window.removeEventListener("mousemove",c),setTimeout(()=>{(0,p.setClickLock)(!1)},2)},{once:!0})},[i,t,r,a,e]);(0,l.useEffect)(()=>{var e;b&&(null==(e=w.current)||e.select())},[b]);let I=(0,l.useMemo)(()=>void 0!==i?i:"number"==typeof t&&t%1==0?1:1e-4,[t,i]);return b?(0,s.jsx)(f.HigherZIndex,{onEscape:E,onOutsideClick:d.noop,children:(0,s.jsx)(h.RemotionInput,{ref:w,autoFocus:!0,onKeyPress:T,onBlur:_,min:t,max:r,step:I,defaultValue:a,status:m,pattern:"[0-9]*[.]?[0-9]*",rightAlign:g,...v})}):(0,s.jsx)("button",{ref:y,type:"button",style:S,onClick:C,onPointerDown:P,children:(0,s.jsx)("span",{style:k,children:o(a)})})})},687528,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RemInputTypeColor=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(260240),s=e.r(310099),l={padding:0,borderStyle:"solid",borderWidth:1};r.RemInputTypeColor=(0,a.forwardRef)(({status:e,...t},r)=>{let[u,c]=(0,a.useState)(!1),[d,p]=(0,a.useState)(!1),f=(0,a.useRef)(null),{tabIndex:h}=(0,o.useZIndex)(),m=(0,a.useMemo)(()=>{var r;return{backgroundColor:n.INPUT_BACKGROUND,...l,borderColor:(0,s.getInputBorderColor)({isFocused:u,isHovered:d,status:e}),...null!=(r=t.style)?r:{}}},[u,d,t.style,e]);return(0,a.useImperativeHandle)(r,()=>f.current,[]),(0,a.useEffect)(()=>{if(!f.current)return;let{current:e}=f,t=()=>c(!0),r=()=>c(!1),i=()=>p(!0),a=()=>p(!1);return e.addEventListener("focus",t),e.addEventListener("blur",r),e.addEventListener("mouseenter",i),e.addEventListener("mouseleave",a),()=>{e.removeEventListener("focus",t),e.removeEventListener("blur",r),e.removeEventListener("mouseenter",i),e.removeEventListener("mouseleave",a)}},[f]),(0,i.jsx)("input",{ref:f,type:"color",tabIndex:h,...t,name:t.name,style:m})})},70851,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZodColorEditor=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(423921),o=e.r(190327),s=e.r(310099),l=e.r(687528),u=e.r(798207),c=e.r(146575),d=e.r(757328),p=e.r(272866),f=e.r(419928),h=e.r(355244),m={width:"100%"};r.ZodColorEditor=({jsonPath:e,value:t,setValue:r,showSaveButton:g,defaultValue:v,schema:y,onSave:b,onRemove:x,saving:w,saveDisabledByParent:S,mayPad:k})=>{if(!(0,u.useZodIfPossible)())throw Error("expected zod");let C=(0,u.useZodTypesIfPossible)();if(!C)throw Error("expected zod color");let{localValue:E,onChange:_,reset:T}=(0,h.useLocalState)({schema:y,setValue:r,unsavedValue:t,savedValue:v}),{a:P,b:I,g:A,r:O}=E.zodValidation.success?C.ZodZypesInternals.parseColor(E.value):{a:1,b:0,g:0,r:0},M=(0,a.useCallback)(e=>{let t=(0,n.colorWithNewOpacity)(e.target.value,Math.round(P),C);_(()=>t,!1,!1)},[P,_,C]),F=(0,a.useCallback)(e=>{let t=e.target.value;_(()=>t,!1,!1)},[_]),R=(0,a.useCallback)(()=>{b(()=>t,!1,!1)},[b,t]),D=`#${O.toString(16).padStart(2,"0")}${A.toString(16).padStart(2,"0")}${I.toString(16).padStart(2,"0")}`,j=E.zodValidation.success?"ok":"error",L=(0,a.useMemo)(()=>({height:39,width:45,display:"inline-block"}),[]),B=(0,a.useCallback)(e=>{let t=(0,n.colorWithNewOpacity)(E.value,Math.round(Number(e)/100*255),C);_(()=>t,!1,!1)},[E.value,_,C]),N=(0,a.useCallback)(e=>{let t=(0,n.colorWithNewOpacity)(E.value,Math.round(Number(e)/100*255),C);_(()=>t,!1,!1)},[E.value,_,C]);return(0,i.jsxs)(d.Fieldset,{shouldPad:k,success:E.zodValidation.success,children:[(0,i.jsx)(p.SchemaLabel,{handleClick:null,isDefaultValue:E.value===v,jsonPath:e,onReset:T,onSave:R,showSaveButton:g,onRemove:x,saving:w,valid:E.zodValidation.success,saveDisabledByParent:S,suffix:null}),(0,i.jsxs)("div",{style:m,children:[(0,i.jsxs)(c.Row,{align:"center",children:[(0,i.jsx)("div",{style:L,children:(0,i.jsx)(l.RemInputTypeColor,{type:"color",style:{height:39},value:D,onChange:M,className:"__remotion_color_picker",status:j,name:e.join(".")})}),(0,i.jsx)(c.Spacing,{x:1,block:!0}),(0,i.jsx)(s.RemotionInput,{value:E.value,status:j,placeholder:e.join("."),onChange:F,rightAlign:!1}),(0,i.jsx)(c.Spacing,{x:1}),(0,i.jsx)(o.InputDragger,{onTextChange:B,onValueChange:N,status:j,value:P/255*100,min:0,max:100,step:1,formatter:e=>`${Math.round(Number(e))}%`,rightAlign:!1})]}),(0,i.jsx)(f.ZodFieldValidation,{path:e,localValue:E})]})]})}},177247,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZodDateEditor=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(310099),s=e.r(146575),l=e.r(757328),u=e.r(272866),c=e.r(419928),d=e.r(355244),p={width:"100%"},f={fontFamily:"sans-serif",fontSize:12,color:n.VERY_LIGHT_TEXT},h={colorScheme:"dark"};r.ZodDateEditor=({jsonPath:e,value:t,setValue:r,showSaveButton:n,defaultValue:m,schema:g,onSave:v,onRemove:y,saving:b,saveDisabledByParent:x,mayPad:w})=>{var S;let k,C,E,_,T,P,I,{localValue:A,onChange:O,reset:M}=(0,d.useLocalState)({schema:g,setValue:r,unsavedValue:t,savedValue:m}),F=(0,a.useCallback)(e=>{O(()=>new Date(e.target.value),!1,!1)},[O]),R=(0,a.useCallback)(()=>{v(()=>t,!1,!1)},[v,t]);return(0,i.jsxs)(l.Fieldset,{shouldPad:w,success:A.zodValidation.success,children:[(0,i.jsx)(u.SchemaLabel,{handleClick:null,isDefaultValue:A.value.getTime()===m.getTime(),jsonPath:e,onReset:M,onSave:R,showSaveButton:n,onRemove:y,saving:b,valid:A.zodValidation.success,saveDisabledByParent:x,suffix:null}),(0,i.jsxs)("div",{style:p,children:[(0,i.jsx)(o.RemotionInput,{value:(k=(S=A.value).getFullYear(),C=S.getMonth()+1,E=S.getDate(),_=S.getHours(),T=S.getMinutes(),P=S.getSeconds(),I=S.getMilliseconds(),`${k}-${C.toString().padStart(2,"0")}-${E.toString().padStart(2,"0")}T${_.toString().padStart(2,"0")}:${T.toString().padStart(2,"0")}:${P.toString().padStart(2,"0")}.${I.toString().padStart(3,"0")}`),type:"datetime-local",status:A.zodValidation.success?"ok":"error",placeholder:e.join("."),onChange:F,style:h,rightAlign:!1}),(0,i.jsx)(s.Spacing,{y:1,block:!0}),(0,i.jsx)("div",{style:f,children:"Date is in local format"}),(0,i.jsx)(c.ZodFieldValidation,{path:e,localValue:A})]})]})}},221321,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZodDefaultEditor=void 0;let i=e.r(222260),a=e.r(411474);r.ZodDefaultEditor=({jsonPath:e,schema:t,setValue:r,onSave:n,defaultValue:o,value:s,showSaveButton:l,onRemove:u,saving:c,saveDisabledByParent:d,mayPad:p})=>{let{innerType:f}=t._def;return(0,i.jsx)(a.ZodSwitch,{defaultValue:o,jsonPath:e,onRemove:u,onSave:n,schema:f,setValue:r,showSaveButton:l,value:s,saving:c,saveDisabledByParent:d,mayPad:p})}},663412,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZodDiscriminatedUnionEditor=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(170260),o=e.r(432804),s=e.r(798207),l=e.r(757328),u=e.r(272866),c=e.r(677836),d=e.r(412629),p=e.r(355244);r.ZodDiscriminatedUnionEditor=({schema:e,setValue:t,showSaveButton:r,saving:f,value:h,defaultValue:m,saveDisabledByParent:g,onSave:v,mayPad:y,jsonPath:b,onRemove:x})=>{let w=(0,s.useZodIfPossible)();if(!w)throw Error("expected zod");let S=(0,s.useZodTypesIfPossible)(),k=e._def,C=(0,a.useMemo)(()=>[...k.optionsMap.keys()],[k.optionsMap]),{localValue:E,onChange:_,reset:T}=(0,p.useLocalState)({schema:e,setValue:t,unsavedValue:h,savedValue:m}),P=(0,a.useMemo)(()=>C.map(e=>({value:e,label:e,id:e,keyHint:null,leftItem:e===h[k.discriminator]?(0,i.jsx)(n.Checkmark,{}):null,onClick:()=>{let t=(0,d.createZodValues)(k.optionsMap.get(e),w,S);_(()=>t,!1,!1)},quickSwitcherLabel:null,subMenu:null,type:"item"})),[C,_,k.discriminator,k.optionsMap,h,w,S]),I=(0,a.useCallback)(()=>{v(()=>h,!1,!1)},[v,h]),A=(0,a.useMemo)(()=>({discriminator:k.discriminator,markup:(0,i.jsxs)(l.Fieldset,{shouldPad:y,success:!0,children:[(0,i.jsx)(u.SchemaLabel,{handleClick:null,isDefaultValue:E.value[k.discriminator]===m[k.discriminator],jsonPath:[...b,k.discriminator],onRemove:x,onReset:T,onSave:I,saveDisabledByParent:g,saving:f,showSaveButton:r,suffix:null,valid:E.zodValidation.success}),(0,i.jsx)(o.Combobox,{title:"Select type",values:P,selectedId:h[k.discriminator]})]},"replacement")}),[P,m,b,E.value,E.zodValidation.success,y,x,T,I,g,f,r,k.discriminator,h]);return(0,i.jsx)(c.ZodObjectEditor,{jsonPath:b,mayPad:y,savedValue:m,onRemove:x,onSave:v,saveDisabledByParent:g,saving:f,schema:k.optionsMap.get(h[k.discriminator]),setValue:_,showSaveButton:r,unsavedValue:h,discriminatedUnionReplacement:A},h[k.discriminator])}},167251,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZodEffectEditor=void 0;let i=e.r(222260),a=e.r(798207),n=e.r(757328),o=e.r(419928),s=e.r(411474),l=e.r(355244),u={width:"100%"};r.ZodEffectEditor=({schema:e,jsonPath:t,value:r,setValue:c,defaultValue:d,onSave:p,onRemove:f,showSaveButton:h,saving:m,mayPad:g})=>{let v=(0,a.useZodIfPossible)();if(!v)throw Error("expected zod");let{localValue:y,onChange:b}=(0,l.useLocalState)({unsavedValue:r,schema:e,setValue:c,savedValue:d}),x=e._def;if(x.typeName!==v.ZodFirstPartyTypeKind.ZodEffects)throw Error("expected effect");return(0,i.jsxs)(n.Fieldset,{shouldPad:g,success:y.zodValidation.success,children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)(s.ZodSwitch,{value:r,setValue:b,jsonPath:t,schema:x.schema,defaultValue:d,onSave:p,showSaveButton:h,onRemove:f,saving:m,saveDisabledByParent:!y.zodValidation.success,mayPad:!1})}),(0,i.jsx)(o.ZodFieldValidation,{path:t,localValue:y})]})}},442561,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZodEnumEditor=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(170260),o=e.r(432804),s=e.r(798207),l=e.r(757328),u=e.r(272866),c=e.r(419928),d=e.r(355244),p={width:"100%"};r.ZodEnumEditor=({schema:e,jsonPath:t,setValue:r,defaultValue:f,value:h,onSave:m,showSaveButton:g,onRemove:v,saving:y})=>{let b=(0,s.useZodIfPossible)();if(!b)throw Error("expected zod");let{localValue:x,onChange:w,reset:S}=(0,d.useLocalState)({schema:e,setValue:r,unsavedValue:h,savedValue:f}),k=e._def;if(k.typeName!==b.ZodFirstPartyTypeKind.ZodEnum)throw Error("expected enum");let C=0===t.length,E=(0,a.useMemo)(()=>k.values.map(e=>({value:e,label:e,id:e,keyHint:null,leftItem:e===h?(0,i.jsx)(n.Checkmark,{}):null,onClick:e=>{w(()=>e,!1,!1)},quickSwitcherLabel:null,subMenu:null,type:"item"})),[k.values,w,h]),_=(0,a.useCallback)(()=>{m(()=>h,!1,!1)},[m,h]);return(0,i.jsxs)(l.Fieldset,{shouldPad:!0,success:x.zodValidation.success,children:[(0,i.jsx)(u.SchemaLabel,{handleClick:null,onSave:_,showSaveButton:g,isDefaultValue:x.value===f,onReset:S,jsonPath:t,onRemove:v,saving:y,valid:x.zodValidation.success,saveDisabledByParent:!x.zodValidation.success,suffix:null}),(0,i.jsx)("div",{style:C?void 0:p,children:(0,i.jsx)(o.Combobox,{values:E,selectedId:h,title:h})}),(0,i.jsx)(c.ZodFieldValidation,{path:t,localValue:x})]})}},240117,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t});Object.defineProperty(r,"__esModule",{value:!0}),r.ZodMatrixEditor=void 0;let s=e.r(222260),l=o(e.r(347540)),u=e.r(798207),c=e.r(757328),d=e.r(272866),p=e.r(512891),f=e.r(65609),h=e.r(875660),m=e.r(419928),g=e.r(412629),v=e.r(363835),y=e.r(355244),b={display:"flex",flexDirection:"row",width:"100%"};r.ZodMatrixEditor=({schema:e,jsonPath:t,setValue:r,defaultValue:i,value:a,onSave:n,showSaveButton:o,onRemove:x,saving:w,saveDisabledByParent:S,mayPad:k})=>{let{localValue:C,onChange:E,RevisionContextProvider:_,reset:T}=(0,y.useLocalState)({unsavedValue:a,schema:e,setValue:r,savedValue:i}),[P,I]=(0,l.useState)(!0),A=e._def,O=(0,l.useMemo)(()=>P?" [":" [...] ",[P]),M=(0,u.useZodIfPossible)();if(!M)throw Error("expected zod");let F=(0,u.useZodTypesIfPossible)(),R=(0,l.useMemo)(()=>(0,v.deepEqual)(C.value,i),[i,C]),D=Math.sqrt(C.value.length);if(!Number.isInteger(D))throw Error("Invalid matrix");let j=(0,l.useMemo)(()=>C.value.reduce((e,t,r)=>{let i=Math.floor(r/D);return e[i]=e[i]||[],e[i].push(t),e},[]),[C.value,D]);return(0,s.jsxs)(c.Fieldset,{shouldPad:k,success:C.zodValidation.success,children:[(0,s.jsx)(d.SchemaLabel,{onReset:T,isDefaultValue:R,jsonPath:t,onRemove:x,suffix:O,onSave:()=>{n(()=>C.value,!1,!1)},saveDisabledByParent:S,saving:w,showSaveButton:o,valid:C.zodValidation.success,handleClick:()=>I(!P)}),P?(0,s.jsx)(_,{children:(0,s.jsxs)(f.SchemaVerticalGuide,{isRoot:!1,children:[j.map((e,r)=>(0,s.jsx)(l.default.Fragment,{children:(0,s.jsx)("div",{style:b,children:e.map((e,a)=>{var l;let u=r*D+a;return(0,s.jsx)("div",{style:{flex:1},children:(0,s.jsx)(h.ZodArrayItemEditor,{onChange:E,value:e,def:A,index:u,jsonPath:t,defaultValue:null!=(l=null==i?void 0:i[u])?l:(0,g.createZodValues)(A.type,M,F),onSave:n,showSaveButton:o,saving:w,saveDisabledByParent:S,mayPad:k,mayRemove:!1})},`${a}${C.keyStabilityRevision}`)})})},`${r}${C.keyStabilityRevision}`)),0===a.length?(0,s.jsx)(p.SchemaArrayItemSeparationLine,{schema:e,index:0,onChange:E,isLast:!0,showAddButton:!0}):null]})}):null,(0,s.jsx)(m.ZodFieldValidation,{path:t,localValue:C})]})}},85334,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZonNonEditableValue=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(757328),s=e.r(272866),l={width:"100%"},u={...{width:"100%",color:n.VERY_LIGHT_TEXT,fontFamily:"sans-serif",fontSize:14},lineHeight:"37px"};r.ZonNonEditableValue=({jsonPath:e,label:t,showSaveButton:r,saving:n,mayPad:c})=>{let d=(0,a.useCallback)(()=>void 0,[]),p=(0,a.useCallback)(()=>void 0,[]);return(0,i.jsxs)(o.Fieldset,{shouldPad:c,success:!0,children:[(0,i.jsx)(s.SchemaLabel,{handleClick:null,isDefaultValue:!0,jsonPath:e,onReset:p,onSave:d,showSaveButton:r,onRemove:null,saving:n,valid:!0,saveDisabledByParent:!0,suffix:null}),(0,i.jsx)("div",{style:l,children:(0,i.jsx)("em",{style:u,children:t})})]})}},594953,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZodOrNullishEditor=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(671927),s=e.r(798207),l=e.r(146575),u=e.r(757328),c=e.r(272866),d=e.r(411474),p=e.r(412629),f=e.r(355244),h={fontFamily:"sans-serif",fontSize:14,color:n.LIGHT_TEXT},m={display:"flex",flexDirection:"row",alignItems:"center",marginTop:"5px"};r.ZodOrNullishEditor=({jsonPath:e,schema:t,setValue:r,onSave:n,defaultValue:g,value:v,showSaveButton:y,onRemove:b,nullishValue:x,saving:w,saveDisabledByParent:S,mayPad:k,innerSchema:C})=>{let E=(0,s.useZodIfPossible)();if(!E)throw Error("expected zod");let _=(0,s.useZodTypesIfPossible)(),T=v===x,{localValue:P,onChange:I,reset:A}=(0,f.useLocalState)({schema:t,setValue:r,unsavedValue:v,savedValue:g}),O=(0,a.useCallback)(e=>{let t=e.target.checked?x:(0,p.createZodValues)(C,E,_);I(()=>t,!1,!1)},[C,x,I,E,_]),M=(0,a.useCallback)(()=>{n(()=>v,!1,!1)},[n,v]);return(0,i.jsxs)(u.Fieldset,{shouldPad:k,success:P.zodValidation.success,children:[P.value===x?(0,i.jsx)(c.SchemaLabel,{handleClick:null,isDefaultValue:P.value===g,jsonPath:e,onReset:A,onSave:M,showSaveButton:y,onRemove:b,saving:w,valid:P.zodValidation.success,saveDisabledByParent:S,suffix:null}):(0,i.jsx)(d.ZodSwitch,{value:P.value,setValue:I,jsonPath:e,schema:C,defaultValue:g,onSave:n,showSaveButton:y,onRemove:b,saving:w,saveDisabledByParent:S,mayPad:!1}),(0,i.jsxs)("div",{style:m,children:[(0,i.jsx)(o.Checkbox,{checked:T,onChange:O,disabled:!1,name:e.join(".")}),(0,i.jsx)(l.Spacing,{x:1}),(0,i.jsx)("div",{style:h,children:String(x)})]})]})}},517963,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZodNullableEditor=void 0;let i=e.r(222260),a=e.r(594953);r.ZodNullableEditor=({jsonPath:e,schema:t,setValue:r,onSave:n,defaultValue:o,value:s,showSaveButton:l,onRemove:u,saving:c,saveDisabledByParent:d,mayPad:p})=>{let{innerType:f}=t._def;return(0,i.jsx)(a.ZodOrNullishEditor,{defaultValue:o,jsonPath:e,onRemove:u,onSave:n,schema:t,innerSchema:f,setValue:r,showSaveButton:l,value:s,nullishValue:null,saving:c,saveDisabledByParent:d,mayPad:p})}},6517,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZodNumberEditor=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(190327),o=e.r(757328),s=e.r(272866),l=e.r(419928),u=e.r(355244),c={width:"100%"};r.ZodNumberEditor=({jsonPath:e,value:t,schema:r,setValue:d,onSave:p,defaultValue:f,onRemove:h,showSaveButton:m,saving:g,saveDisabledByParent:v,mayPad:y})=>{let{localValue:b,onChange:x,reset:w}=(0,u.useLocalState)({unsavedValue:t,schema:r,setValue:d,savedValue:f}),S=(0,a.useCallback)(e=>{x(()=>e,!1,!1)},[x]),k=b.value===f,C=(0,a.useCallback)(e=>{x(()=>Number(e),!1,!1)},[x]),E=(0,a.useCallback)(()=>{p(()=>t,!1,!1)},[p,t]);return(0,i.jsxs)(o.Fieldset,{shouldPad:y,success:b.zodValidation.success,children:[(0,i.jsx)(s.SchemaLabel,{handleClick:null,isDefaultValue:k,jsonPath:e,onReset:w,onSave:E,showSaveButton:m,onRemove:h,saving:g,valid:b.zodValidation.success,saveDisabledByParent:v,suffix:null}),(0,i.jsxs)("div",{style:c,children:[(0,i.jsx)(n.InputDragger,{type:"number",value:b.value,style:c,status:b.zodValidation.success?"ok":"error",placeholder:e.join("."),onTextChange:C,onValueChange:S,min:(e=>{let t=e._def.checks.find(e=>"min"===e.kind);if(!t)return-1/0;if("min"!==t.kind)throw Error("Expected min check");return t.inclusive?t.value:-1/0})(r),max:(e=>{let t=e._def.checks.find(e=>"max"===e.kind);if(!t)return 1/0;if("max"!==t.kind)throw Error("Expected max check");return t.inclusive?t.value:1/0})(r),step:(e=>{let t=e._def.checks.find(e=>"multipleOf"===e.kind);if(t){if("multipleOf"!==t.kind)throw Error("Expected multipleOf check");return t.value}})(r),rightAlign:!1}),(0,i.jsx)(l.ZodFieldValidation,{path:e,localValue:b})]})]})}},75161,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZodOptionalEditor=void 0;let i=e.r(222260),a=e.r(594953);r.ZodOptionalEditor=({jsonPath:e,schema:t,setValue:r,onSave:n,defaultValue:o,value:s,showSaveButton:l,onRemove:u,saving:c,saveDisabledByParent:d,mayPad:p})=>{let{innerType:f}=t._def;return(0,i.jsx)(a.ZodOrNullishEditor,{defaultValue:o,jsonPath:e,onRemove:u,onSave:n,schema:t,setValue:r,showSaveButton:l,value:s,nullishValue:void 0,saving:c,saveDisabledByParent:d,mayPad:p,innerSchema:f})}},10170,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZodStaticFileEditor=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(208795),o=e.r(170260),s=e.r(432804),l=e.r(798207),u=e.r(757328),c=e.r(272866),d=e.r(419928),p=e.r(355244),f={width:"100%"};r.ZodStaticFileEditor=({schema:e,jsonPath:t,setValue:r,defaultValue:h,value:m,onSave:g,showSaveButton:v,onRemove:y,saving:b,saveDisabledByParent:x,mayPad:w})=>{let S=(0,l.useZodIfPossible)();if(!S)throw Error("expected zod");let{localValue:k,onChange:C,reset:E}=(0,p.useLocalState)({schema:e,setValue:r,unsavedValue:m,savedValue:h});if(e._def.typeName!==S.ZodFirstPartyTypeKind.ZodString)throw Error("expected enum");let _=0===t.length,T=(0,a.useMemo)(()=>(0,n.getStaticFiles)().map(e=>({value:e.src,label:e.name,id:e.src,keyHint:null,leftItem:e.src===m?(0,i.jsx)(o.Checkmark,{}):null,onClick:e=>{C(()=>e,!1,!1)},quickSwitcherLabel:null,subMenu:null,type:"item"})),[C,m]),P=(0,a.useCallback)(()=>{g(()=>m)},[g,m]);return(0,i.jsxs)(u.Fieldset,{shouldPad:w,success:k.zodValidation.success,children:[(0,i.jsx)(c.SchemaLabel,{handleClick:null,onSave:P,showSaveButton:v,isDefaultValue:k.value===h,onReset:E,jsonPath:t,onRemove:y,saving:b,valid:k.zodValidation.success,saveDisabledByParent:x,suffix:null}),(0,i.jsx)("div",{style:_?void 0:f,children:(0,i.jsx)(s.Combobox,{values:T,selectedId:k.value,title:m})}),(0,i.jsx)(d.ZodFieldValidation,{path:t,localValue:k})]})}},735594,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZodStringEditor=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(310099),o=e.r(798207),s=e.r(757328),l=e.r(272866),u=e.r(419928),c=e.r(355244),d={width:"100%"};r.ZodStringEditor=({jsonPath:e,value:t,setValue:r,showSaveButton:p,defaultValue:f,schema:h,onSave:m,onRemove:g,saving:v,saveDisabledByParent:y,mayPad:b})=>{if(!(0,o.useZodIfPossible)())throw Error("expected zod");let{localValue:x,onChange:w,reset:S}=(0,c.useLocalState)({schema:h,setValue:r,unsavedValue:t,savedValue:f}),k=(0,a.useCallback)(e=>{w(()=>e.target.value,!1,!1)},[w]),C=(0,a.useCallback)(()=>{m(()=>t,!1,!1)},[m,t]);return(0,i.jsxs)(s.Fieldset,{shouldPad:b,success:!1,children:[(0,i.jsx)(l.SchemaLabel,{handleClick:null,isDefaultValue:x.value===f,jsonPath:e,onReset:S,onSave:C,showSaveButton:p,onRemove:g,saving:v,valid:x.zodValidation.success,saveDisabledByParent:y,suffix:null}),(0,i.jsxs)("div",{style:d,children:[(0,i.jsx)(n.RemotionInput,{value:x.value,status:x.zodValidation?"ok":"error",placeholder:e.join("."),onChange:k,rightAlign:!1,name:e.join(".")}),(0,i.jsx)(u.ZodFieldValidation,{path:e,localValue:x})]})]})}},97748,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZodTextareaEditor=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(898002),o=e.r(798207),s=e.r(757328),l=e.r(272866),u=e.r(419928),c=e.r(355244),d={width:"100%"},p={resize:"vertical",minHeight:100};r.ZodTextareaEditor=({jsonPath:e,value:t,setValue:r,showSaveButton:f,defaultValue:h,schema:m,onSave:g,onRemove:v,saving:y,saveDisabledByParent:b,mayPad:x})=>{if(!(0,o.useZodIfPossible)())throw Error("expected zod");if(!(0,o.useZodTypesIfPossible)())throw Error("expected zod textarea");let{localValue:w,onChange:S,reset:k}=(0,c.useLocalState)({schema:m,setValue:r,unsavedValue:t,savedValue:h}),C=(0,a.useCallback)(e=>{S(()=>e.target.value,!1,!1)},[S]),E=(0,a.useCallback)(()=>{g(()=>t,!1,!1)},[g,t]);return(0,i.jsxs)(s.Fieldset,{shouldPad:x,success:w.zodValidation.success,children:[(0,i.jsx)(l.SchemaLabel,{handleClick:null,isDefaultValue:w.value===h,jsonPath:e,onReset:k,onSave:E,showSaveButton:f,onRemove:v,saving:y,valid:w.zodValidation.success,saveDisabledByParent:b,suffix:null}),(0,i.jsxs)("div",{style:d,children:[(0,i.jsx)(n.RemTextarea,{onChange:C,value:w.value,status:w.zodValidation?"ok":"error",placeholder:e.join("."),name:e.join("."),style:p}),(0,i.jsx)(u.ZodFieldValidation,{path:e,localValue:w})]})]})}},779274,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZodTupleItemEditor=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(798207),o=e.r(411474);r.ZodTupleItemEditor=({def:e,onChange:t,jsonPath:r,index:s,value:l,defaultValue:u,onSave:c,showSaveButton:d,saving:p,saveDisabledByParent:f,mayPad:h})=>{if(!(0,n.useZodIfPossible)())throw Error("expected zod");let m=(0,a.useCallback)(e=>{t(t=>[...t.slice(0,s),"function"==typeof e?e(t[s]):e,...t.slice(s+1)],!1,!1)},[s,t]),g=(0,a.useMemo)(()=>[...r,s],[s,r]),v=(0,a.useCallback)(e=>{c(t=>[...t.slice(0,s),e(t[s]),...t.slice(s+1)],!1,!1)},[s,c]);return(0,i.jsx)("div",{children:(0,i.jsx)(o.ZodSwitch,{jsonPath:g,schema:e.items[s],value:l,setValue:m,defaultValue:u,onSave:v,showSaveButton:d,onRemove:null,saving:p,saveDisabledByParent:f,mayPad:h})})}},173706,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t});Object.defineProperty(r,"__esModule",{value:!0}),r.ZodTupleEditor=void 0;let s=e.r(222260),l=o(e.r(347540)),u=e.r(798207),c=e.r(412629),d=e.r(363835),p=e.r(757328),f=e.r(355244),h=e.r(272866),m=e.r(512891),g=e.r(65609),v=e.r(419928),y=e.r(779274);r.ZodTupleEditor=({schema:e,jsonPath:t,setValue:r,defaultValue:i,value:a,onSave:n,showSaveButton:o,onRemove:b,saving:x,saveDisabledByParent:w,mayPad:S})=>{let{localValue:k,onChange:C,RevisionContextProvider:E,reset:_}=(0,f.useLocalState)({unsavedValue:a,schema:e,setValue:r,savedValue:i}),[T,P]=(0,l.useState)(!0),I=e._def,A=(0,l.useMemo)(()=>T?" [":" [...] ",[T]),O=(0,u.useZodIfPossible)();if(!O)throw Error("expected zod");let M=(0,u.useZodTypesIfPossible)();if(I.typeName!==O.ZodFirstPartyTypeKind.ZodTuple)throw Error("expected object");let F=(0,l.useMemo)(()=>(0,d.deepEqual)(k.value,i),[i,k]);return(0,s.jsxs)(p.Fieldset,{shouldPad:S,success:k.zodValidation.success,children:[(0,s.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:(0,s.jsx)(h.SchemaLabel,{onReset:_,isDefaultValue:F,jsonPath:t,onRemove:b,suffix:A,onSave:()=>{n(()=>k.value,!1,!1)},saveDisabledByParent:w,saving:x,showSaveButton:o,valid:k.zodValidation.success,handleClick:()=>P(!T)})}),T?(0,s.jsx)(E,{children:(0,s.jsxs)(g.SchemaVerticalGuide,{isRoot:!1,children:[k.value.map((r,a)=>{var u;return(0,s.jsxs)(l.default.Fragment,{children:[(0,s.jsx)(y.ZodTupleItemEditor,{onChange:C,value:r,def:I,index:a,jsonPath:t,defaultValue:null!=(u=null==i?void 0:i[a])?u:(0,c.createZodValues)(I.items[a],O,M),onSave:n,showSaveButton:o,saving:x,saveDisabledByParent:w,mayPad:S}),(0,s.jsx)(m.SchemaArrayItemSeparationLine,{schema:e,index:a,onChange:C,isLast:a===k.value.length-1,showAddButton:!1})]},`${a}${k.keyStabilityRevision}`)}),0===a.length?(0,s.jsx)(m.SchemaArrayItemSeparationLine,{schema:e,index:0,onChange:C,isLast:!0,showAddButton:!1}):null]})}):null,(0,s.jsx)(v.ZodFieldValidation,{path:t,localValue:k})]})}},744532,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZodUnionEditor=void 0;let i=e.r(222260),a=e.r(798207),n=e.r(85334),o=e.r(594953);r.ZodUnionEditor=({jsonPath:e,schema:t,setValue:r,onSave:s,defaultValue:l,value:u,showSaveButton:c,onRemove:d,saving:p,saveDisabledByParent:f,mayPad:h})=>{let{options:m}=t._def,g=(0,a.useZodIfPossible)();if(!g)throw Error("expected zod");if(m.length>2)return(0,i.jsx)(n.ZonNonEditableValue,{jsonPath:e,label:"Union with more than 2 options not editable",showSaveButton:c,saving:p,mayPad:h});if(m.length<2)return(0,i.jsx)(n.ZonNonEditableValue,{jsonPath:e,label:"Union with less than 2 options not editable",showSaveButton:c,saving:p,mayPad:h});let v=((e,t)=>{let r=e.findIndex(e=>e._def.typeName===t.ZodFirstPartyTypeKind.ZodNull||e._def.typeName===t.ZodFirstPartyTypeKind.ZodUndefined);if(-1===r)return null;let i=e[r]._def.typeName===t.ZodFirstPartyTypeKind.ZodNull?null:void 0,a=e[+(0===r)],n=a._def.typeName===t.ZodFirstPartyTypeKind.ZodNull||a._def.typeName===t.ZodFirstPartyTypeKind.ZodUndefined;return{nullIndex:r,nullishValue:i,otherSchema:a,otherSchemaIsAlsoNullish:n}})(m,g);if(!v)return(0,i.jsx)(n.ZonNonEditableValue,{jsonPath:e,label:"Union only editable with 1 value being null",showSaveButton:c,saving:p,mayPad:h});let{otherSchema:y,nullishValue:b,otherSchemaIsAlsoNullish:x}=v;return x?(0,i.jsx)(n.ZonNonEditableValue,{jsonPath:e,label:"Not editable - both union values are nullish",showSaveButton:c,saving:p,mayPad:h}):(0,i.jsx)(o.ZodOrNullishEditor,{defaultValue:l,jsonPath:e,onRemove:d,onSave:s,schema:t,innerSchema:y,setValue:r,showSaveButton:c,value:u,nullishValue:b,saving:p,saveDisabledByParent:f,mayPad:h})}},411474,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZodSwitch=void 0;let i=e.r(222260),a=e.r(798207),n=e.r(168528),o=e.r(872113),s=e.r(70851),l=e.r(177247),u=e.r(221321),c=e.r(663412),d=e.r(167251),p=e.r(442561),f=e.r(240117),h=e.r(85334),m=e.r(517963),g=e.r(6517),v=e.r(677836),y=e.r(75161),b=e.r(10170),x=e.r(735594),w=e.r(97748),S=e.r(173706),k=e.r(744532);r.ZodSwitch=({schema:e,jsonPath:t,value:r,setValue:C,defaultValue:E,onSave:_,showSaveButton:T,onRemove:P,saving:I,saveDisabledByParent:A,mayPad:O})=>{let M=e._def.typeName,F=(0,a.useZodIfPossible)();if(!F)throw Error("expected zod");let R=(0,a.useZodTypesIfPossible)();return M===F.ZodFirstPartyTypeKind.ZodObject?(0,i.jsx)(v.ZodObjectEditor,{setValue:C,unsavedValue:r,savedValue:E,jsonPath:t,schema:e,onSave:_,showSaveButton:T,onRemove:P,saving:I,saveDisabledByParent:A,mayPad:O,discriminatedUnionReplacement:null}):M===F.ZodFirstPartyTypeKind.ZodString?r.startsWith(window.remotion_staticBase)?(0,i.jsx)(b.ZodStaticFileEditor,{setValue:C,value:r,jsonPath:t,schema:e,defaultValue:E,onSave:_,showSaveButton:T,onRemove:P,saving:I,saveDisabledByParent:A,mayPad:O}):R&&e._def.description===R.ZodZypesInternals.REMOTION_TEXTAREA_BRAND?(0,i.jsx)(w.ZodTextareaEditor,{value:r,setValue:C,jsonPath:t,schema:e,onSave:_,defaultValue:E,showSaveButton:T,onRemove:P,saving:I,saveDisabledByParent:A,mayPad:O}):(0,i.jsx)(x.ZodStringEditor,{value:r,setValue:C,jsonPath:t,schema:e,onSave:_,defaultValue:E,showSaveButton:T,onRemove:P,saving:I,saveDisabledByParent:A,mayPad:O}):M===F.ZodFirstPartyTypeKind.ZodDate?(0,i.jsx)(l.ZodDateEditor,{value:r,setValue:C,jsonPath:t,schema:e,onSave:_,defaultValue:E,showSaveButton:T,onRemove:P,saving:I,saveDisabledByParent:A,mayPad:O}):M===F.ZodFirstPartyTypeKind.ZodNumber?(0,i.jsx)(g.ZodNumberEditor,{value:r,setValue:C,jsonPath:t,schema:e,defaultValue:E,onSave:_,showSaveButton:T,onRemove:P,saving:I,saveDisabledByParent:A,mayPad:O}):M===F.ZodFirstPartyTypeKind.ZodBoolean?(0,i.jsx)(o.ZodBooleanEditor,{value:r,setValue:C,jsonPath:t,defaultValue:E,onSave:_,showSaveButton:T,onRemove:P,saving:I,saveDisabledByParent:A,mayPad:O,schema:e}):M===F.ZodFirstPartyTypeKind.ZodUndefined?(0,i.jsx)(h.ZonNonEditableValue,{jsonPath:t,showSaveButton:T,label:"undefined",saving:I,mayPad:O}):M===F.ZodFirstPartyTypeKind.ZodNull?(0,i.jsx)(h.ZonNonEditableValue,{jsonPath:t,showSaveButton:T,label:"null",saving:I,mayPad:O}):M===F.ZodFirstPartyTypeKind.ZodAny?(0,i.jsx)(h.ZonNonEditableValue,{jsonPath:t,showSaveButton:T,label:"any (not editable)",saving:I,mayPad:O}):M===F.ZodFirstPartyTypeKind.ZodBigInt?(0,i.jsx)(h.ZonNonEditableValue,{jsonPath:t,showSaveButton:T,label:"BigInt (not editable)",saving:I,mayPad:O}):M===F.ZodFirstPartyTypeKind.ZodUnknown?(0,i.jsx)(h.ZonNonEditableValue,{jsonPath:t,showSaveButton:T,label:"unknown (not editable)",saving:I,mayPad:O}):M===F.ZodFirstPartyTypeKind.ZodArray?(0,i.jsx)(n.ZodArrayEditor,{setValue:C,value:r,jsonPath:t,schema:e,defaultValue:E,onSave:_,showSaveButton:T,onRemove:P,saving:I,saveDisabledByParent:A,mayPad:O}):M===F.ZodFirstPartyTypeKind.ZodEnum?(0,i.jsx)(p.ZodEnumEditor,{setValue:C,value:r,jsonPath:t,schema:e,defaultValue:E,onSave:_,showSaveButton:T,onRemove:P,saving:I}):M===F.ZodFirstPartyTypeKind.ZodEffects?R&&e._def.description===R.ZodZypesInternals.REMOTION_COLOR_BRAND?(0,i.jsx)(s.ZodColorEditor,{value:r,setValue:C,jsonPath:t,schema:e,onSave:_,defaultValue:E,showSaveButton:T,onRemove:P,saving:I,saveDisabledByParent:A,mayPad:O}):R&&e._def.description===R.ZodZypesInternals.REMOTION_MATRIX_BRAND?(0,i.jsx)(f.ZodMatrixEditor,{setValue:C,value:r,jsonPath:t,schema:e._def.schema,defaultValue:E,onSave:_,showSaveButton:T,onRemove:P,saving:I,saveDisabledByParent:A,mayPad:O}):(0,i.jsx)(d.ZodEffectEditor,{value:r,setValue:C,jsonPath:t,schema:e,defaultValue:E,onSave:_,showSaveButton:T,onRemove:P,saving:I,mayPad:O}):M===F.ZodFirstPartyTypeKind.ZodUnion?(0,i.jsx)(k.ZodUnionEditor,{schema:e,showSaveButton:T,jsonPath:t,value:r,defaultValue:E,setValue:C,onSave:_,onRemove:P,saving:I,saveDisabledByParent:A,mayPad:O}):M===F.ZodFirstPartyTypeKind.ZodOptional?(0,i.jsx)(y.ZodOptionalEditor,{jsonPath:t,showSaveButton:T,defaultValue:E,value:r,setValue:C,onSave:_,onRemove:P,schema:e,saving:I,saveDisabledByParent:A,mayPad:O}):M===F.ZodFirstPartyTypeKind.ZodNullable?(0,i.jsx)(m.ZodNullableEditor,{jsonPath:t,showSaveButton:T,defaultValue:E,value:r,setValue:C,onSave:_,onRemove:P,schema:e,saving:I,saveDisabledByParent:A,mayPad:O}):M===F.ZodFirstPartyTypeKind.ZodDefault?(0,i.jsx)(u.ZodDefaultEditor,{jsonPath:t,showSaveButton:T,defaultValue:E,value:r,setValue:C,onSave:_,onRemove:P,schema:e,saving:I,saveDisabledByParent:A,mayPad:O}):M===F.ZodFirstPartyTypeKind.ZodDiscriminatedUnion?(0,i.jsx)(c.ZodDiscriminatedUnionEditor,{defaultValue:E,mayPad:O,schema:e,setValue:C,value:r,jsonPath:t,onRemove:P,onSave:_,saving:I,saveDisabledByParent:A,showSaveButton:T}):M===F.ZodFirstPartyTypeKind.ZodTuple?(0,i.jsx)(S.ZodTupleEditor,{setValue:C,value:r,jsonPath:t,schema:e,defaultValue:E,onSave:_,showSaveButton:T,onRemove:P,saving:I,saveDisabledByParent:A,mayPad:O}):(0,i.jsx)(h.ZonNonEditableValue,{jsonPath:t,showSaveButton:T,label:`${M} (not editable)`,saving:I,mayPad:O})}},677836,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t});Object.defineProperty(r,"__esModule",{value:!0}),r.ZodObjectEditor=void 0;let s=e.r(222260),l=o(e.r(347540)),u=e.r(798207),c=e.r(462098),d=e.r(757328),p=e.r(272866),f=e.r(512891),h=e.r(65609),m=e.r(411474),g=e.r(363835),v=e.r(355244);r.ZodObjectEditor=({schema:e,jsonPath:t,setValue:r,unsavedValue:i,savedValue:a,onSave:n,showSaveButton:o,onRemove:y,saving:b,saveDisabledByParent:x,mayPad:w,discriminatedUnionReplacement:S})=>{let k=(0,u.useZodIfPossible)();if(!k)throw Error("expected zod");let[C,E]=(0,l.useState)(!0),{localValue:_,onChange:T,RevisionContextProvider:P,reset:I}=(0,v.useLocalState)({schema:e,setValue:r,unsavedValue:i,savedValue:a}),A=e._def;if(A.typeName!==k.ZodFirstPartyTypeKind.ZodObject)throw Error("expected object");let O=A.shape(),M=Object.keys(O),F=0===t.length,R=(0,l.useMemo)(()=>(0,g.deepEqual)(_.value,a),[a,_]),D=(0,l.useMemo)(()=>C?" {":" {...}",[C]);return(0,s.jsxs)(d.Fieldset,{shouldPad:!F&&w,success:_.zodValidation.success,children:[F?null:(0,s.jsx)(p.SchemaLabel,{isDefaultValue:R,onReset:I,jsonPath:t,onRemove:y,suffix:D,onSave:()=>{n(()=>_.value,!1,!1)},saveDisabledByParent:x,saving:b,showSaveButton:o,valid:_.zodValidation.success,handleClick:()=>E(!C)}),C?(0,s.jsx)(P,{children:(0,s.jsx)(h.SchemaVerticalGuide,{isRoot:F,children:M.map((e,r)=>S&&e===S.discriminator?S.markup:(0,s.jsxs)(l.default.Fragment,{children:[(0,s.jsx)(m.ZodSwitch,{mayPad:!0,jsonPath:[...t,e],schema:O[e],value:_.value[e],defaultValue:(null!=a?a:i)[e],setValue:(t,r)=>{T(r=>({...r,[e]:"function"==typeof t?t(r[e]):t}),r,!1)},onSave:(t,r)=>{n(r=>({...r,[e]:"function"==typeof t?t(r[e]):t}),r,!1)},onRemove:null,showSaveButton:o,saving:b,saveDisabledByParent:x}),r===M.length-1?null:(0,s.jsx)(f.SchemaSeparationLine,{})]},e))})}):null,F||!C?null:(0,s.jsx)("div",{style:c.fieldsetLabel,children:"}"})]})}},238088,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SchemaEditor=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(395096),s=e.r(362087),l=e.r(494296),u=e.r(798207),c=e.r(388844),d=e.r(677836),p=e.r(363835),f=e.r(355244),h=e.r(850301),m={display:"flex",flexDirection:"column",overflowY:"auto"};r.SchemaEditor=({schema:e,unsavedDefaultProps:t,setValue:r,zodValidationResult:g,savedDefaultProps:v,onSave:y,showSaveButton:b,saving:x,saveDisabledByParent:w})=>{let S=(0,s.useKeybinding)(),[k,C]=(0,a.useState)(0),E=(0,a.useMemo)(()=>({childResetRevision:k}),[k]);(0,a.useEffect)(()=>{let e=()=>{C(e=>e+1)};return window.addEventListener(n.Internals.PROPS_UPDATED_EXTERNALLY,e),()=>{window.removeEventListener(n.Internals.PROPS_UPDATED_EXTERNALLY,e)}},[]);let _=(0,u.useZodIfPossible)();if(!_)throw Error("expected zod");let T=(0,a.useMemo)(()=>!(0,p.deepEqual)(v,t),[v,t]);(0,a.useEffect)(()=>{(0,o.setUnsavedProps)(T)},[T]);let P=(0,a.useCallback)(()=>{T&&b&&y(()=>t)},[T,y,b,t]);(0,a.useEffect)(()=>{let e=S.registerKeybinding({event:"keydown",key:"s",commandCtrlKey:!0,callback:P,preventDefault:!0,triggerIfInputFieldFocused:!0,keepRegisteredWhenNotHighestContext:!0});return()=>{e.unregister()}},[S,P,y]);let I=e._def.typeName,A=(0,a.useCallback)(()=>{r(v)},[v,r]);return g.success?I!==_.ZodFirstPartyTypeKind.ZodObject?(0,i.jsx)(c.TopLevelZodValue,{typeReceived:I}):(0,i.jsx)("div",{ref:h.defaultPropsEditorScrollableAreaRef,style:m,className:l.VERTICAL_SCROLLBAR_CLASSNAME,children:(0,i.jsx)(f.RevisionContext.Provider,{value:E,children:(0,i.jsx)(d.ZodObjectEditor,{discriminatedUnionReplacement:null,unsavedValue:t,setValue:r,jsonPath:[],schema:e,savedValue:v,onSave:y,showSaveButton:b,onRemove:null,saving:x,saveDisabledByParent:w,mayPad:!0})})}):e.safeParse(v).success?(0,i.jsx)(c.InvalidSchema,{reset:A,zodValidationResult:g}):(0,i.jsx)(c.InvalidDefaultProps,{zodValidationResult:g})}},80344,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WarningIndicatorButton=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(191928),s=e.r(146575),l={fontSize:12,display:"inline-flex",justifyContent:"center",alignItems:"center",backgroundColor:"transparent",color:n.LIGHT_TEXT,borderStyle:"solid",borderWidth:1,cursor:"pointer",paddingLeft:8,paddingRight:8,paddingTop:4,paddingBottom:4},u={width:12,height:12,flexShrink:0,fill:n.WARNING_COLOR},c=e=>(0,i.jsx)("svg",{viewBox:"0 0 576 512",...e,children:(0,i.jsx)("path",{d:"M248.747 204.705l6.588 112c.373 6.343 5.626 11.295 11.979 11.295h41.37a12 12 0 0 0 11.979-11.295l6.588-112c.405-6.893-5.075-12.705-11.979-12.705h-54.547c-6.903 0-12.383 5.812-11.978 12.705zM330 384c0 23.196-18.804 42-42 42s-42-18.804-42-42 18.804-42 42-42 42 18.804 42 42zm-.423-360.015c-18.433-31.951-64.687-32.009-83.154 0L6.477 440.013C-11.945 471.946 11.118 512 48.054 512H527.94c36.865 0 60.035-39.993 41.577-71.987L329.577 23.985zM53.191 455.002L282.803 57.008c2.309-4.002 8.085-4.002 10.394 0l229.612 397.993c2.308 4-.579 8.998-5.197 8.998H58.388c-4.617.001-7.504-4.997-5.197-8.997z"})});r.WarningIndicatorButton=({setShowWarning:e,showWarning:t,warningCount:r})=>{let d=(0,a.useCallback)(()=>{e(e=>!e)},[e]),p=(0,a.useMemo)(()=>({...l,backgroundColor:t?n.INPUT_BACKGROUND:"transparent",borderColor:t?n.INPUT_BORDER_COLOR_HOVERED:n.INPUT_BORDER_COLOR_UNHOVERED,color:t?"white":n.LIGHT_TEXT}),[t]);return(0,i.jsxs)("button",{type:"button",style:p,onClick:d,children:[(0,i.jsx)(c,{style:u}),(0,i.jsx)(s.Spacing,{x:.5}),r,(0,i.jsx)(s.Spacing,{x:1}),(0,i.jsx)(o.AngleDown,{down:t})]})}},28897,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getRenderModalWarnings=r.defaultTypeCanSaveState=void 0;let i=e.r(758927);r.defaultTypeCanSaveState={canUpdate:!1,reason:"Loading...",determined:!1},r.getRenderModalWarnings=({cliProps:e,canSaveDefaultProps:t,isCustomDateUsed:r,customFileUsed:a,jsMapUsed:n,jsSetUsed:o,inJSONEditor:s,propsEditType:l})=>[(({cliProps:e,propsEditType:t})=>Object.keys(e).length>0&&"default-props"===t?"The data that was passed using --props takes priority over the data you enter here.":null)({cliProps:e,propsEditType:l}),t.canUpdate||!t.determined?null:`Can't save default props: ${t.reason}.`,r&&s?"There is a Date in the schema which was serialized. Note the custom syntax.":null,a&&s?"There is a staticFile() in the schema which was serialized. Note the custom syntax.":null,n&&s?"A `Map` was used in the schema which can not be serialized to JSON.":null,o&&s?"A `Set` was used in the schema which can not be serialized to JSON.":null].filter(i.NoReactInternals.truthy)},860979,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t});Object.defineProperty(r,"__esModule",{value:!0}),r.DataEditor=void 0;let s=e.r(222260),l=o(e.r(347540)),u=e.r(49019),c=e.r(758927),d=e.r(850586),p=e.r(921224),f=e.r(97870),h=e.r(277984),m=e.r(20330),g=e.r(200539),v=e.r(798207),y=e.r(146575),b=e.r(709361),x=e.r(238088),w=e.r(388844),S=e.r(874637),k=e.r(80344),C=e.r(28897),E={fontSize:14,color:p.LIGHT_TEXT,fontFamily:"sans-serif",lineHeight:1.5},_={display:"flex",flex:1,flexDirection:"column",padding:"0 12px",justifyContent:"center",alignItems:"center",textAlign:"center"},T={display:"flex",flexDirection:"column",flex:1,overflow:"hidden",backgroundColor:p.BACKGROUND},P={flexDirection:"column",display:"flex",padding:12,borderBottom:`1px solid ${p.BORDER_COLOR}`},I={display:"flex",marginBottom:"4px",flexDirection:"row",alignItems:"center"},A="remotion.show-render-modalwarning",O=e=>{localStorage.setItem(A,String(!!e))};r.DataEditor=({unresolvedComposition:e,defaultProps:t,setDefaultProps:r,mayShowSaveButton:i,propsEditType:a,saving:n,setSaving:o,readOnlyStudio:p})=>{let[M,F]=(0,l.useState)("schema"),[R,D]=(0,l.useState)(()=>{let e;return!(e=localStorage.getItem(A))||"true"===e}),{updateCompositionDefaultProps:j}=(0,l.useContext)(u.Internals.CompositionSetters),L="json"===M,B=(0,l.useMemo)(()=>L?c.NoReactInternals.serializeJSONWithSpecialTypes({data:t,indent:2,staticBase:window.remotion_staticBase}):null,[L,t]),N=(0,u.getInputProps)(),[$,z]=(0,l.useState)({[e.id]:C.defaultTypeCanSaveState}),U=(0,v.useZodIfPossible)(),V=(0,v.useZodTypesIfPossible)(),H=(0,l.useMemo)(()=>{if(!U)return"no-zod";if(!e.schema)return"no-schema";if("function"!=typeof e.schema.safeParse)throw Error("A value which is not a Zod schema was passed to `schema`");return e.schema},[e.schema,U]),W=(0,l.useMemo)(()=>"no-zod"===H?"no-zod":"no-schema"===H?"no-schema":H.safeParse(t),[t,H]),q=(0,l.useCallback)(e=>{D(t=>"boolean"==typeof e?(O(e),e):(O(e(t)),e(t)))},[]),G=(0,l.useMemo)(()=>$[e.id]?$[e.id]:C.defaultTypeCanSaveState,[$,e.id]),Z=i&&G.canUpdate,{fastRefreshes:K}=(0,l.useContext)(u.Internals.NonceContext),Q=(0,l.useCallback)(async()=>{try{let t=await (0,m.canUpdateDefaultProps)(e.id,p);t.canUpdate?z(t=>({...t,[e.id]:{canUpdate:!0}})):z(r=>({...r,[e.id]:{canUpdate:!1,reason:t.reason,determined:!0}}))}catch(t){z(r=>({...r,[e.id]:{canUpdate:!1,reason:t.message,determined:!0}}))}},[p,e.id]);(0,l.useEffect)(()=>{Q()},[Q]);let{previewServerState:X,subscribeToEvent:J}=(0,l.useContext)(d.StudioServerConnectionCtx);(0,l.useEffect)(()=>{let e=J("root-file-changed",Q);return()=>{e()}},[Q,J]);let Y=(0,l.useMemo)(()=>[{key:"schema",label:"Schema",onClick:()=>{F("schema")},selected:"schema"===M},{key:"json",label:"JSON",onClick:()=>{F("json")},selected:"json"===M}],[M]),ee=(0,l.useCallback)(()=>{"no-zod"===H||"no-schema"===H||null===U?(0,h.showNotification)("Cannot update default props: No Zod schema",2e3):(0,m.callUpdateDefaultPropsApi)(e.id,t,(0,S.extractEnumJsonPaths)({schema:H,zodRuntime:U,currentPath:[],zodTypes:V})).then(e=>{e.success||(0,h.showNotification)(`Cannot update default props: ${e.reason}`,2e3)})},[H,U,e.id,t,V]),et=(0,l.useCallback)(t=>{var r;if("no-zod"===H||"no-schema"===H||null===U)return void(0,h.showNotification)("Cannot update default props: No Zod schema",2e3);window.remotion_ignoreFastRefreshUpdate=K+1,o(!0);let i=t(null!=(r=e.defaultProps)?r:{});(0,m.callUpdateDefaultPropsApi)(e.id,i,(0,S.extractEnumJsonPaths)({schema:H,zodRuntime:U,currentPath:[],zodTypes:V})).then(t=>{t.success||(console.log(t.stack),(0,h.showNotification)(`Cannot update default props: ${t.reason}. See console for more information.`,2e3)),j(e.id,i)}).catch(e=>{(0,h.showNotification)(`Cannot update default props: ${e.message}`,2e3)}).finally(()=>{o(!1)})},[H,U,V,K,o,e.defaultProps,e.id,j]),er=X.type,ei=(0,l.useMemo)(()=>(0,C.getRenderModalWarnings)({canSaveDefaultProps:G,cliProps:N,isCustomDateUsed:!!B&&B.customDateUsed,customFileUsed:!!B&&B.customFileUsed,inJSONEditor:L,propsEditType:a,jsMapUsed:!!B&&B.mapUsed,jsSetUsed:!!B&&B.setUsed}),[N,G,L,a,B]);if("disconnected"===er)return(0,s.jsxs)("div",{style:_,children:[(0,s.jsx)(y.Spacing,{y:5}),(0,s.jsx)("div",{style:E,children:"The studio server has disconnected. Reconnect to edit the schema."}),(0,s.jsx)(y.Spacing,{y:2,block:!0})]});if("no-zod"===H)return(0,s.jsx)(w.ZodNotInstalled,{});if("no-schema"===H)return(0,s.jsx)(w.NoSchemaDefined,{});if(!U||"no-zod"===W)throw Error("expected zod");if("no-schema"===W)throw Error("expected schema");return H._def.typeName===U.ZodFirstPartyTypeKind.ZodAny?(0,s.jsx)(w.NoSchemaDefined,{}):e.defaultProps?(0,s.jsxs)("div",{style:T,children:[(0,s.jsxs)("div",{style:P,children:[(0,s.jsxs)("div",{style:I,children:[(0,s.jsx)(g.SegmentedControl,{items:Y,needsWrapping:!1}),(0,s.jsx)(y.Flex,{}),ei.length>0?(0,s.jsx)(k.WarningIndicatorButton,{setShowWarning:q,showWarning:R,warningCount:ei.length}):null]}),R&&ei.length>0?ei.map(e=>(0,s.jsxs)(l.default.Fragment,{children:[(0,s.jsx)(y.Spacing,{y:1}),(0,s.jsx)(f.ValidationMessage,{message:e,align:"flex-start",type:"warning"})]},e)):null]}),"schema"===M?(0,s.jsx)(x.SchemaEditor,{unsavedDefaultProps:t,setValue:r,schema:H,zodValidationResult:W,savedDefaultProps:e.defaultProps,onSave:et,showSaveButton:Z,saving:n,saveDisabledByParent:!W.success}):(0,s.jsx)(b.RenderModalJSONPropsEditor,{value:null!=t?t:{},setValue:r,onSave:ee,showSaveButton:Z,serializedJSON:B,defaultProps:e.defaultProps,schema:H})]}):(0,s.jsx)(w.NoDefaultProps,{})}},527658,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.renderQueueItemSubtitleStyle=void 0;let i=e.r(921224),a=e.r(146575);r.renderQueueItemSubtitleStyle={fontSize:13,color:i.LIGHT_TEXT,appearance:"none",border:"none",padding:0,cursor:"pointer",lineHeight:1.2,textAlign:"left",whiteSpace:"nowrap",marginRight:a.SPACING_UNIT,overflowX:"hidden",maxWidth:500,textOverflow:"ellipsis"}},428357,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RenderQueueCancelledMessage=void 0;let i=e.r(222260),a=e.r(921224),n={...e.r(527658).renderQueueItemSubtitleStyle,color:a.LIGHT_TEXT,cursor:"default"};r.RenderQueueCancelledMessage=()=>(0,i.jsx)("span",{style:n,children:"Cancelled"})},359477,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RenderQueueCopyToClipboard=r.supportsCopyingToClipboard=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(577731),o=e.r(356174),s=e.r(841674),l=e.r(277984),u={height:12,color:"currentColor"};r.supportsCopyingToClipboard=e=>"done"===e.status&&"still"===e.type&&("png"===e.imageFormat||"jpeg"===e.imageFormat),r.RenderQueueCopyToClipboard=({job:e})=>{let t=(0,a.useCallback)(e=>(0,i.jsx)(o.ClipboardIcon,{style:u,color:e}),[]),r=(0,a.useCallback)(async t=>{t.stopPropagation();try{let t=`${n.remotion_outputsBase}/${e.outName}`,r=await fetch(t),i=r.headers.get("content-type");if(!i)throw Error("Expected content-type header");let a=await r.blob();await navigator.clipboard.write([new ClipboardItem({[i]:a})]),(0,l.showNotification)("Copied to clipboard!",1e3)}catch(e){(0,l.showNotification)(`Could not copy to clipboard: ${e.message}`,2e3)}},[e.outName]);return(0,i.jsx)(s.InlineAction,{title:"Copy to clipboard",renderAction:t,onClick:r})}},355844,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RenderQueueError=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(137798),o=e.r(260240),s={...e.r(527658).renderQueueItemSubtitleStyle};r.RenderQueueError=({job:e})=>{let{setSelectedModal:t}=(0,a.useContext)(n.ModalsContext),{tabIndex:r}=(0,o.useZIndex)(),l=(0,a.useCallback)(()=>{t({type:"render-progress",jobId:e.id})},[e.id,t]);if("failed"!==e.status)throw Error("should not have rendered this component");return(0,i.jsx)("button",{onClick:l,type:"button",style:s,tabIndex:r,title:e.error.message,children:e.error.message})}},318403,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RenderQueueCancelButton=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(841674),o=e.r(277984),s=e.r(20330),l=e.r(896509);r.RenderQueueCancelButton=({job:e})=>{let t=(0,l.isClientRenderJob)(e),{cancelClientJob:r}=(0,a.useContext)(l.RenderQueueContext),u=(0,a.useCallback)(i=>{(i.stopPropagation(),t)?r(e.id):(0,s.cancelRenderJob)(e).catch(e=>{(0,o.showNotification)(`Could not cancel job: ${e.message}`,2e3)})},[e,t,r]),c=(0,a.useMemo)(()=>({height:14,color:"currentColor"}),[]),d=(0,a.useCallback)(e=>(0,i.jsx)("svg",{style:c,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:(0,i.jsx)("path",{fill:e,d:"M367.2 412.5L99.5 144.8C77.1 176.1 64 214.5 64 256c0 106 86 192 192 192c41.5 0 79.9-13.1 111.2-35.5zm45.3-45.3C434.9 335.9 448 297.5 448 256c0-106-86-192-192-192c-41.5 0-79.9 13.1-111.2 35.5L412.5 367.2zM512 256c0 141.4-114.6 256-256 256S0 397.4 0 256S114.6 0 256 0S512 114.6 512 256z"})}),[c]);return(0,i.jsx)(n.InlineAction,{renderAction:d,onClick:u})}},235653,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CircularProgress=r.RENDER_STATUS_INDICATOR_SIZE=void 0;let i=e.r(222260),a=e.r(921224);r.RENDER_STATUS_INDICATOR_SIZE=16;let n={height:r.RENDER_STATUS_INDICATOR_SIZE,width:r.RENDER_STATUS_INDICATOR_SIZE,transform:"rotate(-90deg)"};r.CircularProgress=({progress:e})=>{let t=(r.RENDER_STATUS_INDICATOR_SIZE/2-3)*Math.PI*2;return(0,i.jsx)("svg",{style:n,viewBox:`0 0 ${r.RENDER_STATUS_INDICATOR_SIZE} ${r.RENDER_STATUS_INDICATOR_SIZE}`,children:(0,i.jsx)("circle",{r:r.RENDER_STATUS_INDICATOR_SIZE/2-3,stroke:a.LIGHT_TEXT,fill:"none",strokeWidth:3,cx:r.RENDER_STATUS_INDICATOR_SIZE/2,cy:r.RENDER_STATUS_INDICATOR_SIZE/2,strokeDasharray:`${t} ${t}`,strokeMiterlimit:0,strokeDashoffset:(1-e)*t})})}},335190,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t});Object.defineProperty(r,"__esModule",{value:!0}),r.RenderQueueItemStatus=void 0;let s=e.r(222260),l=o(e.r(347540)),u=e.r(921224),c=e.r(137798),d=e.r(235653),p=e.r(896509),f={height:d.RENDER_STATUS_INDICATOR_SIZE,width:d.RENDER_STATUS_INDICATOR_SIZE},h={appearance:"none",border:"none",padding:0,cursor:"pointer",display:"flex"};r.RenderQueueItemStatus=({job:e})=>{let{setSelectedModal:t}=(0,l.useContext)(c.ModalsContext),[r,i]=l.default.useState(!1),a=(0,p.isClientRenderJob)(e),n=(0,l.useCallback)(()=>{i(!0)},[]),o=(0,l.useCallback)(()=>{i(!1)},[]),m=(0,l.useCallback)(r=>{r.stopPropagation(),t({type:"render-progress",jobId:e.id})},[e.id,t]);if("failed"===e.status)return(0,s.jsx)("button",{type:"button",style:h,onClick:m,children:(0,s.jsx)("svg",{style:f,viewBox:"0 0 512 512",children:(0,s.jsx)("path",{fill:u.FAIL_COLOR,d:"M0 160V352L160 512H352L512 352V160L352 0H160L0 160zm353.9 32l-17 17-47 47 47 47 17 17L320 353.9l-17-17-47-47-47 47-17 17L158.1 320l17-17 47-47-47-47-17-17L192 158.1l17 17 47 47 47-47 17-17L353.9 192z"})})});if("idle"===e.status)return(0,s.jsx)("svg",{style:f,viewBox:"0 0 512 512",children:(0,s.jsx)("path",{fill:u.LIGHT_TEXT,d:"M256 512C114.6 512 0 397.4 0 256S114.6 0 256 0S512 114.6 512 256s-114.6 256-256 256zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"})});if("done"===e.status)return(0,s.jsx)("button",{type:"button",style:h,onPointerEnter:n,onPointerLeave:o,onClick:m,children:(0,s.jsx)("svg",{style:f,viewBox:"0 0 512 512",children:(0,s.jsx)("path",{fill:r?"white":u.LIGHT_TEXT,d:"M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM369 209L241 337l-17 17-17-17-64-64-17-17L160 222.1l17 17 47 47L335 175l17-17L385.9 192l-17 17z"})})});if("running"===e.status){let t;if(a){let{renderedFrames:r,totalFrames:i}=e.progress;t=i>0?r/i:0}else t=e.progress.value;return(0,s.jsx)("button",{type:"button",style:h,onClick:m,children:(0,s.jsx)(d.CircularProgress,{progress:Math.max(.07,t)})})}if("cancelled"===e.status)return(0,s.jsx)("svg",{style:f,viewBox:"0 0 512 512",children:(0,s.jsx)("path",{fill:u.FAIL_COLOR,d:"M0 160V352L160 512H352L512 352V160L352 0H160L0 160zm353.9 32l-17 17-47 47 47 47 17 17L320 353.9l-17-17-47-47-47 47-17 17L158.1 320l17-17 47-47-47-47-17-17L192 158.1l17 17 47 47 47-47 17-17L353.9 192z"})});throw Error("Unknown job status")}},957473,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RenderQueueOpenInFinderItem=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(681504),o=e.r(841674),s=e.r(277984),l=e.r(20330);r.RenderQueueOpenInFinderItem=({job:e})=>{let t=(0,a.useCallback)(t=>{t.stopPropagation(),(0,l.openInFileExplorer)({directory:e.outName}).catch(e=>{(0,s.showNotification)(`Could not open file: ${e.message}`,2e3)})},[e.outName]),r=(0,a.useMemo)(()=>({height:12,color:"currentColor"}),[]),u=(0,a.useCallback)(e=>(0,i.jsx)(n.ExpandedFolderIconSolid,{style:r,color:e}),[r]);return(0,i.jsx)(o.InlineAction,{renderAction:u,onClick:t})}},390273,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RenderQueueOutputName=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(896509),o=e.r(527658);r.RenderQueueOutputName=({job:e})=>{let t=(0,n.isClientRenderJob)(e),r=!t&&e.deletedOutputLocation,s=(0,a.useMemo)(()=>({...o.renderQueueItemSubtitleStyle,textDecoration:r?"line-through":"none",color:o.renderQueueItemSubtitleStyle.color,cursor:"inherit"}),[r]);return(0,i.jsx)("span",{style:s,title:t?`Downloaded as ${e.outName}`:r?"File was deleted":e.outName,children:e.outName})}},307671,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RenderQueueProgressMessage=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(137798),o=e.r(260240),s=e.r(896509),l={...e.r(527658).renderQueueItemSubtitleStyle};r.RenderQueueProgressMessage=({job:e})=>{if("running"!==e.status)throw Error("should not have rendered this component");let{setSelectedModal:t}=(0,a.useContext)(n.ModalsContext),{tabIndex:r}=(0,o.useZIndex)(),u=(0,s.isClientRenderJob)(e),c=(0,a.useCallback)(()=>{t({type:"render-progress",jobId:e.id})},[e.id,t]),d=u?`Rendering frame ${e.progress.renderedFrames}/${e.progress.totalFrames}`:e.progress.message;return(0,i.jsx)("button",{onClick:c,type:"button",style:l,tabIndex:r,title:d,children:d})}},351784,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RenderQueueRemoveItem=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(841674),s=e.r(277984),l=e.r(20330),u=e.r(896509);r.RenderQueueRemoveItem=({job:e})=>{let t=(0,u.isClientRenderJob)(e),{removeClientJob:r}=(0,a.useContext)(u.RenderQueueContext),{canvasContent:c}=(0,a.useContext)(n.Internals.CompositionManager),{setCanvasContent:d}=(0,a.useContext)(n.Internals.CompositionSetters),p=(0,a.useCallback)(i=>{if(i.stopPropagation(),t){c&&"output-blob"===c.type&&"done"===e.status&&c.getBlob===e.getBlob&&d(null),r(e.id),(0,s.showNotification)("Removed job",2e3);return}(0,l.removeRenderJob)(e).then(()=>{(0,s.showNotification)("Removed job",2e3)}).catch(e=>{(0,s.showNotification)(`Could not remove item: ${e.message}`,2e3)})},[e,t,r,c,d]),f=(0,a.useMemo)(()=>({height:16,color:"currentColor"}),[]),h=(0,a.useCallback)(e=>(0,i.jsx)("svg",{style:f,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",children:(0,i.jsx)("path",{fill:e,d:"M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"})}),[f]);return(0,i.jsx)(o.InlineAction,{renderAction:h,onClick:p})}},417679,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.makeClientRetryPayload=r.makeRetryPayload=void 0;let i=e.r(758927);r.makeRetryPayload=e=>{var t,r,a,n,o;let s=window.remotion_renderDefaults;if(!s)throw Error("defaults not set");if("still"===e.type)return{type:"server-render",compositionId:e.compositionId,initialFrame:e.frame,initialStillImageFormat:e.imageFormat,initialVideoImageFormat:null,initialJpegQuality:null!=(t=e.jpegQuality)?t:s.jpegQuality,initialScale:e.scale,initialLogLevel:e.logLevel,initialConcurrency:s.concurrency,maxConcurrency:s.maxConcurrency,minConcurrency:s.minConcurrency,initialMuted:s.muted,initialEnforceAudioTrack:s.enforceAudioTrack,initialProResProfile:null,initialx264Preset:s.x264Preset,initialPixelFormat:s.pixelFormat,initialAudioBitrate:s.audioBitrate,initialVideoBitrate:s.videoBitrate,initialEveryNthFrame:s.everyNthFrame,initialNumberOfGifLoops:s.numberOfGifLoops,initialDelayRenderTimeout:e.delayRenderTimeout,defaultConfigurationAudioCodec:s.audioCodec,initialEnvVariables:e.envVariables,initialDisableWebSecurity:e.chromiumOptions.disableWebSecurity,initialOpenGlRenderer:e.chromiumOptions.gl,initialHeadless:e.chromiumOptions.headless,initialIgnoreCertificateErrors:e.chromiumOptions.ignoreCertificateErrors,initialDarkMode:e.chromiumOptions.darkMode,defaultProps:i.NoReactInternals.deserializeJSONWithSpecialTypes(e.serializedInputPropsWithCustomSchema),inFrameMark:null,outFrameMark:null,initialOffthreadVideoCacheSizeInBytes:e.offthreadVideoCacheSizeInBytes,initialOffthreadVideoThreads:e.offthreadVideoThreads,initialColorSpace:s.colorSpace,initialMultiProcessOnLinux:e.multiProcessOnLinux,defaultConfigurationVideoCodec:s.codec,initialEncodingBufferSize:s.encodingBufferSize,initialEncodingMaxRate:s.encodingMaxRate,initialUserAgent:e.chromiumOptions.userAgent,initialBeep:e.beepOnFinish,initialRepro:e.repro,initialForSeamlessAacConcatenation:s.forSeamlessAacConcatenation,defaulMetadata:e.metadata,renderTypeOfLastRender:"still",initialHardwareAcceleration:s.hardwareAcceleration,initialChromeMode:e.chromeMode,initialMediaCacheSizeInBytes:e.mediaCacheSizeInBytes,renderDefaults:s};if("sequence"===e.type)return{type:"server-render",initialFrame:0,compositionId:e.compositionId,initialVideoImageFormat:null,initialJpegQuality:null!=(r=e.jpegQuality)?r:s.jpegQuality,initialScale:e.scale,initialLogLevel:e.logLevel,initialConcurrency:s.concurrency,maxConcurrency:s.maxConcurrency,minConcurrency:s.minConcurrency,initialMuted:s.muted,initialEnforceAudioTrack:s.enforceAudioTrack,initialProResProfile:null,initialx264Preset:s.x264Preset,initialPixelFormat:s.pixelFormat,initialAudioBitrate:s.audioBitrate,initialVideoBitrate:s.videoBitrate,initialEveryNthFrame:s.everyNthFrame,initialNumberOfGifLoops:s.numberOfGifLoops,initialDelayRenderTimeout:e.delayRenderTimeout,initialEnvVariables:e.envVariables,initialDisableWebSecurity:e.chromiumOptions.disableWebSecurity,initialOpenGlRenderer:e.chromiumOptions.gl,initialHeadless:e.chromiumOptions.headless,initialIgnoreCertificateErrors:e.chromiumOptions.ignoreCertificateErrors,initialDarkMode:e.chromiumOptions.darkMode,defaultProps:i.NoReactInternals.deserializeJSONWithSpecialTypes(e.serializedInputPropsWithCustomSchema),initialStillImageFormat:s.stillImageFormat,inFrameMark:e.startFrame,outFrameMark:e.endFrame,initialOffthreadVideoCacheSizeInBytes:e.offthreadVideoCacheSizeInBytes,initialOffthreadVideoThreads:e.offthreadVideoThreads,initialColorSpace:s.colorSpace,initialMultiProcessOnLinux:e.multiProcessOnLinux,defaultConfigurationVideoCodec:s.codec,defaultConfigurationAudioCodec:s.audioCodec,initialEncodingBufferSize:s.encodingBufferSize,initialEncodingMaxRate:s.encodingMaxRate,initialUserAgent:e.chromiumOptions.userAgent,initialBeep:e.beepOnFinish,initialRepro:e.repro,initialForSeamlessAacConcatenation:s.forSeamlessAacConcatenation,defaulMetadata:e.metadata,renderTypeOfLastRender:"sequence",initialHardwareAcceleration:s.hardwareAcceleration,initialChromeMode:e.chromeMode,initialMediaCacheSizeInBytes:e.mediaCacheSizeInBytes,renderDefaults:s};if("video"===e.type)return{type:"server-render",compositionId:e.compositionId,initialStillImageFormat:s.stillImageFormat,initialVideoImageFormat:e.imageFormat,initialJpegQuality:null!=(a=e.jpegQuality)?a:s.jpegQuality,initialScale:e.scale,initialLogLevel:e.logLevel,initialFrame:0,initialConcurrency:e.concurrency,maxConcurrency:s.maxConcurrency,minConcurrency:s.minConcurrency,initialMuted:e.muted,initialEnforceAudioTrack:e.enforceAudioTrack,initialProResProfile:null!=(n=e.proResProfile)?n:null,initialx264Preset:null!=(o=e.x264Preset)?o:s.x264Preset,initialPixelFormat:e.pixelFormat,initialAudioBitrate:e.audioBitrate,initialVideoBitrate:e.videoBitrate,initialEveryNthFrame:e.everyNthFrame,initialNumberOfGifLoops:e.numberOfGifLoops,initialDelayRenderTimeout:e.delayRenderTimeout,initialEnvVariables:e.envVariables,initialDisableWebSecurity:e.chromiumOptions.disableWebSecurity,initialOpenGlRenderer:e.chromiumOptions.gl,initialHeadless:e.chromiumOptions.headless,initialIgnoreCertificateErrors:e.chromiumOptions.ignoreCertificateErrors,initialDarkMode:e.chromiumOptions.darkMode,defaultProps:i.NoReactInternals.deserializeJSONWithSpecialTypes(e.serializedInputPropsWithCustomSchema),inFrameMark:e.startFrame,outFrameMark:e.endFrame,initialOffthreadVideoCacheSizeInBytes:e.offthreadVideoCacheSizeInBytes,initialOffthreadVideoThreads:e.offthreadVideoThreads,initialColorSpace:e.colorSpace,initialMultiProcessOnLinux:e.multiProcessOnLinux,defaultConfigurationVideoCodec:e.codec,defaultConfigurationAudioCodec:e.audioCodec,initialEncodingBufferSize:e.encodingBufferSize,initialEncodingMaxRate:e.encodingMaxRate,initialUserAgent:e.chromiumOptions.userAgent,initialBeep:e.beepOnFinish,initialRepro:e.repro,initialForSeamlessAacConcatenation:e.forSeamlessAacConcatenation,defaulMetadata:e.metadata,renderTypeOfLastRender:"video",initialHardwareAcceleration:e.hardwareAcceleration,initialChromeMode:e.chromeMode,initialMediaCacheSizeInBytes:e.mediaCacheSizeInBytes,renderDefaults:s};throw Error(`Job ${JSON.stringify(e)} Not implemented`)},r.makeClientRetryPayload=e=>({type:"web-render",compositionId:e.compositionId,initialFrame:"client-still"===e.type?e.frame:0,initialLogLevel:e.logLevel,initialLicenseKey:e.licenseKey,defaultProps:e.inputProps,inFrameMark:"client-video"===e.type?e.startFrame:null,outFrameMark:"client-video"===e.type?e.endFrame:null})},356570,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RenderQueueRepeatItem=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(321743),o=e.r(417679),s=e.r(137798),l=e.r(839270),u=e.r(841674),c=e.r(896509);r.RenderQueueRepeatItem=({job:e})=>{let{setSelectedModal:t}=(0,a.useContext)(s.ModalsContext),r=(0,n.useMobileLayout)(),{setSidebarCollapsedState:d}=(0,a.useContext)(l.SidebarContext),p=(0,c.isClientRenderJob)(e),f=(0,a.useCallback)(i=>{i.stopPropagation(),p?t((0,o.makeClientRetryPayload)(e)):t((0,o.makeRetryPayload)(e)),r&&d({left:"collapsed",right:"collapsed"})},[r,e,p,t,d]),h=(0,a.useMemo)(()=>({height:12,color:"currentColor"}),[]),m=(0,a.useCallback)(e=>(0,i.jsx)("svg",{style:h,viewBox:"0 0 512 512",children:(0,i.jsx)("path",{fill:e,d:"M386.3 160H336c-17.7 0-32 14.3-32 32s14.3 32 32 32H464c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32s-32 14.3-32 32v51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"})}),[h]);return(0,i.jsx)(u.InlineAction,{onClick:f,renderAction:m})}},10296,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RenderQueueItem=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(921224),s=e.r(910105),l=e.r(146575),u=e.r(896509),c=e.r(428357),d=e.r(359477),p=e.r(355844),f=e.r(318403),h=e.r(335190),m=e.r(957473),g=e.r(390273),v=e.r(307671),y=e.r(351784),b=e.r(356570),x={padding:12,display:"flex",flexDirection:"row",paddingBottom:10,paddingRight:4},w={fontSize:13,lineHeight:1},S={flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},k={maxWidth:"100%",flex:1,display:"flex",overflow:"hidden"},C="__remotion_selected_classname";r.RenderQueueItem=({job:e,selected:t})=>{let[r,E]=(0,a.useState)(!1),{setCanvasContent:_}=(0,a.useContext)(n.Internals.CompositionSetters),T=(0,u.isClientRenderJob)(e),P=(0,a.useCallback)(()=>{E(!0)},[]),I=(0,a.useCallback)(()=>{E(!1)},[]),A="done"===e.status&&(T||"sequence"!==e.type),O=(0,a.useMemo)(()=>({...x,backgroundColor:(0,o.getBackgroundFromHoverState)({hovered:A&&r,selected:t}),userSelect:"none",WebkitUserSelect:"none"}),[r,A,t]),M=(0,a.useCallback)(()=>{var e;null==(e=document.querySelector(`.${C}`))||e.scrollIntoView({behavior:"smooth"})},[]),F=(0,a.useCallback)(()=>{if("done"===e.status){if(T)return void _({type:"output-blob",displayName:e.outName,getBlob:e.getBlob,width:e.metadata.width,height:e.metadata.height,sizeInBytes:e.metadata.sizeInBytes});"sequence"!==e.type&&(_(r=>r&&"output"===r.type&&r.path===`/${e.outName}`&&!t?(M(),r):{type:"output",path:`/${e.outName}`}),(0,s.pushUrl)(`/outputs/${e.outName}`))}},[e,T,M,t,_]);return(0,a.useEffect)(()=>{t&&M()},[M,t]),(0,i.jsxs)(l.Row,{onPointerEnter:P,onPointerLeave:I,style:O,align:"center",onClick:F,className:t?C:void 0,children:[(0,i.jsx)(h.RenderQueueItemStatus,{job:e}),(0,i.jsx)(l.Spacing,{x:1}),(0,i.jsxs)("div",{style:S,children:[(0,i.jsx)("div",{style:w,children:e.compositionId}),(0,i.jsx)("div",{style:k,children:"done"===e.status?(0,i.jsx)(g.RenderQueueOutputName,{job:e}):"failed"===e.status?(0,i.jsx)(p.RenderQueueError,{job:e}):"running"===e.status?(0,i.jsx)(v.RenderQueueProgressMessage,{job:e}):"cancelled"===e.status?(0,i.jsx)(c.RenderQueueCancelledMessage,{}):null})]}),(0,i.jsx)(l.Spacing,{x:1}),!T&&(0,d.supportsCopyingToClipboard)(e)?(0,i.jsx)(d.RenderQueueCopyToClipboard,{job:e}):null,"done"===e.status||"failed"===e.status||"cancelled"===e.status?(0,i.jsx)(b.RenderQueueRepeatItem,{job:e}):null,"running"===e.status?(0,i.jsx)(f.RenderQueueCancelButton,{job:e}):(0,i.jsx)(y.RenderQueueRemoveItem,{job:e}),"done"!==e.status||T?null:(0,i.jsx)(m.RenderQueueOpenInFinderItem,{job:e})]})}},276194,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t});Object.defineProperty(r,"__esModule",{value:!0}),r.RenderQueue=void 0;let s=e.r(222260),l=o(e.r(347540)),u=e.r(49019),c=e.r(850586),d=e.r(921224),p=e.r(494296),f=e.r(146575),h=e.r(10296),m=e.r(896509),g={borderBottom:`1px solid ${d.BORDER_COLOR}`},v={fontSize:14,color:d.LIGHT_TEXT,fontFamily:"sans-serif",lineHeight:1.5},y={display:"flex",flex:1,flexDirection:"column",padding:"0 12px",justifyContent:"center",alignItems:"center",textAlign:"center",background:d.BACKGROUND},b={background:d.BACKGROUND,flex:1,overflowY:"auto"};r.RenderQueue=()=>{let e=(0,l.useContext)(c.StudioServerConnectionCtx).previewServerState.type,{jobs:t}=(0,l.useContext)(m.RenderQueueContext),{canvasContent:r}=(0,l.useContext)(u.Internals.CompositionManager),i=l.default.useRef(t.length),a=t.length,n=l.default.useRef(null);(0,l.useEffect)(()=>{n.current&&(a>i.current&&n.current.scrollTo({top:n.current.scrollHeight,behavior:"smooth"}),i.current=a)},[a]);let o=(0,l.useMemo)(()=>{if(!r)return -1;if("output-blob"===r.type){for(let e=0;e<t.length;e++){let i=t[e];if((0,m.isClientRenderJob)(i)&&"done"===i.status&&r.getBlob===i.getBlob)return e}return -1}if("output"===r.type)for(let e=0;e<t.length;e++){let i=t[e];if(!(0,m.isClientRenderJob)(i)&&"done"===i.status&&r.path===`/${i.outName}`)return e}return -1},[r,t]);return"disconnected"===e?(0,s.jsxs)("div",{style:y,children:[(0,s.jsx)(f.Spacing,{y:5}),(0,s.jsx)("div",{style:v,children:"The studio server has disconnected."}),(0,s.jsx)(f.Spacing,{y:2,block:!0})]}):0===a?(0,s.jsxs)("div",{style:y,children:[(0,s.jsx)(f.Spacing,{y:5}),(0,s.jsx)("div",{style:v,children:"No renders in the queue."}),(0,s.jsx)(f.Spacing,{y:2,block:!0})]}):(0,s.jsx)("div",{ref:n,style:b,className:["css-reset",p.VERTICAL_SCROLLBAR_CLASSNAME].join(" "),children:t.map((e,r)=>(0,s.jsx)("div",{style:r===t.length-1?void 0:g,children:(0,s.jsx)(h.RenderQueueItem,{selected:o===r,job:e})},e.id))})}},724118,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RendersTab=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(921224),s=e.r(896509),l=e.r(79999),u=e.r(146575),c={display:"flex",flexDirection:"row",fontSize:14,color:"inherit",alignItems:"center",flex:1},d={height:16,width:16,borderRadius:3,fontSize:10,display:"inline-flex",justifyContent:"center",alignItems:"center"};r.RendersTab=({selected:e,onClick:t})=>{let{jobs:r}=(0,a.useContext)(s.RenderQueueContext),{canvasContent:p}=(0,a.useContext)(n.Internals.CompositionManager),f=r.filter(e=>"failed"===e.status).length,h=r.length,m=(0,a.useMemo)(()=>!p||"composition"!==p.type||e,[p,e]),g=(0,a.useMemo)(()=>({...d,backgroundColor:f>0?o.FAIL_COLOR:"transparent",color:f>0?"white":o.LIGHT_TEXT,borderWidth:f>0?0:1,borderStyle:"solid",borderColor:o.LIGHT_TEXT}),[f]);return(0,i.jsx)(l.Tab,{selected:m,onClick:t,children:(0,i.jsxs)("div",{style:c,children:["Renders",h>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Flex,{}),(0,i.jsx)("div",{style:g,children:h})]}):null]})})}},893440,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getOriginalSourceAttribution=void 0,r.getOriginalSourceAttribution=e=>{if(!e.source)return"";let t=e.source.split("/"),r=t[t.length-1];if(r.startsWith("index")){let i=t[t.length-2];return`${i}/${r}:${e.line}`}return`${r}:${e.line}`}},187905,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ClickableFileName=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(412361),s=e.r(757328),l=e.r(893440),u={paddingLeft:s.SCHEMA_EDITOR_FIELDSET_PADDING,paddingTop:s.SCHEMA_EDITOR_FIELDSET_PADDING/2};r.ClickableFileName=({originalFileName:e})=>{let[t,r]=(0,a.useState)(!1),s=t&&"loaded"===e.type,c=(0,a.useCallback)(()=>{r(!0)},[]),d=(0,a.useCallback)(()=>{r(!1)},[]),p=(0,a.useMemo)(()=>({fontSize:12,cursor:"loaded"===e.type?"pointer":void 0,borderBottom:s?"1px solid #fff":"none",color:s?"#fff":n.LIGHT_COLOR}),[e,s]),f=(0,a.useCallback)(async()=>{"loaded"===e.type&&await (0,o.openOriginalPositionInEditor)(e.originalFileName)},[e]);return(0,i.jsx)("div",{style:u,children:(0,i.jsx)("span",{style:p,onClick:f,onPointerEnter:c,onPointerLeave:d,children:"loaded"===e.type?(0,l.getOriginalSourceAttribution)(e.originalFileName):"loading"===e.type?"Loading...":"Error loading"})})}},949241,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VisualControlHandleHeader=void 0;let i=e.r(222260),a=e.r(187905);r.VisualControlHandleHeader=({originalFileName:e})=>(0,i.jsx)(a.ClickableFileName,{originalFileName:e})},253056,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getLocationOfFunctionCall=r.getLocationOfSequence=void 0;let i=e.r(979754);r.getLocationOfSequence=e=>{if(!e)return null;let t=(0,i.parseStack)(e.split("\n")),r=0;for(;r<t.length;){let e=t[r];if("apply"===e.functionName){r++;continue}return e}return null},r.getLocationOfFunctionCall=(e,t)=>{if(!e)return null;let r=(0,i.parseStack)(e.split("\n")),a=0;for(;a<r.length;){if(r[a].functionName!==t){a++;continue}return r[a+1]}return null}},880104,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getOriginalLocationFromStack=void 0;let i=e.r(542591),a=e.r(963873),n=e.r(253056),o=[],s={},l={},u=async e=>{if(s[e])return s[e];if(l[e])return new Promise(t=>{o.push({id:String(Math.random()),forFileName:e,resolve:t})});l[e]=!0;let t=await fetch(`${e}.map`),r=await t.json(),a=await new Promise(e=>{i.SourceMapConsumer.with(r,null,t=>{e(t)})});return o.filter(t=>t.forFileName!==e||(t.resolve(a),!1)),s[e]=a,l[e]=!1,a};r.getOriginalLocationFromStack=async(e,t)=>{let r="sequence"===t?(0,n.getLocationOfSequence)(e):(0,n.getLocationOfFunctionCall)(e,"visualControl");if(!r)return null;let i=await u(r.fileName);return(0,a.getOriginalPosition)(i,r.lineNumber,r.columnNumber)}},459342,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useOriginalFileName=void 0;let i=e.r(347540),a=e.r(880104);r.useOriginalFileName=e=>{let[t,r]=(0,i.useState)({type:"loading"});return(0,i.useEffect)(()=>{e&&(0,a.getOriginalLocationFromStack)(e,"visual-control").then(e=>{null===e?r({type:"error",error:Error("No frame found")}):r({type:"loaded",originalFileName:e})}).catch(e=>{console.error("Could not get original location of Sequence",e)})},[e]),t}},481011,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VisualControlHandle=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(758927),s=e.r(929627),l=e.r(46028),u=e.r(277984),c=e.r(411474),d=e.r(874637),p=e.r(355244),f=e.r(20330),h=e.r(798207),m=e.r(146575),g=e.r(949241),v=e.r(459342);r.VisualControlHandle=({value:e,keyName:t})=>{let r=(0,h.useZodIfPossible)();if(!r)throw Error("expected zod");let y=(0,h.useZodTypesIfPossible)(),b=(0,a.useContext)(s.VisualControlsContext),{updateValue:x}=(0,a.useContext)(s.SetVisualControlsContext),{fastRefreshes:w}=(0,a.useContext)(n.Internals.NonceContext),{increaseManualRefreshes:S}=(0,a.useContext)(n.Internals.SetNonceContext),[k,C]=(0,a.useState)(!1),E=(0,l.getVisualControlEditedValue)({handles:b.handles,key:t}),_=(0,v.useOriginalFileName)(e.stack),{localValue:T,RevisionContextProvider:P,onChange:I}=(0,p.useLocalState)({schema:e.schema,setValue:e=>{x(t,e(E)),S()},unsavedValue:E,savedValue:e.valueInCode}),A=window.remotion_isReadOnlyStudio||"loaded"!==_.type,O=(0,a.useCallback)(i=>{if(A)return;if("loaded"!==_.type)throw Error("Original file name is not loaded");let a=i(e.valueInCode);window.remotion_ignoreFastRefreshUpdate=w+1;let n=(0,d.extractEnumJsonPaths)({schema:e.schema,zodRuntime:r,currentPath:[],zodTypes:y});C(!0),Promise.resolve().then(()=>(0,f.applyVisualControlChange)({fileName:_.originalFileName.source,changes:[{id:t,newValueSerialized:o.NoReactInternals.serializeJSONWithSpecialTypes({data:a,indent:2,staticBase:window.remotion_staticBase}).serializedString,enumPaths:n}]})).catch(e=>{(0,u.showNotification)(`Could not save visual control: ${e.message}`,3e3)})},[A,e.valueInCode,e.schema,w,r,_,t,y]);return(0,a.useEffect)(()=>{C(!1)},[w]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.VisualControlHandleHeader,{originalFileName:_}),(0,i.jsx)(m.Spacing,{block:!0,y:.5}),(0,i.jsx)(P,{children:(0,i.jsx)(c.ZodSwitch,{mayPad:!0,schema:e.schema,showSaveButton:!A,saving:k,saveDisabledByParent:!1,onSave:O,jsonPath:[t],value:T.value,defaultValue:e.valueInCode,setValue:I,onRemove:null})})]})}},574881,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t});Object.defineProperty(r,"__esModule",{value:!0}),r.VisualControlsContent=void 0;let s=e.r(222260),l=o(e.r(347540)),u=e.r(929627),c=e.r(494296),d=e.r(512891),p=e.r(481011),f={overflowY:"auto"};r.VisualControlsContent=()=>{let{handles:e}=(0,l.useContext)(u.VisualControlsContext),t=Object.entries(e);return(0,s.jsx)("div",{style:f,className:c.VERTICAL_SCROLLBAR_CLASSNAME,children:t.map(([e,r],i)=>(0,s.jsxs)(l.default.Fragment,{children:[(0,s.jsx)(p.VisualControlHandle,{keyName:e,value:r}),i===t.length-1?null:(0,s.jsx)(d.SchemaSeparationLine,{})]},e))})}},132726,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OptionsPanel=r.optionsSidebarTabs=r.persistSelectedOptionsSidebarPanel=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(921224),s=e.r(321743),l=e.r(929627),u=e.r(89106),c=e.r(860979),d=e.r(363835),p=e.r(276194),f=e.r(724118),h=e.r(79999),m=e.r(574881),g="remotion.sidebarPanel",v={backgroundColor:o.BACKGROUND};r.persistSelectedOptionsSidebarPanel=e=>{localStorage.setItem(g,e)},r.optionsSidebarTabs=(0,a.createRef)(),r.OptionsPanel=({readOnlyStudio:e})=>{let{props:t,updateProps:o,resetUnsaved:y}=(0,a.useContext)(n.Internals.EditorPropsContext),[b,x]=(0,a.useState)(!1),w=(0,s.useMobileLayout)(),S=(0,a.useContext)(l.VisualControlsTabActivatedContext),k=(0,a.useMemo)(()=>({height:"100%",width:"100%",display:"flex",position:w?"relative":"absolute",flexDirection:"column",flex:1}),[w]),[C,E]=(0,a.useState)(()=>(e=>{if(e)return"input-props";let t=localStorage.getItem(g);return"renders"===t?"renders":"visual-controls"===t?"visual-controls":"input-props"})(e)),_=(0,a.useCallback)(()=>{E("input-props"),(0,r.persistSelectedOptionsSidebarPanel)("input-props")},[]),T=(0,a.useCallback)(()=>{E("renders"),(0,r.persistSelectedOptionsSidebarPanel)("renders")},[]),P=(0,a.useCallback)(()=>{E("visual-controls"),(0,r.persistSelectedOptionsSidebarPanel)("visual-controls")},[]);(0,a.useImperativeHandle)(r.optionsSidebarTabs,()=>({selectRendersPanel:()=>{E("renders"),(0,r.persistSelectedOptionsSidebarPanel)("renders")}}),[]);let{compositions:I,canvasContent:A}=(0,a.useContext)(n.Internals.CompositionManager),O=(0,a.useMemo)(()=>{if(null===A||"composition"!==A.type)return null;for(let e of I)if(e.id===A.compositionId)return e;return null},[A,I]),M=(0,a.useCallback)(e=>{null!==O&&(window.remotion_ignoreFastRefreshUpdate=null,o({id:O.id,defaultProps:O.defaultProps,newProps:e}))},[O,o]),F=(0,a.useMemo)(()=>{var e,r;return null===O?{}:null!=(r=null!=(e=t[O.id])?e:O.defaultProps)?r:{}},[O,t]),R=(0,a.useMemo)(()=>null!==O&&void 0!==O.defaultProps&&!(0,d.deepEqual)(O.defaultProps,F),[F,O]),D=(0,a.useCallback)(e=>{e.detail.resetUnsaved&&y(e.detail.resetUnsaved)},[y]);return(0,a.useEffect)(()=>(window.addEventListener(n.Internals.PROPS_UPDATED_EXTERNALLY,D),()=>{window.removeEventListener(n.Internals.PROPS_UPDATED_EXTERNALLY,D)}),[D]),(0,i.jsxs)("div",{style:k,className:"css-reset",children:[(0,i.jsx)("div",{style:v,children:(0,i.jsxs)(h.Tabs,{children:[S?(0,i.jsx)(h.Tab,{selected:"visual-controls"===C,onClick:P,children:"Controls"}):null,O?(0,i.jsxs)(h.Tab,{selected:"input-props"===C,onClick:_,style:{justifyContent:"space-between"},children:["Props",R?(0,i.jsx)(u.GlobalPropsEditorUpdateButton,{compositionId:O.id,currentDefaultProps:F}):null]}):null,e?null:(0,i.jsx)(f.RendersTab,{onClick:T,selected:"renders"===C})]})}),"input-props"===C&&O?(0,i.jsx)(c.DataEditor,{unresolvedComposition:O,defaultProps:F,setDefaultProps:M,mayShowSaveButton:!0,propsEditType:"default-props",saving:b,setSaving:x,readOnlyStudio:e},O.id):"visual-controls"===C&&S?(0,i.jsx)(m.VisualControlsContent,{}):e?null:(0,i.jsx)(p.RenderQueue,{})]})}},948481,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shouldShowRenderButton=void 0;let i=e.r(605769);r.shouldShowRenderButton=e=>!e||i.SHOW_BROWSER_RENDERING},177182,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.loadLoopOption=r.persistLoopOption=void 0;let i="remotion.loop";r.persistLoopOption=e=>{localStorage.setItem(i,String(e))},r.loadLoopOption=()=>"false"!==localStorage.getItem(i)},982567,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CheckboardToggle=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(758927),o=e.r(921224),s=e.r(362087),l=e.r(786676),u=e.r(488441),c=["Show transparency as checkerboard",(0,s.areKeyboardShortcutsDisabled)()?null:"(T)"].filter(n.NoReactInternals.truthy).join(" ");r.CheckboardToggle=()=>{let{checkerboard:e,setCheckerboard:t}=(0,a.useContext)(l.CheckerboardContext),r=(0,a.useCallback)(()=>{t(e=>!e)},[t]);return(0,i.jsx)(u.ControlButton,{title:c,"aria-label":c,onClick:r,children:(0,i.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"game-board-alt",className:"svg-inline--fa fa-game-board-alt fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",style:{width:16,height:16},children:(0,i.jsx)("path",{fill:e?o.BLUE:"white",d:"M480 0H32A32 32 0 0 0 0 32v448a32 32 0 0 0 32 32h448a32 32 0 0 0 32-32V32a32 32 0 0 0-32-32zm-32 256H256v192H64V256h192V64h192z"})})})}},288119,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FpsCounter=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o={color:"white",fontSize:15,fontFamily:"Arial, Helvetica, sans-serif",whiteSpace:"nowrap"};r.FpsCounter=({playbackSpeed:e})=>{let t=n.Internals.useUnsafeVideoConfig(),[r]=n.Internals.Timeline.usePlayingState(),s=n.Internals.Timeline.useTimelinePosition(),[l,u]=(0,a.useState)({}),[c,d]=(0,a.useState)(0),p=(0,a.useRef)([]),f=(0,a.useRef)(0),h=(0,a.useRef)(r);(0,a.useLayoutEffect)(()=>{f.current=0,p.current=[],h.current=r},[r]),(0,a.useLayoutEffect)(()=>{var e,t;!1!==h.current&&(e=p.current,t=performance.now(),e.push(t),p.current=e.slice(-15),p.current.length<2||(f.current=1e3/((Math.max(...p.current)-Math.min(...p.current))/(p.current.length-1)),2===p.current.length&&d(f.current)))},[s]),(0,a.useEffect)(()=>{if(r){let e=setTimeout(()=>{u({}),d(f.current)},1e3);return()=>clearTimeout(e)}},[l,r]);let m=(0,a.useMemo)(()=>{if(!t)return{};let r=Math.abs(e)*t.fps;return{...o,color:c<.9*r?"red":"white"}},[c,e,t]);return 0===c||!1===r||null===t?null:(0,i.jsxs)("div",{style:m,children:[c.toFixed(1)," FPS"]})}},570026,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FullScreenToggle=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(758927),s=e.r(362087),l=e.r(184085),u=e.r(488441),c=["Enter fullscreen preview",(0,s.areKeyboardShortcutsDisabled)()?null:"(F)"].filter(o.NoReactInternals.truthy).join(" ");r.FullScreenToggle=()=>{let e=(0,s.useKeybinding)(),{setSize:t}=(0,a.useContext)(n.Internals.PreviewSizeContext),r=(0,a.useCallback)(()=>{var e;null==(e=l.drawRef.current)||e.requestFullscreen(),document.fullscreenElement&&t(()=>({size:"auto",translation:{x:0,y:0}}))},[t]);return(0,a.useEffect)(()=>{let t=e.registerKeybinding({event:"keydown",key:"f",callback:r,commandCtrlKey:!1,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1});return()=>{t.unregister()}},[e,r]),(0,i.jsx)(u.ControlButton,{title:c,"aria-label":c,onClick:r,children:(0,i.jsx)("svg",{style:{width:18,height:18},viewBox:"0 0 448 512",fill:"#fff",children:(0,i.jsx)("path",{d:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"})})})}},901813,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LoopToggle=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(177182),s=e.r(488441),l="Loop video";r.LoopToggle=({loop:e,setLoop:t})=>{let r=(0,a.useCallback)(()=>{t(e=>((0,o.persistLoopOption)(!e),!e))},[t]);return(0,i.jsx)(s.ControlButton,{title:l,"aria-label":l,onClick:r,children:(0,i.jsx)("svg",{viewBox:"0 0 512 512",style:{width:18,height:18},children:(0,i.jsx)("path",{fill:e?n.BLUE:"white",d:"M493.544 181.463c11.956 22.605 18.655 48.4 18.452 75.75C511.339 345.365 438.56 416 350.404 416H192v47.495c0 22.475-26.177 32.268-40.971 17.475l-80-80c-9.372-9.373-9.372-24.569 0-33.941l80-80C166.138 271.92 192 282.686 192 304v48h158.875c52.812 0 96.575-42.182 97.12-94.992.155-15.045-3.17-29.312-9.218-42.046-4.362-9.185-2.421-20.124 4.8-27.284 4.745-4.706 8.641-8.555 11.876-11.786 11.368-11.352 30.579-8.631 38.091 5.571zM64.005 254.992c.545-52.81 44.308-94.992 97.12-94.992H320v47.505c0 22.374 26.121 32.312 40.971 17.465l80-80c9.372-9.373 9.372-24.569 0-33.941l-80-80C346.014 16.077 320 26.256 320 48.545V96H161.596C73.44 96 .661 166.635.005 254.788c-.204 27.35 6.495 53.145 18.452 75.75 7.512 14.202 26.723 16.923 38.091 5.57 3.235-3.231 7.13-7.08 11.876-11.786 7.22-7.16 9.162-18.098 4.8-27.284-6.049-12.735-9.374-27.001-9.219-42.046z"})})})}},347024,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VolumeOnIcon=r.VolumeOffIcon=void 0;let i=e.r(222260),a=e.r(921224);r.VolumeOffIcon=()=>(0,i.jsx)("svg",{width:22,height:22,viewBox:"0 0 24 24",children:(0,i.jsx)("path",{d:"M3.63 3.63a.996.996 0 000 1.41L7.29 8.7 7 9H4c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71v-4.17l4.18 4.18c-.49.37-1.02.68-1.6.91-.36.15-.58.53-.58.92 0 .72.73 1.18 1.39.91.8-.33 1.55-.77 2.22-1.31l1.34 1.34a.996.996 0 101.41-1.41L5.05 3.63c-.39-.39-1.02-.39-1.42 0zM19 12c0 .82-.15 1.61-.41 2.34l1.53 1.53c.56-1.17.88-2.48.88-3.87 0-3.83-2.4-7.11-5.78-8.4-.59-.23-1.22.23-1.22.86v.19c0 .38.25.71.61.85C17.18 6.54 19 9.06 19 12zm-8.71-6.29l-.17.17L12 7.76V6.41c0-.89-1.08-1.33-1.71-.7zM16.5 12A4.5 4.5 0 0014 7.97v1.79l2.48 2.48c.01-.08.02-.16.02-.24z",fill:a.BLUE})}),r.VolumeOnIcon=()=>(0,i.jsx)("svg",{width:22,height:22,viewBox:"0 0 24 24",children:(0,i.jsx)("path",{d:"M3 10v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71V6.41c0-.89-1.08-1.34-1.71-.71L7 9H4c-.55 0-1 .45-1 1zm13.5 2A4.5 4.5 0 0014 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 4.45v.2c0 .38.25.71.6.85C17.18 6.53 19 9.06 19 12s-1.82 5.47-4.4 6.5c-.36.14-.6.47-.6.85v.2c0 .63.63 1.07 1.21.85C18.6 19.11 21 15.84 21 12s-2.4-7.11-5.79-8.4c-.58-.23-1.21.22-1.21.85z",fill:"#fff"})})},929138,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.loadMuteOption=r.persistMuteOption=void 0;let i="remotion.mute";r.persistMuteOption=e=>{localStorage.setItem(i,String(e))},r.loadMuteOption=()=>"true"===localStorage.getItem(i)},869201,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MuteToggle=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(347024),o=e.r(929138),s=e.r(488441);r.MuteToggle=({muted:e,setMuted:t})=>{let r=(0,a.useCallback)(()=>{t(e=>((0,o.persistMuteOption)(!e),!e))},[t]),l=e?"Unmute video":"Mute video";return(0,i.jsx)(s.ControlButton,{title:l,"aria-label":l,onClick:r,children:e?(0,i.jsx)(n.VolumeOffIcon,{}):(0,i.jsx)(n.VolumeOnIcon,{})})}},308391,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.JumpToStart=void 0;let i=e.r(222260);r.JumpToStart=e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",...e,children:(0,i.jsx)("path",{fill:"currentColor",d:"M0 415.1V96.03c0-17.67 14.33-31.1 31.1-31.1C49.67 64.03 64 78.36 64 96.03v131.8l171.5-156.5C256.1 54.28 288 68.66 288 96.03v131.9l171.5-156.5C480.1 54.28 512 68.66 512 96.03v319.9c0 27.37-31.88 41.74-52.5 24.62L288 285.2v130.7c0 27.37-31.88 41.74-52.5 24.62L64 285.2v130.7c0 17.67-14.33 31.1-31.1 31.1C14.33 447.1 0 433.6 0 415.1z"})})},36243,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Pause=void 0;let i=e.r(222260);r.Pause=e=>(0,i.jsx)("svg",{...e,"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"pause",className:"svg-inline--fa fa-pause fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",children:(0,i.jsx)("path",{fill:"currentColor",d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"})})},883098,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Play=void 0;let i=e.r(222260);r.Play=e=>(0,i.jsx)("svg",{...e,"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"play",className:"svg-inline--fa fa-play fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",children:(0,i.jsx)("path",{fill:"currentColor",d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"})})},596328,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StepBack=void 0;let i=e.r(222260);r.StepBack=e=>(0,i.jsx)("svg",{viewBox:"0 0 448 512",...e,children:(0,i.jsx)("path",{fill:"currentColor",d:"M64 468V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12v176.4l195.5-181C352.1 22.3 384 36.6 384 64v384c0 27.4-31.9 41.7-52.5 24.6L136 292.7V468c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12z"})})},64163,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StepForward=void 0;let i=e.r(222260);r.StepForward=e=>(0,i.jsx)("svg",{viewBox:"0 0 448 512",...e,children:(0,i.jsx)("path",{fill:"currentColor",d:"M384 44v424c0 6.6-5.4 12-12 12h-48c-6.6 0-12-5.4-12-12V291.6l-195.5 181C95.9 489.7 64 475.4 64 448V64c0-27.4 31.9-41.7 52.5-24.6L312 219.3V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12z"})})},161233,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PlayPause=void 0;let i=e.r(222260),a=e.r(853987),n=e.r(347540),o=e.r(49019),s=e.r(43557),l=e.r(362087),u=e.r(308391),c=e.r(36243),d=e.r(883098),p=e.r(596328),f=e.r(64163),h=e.r(535932),m=e.r(488441),g=e.r(440028),v=e.r(166833),y={height:18,color:"white"},b={height:16,color:"white"},x={height:14,width:14,color:"white"};r.PlayPause=({playbackRate:e,loop:t,bufferStateDelayInMilliseconds:r})=>{let{inFrame:w,outFrame:S}=(0,h.useTimelineInOutFramePosition)(),k=o.Internals.useUnsafeVideoConfig(),[C,E]=(0,n.useState)(!1),{playing:_,play:T,pause:P,pauseAndReturnToPlayStart:I,frameBack:A,seek:O,frameForward:M,isLastFrame:F,isFirstFrame:R,emitter:D,getCurrentFrame:j}=a.PlayerInternals.usePlayer();a.PlayerInternals.usePlayback({loop:t,playbackRate:e,moveToBeginningWhenEnded:!0,inFrame:w,outFrame:S,getCurrentFrame:j,browserMediaControlsBehavior:{mode:"register-media-session"}});let L=(0,s.useIsStill)();(0,n.useEffect)(()=>{L&&P()},[L,P]);let B=(0,n.useCallback)(e=>{_?P():T(),e.preventDefault()},[P,T,_]),N=(0,n.useCallback)(e=>{_&&(e.preventDefault(),I())},[I,_]),$=(0,n.useCallback)(e=>{e.preventDefault(),e.altKey?(O(0),(0,v.ensureFrameIsInViewport)({direction:"fit-left",durationInFrames:(0,g.getCurrentDuration)(),frame:0})):e.shiftKey?(A((0,g.getCurrentFps)()),(0,v.ensureFrameIsInViewport)({direction:"fit-left",durationInFrames:(0,g.getCurrentDuration)(),frame:Math.max(0,j()-(0,g.getCurrentFps)())})):(A(1),(0,v.ensureFrameIsInViewport)({direction:"fit-left",durationInFrames:(0,g.getCurrentDuration)(),frame:Math.max(0,j()-1)}))},[A,O,j]),z=(0,n.useCallback)(e=>{e.altKey?(O((0,g.getCurrentDuration)()-1),(0,v.ensureFrameIsInViewport)({direction:"fit-right",durationInFrames:(0,g.getCurrentDuration)()-1,frame:(0,g.getCurrentDuration)()-1})):e.shiftKey?(M((0,g.getCurrentFps)()),(0,v.ensureFrameIsInViewport)({direction:"fit-right",durationInFrames:(0,g.getCurrentDuration)(),frame:Math.min((0,g.getCurrentDuration)()-1,j()+(0,g.getCurrentFps)())})):(M(1),(0,v.ensureFrameIsInViewport)({direction:"fit-right",durationInFrames:(0,g.getCurrentDuration)(),frame:Math.min((0,g.getCurrentDuration)()-1,j()+1)})),e.preventDefault()},[M,O,j]),U=(0,n.useCallback)(()=>{A(1)},[A]),V=(0,n.useCallback)(()=>{M(1)},[M]),H=(0,n.useCallback)(()=>{O(null!=w?w:0)},[O,w]),W=(0,n.useCallback)(()=>{O(null!=S?S:(0,g.getCurrentDuration)()-1)},[O,S]),q=(0,l.useKeybinding)();return(0,n.useEffect)(()=>{let e=q.registerKeybinding({event:"keydown",key:"ArrowLeft",callback:$,commandCtrlKey:!1,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1}),t=q.registerKeybinding({event:"keydown",key:"ArrowRight",callback:z,commandCtrlKey:!1,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1}),r=q.registerKeybinding({event:"keydown",key:" ",callback:B,commandCtrlKey:!1,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1}),i=q.registerKeybinding({event:"keydown",key:"enter",callback:N,commandCtrlKey:!1,preventDefault:!1,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1}),a=q.registerKeybinding({event:"keydown",key:"a",callback:H,commandCtrlKey:!1,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1}),n=q.registerKeybinding({event:"keydown",key:"e",callback:W,commandCtrlKey:!1,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1});return()=>{e.unregister(),t.unregister(),r.unregister(),i.unregister(),a.unregister(),n.unregister()}},[W,H,q,$,z,N,B]),(0,n.useEffect)(()=>{let e=null,t=!1,i=()=>{requestAnimationFrame(()=>{t=!1,e=setTimeout(()=>{t||E(!0)},r)})},a=()=>{requestAnimationFrame(()=>{E(!1),t=!0,e&&clearTimeout(e)})};return D.addEventListener("waiting",i),D.addEventListener("resume",a),()=>{D.removeEventListener("waiting",i),D.removeEventListener("resume",a),E(!1),e&&clearTimeout(e),t=!0}},[r,D]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.ControlButton,{"aria-label":"Jump to beginning",title:"Jump to beginning",disabled:!k||R,onClick:H,children:(0,i.jsx)(u.JumpToStart,{style:y})}),(0,i.jsx)(m.ControlButton,{"aria-label":"Step back one frame",title:"Step back one frame",disabled:!k||R,onClick:U,children:(0,i.jsx)(p.StepBack,{style:b})}),(0,i.jsx)(m.ControlButton,{"aria-label":_?"Pause":"Play",title:_?"Pause":"Play",onClick:_?P:T,disabled:!k,children:_?C?(0,i.jsx)(a.PlayerInternals.BufferingIndicator,{type:"studio"}):(0,i.jsx)(c.Pause,{style:x}):(0,i.jsx)(d.Play,{style:x})}),(0,i.jsx)(m.ControlButton,{"aria-label":"Step forward one frame",title:"Step forward one frame",disabled:!k||F,onClick:V,children:(0,i.jsx)(f.StepForward,{style:b})})]})}},393974,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PlaybackKeyboardShortcutsManager=void 0;let i=e.r(853987),a=e.r(347540),n=e.r(362087);r.PlaybackKeyboardShortcutsManager=({setPlaybackRate:e})=>{let t=(0,n.useKeybinding)(),{play:r,pause:o,playing:s}=i.PlayerInternals.usePlayer(),l=(0,a.useCallback)(()=>{e(e=>!s||e>-1?-1:e>-2?-2:-4),r()},[r,s,e]),u=(0,a.useCallback)(()=>{e(1),o()},[o,e]),c=(0,a.useCallback)(()=>{e(e=>!s||e<1?1:e<2?2:4),r()},[r,s,e]);return(0,a.useEffect)(()=>{let e=t.registerKeybinding({event:"keydown",key:"j",callback:l,commandCtrlKey:!1,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1}),r=t.registerKeybinding({event:"keydown",key:"k",callback:u,commandCtrlKey:!1,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1}),i=t.registerKeybinding({event:"keydown",key:"l",callback:c,commandCtrlKey:!1,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1});return()=>{e.unregister(),r.unregister(),i.unregister()}},[t,l,u,c]),null}},90807,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.loadPlaybackRate=r.persistPlaybackRate=void 0;let i="remotion.playbackrate";r.persistPlaybackRate=e=>{localStorage.setItem(i,String(e))},r.loadPlaybackRate=()=>{let e=localStorage.getItem(i);return null===e?1:Number(e)}},335614,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PlaybackRatePersistor=void 0;let i=e.r(347540),a=e.r(49019),n=e.r(90807);r.PlaybackRatePersistor=()=>{let{setPlaybackRate:e,playbackRate:t}=(0,i.useContext)(a.Internals.TimelineContext);return(0,i.useEffect)(()=>{e((0,n.loadPlaybackRate)())},[e]),(0,i.useEffect)(()=>{(0,n.persistPlaybackRate)(t)},[t]),null}},216426,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PlaybackRateSelector=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(43557),s=e.r(170260),l=e.r(90807),u=e.r(488441),c=e.r(432804),d=[-4,-2,-1,-.5,-.25,.25,.5,1,1.5,2,4],p="Change the playback rate",f={width:80};r.PlaybackRateSelector=({playbackRate:e,setPlaybackRate:t})=>{let{canvasContent:r}=(0,a.useContext)(n.Internals.CompositionManager),h=(0,o.useIsStill)(),m=(0,a.useMemo)(()=>({padding:u.CONTROL_BUTTON_PADDING}),[]),g=(0,a.useMemo)(()=>{let r=d.map(r=>({id:String(r),label:`${r}x`,onClick:()=>t(()=>((0,l.persistPlaybackRate)(r),r)),type:"item",value:r,keyHint:null,leftItem:String(e)===String(r)?(0,i.jsx)(s.Checkmark,{}):null,subMenu:null,quickSwitcherLabel:null})),a=Math.floor(d.length/2);return[...r.slice(0,a),{type:"divider",id:"divider"},...r.slice(a)]},[e,t]);return h||null===r||"asset"===r.type?null:(0,i.jsx)("div",{style:m,"aria-label":p,children:(0,i.jsx)(c.Combobox,{title:p,style:f,selectedId:String(e),values:g})})}},890846,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.RenderButton=void 0;let a=e.r(222260),n=e.r(853987),o=e.r(347540),s=i(e.r(149579)),l=e.r(49019),u=e.r(850586),c=e.r(921224),d=e.r(605769),p=e.r(362087),f=e.r(191928),h=e.r(27163),m=e.r(535932),g=e.r(137798),v=e.r(260240),y=e.r(494296),b=e.r(414321),x=e.r(490586),w=e.r(67405),S=e.r(146575),k={display:"inline-flex",flexDirection:"row",alignItems:"stretch",borderRadius:4,border:`1px solid ${c.INPUT_BORDER_COLOR_UNHOVERED}`,backgroundColor:c.INPUT_BACKGROUND,overflow:"hidden"},C={paddingLeft:7,paddingRight:7,paddingTop:7,paddingBottom:7,background:"transparent",border:"none",color:"white",cursor:"pointer",display:"flex",alignItems:"center",fontSize:14,fontFamily:"inherit"},E={width:1,backgroundColor:c.INPUT_BORDER_COLOR_UNHOVERED,alignSelf:"stretch"},_={paddingLeft:6,paddingRight:6,paddingTop:7,paddingBottom:7,background:"transparent",border:"none",color:"white",cursor:"pointer",display:"flex",alignItems:"center"},T={paddingLeft:4,paddingRight:6},P={fontSize:14},I="remotion.renderType";r.RenderButton=({readOnlyStudio:e})=>{let{inFrame:t,outFrame:r}=(0,m.useTimelineInOutFramePosition)(),{setSelectedModal:i}=(0,o.useContext)(g.ModalsContext),[A,O]=(0,o.useState)(()=>(e=>{if(!d.SHOW_BROWSER_RENDERING)return"server-render";if(e)return"client-render";try{let e=localStorage.getItem(I);if("server-render"===e||"client-render"===e)return e}catch(e){}return"server-render"})(e)),[M,F]=(0,o.useState)(!1),R=(0,o.useRef)(null),D=(0,o.useRef)(null),{currentZIndex:j}=(0,v.useZIndex)(),L=n.PlayerInternals.useElementSize(R,{triggerOnWindowResize:!0,shouldApplyCssTransforms:!0}),B=null==L?void 0:L.refresh,N=(0,o.useCallback)(()=>{F(e=>(e||null==B||B(),!e))},[B]),$=(0,o.useCallback)(e=>{e.stopPropagation(),0===e.detail&&F(e=>(e||(null==B||B(),window.addEventListener("pointerup",e=>{(0,y.isMenuItem)(e.target)||F(!1)},{once:!0})),!e))},[B]),z=(0,o.useContext)(u.StudioServerConnectionCtx).previewServerState.type,U=(0,p.areKeyboardShortcutsDisabled)()?"":"(R)",V="connected"===z?"Export the current composition "+U:"Connect to the Studio server to render",H=(0,o.useMemo)(()=>({style:{height:16,color:"currentColor"}}),[]),W=l.Internals.useVideo(),q=n.PlayerInternals.useFrameImperative(),{props:G}=(0,o.useContext)(l.Internals.EditorPropsContext),Z=(0,o.useCallback)(()=>{var e,a,n;if(!W)return null;let o=window.remotion_renderDefaults;if(!o)throw TypeError("Expected defaults");i({type:"server-render",compositionId:W.id,initialFrame:q(),initialStillImageFormat:o.stillImageFormat,initialVideoImageFormat:null,initialJpegQuality:o.jpegQuality,initialScale:null!=(a=null==(e=window.remotion_renderDefaults)?void 0:e.scale)?a:1,initialLogLevel:o.logLevel,initialConcurrency:o.concurrency,maxConcurrency:o.maxConcurrency,minConcurrency:o.minConcurrency,initialMuted:o.muted,initialEnforceAudioTrack:o.enforceAudioTrack,initialProResProfile:o.proResProfile,initialx264Preset:o.x264Preset,initialPixelFormat:null,initialAudioBitrate:o.audioBitrate,initialVideoBitrate:o.videoBitrate,initialEveryNthFrame:o.everyNthFrame,initialNumberOfGifLoops:o.numberOfGifLoops,initialDelayRenderTimeout:o.delayRenderTimeout,defaultConfigurationAudioCodec:o.audioCodec,initialEnvVariables:window.process.env,initialDisableWebSecurity:o.disableWebSecurity,initialDarkMode:o.darkMode,initialOpenGlRenderer:o.openGlRenderer,initialHeadless:o.headless,initialIgnoreCertificateErrors:o.ignoreCertificateErrors,initialOffthreadVideoCacheSizeInBytes:o.offthreadVideoCacheSizeInBytes,initialOffthreadVideoThreads:o.offthreadVideoThreads,defaultProps:null!=(n=G[W.id])?n:W.defaultProps,inFrameMark:t,outFrameMark:r,initialColorSpace:o.colorSpace,initialMultiProcessOnLinux:o.multiProcessOnLinux,defaultConfigurationVideoCodec:o.codec,initialEncodingBufferSize:o.encodingBufferSize,initialEncodingMaxRate:o.encodingMaxRate,initialUserAgent:o.userAgent,initialBeep:o.beepOnFinish,initialRepro:o.repro,initialForSeamlessAacConcatenation:o.forSeamlessAacConcatenation,renderTypeOfLastRender:null,defaulMetadata:o.metadata,initialHardwareAcceleration:o.hardwareAcceleration,initialChromeMode:o.chromeMode,initialMediaCacheSizeInBytes:o.mediaCacheSizeInBytes,renderDefaults:o})},[W,i,q,G,t,r]),K=(0,o.useCallback)(()=>{var e;if(!W)return null;let a=window.remotion_renderDefaults;if(!a)throw TypeError("Expected defaults");i({type:"web-render",compositionId:W.id,initialFrame:q(),defaultProps:null!=(e=G[W.id])?e:W.defaultProps,inFrameMark:t,outFrameMark:r,initialLogLevel:a.logLevel,initialLicenseKey:a.publicLicenseKey})},[W,i,q,G,t,r]),Q=(0,o.useCallback)(()=>{d.SHOW_BROWSER_RENDERING&&"server-render"!==A?K():Z()},[A,Z,K]),X=(0,o.useCallback)(()=>{F(!1)},[]),J=(0,o.useCallback)(e=>{O(e);try{localStorage.setItem(I,e)}catch(e){}F(!1),"server-render"===e?Z():K()},[Z,K]),Y=(0,o.useMemo)(()=>[{type:"item",id:"server-render",label:"Server-side render",value:"server-render",onClick:()=>J("server-render"),keyHint:null,leftItem:null,subMenu:null,quickSwitcherLabel:null},{type:"item",id:"client-render",label:"Client-side render",value:"client-render",onClick:()=>J("client-render"),keyHint:null,leftItem:null,subMenu:null,quickSwitcherLabel:null}],[J]),ee=(0,o.useMemo)(()=>L&&M?L.windowSize.height-(L.top+L.height)-10:0,[M,L]),et=(0,o.useMemo)(()=>L&&M?L.top-10:0,[M,L]),er=(0,o.useMemo)(()=>et>ee?et:ee,[ee,et]),ei=(0,o.useMemo)(()=>M&&L?{..."top"==(et>ee?"bottom":"top")?{...x.menuContainerTowardsBottom,top:L.top+L.height}:{...x.menuContainerTowardsTop,bottom:L.windowSize.height-L.top},right:L.windowSize.width-L.left-L.width}:null,[M,L,ee,et]),ea=(0,o.useMemo)(()=>({...k,borderColor:c.INPUT_BORDER_COLOR_UNHOVERED,opacity:"connected"!==z?.7:1,cursor:"connected"!==z?"inherit":"pointer"}),[z]),en="server-render"===A?"Render":"Render on web",eo=(0,o.useMemo)(()=>!e&&!!d.SHOW_BROWSER_RENDERING,[e]);return W?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{style:{display:"none"},id:"render-modal-button-server",disabled:"connected"!==z&&"server-render"===A,onClick:Z,type:"button"})," ",(0,a.jsx)("button",{style:{display:"none"},id:"render-modal-button-client",onClick:K,type:"button"}),(0,a.jsxs)("div",{ref:D,style:ea,title:V,children:[(0,a.jsx)("button",{type:"button",style:C,onClick:Q,id:"render-modal-button",disabled:"connected"!==z&&"server-render"===A,children:(0,a.jsxs)(S.Row,{align:"center",style:T,children:[(0,a.jsx)(h.ThinRenderIcon,{fill:"currentcolor",svgProps:H}),(0,a.jsx)(S.Spacing,{x:1}),(0,a.jsx)("span",{style:P,children:en})]})}),eo?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:E}),(0,a.jsx)("button",{ref:R,type:"button",style:_,disabled:"connected"!==z,className:y.MENU_INITIATOR_CLASSNAME,onPointerDown:N,onClick:$,children:(0,a.jsx)(f.CaretDown,{})})]}):null]}),ei?s.default.createPortal((0,a.jsx)("div",{style:x.fullScreenOverlay,children:(0,a.jsx)("div",{style:x.outerPortal,className:"css-reset",children:(0,a.jsx)(v.HigherZIndex,{onOutsideClick:X,onEscape:X,children:(0,a.jsx)("div",{style:ei,children:(0,a.jsx)(w.MenuContent,{onNextMenu:()=>{},onPreviousMenu:()=>{},values:Y,onHide:X,leaveLeftSpace:!1,preselectIndex:Y.findIndex(e=>e.id===A),topItemCanBeUnselected:!1,fixedHeight:er})})})})}),(0,b.getPortal)(j)):null]}):null}},473507,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Minus=void 0;let i=e.r(222260);r.Minus=e=>(0,i.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",children:(0,i.jsx)("path",{fill:"currentColor",d:"M400 288h-352c-17.69 0-32-14.32-32-32.01s14.31-31.99 32-31.99h352c17.69 0 32 14.3 32 31.99S417.7 288 400 288z"})})},460871,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimelineZoomControls=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(43557),s=e.r(473507),l=e.r(80593),u=e.r(818046),c=e.r(260240),d=e.r(488441),p=e.r(146575),f={color:"black",flexDirection:"row",display:"flex",alignItems:"center"},h={fontSize:24},m={color:"white",width:14};r.TimelineZoomControls=()=>{var e;let{canvasContent:t}=(0,a.useContext)(n.Internals.CompositionManager),{setZoom:r,zoom:g}=(0,a.useContext)(u.TimelineZoomCtx),{tabIndex:v}=(0,c.useZIndex)(),y=(0,a.useCallback)(()=>{null!==t&&"composition"===t.type&&r(t.compositionId,e=>Math.max(u.TIMELINE_MIN_ZOOM,e-.2))},[t,r]),b=(0,a.useCallback)(()=>{null!==t&&"composition"===t.type&&r(t.compositionId,e=>Math.min(u.TIMELINE_MAX_ZOOM,e+.2))},[t,r]),x=(0,a.useCallback)(e=>{null!==t&&"composition"===t.type&&r(t.compositionId,()=>Number(e.target.value))},[t,r]);if((0,o.useIsStill)()||null===t||"composition"!==t.type)return null;let w=null!=(e=g[t.compositionId])?e:u.TIMELINE_MIN_ZOOM;return(0,i.jsxs)("div",{style:f,children:[(0,i.jsx)(d.ControlButton,{onClick:y,style:h,title:"Zoom out timeline",role:"ControlButton",type:"button",disabled:u.TIMELINE_MIN_ZOOM===w,children:(0,i.jsx)(s.Minus,{style:m})}),(0,i.jsx)(p.Spacing,{x:.5}),(0,i.jsx)("input",{title:`Timeline zoom (${w}x)`,alt:`Timeline zoom (${w}x)`,type:"range",min:u.TIMELINE_MIN_ZOOM,step:.1,value:w,max:u.TIMELINE_MAX_ZOOM,onChange:x,className:"__remotion-timeline-slider",tabIndex:v}),(0,i.jsx)(p.Spacing,{x:.5}),(0,i.jsx)(d.ControlButton,{onClick:b,style:h,title:"Zoom in timeline",role:"button",type:"button",disabled:u.TIMELINE_MAX_ZOOM===w,children:(0,i.jsx)(l.Plus,{color:"currentcolor",style:m})})]})}},142146,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PreviewToolbar=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(203797),s=e.r(921224),l=e.r(43557),u=e.r(321743),c=e.r(948481),d=e.r(706877),p=e.r(177182),f=e.r(982567),h=e.r(288119),m=e.r(570026),g=e.r(901813),v=e.r(869201),y=e.r(161233),b=e.r(393974),x=e.r(335614),w=e.r(216426),S=e.r(890846),k=e.r(700434),C=e.r(460871),E=e.r(8115),_=e.r(146575),T={display:"flex",justifyContent:"center",borderTop:"1px solid rgba(0, 0, 0, 0.5)",paddingTop:2,paddingBottom:2,alignItems:"center",flexDirection:"row",background:s.BACKGROUND},P={...T,position:"relative",overflowY:"auto",justifyContent:"flex-start"},I={position:"fixed",display:"none",top:0,left:0,width:40,height:"100%",pointerEvents:"none",background:`linear-gradient(to right, ${s.BACKGROUND}, ${s.BACKGROUND__TRANSPARENT})`},A={position:"fixed",display:"none",top:0,right:0,width:40,height:"100%",pointerEvents:"none",background:`linear-gradient(to left, ${s.BACKGROUND}, ${s.BACKGROUND__TRANSPARENT})`},O={width:300,height:38,display:"flex",flexDirection:"row",alignItems:"center"},M={width:d.TIMELINE_PADDING};r.PreviewToolbar=({readOnlyStudio:e,bufferStateDelayInMilliseconds:t})=>{let{playbackRate:r,setPlaybackRate:s}=(0,a.useContext)(n.Internals.TimelineContext),{mediaMuted:d}=(0,a.useContext)(n.Internals.MediaVolumeContext),{setMediaMuted:F}=(0,a.useContext)(n.Internals.SetMediaVolumeContext),R=(0,l.useIsVideoComposition)(),D=(0,a.useRef)(null),j=(0,a.useRef)(null),L=(0,a.useRef)(null),B=(0,l.useIsStill)(),[N,$]=(0,a.useState)((0,p.loadLoopOption)()),z=(0,o.checkFullscreenSupport)(),U=(0,u.useMobileLayout)();return(0,a.useEffect)(()=>{if(U&&D.current){let e=D.current,t=()=>{(e=>{var t;let r=e.getBoundingClientRect(),{scrollLeft:i,scrollWidth:a,clientWidth:n}=e;if(j.current&&L.current)if(0!==i?Object.assign(j.current.style,{display:"block",height:`${r.height}px`,top:`${r.top}px`,left:`${r.left}px`}):Object.assign(j.current.style,{display:"none"}),0!=a-n-i){let e=(null==(t=L.current)?void 0:t.clientWidth)||0;Object.assign(L.current.style,{display:"block",height:`${r.height}px`,top:`${r.top}px`,left:`${r.left+r.width-e}px`})}else Object.assign(L.current.style,{display:"none"})})(e)};return e.addEventListener("scroll",t),t(),()=>{e.removeEventListener("scroll",t)}}}),(0,i.jsxs)("div",{ref:D,style:U?P:T,className:"css-reset",children:[(0,i.jsx)("div",{ref:j,style:I}),U?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:O,children:[(0,i.jsx)("div",{style:M}),(0,i.jsx)(C.TimelineZoomControls,{})]}),(0,i.jsx)(_.Flex,{}),(0,i.jsx)(k.SizeSelector,{}),B||R?(0,i.jsx)(w.PlaybackRateSelector,{setPlaybackRate:s,playbackRate:r}):null]}),R?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_.Spacing,{x:2}),(0,i.jsx)(y.PlayPause,{bufferStateDelayInMilliseconds:t,loop:N,playbackRate:r}),(0,i.jsx)(_.Spacing,{x:2}),(0,i.jsx)(g.LoopToggle,{loop:N,setLoop:$}),(0,i.jsx)(v.MuteToggle,{muted:d,setMuted:F}),(0,i.jsx)(_.Spacing,{x:2}),(0,i.jsx)(E.TimelineInOutPointToggle,{}),(0,i.jsx)(_.Spacing,{x:2})]}):null,(0,i.jsx)(f.CheckboardToggle,{}),(0,i.jsx)(_.Spacing,{x:1}),z&&(0,i.jsx)(m.FullScreenToggle,{}),(0,i.jsx)(_.Flex,{}),U&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_.Flex,{}),(0,i.jsx)(k.SizeSelector,{}),B||R?(0,i.jsx)(w.PlaybackRateSelector,{setPlaybackRate:s,playbackRate:r}):null]}),(0,i.jsxs)("div",{style:O,children:[(0,i.jsx)(_.Flex,{}),!U&&(0,i.jsx)(h.FpsCounter,{playbackSpeed:r}),(0,i.jsx)(_.Spacing,{x:2}),(0,c.shouldShowRenderButton)(e)?(0,i.jsx)(S.RenderButton,{readOnlyStudio:e}):null,(0,i.jsx)(_.Spacing,{x:1.5})]}),(0,i.jsx)(b.PlaybackKeyboardShortcutsManager,{setPlaybackRate:s}),(0,i.jsx)(x.PlaybackRatePersistor,{}),(0,i.jsx)("div",{ref:L,style:A})]})}},500951,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useTimelineFlex=void 0;let i=e=>`remotion.editor.timelineFlex.${e}`;r.useTimelineFlex=e=>{let t;return[(t=localStorage.getItem(i(e)))?parseFloat(t):null,t=>{localStorage.setItem(i(e),String(t))}]}},787145,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.SplitterContext=void 0,r.SplitterContext=i(e.r(347540)).default.createContext({flexValue:1,ref:{current:null},setFlexValue:()=>void 0,isDragging:{current:!1},orientation:"horizontal",maxFlex:1,minFlex:1,defaultFlex:1,id:"--",persistFlex:()=>void 0})},215288,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SplitterContainer=r.containerColumn=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(500951),o=e.r(787145),s={display:"flex",flexDirection:"row",flex:1,height:"100%",width:"100%"};r.containerColumn={display:"flex",flexDirection:"column",flex:1,height:0},r.SplitterContainer=({orientation:e,children:t,defaultFlex:l,maxFlex:u,minFlex:c,id:d})=>{let[p,f]=(0,n.useTimelineFlex)(d),[h,m]=(0,a.useState)(null!=p?p:l),g=(0,a.useRef)(null),v=(0,a.useRef)(!1),y=(0,a.useMemo)(()=>({flexValue:h,ref:g,setFlexValue:m,isDragging:v,orientation:e,id:d,maxFlex:u,minFlex:c,defaultFlex:l,persistFlex:f}),[l,h,d,u,c,e,f,g]);return(0,i.jsx)(o.SplitterContext.Provider,{value:y,children:(0,i.jsx)("div",{ref:g,style:"horizontal"===e?r.containerColumn:s,children:t})})}},287107,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SplitterElement=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(787145);r.SplitterElement=({children:e,type:t,sticky:r})=>{let s=(0,a.useContext)(o.SplitterContext),l=(0,a.useMemo)(()=>({flex:("flexer"===t?s.flexValue:1-s.flexValue)*1e3,display:"flex",position:"relative",overflow:"hidden",flexDirection:"column"}),[s.flexValue,t]),u=(0,a.useMemo)(()=>({position:"absolute",left:("flexer"===t?0:s.flexValue)*100+"%",width:("flexer"===t?s.flexValue:1-s.flexValue)*100+"%",backgroundColor:(0,n.interpolateColors)((0,n.random)(s.flexValue),[0,1],["red","blue"])}),[s.flexValue,t]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:l,children:e}),(0,i.jsx)("div",{style:u,children:null!=r?r:null})]})}},889782,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SplitterHandle=r.SPLITTER_HANDLE_SIZE=void 0;let i=e.r(222260),a=e.r(853987),n=e.r(347540),o=e.r(787145);r.SPLITTER_HANDLE_SIZE=3;let s={height:r.SPLITTER_HANDLE_SIZE},l={width:r.SPLITTER_HANDLE_SIZE};r.SplitterHandle=({allowToCollapse:e,onCollapse:t})=>{let u=(0,n.useContext)(o.SplitterContext);if(!u)throw Error("Cannot find splitter context");let[c,d]=(0,n.useState)(()=>Date.now()),p=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(u.isDragging.current)return;let{current:i}=p;if(!i)return;let n=(e,t)=>{if(!u.isDragging.current)throw Error("cannot get value if not dragging");if(!u.ref.current)throw Error("domRect is not mounted");let{width:i,height:a}=u.ref.current.getBoundingClientRect(),n="vertical"===u.orientation?(e.clientX-u.isDragging.current.x)/(i-r.SPLITTER_HANDLE_SIZE):(e.clientY-u.isDragging.current.y)/(a-r.SPLITTER_HANDLE_SIZE),o=u.flexValue+n;return t?Math.min(u.maxFlex,Math.max(u.minFlex,o)):o},o=e=>{var t;0===e.button&&(u.isDragging.current={x:e.clientX,y:e.clientY},null==(t=p.current)||t.classList.add("remotion-splitter-active"),window.addEventListener("pointerup",e=>{u.isDragging.current&&(u.persistFlex(n(e,!0)),l(),d(Date.now()))},{once:!0}),window.addEventListener("pointermove",s))},s=r=>{if(u.isDragging.current){let i=n(r,!0);u.setFlexValue(i),"left"===e&&n(r,!1)<u.minFlex/2&&(l(),t(),d(Date.now())),"right"===e&&1-n(r,!1)<(1-u.maxFlex)/2&&(l(),t(),d(Date.now()))}},l=()=>{var e;u.isDragging.current=!1,null==(e=p.current)||e.classList.remove("remotion-splitter-active"),i.removeEventListener("pointerdown",o),window.removeEventListener("pointermove",s),a.PlayerInternals.updateAllElementsSizes()};return i.addEventListener("pointerdown",o),()=>{u.isDragging.current||l()}},[e,u,u.flexValue,c,t]),(0,n.useEffect)(()=>{let{current:e}=p;if(!e)return;let t=!1,r=()=>{t=!0},i=()=>{t=!1},a=r=>{0!==r.button||t||e.classList.add("remotion-splitter-hover")},n=t=>{0===t.button&&e.classList.remove("remotion-splitter-hover")};return e.addEventListener("mouseenter",a),e.addEventListener("mouseleave",n),window.addEventListener("mousedown",r),window.addEventListener("mouseup",i),()=>{e.removeEventListener("mouseenter",a),e.removeEventListener("mouseleave",n),window.removeEventListener("mousedown",r),window.removeEventListener("mouseup",i)}},[]),(0,i.jsx)("div",{ref:p,className:["remotion-splitter","horizontal"===u.orientation?"remotion-splitter-horizontal":"remotion-splitter-vertical"].join(" "),style:"horizontal"===u.orientation?s:l})}},156866,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.TopPanel=r.useResponsiveSidebarStatus=void 0;let a=e.r(222260),n=e.r(347540),o=e.r(321743),s=e.r(336961),l=e.r(816811),u=e.r(839270),c=e.r(104255),d=e.r(32864),p=e.r(472855),f=e.r(100477),h=i(e.r(221827)),m=e.r(132726),g=e.r(142146),v=e.r(215288),y=e.r(287107),b=e.r(889782),x={height:"100%",width:"100%",display:"flex",flexDirection:"column",flex:1},w={display:"flex",flexDirection:"row",flex:1,minHeight:0};r.useResponsiveSidebarStatus=()=>{let{sidebarCollapsedStateLeft:e}=(0,n.useContext)(u.SidebarContext),t=(0,s.useBreakpoint)(1200)?"collapsed":"expanded";return(0,n.useMemo)(()=>"collapsed"===e?"collapsed":"expanded"===e?"expanded":t,[e,t])},r.TopPanel=({readOnlyStudio:e,onMounted:t,drawRef:i,bufferStateDelayInMilliseconds:s})=>{let{setSidebarCollapsedState:S,sidebarCollapsedStateRight:k}=(0,n.useContext)(u.SidebarContext),C=(0,p.useIsRulerVisible)(),E=(0,r.useResponsiveSidebarStatus)(),_=(0,n.useMemo)(()=>"collapsed"===k?"collapsed":"expanded",[k]);(0,n.useEffect)(()=>{t()},[t]);let T=(0,n.useMemo)(()=>({flex:1,display:"flex",paddingTop:C?l.RULER_WIDTH:0,paddingLeft:C?l.RULER_WIDTH:0}),[C]),P=(0,n.useCallback)(()=>{S({left:"collapsed",right:null})},[S]),I=(0,n.useCallback)(()=>{S({left:null,right:"collapsed"})},[S]),A=(0,o.useMobileLayout)();return(0,a.jsxs)("div",{style:x,children:[(0,a.jsx)("div",{style:w,children:(0,a.jsxs)(v.SplitterContainer,{minFlex:.15,maxFlex:.4,defaultFlex:.2,id:"sidebar-to-preview",orientation:"vertical",children:["expanded"===E?A?(0,a.jsx)(h.default,{onClose:P,children:(0,a.jsx)(f.ExplorerPanel,{readOnlyStudio:e})}):(0,a.jsx)(y.SplitterElement,{sticky:null,type:"flexer",children:(0,a.jsx)(f.ExplorerPanel,{readOnlyStudio:e})}):null,"expanded"===E?(0,a.jsx)(b.SplitterHandle,{allowToCollapse:"left",onCollapse:P}):null,(0,a.jsx)(y.SplitterElement,{sticky:null,type:"anti-flexer",children:(0,a.jsxs)(v.SplitterContainer,{minFlex:.5,maxFlex:.8,defaultFlex:.7,id:"canvas-to-right-sidebar",orientation:"vertical",children:[(0,a.jsx)(y.SplitterElement,{sticky:null,type:"flexer",children:(0,a.jsx)("div",{ref:i,style:T,children:(0,a.jsx)(c.CanvasIfSizeIsAvailable,{})})}),"expanded"===_?(0,a.jsx)(b.SplitterHandle,{allowToCollapse:"right",onCollapse:I}):null,"expanded"===_?A?(0,a.jsx)(h.default,{onClose:I,children:(0,a.jsx)(m.OptionsPanel,{readOnlyStudio:e})}):(0,a.jsx)(y.SplitterElement,{sticky:null,type:"anti-flexer",children:(0,a.jsx)(m.OptionsPanel,{readOnlyStudio:e})}):null]})})]})}),(0,a.jsx)(g.PreviewToolbar,{bufferStateDelayInMilliseconds:s,readOnlyStudio:e}),(0,a.jsx)(d.CurrentCompositionKeybindings,{readOnlyStudio:e}),(0,a.jsx)(d.TitleUpdater,{})]})}},826193,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SidebarCollapserControls=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(597066),o=e.r(362087),s=e.r(839270),l=e.r(841674),u=e.r(156866),c={width:16,height:16,minWidth:16,border:"1px solid currentColor",borderRadius:3,color:"currentColor",position:"relative"};r.SidebarCollapserControls=()=>{let{setSidebarCollapsedState:e,sidebarCollapsedStateRight:t}=(0,a.useContext)(s.SidebarContext),r=(0,o.useKeybinding)(),d=(0,u.useResponsiveSidebarStatus)(),p=(0,a.useCallback)(e=>({width:"35%",height:"100%",borderRight:"1px solid "+e,background:"expanded"===d?e:"transparent"}),[d]),f=(0,a.useCallback)(e=>({width:"35%",height:"100%",right:0,position:"absolute",borderLeft:"1px solid "+e,background:"expanded"===t?e:"transparent"}),[t]),h=(0,a.useCallback)(()=>{e({left:e=>"responsive"===e?"collapsed"===d?"expanded":"collapsed":"collapsed"===e?"expanded":"collapsed",right:null})},[d,e]),m=(0,a.useCallback)(()=>{e({right:e=>"collapsed"===e?"expanded":"collapsed",left:null})},[e]),g=(0,a.useCallback)(()=>{t===d?e({left:e=>"responsive"===e?"collapsed"===d?"expanded":"collapsed":"collapsed"===e?"expanded":"collapsed",right:e=>"collapsed"===e?"expanded":"collapsed"}):"expanded"===t?m():"expanded"===d&&h()},[d,e,t,h,m]);(0,a.useEffect)(()=>{let e=r.registerKeybinding({event:"keydown",key:"b",commandCtrlKey:!0,callback:h,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1}),t=r.registerKeybinding({event:"keydown",key:"j",commandCtrlKey:!0,callback:m,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1}),i=r.registerKeybinding({event:"keydown",key:"g",commandCtrlKey:!0,callback:g,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1});return()=>{e.unregister(),t.unregister(),i.unregister()}},[r,g,h,m]);let v=(0,o.areKeyboardShortcutsDisabled)()?"Toggle Left Sidebar":`Toggle Left Sidebar (${n.cmdOrCtrlCharacter}+B)`,y=(0,o.areKeyboardShortcutsDisabled)()?"Toggle Right Sidebar":`Toggle Right Sidebar (${n.cmdOrCtrlCharacter}+J)`,b=(0,a.useCallback)(e=>({...c,color:e}),[]),x=(0,a.useCallback)(e=>(0,i.jsx)("div",{style:b(e),title:v,children:(0,i.jsx)("div",{style:p(e)})}),[b,p,v]),w=(0,a.useCallback)(e=>(0,i.jsx)("div",{style:b(e),title:y,children:(0,i.jsx)("div",{style:f(e)})}),[b,f,y]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.InlineAction,{onClick:h,renderAction:x}),(0,i.jsx)(l.InlineAction,{onClick:m,renderAction:w})]})}},477715,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UpdateCheck=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(921224),s=e.r(137798),l=e.r(260240),u=e.r(20330),c={appearance:"none",color:o.BLUE,border:"none",fontWeight:"bold",backgroundColor:"transparent",cursor:"pointer",fontSize:14,display:"inline-flex",justifyContent:"center"};r.UpdateCheck=()=>{let[e,t]=(0,a.useState)(null),{setSelectedModal:r}=(0,a.useContext)(s.ModalsContext),{tabIndex:d}=(0,l.useZIndex)(),[p,f]=(0,a.useState)(null),h=(0,a.useMemo)(()=>p&&p.length>0,[p]),m=(0,a.useCallback)(()=>{let e=new AbortController;return(0,u.updateAvailable)(e.signal).then(e=>{t(e)}).catch(e=>{e.message.includes("aborted")||console.log("Could not check for updates",e)}),e},[]),g=(0,a.useCallback)(()=>{let e=new AbortController;return fetch(`https://bugs.remotion.dev/api/${n.VERSION}`,{signal:e.signal}).then(async e=>{f((await e.json()).bugs)}).catch(e=>{e.message.includes("aborted")||console.log("Could not check for bugs in this version",e)}),e},[]);(0,a.useEffect)(()=>{let e=m(),t=g();return()=>{e.abort(),t.abort()}},[g,m]);let v=(0,a.useCallback)(()=>{r({type:"update",info:e,knownBugs:p})},[e,p,r]),y=(0,a.useMemo)(()=>({...c,color:h?o.WARNING_COLOR:o.LIGHT_TEXT}),[h]);return e&&e.updateAvailable?(0,i.jsx)("button",{tabIndex:d,style:y,onClick:v,type:"button",title:h?"Bugfixes available":"Update available",children:h?"Bugfixes available":(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",style:{height:16,width:16},viewBox:"0 0 512 512",children:(0,i.jsx)("path",{fill:"currentcolor",d:"M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM135.1 217.4c-4.5 4.2-7.1 10.1-7.1 16.3c0 12.3 10 22.3 22.3 22.3H208v96c0 17.7 14.3 32 32 32h32c17.7 0 32-14.3 32-32V256h57.7c12.3 0 22.3-10 22.3-22.3c0-6.2-2.6-12.1-7.1-16.3L269.8 117.5c-3.8-3.5-8.7-5.5-13.8-5.5s-10.1 2-13.8 5.5L135.1 217.4z"})})}):null}},301255,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MenuToolbar=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(321743),s=e.r(679249),l=e.r(439949),u=e.r(419004),c=e.r(826193),d=e.r(477715),p=e.r(146575),f={alignItems:"center",flexDirection:"row",display:"flex",color:"white",borderBottom:"1px solid black",fontSize:13,paddingLeft:6,paddingRight:10,backgroundColor:n.BACKGROUND},h={flex:1};r.MenuToolbar=({readOnlyStudio:e})=>{let[t,r]=(0,a.useState)(null),n=(0,o.useMobileLayout)(),m=(0,a.useMemo)(()=>({...n?{width:"fit-content"}:{width:"330px"},display:"flex",alignItems:"center",justifyContent:"flex-end"}),[n]),g=(0,a.useMemo)(()=>({...n?{minWidth:"0px"}:{minWidth:"330px"},display:"flex",alignItems:"center",justifyContent:"flex-start"}),[n]),v=(0,a.useCallback)(e=>{r(e)},[r]),y=(0,a.useCallback)(e=>{t&&r(e)},[t,r]),b=(0,a.useCallback)(()=>{r(null)},[]),x=(0,s.useMenuStructure)(b,e),w=(0,a.useMemo)(()=>x.map(e=>e.id),[x]),S=(0,a.useCallback)(()=>{r(e=>null===e?null:w[(w.indexOf(e)+1)%w.length])},[w]),k=(0,a.useCallback)(()=>{r(e=>null===e?null:0===w.indexOf(e)?w[w.length-1]:w[(w.indexOf(e)-1)%w.length])},[w]),C=(0,a.useCallback)(()=>{r(null)},[r]);return(0,i.jsxs)(p.Row,{align:"center",className:"css-reset",style:f,children:[(0,i.jsxs)("div",{style:g,children:[x.map(e=>(0,i.jsx)(l.MenuItem,{selected:t===e.id,onItemSelected:v,onItemHovered:y,id:e.id,label:e.label,onItemQuit:C,menu:e,onPreviousMenu:S,onNextMenu:k,leaveLeftPadding:e.leaveLeftPadding},e.id)),e?null:(0,i.jsx)(d.UpdateCheck,{})]}),(0,i.jsx)("div",{style:h}),(0,i.jsx)(u.MenuBuildIndicator,{}),(0,i.jsx)("div",{style:h}),(0,i.jsx)("div",{style:m,children:(0,i.jsx)(c.SidebarCollapserControls,{})}),(0,i.jsx)(p.Spacing,{x:1})]})}},581368,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getTimelineVisibleDuration=r.getTimelineVisibleStart=r.getCascadedStart=void 0,r.getCascadedStart=(e,t)=>{if(!e.parent)return e.from;let i=t.find(t=>t.id===e.parent);if(!i)throw TypeError("Parent not found for sequence "+e.id);return(0,r.getCascadedStart)(i,t)+e.from},r.getTimelineVisibleStart=(e,t)=>{let i=Math.max(0,(0,r.getCascadedStart)(e,t));if(!e.parent)return i;let a=t.find(t=>t.id===e.parent);if(!a)throw TypeError("Parent not found for sequence "+e.id);return Math.max((0,r.getTimelineVisibleStart)(a,t),i)},r.getTimelineVisibleDuration=(e,t)=>{let i=e.duration+Math.min(e.from,0);if(!e.parent)return i;let a=t.find(t=>t.id===e.parent);if(!a)throw TypeError("Parent not found for sequence "+e.id);return Math.min(i,(0,r.getTimelineVisibleDuration)(a,t))}},670596,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getTimelineNestedLevel=void 0,r.getTimelineNestedLevel=(e,t,i)=>{if(!e.parent)return i;let a=t.find(t=>t.id===e.parent);if(!a)throw Error("has parentId but no parent");return(0,r.getTimelineNestedLevel)(a,t,i+1)}},630845,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getTimelineSequenceHash=void 0,r.getTimelineSequenceHash=(e,t,i,a)=>{if(a[e.id])return a[e.id];let n=t.find(t=>t.id===e.parent),o=[n?(0,r.getTimelineSequenceHash)(n,t,i,a):null,e.displayName,e.duration,e.from,e.type,"audio"===e.type?e.src:null,"audio"===e.type?e.volume:null,"video"===e.type?e.src:null,"video"===e.type?e.volume:null].join("-"),s=o+i[e.rootId].filter(e=>e===o).length;return i[e.rootId].push(o),a[e.id]=s,s}},832140,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getTimelineSequenceSequenceSortKey=void 0,r.getTimelineSequenceSequenceSortKey=(e,t,i={})=>{let a=String(t.find(t=>i[e.hash].includes(t.sequence.id)).sequence.nonce).padStart(6,"0");if(!e.sequence.parent)return a;let n=t.find(t=>t.sequence.id===e.sequence.parent);if(!n)return a;let o=t.find(e=>i[n.hash].includes(e.sequence.id));if(!o)throw Error("could not find parent: "+e.sequence.parent);return`${(0,r.getTimelineSequenceSequenceSortKey)(o,t,i)}-${a}`}},728262,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.calculateTimeline=void 0;let i=e.r(581368),a=e.r(670596),n=e.r(630845),o=e.r(832140);r.calculateTimeline=({sequences:e,sequenceDuration:t})=>{let r=[];if(0===e.length)return[{sequence:{displayName:"",duration:t,from:0,id:"seq",parent:null,type:"sequence",rootId:"-",showInTimeline:!0,nonce:0,loopDisplay:void 0,stack:null,premountDisplay:null,postmountDisplay:null},depth:0,hash:"-"}];let s={},l={},u={};for(let t=0;t<e.length;t++){let o=e[t];l[o.rootId]||(l[o.rootId]=[]);let c=(0,n.getTimelineSequenceHash)(o,e,l,u);s[c]||(s[c]=[]),s[c].push(o.id);let d=(0,i.getCascadedStart)(o,e),p=(0,i.getTimelineVisibleStart)(o,e),f=(0,i.getTimelineVisibleDuration)(o,e);r.push({sequence:{...o,from:p,duration:f},depth:(0,a.getTimelineNestedLevel)(o,e,0),hash:c,cascadedStart:d,cascadedDuration:o.duration})}let c=[];for(let e of r)if(!c.find(t=>t.hash===e.hash)){let{cascadedDuration:t,cascadedStart:r,...i}=e;c.push(i)}return c.sort((e,t)=>{let i=(0,o.getTimelineSequenceSequenceSortKey)(e,r,s),a=(0,o.getTimelineSequenceSequenceSortKey)(t,r,s);return i.localeCompare(a)})}},453585,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MaxTimelineTracksReached=r.MAX_TIMELINE_TRACKS_NOTICE_HEIGHT=r.MAX_TIMELINE_TRACKS=void 0;let i=e.r(222260),a=e.r(213637),n=e.r(706877);r.MAX_TIMELINE_TRACKS=void 0===process.env.MAX_TIMELINE_TRACKS||null===process.env.MAX_TIMELINE_TRACKS?a.DEFAULT_TIMELINE_TRACKS:Number(process.env.MAX_TIMELINE_TRACKS),r.MAX_TIMELINE_TRACKS_NOTICE_HEIGHT=24;let o={height:r.MAX_TIMELINE_TRACKS_NOTICE_HEIGHT,display:"flex",alignItems:"center",color:"rgba(255, 255, 255, 0.6)",fontFamily:"sans-serif",fontSize:12,backgroundColor:"rgba(255, 255, 255, 0.1)",paddingLeft:n.TIMELINE_PADDING+5};r.MaxTimelineTracksReached=()=>(0,i.jsxs)("div",{style:o,children:["Limited display to ",r.MAX_TIMELINE_TRACKS," tracks to sustain performance.","","You can change this by setting Config.setMaxTimelineTracks() in your remotion.config.ts file."]})},761063,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimelineInOutPointer=r.outMarkerAreaRef=r.inMarkerAreaRef=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(941826),s=e.r(535932),l=e.r(558713),u={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.5)",height:"100%",bottom:0,top:0};r.inMarkerAreaRef=(0,a.createRef)(),r.outMarkerAreaRef=(0,a.createRef)(),r.TimelineInOutPointer=()=>{let{inFrame:e,outFrame:t}=(0,s.useTimelineInOutFramePosition)(),c=n.Internals.useUnsafeVideoConfig(),d=(0,a.useContext)(l.TimelineWidthContext);return c&&null!==d?(0,i.jsxs)(i.Fragment,{children:[null!==e&&(0,i.jsx)("div",{ref:r.inMarkerAreaRef,style:{...u,left:0,width:(0,o.getXPositionOfItemInTimelineImperatively)(e,c.durationInFrames,d)}}),null!==t&&(0,i.jsx)("div",{ref:r.outMarkerAreaRef,style:{...u,left:(0,o.getXPositionOfItemInTimelineImperatively)(t,c.durationInFrames,d),width:d-(0,o.getXPositionOfItemInTimelineImperatively)(t,c.durationInFrames,d)}})]}):null}},708186,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimelineInOutPointerHandle=r.outPointerHandle=r.inPointerHandle=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(921224),s=e.r(941826),l=e.r(558713),u={height:"100%",width:1,position:"absolute",backgroundColor:"rgba(255, 255, 255, 0.1)",cursor:"ew-resize",paddingLeft:1,paddingRight:1};r.inPointerHandle=(0,a.createRef)(),r.outPointerHandle=(0,a.createRef)();let c=({atFrame:e,dragging:t,timelineWidth:l,type:c})=>{let d=(0,n.useVideoConfig)(),p=(0,a.useMemo)(()=>({...u,backgroundColor:t?o.LIGHT_TRANSPARENT:"rgba(255, 255, 255, 0.1)",transform:`translateX(${(0,s.getXPositionOfItemInTimelineImperatively)(e,d.durationInFrames,l)}px)`}),[e,t,l,d.durationInFrames]);return(0,i.jsx)("div",{ref:"in"===c?r.inPointerHandle:r.outPointerHandle,style:p})};r.TimelineInOutPointerHandle=({dragging:e,type:t,atFrame:r})=>{let n=(0,a.useContext)(l.TimelineWidthContext);return null===n?null:(0,i.jsx)(c,{atFrame:r,dragging:e,timelineWidth:n,type:t})}},12541,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimelineDragHandler=void 0;let i=e.r(222260),a=e.r(853987),n=e.r(347540),o=e.r(49019),s=e.r(941826),l=e.r(706877),u=e.r(535932),c=e.r(818046),d=e.r(260240),p=e.r(661648),f=e.r(494296),h=e.r(8115),m=e.r(761063),g=e.r(708186),v=e.r(86736),y=e.r(558713),b=e.r(610835),x=e.r(166833),w={overflowY:"auto",overflowX:"hidden"},S={userSelect:"none",WebkitUserSelect:"none",position:"absolute",height:"100%",top:0},k={width:"100%",height:"100%",userSelect:"none",WebkitUserSelect:"none"},C=e=>{var t;return e+(null==(t=b.scrollableRef.current)?void 0:t.scrollLeft)};r.TimelineDragHandler=()=>{let e=o.Internals.useUnsafeVideoConfig(),{zoom:t}=(0,n.useContext)(c.TimelineZoomCtx),{canvasContent:r}=(0,n.useContext)(o.Internals.CompositionManager),a=(0,n.useMemo)(()=>{var e;if(!r||"composition"!==r.type)return{};let i=null!=(e=t[r.compositionId])?e:c.TIMELINE_MIN_ZOOM;return{...S,width:100*i+"%"}},[r,t]);return r&&"composition"===r.type?(0,i.jsx)("div",{ref:b.sliderAreaRef,style:a,children:e?(0,i.jsx)(E,{}):null}):null};let E=()=>{var e,t,r;let c=(0,o.useVideoConfig)(),S=a.PlayerInternals.useElementSize(b.scrollableRef,{triggerOnWindowResize:!0,shouldApplyCssTransforms:!0}),{isHighestContext:E}=(0,d.useZIndex)(),_=o.Internals.useTimelineSetFrame(),[T,P]=(0,n.useState)({dragging:!1}),I=(0,n.useContext)(y.TimelineWidthContext),A=(0,n.useCallback)(e=>{if(null===I)throw Error("timeline width is not yet determined");return(0,s.getXPositionOfItemInTimelineImperatively)(e,c.durationInFrames,I)},[I,c.durationInFrames]),O=null!=(t=null==(e=b.scrollableRef.current)?void 0:e.scrollWidth)?t:0,M=null!=(r=null==S?void 0:S.left)?r:0,{inFrame:F,outFrame:R}=(0,u.useTimelineInOutFramePosition)(),{setInAndOutFrames:D}=(0,u.useTimelineSetInOutFramePosition)(),[j,L]=(0,n.useState)({dragging:!1}),{playing:B,play:N,pause:$,seek:z}=a.PlayerInternals.usePlayer(),U=(0,n.useRef)(null),V=()=>{U.current&&(clearInterval(U.current),U.current=null)},H=(0,n.useCallback)(e=>{if(0===e.button&&E){if(V(),c){if(e.target===g.inPointerHandle.current){if(null===F)throw Error("expected outframe");let t=A(F),r=null===R?1/0:A(R-1);P({dragging:"in",initialOffset:C(e.clientX),boundaries:[-1/0,r-t]});return}if(e.target===g.outPointerHandle.current){if(null===R)throw Error("expected outframe");let t=A(R),r=null===F?-1/0:A(F+1);P({dragging:"out",initialOffset:C(e.clientX),boundaries:[r-t,1/0]});return}0!==e.button||(z((0,x.getFrameFromX)({clientX:C(e.clientX)-M,durationInFrames:c.durationInFrames,width:O,extrapolate:"clamp"})),L({dragging:!0,wasPlaying:B}),$())}}},[E,c,M,O,z,B,$,F,A,R]),W=(0,n.useCallback)(e=>{var t;if(!c||!j.dragging)return;let r=e.clientX>=(null==(t=b.scrollableRef.current)?void 0:t.clientWidth)+M-l.TIMELINE_PADDING,i=e.clientX<=M,a=(0,x.getFrameFromX)({clientX:C(e.clientX)-M,durationInFrames:c.durationInFrames,width:O,extrapolate:"clamp"});if(i&&(0,x.canScrollTimelineIntoDirection)().canScrollLeft){if(U.current)return;let e=()=>{var e;if(!(0,x.canScrollTimelineIntoDirection)().canScrollLeft)return void V();let t=(0,x.getFrameWhileScrollingLeft)({durationInFrames:c.durationInFrames,width:O}),r=(0,x.getScrollPositionForCursorOnLeftEdge)({nextFrame:t,durationInFrames:c.durationInFrames});null==(e=v.redrawTimelineSliderFast.current)||e.draw(t),z(t),(0,x.scrollToTimelineXOffset)(r)};e(),U.current=setInterval(()=>{e()},100)}else if(r&&(0,x.canScrollTimelineIntoDirection)().canScrollRight){if(U.current)return;let e=()=>{var e;if(!(0,x.canScrollTimelineIntoDirection)().canScrollRight)return void V();let t=(0,x.getFrameWhileScrollingRight)({durationInFrames:c.durationInFrames,width:O}),r=(0,x.getScrollPositionForCursorOnRightEdge)({nextFrame:t,durationInFrames:c.durationInFrames});null==(e=v.redrawTimelineSliderFast.current)||e.draw(t),z(t),(0,x.scrollToTimelineXOffset)(r)};e(),U.current=setInterval(()=>{e()},100)}else V(),z(a)},[c,j.dragging,M,O,z]),q=(0,n.useCallback)(e=>{if(!c||!T.dragging)return;let t=Math.max(T.boundaries[0],Math.min(T.boundaries[1],C(e.clientX)-T.initialOffset));if("in"===T.dragging){if(!g.inPointerHandle.current)throw Error("in pointer handle");if(!m.inMarkerAreaRef.current)throw Error("expected inMarkerAreaRef");if(!F)throw Error("expected inframes");g.inPointerHandle.current.style.transform=`translateX(${A(F)+t}px)`,m.inMarkerAreaRef.current.style.width=String(A(F)+t)+"px"}if("out"===T.dragging){if(!g.outPointerHandle.current)throw Error("in pointer handle");if(!m.outMarkerAreaRef.current)throw Error("in outMarkerAreaRef");if(!R)throw Error("expected outframes");g.outPointerHandle.current.style.transform=`translateX(${A(R)+t}px)`,m.outMarkerAreaRef.current.style.left=String(A(R)+t)+"px",m.outMarkerAreaRef.current.style.width=String(O-A(R)-t)+"px"}},[A,F,T,R,c,O]),G=(0,n.useCallback)(e=>{if(V(),!c||!j.dragging)return;L({dragging:!1});let t=(0,x.getFrameFromX)({clientX:C(e.clientX)-M,durationInFrames:c.durationInFrames,width:O,extrapolate:"clamp"});_(e=>{let r={...e,[c.id]:t};return o.Internals.persistCurrentFrame(r),r}),j.wasPlaying&&N()},[j,M,N,c,_,O]),Z=(0,n.useCallback)(e=>{if(!c||!T.dragging)return;P({dragging:!1});let t=(0,x.getFrameFromX)({clientX:C(e.clientX)-M,durationInFrames:c.durationInFrames,width:O,extrapolate:"extend"});if("in"===T.dragging){if(t<1)return D(e=>{var t;return{...e,[c.id]:{...null!=(t=e[c.id])?t:h.defaultInOutValue,inFrame:null}}});let e=null===R?1/0:R-1;D(r=>{var i;return{...r,[c.id]:{...null!=(i=r[c.id])?i:h.defaultInOutValue,inFrame:Math.min(e,t)}}})}else{if(t>c.durationInFrames-2)return D(e=>{var t;return{...e,[c.id]:{...null!=(t=e[c.id])?t:h.defaultInOutValue,outFrame:null}}});let e=null===F?-1/0:F+1;D(r=>{var i;return{...r,[c.id]:{...null!=(i=r[c.id])?i:h.defaultInOutValue,outFrame:Math.max(e,t)}}})}},[F,T.dragging,M,R,D,c,O]);(0,n.useEffect)(()=>{if(j.dragging)return window.addEventListener("pointermove",W),window.addEventListener("pointerup",G),()=>{window.removeEventListener("pointermove",W),window.removeEventListener("pointerup",G)}},[j.dragging,W,G]),(0,n.useEffect)(()=>{if(!1!==T.dragging)return window.addEventListener("pointermove",q),window.addEventListener("pointerup",Z),()=>{window.removeEventListener("pointermove",q),window.removeEventListener("pointerup",Z)}},[T.dragging,q,Z]);let K=(0,n.useMemo)(()=>[{id:"hide-in",keyHint:null,label:"Clear In marker",leftItem:null,onClick:(e,t)=>{null==t||t.stopPropagation(),null==t||t.preventDefault(),D(e=>{var t;return{...e,[c.id]:{...null!=(t=e[c.id])?t:h.defaultInOutValue,inFrame:null}}})},quickSwitcherLabel:null,subMenu:null,type:"item",value:"hide-in"}],[D,c.id]),Q=(0,n.useMemo)(()=>[{id:"hide-out",keyHint:null,label:"Clear Out marker",leftItem:null,onClick:(e,t)=>{null==t||t.stopPropagation(),null==t||t.preventDefault(),D(e=>{var t;return{...e,[c.id]:{...null!=(t=e[c.id])?t:h.defaultInOutValue,outFrame:null}}})},quickSwitcherLabel:null,subMenu:null,type:"item",value:"hide-out"}],[D,c.id]);return(0,i.jsxs)("div",{style:k,onPointerDown:H,children:[(0,i.jsx)("div",{style:w,className:f.VERTICAL_SCROLLBAR_CLASSNAME}),null!==F&&(0,i.jsx)(p.ContextMenu,{values:K,children:(0,i.jsx)(g.TimelineInOutPointerHandle,{type:"in",atFrame:F,dragging:"in"===T.dragging})}),null!==R&&(0,i.jsx)(p.ContextMenu,{values:Q,children:(0,i.jsx)(g.TimelineInOutPointerHandle,{type:"out",dragging:"out"===T.dragging,atFrame:R})})]})}},535987,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimelineLayerEye=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o={width:12,color:"currentColor",pointerEvents:"none"},s={...o,height:10,marginLeft:-1},l={height:16,width:16,borderRadius:2,backgroundColor:"rgba(0, 0, 0, 0.4)",display:"inline-flex",justifyContent:"center",alignItems:"center",marginRight:6,flexShrink:0},u=null;r.TimelineLayerEye=({onInvoked:e,hidden:t,type:r})=>{let c=(0,a.useCallback)(e=>t?null:"speaker"===r?(0,i.jsx)("svg",{viewBox:"0 0 10 14",fill:"none",style:s,children:(0,i.jsx)("path",{d:"M9.40938 0.0869018C9.76875 0.249402 10 0.605652 10 0.999402V12.9994C10 13.3932 9.76875 13.7494 9.40938 13.9119C9.05 14.0744 8.62813 14.0088 8.33438 13.7463L4.11875 9.9994H2C0.896875 9.9994 0 9.10253 0 7.9994V5.9994C0 4.89628 0.896875 3.9994 2 3.9994H4.11875L8.33438 0.252527C8.62813 -0.0099732 9.05 -0.0724732 9.40938 0.0869018Z",fill:e})}):(0,i.jsx)("svg",{style:o,viewBox:"0 0 24 16",fill:"none",children:(0,i.jsx)("path",{d:"M24 7.551C24 7.551 19.748 16 12.015 16C4.835 16 0 7.551 0 7.551C0 7.551 4.446 0 12.015 0C19.709 0 24 7.551 24 7.551ZM17 8C17 5.243 14.757 3 12 3C9.243 3 7 5.243 7 8C7 10.757 9.243 13 12 13C14.757 13 17 10.757 17 8Z",fill:e})}),[t,r]),d=(0,a.useCallback)(r=>{0===r.button&&(e(u=t?"enable":"disable"),window.addEventListener("pointerup",()=>{u=null},{once:!0}))},[t,e]),p=(0,a.useCallback)(()=>{u&&e(u)},[e]);return(0,i.jsx)("div",{style:l,onPointerEnter:p,onPointerDown:d,children:c(n.LIGHT_COLOR)})}},854988,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimelineStack=void 0;let i=e.r(222260),a=e.r(213637),n=e.r(347540),o=e.r(542591),s=e.r(850586),l=e.r(921224),u=e.r(239203),c=e.r(412361),d=e.r(910105),p=e.r(570431),f=e.r(277984),h=e.r(444732),m=e.r(146575),g=e.r(880104),v=e.r(893440),y="/"===window.remotion_publicPath?"":window.remotion_publicPath,b=y.endsWith("/")?y.slice(0,-1):y;o.SourceMapConsumer.initialize({"lib/mappings.wasm":b+a.SOURCE_MAP_ENDPOINT}),r.TimelineStack=({isCompact:e,sequence:t})=>{let[r,a]=(0,n.useState)(null),[o,y]=(0,n.useState)(!1),[b,x]=(0,n.useState)(!1),[w,S]=(0,n.useState)(!1),k=(0,p.useSelectAsset)(),C=(0,n.useContext)(s.StudioServerConnectionCtx).previewServerState.type,E=(0,n.useMemo)(()=>("video"===t.type||"audio"===t.type)&&t.src.startsWith(window.remotion_staticBase)?t.src.replace(window.remotion_staticBase+"/",""):null,[t]),_=(0,n.useCallback)(e=>{k(e),(0,d.pushUrl)(`/assets/${e}`)},[k]),T=(0,n.useCallback)(async e=>{if(window.remotion_editorName){S(!0);try{await (0,c.openOriginalPositionInEditor)(e)}catch(e){(0,f.showNotification)(e.message,2e3)}finally{S(!1)}}},[]),P=window.remotion_editorName&&"connected"===C&&r,I=window.remotion_gitSource&&r,A=e&&(P||I)||E,O=!e&&(P||I),M=(0,n.useCallback)(()=>{if(!A)return null;if(E)return void _(E);if(r){if(P)return void T(r);I&&window.open((0,u.getGitRefUrl)(window.remotion_gitSource,r),"_blank")}},[E,P,I,_,T,r,A]),F=(0,n.useCallback)(()=>{if(r){if(P)return void T(r);I&&window.open((0,u.getGitRefUrl)(window.remotion_gitSource,r),"_blank")}},[P,I,T,r]);(0,n.useEffect)(()=>{t.stack&&(0,g.getOriginalLocationFromStack)(t.stack,"sequence").then(e=>{a(e)}).catch(e=>{console.error("Could not get original location of Sequence",e)})},[t.stack]);let R=(0,n.useCallback)(()=>{y(!0)},[]),D=(0,n.useCallback)(()=>{y(!1)},[]),j=(0,n.useCallback)(()=>{x(!0)},[]),L=(0,n.useCallback)(()=>{x(!1)},[]),B=(0,n.useMemo)(()=>({fontSize:12,color:w?l.VERY_LIGHT_TEXT:o&&O?l.LIGHT_TEXT:l.VERY_LIGHT_TEXT,marginLeft:10,cursor:O?"pointer":void 0,display:"flex",flexDirection:"row",alignItems:"center",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",flexShrink:1e5}),[w,o,O]),N=(0,n.useMemo)(()=>{let t=b&&A;return{fontSize:12,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:1,color:w&&e?l.VERY_LIGHT_TEXT:l.LIGHT_COLOR,userSelect:"none",WebkitUserSelect:"none",borderBottom:t?"1px solid #fff":"none",cursor:t?"pointer":void 0}},[A,e,w,b]),$=t.displayName.length>1e3?t.displayName.slice(0,1e3)+"...":t.displayName;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{onPointerEnter:j,onPointerLeave:L,title:r?(0,v.getOriginalSourceAttribution)(r):$||"<Sequence>",style:N,onClick:M,children:$||"<Sequence>"}),e||!r?null:(0,i.jsx)("div",{onPointerEnter:R,onPointerLeave:D,onClick:F,style:B,children:(0,v.getOriginalSourceAttribution)(r)}),w?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.Spacing,{x:.5}),(0,i.jsx)(h.Spinner,{duration:.5,size:12})]}):null]})}},757702,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimelineListItem=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(921224),s=e.r(706877),l=e.r(535987),u=e.r(854988),c={width:5,flexShrink:0};r.TimelineListItem=({nestedDepth:e,sequence:t,isCompact:r})=>{let{hidden:d,setHidden:p}=(0,a.useContext)(n.Internals.SequenceVisibilityToggleContext),f=(0,a.useMemo)(()=>({width:Number(7.5)*e,flexShrink:0}),[e]),h=(0,a.useMemo)(()=>{var e;return null!=(e=d[t.id])&&e},[d,t.id]),m=(0,a.useCallback)(e=>{p(r=>({...r,[t.id]:"enable"!==e}))},[t.id,p]),g=(0,a.useMemo)(()=>({height:(0,s.getTimelineLayerHeight)("video"===t.type?"video":"other")+s.TIMELINE_ITEM_BORDER_BOTTOM,color:"white",fontFamily:"Arial, Helvetica, sans-serif",display:"flex",flexDirection:"row",alignItems:"center",wordBreak:"break-all",textAlign:"left",paddingLeft:5,borderBottom:`1px solid ${o.TIMELINE_TRACK_SEPARATOR}`}),[t.type]);return(0,i.jsxs)("div",{style:g,children:[(0,i.jsx)(l.TimelineLayerEye,{type:"audio"===t.type?"speaker":"eye",hidden:h,onInvoked:m}),(0,i.jsx)("div",{style:f}),t.parent&&e>0?(0,i.jsx)("div",{style:c}):null,(0,i.jsx)(u.TimelineStack,{sequence:t,isCompact:r})]})}},846144,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimeValue=void 0;let i=e.r(222260),a=e.r(853987),n=e.r(347540),o=e.r(49019),s=e.r(921224),l=e.r(43557),u=e.r(362087),c=e.r(774287),d=e.r(190327),p=e.r(146575),f={color:"white",display:"flex",flexDirection:"row",alignItems:"center",fontVariantNumeric:"tabular-nums",lineHeight:1,width:"100%",userSelect:"none",WebkitUserSelect:"none"},h={display:"inline-block",fontSize:16,lineHeight:1,fontFamily:"monospace"},m={color:s.LIGHT_TEXT,fontWeight:500,lineHeight:1,fontSize:16,fontFamily:"monospace",paddingRight:10};r.TimeValue=()=>{let e=(0,o.useCurrentFrame)(),t=o.Internals.useUnsafeVideoConfig(),r=(0,l.useIsStill)(),{seek:s,play:g,pause:v,toggle:y}=a.PlayerInternals.usePlayer(),b=(0,u.useKeybinding)(),x=(0,n.useRef)(null),w=(0,n.useCallback)(e=>{s(parseInt(e,10))},[s]),S=(0,n.useCallback)(e=>{s(e)},[s]);return((0,n.useImperativeHandle)(o.Internals.timeValueRef,()=>({goToFrame:()=>{var e;null==(e=x.current)||e.click()},seek:s,play:g,pause:v,toggle:y}),[s,g,v,y]),(0,n.useEffect)(()=>{let e=b.registerKeybinding({event:"keypress",key:"g",callback:()=>{var e;null==(e=x.current)||e.click()},commandCtrlKey:!1,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1});return()=>{e.unregister()}},[b]),!t||r)?null:(0,i.jsxs)("div",{style:f,children:[(0,i.jsx)("div",{style:h,children:(0,c.renderFrame)(e,t.fps)}),(0,i.jsx)(p.Spacing,{x:2}),(0,i.jsx)(p.Flex,{}),(0,i.jsx)(d.InputDragger,{ref:x,value:e,onTextChange:w,onValueChange:S,rightAlign:!0,status:"ok",style:m})]})}},594741,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimelineTimeIndicators=r.TimelineTimePadding=r.TimelineTimePlaceholders=r.TIMELINE_TIME_INDICATOR_HEIGHT=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(921224),s=e.r(706877),l=e.r(774287),u=e.r(889782),c=e.r(846144),d=e.r(558713),p=e.r(610835),f=e.r(166833);r.TIMELINE_TIME_INDICATOR_HEIGHT=39;let h={height:r.TIMELINE_TIME_INDICATOR_HEIGHT-4,boxShadow:`0 0 4px ${o.TIMELINE_BACKGROUND}`,position:"absolute",backgroundColor:o.TIMELINE_BACKGROUND,top:0},m={width:1,backgroundColor:"rgba(255, 255, 255, 0.15)",height:20,position:"absolute"},g={...m,height:15},v={fontSize:12,marginLeft:8,marginTop:7,color:o.LIGHT_TEXT},y={height:r.TIMELINE_TIME_INDICATOR_HEIGHT,position:"absolute",top:0,width:"100%",paddingLeft:10,display:"flex",alignItems:"center",backgroundColor:o.BACKGROUND,borderBottom:`${s.TIMELINE_ITEM_BORDER_BOTTOM}px solid ${o.TIMELINE_TRACK_SEPARATOR}`};r.TimelineTimePlaceholders=()=>(0,i.jsx)("div",{style:y,children:(0,i.jsx)(c.TimeValue,{})}),r.TimelineTimePadding=()=>(0,i.jsx)("div",{style:{height:r.TIMELINE_TIME_INDICATOR_HEIGHT}}),r.TimelineTimeIndicators=()=>{let e=(0,a.useContext)(d.TimelineWidthContext),t=n.Internals.useVideo();return null===e||null===t?null:(0,i.jsx)(b,{durationInFrames:t.durationInFrames,fps:t.fps,windowWidth:e})};let b=({windowWidth:e,durationInFrames:t,fps:r})=>{let n=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=n.current;if(!e)return;let{current:t}=p.timelineVerticalScroll;if(!t)return;let r=()=>{e.style.top=t.scrollTop+"px"};return t.addEventListener("scroll",r),()=>{t.removeEventListener("scroll",r)}},[]);let o=(0,a.useMemo)(()=>({...h,width:e-u.SPLITTER_HANDLE_SIZE/2,overflow:"hidden",marginLeft:u.SPLITTER_HANDLE_SIZE/2,pointerEvents:"none"}),[e]),c=(0,a.useMemo)(()=>{let i=(0,f.getFrameIncrementFromWidth)(t,e),a=Math.floor(t/r),n=Math.ceil(5*r/(i*r)),o=Math.ceil(5/i),l=Array(a).fill(!0).map((e,t)=>({frame:t*r,style:{...g,left:i*t*r+s.TIMELINE_PADDING-u.SPLITTER_HANDLE_SIZE/2},showTime:t>0})).filter((e,t)=>t%n==0),c=Array(t).fill(!0).map((e,t)=>({frame:t,style:{...m,left:i*t+s.TIMELINE_PADDING-u.SPLITTER_HANDLE_SIZE/2,height:t%r==0?10:t/o%2==0?5:2},showTime:!1})).filter((e,t)=>t%o==0),d=[];return[...l,...c].filter(e=>{let t=void 0!==d.find(t=>t===e.frame);return d.push(e.frame),!t})},[t,r,e]);return(0,i.jsx)("div",{ref:n,style:o,children:c.map(e=>(0,i.jsx)("div",{style:e.style,children:e.showTime?(0,i.jsx)("div",{style:v,children:(0,l.renderFrame)(e.frame,r)}):null},e.frame))})}},954238,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimelineList=void 0;let i=e.r(222260),a=e.r(853987),n=e.r(347540),o=e.r(921224),s=e.r(757702),l=e.r(594741),u={flex:1,background:o.BACKGROUND};r.TimelineList=({timeline:e})=>{let t=(0,n.useRef)(null),r=a.PlayerInternals.useElementSize(t,{shouldApplyCssTransforms:!1,triggerOnWindowResize:!1}),o=!!r&&r.width<250;return(0,i.jsxs)("div",{ref:t,style:u,children:[(0,i.jsx)(l.TimelineTimePadding,{}),e.map(e=>(0,i.jsx)("div",{children:(0,i.jsx)(s.TimelineListItem,{nestedDepth:e.depth,sequence:e.sequence,isCompact:o},e.sequence.id)},e.sequence.id))]})}},667125,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimelinePlayCursorSyncer=void 0;let i=e.r(347540),a=e.r(49019),n=e.r(818046),o=e.r(440028),s=e.r(610835),l=e.r(166833),u=null;r.TimelinePlayCursorSyncer=()=>{var e,t;let r=a.Internals.useVideo(),c=(0,i.useContext)(a.Internals.TimelineContext),d=a.Internals.Timeline.useTimelinePosition(),{canvasContent:p}=(0,i.useContext)(a.Internals.CompositionManager),{zoom:f}=(0,i.useContext)(n.TimelineZoomCtx),h=p&&"composition"===p.type?p.compositionId:null,m=h?null!=(e=f[h])?e:n.TIMELINE_MIN_ZOOM:null;m&&r&&((0,o.setCurrentFrame)(d),(0,o.setCurrentZoom)(m),(0,o.setCurrentDuration)(r.durationInFrames),(0,o.setCurrentFps)(r.fps));let g=null!=(t=c.playing)&&t;return(0,i.useEffect)(()=>{!r||g&&(0,l.ensureFrameIsInViewport)({direction:c.playbackRate>0?"page-right":"page-left",durationInFrames:r.durationInFrames,frame:d})},[g,c,d,r]),(0,i.useEffect)(()=>{let{current:e}=s.scrollableRef;if(e){if(g)u={scrollLeft:e.scrollLeft,frame:(0,o.getCurrentFrame)(),zoomLevel:(0,o.getCurrentZoom)(),durationInFrames:(0,o.getCurrentDuration)()};else if(null!==u){if((0,l.isCursorInViewport)({frame:(0,o.getCurrentFrame)(),durationInFrames:(0,o.getCurrentDuration)()}))return;u.zoomLevel===(0,o.getCurrentZoom)()&&u.durationInFrames===(0,o.getCurrentDuration)()?e.scrollLeft=u.scrollLeft:(0,l.ensureFrameIsInViewport)({direction:"center",durationInFrames:(0,o.getCurrentDuration)(),frame:u.frame})}}},[g]),null}},181191,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimelineScrollable=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(494296),s=e.r(610835),l={width:"100%",height:"100%",overflowX:"auto",overflowY:"hidden",position:"relative",backgroundColor:n.TIMELINE_BACKGROUND};r.TimelineScrollable=({children:e})=>{let t=(0,a.useMemo)(()=>({width:"100%",minHeight:"100%"}),[]);return(0,i.jsx)("div",{ref:s.scrollableRef,style:l,className:o.HORIZONTAL_SCROLLBAR_CLASSNAME,children:(0,i.jsx)("div",{style:t,children:e})})}},311693,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getTimelineSequenceLayout=r.SEQUENCE_BORDER_WIDTH=void 0;let i=e.r(706877);r.SEQUENCE_BORDER_WIDTH=1;let a=({durationInFrames:e,lastFrame:t,windowWidth:a,spatialDuration:n,nonNegativeMarginLeft:o})=>{let s=a-2*i.TIMELINE_PADDING;return(e===1/0||0===t?s:n/t*s)-r.SEQUENCE_BORDER_WIDTH+o};r.getTimelineSequenceLayout=({durationInFrames:e,startFrom:t,maxMediaDuration:r,startFromMedia:n,video:o,windowWidth:s,premountDisplay:l,postmountDisplay:u})=>{var c;let d=(null!=(c=o.durationInFrames)?c:1)-1,p=Math.min((null!=r?r:1/0)-n,e-1,d-t),f=t+e<d,h=t>0;f&&(p+=.5),h&&(p+=.5);let m=0===d?0:(h?t-.5:t)/d*(s-2*i.TIMELINE_PADDING),g=Math.min(m,0),v=a({durationInFrames:e,lastFrame:d,nonNegativeMarginLeft:g,spatialDuration:p,windowWidth:s}),y=l?a({durationInFrames:l,lastFrame:d,nonNegativeMarginLeft:g,spatialDuration:l,windowWidth:s}):null,b=u?a({durationInFrames:u,lastFrame:d,nonNegativeMarginLeft:g,spatialDuration:u,windowWidth:s}):null;return{marginLeft:Math.max(m,0)-(null!=y?y:0),width:v+(null!=y?y:0)+(null!=b?b:0),premountWidth:y,postmountWidth:b}}},629009,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useMaxMediaDuration=void 0;let i=e.r(66646),a=e.r(129795),n=e.r(347540),o=new Map;r.useMaxMediaDuration=(e,t)=>{var r;let s="video"===e.type||"audio"===e.type?e.src:null,[l,u]=(0,n.useState)(s?null!=(r=o.get(s))?r:null:1/0);return(0,n.useEffect)(()=>{if(!s)return;let e=new a.Input({formats:a.ALL_FORMATS,source:new a.UrlSource(s)});return e.computeDuration().then(e=>{o.set(s,Math.floor(e*t)),u(Math.floor(e*t))}).catch(e=>{if(!(e instanceof a.InputDisposedError))return(0,i.getVideoMetadata)(s).then(e=>{var r;let i=null!=(r=e.durationInSeconds)?r:1/0;o.set(s,Math.floor(i*t)),u(Math.floor(i*t))}).catch(()=>{})}),()=>{e.dispose()}},[s,t]),l}},71950,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AudioWaveformBar=r.WAVEFORM_BAR_MARGIN=r.WAVEFORM_BAR_LENGTH=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(706877);r.WAVEFORM_BAR_LENGTH=2,r.WAVEFORM_BAR_MARGIN=1;let o={width:r.WAVEFORM_BAR_LENGTH,backgroundColor:"rgba(255, 255, 255, 0.6)",marginLeft:r.WAVEFORM_BAR_MARGIN,borderRadius:2};r.AudioWaveformBar=({amplitude:e})=>{let t=(0,a.useMemo)(()=>({...o,height:(0,n.getTimelineLayerHeight)("other")*e*(1/.6366)}),[e]);return(0,i.jsx)("div",{style:t})}},474283,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AudioWaveform=void 0;let i=e.r(222260),a=e.r(66646),n=e.r(347540),o=e.r(49019),s=e.r(921224),l=e.r(706877),u=e.r(71950),c={display:"flex",flexDirection:"row",alignItems:"flex-end",position:"absolute",height:(0,l.getTimelineLayerHeight)("other")},d={fontSize:13,paddingTop:6,paddingBottom:6,paddingLeft:12,paddingRight:12,alignSelf:"flex-start",maxWidth:450,opacity:.75},p={position:"absolute"};r.AudioWaveform=({src:e,startFrom:t,durationInFrames:r,visualizationWidth:f,volume:h,doesVolumeChange:m,playbackRate:g})=>{let[v,y]=(0,n.useState)(null),[b,x]=(0,n.useState)(null),w=(0,n.useRef)({isMounted:!0}),S=o.Internals.useUnsafeVideoConfig();if(null===S)throw Error("Expected video config");let k=(0,n.useRef)(null);(0,n.useEffect)(()=>{let{current:e}=w;return e.isMounted=!0,()=>{e.isMounted=!1}},[]),(0,n.useEffect)(()=>{if(!k.current)return;let e=k.current.getContext("2d");if(!e||(e.clearRect(0,0,f,(0,l.getTimelineLayerHeight)("other")),!m||"number"==typeof h))return;let t=h.split(",").map(e=>Number(e));e.beginPath(),e.moveTo(0,(0,l.getTimelineLayerHeight)("other")),t.forEach((r,i)=>{let a=i/(t.length-1)*f,n=(1-r)*((0,l.getTimelineLayerHeight)("other")-2*l.TIMELINE_BORDER)+1;0===i?e.moveTo(a,n):e.lineTo(a,n)}),e.strokeStyle=s.LIGHT_TRANSPARENT,e.stroke()},[f,v,t,h,m]),(0,n.useEffect)(()=>{x(null),(0,a.getAudioData)(e).then(e=>{w.current.isMounted&&y(e)}).catch(e=>{w.current.isMounted&&x(e)})},[e,S.fps]);let C=(0,n.useMemo)(()=>{if(!v||0===v.numberOfChannels)return[];let e=Math.floor(f/(u.WAVEFORM_BAR_LENGTH+u.WAVEFORM_BAR_MARGIN));return(0,a.getWaveformPortion)({audioData:v,startTimeInSeconds:t/S.fps,durationInSeconds:Math.min(r/S.fps*g,v.durationInSeconds),numberOfSamples:e,normalize:!1})},[r,S.fps,v,g,t,f]);return b?(0,i.jsx)("div",{style:c,children:(0,i.jsx)("div",{style:d,children:"No waveform available. Audio might not support CORS."})}):v?(0,i.jsxs)("div",{style:c,children:[C.map(e=>(0,i.jsx)(u.AudioWaveformBar,{amplitude:e.amplitude*("number"==typeof h?h:1)},e.index)),(0,i.jsx)("canvas",{ref:k,style:p,width:f,height:(0,l.getTimelineLayerHeight)("other")})]}):null}},180434,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LoopedIndicator=void 0;let i=e.r(222260),a=e.r(49019),n=e.r(921224),o={width:0,flexDirection:"row",display:"flex",position:"relative"},s={height:12},l=()=>(0,i.jsx)("svg",{viewBox:"0 0 512 512",style:s,children:(0,i.jsx)("path",{fill:n.LIGHT_COLOR,d:"M512 256c0 88.224-71.775 160-160 160H170.067l34.512 32.419c9.875 9.276 10.119 24.883.539 34.464l-10.775 10.775c-9.373 9.372-24.568 9.372-33.941 0l-92.686-92.686c-9.373-9.373-9.373-24.568 0-33.941l92.686-92.686c9.373-9.373 24.568-9.373 33.941 0l10.775 10.775c9.581 9.581 9.337 25.187-.539 34.464L170.067 352H352c52.935 0 96-43.065 96-96 0-13.958-2.996-27.228-8.376-39.204-4.061-9.039-2.284-19.626 4.723-26.633l12.183-12.183c11.499-11.499 30.965-8.526 38.312 5.982C505.814 205.624 512 230.103 512 256zM72.376 295.204C66.996 283.228 64 269.958 64 256c0-52.935 43.065-96 96-96h181.933l-34.512 32.419c-9.875 9.276-10.119 24.883-.539 34.464l10.775 10.775c9.373 9.372 24.568 9.372 33.941 0l92.686-92.686c9.373-9.373 9.373-24.568 0-33.941l-92.686-92.686c-9.373-9.373-24.568-9.373-33.941 0L306.882 29.12c-9.581 9.581-9.337 25.187.539 34.464L341.933 96H160C71.775 96 0 167.776 0 256c0 25.897 6.186 50.376 17.157 72.039 7.347 14.508 26.813 17.481 38.312 5.982l12.183-12.183c7.008-7.008 8.786-17.595 4.724-26.634z"})}),u={top:0,height:2,width:1,background:n.LIGHT_COLOR},c={top:0,height:2,width:1,background:n.LIGHT_COLOR},d={justifyContent:"flex-start",alignItems:"center"},p={justifyContent:"center",alignItems:"center"},f={justifyContent:"flex-end",alignItems:"center"};r.LoopedIndicator=()=>(0,i.jsxs)("div",{style:o,children:[(0,i.jsx)(a.AbsoluteFill,{style:d,children:(0,i.jsx)("div",{style:u})}),(0,i.jsx)(a.AbsoluteFill,{style:f,children:(0,i.jsx)("div",{style:c})}),(0,i.jsx)(a.AbsoluteFill,{style:p,children:(0,i.jsx)(l,{})})]})},93058,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.LoopedTimelineIndicator=void 0;let a=e.r(222260),n=i(e.r(347540)),o=e.r(49019),s=e.r(146575),l=e.r(180434),u={flexDirection:"row"};r.LoopedTimelineIndicator=({loops:e})=>{let t=e%1;return(0,a.jsxs)(o.AbsoluteFill,{style:u,children:[Array(Math.floor(e)).fill(!0).map((t,r)=>(0,a.jsxs)(n.default.Fragment,{children:[(0,a.jsx)(s.Flex,{}),r===e-1?null:(0,a.jsx)(l.LoopedIndicator,{})]},r)),t>0?(0,a.jsx)("div",{style:{flex:t}}):null]})}},859209,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimelineSequenceFrame=void 0;let i=e.r(222260),a={fontSize:11,fontFamily:"Arial, Helvetica, sans-serif",color:"white",opacity:.5};r.TimelineSequenceFrame=({roundedFrame:e,premounted:t,postmounted:r})=>(0,i.jsx)("div",{style:a,children:t?"0 (Premounted)":null!==r?`${r} (Postmounted)`:e})},873239,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.extractFrames=a;let i=e.r(129795);async function a({src:e,timestampsInSeconds:t,onVideoSample:r,signal:a}){let n=new i.Input({formats:i.ALL_FORMATS,source:new i.UrlSource(e)}),o=()=>{n.dispose()};a&&a.addEventListener("abort",o,{once:!0});try{let[e,o,s]=await Promise.all([n.computeDuration(),n.getFormat(),n.getPrimaryVideoTrack()]);if(!s)throw Error("No video track found in the input");let l="function"==typeof t?await t({track:{width:s.displayWidth,height:s.displayHeight},container:o.name,durationInSeconds:e}):t;if(0===l.length)return;for await(let e of new i.VideoSampleSink(s).samplesAtTimestamps(l)){if(null==a?void 0:a.aborted){null==e||e.close();break}e&&r(e)}}catch(e){if(e instanceof i.InputDisposedError)return;throw e}finally{o(),a&&a.removeEventListener("abort",o)}}},801122,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.clearFramesForSrc=r.clearOldFrames=r.getAspectRatioFromCache=r.getTimestampFromFrameDatabaseKey=r.aspectRatioCache=r.frameDatabase=r.getFrameDatabaseKeyPrefix=r.makeFrameDatabaseKey=void 0,r.makeFrameDatabaseKey=(e,t)=>`${e}|${t}`,r.getFrameDatabaseKeyPrefix=e=>`${e}|`,r.frameDatabase=new Map,r.aspectRatioCache=new Map,r.getTimestampFromFrameDatabaseKey=e=>{let t=e.split("|");return Number(t[t.length-1])},r.getAspectRatioFromCache=e=>{let t=r.aspectRatioCache.get(e);return t||null},r.clearOldFrames=()=>{if(r.frameDatabase.size<=12340)return;let e=Array.from(r.frameDatabase.entries()).sort((e,t)=>e[1].lastUsed-t[1].lastUsed);for(let[t,i]of e.slice(0,e.length-12340))i.frame.close(),r.frameDatabase.delete(t)},r.clearFramesForSrc=e=>{let t=[],i=(0,r.getFrameDatabaseKeyPrefix)(e);for(let[e,a]of r.frameDatabase.entries())e.startsWith(i)&&(a.frame.close(),t.push(e));for(let e of t)r.frameDatabase.delete(e)}},836342,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.resizeVideoFrame=void 0,r.resizeVideoFrame=({frame:e,scale:t})=>{var r;if(1===t)return e;let{width:i,height:a}=(({width:e,height:t,scale:r})=>({width:Math.round(e*r),height:Math.round(t*r)}))({height:e.displayHeight,width:e.displayWidth,scale:t}),n=new OffscreenCanvas(i,a),o=n.getContext("2d");if(!o)throw Error("Could not get 2d context");return n.width=i,n.height=a,o.scale(t,t),o.drawImage(e,0,0),new VideoFrame(n,{displayHeight:a,displayWidth:i,duration:null!=(r=e.duration)?r:void 0,timestamp:e.timestamp})}},86925,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimelineVideoInfo=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(873239),s=e.r(801122),l=e.r(836342),u=(0,e.r(706877).getTimelineLayerHeight)("video")-2,c={height:u,width:"100%",backgroundColor:"rgba(0, 0, 0, 0.3)",display:"flex",borderTopLeftRadius:2,borderBottomLeftRadius:2,fontSize:10,fontFamily:"Arial, Helvetica"},d=({visualizationWidth:e,aspectRatio:t,segmentDuration:r})=>r/(e/(u*t))*1e6,p=e=>e%1>=.49999999?Math.ceil(e):Math.floor(e),f=({filledSlots:e,visualizationWidth:t,fromSeconds:r,toSeconds:i,aspectRatio:a})=>{for(let n of(({visualizationWidth:e,fromSeconds:t,segmentDuration:r,aspectRatio:i})=>{let a=Math.ceil(e/(u*i)),n=d({visualizationWidth:e,aspectRatio:i,segmentDuration:r}),o=[];for(let e=0;e<a+1;e++){let r=(Math.round(p((1e6*t+n*(e+.5))/n))-1)*n;o.push(r)}return o})({visualizationWidth:t,fromSeconds:r,segmentDuration:i-r,aspectRatio:a}))e.has(n)||e.set(n,void 0)},h=({frame:e,ctx:t,filledSlots:r,visualizationWidth:i,timestamp:a,segmentDuration:n,fromSeconds:o})=>{let s=Math.floor((a-1e6*o)/d({visualizationWidth:i,aspectRatio:e.displayWidth/e.displayHeight,segmentDuration:n})*e.displayWidth/window.devicePixelRatio);t.drawImage(e,s,0,e.displayWidth/window.devicePixelRatio,e.displayHeight/window.devicePixelRatio),r.set(a,e.timestamp)},m=({ctx:e,visualizationWidth:t,filledSlots:r,src:i,segmentDuration:a,fromSeconds:n})=>{let o=(0,s.getFrameDatabaseKeyPrefix)(i),l=Array.from(s.frameDatabase.keys()).filter(e=>e.startsWith(o));for(let i of Array.from(r.keys())){let o,u=1/0;for(let e of l){let t=Math.abs((0,s.getTimestampFromFrameDatabaseKey)(e)-i);t<u&&(u=t,o=e)}if(!o)continue;let c=s.frameDatabase.get(o);if(!c)continue;let d=r.get(i);d&&Math.abs(d-i)<=Math.abs(c.frame.timestamp-i)||(c.lastUsed=Date.now(),h({ctx:e,frame:c.frame,filledSlots:r,visualizationWidth:t,timestamp:i,segmentDuration:a,fromSeconds:n}))}};r.TimelineVideoInfo=({src:e,visualizationWidth:t,startFrom:r,durationInFrames:d})=>{let{fps:p}=(0,n.useVideoConfig)(),g=(0,a.useRef)(null),[v,y]=(0,a.useState)(null),b=(0,a.useRef)((0,s.getAspectRatioFromCache)(e));return(0,a.useEffect)(()=>()=>{(0,s.clearFramesForSrc)(e)},[e]),(0,a.useEffect)(()=>{if(v)return;let{current:i}=g;if(!i)return;let a=new AbortController,n=document.createElement("canvas");n.width=t,n.height=u;let c=n.getContext("2d");if(!c)return;i.appendChild(n);let x=new Map,w=r/p,S=(r+d)/p;return null!==b.current&&(f({filledSlots:x,visualizationWidth:t,fromSeconds:w,toSeconds:S,aspectRatio:b.current}),m({ctx:c,visualizationWidth:t,filledSlots:x,src:e,segmentDuration:S-w,fromSeconds:w}),0===Array.from(x.keys()).filter(e=>!x.get(e)).length)?()=>{i.removeChild(n),(0,s.clearOldFrames)()}:((0,s.clearOldFrames)(),(0,o.extractFrames)({timestampsInSeconds:({track:r})=>(b.current=r.width/r.height,s.aspectRatioCache.set(e,b.current),f({filledSlots:x,fromSeconds:w,toSeconds:S,visualizationWidth:t,aspectRatio:b.current}),Array.from(x.keys()).map(e=>e/1e6)),src:e,onVideoSample:r=>{let i=r.toVideoFrame(),a=u/i.displayHeight*window.devicePixelRatio,n=(0,l.resizeVideoFrame)({frame:i,scale:a});n!==i&&i.close();let o=(0,s.makeFrameDatabaseKey)(e,n.timestamp),d=s.frameDatabase.get(o);if(d&&d.frame.close(),s.frameDatabase.set(o,{frame:n,lastUsed:Date.now()}),null===b.current)throw Error("Aspect ratio is not set");f({filledSlots:x,fromSeconds:w,toSeconds:S,visualizationWidth:t,aspectRatio:b.current}),(({frame:e,filledSlots:t,ctx:r,visualizationWidth:i,segmentDuration:a,fromSeconds:n})=>{let o=Array.from(t.keys());for(let s=0;s<o.length;s++){let l=o[s];if(Math.abs(l-e.timestamp)>5e4)continue;let u=t.get(l);u&&Math.abs(u-l)<=Math.abs(u-e.timestamp)||h({ctx:r,frame:e,filledSlots:t,visualizationWidth:i,timestamp:l,segmentDuration:a,fromSeconds:n})}})({ctx:c,filledSlots:x,visualizationWidth:t,frame:n,segmentDuration:S-w,fromSeconds:w}),r.close()},signal:a.signal}).then(()=>{m({ctx:c,visualizationWidth:t,filledSlots:x,src:e,segmentDuration:S-w,fromSeconds:w})}).catch(e=>{y(e)}).finally(()=>{(0,s.clearOldFrames)()}),()=>{a.abort(),i.removeChild(n)})},[d,v,p,e,r,t]),(0,i.jsx)("div",{ref:g,style:c})}},906852,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimelineSequence=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(921224),s=e.r(311693),l=e.r(706877),u=e.r(629009),c=e.r(474283),d=e.r(93058),p=e.r(859209),f=e.r(86925),h=e.r(558713);r.TimelineSequence=({s:e})=>{let t=(0,a.useContext)(h.TimelineWidthContext);return null===t?null:(0,i.jsx)(m,{windowWidth:t,s:e})};let m=({s:e,windowWidth:t})=>{var r,h,m;let g=n.Internals.useVideo(),v=(0,u.useMaxMediaDuration)(e,null!=(r=null==g?void 0:g.fps)?r:30);if(!g)throw TypeError("Expected video config");let y=(0,n.useCurrentFrame)()-e.from,b=y+(null!=(h=e.premountDisplay)?h:0),x=y-e.duration,w=Math.round(100*y)/100,S=y>=0&&y<e.duration,k=b>=0&&b<e.duration&&!S,C=x>=0&&x<(null!=(m=e.postmountDisplay)?m:0)&&!S,{marginLeft:E,width:_,premountWidth:T,postmountWidth:P}=(0,a.useMemo)(()=>(0,s.getTimelineSequenceLayout)({durationInFrames:e.loopDisplay?e.loopDisplay.durationInFrames*e.loopDisplay.numberOfTimes:e.duration,startFrom:e.loopDisplay?e.from+e.loopDisplay.startOffset:e.from,startFromMedia:"sequence"===e.type?0:e.startMediaFrom,maxMediaDuration:v,video:g,windowWidth:t,premountDisplay:e.premountDisplay,postmountDisplay:e.postmountDisplay}),[v,e,g,t]),I=(0,a.useMemo)(()=>({background:"audio"===e.type?"linear-gradient(rgb(16 171 58), rgb(43 165 63) 60%)":"video"===e.type?"linear-gradient(to top, #8e44ad, #9b59b6)":o.BLUE,border:s.SEQUENCE_BORDER_WIDTH+"px solid rgba(255, 255, 255, 0.2)",borderRadius:2,position:"absolute",height:(0,l.getTimelineLayerHeight)("video"===e.type?"video":"other"),marginLeft:E,width:_,color:"white",overflow:"hidden",opacity:S?1:.5}),[S,E,e.type,_]);return null===v?null:(0,i.jsxs)("div",{style:I,title:e.displayName,children:[T?(0,i.jsx)("div",{style:{width:T,height:"100%",background:`repeating-linear-gradient(
							-45deg,
							transparent,
							transparent 2px,
							rgba(255, 255, 255, ${k?.5:.2}) 2px,
							rgba(255, 255, 255, ${k?.5:.2}) 4px
						)`,position:"absolute"}}):null,P?(0,i.jsx)("div",{style:{width:P,height:"100%",background:`repeating-linear-gradient(
							-45deg,
							transparent,
							transparent 2px,
							rgba(255, 255, 255, ${C?.5:.2}) 2px,
							rgba(255, 255, 255, ${C?.5:.2}) 4px
						)`,position:"absolute",right:0}}):null,"audio"===e.type?(0,i.jsx)(c.AudioWaveform,{src:e.src,doesVolumeChange:e.doesVolumeChange,visualizationWidth:_,startFrom:e.startMediaFrom,durationInFrames:e.duration,volume:e.volume,playbackRate:e.playbackRate}):null,"video"===e.type?(0,i.jsx)(f.TimelineVideoInfo,{src:e.src,visualizationWidth:_,startFrom:e.startMediaFrom,durationInFrames:e.duration}):null,void 0===e.loopDisplay?null:(0,i.jsx)(d.LoopedTimelineIndicator,{loops:e.loopDisplay.numberOfTimes}),"audio"!==e.type&&"video"!==e.type&&void 0===e.loopDisplay&&(S||k||C)?(0,i.jsx)("div",{style:{paddingLeft:5+(null!=T?T:0),height:"100%",display:"flex",alignItems:"center"},children:(0,i.jsx)(p.TimelineSequenceFrame,{premounted:k,postmounted:C?e.duration-1:null,roundedFrame:w})}):null]},e.id)}},473338,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isTrackHidden=void 0,r.isTrackHidden=e=>!!e.sequence.parent&&!e.sequence.showInTimeline},782435,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimelineTracks=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(706877),o=e.r(453585),s=e.r(906852),l=e.r(594741),u=e.r(473338),c={paddingLeft:n.TIMELINE_PADDING,paddingRight:n.TIMELINE_PADDING,paddingTop:1},d={minHeight:"100%"};r.TimelineTracks=({timeline:e,hasBeenCut:t})=>{let r=(0,a.useMemo)(()=>({...d,width:"100%"}),[]);return(0,i.jsxs)("div",{style:r,children:[(0,i.jsxs)("div",{style:c,children:[(0,i.jsx)(l.TimelineTimePadding,{}),e.map(e=>(0,u.isTrackHidden)(e)?null:(0,i.jsx)("div",{style:{height:(0,n.getTimelineLayerHeight)("video"===e.sequence.type?"video":"other"),marginBottom:n.TIMELINE_ITEM_BORDER_BOTTOM},children:(0,i.jsx)(s.TimelineSequence,{s:e.sequence})},e.sequence.id))]}),t?(0,i.jsx)(o.MaxTimelineTracksReached,{}):null]})}},456313,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Timeline=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(728262),s=e.r(921224),l=e.r(706877),u=e.r(494296),c=e.r(215288),d=e.r(287107),p=e.r(889782),f=e.r(453585),h=e.r(12541),m=e.r(761063),g=e.r(954238),v=e.r(667125),y=e.r(181191),b=e.r(86736),x=e.r(594741),w=e.r(782435),S=e.r(558713),k=e.r(473338),C=e.r(610835),E={minHeight:"100%",flex:1,display:"flex",height:0,overflowY:"auto",backgroundColor:s.BACKGROUND},_=()=>void 0;r.Timeline=()=>{var e;let{sequences:t}=(0,a.useContext)(n.Internals.SequenceManager),r=n.Internals.useUnsafeVideoConfig(),s=(0,a.useMemo)(()=>r?(0,o.calculateTimeline)({sequences:t,sequenceDuration:r.durationInFrames}):[],[t,r]),T=null!=(e=null==r?void 0:r.durationInFrames)?e:0,P=(0,a.useMemo)(()=>s.filter(e=>!(0,k.isTrackHidden)(e)).filter(e=>e.sequence.from<=T&&e.sequence.duration>0).filter(e=>e.sequence.showInTimeline),[T,s]),I=P.slice(0,f.MAX_TIMELINE_TRACKS),A=P.length>I.length,O=(0,a.useMemo)(()=>({height:I.reduce((e,t)=>e+(0,l.getTimelineLayerHeight)("video"===t.sequence.type?"video":"other")+Number(l.TIMELINE_ITEM_BORDER_BOTTOM),0)+l.TIMELINE_ITEM_BORDER_BOTTOM+(A?f.MAX_TIMELINE_TRACKS_NOTICE_HEIGHT:0)+x.TIMELINE_TIME_INDICATOR_HEIGHT,display:"flex",flex:1,minHeight:"100%",overflowX:"hidden"}),[A,I]);return(0,i.jsx)("div",{ref:C.timelineVerticalScroll,style:E,className:"css-reset "+u.VERTICAL_SCROLLBAR_CLASSNAME,children:(0,i.jsx)(S.TimelineWidthProvider,{children:(0,i.jsx)("div",{style:O,children:(0,i.jsxs)(c.SplitterContainer,{orientation:"vertical",defaultFlex:.2,id:"names-to-timeline",maxFlex:.5,minFlex:.15,children:[(0,i.jsx)(d.SplitterElement,{type:"flexer",sticky:(0,i.jsx)(x.TimelineTimePlaceholders,{}),children:(0,i.jsx)(g.TimelineList,{timeline:I})}),(0,i.jsx)(p.SplitterHandle,{onCollapse:_,allowToCollapse:"none"}),(0,i.jsx)(d.SplitterElement,{type:"anti-flexer",sticky:null,children:(0,i.jsxs)(y.TimelineScrollable,{children:[(0,i.jsx)(w.TimelineTracks,{timeline:I,hasBeenCut:A}),(0,i.jsx)(m.TimelineInOutPointer,{}),(0,i.jsx)(v.TimelinePlayCursorSyncer,{}),(0,i.jsx)(h.TimelineDragHandler,{}),(0,i.jsx)(x.TimelineTimeIndicators,{}),(0,i.jsx)(b.TimelineSlider,{})]})})]})})})})}},7791,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.EditorContent=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(43557),s=e.r(570431),l=e.r(301255),u=e.r(215288),c=e.r(287107),d=e.r(889782),p=e.r(456313),f=()=>void 0,h={display:"flex",flexDirection:"column",flex:1,height:0};r.EditorContent=({readOnlyStudio:e,children:t})=>{let r=(0,o.useIsStill)(),{canvasContent:m}=(0,a.useContext)(n.Internals.CompositionManager),g=null===m||r||"composition"!==m.type;return(0,i.jsxs)("div",{style:h,children:[(0,i.jsx)(s.InitialCompositionLoader,{}),(0,i.jsx)(l.MenuToolbar,{readOnlyStudio:e}),(0,i.jsxs)(u.SplitterContainer,{orientation:"horizontal",id:"top-to-bottom",maxFlex:.9,minFlex:.2,defaultFlex:.75,children:[(0,i.jsx)(c.SplitterElement,{sticky:null,type:"flexer",children:t}),g?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.SplitterHandle,{allowToCollapse:"none",onCollapse:f}),(0,i.jsx)(c.SplitterElement,{sticky:null,type:"anti-flexer",children:(0,i.jsx)(p.Timeline,{})})]})]})]})}},77194,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GlobalKeybindings=void 0;let i=e.r(347540),a=e.r(362087),n=e.r(786676),o=e.r(137798),s=e.r(413088),l=e.r(469907),u=e.r(277984);r.GlobalKeybindings=()=>{let e=(0,a.useKeybinding)(),{setSelectedModal:t}=(0,i.useContext)(o.ModalsContext),{setCheckerboard:r}=(0,i.useContext)(n.CheckerboardContext),{navigateToNextComposition:c,navigateToPreviousComposition:d}=(0,l.useCompositionNavigation)();return(0,i.useEffect)(()=>{let i=e.registerKeybinding({event:"keypress",key:"n",callback:()=>{(0,u.showNotification)('To make a new composition, right-click an existing one and select "Duplicate"',5e3)},commandCtrlKey:!1,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1}),a=e.registerKeybinding({event:"keydown",key:"k",callback:()=>{t({type:"quick-switcher",mode:"compositions",invocationTimestamp:Date.now()})},triggerIfInputFieldFocused:!0,keepRegisteredWhenNotHighestContext:!1,commandCtrlKey:!0,preventDefault:!0}),n=process.env.ASK_AI_ENABLED?e.registerKeybinding({event:"keydown",key:"i",callback:()=>{var e;null==(e=s.askAiModalRef.current)||e.toggle()},triggerIfInputFieldFocused:!0,keepRegisteredWhenNotHighestContext:!0,commandCtrlKey:!0,preventDefault:!0}):null,o=e.registerKeybinding({event:"keypress",key:"t",callback:()=>{r(e=>!e)},commandCtrlKey:!1,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1}),l=e.registerKeybinding({event:"keypress",key:"?",callback:()=>{t({type:"quick-switcher",mode:"docs",invocationTimestamp:Date.now()})},commandCtrlKey:!1,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1}),p=e.registerKeybinding({event:"keydown",key:"PageDown",callback:c,commandCtrlKey:!1,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1}),f=e.registerKeybinding({event:"keydown",key:"PageUp",callback:d,commandCtrlKey:!1,preventDefault:!0,triggerIfInputFieldFocused:!1,keepRegisteredWhenNotHighestContext:!1});return()=>{i.unregister(),o.unregister(),l.unregister(),a.unregister(),null==n||n.unregister(),p.unregister(),f.unregister()}},[e,r,t,c,d]),null}},257546,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.installPackages=void 0;let i=e.r(49019),a=e.r(379442);r.installPackages=e=>{if(!(0,i.getRemotionEnvironment)().isStudio)throw Error("installPackages() is only available in the Studio");if(window.remotion_isReadOnlyStudio)throw Error("installPackages() is not available in Read-Only Studio");return(0,a.callApi)("/api/install-package",{packageNames:e})}},329402,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.InstallablePackageComp=void 0;let i=e.r(222260),a=e.r(921224);r.InstallablePackageComp=({isInstalled:e,pkg:t,link:r,description:n})=>(0,i.jsxs)("div",{style:{fontSize:13,lineHeight:1.2,paddingBottom:4,paddingTop:4},children:[(0,i.jsx)("a",{href:r,style:{fontSize:13,color:a.TEXT_COLOR,textDecoration:"none"},target:"_blank",children:t})," ",e?(0,i.jsx)("span",{style:{opacity:.3,fontSize:"inherit"},children:"(installed)"}):null,(0,i.jsx)("br",{}),(0,i.jsx)("span",{style:{color:a.LIGHT_TEXT,fontSize:13},children:n})]})},849226,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ModalButton=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(652693),s={backgroundColor:n.BLUE,color:"white"};r.ModalButton=e=>{let t=(0,a.useMemo)(()=>({...s,backgroundColor:e.disabled?n.BLUE_DISABLED:n.BLUE}),[e.disabled]);return(0,i.jsx)(o.Button,{...e,style:t})}},657042,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ModalFooterContainer=void 0;let i=e.r(222260),a={padding:12,paddingRight:12,flex:1,fontSize:13,minWidth:500};r.ModalFooterContainer=({children:e})=>(0,i.jsx)("div",{style:{...a,borderTop:"1px solid black"},children:e})},454528,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DismissableModal=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(137798),o=e.r(605886);r.DismissableModal=({children:e})=>{let{setSelectedModal:t}=(0,a.useContext)(n.ModalsContext),r=(0,a.useCallback)(()=>{t(null)},[t]);return(0,i.jsx)(o.ModalContainer,{onOutsideClick:r,onEscape:r,children:e})}},288774,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t});Object.defineProperty(r,"__esModule",{value:!0}),r.InstallPackageModal=void 0;let s=e.r(222260),l=e.r(213637),u=o(e.r(347540)),c=e.r(49019),d=e.r(257546),p=e.r(604638),f=e.r(597066),h=e.r(850586),m=e.r(921224),g=e.r(362087),v=e.r(671927),y=e.r(329402),b=e.r(494296),x=e.r(849226),w=e.r(657042),S=e.r(80047),k=e.r(454528),C=e.r(146575),E={padding:20,maxHeight:400,overflowY:"auto"},_={fontSize:14};r.InstallPackageModal=({packageManager:e})=>{let[t,r]=u.default.useState({type:"idle"}),[i,a]=u.default.useState({}),{previewServerState:n}=(0,u.useContext)(h.StudioServerConnectionCtx),o=Object.keys(i).filter(e=>i[e]),T=(0,u.useCallback)(async()=>{if("done"===t.type){r({type:"restarting"}),(0,p.restartStudio)();return}r({type:"installing"});try{await (0,d.installPackages)(o),r({type:"done"})}catch(e){r({type:"error",error:e})}},[o,t.type]),P="idle"===t.type&&"connected"===n.type,I=!(P||"done"===t.type)||0===o.length,{registerKeybinding:A}=(0,g.useKeybinding)();return(0,u.useEffect)(()=>{if(I)return;let e=A({callback(){T()},commandCtrlKey:!0,key:"Enter",event:"keydown",preventDefault:!0,triggerIfInputFieldFocused:!0,keepRegisteredWhenNotHighestContext:!0});return()=>{e.unregister()}},[I,T,A]),(0,s.jsxs)(k.DismissableModal,{children:[(0,s.jsx)(S.ModalHeader,{title:"Install packages"}),(0,s.jsx)("div",{style:E,className:b.VERTICAL_SCROLLBAR_CLASSNAME,children:"done"===t.type?(0,s.jsxs)("div",{style:_,children:["Installed package",1===o.length?"":"s"," ","successfully. Restart the server to complete."]}):"restarting"===t.type?(0,s.jsx)("div",{style:_,children:"Restarting the Studio server..."}):"installing"===t.type?(0,s.jsxs)("div",{style:_,children:["Installing package",1===o.length?"":"s",". Check your terminal for progress."]}):(0,s.jsxs)("div",{style:_,children:[Object.entries(l.installableMap).filter(([,e])=>e).map(([e])=>{var t,r;let n="core"===e?"remotion":`@remotion/${e}`,o=null!=(r=null==(t=window.remotion_installedPackages)?void 0:t.includes(n))&&r,u=l.apiDocs[e],c=l.descriptions[e];if(!u)throw Error("No link for "+n);if(!c)throw Error("No description for "+n);return(0,s.jsxs)(C.Row,{align:"center",children:[(0,s.jsx)(v.Checkbox,{checked:i[n],name:n,onChange:()=>{a(e=>({...e,[n]:!e[n]}))},disabled:!P||o}),(0,s.jsx)(C.Spacing,{x:1.5}),(0,s.jsx)(y.InstallablePackageComp,{description:c,isInstalled:o,link:u,pkg:n})]},n)}),l.extraPackages.map(e=>{var t,r;let n=null!=(r=null==(t=window.remotion_installedPackages)?void 0:t.includes(e.name))&&r;return(0,s.jsxs)(C.Row,{align:"center",children:[(0,s.jsx)(v.Checkbox,{checked:i[e.name],name:e.name,onChange:()=>{a(t=>({...t,[e.name]:!t[e.name]}))},disabled:!P||n}),(0,s.jsx)(C.Spacing,{x:1.5}),(0,s.jsx)(y.InstallablePackageComp,{description:e.description,isInstalled:n,link:e.docsUrl,pkg:`${e.name}@${e.version}`})]},e.name)})]})}),(0,s.jsx)(w.ModalFooterContainer,{children:(0,s.jsxs)(C.Row,{align:"center",children:["idle"===t.type?(0,s.jsxs)("span",{style:{color:m.LIGHT_TEXT,fontSize:13,lineHeight:1.2},children:["This will install ",o.length," package",1===o.length?"":"s",(0,s.jsx)("br",{}),"using ",e,", Remotion v",c.VERSION]}):null,(0,s.jsx)(C.Flex,{}),(0,s.jsxs)(x.ModalButton,{onClick:T,disabled:I,children:["restarting"===t.type?"Restarting...":"installing"===t.type?"Installing...":"done"===t.type?"Restart Server":"Install",I?null:(0,s.jsx)(f.ShortcutHint,{keyToPress:"",cmdOrCtrl:!0})]})]})})]})}},503233,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t});Object.defineProperty(r,"__esModule",{value:!0}),r.ResolveCompositionBeforeModal=r.ResolvedCompositionContext=void 0;let s=e.r(222260),l=o(e.r(347540)),u=e.r(49019),c=e.r(921224),d=e.r(490586),p=e.r(145751),f=e.r(146575),h={paddingTop:40,paddingBottom:40,paddingLeft:100,paddingRight:100,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},m={fontSize:14,color:c.LIGHT_TEXT,fontFamily:"sans-serif",lineHeight:1.5};r.ResolvedCompositionContext=l.default.createContext(null),r.ResolveCompositionBeforeModal=({compositionId:e,children:t})=>{let i=u.Internals.useResolvedVideoConfig(e),a=(0,l.useContext)(u.Internals.CompositionManager).compositions.find(t=>e===t.id);if((0,l.useEffect)(()=>{let{current:t}=u.Internals.resolveCompositionsRef;if(!t)throw Error("No ref to trigger composition calc");return t.setCurrentRenderModalComposition(e),()=>{t.setCurrentRenderModalComposition(null)}},[e]),!a)throw Error("Composition not found: "+e);let n=(0,l.useMemo)(()=>({resolved:i,unresolved:a}),[i,a]);return i&&"loading"!==i.type?"error"===i.type?(0,s.jsxs)("div",{style:h,children:[(0,s.jsx)(f.Spacing,{y:2}),(0,s.jsxs)("div",{style:m,children:["Running ",(0,s.jsx)("code",{style:d.inlineCodeSnippet,children:"calculateMetadata()"})," ","yielded an error:"]}),(0,s.jsx)(f.Spacing,{y:1}),(0,s.jsx)("div",{style:m,children:i.error.message||"Unknown error"})]}):(0,s.jsx)(r.ResolvedCompositionContext.Provider,{value:n,children:t}):(0,s.jsx)(p.RunningCalculateMetadata,{})}},182096,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CodemodDiffPreview=void 0;let i=e.r(222260),a=e.r(921224);r.CodemodDiffPreview=({status:e})=>"loading"===e.type?null:"fail"===e.type?(0,i.jsx)("span",{style:{color:a.FAIL_COLOR,fontSize:13,lineHeight:1.2},children:e.error}):(0,i.jsxs)("div",{style:{lineHeight:1.2},children:[(0,i.jsx)("span",{style:{color:a.LIGHT_TEXT,fontSize:13,lineHeight:1.2},children:"This will edit your Root file."}),(0,i.jsx)("br",{}),(0,i.jsxs)("span",{style:{color:a.BLUE,fontSize:13,lineHeight:1.2},children:[e.diff.additions," addition",1===e.diff.additions?"":"s",","]})," ",(0,i.jsxs)("span",{style:{color:a.SELECTED_GUIDE,fontSize:13,lineHeight:1.2},children:[e.diff.deletions," deletion",1===e.diff.deletions?"":"s"]})]})},709359,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CodemodFooter=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(597066),o=e.r(362087),s=e.r(137798),l=e.r(849226),u=e.r(277984),c=e.r(20330),d=e.r(146575),p=e.r(182096);r.CodemodFooter=({codemod:e,valid:t,loadingNotification:r,successNotification:f,errorNotification:h,genericSubmitLabel:m,submitLabel:g})=>{let[v,y]=(0,a.useState)(!1),{setSelectedModal:b}=(0,a.useContext)(s.ModalsContext),[x,w]=(0,a.useState)({type:"loading"}),[S,k]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=new AbortController;return(0,c.getProjectInfo)(e.signal).then(e=>{k(e.projectInfo)}).catch(e=>{(0,u.showNotification)(`Could not get project info: ${e.message}. Unable to duplicate composition`,3e3)}),()=>{e.abort()}},[]);let C=(0,a.useCallback)(()=>{y(!0),b(null);let t=(0,u.showNotification)(r,null);(0,c.applyCodemod)({codemod:e,dryRun:!1,signal:new AbortController().signal}).then(()=>{t.replaceContent(f,2e3)}).catch(e=>{t.replaceContent(`${h}: ${e.message}`,2e3)})},[e,h,r,b,f]),E=(0,a.useCallback)(async t=>{let r=await (0,c.applyCodemod)({codemod:e,dryRun:!0,signal:t});r.success?w({type:"success",diff:r.diff}):w({type:"fail",error:r.reason})},[e]);(0,a.useEffect)(()=>{let e=new AbortController,t=!1;return E(e.signal).then(()=>void 0).catch(e=>{t||(0,u.showNotification)(`Cannot duplicate composition: ${e.message}`,3e3)}),()=>{t=!0,e.abort()}},[x,E,b]);let _=!t||v||null===S||"success"!==x.type,{registerKeybinding:T}=(0,o.useKeybinding)();return(0,a.useEffect)(()=>{if(_)return;let e=T({callback(){C()},commandCtrlKey:!0,key:"Enter",event:"keydown",preventDefault:!0,triggerIfInputFieldFocused:!0,keepRegisteredWhenNotHighestContext:!1});return()=>{e.unregister()}},[_,T,C,t]),(0,i.jsxs)(d.Row,{align:"center",children:[(0,i.jsx)(p.CodemodDiffPreview,{status:x}),(0,i.jsx)(d.Flex,{}),(0,i.jsx)(d.Spacing,{block:!0,x:2}),(0,i.jsxs)(l.ModalButton,{onClick:C,disabled:_,children:[S&&S.relativeRootFile?g({relativeRootPath:S.relativeRootFile}):m,(0,i.jsx)(n.ShortcutHint,{keyToPress:"",cmdOrCtrl:!0})]})]})}},152682,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DeleteComposition=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(490586),o=e.r(657042),s=e.r(80047),l=e.r(503233),u=e.r(709359),c=e.r(454528),d={padding:16,fontSize:14,flex:1,minWidth:500},p=({compositionId:e})=>{let t=(0,a.useContext)(l.ResolvedCompositionContext);if(!t)throw Error("Resolved composition context");let{unresolved:r}=t,c=(0,a.useMemo)(()=>({type:"delete-composition",idToDelete:e}),[e]),p=(0,a.useCallback)(e=>{e.preventDefault()},[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.ModalHeader,{title:"Delete composition"}),(0,i.jsxs)("form",{onSubmit:p,children:[(0,i.jsxs)("div",{style:d,children:["Do you want to delete the"," ",(0,i.jsx)("code",{style:n.inlineCodeSnippet,children:1===r.durationInFrames?"<Still>":"<Composition>"})," ","with ID ",'"',r.id,'"',"?",(0,i.jsx)("br",{}),"The associated ",(0,i.jsx)("code",{style:n.inlineCodeSnippet,children:"component"})," will remain in your code."]}),(0,i.jsx)(o.ModalFooterContainer,{children:(0,i.jsx)(u.CodemodFooter,{errorNotification:"Could not delete composition",loadingNotification:"Deleting",successNotification:`Deleted ${r.id}`,genericSubmitLabel:"Delete",submitLabel:({relativeRootPath:e})=>`Delete from ${e}`,codemod:c,valid:!0})})]})]})};r.DeleteComposition=({compositionId:e})=>(0,i.jsx)(c.DismissableModal,{children:(0,i.jsx)(l.ResolveCompositionBeforeModal,{compositionId:e,children:(0,i.jsx)(p,{compositionId:e})})})},223211,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateCompositionDuration=r.validateCompositionDimension=r.validateCompositionName=void 0;let i=e.r(49019);r.validateCompositionName=(e,t)=>i.Internals.isCompositionIdValid(e)?t.find(t=>t.id===e)?"A composition with that name already exists.":null:i.Internals.invalidCompositionErrorMessage,r.validateCompositionDimension=(e,t)=>Number(t)%2!=0?`${e} should be divisible by 2, since H264 codec doesn't support odd dimensions.`:Number.isNaN(Number(t))?"Invalid number.":0===Number(t)?e+" cannot be zero.":null,r.validateCompositionDuration=e=>e%1!=0?"Duration must be an integer.":Number.isNaN(e)?"Invalid number.":0===e?"Duration cannot be zero.":null},199098,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NewCompDuration=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(223211),o=e.r(462098),s=e.r(146575),l=e.r(190327),u=e.r(97870);r.NewCompDuration=({durationInFrames:e,setDurationInFrames:t})=>{let r=(0,a.useCallback)(e=>{t(Number(e))},[t]),c=(0,a.useCallback)(e=>{t(e)},[t]),d=(0,n.validateCompositionDuration)(e);return(0,i.jsxs)("div",{style:o.optionRow,children:[(0,i.jsx)("div",{style:o.label,children:"Duration in frames"}),(0,i.jsxs)("div",{style:o.rightRow,children:[(0,i.jsx)(l.InputDragger,{type:"number",value:e,onTextChange:r,placeholder:"Duration (frames)",name:"durationInFrames",min:1,step:1,required:!0,status:"ok",max:3e5,onValueChange:c,rightAlign:!1}),d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Spacing,{y:1,block:!0}),(0,i.jsx)(u.ValidationMessage,{align:"flex-start",message:d,type:"error"})]}):null]})]})}},425837,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DuplicateComposition=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(223211),s=e.r(657042),l=e.r(80047),u=e.r(503233),c=e.r(462098),d=e.r(146575),p=e.r(709359),f=e.r(432804),h=e.r(454528),m=e.r(190327),g=e.r(199098),v=e.r(310099),y=e.r(97870),b={padding:12,paddingRight:12,flex:1,fontSize:13,minWidth:500},x={width:190},w=({initialType:e})=>{let t=(0,a.useContext)(u.ResolvedCompositionContext);if(!t)throw Error("Resolved composition context");let{resolved:r,unresolved:h}=t,[w]=(0,a.useState)(e),S=h.width&&h.height,k=void 0!==h.fps,C=void 0!==h.durationInFrames,[E,_]=(0,a.useState)(r.result.fps),{compositions:T}=(0,a.useContext)(n.Internals.CompositionManager),[P,I]=(0,a.useState)(w),[A,O]=(0,a.useState)(()=>{var e;let t=null==(e=r.result.id.match(/([0-9]+)$/))?void 0:e[0],i=t?Number(t):1,a=r.result.id.replace(/([0-9]+)$/,""),n=a;for(;n=a+i,(0,o.validateCompositionName)(n,T);)i++;return n}),[M,F]=(0,a.useState)(()=>({width:r.result.width,height:r.result.height})),[R,D]=(0,a.useState)(r.result.durationInFrames),j=(0,a.useCallback)(e=>{I(e)},[]),L=(0,a.useCallback)(e=>{F(t=>{let{height:r}=t;return{height:r,width:Number(e)}})},[]),B=(0,a.useCallback)(e=>{F(t=>{let{height:r}=t;return{height:r,width:e}})},[]),N=(0,a.useCallback)(e=>{F(t=>{let{width:r}=t;return{width:r,height:e}})},[]),$=(0,a.useCallback)(e=>{F(t=>{let{width:r}=t;return{width:r,height:Number(e)}})},[]),z=(0,a.useCallback)(e=>{O(e.target.value)},[]),U=(0,a.useCallback)(e=>{_(Number(e))},[]),V=(0,a.useCallback)(e=>{_(e)},[]),H=(0,o.validateCompositionName)(A,T),W=(0,o.validateCompositionDimension)("Width",M.width),q=(0,o.validateCompositionDimension)("Height",M.height),G=(0,a.useMemo)(()=>[{id:"composition",keyHint:null,label:"<Composition />",leftItem:null,onClick:()=>j("composition"),subMenu:null,type:"item",value:"composition",quickSwitcherLabel:null},{id:"still",keyHint:null,label:"<Still />",leftItem:null,onClick:()=>j("still"),subMenu:null,type:"item",value:"still",quickSwitcherLabel:null}],[j]),Z=(0,a.useMemo)(()=>({type:"duplicate-composition",idToDuplicate:r.result.id,newDurationInFrames:C?Number(R):null,newFps:k?Number(E):null,newHeight:S?Number(M.height):null,newWidth:S?Number(M.width):null,newId:A,tag:"still"===P?"Still":"Composition"}),[R,S,C,k,A,r.result.id,E,M.height,M.width,P]),K=(0,a.useCallback)(e=>{e.preventDefault()},[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.ModalHeader,{title:`Duplicate ${r.result.id}`}),(0,i.jsxs)("form",{onSubmit:K,children:[(0,i.jsxs)("div",{style:b,children:["composition"===w?(0,i.jsxs)("div",{style:c.optionRow,children:[(0,i.jsx)("div",{style:c.label,children:"Type"}),(0,i.jsx)("div",{style:c.rightRow,children:(0,i.jsx)(f.Combobox,{title:"Type of composition",style:x,values:G,selectedId:P})})]}):null,(0,i.jsxs)("div",{style:c.optionRow,children:[(0,i.jsx)("div",{style:c.label,children:"ID"}),(0,i.jsx)("div",{style:c.rightRow,children:(0,i.jsxs)("div",{children:[(0,i.jsx)(v.RemotionInput,{value:A,onChange:z,type:"text",autoFocus:!0,placeholder:"Composition ID",status:"ok",rightAlign:!0}),H?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Spacing,{y:1,block:!0}),(0,i.jsx)(y.ValidationMessage,{align:"flex-start",message:H,type:"error"})]}):null]})})]}),S?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:c.optionRow,children:[(0,i.jsx)("div",{style:c.label,children:"Width"}),(0,i.jsxs)("div",{style:c.rightRow,children:[(0,i.jsx)(m.InputDragger,{type:"number",value:M.width,placeholder:"Width",onTextChange:L,name:"width",step:2,min:2,required:!0,status:"ok",formatter:e=>`${e}px`,max:1e8,onValueChange:B,rightAlign:!1}),W?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Spacing,{y:1,block:!0}),(0,i.jsx)(y.ValidationMessage,{align:"flex-start",message:W,type:"error"})]}):null]})]}),(0,i.jsxs)("div",{style:c.optionRow,children:[(0,i.jsx)("div",{style:c.label,children:"Height"}),(0,i.jsxs)("div",{style:c.rightRow,children:[(0,i.jsx)(m.InputDragger,{type:"number",value:M.height,onTextChange:$,placeholder:"Height",name:"height",step:2,required:!0,formatter:e=>`${e}px`,min:2,status:"ok",max:1e8,onValueChange:N,rightAlign:!1}),q?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Spacing,{y:1,block:!0}),(0,i.jsx)(y.ValidationMessage,{align:"flex-start",message:q,type:"error"})]}):null]})]})]}):null,"composition"===P&&C?(0,i.jsx)(g.NewCompDuration,{durationInFrames:R,setDurationInFrames:D}):null,"composition"===P&&k?(0,i.jsxs)("div",{style:c.optionRow,children:[(0,i.jsx)("div",{style:c.label,children:"FPS"}),(0,i.jsx)("div",{style:c.rightRow,children:(0,i.jsx)(m.InputDragger,{type:"number",value:E,onTextChange:U,placeholder:"Frame rate (fps)",name:"fps",min:1,required:!0,status:"ok",max:240,step:.01,onValueChange:V,rightAlign:!1})})]}):null]}),(0,i.jsx)(s.ModalFooterContainer,{children:(0,i.jsx)(p.CodemodFooter,{loadingNotification:"Duplicating...",errorNotification:"Could not duplicate composition",successNotification:`Duplicated ${h.id} as ${A}`,genericSubmitLabel:"Duplicate",submitLabel:({relativeRootPath:e})=>`Add to ${e}`,codemod:Z,valid:null===H&&null===W&&null===q})})]})]})};r.DuplicateComposition=({compositionId:e,compositionType:t})=>(0,i.jsx)(h.DismissableModal,{children:(0,i.jsx)(u.ResolveCompositionBeforeModal,{compositionId:e,children:(0,i.jsx)(w,{initialType:t})})})},292354,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RenameComposition=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(223211),s=e.r(657042),l=e.r(80047),u=e.r(503233),c=e.r(462098),d=e.r(146575),p=e.r(709359),f=e.r(454528),h=e.r(310099),m=e.r(97870),g={padding:12,paddingRight:12,flex:1,fontSize:13,minWidth:500},v=()=>{let e=(0,a.useContext)(u.ResolvedCompositionContext);if(!e)throw Error("Resolved composition context");let{resolved:t}=e,{compositions:r}=(0,a.useContext)(n.Internals.CompositionManager),[f,v]=(0,a.useState)(()=>t.result.id),y=(0,a.useCallback)(e=>{v(e.target.value)},[]),b=f===t.result.id?null:(0,o.validateCompositionName)(f,r),x=null===b&&t.result.id!==f,w=(0,a.useMemo)(()=>({type:"rename-composition",idToRename:t.result.id,newId:f}),[f,t.result.id]),S=(0,a.useCallback)(e=>{e.preventDefault()},[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.ModalHeader,{title:`Rename ${t.result.id}`}),(0,i.jsxs)("form",{onSubmit:S,children:[(0,i.jsx)("div",{style:g,children:(0,i.jsxs)("div",{style:c.optionRow,children:[(0,i.jsx)("div",{style:c.label,children:"ID"}),(0,i.jsx)("div",{style:c.rightRow,children:(0,i.jsxs)("div",{children:[(0,i.jsx)(h.RemotionInput,{value:f,onChange:y,type:"text",autoFocus:!0,placeholder:"Composition ID",status:"ok",rightAlign:!0}),b?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Spacing,{y:1,block:!0}),(0,i.jsx)(m.ValidationMessage,{align:"flex-start",message:b,type:"error"})]}):null]})})]})}),(0,i.jsx)(s.ModalFooterContainer,{children:(0,i.jsx)(p.CodemodFooter,{loadingNotification:"Renaming...",errorNotification:"Could not rename composition",successNotification:`Renamed to ${f}`,genericSubmitLabel:"Rename",submitLabel:({relativeRootPath:e})=>`Modify ${e}`,codemod:w,valid:x})})]})]})};r.RenameComposition=({compositionId:e})=>(0,i.jsx)(f.DismissableModal,{children:(0,i.jsx)(u.ResolveCompositionBeforeModal,{compositionId:e,children:(0,i.jsx)(v,{})})})},351203,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OverrideInputPropsModal=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(921224),s=e.r(137798),l=e.r(652693),u=e.r(454528),c=e.r(898002),d=e.r(146575),p={padding:12,width:500},f={color:o.LIGHT_TEXT,fontSize:14,marginBottom:10},h={fontFamily:"monospace",minHeight:200},m={fontSize:14,color:o.BLUE,fontFamily:"monospace"},g={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},v=e=>{try{return JSON.parse(e),!0}catch(e){return!1}},y=()=>{let[e,t]=(0,a.useState)(()=>{let e=n.Internals.getInputPropsOverride();return e?JSON.stringify(e,null,2):null}),{setSelectedModal:r}=(0,a.useContext)(s.ModalsContext),o=(0,a.useMemo)(()=>!e||v(e),[e]),u=(0,a.useCallback)(e=>{if(""===e.trim()){t(null),n.Internals.setInputPropsOverride(null);return}t(e),v(e)&&n.Internals.setInputPropsOverride(JSON.parse(e))},[t]),y=(0,a.useCallback)(()=>{u("")},[u]),b=(0,a.useCallback)(()=>{window.location.reload()},[]),x=(0,a.useCallback)(()=>{r(null)},[r]);return(0,i.jsxs)("div",{style:p,children:[(0,i.jsxs)("div",{style:f,children:["Enter a valid JSON to override the value that"," ",(0,i.jsx)("code",{style:m,children:"getInputProps()"})," returns to preview a composition with different props. The Studio must be reloaded to see the changes."]}),(0,i.jsx)(c.RemTextarea,{onChange:e=>u(e.target.value),value:null!=e?e:"",status:o?"ok":"error",style:h}),(0,i.jsxs)("div",{style:g,children:[(0,i.jsx)(l.Button,{onClick:y,children:"Reset"}),(0,i.jsx)(d.Spacing,{x:.5}),(0,i.jsx)(l.Button,{onClick:b,children:"Reload page"}),(0,i.jsx)(d.Flex,{}),(0,i.jsx)(l.Button,{onClick:x,children:"Done"})]})]})};r.OverrideInputPropsModal=()=>(0,i.jsx)(u.DismissableModal,{children:(0,i.jsx)(y,{})})},440248,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ArrowRight=r.ArrowLeft=r.ShiftIcon=void 0;let i=e.r(222260),a={width:10,display:"inline"};r.ShiftIcon=()=>(0,i.jsx)("svg",{style:a,viewBox:"0 0 448 512",children:(0,i.jsx)("path",{fill:"currentColor",d:"M48.048 304h73.798v128c0 26.51 21.49 48 48 48h108.308c26.51 0 48-21.49 48-48V304h73.789c42.638 0 64.151-51.731 33.941-81.941l-175.943-176c-18.745-18.745-49.137-18.746-67.882 0l-175.952 176C-16.042 252.208 5.325 304 48.048 304zM224 80l176 176H278.154v176H169.846V256H48L224 80z"})}),r.ArrowLeft=()=>(0,i.jsx)("svg",{style:a,viewBox:"0 0 448 512",children:(0,i.jsx)("path",{fill:"currentColor",d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"})}),r.ArrowRight=()=>(0,i.jsx)("svg",{style:a,viewBox:"0 0 448 512",children:(0,i.jsx)("path",{fill:"currentColor",d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"})})},625248,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.KeyboardShortcutsExplainer=void 0;let i=e.r(222260),a=e.r(597066),n=e.r(921224),o=e.r(362087),s=e.r(440248),l=e.r(146575),u={width:85,paddingTop:8,paddingBottom:8},c={background:n.INPUT_BACKGROUND,padding:"3px 6px",color:"white",borderRadius:3,border:"1px solid "+n.INPUT_BORDER_COLOR_UNHOVERED,borderBottomWidth:3,fontSize:14,fontFamily:"monospace"},d={fontSize:14,color:"#eee"},p={paddingLeft:20,paddingRight:40,paddingTop:10,paddingBottom:10},f={fontWeight:"bold",color:"white",fontSize:14,marginBottom:10},h={padding:12,width:"100%",fontSize:14,backgroundColor:"rgba(255, 255, 255, 0.1)"},m={marginTop:0,marginBottom:0},g={fontSize:14};r.KeyboardShortcutsExplainer=()=>(0,i.jsxs)("div",{children:[(0,o.areKeyboardShortcutsDisabled)()?(0,i.jsxs)("div",{style:h,children:["Keyboard shortcuts disabled either due to:",(0,i.jsxs)("ul",{style:m,children:[(0,i.jsx)("li",{style:g,children:"a) --disable-keyboard-shortcuts being passed"}),(0,i.jsx)("li",{style:g,children:"b) Config.setKeyboardShortcutsEnabled(false) being set or"}),(0,i.jsx)("li",{style:g,children:" c) a Remotion version mismatch."})]})]}):null,(0,i.jsxs)(l.Row,{style:p,children:[(0,i.jsxs)(l.Column,{children:[(0,i.jsx)("div",{style:f,children:"Playback"}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsxs)("div",{style:u,children:[(0,i.jsx)("kbd",{style:c,children:(0,i.jsx)(s.ShiftIcon,{})}),(0,i.jsx)(l.Spacing,{x:.3}),(0,i.jsx)("kbd",{style:c,children:(0,i.jsx)(s.ArrowLeft,{})})]}),(0,i.jsx)("div",{style:d,children:"1 second back"})]}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)("kbd",{style:c,children:(0,i.jsx)(s.ArrowLeft,{})})}),(0,i.jsx)("div",{style:d,children:"Previous frame"})]}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)("kbd",{style:c,children:"Space"})}),(0,i.jsx)("div",{style:d,children:"Play / Pause"})]}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)("kbd",{style:c,children:(0,i.jsx)(s.ArrowRight,{})})}),(0,i.jsx)("div",{style:d,children:"Next frame"})]}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsxs)("div",{style:u,children:[(0,i.jsx)("kbd",{style:c,children:(0,i.jsx)(s.ShiftIcon,{})}),(0,i.jsx)(l.Spacing,{x:.3}),(0,i.jsx)("kbd",{style:c,children:(0,i.jsx)(s.ArrowRight,{})})]}),(0,i.jsx)("div",{style:d,children:"1 second forward"})]}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)("kbd",{style:c,children:"A"})}),(0,i.jsx)("div",{style:d,children:"Jump to beginning"})]}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)("kbd",{style:c,children:"E"})}),(0,i.jsx)("div",{style:d,children:"Jump to end"})]}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)("kbd",{style:c,children:"J"})}),(0,i.jsx)("div",{style:d,children:"Reverse playback"})]}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)("kbd",{style:c,children:"K"})}),(0,i.jsx)("div",{style:d,children:"Pause"})]}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)("kbd",{style:c,children:"L"})}),(0,i.jsx)("div",{style:d,children:"Play / Speed up"})]}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)("kbd",{style:c,children:"G"})}),(0,i.jsx)("div",{style:d,children:"Go to frame"})]}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)("kbd",{style:c,children:"Enter"})}),(0,i.jsx)("div",{style:d,children:"Pause & return to playback start"})]}),(0,i.jsx)("br",{}),(0,i.jsx)("div",{style:f,children:"Sidebar"}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsxs)("div",{style:u,children:[(0,i.jsx)("kbd",{style:c,children:a.cmdOrCtrlCharacter}),(0,i.jsx)(l.Spacing,{x:.3}),(0,i.jsx)("kbd",{style:c,children:"B"})]}),(0,i.jsx)("div",{style:d,children:"Toggle left sidebar"})]}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsxs)("div",{style:u,children:[(0,i.jsx)("kbd",{style:c,children:a.cmdOrCtrlCharacter}),(0,i.jsx)(l.Spacing,{x:.3}),(0,i.jsx)("kbd",{style:c,children:"J"})]}),(0,i.jsx)("div",{style:d,children:"Toggle right sidebar"})]}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsxs)("div",{style:u,children:[(0,i.jsx)("kbd",{style:c,children:a.cmdOrCtrlCharacter}),(0,i.jsx)(l.Spacing,{x:.3}),(0,i.jsx)("kbd",{style:c,children:"G"})]}),(0,i.jsx)("div",{style:d,children:"Toggle both sidebars"})]}),(0,i.jsx)("br",{}),(0,i.jsx)("div",{style:f,children:"View"}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)("kbd",{style:c,children:"F"})}),(0,i.jsx)("div",{style:d,children:"Enter fullscreen"})]}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)("kbd",{style:c,children:"Esc"})}),(0,i.jsx)("div",{style:d,children:"Exit fullscreen"})]})]}),(0,i.jsx)(l.Spacing,{x:8}),(0,i.jsxs)(l.Column,{children:[(0,i.jsx)("div",{style:f,children:"Navigation"}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)("kbd",{style:c,children:"PageUp"})}),(0,i.jsx)("div",{style:d,children:"Previous composition"})]}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)("kbd",{style:c,children:"PageDown"})}),(0,i.jsx)("div",{style:d,children:"Next composition"})]}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)("kbd",{style:c,children:"R"})}),(0,i.jsx)("div",{style:d,children:"Render composition"})]}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)("kbd",{style:c,children:"T"})}),(0,i.jsx)("div",{style:d,children:"Toggle checkerboard background"})]}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)("kbd",{style:c,children:"?"})}),(0,i.jsx)("div",{style:d,children:"Show keyboard shortcuts"})]}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsxs)("div",{style:u,children:[(0,i.jsx)("kbd",{style:c,children:a.cmdOrCtrlCharacter}),(0,i.jsx)(l.Spacing,{x:.3}),(0,i.jsx)("kbd",{style:c,children:"K"})]}),(0,i.jsx)("div",{style:d,children:"Quick Switcher"})]}),(0,i.jsx)("br",{}),(0,i.jsx)("div",{style:f,children:"Playback range"}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)("kbd",{style:c,children:"I"})}),(0,i.jsx)("div",{style:d,children:"Set In Point"})]}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)("kbd",{style:c,children:"O"})}),(0,i.jsx)("div",{style:d,children:"Set Out Point"})]}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)("kbd",{style:c,children:"X"})}),(0,i.jsx)("div",{style:d,children:"Clear In/Out Points"})]}),(0,i.jsx)("br",{}),(0,i.jsx)("div",{style:f,children:"Zoom"}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)("kbd",{style:c,children:"+"})}),(0,i.jsx)("div",{style:d,children:"Zoom in"})]}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)("kbd",{style:c,children:"-"})}),(0,i.jsx)("div",{style:d,children:"Zoom out"})]}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsx)("div",{style:u,children:(0,i.jsx)("kbd",{style:c,children:"0"})}),(0,i.jsx)("div",{style:d,children:"Reset zoom"})]})," ",(0,i.jsx)("br",{}),(0,i.jsx)("div",{style:f,children:"Props Editor"}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsxs)("div",{style:u,children:[(0,i.jsx)("kbd",{style:c,children:a.cmdOrCtrlCharacter}),(0,i.jsx)(l.Spacing,{x:.3}),(0,i.jsx)("kbd",{style:c,children:"S"})]}),(0,i.jsx)("div",{style:d,children:"Save"})]}),process.env.ASK_AI_ENABLED&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("br",{}),(0,i.jsx)("div",{style:f,children:"AI"}),(0,i.jsxs)(l.Row,{align:"center",children:[(0,i.jsxs)("div",{style:u,children:[(0,i.jsx)("kbd",{style:c,children:a.cmdOrCtrlCharacter}),(0,i.jsx)(l.Spacing,{x:.3}),(0,i.jsx)("kbd",{style:c,children:"I"})]}),(0,i.jsx)("div",{style:d,children:"Ask AI"})]})]})]})]})]})},458440,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AlgoliaCredit=void 0;let i=e.r(222260),a={display:"inline-flex"};r.AlgoliaCredit=()=>(0,i.jsx)("a",{style:a,href:"https://www.algolia.com/ref/docsearch/?utm_source=www.remotion.dev&utm_medium=referral&utm_content=powered_by&utm_campaign=docsearch",target:"_blank",rel:"noopener noreferrer",children:(0,i.jsx)("svg",{width:"77",height:"19","aria-label":"Algolia",role:"img",children:(0,i.jsx)("path",{d:"M2.5067 0h14.0245c1.384.001 2.5058 1.1205 2.5068 2.5017V16.5c-.0014 1.3808-1.1232 2.4995-2.5068 2.5H2.5067C1.1232 18.9995.0014 17.8808 0 16.5V2.4958A2.495 2.495 0 01.735.7294 2.505 2.505 0 012.5068 0zM37.95 15.0695c-3.7068.0168-3.7068-2.986-3.7068-3.4634L34.2372.3576 36.498 0v11.1794c0 .2715 0 1.9889 1.452 1.994v1.8961zm-9.1666-1.8388c.694 0 1.2086-.0397 1.5678-.1088v-2.2934a5.3639 5.3639 0 00-1.3303-.1679 4.8283 4.8283 0 00-.758.0582 2.2845 2.2845 0 00-.688.2024c-.2029.0979-.371.2362-.4919.4142-.1268.1788-.185.2826-.185.5533 0 .5297.185.8359.5205 1.0375.3355.2016.7928.3053 1.365.3053v-.0008zm-.1969-8.1817c.7463 0 1.3768.092 1.8856.2767.5088.1838.9195.4428 1.2204.7717.3068.334.5147.7777.6423 1.251.1327.4723.196.991.196 1.5603v5.798c-.5235.1036-1.05.192-1.5787.2649-.7048.1037-1.4976.156-2.3774.156-.5832 0-1.1215-.0582-1.6016-.167a3.385 3.385 0 01-1.2432-.5364 2.6034 2.6034 0 01-.8037-.9565c-.191-.3922-.29-.9447-.29-1.5208 0-.5533.11-.905.3246-1.2863a2.7351 2.7351 0 01.8849-.9329c.376-.242.8029-.415 1.2948-.5187a7.4517 7.4517 0 011.5381-.156 7.1162 7.1162 0 011.6667.2024V8.886c0-.259-.0296-.5061-.093-.7372a1.5847 1.5847 0 00-.3245-.6158 1.5079 1.5079 0 00-.6119-.4158 2.6788 2.6788 0 00-.966-.173c-.5206 0-.9948.0634-1.4283.1384a6.5481 6.5481 0 00-1.065.259l-.2712-1.849c.2831-.0986.7048-.1964 1.2491-.2943a9.2979 9.2979 0 011.752-.1501v.0008zm44.6597 8.1193c.6947 0 1.2086-.0405 1.567-.1097v-2.2942a5.3743 5.3743 0 00-1.3303-.1679c-.2485 0-.503.0177-.7573.0582a2.2853 2.2853 0 00-.688.2024 1.2333 1.2333 0 00-.4918.4142c-.1268.1788-.1843.2826-.1843.5533 0 .5297.1843.8359.5198 1.0375.3414.2066.7927.3053 1.365.3053v.0009zm-.191-8.1767c.7463 0 1.3768.0912 1.8856.2759.5087.1847.9195.4436 1.2204.7717.3.329.5147.7786.6414 1.251a5.7248 5.7248 0 01.197 1.562v5.7972c-.3466.0742-.874.1602-1.5788.2648-.7049.1038-1.4976.1552-2.3774.1552-.5832 0-1.1215-.0573-1.6016-.167a3.385 3.385 0 01-1.2432-.5356 2.6034 2.6034 0 01-.8038-.9565c-.191-.3922-.2898-.9447-.2898-1.5216 0-.5533.1098-.905.3245-1.2854a2.7373 2.7373 0 01.8849-.9338c.376-.2412.8029-.4141 1.2947-.5178a7.4545 7.4545 0 012.325-.1097c.2781.0287.5672.081.879.156v-.3686a2.7781 2.7781 0 00-.092-.738 1.5788 1.5788 0 00-.3246-.6166 1.5079 1.5079 0 00-.612-.415 2.6797 2.6797 0 00-.966-.1729c-.5205 0-.9947.0633-1.4282.1384a6.5608 6.5608 0 00-1.065.259l-.2712-1.8498c.283-.0979.7048-.1957 1.2491-.2935a9.8597 9.8597 0 011.752-.1494zm-6.79-1.072c-.7576.001-1.373-.6103-1.3759-1.3664 0-.755.6128-1.3664 1.376-1.3664.764 0 1.3775.6115 1.3775 1.3664s-.6195 1.3664-1.3776 1.3664zm1.1393 11.1507h-2.2726V5.3409l2.2734-.3568v10.0845l-.0008.0017zm-3.984 0c-3.707.0168-3.707-2.986-3.707-3.4642L59.7069.3576 61.9685 0v11.1794c0 .2715 0 1.9889 1.452 1.994V15.0703zm-7.3512-4.979c0-.975-.2138-1.7873-.6305-2.3516-.4167-.571-.9998-.852-1.747-.852-.7454 0-1.3302.281-1.7452.852-.4166.5702-.6195 1.3765-.6195 2.3516 0 .9851.208 1.6473.6254 2.2183.4158.576.9998.8587 1.7461.8587.7454 0 1.3303-.2885 1.747-.8595.4158-.5761.6237-1.2315.6237-2.2184v.0009zm2.3132-.006c0 .7609-.1099 1.3361-.3356 1.9654a4.654 4.654 0 01-.9533 1.6076A4.214 4.214 0 0155.613 14.69c-.579.2412-1.4697.3795-1.9143.3795-.4462-.005-1.3303-.1324-1.9033-.3795a4.307 4.307 0 01-1.474-1.0316c-.4115-.4445-.7293-.9801-.9609-1.6076a5.3423 5.3423 0 01-.3465-1.9653c0-.7608.104-1.493.3356-2.1155a4.683 4.683 0 01.9719-1.5958 4.3383 4.3383 0 011.479-1.0257c.5739-.242 1.2043-.3567 1.8864-.3567.6829 0 1.3125.1197 1.8906.3567a4.1245 4.1245 0 011.4816 1.0257 4.7587 4.7587 0 01.9592 1.5958c.2426.6225.3643 1.3547.3643 2.1155zm-17.0198 0c0 .9448.208 1.9932.6238 2.431.4166.4386.955.6579 1.6142.6579.3584 0 .6998-.0523 1.0176-.1502.3186-.0978.5721-.2134.775-.3517V7.0784a8.8706 8.8706 0 00-1.4926-.1906c-.8206-.0236-1.4452.312-1.8847.8468-.4335.5365-.6533 1.476-.6533 2.3516v-.0008zm6.2863 4.4485c0 1.5385-.3938 2.662-1.1866 3.3773-.791.7136-2.0005 1.0712-3.6308 1.0712-.5958 0-1.834-.1156-2.8228-.334l.3643-1.7865c.8282.173 1.9202.2193 2.4932.2193.9077 0 1.555-.1847 1.943-.5533.388-.3686.578-.916.578-1.643v-.3687a6.8289 6.8289 0 01-.8848.3349c-.3634.1096-.786.167-1.261.167-.6246 0-1.1917-.0979-1.7055-.2944a3.5554 3.5554 0 01-1.3244-.8645c-.3642-.3796-.6541-.8579-.8561-1.4289-.2028-.571-.3068-1.59-.3068-2.339 0-.7034.1099-1.5856.3245-2.1735.2198-.5871.5316-1.0949.9542-1.515.4167-.42.9255-.743 1.5213-.98a5.5923 5.5923 0 012.052-.3855c.7353 0 1.4114.092 2.0707.2024.6592.1088 1.2204.2236 1.6776.35v8.945-.0008zM11.5026 4.2418v-.6511c-.0005-.4553-.3704-.8241-.8266-.8241H8.749c-.4561 0-.826.3688-.8265.824v.669c0 .0742.0693.1264.1445.1096a6.0346 6.0346 0 011.6768-.2362 6.125 6.125 0 011.6202.2185.1116.1116 0 00.1386-.1097zm-5.2806.852l-.3296-.3282a.8266.8266 0 00-1.168 0l-.393.3922a.8199.8199 0 000 1.164l.3237.323c.0524.0515.1268.0397.1733-.0117.191-.259.3989-.507.6305-.7372.2374-.2362.48-.4437.7462-.6335.0575-.0354.0634-.1155.017-.1687zm3.5159 2.069v2.818c0 .081.0879.1392.1622.0987l2.5102-1.2964c.0574-.0287.0752-.0987.0464-.1552a3.1237 3.1237 0 00-2.603-1.574c-.0575 0-.115.0456-.115.1097l-.0008-.0009zm.0008 6.789c-2.0933.0005-3.7915-1.6912-3.7947-3.7804C5.9468 8.0821 7.6452 6.39 9.7387 6.391c2.0932-.0005 3.7911 1.6914 3.794 3.7804a3.7783 3.7783 0 01-1.1124 2.675 3.7936 3.7936 0 01-2.6824 1.1054h.0008zM9.738 4.8002c-1.9218 0-3.6975 1.0232-4.6584 2.6841a5.359 5.359 0 000 5.3683c.9609 1.661 2.7366 2.6841 4.6584 2.6841a5.3891 5.3891 0 003.8073-1.5725 5.3675 5.3675 0 001.578-3.7987 5.3574 5.3574 0 00-1.5771-3.797A5.379 5.379 0 009.7387 4.801l-.0008-.0008z",fill:"currentColor",fillRule:"evenodd"})})})},316474,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.QuickSwitcherNoResults=void 0;let i=e.r(222260),a={padding:80,color:e.r(921224).LIGHT_TEXT,textAlign:"center",fontSize:14},n={commands:"commands",compositions:"compositions",docs:"documentation"};r.QuickSwitcherNoResults=({query:e,mode:t})=>(0,i.jsxs)("div",{style:a,children:["No ",n[t]," matching ",'"',e,'"']})},291015,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.QuickSwitcherResult=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(362087),s=e.r(449149),l=e.r(511462),u=e.r(146575),c={paddingLeft:16,paddingRight:16,display:"flex",flexDirection:"row",alignItems:"center",cursor:"pointer"},d={whiteSpace:"nowrap",textOverflow:"ellipsis"},p={...d,lineHeight:1.25},f={width:14,height:14},h={overflow:"hidden",flex:1,paddingTop:5,paddingBottom:5};r.QuickSwitcherResult=({result:e,selected:t})=>{let[r,m]=(0,a.useState)(!1),g=(0,a.useRef)(null),v=(0,o.useKeybinding)();(0,a.useEffect)(()=>{let{current:e}=g;if(!e)return;let t=()=>m(!0),r=()=>m(!1);return e.addEventListener("mouseenter",t),e.addEventListener("mouseleave",r),()=>{e.removeEventListener("mouseenter",t),e.removeEventListener("mouseleave",r)}},[]),(0,a.useEffect)(()=>{if(!t)return;let r=v.registerKeybinding({key:"Enter",callback:e.onSelected,commandCtrlKey:!1,event:"keydown",preventDefault:!0,triggerIfInputFieldFocused:!0,keepRegisteredWhenNotHighestContext:!1});return()=>{r.unregister()}},[v,e.onSelected,t]),(0,a.useEffect)(()=>{var e;t&&(null==(e=g.current)||e.scrollIntoView({block:"nearest",inline:"center"}))},[t]);let y=(0,a.useMemo)(()=>({...c,backgroundColor:(0,n.getBackgroundFromHoverState)({hovered:r,selected:t})}),[r,t]),b=(0,a.useMemo)(()=>({..."search-result"===e.type?p:d,color:"search-result"===e.type?n.LIGHT_TEXT:t||r?"white":n.LIGHT_TEXT,fontSize:15}),[r,e.type,t]);return(0,i.jsxs)("div",{ref:g,style:y,onClick:e.onSelected,children:["composition"===e.type?"still"===e.compositionType?(0,i.jsx)(s.StillIcon,{color:t?"white":n.LIGHT_TEXT,style:f}):(0,i.jsx)(l.FilmIcon,{color:t?"white":n.LIGHT_TEXT,style:f}):null,(0,i.jsx)(u.Spacing,{x:1}),(0,i.jsx)("div",{style:h,children:"search-result"===e.type?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:e.titleLine},style:b}),(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:e.subtitleLine},style:b})]}):(0,i.jsx)("div",{style:b,children:e.title})})]},e.id)}},365069,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.algoliaSearch=void 0;let i=e.r(758927);r.algoliaSearch=async e=>{let t=new URL("https://plsduol1ca-dsn.algolia.net/1/indexes/*/queries");t.searchParams.set("x-algolia-agen",encodeURIComponent("Remotion Studio DocSearch")),t.searchParams.set("x-algolia-api-key","3e42dbd4f895fe93ff5cf40d860c4a85"),t.searchParams.set("x-algolia-application-id","PLSDUOL1CA");let{results:r}=await fetch(t.toString(),{headers:{"content-type":"application/x-www-form-urlencoded"},body:JSON.stringify({requests:[{query:e,indexName:"remotion",params:'attributesToRetrieve=["hierarchy.lvl0","hierarchy.lvl1","hierarchy.lvl2","hierarchy.lvl3","hierarchy.lvl4","hierarchy.lvl5","hierarchy.lvl6","content","type","url"]&attributesToSnippet=["hierarchy.lvl1:10","hierarchy.lvl2:10","hierarchy.lvl3:10","hierarchy.lvl4:10","hierarchy.lvl5:10","hierarchy.lvl6:10","content:10"]&hitsPerPage=20'}]}),method:"POST"}).then(e=>e.json()),{hits:n}=r[0];return n.map(e=>{var t;let r=Object.values(e._highlightResult.hierarchy),i=null!=(t=r.find(e=>"full"===e.matchLevel))?t:r.find(e=>"partial"===e.matchLevel),{subtitle:n,title:o}=a(e);return i?{type:"search-result",id:e.objectID,title:"Should not display",titleLine:o,subtitleLine:n,onSelected:()=>{window.open(e.url)}}:null}).filter(i.NoReactInternals.truthy)};let a=e=>({title:("content"===e.type?e._highlightResult.content:e._highlightResult.hierarchy[e.type]).value,subtitle:Object.entries(e._highlightResult.hierarchy).filter(([t])=>t!==e.type).map(e=>e[1].value).join("  ")})},468192,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fuzzySearch=function(e,t){let r=e?e.trim().toLowerCase():"",i=[];if(0===r.length){for(let e=0;e<t.length;e++)i.push(e);return t.filter((e,t)=>i.includes(t))}return t.forEach((e,t)=>{let a,n=e.title.trim().toLowerCase(),o=0,s=-1;for(;a=r[o++];)if(!~(s=n.indexOf(a,s+1)))return;i.push(t)}),t.filter((e,t)=>i.includes(t))}},598888,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.QuickSwitcherContent=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(921224),s=e.r(929723),l=e.r(362087),u=e.r(679249),c=e.r(137798),d=e.r(570431),p=e.r(625248),f=e.r(494296),h=e.r(310099),m=e.r(146575),g=e.r(458440),v=e.r(316474),y=e.r(291015),b=e.r(365069),x=e.r(468192),w={width:"100%"},S={paddingLeft:16,paddingRight:16,display:"flex",flexDirection:"row",paddingTop:8,paddingBottom:5},k={appearance:"none",border:"none",fontFamily:"inherit",padding:0,fontSize:13,cursor:"pointer"},C={...k,color:o.LIGHT_TEXT},E={...k,color:"white",fontWeight:"bold"},_={paddingLeft:16,paddingRight:16,paddingTop:4,paddingBottom:10,display:"flex",flexDirection:"row",alignItems:"center"},T=e=>e.startsWith(">")||e.startsWith("?")?e.substring(1).trim():e.trim(),P=e=>{if("commands"===e)return"> ";if("compositions"===e)return"";if("docs"===e)return"? ";throw Error("no mode"+e)};r.QuickSwitcherContent=({initialMode:e,invocationTimestamp:t,readOnlyStudio:r})=>{var o,k;let I,{compositions:A}=(0,a.useContext)(n.Internals.CompositionManager),[O,M]=(0,a.useState)(()=>({query:P(e),selectedIndex:0}));(0,a.useEffect)(()=>{M({query:P(e),selectedIndex:0})},[e,t]);let F=(0,a.useRef)(null),R=(0,d.useSelectComposition)(),D=(0,a.useCallback)(()=>void 0,[]),j=(0,u.useMenuStructure)(D,r),[L,B]=(0,a.useState)({type:"initial"}),{setSelectedModal:N}=(0,a.useContext)(c.ModalsContext),$=(0,l.useKeybinding)(),z=(I=O.query).startsWith(">")?"commands":I.startsWith("?")?"docs":"compositions",U=(0,a.useMemo)(()=>T(O.query),[O.query]),V=(0,a.useMemo)(()=>"commands"!==z?[]:(0,u.makeSearchResults)(j,N),[j,z,N]),H=(0,a.useMemo)(()=>"commands"===z?(0,x.fuzzySearch)(U,V):"docs"===z&&"results"===L.type?L.results:(0,x.fuzzySearch)(U,A.map(e=>({id:"composition-"+e.id,title:e.id,type:"composition",onSelected:()=>{var t,r;R(e,!0),N(null);let i=`.__remotion-composition[data-compname="${e.id}"]`;null==(t=n.Internals.compositionSelectorRef.current)||t.expandComposition(e.id),(r=i,new Promise(e=>{if(document.querySelector(r))return void e(document.querySelector(r));let t=new MutationObserver(()=>{document.querySelector(r)&&(e(document.querySelector(r)),t.disconnect())});t.observe(document.body,{childList:!0,subtree:!0})})).then(()=>{var e;null==(e=document.querySelector(i))||e.scrollIntoView({block:"center"})})},compositionType:(0,s.isCompositionStill)(e)?"still":"composition"}))),[z,U,A,V,L,R,N]),W=(0,a.useCallback)(()=>{M(e=>({...e,selectedIndex:e.selectedIndex+1}))},[]),q=(0,a.useCallback)(()=>{M(e=>({...e,selectedIndex:e.selectedIndex-1}))},[]);(0,a.useEffect)(()=>{let e=$.registerKeybinding({key:"ArrowUp",callback:q,commandCtrlKey:!1,event:"keydown",preventDefault:!0,triggerIfInputFieldFocused:!0,keepRegisteredWhenNotHighestContext:!1});return()=>{e.unregister()}},[$,W,q]),(0,a.useEffect)(()=>{if("docs"!==z)return;if(""===U.trim())return void B({type:"initial"});let e=!1;return B({type:"loading"}),(0,b.algoliaSearch)(U).then(t=>{e||B({type:"results",results:t})}).catch(t=>{e||B({type:"error",error:t})}),()=>{e=!0}},[U,z]),(0,a.useEffect)(()=>{let e=$.registerKeybinding({key:"ArrowDown",callback:W,commandCtrlKey:!1,event:"keydown",preventDefault:!0,triggerIfInputFieldFocused:!0,keepRegisteredWhenNotHighestContext:!1});return()=>{e.unregister()}},[$,W]);let G=(0,a.useCallback)(e=>{M({query:e.target.value,selectedIndex:0})},[]),Z=(o=O.selectedIndex,k=H.length,o<0&&(o+=k),o%k),K=(0,a.useCallback)(()=>{var e;M(e=>({query:`> ${T(e.query)}`,selectedIndex:0})),null==(e=F.current)||e.focus()},[]),Q=(0,a.useCallback)(()=>{var e;M(e=>({query:T(e.query),selectedIndex:0})),null==(e=F.current)||e.focus()},[]),X=(0,a.useCallback)(()=>{var e;M(e=>({query:`? ${T(e.query)}`,selectedIndex:0})),B({type:"initial"}),null==(e=F.current)||e.focus()},[]),J="docs"===z&&""===U.trim(),Y="docs"===z&&"loading"===L.type,ee=(0,a.useMemo)(()=>({width:J?800:500}),[J]),et=(0,a.useMemo)(()=>J?{maxHeight:600,overflowY:"auto"}:{overflowY:"auto",height:300},[J]);return(0,i.jsxs)("div",{style:ee,children:[(0,i.jsxs)("div",{style:S,children:[(0,i.jsx)("button",{onClick:Q,style:"compositions"===z?E:C,type:"button",children:"Compositions"}),(0,i.jsx)(m.Spacing,{x:1}),(0,i.jsx)("button",{onClick:K,style:"commands"===z?E:C,type:"button",children:"Actions"}),(0,i.jsx)(m.Spacing,{x:1}),(0,i.jsx)("button",{onClick:X,style:"docs"===z?E:C,type:"button",children:"Documentation"})]}),(0,i.jsxs)("div",{style:_,children:[(0,i.jsx)(h.RemotionInput,{ref:F,type:"text",style:w,autoFocus:!0,status:"ok",value:O.query,onChange:G,placeholder:"Search compositions...",rightAlign:!1}),J?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.Spacing,{x:2})," ",(0,i.jsx)(g.AlgoliaCredit,{})]}):null]}),(0,i.jsx)("div",{style:et,className:f.VERTICAL_SCROLLBAR_CLASSNAME,children:J?(0,i.jsx)(p.KeyboardShortcutsExplainer,{}):Y?null:0===H.length?(0,i.jsx)(v.QuickSwitcherNoResults,{mode:z,query:U}):H.map((e,t)=>(0,i.jsx)(y.QuickSwitcherResult,{selected:Z===t,result:e},e.id))})]})}},493432,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(222260),a=e.r(454528),n=e.r(598888);r.default=({initialMode:e,invocationTimestamp:t,readOnlyStudio:r})=>(0,i.jsx)(a.DismissableModal,{children:(0,i.jsx)(n.QuickSwitcherContent,{readOnlyStudio:r,invocationTimestamp:t,initialMode:e})})},108811,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SuccessIcon=void 0;let i=e.r(222260),a=e.r(921224),n=e.r(235653),o={height:n.RENDER_STATUS_INDICATOR_SIZE,width:n.RENDER_STATUS_INDICATOR_SIZE};r.SuccessIcon=()=>(0,i.jsx)("svg",{style:o,viewBox:"0 0 512 512",children:(0,i.jsx)("path",{fill:a.LIGHT_TEXT,d:"M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM369 209L241 337l-17 17-17-17-64-64-17-17L160 222.1l17 17 47 47L335 175l17-17L385.9 192l-17 17z"})})},980969,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ClientRenderProgress=void 0;let i=e.r(222260),a=e.r(213637),n=e.r(921224),o=e.r(146575),s=e.r(235653),l=e.r(108811),u={padding:10,display:"flex",flexDirection:"row",alignItems:"center"},c={fontSize:14,width:400,color:"white"},d={fontSize:14,color:n.LIGHT_TEXT,textAlign:"right",flex:1},p=({renderedFrames:e,totalFrames:t})=>{let r=e===t;return(0,i.jsxs)("div",{style:u,children:[r?(0,i.jsx)(l.SuccessIcon,{}):(0,i.jsx)(s.CircularProgress,{progress:t>0?e/t:0}),(0,i.jsx)(o.Spacing,{x:1}),(0,i.jsx)("div",{style:c,children:r?`Rendered ${t} frames`:`Rendering ${e} / ${t} frames`})]})},f=({encodedFrames:e,totalFrames:t})=>{let r=e===t;return(0,i.jsxs)("div",{style:u,children:[r?(0,i.jsx)(l.SuccessIcon,{}):(0,i.jsx)(s.CircularProgress,{progress:t>0?e/t:0}),(0,i.jsx)(o.Spacing,{x:1}),(0,i.jsx)("div",{style:c,children:r?`Encoded ${t} frames`:`Encoding ${e} / ${t} frames`})]})},h=({job:e})=>(0,i.jsxs)("div",{style:u,children:[(0,i.jsx)(l.SuccessIcon,{}),(0,i.jsx)(o.Spacing,{x:1}),(0,i.jsx)("div",{style:c,children:e.outName}),(0,i.jsx)("div",{style:d,children:(0,a.formatBytes)(e.metadata.sizeInBytes)})]});r.ClientRenderProgress=({job:e})=>{if("idle"===e.status||"failed"===e.status||"cancelled"===e.status)throw Error("This component should not be rendered when the job is idle, failed, or cancelled");if("done"===e.status)return(0,i.jsxs)("div",{children:[(0,i.jsx)(o.Spacing,{y:.5}),(0,i.jsx)(h,{job:e}),(0,i.jsx)(o.Spacing,{y:1})]});let{renderedFrames:t,encodedFrames:r,totalFrames:a}=e.progress;return(0,i.jsxs)("div",{children:[(0,i.jsx)(o.Spacing,{y:.5}),(0,i.jsx)(p,{renderedFrames:t,totalFrames:a}),"client-video"===e.type&&(0,i.jsx)(f,{encodedFrames:r,totalFrames:a}),(0,i.jsx)(o.Spacing,{y:1})]})}},357316,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GuiRenderStatus=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(146575),s=e.r(20330),l=e.r(235653),u=e.r(957473),c=e.r(108811),d={padding:10,display:"flex",flexDirection:"row",alignItems:"center"},p={fontSize:14,width:400,color:"white"},f={fontSize:14,color:n.LIGHT_TEXT,textAlign:"right",flex:1},h=({progress:e,doneIn:t})=>(0,i.jsxs)("div",{style:d,children:[1===e?(0,i.jsx)(c.SuccessIcon,{}):(0,i.jsx)(l.CircularProgress,{progress:e}),(0,i.jsx)(o.Spacing,{x:1}),(0,i.jsx)("div",{style:p,children:1===e?"Bundled":`Bundling ${100*e}%`}),t?(0,i.jsxs)("div",{style:f,children:[t,"ms"]}):null]}),m=({progress:e,doneIn:t,startedBundling:r,alreadyAvailable:a})=>(0,i.jsxs)("div",{style:d,children:[1===e||a?(0,i.jsx)(c.SuccessIcon,{}):(0,i.jsx)(l.CircularProgress,{progress:e}),(0,i.jsx)(o.Spacing,{x:1}),(0,i.jsx)("div",{style:p,children:a&&r?"Headless browser already available":1===e?"Downloaded Headless Shell":`Downloading Headless Shell ${Math.round(100*e)}%`}),t?(0,i.jsxs)("div",{style:f,children:[t,"ms"]}):null]}),g=({progress:e})=>(0,i.jsxs)("div",{style:d,children:[e.frames===e.totalFrames?(0,i.jsx)(c.SuccessIcon,{}):(0,i.jsx)(l.CircularProgress,{progress:e.frames/e.totalFrames}),(0,i.jsx)(o.Spacing,{x:1}),(0,i.jsx)("div",{style:p,children:e.doneIn?`Rendered ${e.totalFrames} frames`:`Rendering ${e.frames} / ${e.totalFrames} frames`}),e.doneIn?(0,i.jsxs)("div",{style:f,children:[e.doneIn,"ms"]}):null]}),v=({progress:e})=>(0,i.jsxs)("div",{style:d,children:[e.frames===e.totalFrames?(0,i.jsx)(c.SuccessIcon,{}):(0,i.jsx)(l.CircularProgress,{progress:e.frames/e.totalFrames}),(0,i.jsx)(o.Spacing,{x:1}),(0,i.jsx)("div",{style:p,children:e.doneIn?`Encoded ${e.totalFrames} frames`:`Encoding ${e.frames} / ${e.totalFrames} frames`}),e.doneIn?(0,i.jsxs)("div",{style:f,children:[e.doneIn,"ms"]}):null]}),y=({downloads:e})=>{let t=e.every(e=>e.totalBytes),r=t?e.reduce((e,t)=>e+t.totalBytes,0):null,a=t?e.reduce((e,t)=>e+t.downloaded,0):null,n=t?a/r:.1;return(0,i.jsxs)("div",{style:d,children:[1===n?(0,i.jsx)(c.SuccessIcon,{}):(0,i.jsx)(l.CircularProgress,{progress:n}),(0,i.jsx)(o.Spacing,{x:1}),(0,i.jsxs)("div",{style:p,children:["Downloading ",e.length," file",1===e.length?"":"s"]})]})},b=({job:e})=>{let t=(0,a.useMemo)(()=>({...p,textAlign:"left",appearance:"none",border:0,paddingLeft:0,cursor:e.deletedOutputLocation?"inherit":"pointer",textDecoration:e.deletedOutputLocation?"line-through":"none"}),[e.deletedOutputLocation]),r=(0,a.useCallback)(()=>{(0,s.openInFileExplorer)({directory:e.outName})},[e.outName]);return(0,i.jsxs)("div",{style:d,children:[(0,i.jsx)(c.SuccessIcon,{}),(0,i.jsx)(o.Spacing,{x:1}),(0,i.jsx)("button",{style:t,type:"button",onClick:r,children:e.outName}),(0,i.jsx)("div",{style:f,children:(0,i.jsx)(u.RenderQueueOpenInFinderItem,{job:e})})]})};r.GuiRenderStatus=({job:e})=>{if("idle"===e.status||"failed"===e.status)throw Error("This component should not be rendered when the job is idle");return(0,i.jsxs)("div",{children:[(0,i.jsx)(o.Spacing,{y:.5}),(0,i.jsx)(m,{...e.progress.browser,startedBundling:!!e.progress.bundling}),e.progress.bundling&&(0,i.jsx)(h,{progress:e.progress.bundling.progress,doneIn:e.progress.bundling.doneIn}),e.progress.rendering?(0,i.jsx)(g,{progress:e.progress.rendering}):null,e.progress.stitching?(0,i.jsx)(v,{progress:e.progress.stitching}):null,e.progress.downloads.length>0?(0,i.jsx)(y,{downloads:e.progress.downloads}):null,"done"===e.status?(0,i.jsx)(b,{job:e}):null,(0,i.jsx)(o.Spacing,{y:1})]})}},902315,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RenderStatusModal=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(417679),o=e.r(137798),s=e.r(652693),l=e.r(494296),u=e.r(605886),c=e.r(80047),d=e.r(277984),p=e.r(20330),f=e.r(896509),h=e.r(146575),m=e.r(980969),g=e.r(357316),v={padding:20,maxWidth:900,paddingTop:0},y={backgroundColor:"#222",whiteSpace:"pre",padding:12,borderRadius:4,fontFamily:"monospace",overflow:"auto",maxHeight:300},b={height:h.SPACING_UNIT,width:h.SPACING_UNIT},x={display:"flex",flexDirection:"row",justifyContent:"flex-end"};r.RenderStatusModal=({jobId:e})=>{let{setSelectedModal:t}=(0,a.useContext)(o.ModalsContext),{jobs:r,removeClientJob:w,cancelClientJob:S}=(0,a.useContext)(f.RenderQueueContext),k=r.find(t=>t.id===e);if(!k)throw Error("job not found");let C=(0,f.isClientRenderJob)(k),E=(0,a.useCallback)(()=>{t(null)},[t]),_=(0,a.useCallback)(()=>{C?t((0,n.makeClientRetryPayload)(k)):t((0,n.makeRetryPayload)(k))},[k,C,t]),T=(0,a.useCallback)(()=>{t(null),C?(w(k.id),(0,d.showNotification)("Removed render",2e3)):(0,p.removeRenderJob)(k).catch(e=>{(0,d.showNotification)(`Could not remove job: ${e.message}`,2e3)})},[k,C,w,t]),P=(0,a.useCallback)(()=>{C?S(k.id):(0,p.cancelRenderJob)(k).catch(e=>{(0,d.showNotification)(`Could not cancel job: ${e.message}`,2e3)})},[k,C,S]);if("idle"===k.status)throw Error("should not have rendered this modal");return(0,i.jsxs)(u.ModalContainer,{onOutsideClick:E,onEscape:E,children:[(0,i.jsx)(c.ModalHeader,{title:`Render ${k.compositionId}`}),(0,i.jsxs)("div",{style:v,children:["failed"===k.status?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{children:"The render failed because of the following error:"}),(0,i.jsx)("div",{className:l.HORIZONTAL_SCROLLBAR_CLASSNAME,style:y,children:k.error.stack})]}):null,("done"===k.status||"running"===k.status)&&(C?(0,i.jsx)(m.ClientRenderProgress,{job:k}):(0,i.jsx)(g.GuiRenderStatus,{job:k})),(0,i.jsx)("div",{style:b}),(0,i.jsxs)("div",{style:x,children:["running"===k.status?(0,i.jsx)(s.Button,{onClick:P,children:"Cancel render"}):(0,i.jsx)(s.Button,{onClick:T,children:"Remove render"}),(0,i.jsx)(h.Flex,{}),"failed"===k.status?(0,i.jsx)(s.Button,{onClick:_,children:"Retry"}):null,(0,i.jsx)("div",{style:b}),(0,i.jsx)(s.Button,{onClick:E,children:"Close"})]})]})]})}},637667,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimeoutSettings=r.DEFAULT_TIMEOUT=void 0,r.DEFAULT_TIMEOUT=3e4,r.TimeoutSettings=class{#e;#t;constructor(){this.#e=null,this.#t=null}setDefaultTimeout(e){this.#e=e}setDefaultNavigationTimeout(e){this.#t=e}navigationTimeout(){return null!==this.#t?this.#t:null!==this.#e?this.#e:r.DEFAULT_TIMEOUT}timeout(){return null!==this.#e?this.#e:r.DEFAULT_TIMEOUT}}},53892,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_CODEC=r.validCodecs=void 0,r.validCodecs=["h264","h265","vp8","vp9","mp3","aac","wav","prores","h264-mkv","h264-ts","gif"],r.DEFAULT_CODEC="h264"},223520,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isAudioCodec=void 0,r.isAudioCodec=e=>"mp3"===e||"aac"===e||"wav"===e},854049,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateQualitySettings=r.getValidCrfRanges=r.getDefaultCrfForCodec=void 0;let i=e.r(223520),a={h264:18,h265:23,vp8:9,vp9:28,prores:null,gif:null,"h264-mkv":18,"h264-ts":18,aac:null,mp3:null,wav:null};r.getDefaultCrfForCodec=e=>{let t=a[e];if(void 0===t)throw TypeError(`Got unexpected codec "${e}"`);return t};let n={h264:[1,51],h265:[0,51],vp8:[4,63],vp9:[0,63],prores:[0,0],gif:[0,0],"h264-mkv":[1,51],"h264-ts":[1,51],aac:[0,0],mp3:[0,0],wav:[0,0]};r.getValidCrfRanges=e=>{let t=n[e];if(void 0===t)throw TypeError(`Got unexpected codec "${e}"`);return t},r.validateQualitySettings=({codec:e,crf:t,videoBitrate:a,encodingMaxRate:n,encodingBufferSize:o,hardwareAcceleration:s})=>{if(t&&a)throw Error('"crf" and "videoBitrate" can not both be set. Choose one of either.');if(t&&"required"===s)throw Error('"crf" option is not supported with hardware acceleration');if(n&&!o)throw Error('"encodingMaxRate" can not be set without also setting "encodingBufferSize".');let l=o?["-bufsize",o]:[],u=n?["-maxrate",n]:[];if(a)return"prores"===e?(console.warn("ProRes does not support videoBitrate. Ignoring."),[]):(0,i.isAudioCodec)(e)?(console.warn(`${e} does not support videoBitrate. Ignoring.`),[]):["-b:v",a,...l,...u];if(null==t){let t=(0,r.getDefaultCrfForCodec)(e);return null===t?[...l,...u]:["-crf",String(t),...l,...u]}if("number"!=typeof t)throw TypeError("Expected CRF to be a number, but is "+JSON.stringify(t));let c=(0,r.getValidCrfRanges)(e);if(0===t&&("h264"===e||"h264-mkv"===e||"h264-ts"===e))throw TypeError("Setting the CRF to 0 with a H264 codec is not supported anymore because of it's inconsistencies between platforms. Videos with CRF 0 cannot be played on iOS/macOS. 0 is a extreme value with inefficient settings which you probably do not want. Set CRF to a higher value to fix this error.");if(t<c[0]||t>c[1]){if(0===c[0]&&0===c[1])throw TypeError(`The "${e}" codec does not support the --crf option.`);throw TypeError(`CRF must be between ${c[0]} and ${c[1]} for codec ${e}. Passed: ${t}`)}return"prores"===e?(console.warn('ProRes does not support the "crf" option. Ignoring.'),[]):(0,i.isAudioCodec)(e)?(console.warn(`${e} does not support the "crf" option. Ignoring.`),[]):["-crf",String(t),...l,...u]}},715155,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.codecSupportsVideoBitrate=r.codecSupportsCrf=r.codecSupportsMedia=void 0;let i=e.r(854049),a={"h264-mkv":{audio:!0,video:!0},aac:{audio:!0,video:!1},gif:{video:!0,audio:!1},h264:{video:!0,audio:!0},"h264-ts":{video:!0,audio:!0},h265:{video:!0,audio:!0},mp3:{audio:!0,video:!1},prores:{audio:!0,video:!0},vp8:{audio:!0,video:!0},vp9:{audio:!0,video:!0},wav:{audio:!0,video:!1}};r.codecSupportsMedia=e=>a[e];let n={"h264-mkv":!0,"h264-ts":!0,aac:!1,gif:!1,h264:!0,h265:!0,mp3:!1,prores:!1,vp8:!0,vp9:!0,wav:!1};r.codecSupportsCrf=e=>{let t=(0,i.getValidCrfRanges)(e);return t[0]!==t[1]},r.codecSupportsVideoBitrate=e=>n[e]},88714,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultFileExtensionMap=void 0,r.defaultFileExtensionMap={"h264-mkv":{default:"mkv",forAudioCodec:{"pcm-16":{possible:["mkv"],default:"mkv"},mp3:{possible:["mkv"],default:"mkv"}}},"h264-ts":{default:"ts",forAudioCodec:{"pcm-16":{possible:["ts"],default:"ts"},aac:{possible:["ts"],default:"ts"}}},aac:{default:"aac",forAudioCodec:{aac:{possible:["aac","3gp","m4a","m4b","mpg","mpeg"],default:"aac"},"pcm-16":{possible:["wav"],default:"wav"}}},gif:{default:"gif",forAudioCodec:{}},h264:{default:"mp4",forAudioCodec:{"pcm-16":{possible:["mkv","mov"],default:"mkv"},aac:{possible:["mp4","mkv","mov"],default:"mp4"},mp3:{possible:["mp4","mkv","mov"],default:"mp4"}}},h265:{default:"mp4",forAudioCodec:{aac:{possible:["mp4","mkv","hevc"],default:"mp4"},"pcm-16":{possible:["mkv"],default:"mkv"}}},mp3:{default:"mp3",forAudioCodec:{mp3:{possible:["mp3"],default:"mp3"},"pcm-16":{possible:["wav"],default:"wav"}}},prores:{default:"mov",forAudioCodec:{aac:{possible:["mov","mkv","mxf"],default:"mov"},"pcm-16":{possible:["mov","mkv","mxf"],default:"mov"}}},vp8:{default:"webm",forAudioCodec:{"pcm-16":{possible:["mkv"],default:"mkv"},opus:{possible:["webm"],default:"webm"}}},vp9:{default:"webm",forAudioCodec:{"pcm-16":{possible:["mkv"],default:"mkv"},opus:{possible:["webm"],default:"webm"}}},wav:{default:"wav",forAudioCodec:{"pcm-16":{possible:["wav"],default:"wav"}}}}},696525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultCodecsForFileExtension=r.makeFileExtensionMap=r.getFileExtensionFromCodec=void 0;let i=e.r(53892),a=e.r(88714);r.getFileExtensionFromCodec=(e,t)=>{if(!i.validCodecs.includes(e))throw Error(`Codec must be one of the following: ${i.validCodecs.join(", ")}, but got ${e}`);let r=a.defaultFileExtensionMap[e];if(null===t)return r.default;if(!(t in r.forAudioCodec))throw Error(`Audio codec ${t} is not supported for codec ${e}`);return r.forAudioCodec[t].default},r.makeFileExtensionMap=()=>{let e={};return Object.keys(a.defaultFileExtensionMap).forEach(t=>{let r=a.defaultFileExtensionMap[t],i=Object.keys(r.forAudioCodec).map(e=>r.forAudioCodec[e].possible);for(let a of[r.default,...i.flat(1)])e[a]||(e[a]=[]),e[a].includes(t)||e[a].push(t)}),e},r.defaultCodecsForFileExtension={"3gp":"aac",aac:"aac",gif:"gif",hevc:"h265",m4a:"aac",m4b:"aac",mkv:"h264-mkv",mov:"prores",mp3:"mp3",mp4:"h264",mpeg:"aac",mpg:"aac",mxf:"prores",wav:"wav",webm:"vp8",ts:"h264-ts"}},200762,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateStillImageFormat=r.validateSelectedPixelFormatAndImageFormatCombination=r.DEFAULT_STILL_IMAGE_FORMAT=r.DEFAULT_VIDEO_IMAGE_FORMAT=r.validStillImageFormats=r.validVideoImageFormats=void 0,r.validVideoImageFormats=["png","jpeg","none"],r.validStillImageFormats=["png","jpeg","pdf","webp"],r.DEFAULT_VIDEO_IMAGE_FORMAT="jpeg",r.DEFAULT_STILL_IMAGE_FORMAT="png",r.validateSelectedPixelFormatAndImageFormatCombination=(e,t)=>{if("none"===t)return"none";if(void 0===e)return"valid";if(!r.validVideoImageFormats.includes(t))throw TypeError(`Value ${t} is not valid as an image format.`);if("yuva420p"!==e&&"yuva444p10le"!==e)return"valid";if("png"!==t)throw TypeError(`Pixel format was set to '${e}' but the image format is not PNG. To render transparent videos, you need to set PNG as the image format.`);return"valid"},r.validateStillImageFormat=e=>{if(!r.validStillImageFormats.includes(e))throw TypeError(String(`Image format should be one of: ${r.validStillImageFormats.map(e=>`"${e}"`).join(", ")}`))}},151222,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateJpegQuality=r.DEFAULT_JPEG_QUALITY=void 0,r.DEFAULT_JPEG_QUALITY=80,r.validateJpegQuality=e=>{if(void 0!==e&&"number"!=typeof e)throw Error(`JPEG Quality option must be a number or undefined. Got ${typeof e} (${JSON.stringify(e)})`);if(void 0!==e){if(!Number.isFinite(e))throw RangeError(`JPEG Quality must be a finite number, but is ${e}`);if(Number.isNaN(e))throw RangeError("JPEG Quality is NaN, but must be a real number");if(e>100||e<0)throw RangeError("JPEG Quality option must be between 0 and 100.")}}},17888,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isEqualOrBelowLogLevel=r.isValidLogLevel=r.logLevels=void 0,r.logLevels=["trace","verbose","info","warn","error"],r.isValidLogLevel=e=>r.logLevels.indexOf(e)>-1,r.isEqualOrBelowLogLevel=(e,t)=>r.logLevels.indexOf(e)<=r.logLevels.indexOf(t)},765381,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.apiKeyOption=void 0;let i=e.r(222260),a=null,n="api-key";r.apiKeyOption={name:"API key",cliFlag:n,description:()=>i.jsxs(i.Fragment,{children:["API key for sending a usage event using ",i.jsx("code",{children:"@remotion/licensing"}),"."]}),ssrName:"apiKey",docLink:"https://www.remotion.dev/docs/licensing",type:null,getValue:({commandLine:e})=>void 0!==e[n]?{source:"cli",value:e[n]}:{source:"default",value:a},setConfig:e=>{a=e}}},438924,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.askAIOption=void 0;let i=e.r(222260),a=!0,n="disable-ask-ai";r.askAIOption={name:"Disable or Enable the Ask AI option",cliFlag:n,description:()=>i.jsx(i.Fragment,{children:"If the Cmd + I shortcut of the Ask AI modal conflicts with your Studio, you can disable it using this."}),ssrName:null,docLink:"https://www.remotion.dev/docs/config#setaskaienabled",type:!1,getValue:({commandLine:e})=>void 0!==e[n]?{value:a=!1,source:"cli"}:{value:a,source:"config"},setConfig(e){a=e}}},541076,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.audioBitrateOption=void 0;let i=e.r(222260),a="audio-bitrate",n=null;r.audioBitrateOption={name:"Audio Bitrate",cliFlag:a,description:()=>i.jsxs(i.Fragment,{children:["Specify the target bitrate for the generated video. The syntax for FFmpeg","'","s ",i.jsx("code",{children:"-b:a"})," parameter should be used. FFmpeg may encode the video in a way that will not result in the exact audio bitrate specified. Example values: ",i.jsx("code",{children:"512K"})," for 512 kbps, ",i.jsx("code",{children:"1M"})," for 1 Mbps. Default: ",i.jsx("code",{children:"320k"})]}),ssrName:"audioBitrate",docLink:"https://www.remotion.dev/docs/renderer/render-media#audiobitrate-",type:"0",getValue:({commandLine:e})=>e[a]?{value:e[a],source:"cli"}:n?{value:n,source:"config file"}:{value:null,source:"default"},setConfig:e=>{n=e}}},646301,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.separateAudioOption=void 0;let i="separate-audio-to";r.separateAudioOption={cliFlag:i,description:()=>"If set, the audio will not be included in the main output but rendered as a separate file at the location you pass. It is recommended to use an absolute path. If a relative path is passed, it is relative to the Remotion Root.",docLink:"https://remotion.dev/docs/renderer/render-media",getValue:({commandLine:e})=>e[i]?{source:"cli",value:e[i]}:{source:"default",value:null},name:"Separate audio to",setConfig:()=>{throw Error("Not implemented")},ssrName:"separateAudioTo",type:"string"}},387523,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.audioCodecOption=r.getDefaultAudioCodec=r.resolveAudioCodec=r.getExtensionFromAudioCodec=r.defaultAudioCodecs=r.mapAudioCodecToFfmpegAudioCodecName=r.supportedAudioCodecs=r.validAudioCodecs=void 0;let i=e.r(646301);r.validAudioCodecs=["pcm-16","aac","mp3","opus"],r.supportedAudioCodecs={h264:["aac","pcm-16","mp3"],"h264-mkv":["pcm-16","mp3"],"h264-ts":["pcm-16","aac"],aac:["aac","pcm-16"],avi:[],gif:[],h265:["aac","pcm-16"],mp3:["mp3","pcm-16"],prores:["aac","pcm-16"],vp8:["opus","pcm-16"],vp9:["opus","pcm-16"],wav:["pcm-16"]},r.supportedAudioCodecs,r.mapAudioCodecToFfmpegAudioCodecName=e=>{if("aac"===e)return"libfdk_aac";if("mp3"===e)return"libmp3lame";if("opus"===e)return"libopus";if("pcm-16"===e)return"pcm_s16le";throw Error("unknown audio codec: "+e)};let a="audio-codec";r.defaultAudioCodecs={"h264-mkv":{lossless:"pcm-16",compressed:"pcm-16"},"h264-ts":{lossless:"pcm-16",compressed:"aac"},aac:{lossless:"pcm-16",compressed:"aac"},gif:{lossless:null,compressed:null},h264:{lossless:"pcm-16",compressed:"aac"},h265:{lossless:"pcm-16",compressed:"aac"},mp3:{lossless:"pcm-16",compressed:"mp3"},prores:{lossless:"pcm-16",compressed:"pcm-16"},vp8:{lossless:"pcm-16",compressed:"opus"},vp9:{lossless:"pcm-16",compressed:"opus"},wav:{lossless:"pcm-16",compressed:"pcm-16"}};let n={aac:"aac",mp3:"mp3",opus:"opus","pcm-16":"wav"};r.getExtensionFromAudioCodec=e=>{if(n[e])return n[e];throw Error(`Unsupported audio codec: ${e}`)},r.resolveAudioCodec=({codec:e,setting:t,preferLossless:a,separateAudioTo:o})=>{let s=null;if(o){let t=o.split(".").pop();for(let[a,o]of Object.entries(n))if(o===t&&(s=a,!r.supportedAudioCodecs[e].includes(s)&&s))throw Error(`The codec is ${e} but the audio codec derived from --${i.separateAudioOption.cliFlag} is ${s}. The only supported codecs are: ${r.supportedAudioCodecs[e].join(", ")}`)}if(a){let t=(0,r.getDefaultAudioCodec)({codec:e,preferLossless:a});if(s&&t!==s)throw Error(`The audio codec derived from --${i.separateAudioOption.cliFlag} is ${s}, but does not match the audio codec derived from the "Prefer lossless" option (${t}). Remove any conflicting options.`);return t}if(null===t)return s||(0,r.getDefaultAudioCodec)({codec:e,preferLossless:a});if(s!==t&&s)throw Error(`The audio codec derived from --${i.separateAudioOption.cliFlag} is ${s}, but does not match the audio codec derived from your ${r.audioCodecOption.name} setting (${t}). Remove any conflicting options.`);return t},r.getDefaultAudioCodec=({codec:e,preferLossless:t})=>r.defaultAudioCodecs[e][t?"lossless":"compressed"];let o=null;r.audioCodecOption={cliFlag:a,setConfig:e=>{if(null===e){o=null;return}if(!r.validAudioCodecs.includes(e))throw Error(`Audio codec must be one of the following: ${r.validAudioCodecs.join(", ")}, but got ${e}`);o=e},getValue:({commandLine:e})=>{if(e[a]){let t=e[a];if(!r.validAudioCodecs.includes(e[a]))throw Error(`Audio codec must be one of the following: ${r.validAudioCodecs.join(", ")}, but got ${t}`);return{source:"cli",value:e[a]}}return null!==o?{source:"config",value:o}:{source:"default",value:null}},description:()=>"Set the format of the audio that is embedded in the video. Not all codec and audio codec combinations are supported and certain combinations require a certain file extension and container format. See the table in the docs to see possible combinations.",docLink:"https://www.remotion.dev/docs/encoding/#audio-codec",name:"Audio Codec",ssrName:"audioCodec",type:"aac"}},483089,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.beepOnFinishOption=void 0;let i=e.r(222260),a=!1,n="beep-on-finish";r.beepOnFinishOption={name:"Beep on finish",cliFlag:n,description:()=>i.jsx(i.Fragment,{children:"Whether the Remotion Studio tab should beep when the render is finished."}),ssrName:null,docLink:"https://www.remotion.dev/docs/config#setbeeponfinish",type:!1,getValue:({commandLine:e})=>void 0!==e[n]?{value:e[n],source:"cli"}:!1!==a?{value:a,source:"config"}:{value:!1,source:"default"},setConfig(e){a=e}}},908301,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.binariesDirectoryOption=void 0;let i=e.r(222260),a="binaries-directory",n=null;r.binariesDirectoryOption={name:"Binaries Directory",cliFlag:a,description:()=>i.jsxs(i.Fragment,{children:["The directory where the platform-specific binaries and libraries that Remotion needs are located. Those include an ",i.jsx("code",{children:"ffmpeg"})," and"," ",i.jsx("code",{children:"ffprobe"})," binary, a Rust binary for various tasks, and various shared libraries. If the value is set to ",i.jsx("code",{children:"null"}),", which is the default, then the path of a platform-specific package located at"," ",i.jsx("code",{children:"node_modules/@remotion/compositor-*"})," is selected.",i.jsx("br",{}),"This option is useful in environments where Remotion is not officially supported to run like bundled serverless functions or Electron."]}),ssrName:"binariesDirectory",docLink:"https://www.remotion.dev/docs/renderer",type:"",getValue:({commandLine:e})=>void 0!==e[a]?{source:"cli",value:e[a]}:null!==n?{source:"config",value:n}:{source:"default",value:null},setConfig:e=>{n=e}}},226977,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.chromeModeOption=r.validChromeModeOptions=void 0;let i=e.r(222260);r.validChromeModeOptions=["headless-shell","chrome-for-testing"];let a="chrome-mode",n=null;r.chromeModeOption={cliFlag:a,name:"Chrome Mode",ssrName:"chromeMode",description:()=>i.jsxs(i.Fragment,{children:["One of"," ",r.validChromeModeOptions.map((e,t)=>i.jsxs("code",{children:[e,t===r.validChromeModeOptions.length-1?"":", "]},e)),". Default ",i.jsx("code",{children:"headless-shell"}),"."," ",i.jsxs("a",{href:"https://remotion.dev/docs/miscellaneous/chrome-headless-shell",children:["Use ",i.jsx("code",{children:"chrome-for-testing"})," to take advantage of GPU drivers on Linux."]})]}),docLink:"https://www.remotion.dev/chrome-for-testing",getValue:({commandLine:e})=>{if(e[a]){if(!r.validChromeModeOptions.includes(e[a]))throw Error(`Invalid \`--${a}\` value passed. Accepted values: ${r.validChromeModeOptions.map(e=>`'${e}'`).join(", ")}.`);return{value:e[a],source:"cli"}}return null!==n?{value:n,source:"config"}:{value:"headless-shell",source:"default"}},setConfig:e=>{n=e},type:"headless-shell"}},360087,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateColorSpace=r.colorSpaceOption=r.DEFAULT_COLOR_SPACE=r.validColorSpaces=void 0;let i=e.r(222260),a=e.r(758927);r.validColorSpaces=a.NoReactInternals.ENABLE_V5_BREAKING_CHANGES?["bt601","bt709","bt2020-ncl"]:["default","bt709","bt2020-ncl"],r.DEFAULT_COLOR_SPACE=a.NoReactInternals.ENABLE_V5_BREAKING_CHANGES?"bt709":"default";let n=r.DEFAULT_COLOR_SPACE,o="color-space";r.colorSpaceOption={name:"Color space",cliFlag:"color-space",description:()=>i.jsxs(i.Fragment,{children:["Color space to use for the video. Acceptable values:"," ",i.jsxs("code",{children:['"',r.DEFAULT_COLOR_SPACE,'"']}),"(default since 5.0),"," ",a.NoReactInternals.ENABLE_V5_BREAKING_CHANGES?i.jsxs("code",{children:['"',"bt601",'"',", "]}):i.jsxs(i.Fragment,{children:[i.jsxs("code",{children:['"',"bt709",'"']})," ","(since v4.0.28),"," "]}),i.jsxs("code",{children:['"',"bt2020-ncl",'"']})," ","(since v4.0.88),"," ",i.jsxs("code",{children:['"',"bt2020-cl",'"']})," ","(since v4.0.88), .",i.jsx("br",{}),"For best color accuracy, it is recommended to also use"," ",i.jsxs("code",{children:['"',"png",'"']})," ","as the image format to have accurate color transformations throughout.",i.jsx("br",{}),"Only since v4.0.83, colorspace conversion is actually performed, previously it would only tag the metadata of the video."]}),docLink:"https://www.remotion.dev/docs/renderer/render-media#colorspace",ssrName:"colorSpace",type:r.DEFAULT_COLOR_SPACE,getValue:({commandLine:e})=>void 0!==e[o]?{source:"cli",value:e[o]}:n!==r.DEFAULT_COLOR_SPACE?{source:"config",value:n}:{source:"default",value:r.DEFAULT_COLOR_SPACE},setConfig:e=>{n=null!=e?e:r.DEFAULT_COLOR_SPACE}},r.validateColorSpace=e=>{if(!r.validColorSpaces.includes(e))throw Error(`Expected one of ${r.validColorSpaces.map(e=>`"${e}"`).join(", ")} for ${r.colorSpaceOption.ssrName} but got "${e}"`)}},837698,(e,t,r)=>{"use strict";let i;Object.defineProperty(r,"__esModule",{value:!0}),r.crfOption=r.validateCrf=void 0;let a=e.r(222260);r.validateCrf=e=>{if("number"!=typeof e&&void 0!==e)throw TypeError("The CRF must be a number or undefined.")},r.crfOption={name:"CRF",cliFlag:"crf",description:()=>a.jsx(a.Fragment,{children:"No matter which codec you end up using, there's always a tradeoff between file size and video quality. You can control it by setting the CRF (Constant Rate Factor). The lower the number, the better the quality, the higher the number, the smaller the file is  of course at the cost of quality."}),ssrName:"crf",docLink:"https://www.remotion.dev/docs/encoding/#controlling-quality-using-the-crf-setting",type:0,getValue:({commandLine:e})=>void 0!==e.crf?((0,r.validateCrf)(e.crf),{source:"cli",value:e.crf}):null!==i?{source:"config",value:i}:{source:"default",value:void 0},setConfig:e=>{(0,r.validateCrf)(e),i=e}}},30822,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.enableCrossSiteIsolationOption=void 0;let i=e.r(222260),a=!1,n="cross-site-isolation";r.enableCrossSiteIsolationOption={name:"Enable Cross-Site Isolation",cliFlag:n,description:()=>i.jsxs(i.Fragment,{children:["Enable Cross-Site Isolation in the Studio (sets Cross-Origin-Opener-Policy and Cross-Origin-Embedder-Policy HTTP headers, required for"," ",i.jsx("code",{children:"@remotion/whisper-web"}),")."]}),ssrName:null,docLink:"https://www.remotion.dev/docs/config#setenablecrosssiteisolation",type:!1,getValue:({commandLine:e})=>void 0!==e[n]?{value:e[n],source:"cli"}:{value:a,source:"config"},setConfig(e){a=e}}},255972,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.darkModeOption=void 0;let i=e.r(222260),a=!1,n="dark-mode";r.darkModeOption={name:"Dark Mode",cliFlag:n,description:()=>i.jsxs(i.Fragment,{children:["Whether Chromium should pretend to be in dark mode by emulating the media feature 'prefers-color-scheme: dark'. Default is"," ",i.jsx("code",{children:String(!1)}),"."]}),ssrName:"darkMode",docLink:"https://www.remotion.dev/docs/chromium-flags#--dark-mode",type:!1,getValue:({commandLine:e})=>void 0!==e[n]?{source:"cli",value:e[n]}:!1!==a?{source:"config",value:a}:{source:"default",value:!1},setConfig:e=>{a=e}}},139799,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deleteAfterOption=void 0;let i=e.r(222260),a="delete-after",n=null;r.deleteAfterOption={name:"Lambda render expiration",cliFlag:a,description:()=>i.jsxs(i.Fragment,{children:["Automatically delete the render after a certain period. Accepted values are ",i.jsx("code",{children:"1-day"}),", ",i.jsx("code",{children:"3-days"}),", ",i.jsx("code",{children:"7-days"})," and"," ",i.jsx("code",{children:"30-days"}),".",i.jsx("br",{})," For this to work, your bucket needs to have"," ",i.jsx("a",{href:"/docs/lambda/autodelete",children:"lifecycles enabled"}),"."]}),ssrName:"deleteAfter",docLink:"https://www.remotion.dev/docs/lambda/autodelete",type:"1-day",getValue:({commandLine:e})=>void 0!==e[a]?{source:"cli",value:e[a]}:null!==n?{source:"config",value:n}:{source:"default",value:null},setConfig:e=>{n=e}}},265768,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.disableGitSourceOption=void 0;let i="disable-git-source";r.disableGitSourceOption={cliFlag:i,description:()=>"Disables the Git Source being connected to the Remotion Studio. Clicking on stack traces and certain menu items will be disabled.",docLink:"https://remotion.dev/docs/bundle",getValue:({commandLine:e})=>e[i]?{source:"cli",value:e[i]}:{source:"default",value:!1},name:"Disable Git source",setConfig:()=>{throw Error("Not implemented")},ssrName:"disableGitSource",type:!1}},130826,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.disallowParallelEncodingOption=void 0;let i=e.r(222260),a=!1,n="disallow-parallel-encoding";r.disallowParallelEncodingOption={name:"Disallow parallel encoding",cliFlag:n,description:()=>i.jsx(i.Fragment,{children:"Disallows the renderer from doing rendering frames and encoding at the same time. This makes the rendering process more memory-efficient, but possibly slower."}),ssrName:"disallowParallelEncoding",docLink:"https://www.remotion.dev/docs/config#setdisallowparallelencoding",type:!1,getValue:({commandLine:e})=>void 0!==e[n]?{value:e[n],source:"cli"}:!1!==a?{value:a,source:"config"}:{value:!1,source:"default"},setConfig(e){a=e}}},88104,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.enableLambdaInsights=void 0;let i=e.r(222260),a="enable-lambda-insights",n=!1;r.enableLambdaInsights={name:"Enable Lambda Insights",cliFlag:a,description:()=>i.jsxs(i.Fragment,{children:["Enable"," ",i.jsx("a",{href:"https://remotion.dev/docs/lambda/insights",children:"Lambda Insights in AWS CloudWatch"}),". For this to work, you may have to update your role permission."]}),ssrName:"enableLambdaInsights",docLink:"https://www.remotion.dev/docs/lambda/insights",type:!1,setConfig:e=>{n=e},getValue:({commandLine:e})=>void 0!==e[a]?{value:e[a],source:"cli"}:n?{value:n,source:"config"}:{value:!1,source:"default"}}},923147,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.enableMultiprocessOnLinuxOption=void 0;let i=e.r(222260),a=!0,n="enable-multiprocess-on-linux";r.enableMultiprocessOnLinuxOption={name:"Enable Multiprocess on Linux",cliFlag:n,description:()=>i.jsxs(i.Fragment,{children:["Removes the ",i.jsx("code",{children:"--single-process"})," flag that gets passed to Chromium on Linux by default. This will make the render faster because multiple processes can be used, but may cause issues with some Linux distributions or if window server libraries are missing.",i.jsx("br",{}),"Default: ",i.jsx("code",{children:"false"})," until v4.0.136, then ",i.jsx("code",{children:"true"})," from v4.0.137 on because newer Chrome versions ","don't"," allow rendering with the ",i.jsx("code",{children:"--single-process"})," flag. ",i.jsx("br",{}),"This flag will be removed in Remotion v5.0."]}),ssrName:"chromiumOptions.enableMultiprocessOnLinux",docLink:"https://www.remotion.dev/docs/chromium-flags",type:!1,getValue:({commandLine:e})=>void 0!==e[n]?{source:"cli",value:e[n]}:!1!==a?{source:"config",value:a}:{source:"default",value:!0},setConfig:e=>{a=e}}},598973,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.encodingBufferSizeOption=void 0;let i=e.r(222260),a=null,n="buffer-size";r.encodingBufferSizeOption={name:"FFmpeg -bufsize flag",cliFlag:n,description:()=>i.jsxs(i.Fragment,{children:["The value for the ",i.jsx("code",{children:"-bufsize"})," flag of FFmpeg. Should be used in conjunction with the encoding max rate flag."]}),ssrName:"encodingBufferSize",docLink:"https://www.remotion.dev/docs/renderer/render-media#encodingbuffersize",type:"",getValue:({commandLine:e})=>void 0!==e[n]?{value:e[n],source:"cli"}:null!==a?{value:a,source:"config"}:{value:null,source:"default"},setConfig:e=>{a=e}}},417907,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.encodingMaxRateOption=void 0;let i=e.r(222260),a=null,n="max-rate";r.encodingMaxRateOption={name:"FFmpeg -maxrate flag",cliFlag:n,description:()=>i.jsxs(i.Fragment,{children:["The value for the ",i.jsx("code",{children:"-maxrate"})," flag of FFmpeg. Should be used in conjunction with the encoding buffer size flag."]}),ssrName:"encodingMaxRate",docLink:"https://www.remotion.dev/docs/renderer/render-media#encodingmaxrate",type:"",getValue:({commandLine:e})=>void 0!==e[n]?{value:e[n],source:"cli"}:null!==a?{value:a,source:"config"}:{value:null,source:"default"},setConfig:e=>{a=e}}},270634,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.enforceAudioOption=void 0;let i=e.r(222260),a=!1,n="enforce-audio-track";r.enforceAudioOption={name:"Enforce Audio Track",cliFlag:n,description:()=>i.jsx(i.Fragment,{children:"Render a silent audio track if there would be none otherwise."}),ssrName:"enforceAudioTrack",docLink:"https://www.remotion.dev/docs/config#setenforceaudiotrack-",type:!1,getValue:({commandLine:e})=>e[n]?{source:"cli",value:!0}:!1!==a?{source:"config",value:a}:{source:"default",value:!1},setConfig:e=>{a=e}}},505464,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.experimentalClientSideRenderingOption=void 0;let i=e.r(222260),a=!1,n="enable-experimental-client-side-rendering";r.experimentalClientSideRenderingOption={name:"Enable Experimental Client-Side Rendering",cliFlag:n,description:()=>i.jsx(i.Fragment,{children:"Enable WIP client-side rendering in the Remotion Studio. See https://www.remotion.dev/docs/client-side-rendering/ for notes."}),ssrName:null,docLink:"https://www.remotion.dev/docs/client-side-rendering",type:!1,getValue:({commandLine:e})=>void 0!==e[n]?{value:a=!0,source:"cli"}:{value:a,source:"config"},setConfig(e){a=e}}},987309,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.folderExpiryOption=void 0;let i=e.r(222260),a=null,n="enable-folder-expiry";r.folderExpiryOption={name:"Lambda render expiration",cliFlag:n,description:()=>i.jsxs(i.Fragment,{children:["When deploying sites, enable or disable S3 Lifecycle policies which allow for renders to auto-delete after a certain time. Default is"," ",i.jsx("code",{children:"null"}),", which does not change any lifecycle policies of the S3 bucket. See: ",i.jsx("a",{href:"/docs/lambda/autodelete",children:"Lambda autodelete"}),"."]}),ssrName:"enableFolderExpiry",docLink:"https://www.remotion.dev/docs/lambda/autodelete",type:!1,getValue:({commandLine:e})=>void 0!==e[n]?{source:"cli",value:e[n]}:null!==a?{source:"config",value:a}:{source:"default",value:null},setConfig:e=>{a=e}}},481291,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.forSeamlessAacConcatenationOption=r.getForSeamlessAacConcatenation=void 0;let i=e.r(222260),a=!1;r.getForSeamlessAacConcatenation=()=>a;let n="for-seamless-aac-concatenation";r.forSeamlessAacConcatenationOption={name:"For seamless AAC concatenation",cliFlag:n,description:()=>i.jsxs(i.Fragment,{children:["If enabled, the audio is trimmed to the nearest AAC frame, which is required for seamless concatenation of AAC files. This is a requirement if you later want to combine multiple video snippets seamlessly.",i.jsx("br",{}),i.jsx("br",{})," This option is used internally. There is currently no documentation yet for to concatenate the audio chunks."]}),docLink:"https://remotion.dev/docs/renderer",getValue:({commandLine:e})=>e[n]?{source:"cli",value:!0}:!1!==a?{source:"config",value:a}:{source:"default",value:!1},setConfig:e=>{a=e},ssrName:"forSeamlessAacConcatenation",type:!1}},964282,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateOpenGlRenderer=r.glOption=r.setChromiumOpenGlRenderer=r.getChromiumOpenGlRenderer=r.DEFAULT_OPENGL_RENDERER=r.validOpenGlRenderers=void 0;let i=e.r(222260);r.validOpenGlRenderers=["swangle","angle","egl","swiftshader","vulkan","angle-egl"],r.DEFAULT_OPENGL_RENDERER=null;let a=r.DEFAULT_OPENGL_RENDERER;r.getChromiumOpenGlRenderer=()=>a,r.setChromiumOpenGlRenderer=e=>{(0,r.validateOpenGlRenderer)(e),a=e};let n=()=>i.jsxs("details",{style:{fontSize:"0.9em",marginBottom:"1em"},children:[i.jsx("summary",{children:"Changelog"}),i.jsxs("ul",{children:[i.jsxs("li",{children:["From Remotion v2.6.7 until v3.0.7, the default for Remotion Lambda was"," ",i.jsx("code",{children:"swiftshader"}),", but from v3.0.8 the default is"," ",i.jsx("code",{children:"swangle"})," (Swiftshader on Angle) since Chrome 101 added support for it."]}),i.jsxs("li",{children:["From Remotion v2.4.3 until v2.6.6, the default was ",i.jsx("code",{children:"angle"}),", however it turns out to have a small memory leak that could crash long Remotion renders."]})]})]});r.glOption={cliFlag:"gl",docLink:"https://www.remotion.dev/docs/chromium-flags#--gl",name:"OpenGL renderer",type:"angle",ssrName:"gl",description:()=>i.jsxs(i.Fragment,{children:[i.jsx(n,{}),i.jsxs("p",{children:["Select the OpenGL renderer backend for Chromium. ",i.jsx("br",{}),"Accepted values:"]}),i.jsxs("ul",{children:[i.jsx("li",{children:i.jsx("code",{children:'"angle"'})}),i.jsx("li",{children:i.jsx("code",{children:'"egl"'})}),i.jsx("li",{children:i.jsx("code",{children:'"swiftshader"'})}),i.jsx("li",{children:i.jsx("code",{children:'"swangle"'})}),i.jsxs("li",{children:[i.jsx("code",{children:'"vulkan"'})," (",i.jsx("em",{children:"from Remotion v4.0.41"}),")"]}),i.jsxs("li",{children:[i.jsx("code",{children:'"angle-egl"'})," (",i.jsx("em",{children:"from Remotion v4.0.51"}),")"]})]}),i.jsxs("p",{children:["The default is ",i.jsx("code",{children:"null"}),", letting Chrome decide, except on Lambda where the default is ",i.jsx("code",{children:'"swangle"'})]})]}),getValue:({commandLine:e})=>e.gl?((0,r.validateOpenGlRenderer)(e.gl),{value:e.gl,source:"cli"}):a!==r.DEFAULT_OPENGL_RENDERER?{value:a,source:"config"}:{value:r.DEFAULT_OPENGL_RENDERER,source:"default"},setConfig:e=>{(0,r.validateOpenGlRenderer)(e),a=e}},r.validateOpenGlRenderer=e=>{if(null===e)return null;if(!r.validOpenGlRenderers.includes(e))throw TypeError(`${e} is not a valid GL backend. Accepted values: ${r.validOpenGlRenderers.join(", ")}`);return e}},664217,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hardwareAccelerationOption=r.getHardwareAcceleration=r.hardwareAccelerationOptions=void 0,r.hardwareAccelerationOptions=["disable","if-possible","required"];let i="hardware-acceleration",a=null;r.getHardwareAcceleration=()=>a,r.hardwareAccelerationOption={name:"Hardware Acceleration",cliFlag:i,description:()=>`
			One of
			${new Intl.ListFormat("en",{type:"disjunction"}).format(r.hardwareAccelerationOptions.map(e=>JSON.stringify(e)))}
			. Default "disable". Encode using a hardware-accelerated encoder if
			available. If set to "required" and no hardware-accelerated encoder is
			available, then the render will fail.
		`,ssrName:"hardwareAcceleration",docLink:"https://www.remotion.dev/docs/encoding",type:"disable",getValue:({commandLine:e})=>{if(void 0!==e[i]){let t=e[i];if(!r.hardwareAccelerationOptions.includes(t))throw Error(`Invalid value for --${i}: ${t}`);return{source:"cli",value:t}}return null!==a?{source:"config",value:a}:{source:"default",value:"disable"}},setConfig:e=>{if(!r.hardwareAccelerationOptions.includes(e))throw Error(`Invalid value for --${i}: ${e}`);a=e}}},230290,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.headlessOption=void 0;let i=e.r(222260),a=!0,n="disable-headless";r.headlessOption={name:"Disable Headless Mode",cliFlag:n,description:()=>i.jsxs(i.Fragment,{children:["Deprecated - will be removed in 5.0.0. With the migration to"," ",i.jsx("a",{href:"/docs/miscellaneous/chrome-headless-shell",children:"Chrome Headless Shell"}),", this option is not functional anymore.",i.jsx("br",{}),i.jsx("br",{})," If disabled, the render will open an actual Chrome window where you can see the render happen. The default is headless mode."]}),ssrName:"headless",docLink:"https://www.remotion.dev/docs/chromium-flags#--disable-headless",type:!1,getValue:({commandLine:e})=>void 0!==e[n]?{source:"cli",value:!e[n]}:!0!==a?{source:"config",value:a}:{source:"default",value:a},setConfig:e=>{a=e}}},306328,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.imageSequencePatternOption=void 0;let i=e.r(222260),a="image-sequence-pattern",n=null;r.imageSequencePatternOption={name:"Image Sequence Pattern",cliFlag:a,ssrName:"imageSequencePattern",description:()=>i.jsxs(i.Fragment,{children:["Pattern for naming image sequence files. Supports ",i.jsx("code",{children:"[frame]"})," for the zero-padded frame number and ",i.jsx("code",{children:"[ext]"})," for the file extension."]}),docLink:null,type:"string",getValue:({commandLine:e})=>null!==n?{value:n,source:"config"}:{value:e[a],source:"cli"},setConfig:e=>{n=e}}},258625,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isProductionOption=void 0;let i=e.r(222260),a="is-production",n=null;r.isProductionOption={name:"Is Production",cliFlag:a,description:()=>i.jsxs(i.Fragment,{children:["Pass ",i.jsx("code",{children:"false"})," if this a development render to not count it as a billable render on remotion.pro. Only can be used in conjuction with"," ",i.jsx("code",{children:"licenseKey"}),"."]}),ssrName:"isProduction",docLink:"https://www.remotion.dev/docs/licensing",getValue:({commandLine:e})=>void 0!==e[a]?{source:"cli",value:e[a]}:null!==n?{source:"config",value:n}:{source:"default",value:null},setConfig:e=>{n=e},type:!1}},793876,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.jpegQualityOption=r.getJpegQuality=r.setJpegQuality=void 0;let i=e.r(222260),a=e.r(151222),n=a.DEFAULT_JPEG_QUALITY,o=n;r.setJpegQuality=e=>{if((0,a.validateJpegQuality)(e),0===e||void 0===e){o=n;return}o=e},r.getJpegQuality=()=>o;let s="jpeg-quality";r.jpegQualityOption={name:"JPEG Quality",cliFlag:s,description:()=>i.jsx(i.Fragment,{children:"Sets the quality of the generated JPEG images. Must be an integer between 0 and 100. Default: 80."}),ssrName:"jpegQuality",docLink:"https://www.remotion.dev/docs/renderer/render-media#jpeg-quality",type:0,setConfig:r.setJpegQuality,getValue:({commandLine:e})=>void 0!==e[s]?((0,a.validateJpegQuality)(e[s]),{source:"cli",value:e[s]}):o!==n?{source:"config",value:o}:{source:"default",value:n}}},872623,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.keyboardShortcutsOption=void 0;let i=e.r(222260),a=!0,n="disable-keyboard-shortcuts";r.keyboardShortcutsOption={name:"Disable or Enable keyboard shortcuts",cliFlag:n,description:()=>i.jsx(i.Fragment,{children:"Enable or disable keyboard shortcuts in the Remotion Studio."}),ssrName:null,docLink:"https://www.remotion.dev/docs/config#setkeyboardshortcutsenabled",type:!1,getValue:({commandLine:e})=>void 0!==e[n]?{value:a=!1===e[n],source:"cli"}:{value:a,source:"config"},setConfig(e){a=e}}},495736,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.audioLatencyHintOption=void 0;let i=e.r(222260),a="audio-latency-hint",n=null;r.audioLatencyHintOption={name:"Audio Latency Hint",cliFlag:a,description:()=>i.jsxs(i.Fragment,{children:["Sets the"," ",i.jsx("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/AudioContext/AudioContext",children:"audio latency"})," ","hint for the global ",i.jsx("code",{children:"AudioContext"})," context that Remotion uses to play audio.",i.jsx("br",{}),"Possible values: ",i.jsx("code",{children:"interactive"}),", ",i.jsx("code",{children:"balanced"}),","," ",i.jsx("code",{children:"playback"})]}),ssrName:"audioLatencyHint",docLink:"https://www.remotion.dev/docs/renderer/render-media",type:"interactive",getValue:({commandLine:e})=>{let t=e[a];return void 0!==t?{value:t,source:"cli"}:null!==n?{value:n,source:"config"}:{value:null,source:"default"}},setConfig:e=>{n=e}}},518595,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.licenseKeyOption=void 0;let i=e.r(222260),a=null,n="license-key";r.licenseKeyOption={name:"License key",cliFlag:n,description:()=>i.jsxs(i.Fragment,{children:["License key for sending a usage event using"," ",i.jsx("code",{children:"@remotion/licensing"}),"."]}),ssrName:"licenseKey",docLink:"https://www.remotion.dev/docs/licensing",type:null,getValue:({commandLine:e})=>void 0!==e[n]?{source:"cli",value:e[n]}:{source:"default",value:a},setConfig:e=>{a=e}}},940303,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.logLevelOption=void 0;let i=e.r(222260),a=e.r(17888),n="info";r.logLevelOption={cliFlag:"log",name:"Log Level",ssrName:"logLevel",description:()=>i.jsxs(i.Fragment,{children:["One of ",i.jsx("code",{children:"trace"}),", ",i.jsx("code",{children:"verbose"}),", ",i.jsx("code",{children:"info"}),","," ",i.jsx("code",{children:"warn"}),", ",i.jsx("code",{children:"error"}),".",i.jsx("br",{})," Determines how much info is being logged to the console.",i.jsx("br",{}),i.jsx("br",{})," Default ",i.jsx("code",{children:"info"}),"."]}),docLink:"https://www.remotion.dev/docs/troubleshooting/debug-failed-render",getValue:({commandLine:e})=>{if(e.log){if(!(0,a.isValidLogLevel)(e.log))throw Error(`Invalid \`--log\` value passed. Accepted values: ${a.logLevels.map(e=>`'${e}'`).join(", ")}.`);return{value:e.log,source:"cli"}}return"info"!==n?{value:n,source:"config"}:{value:"info",source:"default"}},setConfig:e=>{n=e},type:"error"}},853389,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.metadataOption=void 0;let i=e.r(222260),a={},n="metadata";r.metadataOption={name:"Metadata",cliFlag:n,description:e=>"ssr"===e?i.jsxs(i.Fragment,{children:["An object containing metadata to be embedded in the video. See"," ",i.jsx("a",{href:"/docs/metadata",children:"here"})," for which metadata is accepted."]}):i.jsxs(i.Fragment,{children:["Metadata to be embedded in the video. See"," ",i.jsx("a",{href:"/docs/metadata",children:"here"})," for which metadata is accepted.",i.jsx("br",{}),"The parameter must be in the format of ",i.jsx("code",{children:"--metadata key=value"})," ","and can be passed multiple times."]}),docLink:"https://www.remotion.dev/docs/metadata",type:{},getValue:({commandLine:e})=>{if(void 0!==e[n]){let t=e[n];return{source:"config",value:Object.fromEntries(("string"==typeof t?[t]:t).map(e=>{if(!e.includes("="))throw Error(`"metadata" must be in the format of key=value, but got ${e}`);let t=e.split("=");if(2!==t.length)throw Error(`"metadata" must be in the format of key=value, but got ${e}`);return[t[0],t[1]]}))}}return{source:"config",value:a}},setConfig:e=>{a=e},ssrName:"metadata"}},236287,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mutedOption=void 0;let i=e.r(222260),a=!1,n="muted";r.mutedOption={name:"Muted",cliFlag:n,description:()=>i.jsx(i.Fragment,{children:"The Audio of the video will be omitted."}),ssrName:"muted",docLink:"https://www.remotion.dev/docs/audio/muting",type:!1,getValue:({commandLine:e})=>null!==e[n]?{source:"cli",value:e[n]}:{source:"config",value:a},setConfig:()=>{a=!0}}},381313,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.numberOfGifLoopsOption=void 0;let i=e.r(222260),a=null,n=e=>{if(null!==e&&"number"!=typeof e)throw Error("--number-of-gif-loops flag must be a number.")},o="number-of-gif-loops";r.numberOfGifLoopsOption={name:"Number of GIF loops",cliFlag:o,description:()=>i.jsxs(i.Fragment,{children:["Allows you to set the number of loops as follows:",i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("code",{children:"null"})," (or omitting in the CLI) plays the GIF indefinitely."]}),i.jsxs("li",{children:[i.jsx("code",{children:"0"})," disables looping"]}),i.jsxs("li",{children:[i.jsx("code",{children:"1"})," loops the GIF once (plays twice in total)"]}),i.jsxs("li",{children:[i.jsx("code",{children:"2"})," loops the GIF twice (plays three times in total) and so on."]})]})]}),ssrName:"numberOfGifLoops",docLink:"https://www.remotion.dev/docs/render-as-gif#changing-the-number-of-loops",type:0,getValue:({commandLine:e})=>void 0!==e[o]?(n(e[o]),{value:e[o],source:"cli"}):null!==a?{value:a,source:"config"}:{value:null,source:"default"},setConfig:e=>{n(e),a=e}}},483867,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateOffthreadVideoCacheSizeInBytes=r.offthreadVideoCacheSizeInBytesOption=r.getOffthreadVideoCacheSizeInBytes=void 0;let i=e.r(222260),a=null;r.getOffthreadVideoCacheSizeInBytes=()=>a;let n="offthreadvideo-cache-size-in-bytes";r.offthreadVideoCacheSizeInBytesOption={name:"OffthreadVideo cache size",cliFlag:n,description:()=>i.jsxs(i.Fragment,{children:["From v4.0, Remotion has a cache for"," ",i.jsx("a",{href:"https://remotion.dev/docs/offthreadvideo",children:i.jsx("code",{children:"<OffthreadVideo>"})})," ","frames. The default is ",i.jsx("code",{children:"null"}),", corresponding to half of the system memory available when the render starts.",i.jsx("br",{})," This option allows to override the size of the cache. The higher it is, the faster the render will be, but the more memory will be used.",i.jsx("br",{}),"The used value will be printed when running in verbose mode.",i.jsx("br",{}),"Default: ",i.jsx("code",{children:"null"})]}),ssrName:"offthreadVideoCacheSizeInBytes",docLink:"https://www.remotion.dev/docs/offthreadvideo",type:0,getValue:({commandLine:e})=>void 0!==e[n]?{source:"cli",value:e[n]}:null!==a?{source:"config",value:a}:{source:"default",value:null},setConfig:e=>{a=null!=e?e:null}},r.validateOffthreadVideoCacheSizeInBytes=e=>{if(null!=e){if("number"!=typeof e)throw Error("Expected a number");if(e<0||0===e)throw Error("Expected a positive number");if(Number.isNaN(e))throw Error("Expected a number");if(!Number.isFinite(e))throw Error("Expected a finite number");if(e%1!=0)throw Error("Expected a whole number")}}},718894,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_RENDER_FRAMES_OFFTHREAD_VIDEO_THREADS=r.offthreadVideoThreadsOption=r.getOffthreadVideoThreads=void 0;let i=e.r(222260),a=null;r.getOffthreadVideoThreads=()=>a;let n="offthreadvideo-video-threads";r.offthreadVideoThreadsOption={name:"OffthreadVideo threads",cliFlag:n,description:()=>i.jsxs(i.Fragment,{children:["The number of threads that",i.jsx("a",{href:"https://remotion.dev/docs/offthreadvideo",children:i.jsx("code",{children:"<OffthreadVideo>"})})," ","can start to extract frames. The default is"," ",r.DEFAULT_RENDER_FRAMES_OFFTHREAD_VIDEO_THREADS,". Increase carefully, as too many threads may cause instability."]}),ssrName:"offthreadVideoThreads",docLink:"https://www.remotion.dev/docs/offthreadvideo",type:0,getValue:({commandLine:e})=>void 0!==e[n]?{source:"cli",value:e[n]}:null!==a?{source:"config",value:a}:{source:"default",value:null},setConfig:e=>{a=null!=e?e:null}},r.DEFAULT_RENDER_FRAMES_OFFTHREAD_VIDEO_THREADS=2},942468,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.onBrowserDownloadOption=void 0;let i=e.r(222260);r.onBrowserDownloadOption={name:"Browser download callback function",cliFlag:"on-browser-download",description:()=>i.jsxs(i.Fragment,{children:["Gets called when no compatible local browser is detected on the system and this API needs to download a browser. Return a callback to observe progress."," ",i.jsx("a",{href:"/docs/renderer/ensure-browser#onbrowserdownload",children:"See here for how to use this option."})]}),ssrName:"onBrowserDownload",docLink:"https://www.remotion.dev/docs/renderer/ensure-browser",type:void 0,getValue:()=>{throw Error("does not support config file")},setConfig:()=>{throw Error("does not support config file")}}},579444,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.overwriteOption=void 0;let i=e.r(222260),a=null,n="overwrite",o=e=>{if("boolean"!=typeof e)throw Error(`overwriteExisting must be a boolean but got ${typeof e} (${e})`)};r.overwriteOption={name:"Overwrite output",cliFlag:n,description:()=>i.jsxs(i.Fragment,{children:["If set to ",i.jsx("code",{children:"false"}),", will prevent rendering to a path that already exists. Default is ",i.jsx("code",{children:"true"}),"."]}),ssrName:"overwrite",docLink:"https://www.remotion.dev/docs/config#setoverwriteoutput",type:!1,getValue:({commandLine:e},t)=>void 0!==e[n]?(o(e[n]),{source:"cli",value:e[n]}):null!==a?{source:"config",value:a}:{source:"default",value:t},setConfig:e=>{o(e),a=e}}},394715,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.preferLosslessAudioOption=void 0;let i=e.r(222260),a="prefer-lossless",n=!1;r.preferLosslessAudioOption={name:"Prefer lossless",cliFlag:a,description:()=>i.jsxs(i.Fragment,{children:["Uses a lossless audio codec, if one is available for the codec. If you set",i.jsx("code",{children:"audioCodec"}),", it takes priority over"," ",i.jsx("code",{children:"preferLossless"}),"."]}),docLink:"https://www.remotion.dev/docs/encoding",type:!1,ssrName:"preferLossless",getValue:({commandLine:e})=>e[a]?{value:!0,source:"cli"}:!0===n?{value:!0,source:"config"}:{value:!1,source:"default"},setConfig:e=>{n=e}}},956290,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.publicDirOption=void 0;let i=e.r(222260),a="public-dir",n=null;r.publicDirOption={name:"Public Directory",cliFlag:a,description:()=>i.jsxs(i.Fragment,{children:["Define the location of the"," ",i.jsx("a",{href:"/docs/terminology/public-dir",children:i.jsx("code",{children:"public/ directory"})}),". If not defined, Remotion will assume the location is the `public` folder in your Remotion root."]}),ssrName:"publicDir",docLink:"https://www.remotion.dev/docs/terminology/public-dir",getValue:({commandLine:e})=>void 0!==e[a]?{source:"cli",value:e[a]}:null!==n?{source:"config",value:n}:{source:"default",value:null},setConfig:e=>{n=e},type:""}},292342,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.publicLicenseKeyOption=void 0;let i=e.r(222260),a="public-license-key",n=null;r.publicLicenseKeyOption={name:"Public License Key",cliFlag:a,description:()=>i.jsxs(i.Fragment,{children:['The public license key for your company license, obtained from the "Usage" tab on ',i.jsx("a",{href:"https://remotion.pro/dashboard",children:"remotion.pro"}),'. If you are eligible for the free license, pass "free-license".']}),ssrName:"publicLicenseKey",docLink:"https://www.remotion.dev/docs/licensing",getValue:({commandLine:e})=>void 0!==e[a]?{source:"cli",value:e[a]}:null!==n?{source:"config",value:n}:{source:"default",value:null},setConfig:e=>{if(e&&"free-license"!==e&&!e.startsWith("rm_pub_"))throw Error('Invalid public license key. It must start with "rm_pub_" or be "free-license".');n=e},type:null}},26907,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.publicPathOption=void 0;let i=e.r(222260),a="public-path",n=null;r.publicPathOption={name:"Public Path",cliFlag:a,description:()=>i.jsxs(i.Fragment,{children:["The path of the URL where the bundle is going to be hosted. By default it is ",i.jsx("code",{children:"/"}),", meaning that the bundle is going to be hosted at the root of the domain (e.g. ",i.jsx("code",{children:"https://localhost:3000/"}),"). If you are deploying to a subdirectory (e.g. ",i.jsx("code",{children:"/sites/my-site/"}),"), you should set this to the subdirectory."]}),ssrName:"publicPath",docLink:"https://www.remotion.dev/docs/renderer",getValue:({commandLine:e})=>void 0!==e[a]?{source:"cli",value:e[a]}:null!==n?{source:"config",value:n}:{source:"default",value:null},setConfig:e=>{n=e},type:""}},706700,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.reproOption=void 0;let i=e.r(222260),a=!1,n="repro";r.reproOption={name:"Create reproduction",cliFlag:n,description:()=>i.jsx(i.Fragment,{children:"Create a ZIP that you can submit to Remotion if asked for a reproduction."}),ssrName:"repro",docLink:"https://www.remotion.dev/docs/render-media#repro",type:!1,getValue:({commandLine:e})=>void 0!==e[n]?{value:e[n],source:"cli"}:a?{value:a,source:"config"}:{value:!1,source:"default"},setConfig:e=>{a=e}}},358980,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.scaleOption=void 0;let i=e.r(222260),a=1,n="scale";r.scaleOption={name:"Scale",cliFlag:n,description:()=>i.jsxs(i.Fragment,{children:["Scales the output dimensions by a factor. For example, a 1280x720px frame will become a 1920x1080px frame with a scale factor of ",i.jsx("code",{children:"1.5"}),". See ",i.jsx("a",{href:"https://www.remotion.dev/docs/scaling",children:"Scaling"})," for more details."]}),ssrName:"scale",docLink:"https://www.remotion.dev/docs/scaling",type:0,getValue:({commandLine:e})=>{if(void 0!==e[n]){if("number"!=typeof e[n])throw Error("scale must be a number.");return{source:"cli",value:e[n]}}return null!==a?{source:"config",value:a}:{source:"default",value:1}},setConfig:e=>{a=e}}},933401,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.throwIfSiteExistsOption=void 0;let i="throw-if-site-exists";r.throwIfSiteExistsOption={cliFlag:i,description:()=>"Prevents accidential update of an existing site. If there are any files in the subfolder where the site should be placed, the function will throw.",docLink:"https://remotion.dev/docs/lambda/deploy-site",getValue:({commandLine:e})=>e[i]?{source:"cli",value:e[i]}:{source:"default",value:!1},name:"Throw if site exists",setConfig:()=>{throw Error("Not implemented")},ssrName:"throwIfSiteExists",type:!1}},802040,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.delayRenderTimeoutInMillisecondsOption=void 0;let i=e.r(222260),a=e.r(637667),n=a.DEFAULT_TIMEOUT,o=e=>{if("number"!=typeof e)throw Error("--timeout flag / setDelayRenderTimeoutInMilliseconds() must be a number, but got "+JSON.stringify(e))},s="timeout";r.delayRenderTimeoutInMillisecondsOption={name:"delayRender() timeout",cliFlag:s,description:()=>i.jsxs(i.Fragment,{children:["A number describing how long the render may take to resolve all"," ",i.jsx("a",{href:"https://remotion.dev/docs/delay-render",children:i.jsx("code",{children:"delayRender()"})})," ","calls"," ",i.jsx("a",{style:{fontSize:"inherit"},href:"https://remotion.dev/docs/timeout",children:"before it times out"}),". Default: ",i.jsx("code",{children:"30000"})]}),ssrName:"timeoutInMilliseconds",docLink:"https://www.remotion.dev/docs/timeout",type:0,getValue:({commandLine:e})=>void 0!==e[s]?{source:"cli",value:e[s]}:null!==n?(o(n),{source:"config",value:n}):{source:"default",value:a.DEFAULT_TIMEOUT},setConfig:e=>{o(e),n=e}}},485079,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.videoBitrateOption=void 0;let i=e.r(222260),a=null,n="video-bitrate";r.videoBitrateOption={name:"Video Bitrate",cliFlag:n,description:()=>i.jsxs(i.Fragment,{children:["Specify the target bitrate for the generated video. The syntax for FFmpeg","'","s",i.jsx("code",{children:"-b:v"})," parameter should be used. FFmpeg may encode the video in a way that will not result in the exact video bitrate specified. Example values: ",i.jsx("code",{children:"512K"})," for 512 kbps, ",i.jsx("code",{children:"1M"})," for 1 Mbps."]}),ssrName:"videoBitrate",docLink:"https://www.remotion.dev/docs/renderer/render-media#videobitrate",type:"",getValue:({commandLine:e})=>void 0!==e[n]?{source:"cli",value:e[n]}:null!==a?{source:"config",value:a}:{source:"default",value:null},setConfig:e=>{a=e}}},290073,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mediaCacheSizeInBytesOption=r.getMediaCacheSizeInBytes=void 0;let i=e.r(222260),a=null;r.getMediaCacheSizeInBytes=()=>a;let n="media-cache-size-in-bytes";r.mediaCacheSizeInBytesOption={name:"@remotion/media cache size",cliFlag:n,description:()=>i.jsxs(i.Fragment,{children:["Specify the maximum size of the cache that ",i.jsx("code",{children:"<Video>"})," and"," ",i.jsx("code",{children:"<Audio>"})," from ",i.jsx("code",{children:"@remotion/media"})," may use combined, in bytes. ",i.jsx("br",{}),"The default is half of the available system memory when the render starts."]}),ssrName:"mediaCacheSizeInBytes",docLink:"https://www.remotion.dev/docs/media/video#setting-the-cache-size",type:0,getValue:({commandLine:e})=>void 0!==e[n]?{source:"cli",value:e[n]}:null!==a?{source:"config",value:a}:{source:"default",value:null},setConfig:e=>{a=null!=e?e:null}}},470135,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.pathNormalize=void 0,r.pathNormalize=e=>{let t=typeof e;if("string"!==t)throw TypeError(`Expected a string, got a ${t}`);let r=e;if(0===r.length)return".";let i=47===r.charCodeAt(0),a=47===r.charCodeAt(r.length-1);return(0!==(r=((e,t)=>{let r,i="",a=0,n=-1,o=0;for(let s=0;s<=e.length;++s){if(s<e.length)r=e.charCodeAt(s);else if(47===r)break;else r=47;if(47===r){if(n===s-1||1===o);else if(n!==s-1&&2===o){if(i.length<2||2!==a||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2)){if(i.length>2){let e=i.lastIndexOf("/");if(e!==i.length-1){-1===e?(i="",a=0):a=(i=i.slice(0,e)).length-1-i.lastIndexOf("/"),n=s,o=0;continue}}else if(2===i.length||1===i.length){i="",a=0,n=s,o=0;continue}}t&&(i.length>0?i+="/..":i="..",a=2)}else i.length>0?i+="/"+e.slice(n+1,s):i=e.slice(n+1,s),a=s-n-1;n=s,o=0}else 46===r&&-1!==o?++o:o=-1}return i})(r=(e=>{try{return decodeURIComponent(e)}catch(t){return e}})(r),!i)).length||i||(r="."),r.length>0&&a&&(r+="/"),i)?"/"+r:r}},648677,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getExtensionOfFilename=void 0;let i=e.r(470135);r.getExtensionOfFilename=e=>{if(null===e)return null;let t=(0,i.pathNormalize)(e).split("."),r=t.length>=2,a=t.length;return r?t[a-1]:null}},328271,(e,t,r)=>{"use strict";let i;Object.defineProperty(r,"__esModule",{value:!0}),r.videoCodecOption=r.getOutputCodecOrUndefined=void 0;let a=e.r(222260),n=e.r(53892),o=e.r(696525),s=e.r(648677);r.getOutputCodecOrUndefined=()=>i;let l=e=>{var t,r;return null===e?{possible:[],default:null}:{default:null!=(t=o.defaultCodecsForFileExtension[e])?t:null,possible:null!=(r=(0,o.makeFileExtensionMap)()[e])?r:[]}},u="codec";r.videoCodecOption={name:"Codec",cliFlag:u,description:()=>a.jsx(a.Fragment,{children:"H264 works well in most cases, but sometimes it's worth going for a different codec. WebM achieves higher compression but is slower to render. WebM, GIF and ProRes support transparency."}),ssrName:"codec",docLink:"https://www.remotion.dev/docs/encoding/#choosing-a-codec",type:"",getValue:({commandLine:e},{compositionCodec:t,configFile:r,downloadName:i,outName:a,uiCodec:o})=>{if(o)return{value:o,source:"via UI"};let c=(0,s.getExtensionOfFilename)(i),d=(0,s.getExtensionOfFilename)(a),p=l(c),f=l(d);if(p.possible.length>0&&f.possible.length>0&&p.possible.join("")!==f.possible.join(""))throw TypeError(`The download name is ${i} but the output name is ${a}. The file extensions must match`);let h=e[u];if(h){if(p.possible.length>0&&-1===p.possible.indexOf(h))throw TypeError(`The download name is ${i} but --codec=${h} was passed. The download name implies a codec of ${p.possible.join(" or ")} which does not align with the --codec flag.`);if(f.possible.length>0&&-1===f.possible.indexOf(h))throw TypeError(`The out name is ${a} but --codec=${h} was passed. The out name implies a codec of ${f.possible.join(" or ")} which does not align with the --codec flag.`);return{value:h,source:"from --codec flag"}}return p.possible.length>0?{value:p.default,source:"derived from download name"}:f.possible.length>0?t&&f.possible.includes(t)?{value:t,source:"derived from out name + compositionCodec from calculateMetadata"}:r&&f.possible.includes(r)?{value:r,source:"derived from out name + config file"}:{value:f.default,source:"derived from out name"}:t?{value:t,source:"via calculateMetadata"}:r?{value:r,source:"Config file"}:{value:n.DEFAULT_CODEC,source:"default"}},setConfig:e=>{if(void 0===e){i=void 0;return}if(!n.validCodecs.includes(e))throw Error(`Codec must be one of the following: ${n.validCodecs.join(", ")}, but got ${e}`);i=e}}},350159,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.webhookCustomDataOption=void 0;let i=e.r(222260);r.webhookCustomDataOption={name:"Webhook custom data",cliFlag:"webhook-custom-data",description:e=>i.jsxs(i.Fragment,{children:["Pass up to 1,024 bytes of a JSON-serializable object to the webhook. This data will be included in the webhook payload."," ","cli"===e?"Alternatively, pass a file path pointing to a JSON file":null]}),ssrName:"customData",docLink:"https://www.remotion.dev/docs/lambda/webhooks",type:{},getValue:()=>{throw Error("Option resolution not implemented")},setConfig:()=>{throw Error("Not implemented")}}},454790,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.x264Option=r.validateSelectedCodecAndPresetCombination=r.x264PresetOptions=void 0;let i=e.r(222260);r.x264PresetOptions=["ultrafast","superfast","veryfast","faster","fast","medium","slow","slower","veryslow","placebo"];let a=null;r.validateSelectedCodecAndPresetCombination=({codec:e,x264Preset:t})=>{if(null!==t&&"h264"!==e&&"h264-mkv"!==e&&"h264-ts"!==e)throw TypeError(`You have set a x264 preset but the codec is "${e}". Set the codec to "h264" or remove the Preset profile.`);if(null!==t&&!r.x264PresetOptions.includes(t))throw TypeError(`The Preset profile "${t}" is not valid. Valid options are ${r.x264PresetOptions.map(e=>`"${e}"`).join(", ")}`)};let n="x264-preset";r.x264Option={name:"x264 Preset",cliFlag:n,description:()=>i.jsxs(i.Fragment,{children:["Sets a x264 preset profile. Only applies to videos rendered with"," ",i.jsx("code",{children:"h264"})," codec.",i.jsx("br",{}),"Possible values: ",i.jsx("code",{children:"superfast"}),", ",i.jsx("code",{children:"veryfast"}),","," ",i.jsx("code",{children:"faster"}),", ",i.jsx("code",{children:"fast"}),", ",i.jsx("code",{children:"medium"}),","," ",i.jsx("code",{children:"slow"}),", ",i.jsx("code",{children:"slower"}),", ",i.jsx("code",{children:"veryslow"}),","," ",i.jsx("code",{children:"placebo"}),".",i.jsx("br",{}),"Default: ",i.jsx("code",{children:"medium"})]}),ssrName:"x264Preset",docLink:"https://www.remotion.dev/docs/renderer/render-media",type:"fast",getValue:({commandLine:e})=>{let t=e[n];return void 0!==t?{value:t,source:"cli"}:null!==a?{value:a,source:"config"}:{value:null,source:"default"}},setConfig:e=>{a=e}}},80280,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.allOptions=void 0;let i=e.r(765381),a=e.r(438924),n=e.r(541076),o=e.r(387523),s=e.r(483089),l=e.r(908301),u=e.r(226977),c=e.r(360087),d=e.r(837698),p=e.r(30822),f=e.r(255972),h=e.r(139799),m=e.r(265768),g=e.r(130826),v=e.r(88104),y=e.r(923147),b=e.r(598973),x=e.r(417907),w=e.r(270634),S=e.r(505464),k=e.r(987309),C=e.r(481291),E=e.r(964282),_=e.r(664217),T=e.r(230290),P=e.r(306328),I=e.r(258625),A=e.r(793876),O=e.r(872623),M=e.r(495736),F=e.r(518595),R=e.r(940303),D=e.r(853389),j=e.r(236287),L=e.r(381313),B=e.r(483867),N=e.r(718894),$=e.r(942468),z=e.r(579444),U=e.r(394715),V=e.r(956290),H=e.r(292342),W=e.r(26907),q=e.r(706700),G=e.r(358980),Z=e.r(646301),K=e.r(933401),Q=e.r(802040),X=e.r(485079),J=e.r(290073),Y=e.r(328271),ee=e.r(350159),et=e.r(454790);r.allOptions={audioCodecOption:o.audioCodecOption,scaleOption:G.scaleOption,crfOption:d.crfOption,jpegQualityOption:A.jpegQualityOption,videoBitrateOption:X.videoBitrateOption,audioBitrateOption:n.audioBitrateOption,enforceAudioOption:w.enforceAudioOption,mutedOption:j.mutedOption,videoCodecOption:Y.videoCodecOption,offthreadVideoCacheSizeInBytesOption:B.offthreadVideoCacheSizeInBytesOption,offthreadVideoThreadsOption:N.offthreadVideoThreadsOption,webhookCustomDataOption:ee.webhookCustomDataOption,colorSpaceOption:c.colorSpaceOption,deleteAfterOption:h.deleteAfterOption,disallowParallelEncodingOption:g.disallowParallelEncodingOption,folderExpiryOption:k.folderExpiryOption,enableMultiprocessOnLinuxOption:y.enableMultiprocessOnLinuxOption,glOption:E.glOption,enableLambdaInsights:v.enableLambdaInsights,encodingMaxRateOption:x.encodingMaxRateOption,encodingBufferSizeOption:b.encodingBufferSizeOption,beepOnFinishOption:s.beepOnFinishOption,numberOfGifLoopsOption:L.numberOfGifLoopsOption,reproOption:q.reproOption,preferLosslessOption:U.preferLosslessAudioOption,x264Option:et.x264Option,logLevelOption:R.logLevelOption,delayRenderTimeoutInMillisecondsOption:Q.delayRenderTimeoutInMillisecondsOption,headlessOption:T.headlessOption,overwriteOption:z.overwriteOption,binariesDirectoryOption:l.binariesDirectoryOption,forSeamlessAacConcatenationOption:C.forSeamlessAacConcatenationOption,separateAudioOption:Z.separateAudioOption,publicPathOption:W.publicPathOption,publicDirOption:V.publicDirOption,onBrowserDownloadOption:$.onBrowserDownloadOption,throwIfSiteExistsOption:K.throwIfSiteExistsOption,disableGitSourceOption:m.disableGitSourceOption,metadataOption:D.metadataOption,hardwareAccelerationOption:_.hardwareAccelerationOption,chromeModeOption:u.chromeModeOption,apiKeyOption:i.apiKeyOption,licenseKeyOption:F.licenseKeyOption,audioLatencyHintOption:M.audioLatencyHintOption,enableCrossSiteIsolationOption:p.enableCrossSiteIsolationOption,imageSequencePatternOption:P.imageSequencePatternOption,mediaCacheSizeInBytesOption:J.mediaCacheSizeInBytesOption,darkModeOption:f.darkModeOption,publicLicenseKeyOption:H.publicLicenseKeyOption,isProductionOption:I.isProductionOption,askAIOption:a.askAIOption,experimentalClientSideRenderingOption:S.experimentalClientSideRenderingOption,keyboardShortcutsOption:O.keyboardShortcutsOption}},293264,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.optionsMap=void 0;let i=e.r(765381),a=e.r(541076),n=e.r(387523),o=e.r(908301),s=e.r(226977),l=e.r(360087),u=e.r(837698),c=e.r(139799),d=e.r(130826),p=e.r(598973),f=e.r(417907),h=e.r(270634),m=e.r(481291),g=e.r(664217),v=e.r(306328),y=e.r(793876),b=e.r(518595),x=e.r(940303),w=e.r(236287),S=e.r(381313),k=e.r(483867),C=e.r(718894),E=e.r(942468),_=e.r(394715),T=e.r(706700),P=e.r(358980),I=e.r(646301),A=e.r(933401),O=e.r(802040),M=e.r(485079),F=e.r(290073),R=e.r(328271),D=e.r(454790);r.optionsMap={renderMedia:{mediaCacheSizeInBytes:F.mediaCacheSizeInBytesOption,offthreadVideoCacheSizeInBytes:k.offthreadVideoCacheSizeInBytesOption,offthreadVideoThreads:C.offthreadVideoThreadsOption,videoBitrate:M.videoBitrateOption,numberOfGifLoops:S.numberOfGifLoopsOption,repro:T.reproOption,x264Preset:D.x264Option,audioBitrate:a.audioBitrateOption,colorSpace:l.colorSpaceOption,codec:R.videoCodecOption,disallowParallelEncoding:d.disallowParallelEncodingOption,jpegQuality:y.jpegQualityOption,encodingMaxRate:f.encodingMaxRateOption,encodingBufferSize:p.encodingBufferSizeOption,muted:w.mutedOption,logLevel:x.logLevelOption,timeoutInMilliseconds:O.delayRenderTimeoutInMillisecondsOption,binariesDirectory:o.binariesDirectoryOption,forSeamlessAacConcatenation:m.forSeamlessAacConcatenationOption,separateAudioTo:I.separateAudioOption,audioCodec:n.audioCodecOption,onBrowserDownload:E.onBrowserDownloadOption,hardwareAcceleration:g.hardwareAccelerationOption,chromeMode:s.chromeModeOption,licenseKey:b.licenseKeyOption},stitchFramesToVideo:{separateAudioTo:I.separateAudioOption,hardwareAcceleration:g.hardwareAccelerationOption},renderStill:{mediaCacheSizeInBytes:F.mediaCacheSizeInBytesOption,offthreadVideoCacheSizeInBytes:k.offthreadVideoCacheSizeInBytesOption,offthreadVideoThreads:C.offthreadVideoThreadsOption,jpegQuality:y.jpegQualityOption,logLevel:x.logLevelOption,timeoutInMilliseconds:O.delayRenderTimeoutInMillisecondsOption,binariesDirectory:o.binariesDirectoryOption,onBrowserDownload:E.onBrowserDownloadOption,chromeMode:s.chromeModeOption,apiKey:i.apiKeyOption,licenseKey:b.licenseKeyOption},getCompositions:{mediaCacheSizeInBytes:F.mediaCacheSizeInBytesOption,offthreadVideoCacheSizeInBytes:k.offthreadVideoCacheSizeInBytesOption,offthreadVideoThreads:C.offthreadVideoThreadsOption,logLevel:x.logLevelOption,timeoutInMilliseconds:O.delayRenderTimeoutInMillisecondsOption,binariesDirectory:o.binariesDirectoryOption,onBrowserDownload:E.onBrowserDownloadOption,chromeMode:s.chromeModeOption},selectComposition:{mediaCacheSizeInBytes:F.mediaCacheSizeInBytesOption,offthreadVideoCacheSizeInBytes:k.offthreadVideoCacheSizeInBytesOption,offthreadVideoThreads:C.offthreadVideoThreadsOption,logLevel:x.logLevelOption,timeoutInMilliseconds:O.delayRenderTimeoutInMillisecondsOption,binariesDirectory:o.binariesDirectoryOption,onBrowserDownload:E.onBrowserDownloadOption,chromeMode:s.chromeModeOption},renderFrames:{mediaCacheSizeInBytes:F.mediaCacheSizeInBytesOption,forSeamlessAacConcatenation:m.forSeamlessAacConcatenationOption,offthreadVideoCacheSizeInBytes:k.offthreadVideoCacheSizeInBytesOption,offthreadVideoThreads:C.offthreadVideoThreadsOption,jpegQuality:y.jpegQualityOption,logLevel:x.logLevelOption,timeoutInMilliseconds:O.delayRenderTimeoutInMillisecondsOption,binariesDirectory:o.binariesDirectoryOption,onBrowserDownload:E.onBrowserDownloadOption,chromeMode:s.chromeModeOption,imageSequencePattern:v.imageSequencePatternOption},renderMediaOnLambda:{mediaCacheSizeInBytes:F.mediaCacheSizeInBytesOption,offthreadVideoCacheSizeInBytes:k.offthreadVideoCacheSizeInBytesOption,offthreadVideoThreads:C.offthreadVideoThreadsOption,videoBitrate:M.videoBitrateOption,numberOfGifLoops:S.numberOfGifLoopsOption,preferLossless:_.preferLosslessAudioOption,audioBitrate:a.audioBitrateOption,deleteAfter:c.deleteAfterOption,x264Preset:D.x264Option,encodingMaxRate:f.encodingMaxRateOption,encodingBufferSize:p.encodingBufferSizeOption,colorSpace:l.colorSpaceOption,muted:w.mutedOption,logLevel:x.logLevelOption,timeoutInMilliseconds:O.delayRenderTimeoutInMillisecondsOption,apiKey:i.apiKeyOption,licenseKey:b.licenseKeyOption},renderStillOnLambda:{mediaCacheSizeInBytes:F.mediaCacheSizeInBytesOption,offthreadVideoCacheSizeInBytes:k.offthreadVideoCacheSizeInBytesOption,offthreadVideoThreads:C.offthreadVideoThreadsOption,jpegQuality:y.jpegQualityOption,logLevel:x.logLevelOption,deleteAfter:c.deleteAfterOption,scale:P.scaleOption,timeoutInMilliseconds:O.delayRenderTimeoutInMillisecondsOption,apiKey:i.apiKeyOption,licenseKey:b.licenseKeyOption},getCompositionsOnLambda:{mediaCacheSizeInBytes:F.mediaCacheSizeInBytesOption,offthreadVideoCacheSizeInBytes:k.offthreadVideoCacheSizeInBytesOption,logLevel:x.logLevelOption,timeoutInMilliseconds:O.delayRenderTimeoutInMillisecondsOption},renderMediaOnCloudRun:{mediaCacheSizeInBytes:F.mediaCacheSizeInBytesOption,offthreadVideoCacheSizeInBytes:k.offthreadVideoCacheSizeInBytesOption,offthreadVideoThreads:C.offthreadVideoThreadsOption,numberOfGifLoops:S.numberOfGifLoopsOption,preferLossless:_.preferLosslessAudioOption,colorSpace:l.colorSpaceOption,audioBitrate:a.audioBitrateOption,videoBitrate:M.videoBitrateOption,x264Preset:D.x264Option,encodingMaxRate:f.encodingMaxRateOption,encodingBufferSize:p.encodingBufferSizeOption,muted:w.mutedOption,logLevel:x.logLevelOption,delayRenderTimeoutInMilliseconds:O.delayRenderTimeoutInMillisecondsOption,enforceAudioTrack:h.enforceAudioOption,scale:P.scaleOption,crf:u.crfOption,jpegQuality:y.jpegQualityOption},renderStillOnCloudRun:{mediaCacheSizeInBytes:F.mediaCacheSizeInBytesOption,offthreadVideoCacheSizeInBytes:k.offthreadVideoCacheSizeInBytesOption,offthreadVideoThreads:C.offthreadVideoThreadsOption,logLevel:x.logLevelOption,scale:P.scaleOption,jpegQuality:y.jpegQualityOption,delayRenderTimeoutInMilliseconds:O.delayRenderTimeoutInMillisecondsOption},ensureBrowser:{logLevel:x.logLevelOption,onBrowserDownload:E.onBrowserDownloadOption,chromeMode:s.chromeModeOption},openBrowser:{logLevel:x.logLevelOption,onBrowserDownload:E.onBrowserDownloadOption,chromeMode:s.chromeModeOption},deploySiteLambda:{logLevel:x.logLevelOption,throwIfSiteExists:A.throwIfSiteExistsOption},deploySiteCloudRun:{logLevel:x.logLevelOption}}},744053,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateSelectedPixelFormatAndCodecCombination=r.validPixelFormatsForCodec=r.DEFAULT_PIXEL_FORMAT=r.validPixelFormats=void 0,r.validPixelFormats=["yuv420p","yuva420p","yuv422p","yuv444p","yuv420p10le","yuv422p10le","yuv444p10le","yuva444p10le"],r.DEFAULT_PIXEL_FORMAT="yuv420p",r.validPixelFormatsForCodec=e=>"vp8"===e||"vp9"===e?r.validPixelFormats:r.validPixelFormats.filter(e=>"yuva420p"!==e),r.validateSelectedPixelFormatAndCodecCombination=(e,t)=>{if(void 0===e)return e;if(!r.validPixelFormats.includes(e))throw TypeError(`Value ${e} is not valid as a pixel format.`);if("yuva420p"!==e)return;let i=(0,r.validPixelFormatsForCodec)(t);if(!i.includes(e))throw TypeError(`Pixel format was set to 'yuva420p' but codec ${t} does not support it. Valid pixel formats for codec ${t} are: ${i.join(", ")}.`)}},999684,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateOutputFilename=void 0;let i=e.r(88714),a=e.r(387523);r.validateOutputFilename=({codec:e,audioCodecSetting:t,extension:r,preferLossless:n,separateAudioTo:o})=>{if(!i.defaultFileExtensionMap[e])throw TypeError(`The codec "${e}" is not supported. Supported codecs are: ${Object.keys(i.defaultFileExtensionMap).join(", ")}`);let s=i.defaultFileExtensionMap[e],l=(0,a.resolveAudioCodec)({codec:e,preferLossless:n,setting:t,separateAudioTo:o});if(null===l){if(r!==s.default)throw TypeError(`When using the ${e} codec, the output filename must end in .${s.default}.`);return}if(!(l in s.forAudioCodec))throw Error(`Audio codec ${l} is not supported for codec ${e}`);let u=s.forAudioCodec[l].possible;if(!u.includes(r)&&!o)throw TypeError(`When using the ${e} codec with the ${l} audio codec, the output filename must end in one of the following: ${u.join(", ")}.`)}},570382,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BrowserSafeApis=void 0;let i=e.r(758927),a=e.r(637667),n=e.r(53892),o=e.r(715155),s=e.r(854049),l=e.r(88714),u=e.r(696525),c=e.r(200762),d=e.r(151222),p=e.r(17888),f=e.r(80280),h=e.r(387523),m=e.r(226977),g=e.r(360087),v=e.r(964282),y=e.r(664217),b=e.r(293264),x=e.r(328271),w=e.r(454790),S=e.r(744053),k=e.r(999684);r.BrowserSafeApis={getFileExtensionFromCodec:u.getFileExtensionFromCodec,validCodecs:n.validCodecs,validAudioCodecs:h.validAudioCodecs,getDefaultCrfForCodec:s.getDefaultCrfForCodec,getValidCrfRanges:s.getValidCrfRanges,proResProfileOptions:i.NoReactInternals.proResProfileOptions,x264PresetOptions:w.x264PresetOptions,hardwareAccelerationOptions:y.hardwareAccelerationOptions,validPixelFormats:S.validPixelFormats,validOpenGlRenderers:v.validOpenGlRenderers,validPixelFormatsForCodec:S.validPixelFormatsForCodec,validVideoImageFormats:c.validVideoImageFormats,validStillImageFormats:c.validStillImageFormats,DEFAULT_PIXEL_FORMAT:S.DEFAULT_PIXEL_FORMAT,DEFAULT_TIMEOUT:a.DEFAULT_TIMEOUT,DEFAULT_JPEG_QUALITY:d.DEFAULT_JPEG_QUALITY,DEFAULT_COLOR_SPACE:g.DEFAULT_COLOR_SPACE,supportedAudioCodecs:h.supportedAudioCodecs,defaultFileExtensionMap:l.defaultFileExtensionMap,defaultAudioCodecs:h.defaultAudioCodecs,defaultCodecsForFileExtension:u.defaultCodecsForFileExtension,validateOutputFilename:k.validateOutputFilename,options:f.allOptions,validColorSpaces:g.validColorSpaces,optionsMap:b.optionsMap,codecSupportsCrf:o.codecSupportsCrf,codecSupportsVideoBitrate:o.codecSupportsVideoBitrate,logLevels:p.logLevels,getOutputCodecOrUndefined:x.getOutputCodecOrUndefined,getExtensionFromAudioCodec:h.getExtensionFromAudioCodec,validChromeModeOptions:m.validChromeModeOptions}},134137,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.envVariablesArrayToObject=r.envVariablesObjectToArray=void 0,r.envVariablesObjectToArray=e=>Object.entries(e).map(([e,t])=>[e.trim().toUpperCase(),t.trim()]),r.envVariablesArrayToObject=e=>e.map(([e,t])=>[e.trim(),t.trim()]).filter(([e,t])=>e&&t).reduce((e,[t,r])=>(e[t.toUpperCase()]=r,e),{})},189312,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useRenderModalSections=void 0;let i=e.r(347540);r.useRenderModalSections=(e,t)=>{let[r,a]=(0,i.useState)("general"),n=(0,i.useMemo)(()=>{if("audio"===e)return["general","data","audio","advanced"];if("still"===e||"sequence"===e)return["general","data","picture","advanced"];if("video"===e)return"gif"===t?["general","data","picture","gif","advanced"]:["general","data","picture","audio","advanced"];throw TypeError("Unknown render mode")},[t,e]),o=(0,i.useMemo)(()=>n.includes(r)?r:n[0],[r,n]);return(0,i.useMemo)(()=>({tab:o,setTab:a,shownTabs:n}),[o,n])}},44600,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AudioIcon=void 0;let i=e.r(222260);r.AudioIcon=e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",...e,children:(0,i.jsx)("path",{fill:"currentcolor",d:"M243 32.32C105.5 39.15 0 157.8 0 295.5v120.4C0 451.3 28.63 480 64 480h32c17.62 0 32-14.38 32-32V288c0-17.62-14.38-32-32-32H64c-10.79 0-20.8 2.9-29.72 7.7 14.2-106.8 100.5-193.9 210.4-199.4 120.5-5.965 221.7 83.92 234 199.9-9.08-5.1-19.48-8.2-30.68-8.2h-32c-17.62 0-32 14.38-32 32v160c0 17.62 14.38 32 32 32h32c35.38 0 64-28.75 64-64.13V287.9c0-145.4-122-262.88-269-255.58zM64 288h32v160H64c-17.62 0-32-14.5-32-32.13v-95.75C32 302.5 46.38 288 64 288zm416 127.9c0 17.6-14.4 32.1-32 32.1h-32V288h32c17.62 0 32 14.5 32 32.13v95.77z"})})},21793,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DataIcon=void 0;let i=e.r(222260);r.DataIcon=e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",...e,children:(0,i.jsx)("path",{fill:"currentcolor",d:"M224 512C100.3 512 0 476.2 0 432V80C0 35.82 100.3 0 224 0C347.7 0 448 35.82 448 80V432C448 476.2 347.7 512 224 512zM416 80.45C415.7 79.69 414.4 77.27 409.8 73.31C402.4 67.11 389.9 60.09 371.6 53.57C335.4 40.62 283.2 32 224 32C164.8 32 112.6 40.62 76.37 53.57C58.1 60.09 45.59 67.11 38.25 73.31C33.55 77.27 32.29 79.69 32 80.45V182.1C46.47 192.7 69.9 202.8 100.9 210.4C135.5 218.9 177.1 224 224 224C270 224 312.5 218.9 347.1 210.4C378.1 202.8 401.5 192.7 416 182.1V80.45zM416 219.5C398.8 228.4 377.9 235.8 354.8 241.5C317.3 250.7 272.2 256 224 256C175.8 256 130.7 250.7 93.22 241.5C70.11 235.8 49.18 228.4 32 219.5V310.1C46.47 320.7 69.9 330.8 100.9 338.4C135.5 346.9 177.1 352 224 352C270 352 312.5 346.9 347.1 338.4C378.1 330.8 401.5 320.7 416 310.1V219.5zM38.25 438.7C45.59 444.9 58.1 451.9 76.37 458.4C112.6 471.4 164.8 480 224 480C283.2 480 335.4 471.4 371.6 458.4C389.9 451.9 402.4 444.9 409.8 438.7C414.4 434.7 415.7 432.3 416 431.6V347.5C398.8 356.4 377.9 363.8 354.8 369.5C317.3 378.7 272.2 384 224 384C175.8 384 130.7 378.7 93.22 369.5C70.11 363.8 49.18 356.4 32 347.5V431.6C32.29 432.3 33.55 434.7 38.25 438.7zM416 431.4C416.1 431.3 416.1 431.3 416.1 431.3L416 431.4zM31.96 431.4C31.94 431.3 31.93 431.3 31.92 431.3L31.96 431.4zM31.96 80.56C31.93 80.65 31.92 80.7 31.92 80.7L31.96 80.56zM416.1 80.7C416.1 80.7 416.1 80.65 416 80.56z"})})},434063,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PicIcon=void 0;let i=e.r(222260);r.PicIcon=e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",...e,children:(0,i.jsx)("path",{fill:"currentcolor",d:"M324.9 157.8c-11.38-17.38-39.89-17.31-51.23-.063L200.5 268.5l-16.4-22.6c-11.4-16.8-38.2-16-49.7 0l-64.52 89.16c-6.797 9.406-7.75 21.72-2.547 32C72.53 377.5 83.05 384 94.75 384h322.5c11.41 0 21.8-6.281 27.14-16.38a30.922 30.922 0 0 0-1.516-31.56L324.9 157.8zM95.8 352l62.39-87.38 29.91 41.34c3.1 4.24 8.3 7.24 13.3 6.64 5.25-.125 10.12-2.781 13.02-7.188l83.83-129.9L415 352H95.8zM447.1 32h-384C28.65 32-.01 60.65-.01 96v320c0 35.35 28.65 64 63.1 64h384c35.35 0 64-28.65 64-64V96c.01-35.35-27.79-64-63.99-64zM480 416c0 17.64-14.36 32-32 32H64c-17.64 0-32-14.36-32-32V96c0-17.64 14.36-32 32-32h384c17.64 0 32 14.36 32 32v320zM144 192c26.5 0 48-21.5 48-48s-21.5-48-48-48-48 21.5-48 48 21.5 48 48 48zm0-64c8.822 0 15.1 7.178 15.1 16s-6.3 16-15.1 16-16-7.2-16-16 7.2-16 16-16z"})})},369225,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GearIcon=void 0;let i=e.r(222260);r.GearIcon=e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",...e,children:(0,i.jsx)("path",{fill:"currentcolor",d:"M168 255.1c0-47.7 39.4-88 88-88s88 40.3 88 88c0 49.5-39.4 88.9-88 88.9s-88-39.4-88-88.9zm88-56c-30.9 0-56 26-56 56 0 31.8 25.1 56 56 56s56-24.2 56-56c0-30-25.1-56-56-56zM65.67 230.6l-40.33-36.8c-11.12-10.1-13.68-26.6-6.16-39.6l30.24-52.4c7.52-13.02 23.09-19.05 37.42-14.48l51.96 16.58c13.4-10.34 28.2-18.94 44-25.47l11.7-53.27C197.7 10.47 210.7 0 225.8 0h60.4c15.1 0 28.1 10.47 31.3 25.16l11.7 53.27c14.9 6.53 30.6 15.13 44 25.47l52-16.58c14.3-4.57 29.9 1.46 37.4 14.48l30.2 52.4c7.5 13 5 29.5-6.1 39.6l-40.4 36.8c1.1 8.3 1.7 16.8 1.7 24.5 0 9.5-.6 18-1.7 26.3l40.4 36.8c11.1 10.1 13.6 26.6 6.1 39.6l-30.2 52.4c-7.5 13-23.1 19-37.4 14.5l-52-16.6c-13.4 10.3-29.1 18.9-44 25.5l-11.7 53.2c-3.2 14.7-16.2 25.2-31.3 25.2h-60.4c-15.1 0-28.1-10.5-31.3-25.2l-11.7-53.2c-15.8-6.6-30.6-15.2-44-25.5l-51.96 16.6c-14.33 4.5-29.9-1.5-37.42-14.5l-30.24-52.4c-7.52-13-4.96-29.5 6.16-39.6l40.33-36.8c-1.1-8.3-1.67-16.8-1.67-26.3 0-7.7.57-16.2 1.67-24.5zm92.73-101.4-13.3 10.3-67.97-21.7-30.24 52.4 52.69 48-2.19 16.6c-.92 6.9-1.39 14-1.39 20.3 0 8.1.47 15.2 1.39 22.1l2.19 16.6-52.69 48 30.24 52.4 67.97-21.7 13.3 10.3c11.1 8.6 23.5 15.8 36.6 20.3l15.5 7.3 15.3 69.6h60.4l15.3-69.6 14.6-7.3c14-4.5 26.4-11.7 37.5-20.3l13.3-10.3 68 21.7 30.2-52.4-52.7-48 2.2-16.6c.9-6.9 1.4-14 1.4-21.2 0-7.2-.5-14.3-1.4-21.2l-2.2-16.6 52.7-48-30.2-52.4-68 21.7-13.3-10.3c-11.1-8.6-23.5-15.8-37.5-21.2l-14.6-6.4L286.2 32h-60.4l-15.3 69.6L195 108c-13.1 5.4-25.5 12.6-36.6 21.2z"})})},66343,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GifIcon=void 0;let i=e.r(222260);r.GifIcon=e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",...e,children:(0,i.jsx)("path",{fill:"currentcolor",d:"M512 32H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h448c35.35 0 64-28.65 64-64V96c0-35.35-28.7-64-64-64zm32 384c0 17.64-14.36 32-32 32H64c-17.64 0-32-14.36-32-32V96c0-17.64 14.36-32 32-32h448c17.64 0 32 14.36 32 32v320zm-80-256h-96c-8.8 0-16 7.2-16 16v160c0 8.844 7.156 16 16 16s16-7.156 16-16v-64h56c8.844 0 16-7.156 16-16s-7.156-16-16-16h-56v-48h80c8.8 0 16-7.2 16-16s-7.2-16-16-16zm-160 0c-8.8 0-16 7.2-16 16v160c0 8.844 7.156 16 16 16s16-7.156 16-16V176c0-8.8-7.2-16-16-16zm-64 80h-64c-8.8 0-16 7.2-16 16s7.156 16 16 16h48v33.45c-24.83 19.91-69.13 18.16-91.48-4.203-24.95-24.95-24.95-65.55 0-90.5 25.03-25 64.19-25 89.22 0 6.25 6.25 16.38 6.25 22.62 0s6.25-16.38 0-22.62c-37.69-37.72-96.78-37.72-134.5 0-37.42 37.42-37.42 98.33 0 135.8C127.8 341.8 153.5 352 180.6 352c27.06 0 52.84-10.25 70.7-28.12 3-2.98 4.7-7.08 4.7-11.28V256c0-8.8-7.2-16-16-16z"})})},324502,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VerticalTab=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(260240),s={border:"none",flex:1,padding:8,paddingLeft:16,display:"flex",flexDirection:"row",fontSize:14,color:"inherit",alignItems:"center"};r.VerticalTab=({children:e,onClick:t,style:r,selected:l})=>{let[u,c]=(0,a.useState)(!1),{tabIndex:d}=(0,o.useZIndex)(),p=(0,a.useCallback)(()=>{c(!0)},[]),f=(0,a.useCallback)(()=>{c(!1)},[]),h=(0,a.useMemo)(()=>({...s,backgroundColor:l?n.SELECTED_BACKGROUND:u?n.CLEAR_HOVER:"transparent",color:l?"white":n.LIGHT_TEXT,boxShadow:l?"none":void 0,...r}),[u,l,r]);return(0,i.jsx)("button",{style:h,type:"button",onClick:t,tabIndex:d,onPointerLeave:f,onPointerEnter:p,children:e})}},321974,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CliCopyButton=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(356174),s={width:16,height:16,verticalAlign:"sub"},l={fontSize:"14px",minHeight:"30px",minWidth:"30px",display:"flex",alignItems:"center",justifyContent:"center"},u={width:"30px",height:"30px",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"};r.CliCopyButton=({valueToCopy:e})=>{let[t,r]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),p=(0,a.useMemo)(()=>c?"white":n.LIGHT_TEXT,[c]),f=(0,i.jsx)(o.ClipboardIcon,{color:p,style:s}),h=(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",style:s,children:(0,i.jsx)("path",{fill:p,d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"})}),m=(0,a.useCallback)(()=>{d(!0)},[]),g=(0,a.useCallback)(()=>{d(!1)},[]);return(0,a.useEffect)(()=>{if(!t)return;let e=setTimeout(()=>void(r(!1),d(!1)),2e3);return()=>clearTimeout(e)},[t]),t?(0,i.jsx)("span",{style:l,children:h}):(0,i.jsx)("button",{type:"button",onPointerEnter:m,onPointerLeave:g,style:u,onClick:()=>{navigator.clipboard.writeText(e),r(!0)},children:f})}},397261,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OptionExplainer=void 0;let i=e.r(222260),a=e.r(921224),n=e.r(819449),o=e.r(146575),s=e.r(321974),l={fontSize:14,paddingTop:10,paddingBottom:10,backgroundColor:a.INPUT_BACKGROUND},u={paddingLeft:20,paddingRight:20},c={fontSize:14},d={fontSize:14,maxWidth:400},p={fontSize:14,maxWidth:200,color:"#0b84f3",wordWrap:"break-word",textDecoration:"none"},f={...u,fontSize:14,display:"flex",flexDirection:"row",alignItems:"center"},h={width:150,fontSize:14,color:"white"},m={display:"flex",flex:1},g={display:"flex",justifyContent:"flex-end"};r.OptionExplainer=({option:e})=>(0,i.jsxs)("div",{style:l,className:"__remotion-info-button-container",children:[(0,i.jsxs)("div",{style:u,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{style:c,children:e.name}),e.docLink?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Spacing,{x:1}),(0,i.jsx)("a",{style:p,href:e.docLink,target:"_blank",children:"Docs"})]}):null]}),(0,i.jsx)("div",{style:d,children:e.description("ssr")})]}),(0,i.jsx)(o.Spacing,{y:.5,block:!0}),(0,i.jsx)(n.MenuDivider,{}),(0,i.jsx)(o.Spacing,{y:.5,block:!0}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{style:f,children:[(0,i.jsx)("div",{style:h,children:"CLI flag"}),(0,i.jsx)("div",{style:m}),(0,i.jsxs)("code",{children:["--",e.cliFlag]}),(0,i.jsx)("div",{style:g,children:(0,i.jsx)(s.CliCopyButton,{valueToCopy:e.cliFlag})})]}),e.ssrName?(0,i.jsxs)("div",{style:f,children:[(0,i.jsx)("div",{style:h,children:"Node.JS option"}),(0,i.jsx)("div",{style:m}),(0,i.jsx)("code",{children:e.ssrName}),(0,i.jsx)(o.Spacing,{x:3.75})]}):null,(0,i.jsx)("div",{style:f})]})]})},400157,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OptionExplainerBubble=void 0;let i=e.r(222260),a=e.r(570382),n=e.r(175143),o=e.r(397261);r.OptionExplainerBubble=({id:e})=>{let t=a.BrowserSafeApis.options[e];return(0,i.jsx)(n.InfoBubble,{title:"Learn more about this option",children:(0,i.jsx)(o.OptionExplainer,{option:t})})}},239229,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NumberSetting=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(190327),o=e.r(310099),s=e.r(146575),l=e.r(400157),u=e.r(462098);r.NumberSetting=({name:e,value:t,step:r,hint:c,onValueChanged:d,max:p,min:f,formatter:h})=>{let m=(0,a.useCallback)(e=>{d(t=>{let i=r<1?parseFloat(e):parseInt(e,10);return Number.isNaN(i)?t:Math.min(null!=p?p:1/0,Math.max(i,f))})},[p,f,d,r]),g=(0,a.useCallback)(e=>{d(e)},[d]);return(0,i.jsxs)("div",{style:u.optionRow,children:[(0,i.jsxs)("div",{style:u.label,children:[e,c?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Spacing,{x:.5}),(0,i.jsx)(l.OptionExplainerBubble,{id:c})]}):null]}),(0,i.jsx)("div",{style:u.rightRow,children:(0,i.jsx)(o.RightAlignInput,{children:(0,i.jsx)(n.InputDragger,{value:t,name:e.toLowerCase(),onTextChange:m,onValueChange:g,step:r,placeholder:[f,p].map(e=>null!=e?e:"").join("-"),min:f,max:p,formatter:h,status:"ok",rightAlign:!0})})})]})}},156653,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CrfSetting=r.useCrfState=void 0;let i=e.r(222260),a=e.r(570382),n=e.r(347540),o=e.r(239229);r.useCrfState=e=>{let[t,r]=(0,n.useState)(()=>a.BrowserSafeApis.validCodecs.map(e=>[e,a.BrowserSafeApis.getDefaultCrfForCodec(e)]).reduce((e,[t,r])=>({...e,[t]:r}),{})),i=a.BrowserSafeApis.getValidCrfRanges(e);return{crf:t[e],setCrf:t=>{r(r=>{let i=r[e];if(null===i)throw TypeError(`Got unexpected codec "${e}"`);return{...r,[e]:"number"==typeof t?t:t(i)}})},minCrf:i[0],maxCrf:i[1]}},r.CrfSetting=({crf:e,setCrf:t,min:r,max:a,option:n})=>(0,i.jsx)(o.NumberSetting,{min:r,max:a,name:"CRF",onValueChanged:t,value:e,step:1,hint:n})},676978,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.labelx264Preset=void 0,r.labelx264Preset=e=>{if("ultrafast"===e)return"ultrafast";if("superfast"===e)return"superfast";if("veryfast"===e)return"veryfast";if("faster"===e)return"faster";if("fast"===e)return"fast";if("medium"===e)return"medium";if("slow"===e)return"slow";if("slower"===e)return"slower";if("veryslow"===e)return"veryslow";if("placebo"===e)return"placebo";throw TypeError(`Unknown x264 preset: ${e}`)}},585060,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.InlineEyeButton=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(841674),o={height:14,color:"currentColor"};r.InlineEyeButton=({onClick:e,enabled:t})=>{let r=(0,a.useCallback)(e=>t?(0,i.jsx)("svg",{style:o,viewBox:"0 0 640 512",children:(0,i.jsx)("path",{fill:e,d:"M25.9 3.4C19-2 8.9-.8 3.4 6.1S-.8 23.1 6.1 28.6l608 480c6.9 5.5 17 4.3 22.5-2.6s4.3-17-2.6-22.5L25.9 3.4zM605.5 268.3c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-51.2 0-96 14.8-133.9 36.8l27.3 21.5C244.6 74.2 280.2 64 320 64c70.4 0 127.7 32 170.8 72c43.1 40 71.9 88 85.2 120c-9.2 22.1-25.9 52-49.5 81.5l25.1 19.8c25.6-32 43.7-64.4 53.9-89zM88.4 154.7c-25.6 32-43.7 64.4-53.9 89c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c51.2 0 96-14.8 133.9-36.8l-27.3-21.5C395.4 437.8 359.8 448 320 448c-70.4 0-127.7-32-170.8-72C106.1 336 77.3 288 64 256c9.2-22.1 25.9-52 49.5-81.5L88.4 154.7zM320 384c16.7 0 32.7-3.2 47.4-9.1l-30.9-24.4c-5.4 .9-10.9 1.4-16.5 1.4c-51 0-92.8-39.8-95.8-90.1l-30.9-24.4c-.9 6-1.3 12.2-1.3 18.5c0 70.7 57.3 128 128 128zM448 256c0-70.7-57.3-128-128-128c-16.7 0-32.7 3.2-47.4 9.1l30.9 24.4c5.4-.9 10.9-1.4 16.5-1.4c51 0 92.8 39.8 95.8 90.1l30.9 24.4c.9-6 1.3-12.2 1.3-18.5z"})}):(0,i.jsx)("svg",{style:o,viewBox:"0 0 576 512",children:(0,i.jsx)("path",{fill:e,d:"M117.2 136C160.3 96 217.6 64 288 64s127.7 32 170.8 72c43.1 40 71.9 88 85.2 120c-13.3 32-42.1 80-85.2 120c-43.1 40-100.4 72-170.8 72s-127.7-32-170.8-72C74.1 336 45.3 288 32 256c13.3-32 42.1-80 85.2-120zM288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM192 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"})}),[t]);return(0,i.jsx)(n.InlineAction,{renderAction:r,onClick:e})}},965286,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t});Object.defineProperty(r,"__esModule",{value:!0}),r.EnvInput=void 0;let s=e.r(222260),l=o(e.r(347540)),u=e.r(310099),c=e.r(97870),d=e.r(146575),p=e.r(585060),f=e.r(29934),h=e.r(462098),m={flex:1,width:"100%"},g={paddingLeft:h.optionRow.paddingLeft,paddingRight:h.optionRow.paddingRight};r.EnvInput=({onEnvKeyChange:e,onEnvValChange:t,envKey:r,envVal:i,onDelete:a,index:n,autoFocus:o,isDuplicate:v})=>{let[y,b]=l.default.useState(!1),[x,w]=l.default.useState(()=>""===r.trim()&&""!==i.trim()),[S,k]=l.default.useState(()=>""!==r.trim()&&""===i.trim()),C=""===r.trim()&&x&&""!==i.trim(),E=""===i.trim()&&S&&""!==r.trim(),_=(0,l.useCallback)(()=>{a(n)},[n,a]),T=(0,l.useCallback)(()=>{b(e=>!e)},[]),P=(0,l.useCallback)(t=>{e(n,t.target.value)},[n,e]),I=(0,l.useCallback)(e=>{t(n,e.target.value)},[n,t]),A=(0,l.useCallback)(()=>{w(!0)},[]),O=(0,l.useCallback)(()=>{k(!0)},[]),M="NODE_ENV"===r.trim();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d.Row,{align:"center",style:h.optionRow,children:[(0,s.jsx)(u.RemotionInput,{status:M||v||C?"warning":"ok",type:"text",placeholder:"Key",style:m,value:r,onBlur:A,autoFocus:o,onChange:P,rightAlign:!1}),(0,s.jsx)(d.Spacing,{x:1}),(0,s.jsx)(u.RemotionInput,{status:E?"warning":"ok",placeholder:"Value",type:y?"text":"password",style:m,value:i,onBlur:O,onChange:I,rightAlign:!1}),(0,s.jsx)(d.Spacing,{x:1.5}),(0,s.jsx)(p.InlineEyeButton,{enabled:!y,onClick:T}),(0,s.jsx)(f.InlineRemoveButton,{onClick:_})]}),M?(0,s.jsx)("div",{style:g,children:(0,s.jsx)(c.ValidationMessage,{align:"flex-start",type:"warning",message:"NODE_ENV will be overwritten by Remotion during the render process."})}):null,v?(0,s.jsx)("div",{style:g,children:(0,s.jsx)(c.ValidationMessage,{align:"flex-start",type:"warning",message:`${r.toUpperCase()} is already defined.`})}):null,C?(0,s.jsx)("div",{style:g,children:(0,s.jsx)(c.ValidationMessage,{align:"flex-start",type:"warning",message:"Key is missing."})}):null,E?(0,s.jsx)("div",{style:g,children:(0,s.jsx)(c.ValidationMessage,{align:"flex-start",type:"warning",message:"Value is missing."})}):null]})}},604311,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RenderModalEnvironmentVariables=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(652693),s=e.r(146575),l=e.r(965286),u={fontSize:14,fontWeight:"bold",color:n.LIGHT_TEXT,marginLeft:16},c={marginTop:20},d={marginLeft:16};r.RenderModalEnvironmentVariables=({envVariables:e,setEnvVariables:t})=>{let r=(0,a.useCallback)((e,r)=>{t(t=>{let i=[...t];return i[e][1]=r,i})},[t]),n=(0,a.useCallback)((e,r)=>{t(t=>{let i=[...t];return i[e][0]=r,i})},[t]),p=(0,a.useCallback)(e=>{t(t=>t.filter((t,r)=>r!==e))},[t]),f=(0,a.useCallback)(()=>{t(e=>[...e,["",""]])},[t]),h=[];return(0,i.jsxs)("div",{style:c,children:[(0,i.jsx)("strong",{style:u,children:"Environment variables"}),e.map((t,a)=>{let o=!1;return h.includes(t[0].toUpperCase())&&(o=!0),h.push(t[0].toUpperCase()),(0,i.jsx)(l.EnvInput,{onEnvKeyChange:n,onEnvValChange:r,envKey:t[0],envVal:t[1],onDelete:p,index:a,isDuplicate:o,autoFocus:a===e.length-1&&""===t[0]},a)}),(0,i.jsx)(s.Spacing,{y:1,block:!0}),(0,i.jsx)(o.Button,{style:d,onClick:f,children:"+ Add env variable"}),(0,i.jsx)(s.Spacing,{y:1,block:!0})]})}},909555,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RenderModalHr=void 0;let i=e.r(222260),a={margin:"0 0 0 0",padding:"0 0 0 0",border:"none",borderTop:"1px solid #000",marginRight:16,marginLeft:16,marginTop:8,marginBottom:8};r.RenderModalHr=()=>(0,i.jsx)("div",{style:a})},749188,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RenderModalAdvanced=void 0;let i=e.r(222260),a=e.r(570382),n=e.r(347540),o=e.r(676978),s=e.r(170260),l=e.r(671927),u=e.r(494296),c=e.r(432804),d=e.r(310099),p=e.r(146575),f=e.r(239229),h=e.r(400157),m=e.r(604311),g=e.r(909555),v=e.r(462098),y={flex:1,overflowY:"auto"};r.RenderModalAdvanced=({renderMode:e,maxConcurrency:t,minConcurrency:r,setConcurrency:b,concurrency:x,delayRenderTimeout:w,setDelayRenderTimeout:S,disallowParallelEncoding:k,setDisallowParallelEncoding:C,setDisableWebSecurity:E,setIgnoreCertificateErrors:_,setHeadless:T,headless:P,ignoreCertificateErrors:I,disableWebSecurity:A,openGlOption:O,setOpenGlOption:M,setEnvVariables:F,envVariables:R,setx264Preset:D,x264Preset:j,codec:L,setMediaCacheSizeInBytes:B,mediaCacheSizeInBytes:N,offthreadVideoCacheSizeInBytes:$,setOffthreadVideoCacheSizeInBytes:z,offthreadVideoThreads:U,setOffthreadVideoThreads:V,enableMultiProcessOnLinux:H,setChromiumMultiProcessOnLinux:W,setUserAgent:q,userAgent:G,beep:Z,setBeep:K,repro:Q,setRepro:X,hardwareAcceleration:J,chromeModeOption:Y,setChromeModeOption:ee,setHardwareAcceleration:et,darkMode:er,setDarkMode:ei})=>{let ea=(0,n.useMemo)(()=>["angle","egl","swangle","swiftshader","vulkan","angle-egl","default"],[]),en=(0,n.useCallback)(()=>{B(e=>null===e?1e9:null)},[B]),eo=(0,n.useCallback)(()=>{z(e=>null===e?0x20000000:null)},[z]),es=(0,n.useCallback)(()=>{V(e=>null===e?2:null)},[V]),el=(0,n.useCallback)(()=>{q(e=>null===e?"Mozilla/5.0 (Remotion)":null)},[q]),eu=(0,n.useCallback)(e=>{C(e.target.checked)},[C]),ec=(0,n.useCallback)(e=>{E(e.target.checked)},[E]),ed=(0,n.useCallback)(e=>{W(e.target.checked)},[W]),ep=(0,n.useCallback)(e=>{_(e.target.checked)},[_]),ef=(0,n.useCallback)(e=>{T(e.target.checked)},[T]),eh=(0,n.useCallback)(e=>{q(e.target.value)},[q]),em=(0,n.useCallback)(e=>{ei(e.target.checked)},[ei]),eg=(0,n.useCallback)(e=>{K(e.target.checked)},[K]),ev=(0,n.useCallback)(e=>{X(e.target.checked)},[X]),ey=(0,n.useMemo)(()=>ea.map(e=>({label:"default"===e?"Default":e,onClick:()=>M(e),key:e,leftItem:O===e?(0,i.jsx)(s.Checkmark,{}):null,id:e,keyHint:null,quickSwitcherLabel:null,subMenu:null,type:"item",value:e})),[ea,O,M]),eb=(0,n.useMemo)(()=>a.BrowserSafeApis.validChromeModeOptions.map(e=>({label:e,onClick:()=>ee(e),key:e,leftItem:Y===e?(0,i.jsx)(s.Checkmark,{}):null,id:e,keyHint:null,quickSwitcherLabel:null,subMenu:null,type:"item",value:e})),[Y,ee]),ex=(0,n.useMemo)(()=>a.BrowserSafeApis.x264PresetOptions.map(e=>({label:(0,o.labelx264Preset)(e),onClick:()=>D(e),key:e,type:"item",id:e,keyHint:null,leftItem:j===e?(0,i.jsx)(s.Checkmark,{}):null,quickSwitcherLabel:null,subMenu:null,value:e})),[D,j]),ew=(0,n.useMemo)(()=>a.BrowserSafeApis.hardwareAccelerationOptions.map(e=>({label:e,onClick:()=>et(e),leftItem:J===e?(0,i.jsx)(s.Checkmark,{}):null,subMenu:null,quickSwitcherLabel:null,type:"item",id:e,keyHint:null,value:e})),[J,et]),eS=(0,n.useCallback)(e=>{B(t=>{if(null===t)throw TypeError("Expected previous value");return"function"==typeof e?e(t):e})},[B]),ek=(0,n.useCallback)(e=>{z(t=>{if(null===t)throw TypeError("Expected previous value");return"function"==typeof e?e(t):e})},[z]),eC=(0,n.useCallback)(e=>{V(t=>{if(null===t)throw TypeError("Expected previous value");return"function"==typeof e?e(t):e})},[V]);return(0,i.jsxs)("div",{style:y,className:u.VERTICAL_SCROLLBAR_CLASSNAME,children:["still"===e?null:(0,i.jsx)(f.NumberSetting,{min:r,max:t,step:1,name:"Concurrency",formatter:e=>`${e}x`,onValueChanged:b,value:x}),"video"===e&&"h264"===L?(0,i.jsxs)("div",{style:v.optionRow,children:[(0,i.jsxs)("div",{style:v.label,children:["x264 Preset",(0,i.jsx)(p.Spacing,{x:.5}),(0,i.jsx)(h.OptionExplainerBubble,{id:"x264Option"})]}),(0,i.jsx)("div",{style:v.rightRow,children:(0,i.jsx)(c.Combobox,{title:j,selectedId:j,values:ex})})]}):null,"video"===e?(0,i.jsxs)("div",{style:v.optionRow,children:[(0,i.jsxs)("div",{style:v.label,children:["Hardware acceleration",(0,i.jsx)(p.Spacing,{x:.5}),(0,i.jsx)(h.OptionExplainerBubble,{id:"hardwareAccelerationOption"})]}),(0,i.jsx)("div",{style:v.rightRow,children:(0,i.jsx)(c.Combobox,{title:J,selectedId:J,values:ew})})]}):null,(0,i.jsx)(f.NumberSetting,{min:7e3,max:9e5,name:"delayRender() timeout",onValueChanged:S,formatter:e=>`${e}ms`,step:1e3,hint:"delayRenderTimeoutInMillisecondsOption",value:w}),(0,i.jsxs)("div",{style:v.optionRow,children:[(0,i.jsx)("div",{style:v.label,children:"No parallel encoding"}),(0,i.jsx)("div",{style:v.rightRow,children:(0,i.jsx)(l.Checkbox,{checked:k,onChange:eu,name:"disallow-parallel-encoding"})})]}),"audio"===e?null:(0,i.jsxs)("div",{style:v.optionRow,children:[(0,i.jsxs)("div",{style:v.label,children:["Custom @remotion/media cache size",(0,i.jsx)(p.Spacing,{x:.5}),(0,i.jsx)(h.OptionExplainerBubble,{id:"mediaCacheSizeInBytesOption"})]}),(0,i.jsx)("div",{style:v.rightRow,children:(0,i.jsx)(l.Checkbox,{checked:null!==N,onChange:en,name:"media-cache-size"})})]}),"audio"===e||null===N?null:(0,i.jsx)(f.NumberSetting,{min:0,max:2097152e3,step:1024,name:"@remotion/media cache size",formatter:e=>`${e} bytes`,onValueChanged:eS,value:N}),"audio"===e?null:(0,i.jsxs)("div",{style:v.optionRow,children:[(0,i.jsxs)("div",{style:v.label,children:["Custom OffthreadVideo cache",(0,i.jsx)(p.Spacing,{x:.5}),(0,i.jsx)(h.OptionExplainerBubble,{id:"offthreadVideoCacheSizeInBytesOption"})]}),(0,i.jsx)("div",{style:v.rightRow,children:(0,i.jsx)(l.Checkbox,{checked:null!==$,onChange:eo,name:"custom-audio-bitrate"})})]}),"audio"===e||null===$?null:(0,i.jsx)(f.NumberSetting,{min:0,max:2097152e3,step:1024,name:"OffthreadVideo cache size",formatter:e=>`${e} bytes`,onValueChanged:ek,value:$}),"audio"===e?null:(0,i.jsxs)("div",{style:v.optionRow,children:[(0,i.jsxs)("div",{style:v.label,children:["OffthreadVideo threads ",(0,i.jsx)(p.Spacing,{x:.5}),(0,i.jsx)(h.OptionExplainerBubble,{id:"offthreadVideoThreadsOption"})]}),(0,i.jsx)("div",{style:v.rightRow,children:(0,i.jsx)(l.Checkbox,{checked:null!==U,onChange:es,name:"offthread-video-threads"})})]}),"audio"===e||null===U?null:(0,i.jsx)(f.NumberSetting,{min:0,max:16,step:1,name:"OffthreadVideo threads",formatter:e=>`${e}x`,onValueChanged:eC,value:U}),(0,i.jsx)(g.RenderModalHr,{}),(0,i.jsxs)("div",{style:v.optionRow,children:[(0,i.jsx)("div",{style:v.label,children:"Disable web security"}),(0,i.jsx)("div",{style:v.rightRow,children:(0,i.jsx)(l.Checkbox,{checked:A,onChange:ec,name:"disable-web-security"})})]}),(0,i.jsxs)("div",{style:v.optionRow,children:[(0,i.jsx)("div",{style:v.label,children:"Ignore certificate errors"}),(0,i.jsx)("div",{style:v.rightRow,children:(0,i.jsx)(l.Checkbox,{checked:I,onChange:ep,name:"ignore-certificate-errors"})})]}),(0,i.jsxs)("div",{style:v.optionRow,children:[(0,i.jsxs)("div",{style:v.label,children:["Headless mode",(0,i.jsx)(p.Spacing,{x:.5}),(0,i.jsx)(h.OptionExplainerBubble,{id:"headlessOption"})]}),(0,i.jsx)("div",{style:v.rightRow,children:(0,i.jsx)(l.Checkbox,{checked:P,onChange:ef,name:"headless"})})]}),(0,i.jsxs)("div",{style:v.optionRow,children:[(0,i.jsxs)("div",{style:v.label,children:["Chrome Mode ",(0,i.jsx)(p.Spacing,{x:.5}),(0,i.jsx)(h.OptionExplainerBubble,{id:"chromeModeOption"})]}),(0,i.jsx)("div",{style:v.rightRow,children:(0,i.jsx)(c.Combobox,{values:eb,selectedId:Y,title:"Chrome mode"})})]}),(0,i.jsxs)("div",{style:v.optionRow,children:[(0,i.jsxs)("div",{style:v.label,children:["OpenGL render backend ",(0,i.jsx)(p.Spacing,{x:.5}),(0,i.jsx)(h.OptionExplainerBubble,{id:"glOption"})]}),(0,i.jsx)("div",{style:v.rightRow,children:(0,i.jsx)(c.Combobox,{values:ey,selectedId:O,title:"OpenGl option"})})]}),(0,i.jsxs)("div",{style:v.optionRow,children:[(0,i.jsxs)("div",{style:v.label,children:["Multi-process Chrome on Linux",(0,i.jsx)(p.Spacing,{x:.5}),(0,i.jsx)(h.OptionExplainerBubble,{id:"enableMultiprocessOnLinuxOption"})]}),(0,i.jsx)("div",{style:v.rightRow,children:(0,i.jsx)(l.Checkbox,{checked:H,onChange:ed,name:"enable-multi-process-on-linux"})})]}),(0,i.jsxs)("div",{style:v.optionRow,children:[(0,i.jsxs)("div",{style:v.label,children:["Dark Mode",(0,i.jsx)(p.Spacing,{x:.5}),(0,i.jsx)(h.OptionExplainerBubble,{id:"darkModeOption"})]}),(0,i.jsx)("div",{style:v.rightRow,children:(0,i.jsx)(l.Checkbox,{checked:er,onChange:em,name:"dark-mode"})})]}),(0,i.jsxs)("div",{style:v.optionRow,children:[(0,i.jsx)("div",{style:v.label,children:"Custom User Agent"}),(0,i.jsx)("div",{style:v.rightRow,children:(0,i.jsx)(l.Checkbox,{checked:null!==G,onChange:el,name:"custom-user-agent"})})]}),null===G?null:(0,i.jsxs)("div",{style:v.optionRow,children:[(0,i.jsx)("div",{style:v.label,children:"User Agent"}),(0,i.jsx)("div",{style:v.rightRow,children:(0,i.jsx)("div",{children:(0,i.jsx)(d.RemotionInput,{style:v.input,value:G,onChange:eh,status:"ok",rightAlign:!0})})})]}),(0,i.jsxs)("div",{style:v.optionRow,children:[(0,i.jsxs)("div",{style:v.label,children:["Create a reproduction ",(0,i.jsx)(h.OptionExplainerBubble,{id:"reproOption"})]}),(0,i.jsx)("div",{style:v.rightRow,children:(0,i.jsx)(l.Checkbox,{checked:Q,onChange:ev,name:"repro"})})]}),(0,i.jsxs)("div",{style:v.optionRow,children:[(0,i.jsxs)("div",{style:v.label,children:["Beep when finished ",(0,i.jsx)(h.OptionExplainerBubble,{id:"beepOnFinishOption"})]}),(0,i.jsx)("div",{style:v.rightRow,children:(0,i.jsx)(l.Checkbox,{checked:Z,onChange:eg,name:"beep-when-finished"})})]}),(0,i.jsx)(g.RenderModalHr,{}),(0,i.jsx)(m.RenderModalEnvironmentVariables,{envVariables:R,setEnvVariables:F})]})}},209438,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.EnforceAudioTrackSetting=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(671927),o=e.r(146575),s=e.r(400157),l=e.r(462098);r.EnforceAudioTrackSetting=({enforceAudioTrack:e,muted:t,setEnforceAudioTrack:r})=>{let u=(0,a.useCallback)(e=>{r(e.target.checked)},[r]);return(0,i.jsxs)("div",{style:l.optionRow,children:[(0,i.jsxs)("div",{style:l.label,children:["Enforce Audio Track",(0,i.jsx)(o.Spacing,{x:.5}),(0,i.jsx)(s.OptionExplainerBubble,{id:"enforceAudioOption"})]}),(0,i.jsx)("div",{style:l.rightRow,children:(0,i.jsx)(n.Checkbox,{disabled:t&&!e,checked:e,onChange:u,name:"enforce-audio-track"})})]})}},902060,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MutedSetting=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(671927),o=e.r(146575),s=e.r(400157),l=e.r(462098);r.MutedSetting=({muted:e,setMuted:t,enforceAudioTrack:r})=>{let u=(0,a.useCallback)(e=>{t(e.target.checked)},[t]);return(0,i.jsxs)("div",{style:l.optionRow,children:[(0,i.jsxs)("div",{style:l.label,children:["Muted",(0,i.jsx)(o.Spacing,{x:.5}),(0,i.jsx)(s.OptionExplainerBubble,{id:"mutedOption"})]}),(0,i.jsx)(o.Spacing,{x:.25}),(0,i.jsx)("div",{style:l.rightRow,children:(0,i.jsx)(n.Checkbox,{checked:e,disabled:r&&!e,onChange:u,name:"muted"})})]})}},851109,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useFileExistence=void 0;let i=e.r(347540),a=e.r(20330),n=e.r(850586);r.useFileExistence=e=>{let[t,r]=(0,i.useState)(!1),{previewServerState:o,subscribeToEvent:s}=(0,i.useContext)(n.StudioServerConnectionCtx),l="connected"===o.type?o.clientId:void 0,u=(0,i.useRef)("");return u.current=e,(0,i.useEffect)(()=>{if(l)return(0,a.subscribeToFileExistenceWatcher)({file:e,clientId:l}).then(t=>{u.current===e&&r(t)}),()=>{(0,a.unsubscribeFromFileExistenceWatcher)({file:e,clientId:l})}},[l,e]),(0,i.useEffect)(()=>{let t=s("watched-file-deleted",t=>{"watched-file-deleted"!==t.type||t.file===u.current&&u.current===e&&r(!1)});return()=>{t()}},[e,s]),(0,i.useEffect)(()=>{let t=s("watched-file-undeleted",t=>{"watched-file-undeleted"!==t.type||t.file===e&&u.current===e&&r(!0)});return()=>{t()}},[e,s]),t}},187011,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RenderModalOutputName=void 0;let i=e.r(222260),a=e.r(310099),n=e.r(97870),o=e.r(146575),s=e.r(462098);r.RenderModalOutputName=({existence:e,inputStyle:t,outName:r,onValueChange:l,validationMessage:u,label:c})=>(0,i.jsxs)("div",{style:s.optionRow,children:[(0,i.jsx)(o.Column,{children:(0,i.jsx)("div",{style:s.label,children:c})}),(0,i.jsx)("div",{style:s.rightRow,children:(0,i.jsxs)("div",{children:[(0,i.jsx)(a.RemotionInput,{status:u?"error":e?"warning":"ok",style:t,type:"text",value:r,onChange:l,rightAlign:!0}),u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Spacing,{y:1,block:!0}),(0,i.jsx)(n.ValidationMessage,{align:"flex-end",message:u,type:"error"})]}):e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Spacing,{y:1,block:!0}),(0,i.jsx)(n.ValidationMessage,{align:"flex-end",message:"Will be overwritten",type:"warning"})]}):null]})})]})},836693,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getStringBeforeSuffix=void 0,r.getStringBeforeSuffix=e=>{let t=e.lastIndexOf(".");return -1===t?e:e.substring(0,t)}},572295,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SeparateAudioOption=r.SeparateAudioOptionInput=void 0;let i=e.r(222260),a=e.r(570382),n=e.r(347540),o=e.r(851109),s=e.r(671927),l=e.r(146575),u=e.r(400157),c=e.r(187011),d=e.r(836693),p=e.r(462098);r.SeparateAudioOptionInput=({separateAudioTo:e,setSeparateAudioTo:t,audioCodec:r})=>{let s=(0,o.useFileExistence)(e),l=(0,n.useCallback)(e=>{t(e.target.value)},[t]),u=(0,n.useMemo)(()=>{let t=a.BrowserSafeApis.getExtensionFromAudioCodec(r);return e.split(".").pop()!==t?`Expected extension: .${t}`:null},[r,e]);return(0,i.jsx)(c.RenderModalOutputName,{existence:s,inputStyle:p.input,onValueChange:l,outName:e,label:"Separate audio to",validationMessage:u})},r.SeparateAudioOption=({separateAudioTo:e,setSeparateAudioTo:t,audioCodec:o,outName:c})=>{let f=(0,n.useCallback)(e=>{if(e.target.checked){let e=a.BrowserSafeApis.getExtensionFromAudioCodec(o);t(`${(0,d.getStringBeforeSuffix)(c)}.${e}`)}else t(null)},[o,c,t]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:p.optionRow,children:[(0,i.jsxs)("div",{style:p.label,children:["Separate audio",(0,i.jsx)(l.Spacing,{x:.5}),(0,i.jsx)(u.OptionExplainerBubble,{id:"separateAudioOption"})]}),(0,i.jsx)("div",{style:p.rightRow,children:(0,i.jsx)(s.Checkbox,{disabled:!1,checked:!!e,onChange:f,name:"separate-audio-to"})})]}),null===e?null:(0,i.jsx)(r.SeparateAudioOptionInput,{separateAudioTo:e,setSeparateAudioTo:t,audioCodec:o})]})}},685726,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.humanReadableAudioCodec=void 0,r.humanReadableAudioCodec=e=>"aac"===e?"AAC":"mp3"===e?"MP3":"pcm-16"===e?"Lossless":"opus"===e?"Opus":void 0},882072,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RenderModalAudio=void 0;let i=e.r(222260),a=e.r(570382),n=e.r(347540),o=e.r(170260),s=e.r(671927),l=e.r(494296),u=e.r(432804),c=e.r(310099),d=e.r(146575),p=e.r(209438),f=e.r(902060),h=e.r(400157),m=e.r(909555),g=e.r(572295),v=e.r(685726),y=e.r(462098),b={flex:1,overflowY:"auto"};r.RenderModalAudio=({muted:e,setMuted:t,renderMode:r,enforceAudioTrack:x,setEnforceAudioTrackState:w,setShouldHaveCustomTargetAudioBitrate:S,shouldHaveCustomTargetAudioBitrate:k,setCustomTargetAudioBitrateValue:C,customTargetAudioBitrate:E,audioCodec:_,codec:T,setAudioCodec:P,forSeamlessAacConcatenation:I,setForSeamlessAacConcatenation:A,separateAudioTo:O,setSeparateAudioTo:M,outName:F})=>{let R=(0,n.useCallback)(e=>{S(e.target.checked)},[S]),D=(0,n.useCallback)(e=>{C(e.target.value)},[C]),j=(0,n.useCallback)(e=>{A(e.target.checked)},[A]),L=(0,n.useCallback)(e=>a.BrowserSafeApis.supportedAudioCodecs[e].map(e=>({label:(0,v.humanReadableAudioCodec)(e),onClick:()=>P(e),key:e,leftItem:T===e?(0,i.jsx)(o.Checkmark,{}):null,id:e,keyHint:null,quickSwitcherLabel:null,subMenu:null,type:"item",value:e})),[T,P]);return(0,i.jsxs)("div",{style:b,className:l.VERTICAL_SCROLLBAR_CLASSNAME,children:["video"===r?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.MutedSetting,{enforceAudioTrack:x,muted:e,setMuted:t}),(0,i.jsx)(m.RenderModalHr,{})]}):null,"video"===r&&L(T).length>=2&&!e?(0,i.jsxs)("div",{style:y.optionRow,children:[(0,i.jsxs)("div",{style:y.label,children:["Audio Codec ",(0,i.jsx)(d.Spacing,{x:.5}),(0,i.jsx)(h.OptionExplainerBubble,{id:"audioCodecOption"})]}),(0,i.jsx)("div",{style:y.rightRow,children:(0,i.jsx)(u.Combobox,{values:L(T),selectedId:_,title:"AudioCodec"})})]}):null,("video"===r||"audio"===r)&&!e&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.EnforceAudioTrackSetting,{muted:e,enforceAudioTrack:x,setEnforceAudioTrack:w}),(0,i.jsx)(m.RenderModalHr,{})]}),"video"!==r||e?null:(0,i.jsx)(g.SeparateAudioOption,{separateAudioTo:O,setSeparateAudioTo:M,audioCodec:_,outName:F}),"aac"!==_||e?null:(0,i.jsxs)("div",{style:y.optionRow,children:[(0,i.jsxs)("div",{style:y.label,children:["For seamless AAC concatenation",(0,i.jsx)(d.Spacing,{x:.5}),(0,i.jsx)(h.OptionExplainerBubble,{id:"forSeamlessAacConcatenationOption"})]}),(0,i.jsx)("div",{style:y.rightRow,children:(0,i.jsx)(s.Checkbox,{disabled:!1,checked:I,onChange:j,name:"enforce-audio-track"})})]}),"still"===r||e?null:(0,i.jsxs)("div",{style:y.optionRow,children:[(0,i.jsxs)("div",{style:y.label,children:["Custom audio bitrate"," ",(0,i.jsx)(h.OptionExplainerBubble,{id:"audioBitrateOption"})]}),(0,i.jsx)("div",{style:y.rightRow,children:(0,i.jsx)(s.Checkbox,{checked:k,onChange:R,name:"custom-audio-bitrate"})})]}),k&&"still"!==r&&!e?(0,i.jsxs)("div",{style:y.optionRow,children:[(0,i.jsx)("div",{style:y.label,children:"Target audio bitrate"}),(0,i.jsx)("div",{style:y.rightRow,children:(0,i.jsx)("div",{children:(0,i.jsx)(c.RemotionInput,{style:y.input,value:E,onChange:D,status:"ok",rightAlign:!0})})})]}):null]})}},255671,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getFramesToRender=void 0,r.getFramesToRender=(e,t)=>{if(0===t)throw Error("everyNthFrame cannot be 0");return Array(e[1]-e[0]+1).fill(!0).map((t,r)=>r+e[0]).filter(e=>e%t==0)}},387717,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NoReactAPIs=void 0;let i=e.r(715155),a=e.r(255671),n=e.r(696525),o=e.r(648677),s=e.r(223520),l=e.r(999684);r.NoReactAPIs={getExtensionOfFilename:o.getExtensionOfFilename,getFileExtensionFromCodec:n.getFileExtensionFromCodec,validateOutputFilename:l.validateOutputFilename,getFramesToRender:a.getFramesToRender,codecSupportsMedia:i.codecSupportsMedia,isAudioCodec:s.isAudioCodec}},905939,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.labelProResProfile=void 0,r.labelProResProfile=e=>{if("4444"===e)return"4444";if("4444-xq"===e)return"4444 XQ (Best)";if("hq"===e)return"HQ";if("proxy"===e)return"Proxy (Worst)";if("light"===e)return"Light";if("standard"===e)return"Standard";throw TypeError(`Unknown ProRes profile: ${e}`)}},116815,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MultiRangeSlider=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o={borderColor:"black",borderStyle:"solid",borderWidth:"2px",height:39,width:220,position:"relative",backgroundColor:n.INPUT_BACKGROUND,marginLeft:8,marginRight:8,borderRadius:2},s={position:"absolute",top:0,backgroundColor:n.BLUE,height:35};r.MultiRangeSlider=({min:e,max:t,start:r,end:n,step:l,onLeftThumbDrag:u,onRightThumbDrag:c})=>{let d=(0,a.useCallback)(r=>Math.round((r-e)/(t-e)*100),[e,t]),p=(0,a.useMemo)(()=>{let e=d(r),t=d(n);return{...s,left:`${e}%`,width:`${t-e}%`}},[n,d,r]),f=(0,a.useCallback)(e=>{u(Math.min(Number(e.target.value),n-1))},[n,u]),h=(0,a.useCallback)(e=>{c(Math.max(Number(e.target.value),r+1))},[c,r]);return(0,i.jsxs)("div",{style:o,children:[(0,i.jsx)("input",{type:"range",min:e,max:t,value:r,step:l,onChange:f,className:"__remotion_thumb"}),(0,i.jsx)("input",{type:"range",min:e,max:t,value:n,step:l,onChange:h,className:"__remotion_thumb"}),(0,i.jsx)("div",{style:p})]})}},414154,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FrameRangeSetting=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(190327),o=e.r(462098),s=e.r(116815);r.FrameRangeSetting=({startFrame:e,endFrame:t,setEndFrame:r,durationInFrames:l,setStartFrame:u})=>{let c=l-1,d=(0,a.useCallback)(e=>{u(e)},[u]),p=(0,a.useCallback)(e=>{r(e)},[r]),f=(0,a.useCallback)(e=>{d(parseInt(e,10))},[d]),h=(0,a.useCallback)(e=>{p(parseInt(e,10))},[p]);return(0,i.jsxs)("div",{style:o.optionRow,children:[(0,i.jsx)("div",{style:o.label,children:"Frame range"}),(0,i.jsxs)("div",{style:o.rightRow,children:[(0,i.jsx)("div",{style:{width:40},children:(0,i.jsx)(n.InputDragger,{min:0,max:t-1,name:"Start frame",value:e,step:1,onTextChange:f,onValueChange:d,status:"ok",rightAlign:!0,style:{width:40}})}),(0,i.jsx)(s.MultiRangeSlider,{min:0,max:c,start:e,end:t,step:1,onLeftThumbDrag:d,onRightThumbDrag:p})," ",(0,i.jsx)("div",{style:{width:40},children:(0,i.jsx)(n.InputDragger,{min:e+1,max:c,name:"End frame",value:t,step:1,onTextChange:h,onValueChange:p,status:"ok",rightAlign:!0,style:{width:40}})})]})]})}},651236,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.humanReadableCodec=void 0,r.humanReadableCodec=e=>{if("aac"===e)return"AAC";if("mp3"===e)return"MP3";if("gif"===e)return"GIF";if("h264"===e)return"H.264";if("h264-mkv"===e)return"H.264 (Matroska)";if("h264-ts"===e)return"H.264 (Transport Stream)";if("h265"===e)return"H.265";if("prores"===e)return"ProRes";if("vp8"===e)return"VP8";if("vp9"===e)return"VP9";if("wav"===e)return"Waveform";throw TypeError(`Got unexpected codec "${e}"`)}},53947,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.humanReadableLogLevel=void 0,r.humanReadableLogLevel=e=>{if("trace"===e)return"Trace";if("verbose"===e)return"Verbose";if("info"===e)return"Info";if("warn"===e)return"Warn";if("error"===e)return"Error";throw TypeError(`Got unexpected log level "${e}"`)}},72593,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RenderModalBasic=void 0;let i=e.r(222260),a=e.r(570382),n=e.r(387717),o=e.r(347540),s=e.r(905939),l=e.r(851109),u=e.r(170260),c=e.r(432804),d=e.r(190327),p=e.r(310099),f=e.r(200539),h=e.r(146575),m=e.r(414154),g=e.r(400157),v=e.r(187011),y=e.r(651236),b=e.r(53947),x=e.r(462098),w={flex:1};r.RenderModalBasic=({renderMode:e,imageFormatOptions:t,outName:r,codec:S,setVideoCodec:k,proResProfile:C,setProResProfile:E,frame:_,setFrame:T,resolvedComposition:P,setOutName:I,setEndFrame:A,endFrame:O,setStartFrame:M,startFrame:F,validationMessage:R,setVerboseLogging:D,logLevel:j})=>{let L=(0,l.useFileExistence)(r),B=(0,o.useMemo)(()=>a.BrowserSafeApis.validCodecs.filter(t=>n.NoReactAPIs.isAudioCodec(t)===("audio"===e)).map(e=>({label:(0,y.humanReadableCodec)(e),onClick:()=>k(e),key:e,leftItem:S===e?(0,i.jsx)(u.Checkmark,{}):null,id:e,keyHint:null,quickSwitcherLabel:null,subMenu:null,type:"item",value:e})),[e,k,S]),N=(0,o.useMemo)(()=>a.BrowserSafeApis.proResProfileOptions.map(e=>({label:(0,s.labelProResProfile)(e),onClick:()=>E(e),key:e,selected:C===e,type:"item",id:e,keyHint:null,leftItem:null,quickSwitcherLabel:null,subMenu:null,value:e})),[C,E]),$=(0,o.useCallback)(e=>{T(e)},[T]),z=(0,o.useCallback)(e=>{T(t=>{let r=parseFloat(e);return Number.isNaN(r)?t:r})},[T]),U=(0,o.useCallback)(e=>{I(e.target.value)},[I]),V=(0,o.useMemo)(()=>["trace","verbose","info","warn","error"].map(e=>({label:(0,b.humanReadableLogLevel)(e),onClick:()=>D(e),leftItem:j===e?(0,i.jsx)(u.Checkmark,{}):null,id:e,keyHint:null,quickSwitcherLabel:null,subMenu:null,type:"item",value:e})),[j,D]);return(0,i.jsxs)("div",{style:w,children:["still"===e||"sequence"===e?(0,i.jsxs)("div",{style:x.optionRow,children:[(0,i.jsx)("div",{style:x.label,children:"Format"}),(0,i.jsx)("div",{style:x.rightRow,children:(0,i.jsx)(f.SegmentedControl,{items:t,needsWrapping:!0})})]}):(0,i.jsxs)("div",{style:x.optionRow,children:[(0,i.jsxs)("div",{style:x.label,children:["Codec",(0,i.jsx)(h.Spacing,{x:.5}),(0,i.jsx)(g.OptionExplainerBubble,{id:"videoCodecOption"})]}),(0,i.jsx)("div",{style:x.rightRow,children:(0,i.jsx)(c.Combobox,{values:B,selectedId:S,title:"Codec"})})]}),"still"===e&&P.durationInFrames>1?(0,i.jsxs)("div",{style:x.optionRow,children:[(0,i.jsx)("div",{style:x.label,children:"Frame"}),(0,i.jsx)("div",{style:x.rightRow,children:(0,i.jsx)(p.RightAlignInput,{children:(0,i.jsx)(d.InputDragger,{value:_,onTextChange:z,placeholder:`0-${P.durationInFrames-1}`,onValueChange:$,name:"frame",step:1,min:0,status:"ok",max:P.durationInFrames-1,rightAlign:!0})})})]}):null,"video"===e&&"prores"===S?(0,i.jsxs)("div",{style:x.optionRow,children:[(0,i.jsx)("div",{style:x.label,children:"ProRes profile"}),(0,i.jsx)("div",{style:x.rightRow,children:(0,i.jsx)(c.Combobox,{title:"proResProfile",selectedId:C,values:N})})]}):null,"still"===e?null:(0,i.jsx)(m.FrameRangeSetting,{durationInFrames:P.durationInFrames,endFrame:O,setEndFrame:A,setStartFrame:M,startFrame:F}),(0,i.jsx)(v.RenderModalOutputName,{existence:L,inputStyle:x.input,outName:r,onValueChange:U,validationMessage:R,label:"sequence"===e?"Folder name":"Output name"}),(0,i.jsxs)("div",{style:x.optionRow,children:[(0,i.jsxs)("div",{style:x.label,children:["Log Level ",(0,i.jsx)(h.Spacing,{x:.5}),(0,i.jsx)(g.OptionExplainerBubble,{id:"logLevelOption"})]}),(0,i.jsx)("div",{style:x.rightRow,children:(0,i.jsx)(c.Combobox,{values:V,selectedId:j,title:"Log Level"})})]})]})}},470150,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NumberOfLoopsSetting=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(190327),o=e.r(310099),s=e.r(462098);r.NumberOfLoopsSetting=({numberOfGifLoops:e,setNumberOfGifLoops:t})=>{let r=(0,a.useCallback)(e=>{t(e)},[t]),l=(0,a.useCallback)(e=>{t(t=>{let r=parseInt(e,10);return Number.isNaN(r)?t:Math.max(r,0)})},[t]);return(0,i.jsxs)("div",{style:s.optionRow,children:[(0,i.jsx)("div",{style:s.label,children:"Number of loops"}),(0,i.jsx)("div",{style:s.rightRow,children:(0,i.jsx)(o.RightAlignInput,{children:(0,i.jsx)(n.InputDragger,{value:e,onTextChange:l,placeholder:"0-",onValueChange:r,name:"number-of-gif-loops",step:1,min:0,status:"ok",rightAlign:!0})})})]})}},216187,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RenderModalGif=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(671927),o=e.r(146575),s=e.r(470150),l=e.r(239229),u=e.r(400157),c=e.r(462098),d={flex:1};r.RenderModalGif=({everyNthFrame:e,limitNumberOfGifLoops:t,numberOfGifLoopsSetting:r,setEveryNthFrameSetting:p,setLimitNumberOfGifLoops:f,setNumberOfGifLoopsSetting:h})=>{let m=(0,a.useCallback)(e=>{f(e.target.checked)},[f]);return(0,i.jsxs)("div",{style:d,children:[(0,i.jsx)(l.NumberSetting,{name:"Every nth frame",min:1,onValueChanged:p,value:e,step:1}),(0,i.jsxs)("div",{style:c.optionRow,children:[(0,i.jsxs)("div",{style:c.label,children:["Limit GIF loops ",(0,i.jsx)(o.Spacing,{x:.5}),(0,i.jsx)(u.OptionExplainerBubble,{id:"numberOfGifLoopsOption"})]}),(0,i.jsx)("div",{style:c.rightRow,children:(0,i.jsx)(n.Checkbox,{checked:t,onChange:m,name:"limitNumberOfGifLoops"})})]}),t?(0,i.jsx)(s.NumberOfLoopsSetting,{numberOfGifLoops:r,setNumberOfGifLoops:h}):null]})}},517406,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.JpegQualitySetting=void 0;let i=e.r(222260),a=e.r(239229);r.JpegQualitySetting=({jpegQuality:e,setJpegQuality:t})=>(0,i.jsx)(a.NumberSetting,{min:1,max:100,step:1,name:"JPEG Quality",onValueChanged:t,value:e,hint:"jpegQualityOption"})},581843,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ScaleSetting=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(239229),s={fontSize:13,color:n.LIGHT_TEXT,fontFamily:"sans-serif",paddingRight:16,textAlign:"right",marginBottom:14,marginTop:-10};r.ScaleSetting=({scale:e,setScale:t,compositionWidth:r,compositionHeight:n})=>{let l=(0,a.useMemo)(()=>{let t=Math.round(r*e),i=Math.round(n*e);return`${t}\xd7${i}`},[r,n,e]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.NumberSetting,{min:.1,max:10,step:.1,name:"Scale",formatter:e=>"number"==typeof e?`${e.toFixed(1)}x`:`${e}x`,onValueChanged:t,value:e,hint:"scaleOption"}),1!==e&&(0,i.jsxs)("div",{style:s,children:["Output resolution: ",l]})]})}},486008,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RenderModalPicture=void 0;let i=e.r(222260),a=e.r(570382),n=e.r(347540),o=e.r(170260),s=e.r(671927),l=e.r(494296),u=e.r(432804),c=e.r(310099),d=e.r(200539),p=e.r(146575),f=e.r(156653),h=e.r(517406),m=e.r(400157),g=e.r(909555),v=e.r(581843),y=e.r(462098),b=["crf","bitrate"],x={flex:1,overflowY:"auto"};r.RenderModalPicture=({renderMode:e,scale:t,setScale:r,pixelFormat:w,imageFormatOptions:S,setQualityControl:k,qualityControlType:C,videoImageFormat:E,setJpegQuality:_,jpegQuality:T,maxCrf:P,minCrf:I,setCrf:A,shouldDisplayQualityControlPicker:O,setCustomTargetVideoBitrateValue:M,crf:F,customTargetVideoBitrate:R,stillImageFormat:D,colorSpace:j,setColorSpace:L,pixelFormatOptions:B,encodingBufferSize:N,encodingMaxRate:$,setEncodingBufferSize:z,setEncodingMaxRate:U,compositionWidth:V,compositionHeight:H})=>{let W=(0,n.useMemo)(()=>a.BrowserSafeApis.validColorSpaces.map(e=>({label:e,onClick:()=>L(e),key:e,id:e,keyHint:null,leftItem:j===e?(0,i.jsx)(o.Checkmark,{}):null,quickSwitcherLabel:null,subMenu:null,type:"item",value:e})),[j,L]),q=(0,n.useMemo)(()=>b.map(e=>({label:"crf"===e?"CRF":"Bitrate",onClick:()=>k(e),key:e,selected:C===e})),[C,k]),G=(0,n.useCallback)(e=>{M(e.target.value)},[M]),Z=(0,n.useCallback)(e=>{z(e.target.checked?"10000k":null)},[z]),K=(0,n.useCallback)(e=>{U(e.target.checked?"5000k":null)},[U]),Q=(0,n.useCallback)(e=>{z(e.target.value)},[z]),X=(0,n.useCallback)(e=>{U(e.target.value)},[U]);return(0,i.jsxs)("div",{style:x,className:l.VERTICAL_SCROLLBAR_CLASSNAME,children:["video"===e?(0,i.jsxs)("div",{style:y.optionRow,children:[(0,i.jsx)("div",{style:y.label,children:"Image Format"}),(0,i.jsx)("div",{style:y.rightRow,children:(0,i.jsx)(d.SegmentedControl,{items:S,needsWrapping:!1})})]}):null,"video"===e&&"jpeg"===E&&(0,i.jsx)(h.JpegQualitySetting,{jpegQuality:T,setJpegQuality:_}),"still"===e&&"jpeg"===D&&(0,i.jsx)(h.JpegQualitySetting,{jpegQuality:T,setJpegQuality:_}),"video"===e&&null!==C?(0,i.jsx)(g.RenderModalHr,{}):null,O&&"video"===e?(0,i.jsxs)("div",{style:y.optionRow,children:[(0,i.jsx)("div",{style:y.label,children:"Quality control"}),(0,i.jsx)("div",{style:y.rightRow,children:(0,i.jsx)(d.SegmentedControl,{items:q,needsWrapping:!0})})]}):null,"crf"===C&&"still"!==e&&"sequence"!==e&&null!==F?(0,i.jsx)(f.CrfSetting,{crf:F,min:I,max:P,setCrf:A,option:"crfOption"}):null,"bitrate"===C&&"video"===e?(0,i.jsxs)("div",{style:y.optionRow,children:[(0,i.jsxs)("div",{style:y.label,children:["Target video bitrate",(0,i.jsx)(p.Spacing,{x:.5}),(0,i.jsx)(m.OptionExplainerBubble,{id:"videoBitrateOption"})]}),(0,i.jsx)("div",{style:y.rightRow,children:(0,i.jsx)("div",{children:(0,i.jsx)(c.RemotionInput,{style:y.input,value:R,onChange:G,status:"ok",rightAlign:!0})})})]}):null,"video"===e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:y.optionRow,children:[(0,i.jsxs)("div",{style:y.label,children:["Custom FFmpeg -bufsize",(0,i.jsx)(p.Spacing,{x:.5}),(0,i.jsx)(m.OptionExplainerBubble,{id:"encodingBufferSizeOption"})]}),(0,i.jsx)("div",{style:y.rightRow,children:(0,i.jsx)(s.Checkbox,{checked:null!==N,onChange:Z,name:"encoding-buffer-size"})})]}),null===N?null:(0,i.jsxs)("div",{style:y.optionRow,children:[(0,i.jsx)("div",{style:y.label,children:"-bufsize value"}),(0,i.jsx)("div",{style:y.rightRow,children:(0,i.jsx)("div",{children:(0,i.jsx)(c.RemotionInput,{style:y.input,value:N,onChange:Q,status:"ok",rightAlign:!0})})})]}),(0,i.jsxs)("div",{style:y.optionRow,children:[(0,i.jsxs)("div",{style:y.label,children:["Custom FFmpeg -maxrate",(0,i.jsx)(p.Spacing,{x:.5}),(0,i.jsx)(m.OptionExplainerBubble,{id:"encodingMaxRateOption"})]}),(0,i.jsx)("div",{style:y.rightRow,children:(0,i.jsx)(s.Checkbox,{checked:null!==$,onChange:K,name:"encoding-max-rate"})})]}),null===$?null:(0,i.jsxs)("div",{style:y.optionRow,children:[(0,i.jsx)("div",{style:y.label,children:"-maxrate value"}),(0,i.jsx)("div",{style:y.rightRow,children:(0,i.jsx)("div",{children:(0,i.jsx)(c.RemotionInput,{style:y.input,value:$,onChange:X,status:"ok",rightAlign:!0})})})]})]}):null,"video"===e?(0,i.jsx)(g.RenderModalHr,{}):null,(0,i.jsx)(v.ScaleSetting,{scale:t,setScale:r,compositionWidth:V,compositionHeight:H}),"video"===e?(0,i.jsx)(g.RenderModalHr,{}):null,"video"===e?(0,i.jsxs)("div",{style:y.optionRow,children:[(0,i.jsx)("div",{style:y.label,children:"Pixel format"}),(0,i.jsx)("div",{style:y.rightRow,children:(0,i.jsx)(u.Combobox,{values:B,selectedId:w,title:"Pixel Format"})})]}):null,"video"===e?(0,i.jsxs)("div",{style:y.optionRow,children:[(0,i.jsxs)("div",{style:y.label,children:["Color space",(0,i.jsx)(p.Spacing,{x:.5}),(0,i.jsx)(m.OptionExplainerBubble,{id:"colorSpaceOption"})]}),(0,i.jsx)("div",{style:y.rightRow,children:(0,i.jsx)(u.Combobox,{values:W,selectedId:j,title:"Color Space"})})]}):null]})}},702242,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getDefaultCodecs=void 0;let i=e.r(570382),a=e.r(387717);r.getDefaultCodecs=({defaultConfigurationVideoCodec:e,compositionDefaultVideoCodec:t,renderType:r,defaultConfigurationAudioCodec:n})=>{var o;let s=null!=(o=null!=t?t:e)?o:"h264",l="aac"===s?"aac":"mp3"===s?"mp3":"wav"===s||"pcm-16"===n?"wav":"mp3"===n?"mp3":"aac";if(a.NoReactAPIs.isAudioCodec(s))return{initialAudioCodec:null,initialRenderType:"audio",initialVideoCodec:s,initialVideoCodecForAudioTab:l,initialVideoCodecForVideoTab:a.NoReactAPIs.isAudioCodec(e)?"h264":e};let u=i.BrowserSafeApis.defaultAudioCodecs[s].compressed;return{initialAudioCodec:null!=n?n:u,initialVideoCodec:s,initialRenderType:r,initialVideoCodecForAudioTab:l,initialVideoCodecForVideoTab:s}}},952671,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isValidSeparateAudioName=r.validateOutnameGui=void 0;let i=e.r(570382),a=["?","*","+",":","%"];r.validateOutnameGui=({outName:e,codec:t,audioCodec:r,renderMode:i,stillImageFormat:a,separateAudioTo:o})=>{try{return n({audioCodec:r,codec:t,outName:e,renderMode:i,stillImageFormat:a,separateAudioTo:o}),{valid:!0}}catch(e){return{valid:!1,error:e}}};let n=({outName:e,codec:t,audioCodec:r,renderMode:n,stillImageFormat:o,separateAudioTo:s})=>{let l=e.substring(e.lastIndexOf(".")+1),u=e.substring(0,e.lastIndexOf(".")),c=i.BrowserSafeApis.defaultFileExtensionMap[t];if(i.BrowserSafeApis.supportedAudioCodecs[t].length>0&&!(r in c.forAudioCodec))throw Error(`Audio codec ${r} is not supported for codec ${t}`);if(("video"===n||"audio"===n)&&i.BrowserSafeApis.validateOutputFilename({codec:t,audioCodecSetting:null!=r?r:null,extension:l,preferLossless:!1,separateAudioTo:s}),u.length<1&&"sequence"!==n)throw Error("The prefix must be at least 1 character long");if("."===u[0]||(()=>{for(let e of u.split("/"))if("."===e[0])return!0;return!1})())throw Error("The output name must not start with a dot");if(u.split("").some(e=>a.includes(e)))throw Error("Filename can't contain the following characters:  ?, *, +, %, :");if("still"===n&&o&&("jpeg"!==o||"jpg"!==l)&&l!==o)throw Error(`The extension ${l} is not supported for still image format ${o}`);if("sequence"===n&&e.includes("."))throw Error("Folder names must not contain a dot")};r.isValidSeparateAudioName=({audioCodec:e,separateAudioTo:t})=>{let r=t.substring(0,t.lastIndexOf(".")),n=i.BrowserSafeApis.getExtensionFromAudioCodec(e);if(t.split(".").pop()!==n)throw Error(`Expected extension: .${n}`);if(r.length<1)throw Error("The prefix must be at least 1 character long");if("."===r[0]||(()=>{for(let e of r.split("/"))if("."===e[0])return!0;return!1})())throw Error("The output name must not start with a dot");if(r.split("").some(e=>a.includes(e)))throw Error("Filename can't contain the following characters:  ?, *, +, %, :")}},896254,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.flexer=r.buttonStyle=r.icon=r.iconContainer=r.horizontalTab=r.leftSidebar=r.horizontalLayout=r.optionsPanel=r.container=r.outerModalStyle=void 0;let i=e.r(921224),a=e.r(605886);r.outerModalStyle={width:(0,a.getMaxModalWidth)(1e3),height:(0,a.getMaxModalHeight)(640),overflow:"hidden",display:"flex",flexDirection:"column"},r.container={display:"flex",flexDirection:"row",alignItems:"center",padding:"12px 16px",borderBottom:"1px solid black"},r.optionsPanel={display:"flex",width:"100%"},r.horizontalLayout={display:"flex",flexDirection:"row",overflowY:"auto",flex:1},r.leftSidebar={padding:12},r.horizontalTab={width:250,display:"flex",flexDirection:"row",alignItems:"center",textAlign:"left",fontSize:16,fontWeight:"bold",paddingLeft:15,paddingTop:12,paddingBottom:12},r.iconContainer={width:20,height:20,marginRight:15,display:"inline-flex",justifyContent:"center",alignItems:"center"},r.icon={color:"currentcolor",height:20},r.buttonStyle={backgroundColor:i.BLUE,color:"white"},r.flexer={flex:1}},620872,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RenderModalWithLoader=void 0;let i=e.r(222260),a=e.r(570382),n=e.r(213637),o=e.r(347540),s=e.r(597066),l=e.r(921224),u=e.r(134137),c=e.r(189312),d=e.r(362087),p=e.r(170260),f=e.r(44600),h=e.r(21793),m=e.r(261228),g=e.r(434063),v=e.r(369225),y=e.r(66343),b=e.r(137798),x=e.r(839270),w=e.r(652693),S=e.r(494296),k=e.r(80047),C=e.r(454528),E=e.r(132726),_=e.r(20330),T=e.r(200539),P=e.r(324502),I=e.r(156653),A=e.r(860979),O=e.r(749188),M=e.r(882072),F=e.r(72593),R=e.r(216187),D=e.r(486008),j=e.r(503233),L=e.r(702242),B=e.r(836693),N=e.r(952671),$=e.r(896254),z={type:"idle"},U=(e,t)=>"start"===t.type?{type:"load"}:"fail"===t.type?{type:"error"}:"succeed"===t.type?{type:"success"}:e,V=({initialFrame:e,initialVideoImageFormat:t,initialStillImageFormat:r,initialJpegQuality:C,initialScale:V,initialLogLevel:H,initialConcurrency:W,maxConcurrency:q,minConcurrency:G,initialMuted:Z,initialEnforceAudioTrack:K,initialProResProfile:Q,initialx264Preset:X,initialPixelFormat:J,initialVideoBitrate:Y,initialAudioBitrate:ee,initialEveryNthFrame:et,initialNumberOfGifLoops:er,initialDelayRenderTimeout:ei,initialOffthreadVideoCacheSizeInBytes:ea,initialEnvVariables:en,initialDisableWebSecurity:eo,initialGl:es,initialHeadless:el,initialIgnoreCertificateErrors:eu,initialEncodingBufferSize:ec,initialEncodingMaxRate:ed,initialOffthreadVideoThreads:ep,initialMediaCacheSizeInBytes:ef,initialDarkMode:eh,initialUserAgent:em,defaultProps:eg,inFrameMark:ev,outFrameMark:ey,initialColorSpace:eb,initialMultiProcessOnLinux:ex,defaultConfigurationAudioCodec:ew,defaultConfigurationVideoCodec:eS,initialBeep:ek,initialRepro:eC,initialForSeamlessAacConcatenation:eE,renderTypeOfLastRender:e_,initialHardwareAcceleration:eT,defaultMetadata:eP,initialChromeMode:eI,renderDefaults:eA})=>{let{setSelectedModal:eO}=(0,o.useContext)(b.ModalsContext),eM=(0,o.useContext)(j.ResolvedCompositionContext);if(!eM)throw Error("Should not be able to render without resolving comp first");let{resolved:{result:eF},unresolved:eR}=eM,eD=(0,o.useRef)(!0),[ej]=(0,o.useState)(()=>void 0===eF.durationInFrames||eF.durationInFrames>1),[{initialAudioCodec:eL,initialRenderType:eB,initialVideoCodec:eN,initialVideoCodecForAudioTab:e$,initialVideoCodecForVideoTab:ez}]=(0,o.useState)(()=>(0,L.getDefaultCodecs)({defaultConfigurationVideoCodec:eS,compositionDefaultVideoCodec:eF.defaultCodec,defaultConfigurationAudioCodec:ew,renderType:null!=e_?e_:ej?"video":"still"})),[eU,eV]=(0,o.useReducer)(U,z),[eH,eW]=(0,o.useState)(()=>e),[eq,eG]=(0,o.useState)(!1),[eZ,eK]=(0,o.useState)(()=>r),[eQ,eX]=(0,o.useState)(()=>{var e;return null!=(e=null!=t?t:eF.defaultVideoImageFormat)?e:eA.videoImageFormat}),[eJ,eY]=(0,o.useState)(()=>"jpeg"===r?"jpeg":"png"),[e0,e1]=(0,o.useState)(()=>W),[e2,e4]=(0,o.useState)(()=>ez),[e3,e6]=(0,o.useState)(()=>eL),[e8,e5]=(0,o.useState)(null),[e7,e9]=(0,o.useState)(()=>(0,u.envVariablesObjectToArray)(en).filter(([e])=>"NODE_ENV"!==e)),[te]=(0,o.useState)(()=>(0,n.getDefaultOutLocation)({compositionName:eF.id,defaultExtension:"still"===eB?r:ej?a.BrowserSafeApis.getFileExtensionFromCodec(eN,eL):r,type:"asset",compositionDefaultOutName:eF.defaultOutName,clientSideRender:!1})),[tt,tr]=(0,o.useState)(()=>e$),[ti,ta]=(0,o.useState)(()=>Z),[tn,to]=(0,o.useState)(()=>eC),[ts,tl]=(0,o.useState)(()=>K),[tu,tc]=(0,o.useState)(()=>eE),[td,tp]=(0,o.useState)(eB),[tf,th]=(0,o.useState)(()=>C),[tm,tg]=(0,o.useState)(()=>V),[tv,ty]=(0,o.useState)(()=>H),[tb,tx]=(0,o.useState)(!1),[tw,tS]=(0,o.useState)(()=>eo),[tk,tC]=(0,o.useState)(()=>el),[tE,t_]=(0,o.useState)(()=>ek),[tT,tP]=(0,o.useState)(()=>eu),[tI,tA]=(0,o.useState)(()=>ex),[tO,tM]=(0,o.useState)(()=>eh),[tF,tR]=(0,o.useState)(()=>null!=es?es:"default"),[tD,tj]=(0,o.useState)(()=>eb),[tL,tB]=(0,o.useState)(()=>null===em||""===em.trim()?null:em),tN=(0,o.useMemo)(()=>({headless:tk,disableWebSecurity:tw,ignoreCertificateErrors:tT,gl:"default"===tF?null:tF,userAgent:null===tL||""===tL.trim()?null:tL,enableMultiProcessOnLinux:tI,darkMode:tO}),[tk,tw,tT,tF,tL,tI,tO]),[t$,tz]=(0,o.useState)(()=>te),[tU,tV]=(0,o.useState)(()=>null!=ey?ey:null),[tH,tW]=(0,o.useState)(()=>null!=ev?ev:null),[tq,tG]=(0,o.useState)(()=>{var e;return null!=(e=null!=Q?Q:eF.defaultProResProfile)?e:"hq"}),[tZ,tK]=(0,o.useState)(()=>X),[tQ,tX]=(0,o.useState)(()=>eT),[tJ,tY]=(0,o.useState)(()=>{var e;return null!=(e=null!=J?J:eF.defaultPixelFormat)?e:eA.pixelFormat}),[t0,t1]=(0,o.useState)(()=>null===Y?"crf":"bitrate"),[t2,t4]=(0,o.useState)(()=>null!==ee),[t3,t6]=(0,o.useState)(()=>null!=ee?ee:"320K"),[t8,t5]=(0,o.useState)(()=>null!=Y?Y:"1M"),[t7,t9]=(0,o.useState)(()=>null!=ed?ed:null),[re,rt]=(0,o.useState)(()=>null!=ec?ec:null),[rr,ri]=(0,o.useState)(()=>null!==er),[ra,rn]=(0,o.useState)(()=>null!=er?er:0),[ro,rs]=(0,o.useState)(()=>ei),[rl,ru]=(0,o.useState)(()=>eI),[rc,rd]=(0,o.useState)(ea),[rp,rf]=(0,o.useState)(ef),[rh,rm]=(0,o.useState)(()=>ep),rg=(0,o.useMemo)(()=>"audio"===td?tt:e2,[tt,td,e2]),rv=(0,o.useMemo)(()=>"gif"===rg&&rr?ra:null,[rg,rr,ra]),ry=(0,o.useMemo)(()=>t2?t3:null,[t3,t2]),rb=a.BrowserSafeApis.codecSupportsCrf(rg),rx=a.BrowserSafeApis.codecSupportsVideoBitrate(rg),rw=(0,o.useMemo)(()=>rb&&rx&&"if-possible"!==tQ&&"required"!==tQ,[tQ,rb,rx]),rS=(0,o.useMemo)(()=>"if-possible"===tQ||"required"===tQ?rx?"bitrate":null:rw?t0:rb?"crf":rx?"bitrate":null,[tQ,t0,rw,rb,rx]),rk=(0,o.useMemo)(()=>"bitrate"===rS?t8:null,[t8,rS]),{crf:rC,maxCrf:rE,minCrf:r_,setCrf:rT}=(0,I.useCrfState)(rg),rP=(0,o.useCallback)(e=>{!1!==eD.current&&eV(e)},[]),rI=(0,o.useMemo)(()=>"video"===td&&ti,[ti,td]),rA=(0,o.useMemo)(()=>("video"===td||"audio"===td)&&ts,[ts,td]),rO=(0,o.useMemo)(()=>"video"===td&&"prores"===rg?tq:null,[rg,tq,td]),rM=(0,o.useMemo)(()=>"video"===td&&"h264"===rg?tZ:null,[rg,tZ,td]),[rF,rR]=(0,o.useState)(()=>eg),[rD]=(0,o.useState)(()=>eP),rj=(0,o.useMemo)(()=>null===tU?eF.durationInFrames-1:Math.max(0,Math.min(eF.durationInFrames-1,tU)),[eF.durationInFrames,tU]),rL=(0,o.useMemo)(()=>null===tH?0:Math.max(0,Math.min(rj-1,tH)),[rj,tH]),rB=(0,o.useMemo)(()=>{let e=Math.floor(eH);return Math.max(0,Math.min(eF.durationInFrames-1,e))},[eF.durationInFrames,eH]),rN=(0,o.useCallback)((e,t)=>null!==t&&a.BrowserSafeApis.supportedAudioCodecs[e].includes(t)?t:a.BrowserSafeApis.defaultAudioCodecs[e].compressed,[]),r$=(0,o.useCallback)(e=>{"still"===e.type?tz(t=>(0,B.getStringBeforeSuffix)(t)+"."+e.imageFormat):"sequence"===e.type?tz(e=>(0,B.getStringBeforeSuffix)(e)):tz(t=>{let r=a.BrowserSafeApis.getFileExtensionFromCodec(e.codec,rN(e.codec,e.audioCodec));return(0,B.getStringBeforeSuffix)(t)+"."+r})},[rN]),rz=(0,o.useCallback)(e=>{e6(e),r$({type:"render",codec:e2,audioCodec:e}),e5(t=>{if(null===t)return null;let r=a.BrowserSafeApis.getExtensionFromAudioCodec(e);return(0,B.getStringBeforeSuffix)(t)+"."+r})},[r$,e2]),rU=(0,o.useCallback)(e=>{"audio"===td?tr(e):e4(e),r$({type:"render",codec:e,audioCodec:rN(e,e3)})},[e3,rN,td,r$]),rV=(0,o.useCallback)(e=>{eK(e),r$({type:"still",imageFormat:e})},[r$]),{setSidebarCollapsedState:rH}=(0,o.useContext)(x.SidebarContext),rW=(0,o.useCallback)(()=>{var e;rH({left:null,right:"expanded"}),(0,E.persistSelectedOptionsSidebarPanel)("renders"),null==(e=E.optionsSidebarTabs.current)||e.selectRendersPanel(),rP({type:"start"}),(0,_.addStillRenderJob)({compositionId:eF.id,outName:t$,imageFormat:eZ,jpegQuality:tf,frame:rB,scale:tm,logLevel:tv,chromiumOptions:tN,delayRenderTimeout:ro,envVariables:(0,u.envVariablesArrayToObject)(e7),inputProps:rF,offthreadVideoCacheSizeInBytes:rc,multiProcessOnLinux:tI,beepOnFinish:tE,metadata:rD,chromeMode:rl,offthreadVideoThreads:rh,mediaCacheSizeInBytes:rp}).then(()=>{rP({type:"succeed"}),eO(null)}).catch(()=>{rP({type:"fail"})})},[rH,rP,eF.id,t$,eZ,tf,rB,tm,tv,tN,ro,e7,rF,rc,tI,tE,eO,rD,rl,rh,rp]),[rq,rG]=(0,o.useState)(()=>et),rZ=(0,o.useMemo)(()=>"gif"===rg?rq:1,[rg,rq]),rK=rN(rg,e3),rQ=(0,o.useMemo)(()=>a.BrowserSafeApis.validPixelFormatsForCodec(rg),[rg]),rX=(0,o.useMemo)(()=>rQ.includes(tJ)?tJ:rQ[0],[rQ,tJ]),rJ=(0,o.useCallback)(()=>{var e;rH({left:null,right:"expanded"}),(0,E.persistSelectedOptionsSidebarPanel)("renders"),null==(e=E.optionsSidebarTabs.current)||e.selectRendersPanel(),rP({type:"start"}),(0,_.addVideoRenderJob)({compositionId:eF.id,outName:t$,imageFormat:eQ,jpegQuality:"jpeg"===eZ?tf:null,scale:tm,logLevel:tv,codec:rg,concurrency:e0,crf:"crf"===rS&&"if-possible"!==tQ&&"required"!==tQ?rC:null,endFrame:rj,startFrame:rL,muted:rI,enforceAudioTrack:rA,proResProfile:rO,x264Preset:rM,pixelFormat:rX,audioBitrate:ry,videoBitrate:rk,everyNthFrame:rZ,numberOfGifLoops:rv,delayRenderTimeout:ro,audioCodec:rK,disallowParallelEncoding:tb,chromiumOptions:tN,envVariables:(0,u.envVariablesArrayToObject)(e7),inputProps:rF,offthreadVideoCacheSizeInBytes:rc,colorSpace:tD,multiProcessOnLinux:tI,encodingBufferSize:re,encodingMaxRate:t7,beepOnFinish:tE,repro:tn,forSeamlessAacConcatenation:tu,separateAudioTo:e8,metadata:rD,hardwareAcceleration:tQ,chromeMode:rl,offthreadVideoThreads:rh,mediaCacheSizeInBytes:rp}).then(()=>{rP({type:"succeed"}),eO(null)}).catch(()=>{rP({type:"fail"})})},[rH,rP,eF.id,t$,eQ,eZ,tf,tm,tv,rg,e0,rS,rC,rj,rL,rI,rA,rO,rM,rX,ry,rk,rZ,rv,ro,rK,tb,tN,e7,rF,rc,tD,tI,re,t7,tE,tn,tu,e8,eO,rD,tQ,rl,rh,rp]),rY=(0,o.useCallback)(()=>{var e;rH({left:null,right:"expanded"}),(0,E.persistSelectedOptionsSidebarPanel)("renders"),null==(e=E.optionsSidebarTabs.current)||e.selectRendersPanel(),rP({type:"start"}),(0,_.addSequenceRenderJob)({compositionId:eF.id,outName:t$,imageFormat:eJ,scale:tm,logLevel:tv,concurrency:e0,endFrame:rj,jpegQuality:tf,startFrame:rL,delayRenderTimeout:ro,chromiumOptions:tN,envVariables:(0,u.envVariablesArrayToObject)(e7),inputProps:rF,offthreadVideoCacheSizeInBytes:rc,disallowParallelEncoding:tb,multiProcessOnLinux:tI,beepOnFinish:tE,repro:tn,metadata:rD,chromeMode:rl,offthreadVideoThreads:rh,mediaCacheSizeInBytes:rp}).then(()=>{rP({type:"succeed"}),eO(null)}).catch(()=>{rP({type:"fail"})})},[rH,rP,eF.id,t$,eJ,tm,tv,e0,rj,tf,rL,ro,tN,e7,rF,rc,tb,tI,tE,tn,eO,rD,rl,rh,rp]);(0,o.useEffect)(()=>()=>{eD.current=!1},[]);let r0=(0,o.useMemo)(()=>"still"===td?[{label:"PNG",onClick:()=>rV("png"),key:"png",selected:"png"===eZ},{label:"JPEG",onClick:()=>rV("jpeg"),key:"jpeg",selected:"jpeg"===eZ},{label:"PDF",onClick:()=>rV("pdf"),key:"pdf",selected:"pdf"===eZ},{label:"WebP",onClick:()=>rV("webp"),key:"webp",selected:"webp"===eZ}]:"sequence"===td?[{label:"PNG",onClick:()=>eY("png"),key:"png",selected:"png"===eJ},{label:"JPEG",onClick:()=>eY("jpeg"),key:"jpeg",selected:"jpeg"===eJ}]:[{label:"PNG",onClick:()=>eX("png"),key:"png",selected:"png"===eQ},{label:"JPEG",onClick:()=>eX("jpeg"),key:"jpeg",selected:"jpeg"===eQ}],[td,eQ,eZ,rV,eJ]),r1=(0,o.useCallback)(e=>{tp(e),"audio"===e&&r$({type:"render",codec:tt,audioCodec:rN(tt,e3)}),"video"===e&&r$({type:"render",codec:e2,audioCodec:rN(e2,e3)}),"still"===e&&r$({type:"still",imageFormat:eZ}),"sequence"===e&&r$({type:"sequence"})},[tt,e3,rN,r$,eZ,e2]),r2=(0,o.useMemo)(()=>(null==eF?void 0:eF.durationInFrames)<2?[{label:"Still",onClick:()=>{r1("still")},key:"still",selected:"still"===td}]:[{label:"Still",onClick:()=>{r1("still")},key:"still",selected:"still"===td},{label:"Video",onClick:()=>{r1("video")},key:"video",selected:"video"===td},{label:"Audio",onClick:()=>{r1("audio")},key:"audio",selected:"audio"===td},{label:"Image sequence",onClick:()=>{r1("sequence")},key:"sequence",selected:"sequence"===td}],[null==eF?void 0:eF.durationInFrames,td,r1]),r4=(0,N.validateOutnameGui)({outName:t$,codec:rg,audioCodec:rK,renderMode:td,stillImageFormat:eZ,separateAudioTo:e8}),{tab:r3,setTab:r6,shownTabs:r8}=(0,c.useRenderModalSections)(td,rg),{registerKeybinding:r5}=(0,d.useKeybinding)(),r7="load"===eU.type||!r4.valid,r9=(0,o.useCallback)(()=>{"still"===td?rW():"sequence"===td?rY():rJ()},[td,rW,rY,rJ]);(0,o.useEffect)(()=>{if(r7)return;let e=r5({callback(){r9()},commandCtrlKey:!0,key:"Enter",event:"keydown",preventDefault:!0,triggerIfInputFieldFocused:!0,keepRegisteredWhenNotHighestContext:!1});return()=>{e.unregister()}},[r5,r7,r9]);let ie=(0,o.useMemo)(()=>rQ.map(e=>({label:e,onClick:()=>tY(e),key:e,id:e,keyHint:null,leftItem:rX===e?(0,i.jsx)(p.Checkmark,{}):null,quickSwitcherLabel:null,subMenu:null,type:"item",value:e})),[rQ,rX]);return(0,i.jsxs)("div",{style:$.outerModalStyle,children:[(0,i.jsx)(k.ModalHeader,{title:`Render ${eF.id}`}),(0,i.jsxs)("div",{style:$.container,children:[(0,i.jsx)(T.SegmentedControl,{items:r2,needsWrapping:!1}),(0,i.jsx)("div",{style:$.flexer}),(0,i.jsxs)(w.Button,{autoFocus:!0,onClick:r9,disabled:r7,style:{...$.buttonStyle,backgroundColor:r4.valid?l.BLUE:l.BLUE_DISABLED},children:["idle"===eU.type?`Render ${td}`:"Rendering...",(0,i.jsx)(s.ShortcutHint,{keyToPress:"",cmdOrCtrl:!0})]})]}),(0,i.jsxs)("div",{style:$.horizontalLayout,children:[(0,i.jsxs)("div",{style:$.leftSidebar,children:[r8.includes("general")?(0,i.jsxs)(P.VerticalTab,{style:$.horizontalTab,selected:"general"===r3,onClick:()=>r6("general"),children:[(0,i.jsx)("div",{style:$.iconContainer,children:(0,i.jsx)(m.FileIcon,{style:$.icon})}),"General"]}):null,r8.includes("data")?(0,i.jsxs)(P.VerticalTab,{style:$.horizontalTab,selected:"data"===r3,onClick:()=>r6("data"),children:[(0,i.jsx)("div",{style:$.iconContainer,children:(0,i.jsx)(h.DataIcon,{style:$.icon})}),"Input Props"]}):null,r8.includes("picture")?(0,i.jsxs)(P.VerticalTab,{style:$.horizontalTab,selected:"picture"===r3,onClick:()=>r6("picture"),children:[(0,i.jsx)("div",{style:$.iconContainer,children:(0,i.jsx)(g.PicIcon,{style:$.icon})}),"Picture"]}):null,r8.includes("audio")?(0,i.jsxs)(P.VerticalTab,{style:$.horizontalTab,selected:"audio"===r3,onClick:()=>r6("audio"),children:[(0,i.jsx)("div",{style:$.iconContainer,children:(0,i.jsx)(f.AudioIcon,{style:$.icon})}),"Audio"]}):null,r8.includes("gif")?(0,i.jsxs)(P.VerticalTab,{style:$.horizontalTab,selected:"gif"===r3,onClick:()=>r6("gif"),children:[(0,i.jsx)("div",{style:$.iconContainer,children:(0,i.jsx)(y.GifIcon,{style:$.icon})}),"GIF"]}):null,r8.includes("advanced")?(0,i.jsxs)(P.VerticalTab,{style:$.horizontalTab,selected:"advanced"===r3,onClick:()=>r6("advanced"),children:[(0,i.jsx)("div",{style:$.iconContainer,children:(0,i.jsx)(v.GearIcon,{style:$.icon})}),"Other"]}):null]}),(0,i.jsx)("div",{style:$.optionsPanel,className:S.VERTICAL_SCROLLBAR_CLASSNAME,children:"general"===r3?(0,i.jsx)(F.RenderModalBasic,{codec:rg,resolvedComposition:eF,frame:rB,imageFormatOptions:r0,outName:t$,proResProfile:rO,renderMode:td,setVideoCodec:rU,setFrame:eW,setOutName:tz,setProResProfile:tG,endFrame:rj,setEndFrame:tV,setStartFrame:tW,setVerboseLogging:ty,logLevel:tv,startFrame:rL,validationMessage:r4.valid?null:r4.error.message}):"picture"===r3?(0,i.jsx)(D.RenderModalPicture,{renderMode:td,scale:tm,setScale:tg,pixelFormat:rX,pixelFormatOptions:ie,imageFormatOptions:r0,crf:rC,setCrf:rT,customTargetVideoBitrate:t8,maxCrf:rE,minCrf:r_,jpegQuality:tf,qualityControlType:rS,setJpegQuality:th,setColorSpace:tj,colorSpace:tD,setCustomTargetVideoBitrateValue:t5,setQualityControl:t1,videoImageFormat:eQ,stillImageFormat:eZ,shouldDisplayQualityControlPicker:rw,encodingBufferSize:re,setEncodingBufferSize:rt,encodingMaxRate:t7,setEncodingMaxRate:t9,compositionWidth:eF.width,compositionHeight:eF.height}):"audio"===r3?(0,i.jsx)(M.RenderModalAudio,{muted:rI,renderMode:td,setMuted:ta,codec:rg,audioCodec:rK,setAudioCodec:rz,enforceAudioTrack:rA,setEnforceAudioTrackState:tl,customTargetAudioBitrate:t3,setCustomTargetAudioBitrateValue:t6,setShouldHaveCustomTargetAudioBitrate:t4,shouldHaveCustomTargetAudioBitrate:t2,forSeamlessAacConcatenation:tu,setForSeamlessAacConcatenation:tc,separateAudioTo:e8,setSeparateAudioTo:e5,outName:t$}):"gif"===r3?(0,i.jsx)(R.RenderModalGif,{everyNthFrame:rZ,limitNumberOfGifLoops:rr,numberOfGifLoopsSetting:ra,setEveryNthFrameSetting:rG,setLimitNumberOfGifLoops:ri,setNumberOfGifLoopsSetting:rn}):"data"===r3?(0,i.jsx)(A.DataEditor,{defaultProps:rF,setDefaultProps:rR,unresolvedComposition:eR,mayShowSaveButton:!1,propsEditType:"input-props",saving:eq,setSaving:eG,readOnlyStudio:!1}):(0,i.jsx)(O.RenderModalAdvanced,{x264Preset:rM,setx264Preset:tK,concurrency:e0,maxConcurrency:q,minConcurrency:G,renderMode:td,setConcurrency:e1,delayRenderTimeout:ro,setDelayRenderTimeout:rs,disallowParallelEncoding:tb,setDisallowParallelEncoding:tx,setDisableWebSecurity:tS,setIgnoreCertificateErrors:tP,setHeadless:tC,headless:tk,ignoreCertificateErrors:tT,disableWebSecurity:tw,openGlOption:tF,setOpenGlOption:tR,setEnvVariables:e9,envVariables:e7,offthreadVideoCacheSizeInBytes:rc,setMediaCacheSizeInBytes:rf,mediaCacheSizeInBytes:rp,setOffthreadVideoCacheSizeInBytes:rd,offthreadVideoThreads:rh,setOffthreadVideoThreads:rm,enableMultiProcessOnLinux:tI,setChromiumMultiProcessOnLinux:tA,codec:rg,userAgent:tL,setUserAgent:tB,setBeep:t_,beep:tE,repro:tn,setRepro:to,hardwareAcceleration:tQ,setHardwareAcceleration:tX,chromeModeOption:rl,setChromeModeOption:ru,darkMode:tO,setDarkMode:tM})})]})]})};r.RenderModalWithLoader=e=>(0,i.jsx)(C.DismissableModal,{children:(0,i.jsx)(j.ResolveCompositionBeforeModal,{compositionId:e.compositionId,children:(0,i.jsx)(V,{...e})})})},912714,(e,t,r)=>{t.exports=e.x("node:fs/promises",()=>require("node:fs/promises"))},29282,e=>{"use strict";function t(e){if(!e)throw Error("Assertion failed.")}let r=e=>{let t=(e%360+360)%360;if(0===t||90===t||180===t||270===t)return t;throw Error(`Invalid rotation ${e}.`)},i=e=>e&&e[e.length-1],a=e=>e>=0&&e<0x100000000;class n{constructor(e){this.bytes=e,this.pos=0}seekToByte(e){this.pos=8*e}readBit(){let e=Math.floor(this.pos/8),t=this.bytes[e]??0,r=7-(7&this.pos);return this.pos++,(t&1<<r)>>r}readBits(e){if(1===e)return this.readBit();let t=0;for(let r=0;r<e;r++)t<<=1,t|=this.readBit();return t}writeBits(e,t){let r=this.pos+e;for(let e=this.pos;e<r;e++){let i=Math.floor(e/8),a=this.bytes[i],n=7-(7&e);a&=~(1<<n),a|=(t&1<<r-e-1)>>r-e-1<<n,this.bytes[i]=a}this.pos=r}readAlignedByte(){if(this.pos%8!=0)throw Error("Bitstream is not byte-aligned.");let e=this.pos/8,t=this.bytes[e]??0;return this.pos+=8,t}skipBits(e){this.pos+=e}getBitsLeft(){return 8*this.bytes.length-this.pos}clone(){let e=new n(this.bytes);return e.pos=this.pos,e}}let o=e=>{let t=0;for(;0===e.readBits(1)&&t<32;)t++;if(t>=32)throw Error("Invalid exponential-Golomb code.");return(1<<t)-1+e.readBits(t)},s=e=>{let t=o(e);return(1&t)==0?-(t>>1):t+1>>1},l=e=>e.constructor===Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e),u=e=>e.constructor===DataView?e:ArrayBuffer.isView(e)?new DataView(e.buffer,e.byteOffset,e.byteLength):new DataView(e),c=new TextDecoder,d=new TextEncoder,p=e=>Object.fromEntries(Object.entries(e).map(([e,t])=>[t,e])),f={bt709:1,bt470bg:5,smpte170m:6,bt2020:9,smpte432:12},h=p(f),m={bt709:1,smpte170m:6,linear:8,"iec61966-2-1":13,pq:16,hlg:18},g=p(m),v={rgb:0,bt709:1,bt470bg:5,smpte170m:6,"bt2020-ncl":9},y=p(v),b=e=>!!e&&!!e.primaries&&!!e.transfer&&!!e.matrix&&void 0!==e.fullRange,x=e=>e instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer||ArrayBuffer.isView(e);class w{constructor(){this.currentPromise=Promise.resolve(),this.pending=0}async acquire(){let e,t=new Promise(t=>{let r=!1;e=()=>{r||(t(),this.pending--,r=!0)}}),r=this.currentPromise;return this.currentPromise=t,this.pending++,await r,e}}let S=(e,t,r)=>{let i=0,a=e.length-1,n=-1;for(;i<=a;){let o=i+(a-i+1)/2|0;r(e[o])<=t?(n=o,i=o+1):a=o-1}return n},k=()=>{let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}},C=e=>{throw Error(`Unexpected value: ${e}`)},E=(e,t,r)=>{let i=e.getUint8(t),a=e.getUint8(t+1),n=e.getUint8(t+2);return r?i|a<<8|n<<16:i<<16|a<<8|n},_=(e,t,r,i)=>{r>>>=0,r&=0xffffff,i?(e.setUint8(t,255&r),e.setUint8(t+1,r>>>8&255),e.setUint8(t+2,r>>>16&255)):(e.setUint8(t,r>>>16&255),e.setUint8(t+1,r>>>8&255),e.setUint8(t+2,255&r))},T=(e,t,r)=>Math.max(t,Math.min(r,e)),P=(e,t)=>Math.round(e/t)*t,I=/^[a-z]{3}$/,A=1e6*(1+Number.EPSILON);class O{constructor(){this.currentPromise=Promise.resolve()}call(e){return this.currentPromise=this.currentPromise.then(e)}}let M=null,F=null,R=()=>null!==F?F:F="u">typeof navigator&&navigator.userAgent?.includes("Firefox"),D=null,j=()=>null!==D?D:D=!!("u">typeof navigator&&(navigator.vendor?.includes("Google Inc")||/Chrome/.test(navigator.userAgent))),L=null,B=()=>{if(null!==L)return L;if("u"<typeof navigator)return null;let e=/\bChrome\/(\d+)/.exec(navigator.userAgent);return e?L=Number(e[1]):null},N=function*(e){for(let t in e){let r=e[t];void 0!==r&&(yield{key:t,value:r})}},$=e=>{switch(e.toLowerCase()){case"image/jpeg":case"image/jpg":return".jpg";case"image/png":return".png";case"image/gif":return".gif";case"image/webp":return".webp";case"image/bmp":return".bmp";case"image/svg+xml":return".svg";case"image/tiff":return".tiff";case"image/avif":return".avif";case"image/x-icon":case"image/vnd.microsoft.icon":return".ico";default:return null}},z=(e,t)=>{if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},U=()=>{Symbol.dispose??=Symbol("Symbol.dispose")},V=["avc","hevc","vp9","av1","vp8"],H=["pcm-s16","pcm-s16be","pcm-s24","pcm-s24be","pcm-s32","pcm-s32be","pcm-f32","pcm-f32be","pcm-f64","pcm-f64be","pcm-u8","pcm-s8","ulaw","alaw"],W=["aac","opus","mp3","vorbis","flac"],q=[...W,...H],G=["webvtt"],Z=[{maxMacroblocks:99,maxBitrate:64e3,maxDpbMbs:396,level:10},{maxMacroblocks:396,maxBitrate:192e3,maxDpbMbs:900,level:11},{maxMacroblocks:396,maxBitrate:384e3,maxDpbMbs:2376,level:12},{maxMacroblocks:396,maxBitrate:768e3,maxDpbMbs:2376,level:13},{maxMacroblocks:396,maxBitrate:2e6,maxDpbMbs:2376,level:20},{maxMacroblocks:792,maxBitrate:4e6,maxDpbMbs:4752,level:21},{maxMacroblocks:1620,maxBitrate:4e6,maxDpbMbs:8100,level:22},{maxMacroblocks:1620,maxBitrate:1e7,maxDpbMbs:8100,level:30},{maxMacroblocks:3600,maxBitrate:14e6,maxDpbMbs:18e3,level:31},{maxMacroblocks:5120,maxBitrate:2e7,maxDpbMbs:20480,level:32},{maxMacroblocks:8192,maxBitrate:2e7,maxDpbMbs:32768,level:40},{maxMacroblocks:8192,maxBitrate:5e7,maxDpbMbs:32768,level:41},{maxMacroblocks:8704,maxBitrate:5e7,maxDpbMbs:34816,level:42},{maxMacroblocks:22080,maxBitrate:135e6,maxDpbMbs:110400,level:50},{maxMacroblocks:36864,maxBitrate:24e7,maxDpbMbs:184320,level:51},{maxMacroblocks:36864,maxBitrate:24e7,maxDpbMbs:184320,level:52},{maxMacroblocks:139264,maxBitrate:24e7,maxDpbMbs:696320,level:60},{maxMacroblocks:139264,maxBitrate:48e7,maxDpbMbs:696320,level:61},{maxMacroblocks:139264,maxBitrate:8e8,maxDpbMbs:696320,level:62}],K=[{maxPictureSize:36864,maxBitrate:128e3,tier:"L",level:30},{maxPictureSize:122880,maxBitrate:15e5,tier:"L",level:60},{maxPictureSize:245760,maxBitrate:3e6,tier:"L",level:63},{maxPictureSize:552960,maxBitrate:6e6,tier:"L",level:90},{maxPictureSize:983040,maxBitrate:1e7,tier:"L",level:93},{maxPictureSize:2228224,maxBitrate:12e6,tier:"L",level:120},{maxPictureSize:2228224,maxBitrate:3e7,tier:"H",level:120},{maxPictureSize:2228224,maxBitrate:2e7,tier:"L",level:123},{maxPictureSize:2228224,maxBitrate:5e7,tier:"H",level:123},{maxPictureSize:8912896,maxBitrate:25e6,tier:"L",level:150},{maxPictureSize:8912896,maxBitrate:1e8,tier:"H",level:150},{maxPictureSize:8912896,maxBitrate:4e7,tier:"L",level:153},{maxPictureSize:8912896,maxBitrate:16e7,tier:"H",level:153},{maxPictureSize:8912896,maxBitrate:6e7,tier:"L",level:156},{maxPictureSize:8912896,maxBitrate:24e7,tier:"H",level:156},{maxPictureSize:0x2200000,maxBitrate:6e7,tier:"L",level:180},{maxPictureSize:0x2200000,maxBitrate:24e7,tier:"H",level:180},{maxPictureSize:0x2200000,maxBitrate:12e7,tier:"L",level:183},{maxPictureSize:0x2200000,maxBitrate:48e7,tier:"H",level:183},{maxPictureSize:0x2200000,maxBitrate:24e7,tier:"L",level:186},{maxPictureSize:0x2200000,maxBitrate:8e8,tier:"H",level:186}],Q=[{maxPictureSize:36864,maxBitrate:2e5,level:10},{maxPictureSize:73728,maxBitrate:8e5,level:11},{maxPictureSize:122880,maxBitrate:18e5,level:20},{maxPictureSize:245760,maxBitrate:36e5,level:21},{maxPictureSize:552960,maxBitrate:72e5,level:30},{maxPictureSize:983040,maxBitrate:12e6,level:31},{maxPictureSize:2228224,maxBitrate:18e6,level:40},{maxPictureSize:2228224,maxBitrate:3e7,level:41},{maxPictureSize:8912896,maxBitrate:6e7,level:50},{maxPictureSize:8912896,maxBitrate:12e7,level:51},{maxPictureSize:8912896,maxBitrate:18e7,level:52},{maxPictureSize:0x2200000,maxBitrate:18e7,level:60},{maxPictureSize:0x2200000,maxBitrate:24e7,level:61},{maxPictureSize:0x2200000,maxBitrate:48e7,level:62}],X=[{maxPictureSize:147456,maxBitrate:15e5,tier:"M",level:0},{maxPictureSize:278784,maxBitrate:3e6,tier:"M",level:1},{maxPictureSize:665856,maxBitrate:6e6,tier:"M",level:4},{maxPictureSize:1065024,maxBitrate:1e7,tier:"M",level:5},{maxPictureSize:2359296,maxBitrate:12e6,tier:"M",level:8},{maxPictureSize:2359296,maxBitrate:3e7,tier:"H",level:8},{maxPictureSize:2359296,maxBitrate:2e7,tier:"M",level:9},{maxPictureSize:2359296,maxBitrate:5e7,tier:"H",level:9},{maxPictureSize:8912896,maxBitrate:3e7,tier:"M",level:12},{maxPictureSize:8912896,maxBitrate:1e8,tier:"H",level:12},{maxPictureSize:8912896,maxBitrate:4e7,tier:"M",level:13},{maxPictureSize:8912896,maxBitrate:16e7,tier:"H",level:13},{maxPictureSize:8912896,maxBitrate:6e7,tier:"M",level:14},{maxPictureSize:8912896,maxBitrate:24e7,tier:"H",level:14},{maxPictureSize:0x2200000,maxBitrate:6e7,tier:"M",level:15},{maxPictureSize:0x2200000,maxBitrate:24e7,tier:"H",level:15},{maxPictureSize:0x2200000,maxBitrate:6e7,tier:"M",level:16},{maxPictureSize:0x2200000,maxBitrate:24e7,tier:"H",level:16},{maxPictureSize:0x2200000,maxBitrate:1e8,tier:"M",level:17},{maxPictureSize:0x2200000,maxBitrate:48e7,tier:"H",level:17},{maxPictureSize:0x2200000,maxBitrate:16e7,tier:"M",level:18},{maxPictureSize:0x2200000,maxBitrate:8e8,tier:"H",level:18},{maxPictureSize:0x2200000,maxBitrate:16e7,tier:"M",level:19},{maxPictureSize:0x2200000,maxBitrate:8e8,tier:"H",level:19}],J=e=>{let t=e.split("."),r=Number(t[1]),i=t[2];return[129,(r<<5)+Number(i.slice(0,-1)),(("H"===i.slice(-1))<<7)+((8!==Number(t[3]))<<6)+0+((t[4]?Number(t[4]):0)<<4)+((t[5]?Number(t[5][0]):1)<<3)+((t[5]?Number(t[5][1]):1)<<2)+(t[5]?Number(t[5][2]):0),0]},Y=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],ee=[-1,1,2,3,4,5,6,8],et=e=>{if(!e||e.byteLength<2)throw TypeError("AAC description must be at least 2 bytes long.");let t=new n(e),r=t.readBits(5);31===r&&(r=32+t.readBits(6));let i=t.readBits(4),a=null;15===i?a=t.readBits(24):i<Y.length&&(a=Y[i]);let o=t.readBits(4),s=null;return o>=1&&o<=7&&(s=ee[o]),{objectType:r,frequencyIndex:i,sampleRate:a,channelConfiguration:o,numberOfChannels:s}},er=e=>{let t=Y.indexOf(e.sampleRate),r=null;-1===t&&(t=15,r=e.sampleRate);let i=ee.indexOf(e.numberOfChannels);if(-1===i)throw TypeError(`Unsupported number of channels: ${e.numberOfChannels}`);let a=13;e.objectType>=32&&(a+=6),15===t&&(a+=24);let o=new Uint8Array(Math.ceil(a/8)),s=new n(o);return e.objectType<32?s.writeBits(5,e.objectType):(s.writeBits(5,31),s.writeBits(6,e.objectType-32)),s.writeBits(4,t),15===t&&s.writeBits(24,r),s.writeBits(4,i),o},ei=/^pcm-([usf])(\d+)+(be)?$/,ea=e=>{let r;if(t(H.includes(e)),"ulaw"===e)return{dataType:"ulaw",sampleSize:1,littleEndian:!0,silentValue:255};if("alaw"===e)return{dataType:"alaw",sampleSize:1,littleEndian:!0,silentValue:213};let i=ei.exec(e);t(i),r="u"===i[1]?"unsigned":"s"===i[1]?"signed":"float";let a=Number(i[2])/8;return{dataType:r,sampleSize:a,littleEndian:"be"!==i[3],silentValue:128*("pcm-u8"===e)}},en=e=>{if(e.startsWith("avc1")||e.startsWith("avc3"))return"avc";if(e.startsWith("hev1")||e.startsWith("hvc1"))return"hevc";if("vp8"===e)return"vp8";if(e.startsWith("vp09"))return"vp9";if(e.startsWith("av01"))return"av1";if(e.startsWith("mp4a.40")||"mp4a.67"===e)return"aac";if("mp3"===e||"mp4a.69"===e||"mp4a.6B"===e||"mp4a.6b"===e)return"mp3";if("opus"===e)return"opus";if("vorbis"===e)return"vorbis";if("flac"===e)return"flac";else if("ulaw"===e)return"ulaw";else if("alaw"===e)return"alaw";else if(ei.test(e))return e;return"webvtt"===e?"webvtt":null},eo=["avc1","avc3","hev1","hvc1","vp8","vp09","av01"],es=/^(avc1|avc3)\.[0-9a-fA-F]{6}$/,el=/^(hev1|hvc1)\.(?:[ABC]?\d+)\.[0-9a-fA-F]{1,8}\.[LH]\d+(?:\.[0-9a-fA-F]{1,2}){0,6}$/,eu=/^vp09(?:\.\d{2}){3}(?:(?:\.\d{2}){5})?$/,ec=/^av01\.\d\.\d{2}[MH]\.\d{2}(?:\.\d\.\d{3}\.\d{2}\.\d{2}\.\d{2}\.\d)?$/,ed=e=>{if(!e)throw TypeError("Video chunk metadata must be provided.");if("object"!=typeof e)throw TypeError("Video chunk metadata must be an object.");if(!e.decoderConfig)throw TypeError("Video chunk metadata must include a decoder configuration.");if("object"!=typeof e.decoderConfig)throw TypeError("Video chunk metadata decoder configuration must be an object.");if("string"!=typeof e.decoderConfig.codec)throw TypeError("Video chunk metadata decoder configuration must specify a codec string.");if(!eo.some(t=>e.decoderConfig.codec.startsWith(t)))throw TypeError("Video chunk metadata decoder configuration codec string must be a valid video codec string as specified in the WebCodecs Codec Registry.");if(!Number.isInteger(e.decoderConfig.codedWidth)||e.decoderConfig.codedWidth<=0)throw TypeError("Video chunk metadata decoder configuration must specify a valid codedWidth (positive integer).");if(!Number.isInteger(e.decoderConfig.codedHeight)||e.decoderConfig.codedHeight<=0)throw TypeError("Video chunk metadata decoder configuration must specify a valid codedHeight (positive integer).");if(void 0!==e.decoderConfig.description&&!x(e.decoderConfig.description))throw TypeError("Video chunk metadata decoder configuration description, when defined, must be an ArrayBuffer or an ArrayBuffer view.");if(void 0!==e.decoderConfig.colorSpace){let{colorSpace:t}=e.decoderConfig;if("object"!=typeof t)throw TypeError("Video chunk metadata decoder configuration colorSpace, when provided, must be an object.");let r=Object.keys(f);if(null!=t.primaries&&!r.includes(t.primaries))throw TypeError(`Video chunk metadata decoder configuration colorSpace primaries, when defined, must be one of ${r.join(", ")}.`);let i=Object.keys(m);if(null!=t.transfer&&!i.includes(t.transfer))throw TypeError(`Video chunk metadata decoder configuration colorSpace transfer, when defined, must be one of ${i.join(", ")}.`);let a=Object.keys(v);if(null!=t.matrix&&!a.includes(t.matrix))throw TypeError(`Video chunk metadata decoder configuration colorSpace matrix, when defined, must be one of ${a.join(", ")}.`);if(null!=t.fullRange&&"boolean"!=typeof t.fullRange)throw TypeError("Video chunk metadata decoder configuration colorSpace fullRange, when defined, must be a boolean.")}if(e.decoderConfig.codec.startsWith("avc1")||e.decoderConfig.codec.startsWith("avc3")){if(!es.test(e.decoderConfig.codec))throw TypeError("Video chunk metadata decoder configuration codec string for AVC must be a valid AVC codec string as specified in Section 3.4 of RFC 6381.")}else if(e.decoderConfig.codec.startsWith("hev1")||e.decoderConfig.codec.startsWith("hvc1")){if(!el.test(e.decoderConfig.codec))throw TypeError("Video chunk metadata decoder configuration codec string for HEVC must be a valid HEVC codec string as specified in Section E.3 of ISO 14496-15.")}else if(e.decoderConfig.codec.startsWith("vp8")){if("vp8"!==e.decoderConfig.codec)throw TypeError('Video chunk metadata decoder configuration codec string for VP8 must be "vp8".')}else if(e.decoderConfig.codec.startsWith("vp09")){if(!eu.test(e.decoderConfig.codec))throw TypeError('Video chunk metadata decoder configuration codec string for VP9 must be a valid VP9 codec string as specified in Section "Codecs Parameter String" of https://www.webmproject.org/vp9/mp4/.')}else if(e.decoderConfig.codec.startsWith("av01")&&!ec.test(e.decoderConfig.codec))throw TypeError('Video chunk metadata decoder configuration codec string for AV1 must be a valid AV1 codec string as specified in Section "Codecs Parameter String" of https://aomediacodec.github.io/av1-isobmff/.')},ep=["mp4a","mp3","opus","vorbis","flac","ulaw","alaw","pcm"],ef=e=>{if(!e)throw TypeError("Audio chunk metadata must be provided.");if("object"!=typeof e)throw TypeError("Audio chunk metadata must be an object.");if(!e.decoderConfig)throw TypeError("Audio chunk metadata must include a decoder configuration.");if("object"!=typeof e.decoderConfig)throw TypeError("Audio chunk metadata decoder configuration must be an object.");if("string"!=typeof e.decoderConfig.codec)throw TypeError("Audio chunk metadata decoder configuration must specify a codec string.");if(!ep.some(t=>e.decoderConfig.codec.startsWith(t)))throw TypeError("Audio chunk metadata decoder configuration codec string must be a valid audio codec string as specified in the WebCodecs Codec Registry.");if(!Number.isInteger(e.decoderConfig.sampleRate)||e.decoderConfig.sampleRate<=0)throw TypeError("Audio chunk metadata decoder configuration must specify a valid sampleRate (positive integer).");if(!Number.isInteger(e.decoderConfig.numberOfChannels)||e.decoderConfig.numberOfChannels<=0)throw TypeError("Audio chunk metadata decoder configuration must specify a valid numberOfChannels (positive integer).");if(void 0!==e.decoderConfig.description&&!x(e.decoderConfig.description))throw TypeError("Audio chunk metadata decoder configuration description, when defined, must be an ArrayBuffer or an ArrayBuffer view.");if(e.decoderConfig.codec.startsWith("mp4a")&&"mp4a.69"!==e.decoderConfig.codec&&"mp4a.6B"!==e.decoderConfig.codec&&"mp4a.6b"!==e.decoderConfig.codec){if(!["mp4a.40.2","mp4a.40.02","mp4a.40.5","mp4a.40.05","mp4a.40.29","mp4a.67"].includes(e.decoderConfig.codec))throw TypeError("Audio chunk metadata decoder configuration codec string for AAC must be a valid AAC codec string as specified in https://www.w3.org/TR/webcodecs-aac-codec-registration/.")}else if(e.decoderConfig.codec.startsWith("mp3")||e.decoderConfig.codec.startsWith("mp4a")){if("mp3"!==e.decoderConfig.codec&&"mp4a.69"!==e.decoderConfig.codec&&"mp4a.6B"!==e.decoderConfig.codec&&"mp4a.6b"!==e.decoderConfig.codec)throw TypeError('Audio chunk metadata decoder configuration codec string for MP3 must be "mp3", "mp4a.69" or "mp4a.6B".')}else if(e.decoderConfig.codec.startsWith("opus")){if("opus"!==e.decoderConfig.codec)throw TypeError('Audio chunk metadata decoder configuration codec string for Opus must be "opus".');if(e.decoderConfig.description&&e.decoderConfig.description.byteLength<18)throw TypeError("Audio chunk metadata decoder configuration description, when specified, is expected to be an Identification Header as specified in Section 5.1 of RFC 7845.")}else if(e.decoderConfig.codec.startsWith("vorbis")){if("vorbis"!==e.decoderConfig.codec)throw TypeError('Audio chunk metadata decoder configuration codec string for Vorbis must be "vorbis".');if(!e.decoderConfig.description)throw TypeError("Audio chunk metadata decoder configuration for Vorbis must include a description, which is expected to adhere to the format described in https://www.w3.org/TR/webcodecs-vorbis-codec-registration/.")}else if(e.decoderConfig.codec.startsWith("flac")){if("flac"!==e.decoderConfig.codec)throw TypeError('Audio chunk metadata decoder configuration codec string for FLAC must be "flac".');if(!e.decoderConfig.description||e.decoderConfig.description.byteLength<42)throw TypeError("Audio chunk metadata decoder configuration for FLAC must include a description, which is expected to adhere to the format described in https://www.w3.org/TR/webcodecs-flac-codec-registration/.")}else if((e.decoderConfig.codec.startsWith("pcm")||e.decoderConfig.codec.startsWith("ulaw")||e.decoderConfig.codec.startsWith("alaw"))&&!H.includes(e.decoderConfig.codec))throw TypeError(`Audio chunk metadata decoder configuration codec string for PCM must be one of the supported PCM codecs (${H.join(", ")}).`)},eh=e=>{if(!e)throw TypeError("Subtitle metadata must be provided.");if("object"!=typeof e)throw TypeError("Subtitle metadata must be an object.");if(!e.config)throw TypeError("Subtitle metadata must include a config object.");if("object"!=typeof e.config)throw TypeError("Subtitle metadata config must be an object.");if("string"!=typeof e.config.description)throw TypeError("Subtitle metadata config description must be a string.")},em=[],eg=[],ev=[],ey=[],eb=(e,t)=>{if(!t||"object"!=typeof t)throw TypeError("Encoding options must be an object.");if(void 0!==t.alpha&&!["discard","keep"].includes(t.alpha))throw TypeError("options.alpha, when provided, must be 'discard' or 'keep'.");if(void 0!==t.bitrateMode&&!["constant","variable"].includes(t.bitrateMode))throw TypeError("bitrateMode, when provided, must be 'constant' or 'variable'.");if(void 0!==t.latencyMode&&!["quality","realtime"].includes(t.latencyMode))throw TypeError("latencyMode, when provided, must be 'quality' or 'realtime'.");if(void 0!==t.fullCodecString&&"string"!=typeof t.fullCodecString)throw TypeError("fullCodecString, when provided, must be a string.");if(void 0!==t.fullCodecString&&en(t.fullCodecString)!==e)throw TypeError(`fullCodecString, when provided, must be a string that matches the specified codec (${e}).`);if(void 0!==t.hardwareAcceleration&&!["no-preference","prefer-hardware","prefer-software"].includes(t.hardwareAcceleration))throw TypeError("hardwareAcceleration, when provided, must be 'no-preference', 'prefer-hardware' or 'prefer-software'.");if(void 0!==t.scalabilityMode&&"string"!=typeof t.scalabilityMode)throw TypeError("scalabilityMode, when provided, must be a string.");if(void 0!==t.contentHint&&"string"!=typeof t.contentHint)throw TypeError("contentHint, when provided, must be a string.")},ex=e=>{var t;let r=e.bitrate instanceof ek?e.bitrate._toVideoBitrate(e.codec,e.width,e.height):e.bitrate;return{codec:e.fullCodecString??((e,t,r,a)=>{if("avc"===e){let e=Math.ceil(t/16)*Math.ceil(r/16),n=Z.find(t=>e<=t.maxMacroblocks&&a<=t.maxBitrate)??i(Z),o=n?n.level:0,s="64".padStart(2,"0"),l=o.toString(16).padStart(2,"0");return`avc1.${s}00${l}`}if("hevc"===e){let e=t*r,n=K.find(t=>e<=t.maxPictureSize&&a<=t.maxBitrate)??i(K);return`hev1.1.6.${n.tier}${n.level}.B0`}if("vp8"===e)return"vp8";if("vp9"===e){let e=t*r,n=Q.find(t=>e<=t.maxPictureSize&&a<=t.maxBitrate)??i(Q);return`vp09.00.${n.level.toString().padStart(2,"0")}.08`}if("av1"===e){let e=t*r,n=X.find(t=>e<=t.maxPictureSize&&a<=t.maxBitrate)??i(X),o=n.level.toString().padStart(2,"0");return`av01.0.${o}${n.tier}.08`}throw TypeError(`Unhandled codec '${e}'.`)})(e.codec,e.width,e.height,r),width:e.width,height:e.height,bitrate:r,bitrateMode:e.bitrateMode,alpha:e.alpha??"discard",framerate:e.framerate,latencyMode:e.latencyMode,hardwareAcceleration:e.hardwareAcceleration,scalabilityMode:e.scalabilityMode,contentHint:e.contentHint,..."avc"===(t=e.codec)?{avc:{format:"avc"}}:"hevc"===t?{hevc:{format:"hevc"}}:{}}},ew=(e,t)=>{if(!t||"object"!=typeof t)throw TypeError("Encoding options must be an object.");if(void 0!==t.bitrateMode&&!["constant","variable"].includes(t.bitrateMode))throw TypeError("bitrateMode, when provided, must be 'constant' or 'variable'.");if(void 0!==t.fullCodecString&&"string"!=typeof t.fullCodecString)throw TypeError("fullCodecString, when provided, must be a string.");if(void 0!==t.fullCodecString&&en(t.fullCodecString)!==e)throw TypeError(`fullCodecString, when provided, must be a string that matches the specified codec (${e}).`)},eS=e=>{var t;let r=e.bitrate instanceof ek?e.bitrate._toAudioBitrate(e.codec):e.bitrate;return{codec:e.fullCodecString??((e,t,r)=>{if("aac"===e)return t>=2&&r<=24e3?"mp4a.40.29":r<=24e3?"mp4a.40.5":"mp4a.40.2";if("mp3"===e)return"mp3";if("opus"===e)return"opus";if("vorbis"===e)return"vorbis";if("flac"===e)return"flac";else if(H.includes(e))return e;throw TypeError(`Unhandled codec '${e}'.`)})(e.codec,e.numberOfChannels,e.sampleRate),numberOfChannels:e.numberOfChannels,sampleRate:e.sampleRate,bitrate:r,bitrateMode:e.bitrateMode,..."aac"===(t=e.codec)?{aac:{format:"aac"}}:"opus"===t?{opus:{format:"opus"}}:{}}};class ek{constructor(e){this._factor=e}_toVideoBitrate(e,t,r){return 1e3*Math.ceil(3e6*Math.pow(t*r/2073600,.95)*({avc:1,hevc:.6,vp9:.6,av1:.4,vp8:1.2})[e]*this._factor/1e3)}_toAudioBitrate(e){if(H.includes(e)||"flac"===e)return;let t={aac:128e3,opus:64e3,mp3:16e4,vorbis:64e3}[e];if(!t)throw Error(`Unhandled codec: ${e}`);let r=t*this._factor;return"aac"===e?r=[96e3,128e3,16e4,192e3].reduce((e,t)=>Math.abs(t-r)<Math.abs(e-r)?t:e):"opus"===e||"vorbis"===e?r=Math.max(6e3,r):"mp3"===e&&(r=[8e3,16e3,24e3,32e3,4e4,48e3,64e3,8e4,96e3,112e3,128e3,16e4,192e3,224e3,256e3,32e4].reduce((e,t)=>Math.abs(t-r)<Math.abs(e-r)?t:e)),1e3*Math.round(r/1e3)}}let eC=new ek(.3),eE=new ek(.6),e_=new ek(1),eT=new ek(2),eP=new ek(4),eI=async(e,t={})=>{let{width:r=1280,height:i=720,bitrate:a=1e6,...n}=t;if(!V.includes(e))return!1;if(!Number.isInteger(r)||r<=0)throw TypeError("width must be a positive integer.");if(!Number.isInteger(i)||i<=0)throw TypeError("height must be a positive integer.");if(!(a instanceof ek)&&(!Number.isInteger(a)||a<=0))throw TypeError("bitrate must be a positive integer or a quality.");eb(e,n);let o=null;return!!(ev.length>0&&(o??=ex({codec:e,width:r,height:i,bitrate:a,framerate:void 0,...n}),ev.some(t=>t.supports(e,o))))||!("u"<typeof VideoEncoder)&&(r%2!=1&&i%2!=1||"avc"!==e&&"hevc"!==e)&&(o??=ex({codec:e,width:r,height:i,bitrate:a,framerate:void 0,...n,alpha:"discard"}),!!(await VideoEncoder.isConfigSupported(o)).supported&&(!R()||new Promise(async e=>{try{let t=new VideoEncoder({output:()=>{},error:()=>e(!1)});t.configure(o);let a=new Uint8Array(r*i*4),n=new VideoFrame(a,{format:"RGBA",codedWidth:r,codedHeight:i,timestamp:0});t.encode(n),n.close(),await t.flush(),e(!0)}catch{e(!1)}})))},eA=async(e,t={})=>{let{numberOfChannels:r=2,sampleRate:i=48e3,bitrate:a=128e3,...n}=t;if(!q.includes(e))return!1;if(!Number.isInteger(r)||r<=0)throw TypeError("numberOfChannels must be a positive integer.");if(!Number.isInteger(i)||i<=0)throw TypeError("sampleRate must be a positive integer.");if(!(a instanceof ek)&&(!Number.isInteger(a)||a<=0))throw TypeError("bitrate must be a positive integer.");ew(e,n);let o=null;return!!(ey.length>0&&(o??=eS({codec:e,numberOfChannels:r,sampleRate:i,bitrate:a,...n}),ey.some(t=>t.supports(e,o))))||!!H.includes(e)||!("u"<typeof AudioEncoder)&&(o??=eS({codec:e,numberOfChannels:r,sampleRate:i,bitrate:a,...n}),!0===(await AudioEncoder.isConfigSupported(o)).supported)},eO=async(e=V,t)=>{let r=await Promise.all(e.map(e=>eI(e,t)));return e.filter((e,t)=>r[t])},eM=async(e=q,t)=>{let r=await Promise.all(e.map(e=>eA(e,t)));return e.filter((e,t)=>r[t])};class eF{constructor(e){this.mutex=new w,this.firstMediaStreamTimestamp=null,this.trackTimestampInfo=new WeakMap,this.output=e}onTrackClose(e){}validateAndNormalizeTimestamp(e,t,r){t+=e.source._timestampOffset;let i=this.trackTimestampInfo.get(e);if(!i){if(!r)throw Error("First packet must be a key packet.");i={maxTimestamp:t,maxTimestampBeforeLastKeyPacket:t},this.trackTimestampInfo.set(e,i)}if(t<0)throw Error(`Timestamps must be non-negative (got ${t}s).`);if(r&&(i.maxTimestampBeforeLastKeyPacket=i.maxTimestamp),t<i.maxTimestampBeforeLastKeyPacket)throw Error(`Timestamps cannot be smaller than the largest timestamp of the previous GOP (a GOP begins with a key packet and ends right before the next key packet). Got ${t}s, but largest timestamp is ${i.maxTimestampBeforeLastKeyPacket}s.`);return i.maxTimestamp=Math.max(i.maxTimestamp,t),t}}(tz=tX||(tX={}))[tz.NON_IDR_SLICE=1]="NON_IDR_SLICE",tz[tz.SLICE_DPA=2]="SLICE_DPA",tz[tz.SLICE_DPB=3]="SLICE_DPB",tz[tz.SLICE_DPC=4]="SLICE_DPC",tz[tz.IDR=5]="IDR",tz[tz.SEI=6]="SEI",tz[tz.SPS=7]="SPS",tz[tz.PPS=8]="PPS",tz[tz.AUD=9]="AUD",tz[tz.SPS_EXT=13]="SPS_EXT",(tU=tJ||(tJ={}))[tU.RASL_N=8]="RASL_N",tU[tU.RASL_R=9]="RASL_R",tU[tU.BLA_W_LP=16]="BLA_W_LP",tU[tU.RSV_IRAP_VCL23=23]="RSV_IRAP_VCL23",tU[tU.VPS_NUT=32]="VPS_NUT",tU[tU.SPS_NUT=33]="SPS_NUT",tU[tU.PPS_NUT=34]="PPS_NUT",tU[tU.AUD_NUT=35]="AUD_NUT",tU[tU.PREFIX_SEI_NUT=39]="PREFIX_SEI_NUT",tU[tU.SUFFIX_SEI_NUT=40]="SUFFIX_SEI_NUT";let eR=function*(e){let t=0,r=-1;for(;t<e.length-2;){let i=e.indexOf(0,t);if(-1===i||i>=e.length-2)break;let a=0;if((t=i)+3<e.length&&0===e[t+1]&&0===e[t+2]&&1===e[t+3]?a=4:0===e[t+1]&&1===e[t+2]&&(a=3),0===a){t++;continue}-1!==r&&t>r&&(yield{offset:r,length:t-r}),t=r=t+a}-1!==r&&r<e.length&&(yield{offset:r,length:e.length-r})},eD=function*(e,r){let i=0,a=new DataView(e.buffer,e.byteOffset,e.byteLength);for(;i+r<=e.length;){let e;1===r?e=a.getUint8(i):2===r?e=a.getUint16(i,!1):3===r?e=E(a,i,!1):(t(4===r),e=a.getUint32(i,!1)),i+=r,yield{offset:i,length:e},i+=e}},ej=function*(e){yield*eR(e)},eL=e=>31&e,eB=e=>{let t=[],r=e.length;for(let i=0;i<r;i++)i+2<r&&0===e[i]&&0===e[i+1]&&3===e[i+2]?(t.push(0,0),i+=2):t.push(e[i]);return new Uint8Array(t)};new Uint8Array([0,0,0,1]);let eN=e=>{try{let r=[],i=[],a=[];for(let t of ej(e)){let n=e.subarray(t.offset,t.offset+t.length),o=eL(n[0]);o===tX.SPS?r.push(n):o===tX.PPS?i.push(n):o===tX.SPS_EXT&&a.push(n)}if(0===r.length||0===i.length)return null;let n=r[0],o=e$(n);t(null!==o);let s=100===o.profileIdc||110===o.profileIdc||122===o.profileIdc||144===o.profileIdc;return{configurationVersion:1,avcProfileIndication:o.profileIdc,profileCompatibility:o.constraintFlags,avcLevelIndication:o.levelIdc,lengthSizeMinusOne:3,sequenceParameterSets:r,pictureParameterSets:i,chromaFormat:s?o.chromaFormatIdc:null,bitDepthLumaMinus8:s?o.bitDepthLumaMinus8:null,bitDepthChromaMinus8:s?o.bitDepthChromaMinus8:null,sequenceParameterSetExt:s?a:null}}catch(e){return console.error("Error building AVC Decoder Configuration Record:",e),null}},e$=e=>{try{let r=new n(eB(e));r.skipBits(1),r.skipBits(2);let a=r.readBits(5);if(7!==a)return null;let l=r.readAlignedByte(),u=r.readAlignedByte(),c=r.readAlignedByte();o(r);let d=1,p=0,f=0,h=0;if((100===l||110===l||122===l||244===l||44===l||83===l||86===l||118===l||128===l)&&(d=o(r),3===d&&(h=r.readBits(1)),p=o(r),f=o(r),r.skipBits(1),r.readBits(1))){for(let e=0;e<(3!==d?8:12);e++)if(r.readBits(1)){let t=e<6?16:64,i=8,a=8;for(let e=0;e<t;e++){if(0!==a){let e=s(r);a=(i+e+256)%256}i=0===a?i:a}}}o(r);let m=o(r);if(0===m)o(r);else if(1===m){r.skipBits(1),s(r),s(r);let e=o(r);for(let t=0;t<e;t++)s(r)}o(r),r.skipBits(1);let g=o(r),v=o(r),y=16*(g+1),b=16*(v+1),x=y,w=b,S=r.readBits(1);if(S||r.skipBits(1),r.skipBits(1),r.readBits(1)){let e,t,i=o(r),a=o(r),n=o(r),s=o(r),l=0===h?d:0;if(0===l)e=1,t=2-S;else{let r=3===d?1:2,i=1===d?2:1;e=r,t=i*(2-S)}x-=e*(i+a),w-=t*(n+s)}let k=2,C=2,E=2,_=0,T=null,P=null;if(r.readBits(1)){if(r.readBits(1)){let e=r.readBits(8);255===e&&(r.skipBits(16),r.skipBits(16))}r.readBits(1)&&r.skipBits(1),r.readBits(1)&&(r.skipBits(3),_=r.readBits(1),r.readBits(1)&&(k=r.readBits(8),C=r.readBits(8),E=r.readBits(8))),r.readBits(1)&&(o(r),o(r)),r.readBits(1)&&(r.skipBits(32),r.skipBits(32),r.skipBits(1));let e=r.readBits(1);e&&ez(r);let t=r.readBits(1);t&&ez(r),(e||t)&&r.skipBits(1),r.skipBits(1),r.readBits(1)&&(r.skipBits(1),o(r),o(r),o(r),o(r),T=o(r),P=o(r))}if(null===T)if(t(null===P),(44===l||86===l||100===l||110===l||122===l||244===l)&&16&u)T=0,P=0;else{let e=Z.find(e=>e.level>=c)??i(Z),t=Math.min(Math.floor(e.maxDpbMbs/((2-S)*(v+1)*(g+1))),16);T=t,P=t}return t(null!==P),{profileIdc:l,constraintFlags:u,levelIdc:c,frameMbsOnlyFlag:S,chromaFormatIdc:d,bitDepthLumaMinus8:p,bitDepthChromaMinus8:f,codedWidth:y,codedHeight:b,displayWidth:x,displayHeight:w,colourPrimaries:k,matrixCoefficients:E,transferCharacteristics:C,fullRangeFlag:_,numReorderFrames:T,maxDecFrameBuffering:P}}catch(e){return console.error("Error parsing AVC SPS:",e),null}},ez=e=>{let t=o(e);e.skipBits(4),e.skipBits(4);for(let r=0;r<=t;r++)o(e),o(e),e.skipBits(1);e.skipBits(5),e.skipBits(5),e.skipBits(5),e.skipBits(5)},eU=function*(e){yield*eR(e)},eV=e=>e>>1&63,eH=e=>{try{let t=new n(eB(e));t.skipBits(16),t.readBits(4);let r=t.readBits(3),i=t.readBits(1),{general_profile_space:a,general_tier_flag:s,general_profile_idc:l,general_profile_compatibility_flags:u,general_constraint_indicator_flags:c,general_level_idc:d}=eq(t,r);o(t);let p=o(t),f=0;3===p&&(f=t.readBits(1));let h=o(t),m=o(t),g=h,v=m;if(t.readBits(1)){let e=o(t),r=o(t),i=o(t),a=o(t),n=1,s=1,l=0===f?p:0;1===l?(n=2,s=2):2===l&&(n=2,s=1),g-=(e+r)*n,v-=(i+a)*s}let y=o(t),b=o(t);o(t);let x=t.readBits(1)?0:r,w=0;for(let e=x;e<=r;e++)o(t),w=o(t),o(t);o(t),o(t),o(t),o(t),o(t),o(t),t.readBits(1)&&t.readBits(1)&&eG(t),t.skipBits(1),t.skipBits(1),t.readBits(1)&&(t.skipBits(4),t.skipBits(4),o(t),o(t),t.skipBits(1));let S=o(t);if(eZ(t,S),t.readBits(1)){let e=o(t);for(let r=0;r<e;r++)o(t),t.skipBits(1)}t.skipBits(1),t.skipBits(1);let k=2,C=2,E=2,_=0,T=0;if(t.readBits(1)){let e=eQ(t,r);k=e.colourPrimaries,C=e.transferCharacteristics,E=e.matrixCoefficients,_=e.fullRangeFlag,T=e.minSpatialSegmentationIdc}return{displayWidth:g,displayHeight:v,colourPrimaries:k,transferCharacteristics:C,matrixCoefficients:E,fullRangeFlag:_,maxDecFrameBuffering:w+1,spsMaxSubLayersMinus1:r,spsTemporalIdNestingFlag:i,generalProfileSpace:a,generalTierFlag:s,generalProfileIdc:l,generalProfileCompatibilityFlags:u,generalConstraintIndicatorFlags:c,generalLevelIdc:d,chromaFormatIdc:p,bitDepthLumaMinus8:y,bitDepthChromaMinus8:b,minSpatialSegmentationIdc:T}}catch(e){return console.error("Error parsing HEVC SPS:",e),null}},eW=e=>{try{let t=[],r=[],i=[],a=[];for(let n of eU(e)){let o=e.subarray(n.offset,n.offset+n.length),s=eV(o[0]);s===tJ.VPS_NUT?t.push(o):s===tJ.SPS_NUT?r.push(o):s===tJ.PPS_NUT?i.push(o):(s===tJ.PREFIX_SEI_NUT||s===tJ.SUFFIX_SEI_NUT)&&a.push(o)}if(0===r.length||0===i.length)return null;let l=eH(r[0]);if(!l)return null;let u=0;if(i.length>0){let e=i[0],t=new n(eB(e));t.skipBits(16),o(t),o(t),t.skipBits(1),t.skipBits(1),t.skipBits(3),t.skipBits(1),t.skipBits(1),o(t),o(t),s(t),t.skipBits(1),t.skipBits(1),t.readBits(1)&&o(t),s(t),s(t),t.skipBits(1),t.skipBits(1),t.skipBits(1),t.skipBits(1);let r=t.readBits(1),a=t.readBits(1);u=r||a?r&&!a?2:!r&&a?3:0:0}let c=[...t.length?[{arrayCompleteness:1,nalUnitType:tJ.VPS_NUT,nalUnits:t}]:[],...r.length?[{arrayCompleteness:1,nalUnitType:tJ.SPS_NUT,nalUnits:r}]:[],...i.length?[{arrayCompleteness:1,nalUnitType:tJ.PPS_NUT,nalUnits:i}]:[],...a.length?[{arrayCompleteness:1,nalUnitType:eV(a[0][0]),nalUnits:a}]:[]];return{configurationVersion:1,generalProfileSpace:l.generalProfileSpace,generalTierFlag:l.generalTierFlag,generalProfileIdc:l.generalProfileIdc,generalProfileCompatibilityFlags:l.generalProfileCompatibilityFlags,generalConstraintIndicatorFlags:l.generalConstraintIndicatorFlags,generalLevelIdc:l.generalLevelIdc,minSpatialSegmentationIdc:l.minSpatialSegmentationIdc,parallelismType:u,chromaFormatIdc:l.chromaFormatIdc,bitDepthLumaMinus8:l.bitDepthLumaMinus8,bitDepthChromaMinus8:l.bitDepthChromaMinus8,avgFrameRate:0,constantFrameRate:0,numTemporalLayers:l.spsMaxSubLayersMinus1+1,temporalIdNested:l.spsTemporalIdNestingFlag,lengthSizeMinusOne:3,arrays:c}}catch(e){return console.error("Error building HEVC Decoder Configuration Record:",e),null}},eq=(e,t)=>{let r=e.readBits(2),i=e.readBits(1),a=e.readBits(5),n=0;for(let t=0;t<32;t++)n=n<<1|e.readBits(1);let o=new Uint8Array(6);for(let t=0;t<6;t++)o[t]=e.readBits(8);let s=e.readBits(8),l=[],u=[];for(let r=0;r<t;r++)l.push(e.readBits(1)),u.push(e.readBits(1));if(t>0)for(let r=t;r<8;r++)e.skipBits(2);for(let r=0;r<t;r++)l[r]&&e.skipBits(88),u[r]&&e.skipBits(8);return{general_profile_space:r,general_tier_flag:i,general_profile_idc:a,general_profile_compatibility_flags:n,general_constraint_indicator_flags:o,general_level_idc:s}},eG=e=>{for(let t=0;t<4;t++)for(let r=0;r<(3===t?2:6);r++)if(e.readBits(1)){let r=Math.min(64,1<<4+(t<<1));t>1&&s(e);for(let t=0;t<r;t++)s(e)}else o(e)},eZ=(e,t)=>{let r=[];for(let i=0;i<t;i++)r[i]=eK(e,i,t,r)},eK=(e,t,r,i)=>{let a=0,n=0,s=0;if(0!==t&&(n=e.readBits(1)),n){s=t===r?t-(o(e)+1):t-1,e.readBits(1),o(e);let n=i[s]??0;for(let t=0;t<=n;t++)e.readBits(1)||e.readBits(1);a=i[s]}else{let t=o(e),r=o(e);for(let r=0;r<t;r++)o(e),e.readBits(1);for(let t=0;t<r;t++)o(e),e.readBits(1);a=t+r}return a},eQ=(e,t)=>{let r=2,i=2,a=2,n=0,s=0;return e.readBits(1)&&255===e.readBits(8)&&(e.readBits(16),e.readBits(16)),e.readBits(1)&&e.readBits(1),e.readBits(1)&&(e.readBits(3),n=e.readBits(1),e.readBits(1)&&(r=e.readBits(8),i=e.readBits(8),a=e.readBits(8))),e.readBits(1)&&(o(e),o(e)),e.readBits(1),e.readBits(1),e.readBits(1),e.readBits(1)&&(o(e),o(e),o(e),o(e)),e.readBits(1)&&(e.readBits(32),e.readBits(32),e.readBits(1)&&o(e),e.readBits(1)&&eX(e,!0,t)),e.readBits(1)&&(e.readBits(1),e.readBits(1),e.readBits(1),s=o(e),o(e),o(e),o(e),o(e)),{colourPrimaries:r,transferCharacteristics:i,matrixCoefficients:a,fullRangeFlag:n,minSpatialSegmentationIdc:s}},eX=(e,t,r)=>{let i=!1,a=!1,n=!1;t&&(i=1===e.readBits(1),a=1===e.readBits(1),(i||a)&&((n=1===e.readBits(1))&&(e.readBits(8),e.readBits(5),e.readBits(1),e.readBits(5)),e.readBits(4),e.readBits(4),n&&e.readBits(4),e.readBits(5),e.readBits(5),e.readBits(5)));for(let t=0;t<=r;t++){let t=1===e.readBits(1),r=!0;t||(r=1===e.readBits(1));let s=!1;r?o(e):s=1===e.readBits(1);let l=1;s||(l=o(e)+1),i&&eJ(e,l,n),a&&eJ(e,l,n)}},eJ=(e,t,r)=>{for(let i=0;i<t;i++)o(e),o(e),r&&(o(e),o(e)),e.readBits(1)},eY=function*(e){let r=new n(e),i=()=>{let e=0;for(let t=0;t<8;t++){let i=r.readAlignedByte();if(e|=(127&i)<<7*t,!(128&i))break;if(7===t&&128&i)return null}return e>=0x100000000-1?null:e};for(;r.getBitsLeft()>=8;){let a;r.skipBits(1);let n=r.readBits(4),o=r.readBits(1),s=r.readBits(1);if(r.skipBits(1),o&&r.skipBits(8),s){let e=i();if(null===e)return;a=e}else a=Math.floor(r.getBitsLeft()/8);t(r.pos%8==0),yield{type:n,data:e.subarray(r.pos/8,r.pos/8+a)},r.skipBits(8*a)}},e0=e=>{let t=u(e),r=t.getUint8(9),i=t.getUint16(10,!0),a=t.getUint32(12,!0),n=t.getInt16(16,!0),o=t.getUint8(18),s=null;return o&&(s=e.subarray(19,21+r)),{outputChannelCount:r,preSkip:i,inputSampleRate:a,outputGain:n,channelMappingFamily:o,channelMappingTable:s}},e1=(e,r,i)=>{var a,s,u,c;switch(e){case"avc":for(let e of(a=i,(s=r).description?eD(a,(3&l(s.description)[4])+1):eR(a))){let t=eL(i[e.offset]);if(t>=tX.NON_IDR_SLICE&&t<=tX.SLICE_DPC)break;if(t===tX.IDR)return"key";if(t===tX.SEI&&(!j()||B()>=144)){let t=eB(i.subarray(e.offset,e.offset+e.length)),r=1;do{let e=0;for(;;){let i=t[r++];if(void 0===i||(e+=i,i<255))break}let i=0;for(;;){let e=t[r++];if(void 0===e||(i+=e,e<255))break}if(6===e){let e=new n(t);e.pos=8*r;let i=o(e),a=e.readBits(1);if(0===i&&1===a)return"key"}r+=i}while(r<t.length-1)}}return"delta";case"hevc":for(let e of(u=i,(c=r).description?eD(u,(3&l(c.description)[21])+1):eR(u))){let t=eV(i[e.offset]);if(t<tJ.BLA_W_LP)break;if(t<=tJ.RSV_IRAP_VCL23)return"key"}return"delta";case"vp8":return 0==(1&i[0])?"key":"delta";case"vp9":{let e=new n(i);if(2!==e.readBits(2))return null;let t=e.readBits(1);if(3===(e.readBits(1)<<1)+t&&e.skipBits(1),e.readBits(1))return null;return 0===e.readBits(1)?"key":"delta"}case"av1":{let e=!1;for(let{type:t,data:r}of eY(i))if(1===t){let t=new n(r);t.skipBits(4),e=!!t.readBits(1)}else if(3===t||6===t||7===t){if(e)return"key";let t=new n(r);if(t.readBits(1))return null;return 0===t.readBits(2)?"key":"delta"}return null}default:C(e),t(!1)}};(tV=tY||(tY={}))[tV.STREAMINFO=0]="STREAMINFO",tV[tV.VORBIS_COMMENT=4]="VORBIS_COMMENT",tV[tV.PICTURE=6]="PICTURE";let e2=new Uint8Array(0);class e4{constructor(e,t,r,i,a=-1,n,o){if(this.data=e,this.type=t,this.timestamp=r,this.duration=i,this.sequenceNumber=a,e===e2&&void 0===n)throw Error("Internal error: byteLength must be explicitly provided when constructing metadata-only packets.");if(void 0===n&&(n=e.byteLength),!(e instanceof Uint8Array))throw TypeError("data must be a Uint8Array.");if("key"!==t&&"delta"!==t)throw TypeError('type must be either "key" or "delta".');if(!Number.isFinite(r))throw TypeError("timestamp must be a number.");if(!Number.isFinite(i)||i<0)throw TypeError("duration must be a non-negative number.");if(!Number.isFinite(a))throw TypeError("sequenceNumber must be a number.");if(!Number.isInteger(n)||n<0)throw TypeError("byteLength must be a non-negative integer.");if(void 0!==o&&("object"!=typeof o||!o))throw TypeError("sideData, when provided, must be an object.");if(o?.alpha!==void 0&&!(o.alpha instanceof Uint8Array))throw TypeError("sideData.alpha, when provided, must be a Uint8Array.");if(o?.alphaByteLength!==void 0&&(!Number.isInteger(o.alphaByteLength)||o.alphaByteLength<0))throw TypeError("sideData.alphaByteLength, when provided, must be a non-negative integer.");this.byteLength=n,this.sideData=o??{},this.sideData.alpha&&void 0===this.sideData.alphaByteLength&&(this.sideData.alphaByteLength=this.sideData.alpha.byteLength)}get isMetadataOnly(){return this.data===e2}get microsecondTimestamp(){return Math.trunc(A*this.timestamp)}get microsecondDuration(){return Math.trunc(A*this.duration)}toEncodedVideoChunk(){if(this.isMetadataOnly)throw TypeError("Metadata-only packets cannot be converted to a video chunk.");if("u"<typeof EncodedVideoChunk)throw Error("Your browser does not support EncodedVideoChunk.");return new EncodedVideoChunk({data:this.data,type:this.type,timestamp:this.microsecondTimestamp,duration:this.microsecondDuration})}alphaToEncodedVideoChunk(e=this.type){if(!this.sideData.alpha)throw TypeError("This packet does not contain alpha side data.");if(this.isMetadataOnly)throw TypeError("Metadata-only packets cannot be converted to a video chunk.");if("u"<typeof EncodedVideoChunk)throw Error("Your browser does not support EncodedVideoChunk.");return new EncodedVideoChunk({data:this.sideData.alpha,type:e,timestamp:this.microsecondTimestamp,duration:this.microsecondDuration})}toEncodedAudioChunk(){if(this.isMetadataOnly)throw TypeError("Metadata-only packets cannot be converted to an audio chunk.");if("u"<typeof EncodedAudioChunk)throw Error("Your browser does not support EncodedAudioChunk.");return new EncodedAudioChunk({data:this.data,type:this.type,timestamp:this.microsecondTimestamp,duration:this.microsecondDuration})}static fromEncodedChunk(e,t){if(!(e instanceof EncodedVideoChunk||e instanceof EncodedAudioChunk))throw TypeError("chunk must be an EncodedVideoChunk or EncodedAudioChunk.");let r=new Uint8Array(e.byteLength);return e.copyTo(r),new e4(r,e.type,e.timestamp/1e6,(e.duration??0)/1e6,void 0,void 0,t)}clone(e){if(void 0!==e&&("object"!=typeof e||null===e))throw TypeError("options, when provided, must be an object.");if(e?.data!==void 0&&!(e.data instanceof Uint8Array))throw TypeError("options.data, when provided, must be a Uint8Array.");if(e?.type!==void 0&&"key"!==e.type&&"delta"!==e.type)throw TypeError('options.type, when provided, must be either "key" or "delta".');if(e?.timestamp!==void 0&&!Number.isFinite(e.timestamp))throw TypeError("options.timestamp, when provided, must be a number.");if(e?.duration!==void 0&&!Number.isFinite(e.duration))throw TypeError("options.duration, when provided, must be a number.");if(e?.sequenceNumber!==void 0&&!Number.isFinite(e.sequenceNumber))throw TypeError("options.sequenceNumber, when provided, must be a number.");if(e?.sideData!==void 0&&("object"!=typeof e.sideData||null===e.sideData))throw TypeError("options.sideData, when provided, must be an object.");return new e4(e?.data??this.data,e?.type??this.type,e?.timestamp??this.timestamp,e?.duration??this.duration,e?.sequenceNumber??this.sequenceNumber,this.byteLength,e?.sideData??this.sideData)}}U();let e3=-1/0,e6=-1/0,e8=null;"u">typeof FinalizationRegistry&&(e8=new FinalizationRegistry(e=>{let t=Date.now();"video"===e.type?(t-e3>=1e3&&(console.error("A VideoSample was garbage collected without first being closed. For proper resource management, make sure to call close() on all your VideoSamples as soon as you're done using them."),e3=t),"u">typeof VideoFrame&&e.data instanceof VideoFrame&&e.data.close()):(t-e6>=1e3&&(console.error("An AudioSample was garbage collected without first being closed. For proper resource management, make sure to call close() on all your AudioSamples as soon as you're done using them."),e6=t),"u">typeof AudioData&&e.data instanceof AudioData&&e.data.close())}));let e5=["I420","I420P10","I420P12","I420A","I420AP10","I420AP12","I422","I422P10","I422P12","I422A","I422AP10","I422AP12","I444","I444P10","I444P12","I444A","I444AP10","I444AP12","NV12","RGBA","RGBX","BGRA","BGRX"],e7=new Set(e5);class e9{get displayWidth(){return this.rotation%180==0?this.codedWidth:this.codedHeight}get displayHeight(){return this.rotation%180==0?this.codedHeight:this.codedWidth}get microsecondTimestamp(){return Math.trunc(A*this.timestamp)}get microsecondDuration(){return Math.trunc(A*this.duration)}get hasAlpha(){return this.format&&this.format.includes("A")}constructor(e,r){if(this._closed=!1,e instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer||ArrayBuffer.isView(e)){if(!r||"object"!=typeof r)throw TypeError("init must be an object.");if(void 0===r.format||!e7.has(r.format))throw TypeError("init.format must be one of: "+e5.join(", "));if(!Number.isInteger(r.codedWidth)||r.codedWidth<=0)throw TypeError("init.codedWidth must be a positive integer.");if(!Number.isInteger(r.codedHeight)||r.codedHeight<=0)throw TypeError("init.codedHeight must be a positive integer.");if(void 0!==r.rotation&&![0,90,180,270].includes(r.rotation))throw TypeError("init.rotation, when provided, must be 0, 90, 180, or 270.");if(!Number.isFinite(r.timestamp))throw TypeError("init.timestamp must be a number.");if(void 0!==r.duration&&(!Number.isFinite(r.duration)||r.duration<0))throw TypeError("init.duration, when provided, must be a non-negative number.");this._data=l(e).slice(),this._layout=r.layout??tn(r.format,r.codedWidth,r.codedHeight),this.format=r.format,this.codedWidth=r.codedWidth,this.codedHeight=r.codedHeight,this.rotation=r.rotation??0,this.timestamp=r.timestamp,this.duration=r.duration??0,this.colorSpace=new te(r.colorSpace)}else if("u">typeof VideoFrame&&e instanceof VideoFrame){if(r?.rotation!==void 0&&![0,90,180,270].includes(r.rotation))throw TypeError("init.rotation, when provided, must be 0, 90, 180, or 270.");if(r?.timestamp!==void 0&&!Number.isFinite(r?.timestamp))throw TypeError("init.timestamp, when provided, must be a number.");if(r?.duration!==void 0&&(!Number.isFinite(r.duration)||r.duration<0))throw TypeError("init.duration, when provided, must be a non-negative number.");this._data=e,this._layout=null,this.format=e.format,this.codedWidth=e.displayWidth,this.codedHeight=e.displayHeight,this.rotation=r?.rotation??0,this.timestamp=r?.timestamp??e.timestamp/1e6,this.duration=r?.duration??(e.duration??0)/1e6,this.colorSpace=new te(e.colorSpace)}else if("u">typeof HTMLImageElement&&e instanceof HTMLImageElement||"u">typeof SVGImageElement&&e instanceof SVGImageElement||"u">typeof ImageBitmap&&e instanceof ImageBitmap||"u">typeof HTMLVideoElement&&e instanceof HTMLVideoElement||"u">typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"u">typeof OffscreenCanvas&&e instanceof OffscreenCanvas){if(!r||"object"!=typeof r)throw TypeError("init must be an object.");if(void 0!==r.rotation&&![0,90,180,270].includes(r.rotation))throw TypeError("init.rotation, when provided, must be 0, 90, 180, or 270.");if(!Number.isFinite(r.timestamp))throw TypeError("init.timestamp must be a number.");if(void 0!==r.duration&&(!Number.isFinite(r.duration)||r.duration<0))throw TypeError("init.duration, when provided, must be a non-negative number.");if("u">typeof VideoFrame)return new e9(new VideoFrame(e,{timestamp:Math.trunc(r.timestamp*A),duration:Math.trunc((r.duration??0)*A)||void 0}),r);let i=0,a=0;if("naturalWidth"in e?(i=e.naturalWidth,a=e.naturalHeight):"videoWidth"in e?(i=e.videoWidth,a=e.videoHeight):"width"in e&&(i=Number(e.width),a=Number(e.height)),!i||!a)throw TypeError("Could not determine dimensions.");const n=new OffscreenCanvas(i,a),o=n.getContext("2d",{alpha:R(),willReadFrequently:!0});t(o),o.drawImage(e,0,0),this._data=n,this._layout=null,this.format="RGBX",this.codedWidth=i,this.codedHeight=a,this.rotation=r.rotation??0,this.timestamp=r.timestamp,this.duration=r.duration??0,this.colorSpace=new te({matrix:"rgb",primaries:"bt709",transfer:"iec61966-2-1",fullRange:!0})}else throw TypeError("Invalid data type: Must be a BufferSource or CanvasImageSource.");e8?.register(this,{type:"video",data:this._data},this)}clone(){if(this._closed)throw Error("VideoSample is closed.");return(t(null!==this._data),tt(this._data))?new e9(this._data.clone(),{timestamp:this.timestamp,duration:this.duration,rotation:this.rotation}):this._data instanceof Uint8Array?(t(this._layout),new e9(this._data,{format:this.format,layout:this._layout,codedWidth:this.codedWidth,codedHeight:this.codedHeight,timestamp:this.timestamp,duration:this.duration,colorSpace:this.colorSpace,rotation:this.rotation})):new e9(this._data,{format:this.format,codedWidth:this.codedWidth,codedHeight:this.codedHeight,timestamp:this.timestamp,duration:this.duration,colorSpace:this.colorSpace,rotation:this.rotation})}close(){this._closed||(e8?.unregister(this),tt(this._data)?this._data.close():this._data=null,this._closed=!0)}allocationSize(e={}){if(ta(e),this._closed)throw Error("VideoSample is closed.");if(null===this.format)throw Error("Cannot get allocation size when format is null. Sorry!");if(t(null!==this._data),!tt(this._data)&&(e.colorSpace||e.format&&e.format!==this.format||e.layout||e.rect)){let t=this.toVideoFrame(),r=t.allocationSize(e);return t.close(),r}return tt(this._data)?this._data.allocationSize(e):this._data instanceof Uint8Array?this._data.byteLength:this.codedWidth*this.codedHeight*4}async copyTo(e,r={}){if(!x(e))throw TypeError("destination must be an ArrayBuffer or an ArrayBuffer view.");if(ta(r),this._closed)throw Error("VideoSample is closed.");if(null===this.format)throw Error("Cannot copy video sample data when format is null. Sorry!");if(t(null!==this._data),!tt(this._data)&&(r.colorSpace||r.format&&r.format!==this.format||r.layout||r.rect)){let t=this.toVideoFrame(),i=await t.copyTo(e,r);return t.close(),i}if(tt(this._data))return this._data.copyTo(e,r);if(this._data instanceof Uint8Array)return t(this._layout),l(e).set(this._data),this._layout;{let r=this._data.getContext("2d");t(r);let i=r.getImageData(0,0,this.codedWidth,this.codedHeight);return l(e).set(i.data),[{offset:0,stride:4*this.codedWidth}]}}toVideoFrame(){if(this._closed)throw Error("VideoSample is closed.");return(t(null!==this._data),tt(this._data))?new VideoFrame(this._data,{timestamp:this.microsecondTimestamp,duration:this.microsecondDuration||void 0}):this._data instanceof Uint8Array?new VideoFrame(this._data,{format:this.format,codedWidth:this.codedWidth,codedHeight:this.codedHeight,timestamp:this.microsecondTimestamp,duration:this.microsecondDuration||void 0,colorSpace:this.colorSpace}):new VideoFrame(this._data,{timestamp:this.microsecondTimestamp,duration:this.microsecondDuration||void 0})}draw(e,t,r,i,a,n,o,s,l){let u=0,c=0,d=this.displayWidth,p=this.displayHeight,f=0,h=0,m=this.displayWidth,g=this.displayHeight;if(void 0!==n?(u=t,c=r,d=i,p=a,f=n,h=o,void 0!==s?(m=s,g=l):(m=d,g=p)):(f=t,h=r,void 0!==i&&(m=i,g=a)),!("u">typeof CanvasRenderingContext2D&&e instanceof CanvasRenderingContext2D||"u">typeof OffscreenCanvasRenderingContext2D&&e instanceof OffscreenCanvasRenderingContext2D))throw TypeError("context must be a CanvasRenderingContext2D or OffscreenCanvasRenderingContext2D.");if(!Number.isFinite(u))throw TypeError("sx must be a number.");if(!Number.isFinite(c))throw TypeError("sy must be a number.");if(!Number.isFinite(d)||d<0)throw TypeError("sWidth must be a non-negative number.");if(!Number.isFinite(p)||p<0)throw TypeError("sHeight must be a non-negative number.");if(!Number.isFinite(f))throw TypeError("dx must be a number.");if(!Number.isFinite(h))throw TypeError("dy must be a number.");if(!Number.isFinite(m)||m<0)throw TypeError("dWidth must be a non-negative number.");if(!Number.isFinite(g)||g<0)throw TypeError("dHeight must be a non-negative number.");if(this._closed)throw Error("VideoSample is closed.");({sx:u,sy:c,sWidth:d,sHeight:p}=this._rotateSourceRegion(u,c,d,p,this.rotation));let v=this.toCanvasImageSource();e.save();let y=f+m/2,b=h+g/2;e.translate(y,b),e.rotate(this.rotation*Math.PI/180);let x=this.rotation%180==0?1:m/g;e.scale(1/x,x),e.drawImage(v,u,c,d,p,-m/2,-g/2,m,g),e.restore()}drawWithFit(e,t){let r,i,a,n;if(!("u">typeof CanvasRenderingContext2D&&e instanceof CanvasRenderingContext2D||"u">typeof OffscreenCanvasRenderingContext2D&&e instanceof OffscreenCanvasRenderingContext2D))throw TypeError("context must be a CanvasRenderingContext2D or OffscreenCanvasRenderingContext2D.");if(!t||"object"!=typeof t)throw TypeError("options must be an object.");if(!["fill","contain","cover"].includes(t.fit))throw TypeError("options.fit must be 'fill', 'contain', or 'cover'.");if(void 0!==t.rotation&&![0,90,180,270].includes(t.rotation))throw TypeError("options.rotation, when provided, must be 0, 90, 180, or 270.");void 0!==t.crop&&ti(t.crop,"options.");let o=e.canvas.width,s=e.canvas.height,l=t.rotation??this.rotation,[u,c]=l%180==0?[this.codedWidth,this.codedHeight]:[this.codedHeight,this.codedWidth];t.crop&&tr(t.crop,u,c);let{sx:d,sy:p,sWidth:f,sHeight:h}=this._rotateSourceRegion(t.crop?.left??0,t.crop?.top??0,t.crop?.width??u,t.crop?.height??c,l);if("fill"===t.fit)r=0,i=0,a=o,n=s;else{let[e,l]=t.crop?[t.crop.width,t.crop.height]:[u,c],d="contain"===t.fit?Math.min(o/e,s/l):Math.max(o/e,s/l);a=e*d,n=l*d,r=(o-a)/2,i=(s-n)/2}e.save();let m=l%180==0?1:a/n;e.translate(o/2,s/2),e.rotate(l*Math.PI/180),e.scale(1/m,m),e.translate(-o/2,-s/2),e.drawImage(this.toCanvasImageSource(),d,p,f,h,r,i,a,n),e.restore()}_rotateSourceRegion(e,t,r,i,a){return 90===a?[e,t,r,i]=[t,this.codedHeight-e-r,i,r]:180===a?[e,t]=[this.codedWidth-e-r,this.codedHeight-t-i]:270===a&&([e,t,r,i]=[this.codedWidth-t-i,e,i,r]),{sx:e,sy:t,sWidth:r,sHeight:i}}toCanvasImageSource(){if(this._closed)throw Error("VideoSample is closed.");if(t(null!==this._data),!(this._data instanceof Uint8Array))return this._data;{let e=this.toVideoFrame();return queueMicrotask(()=>e.close()),e}}setRotation(e){if(![0,90,180,270].includes(e))throw TypeError("newRotation must be 0, 90, 180, or 270.");this.rotation=e}setTimestamp(e){if(!Number.isFinite(e))throw TypeError("newTimestamp must be a number.");this.timestamp=e}setDuration(e){if(!Number.isFinite(e)||e<0)throw TypeError("newDuration must be a non-negative number.");this.duration=e}[Symbol.dispose](){this.close()}}class te{constructor(e){this.primaries=e?.primaries??null,this.transfer=e?.transfer??null,this.matrix=e?.matrix??null,this.fullRange=e?.fullRange??null}toJSON(){return{primaries:this.primaries,transfer:this.transfer,matrix:this.matrix,fullRange:this.fullRange}}}let tt=e=>"u">typeof VideoFrame&&e instanceof VideoFrame,tr=(e,r,i)=>{e.left=Math.min(e.left,r),e.top=Math.min(e.top,i),e.width=Math.min(e.width,r-e.left),e.height=Math.min(e.height,i-e.top),t(e.width>=0),t(e.height>=0)},ti=(e,t)=>{if(!e||"object"!=typeof e)throw TypeError(t+"crop, when provided, must be an object.");if(!Number.isInteger(e.left)||e.left<0)throw TypeError(t+"crop.left must be a non-negative integer.");if(!Number.isInteger(e.top)||e.top<0)throw TypeError(t+"crop.top must be a non-negative integer.");if(!Number.isInteger(e.width)||e.width<0)throw TypeError(t+"crop.width must be a non-negative integer.");if(!Number.isInteger(e.height)||e.height<0)throw TypeError(t+"crop.height must be a non-negative integer.")},ta=e=>{if(!e||"object"!=typeof e)throw TypeError("options must be an object.");if(void 0!==e.colorSpace&&!["display-p3","srgb"].includes(e.colorSpace))throw TypeError("options.colorSpace, when provided, must be 'display-p3' or 'srgb'.");if(void 0!==e.format&&"string"!=typeof e.format)throw TypeError("options.format, when provided, must be a string.");if(void 0!==e.layout){if(!Array.isArray(e.layout))throw TypeError("options.layout, when provided, must be an array.");for(let t of e.layout){if(!t||"object"!=typeof t)throw TypeError("Each entry in options.layout must be an object.");if(!Number.isInteger(t.offset)||t.offset<0)throw TypeError("plane.offset must be a non-negative integer.");if(!Number.isInteger(t.stride)||t.stride<0)throw TypeError("plane.stride must be a non-negative integer.")}}if(void 0!==e.rect){if(!e.rect||"object"!=typeof e.rect)throw TypeError("options.rect, when provided, must be an object.");if(void 0!==e.rect.x&&(!Number.isInteger(e.rect.x)||e.rect.x<0))throw TypeError("options.rect.x, when provided, must be a non-negative integer.");if(void 0!==e.rect.y&&(!Number.isInteger(e.rect.y)||e.rect.y<0))throw TypeError("options.rect.y, when provided, must be a non-negative integer.");if(void 0!==e.rect.width&&(!Number.isInteger(e.rect.width)||e.rect.width<0))throw TypeError("options.rect.width, when provided, must be a non-negative integer.");if(void 0!==e.rect.height&&(!Number.isInteger(e.rect.height)||e.rect.height<0))throw TypeError("options.rect.height, when provided, must be a non-negative integer.")}},tn=(e,t,r)=>{let i=to(e),a=[],n=0;for(let e of i){let i=Math.ceil(t/e.widthDivisor),o=Math.ceil(r/e.heightDivisor),s=i*e.sampleBytes,l=s*o;a.push({offset:n,stride:s}),n+=l}return a},to=e=>{let r=(e,t,r,i,a)=>{let n=[{sampleBytes:e,widthDivisor:1,heightDivisor:1},{sampleBytes:t,widthDivisor:r,heightDivisor:i},{sampleBytes:t,widthDivisor:r,heightDivisor:i}];return a&&n.push({sampleBytes:e,widthDivisor:1,heightDivisor:1}),n};switch(e){case"I420":return r(1,1,2,2,!1);case"I420P10":case"I420P12":return r(2,2,2,2,!1);case"I420A":return r(1,1,2,2,!0);case"I420AP10":case"I420AP12":return r(2,2,2,2,!0);case"I422":return r(1,1,2,1,!1);case"I422P10":case"I422P12":return r(2,2,2,1,!1);case"I422A":return r(1,1,2,1,!0);case"I422AP10":case"I422AP12":return r(2,2,2,1,!0);case"I444":return r(1,1,1,1,!1);case"I444P10":case"I444P12":return r(2,2,1,1,!1);case"I444A":return r(1,1,1,1,!0);case"I444AP10":case"I444AP12":return r(2,2,1,1,!0);case"NV12":return[{sampleBytes:1,widthDivisor:1,heightDivisor:1},{sampleBytes:2,widthDivisor:2,heightDivisor:2}];case"RGBA":case"RGBX":case"BGRA":case"BGRX":return[{sampleBytes:4,widthDivisor:1,heightDivisor:1}];default:C(e),t(!1)}},ts=new Set(["f32","f32-planar","s16","s16-planar","s32","s32-planar","u8","u8-planar"]);class tl{get microsecondTimestamp(){return Math.trunc(A*this.timestamp)}get microsecondDuration(){return Math.trunc(A*this.duration)}constructor(e){if(this._closed=!1,tf(e)){if(null===e.format)throw TypeError("AudioData with null format is not supported.");this._data=e,this.format=e.format,this.sampleRate=e.sampleRate,this.numberOfFrames=e.numberOfFrames,this.numberOfChannels=e.numberOfChannels,this.timestamp=e.timestamp/1e6,this.duration=e.numberOfFrames/e.sampleRate}else{let t;if(!e||"object"!=typeof e)throw TypeError("Invalid AudioDataInit: must be an object.");if(!ts.has(e.format))throw TypeError("Invalid AudioDataInit: invalid format.");if(!Number.isFinite(e.sampleRate)||e.sampleRate<=0)throw TypeError("Invalid AudioDataInit: sampleRate must be > 0.");if(!Number.isInteger(e.numberOfChannels)||0===e.numberOfChannels)throw TypeError("Invalid AudioDataInit: numberOfChannels must be an integer > 0.");if(!Number.isFinite(e?.timestamp))throw TypeError("init.timestamp must be a number.");const r=e.data.byteLength/(tu(e.format)*e.numberOfChannels);if(!Number.isInteger(r))throw TypeError("Invalid AudioDataInit: data size is not a multiple of frame size.");if(this.format=e.format,this.sampleRate=e.sampleRate,this.numberOfFrames=r,this.numberOfChannels=e.numberOfChannels,this.timestamp=e.timestamp,this.duration=r/e.sampleRate,e.data instanceof ArrayBuffer)t=new Uint8Array(e.data);else if(ArrayBuffer.isView(e.data))t=new Uint8Array(e.data.buffer,e.data.byteOffset,e.data.byteLength);else throw TypeError("Invalid AudioDataInit: data is not a BufferSource.");const i=this.numberOfFrames*this.numberOfChannels*tu(this.format);if(t.byteLength<i)throw TypeError("Invalid AudioDataInit: insufficient data size.");this._data=t}e8?.register(this,{type:"audio",data:this._data},this)}allocationSize(e){if(!e||"object"!=typeof e)throw TypeError("options must be an object.");if(!Number.isInteger(e.planeIndex)||e.planeIndex<0)throw TypeError("planeIndex must be a non-negative integer.");if(void 0!==e.format&&!ts.has(e.format))throw TypeError("Invalid format.");if(void 0!==e.frameOffset&&(!Number.isInteger(e.frameOffset)||e.frameOffset<0))throw TypeError("frameOffset must be a non-negative integer.");if(void 0!==e.frameCount&&(!Number.isInteger(e.frameCount)||e.frameCount<0))throw TypeError("frameCount must be a non-negative integer.");if(this._closed)throw Error("AudioSample is closed.");let t=e.format??this.format,r=e.frameOffset??0;if(r>=this.numberOfFrames)throw RangeError("frameOffset out of range");let i=void 0!==e.frameCount?e.frameCount:this.numberOfFrames-r;if(i>this.numberOfFrames-r)throw RangeError("frameCount out of range");let a=tu(t),n=tc(t);if(n&&e.planeIndex>=this.numberOfChannels||!n&&0!==e.planeIndex)throw RangeError("planeIndex out of range");return(n?i:i*this.numberOfChannels)*a}copyTo(e,t){if(!x(e))throw TypeError("destination must be an ArrayBuffer or an ArrayBuffer view.");if(!t||"object"!=typeof t)throw TypeError("options must be an object.");if(!Number.isInteger(t.planeIndex)||t.planeIndex<0)throw TypeError("planeIndex must be a non-negative integer.");if(void 0!==t.format&&!ts.has(t.format))throw TypeError("Invalid format.");if(void 0!==t.frameOffset&&(!Number.isInteger(t.frameOffset)||t.frameOffset<0))throw TypeError("frameOffset must be a non-negative integer.");if(void 0!==t.frameCount&&(!Number.isInteger(t.frameCount)||t.frameCount<0))throw TypeError("frameCount must be a non-negative integer.");if(this._closed)throw Error("AudioSample is closed.");let{planeIndex:r,format:i,frameCount:a,frameOffset:n}=t,o=this.format,s=i??this.format;if(!s)throw Error("Destination format not determined");let l=this.numberOfFrames,c=this.numberOfChannels,d=n??0;if(d>=l)throw RangeError("frameOffset out of range");let p=void 0!==a?a:l-d;if(p>l-d)throw RangeError("frameCount out of range");let f=tu(s),h=tc(s);if(h&&r>=c||!h&&0!==r)throw RangeError("planeIndex out of range");let m=h?p:p*c;if(e.byteLength<m*f)throw RangeError("Destination buffer is too small");let g=u(e),v=tp(s);if(tf(this._data))(null!==M?M:M=!!("u">typeof navigator&&(navigator.vendor?.match(/apple/i)||/AppleWebKit/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)||/\b(iPad|iPhone|iPod)\b/.test(navigator.userAgent))))&&c>2&&s!==o?th(this._data,g,o,s,c,r,d,p):this._data.copyTo(e,{planeIndex:r,frameOffset:d,frameCount:p,format:s});else{let e=u(this._data),t=td(o),i=tu(o),a=tc(o);for(let n=0;n<p;n++)if(h)v(g,n*f,t(e,a?(r*l+(n+d))*i:((n+d)*c+r)*i));else for(let r=0;r<c;r++)v(g,(n*c+r)*f,t(e,a?(r*l+(n+d))*i:((n+d)*c+r)*i))}}clone(){if(this._closed)throw Error("AudioSample is closed.");if(!tf(this._data))return new tl({format:this.format,sampleRate:this.sampleRate,numberOfFrames:this.numberOfFrames,numberOfChannels:this.numberOfChannels,timestamp:this.timestamp,data:this._data});{let e=new tl(this._data.clone());return e.setTimestamp(this.timestamp),e}}close(){this._closed||(e8?.unregister(this),tf(this._data)?this._data.close():this._data=new Uint8Array(0),this._closed=!0)}toAudioData(){if(this._closed)throw Error("AudioSample is closed.");if(!tf(this._data))return new AudioData({format:this.format,sampleRate:this.sampleRate,numberOfFrames:this.numberOfFrames,numberOfChannels:this.numberOfChannels,timestamp:this.microsecondTimestamp,data:this._data.buffer instanceof ArrayBuffer?this._data.buffer:this._data.slice()});if(this._data.timestamp===this.microsecondTimestamp)return this._data.clone();if(tc(this.format)){let e=this.allocationSize({planeIndex:0,format:this.format}),t=new ArrayBuffer(e*this.numberOfChannels);for(let r=0;r<this.numberOfChannels;r++)this.copyTo(new Uint8Array(t,r*e,e),{planeIndex:r,format:this.format});return new AudioData({format:this.format,sampleRate:this.sampleRate,numberOfFrames:this.numberOfFrames,numberOfChannels:this.numberOfChannels,timestamp:this.microsecondTimestamp,data:t})}{let e=new ArrayBuffer(this.allocationSize({planeIndex:0,format:this.format}));return this.copyTo(e,{planeIndex:0,format:this.format}),new AudioData({format:this.format,sampleRate:this.sampleRate,numberOfFrames:this.numberOfFrames,numberOfChannels:this.numberOfChannels,timestamp:this.microsecondTimestamp,data:e})}}toAudioBuffer(){if(this._closed)throw Error("AudioSample is closed.");let e=new AudioBuffer({numberOfChannels:this.numberOfChannels,length:this.numberOfFrames,sampleRate:this.sampleRate}),t=new Float32Array(this.allocationSize({planeIndex:0,format:"f32-planar"})/4);for(let r=0;r<this.numberOfChannels;r++)this.copyTo(t,{planeIndex:r,format:"f32-planar"}),e.copyToChannel(t,r);return e}setTimestamp(e){if(!Number.isFinite(e))throw TypeError("newTimestamp must be a number.");this.timestamp=e}[Symbol.dispose](){this.close()}static*_fromAudioBuffer(e,t){if(!(e instanceof AudioBuffer))throw TypeError("audioBuffer must be an AudioBuffer.");let r=e.numberOfChannels,i=e.sampleRate,a=e.length,n=Math.floor(24e4/r),o=0,s=a;for(;s>0;){let a=Math.min(n,s),l=new Float32Array(r*a);for(let t=0;t<r;t++)e.copyFromChannel(l.subarray(t*a,(t+1)*a),t,o);yield new tl({format:"f32-planar",sampleRate:i,numberOfFrames:a,numberOfChannels:r,timestamp:t+o/i,data:l}),o+=a,s-=a}}static fromAudioBuffer(e,t){if(!(e instanceof AudioBuffer))throw TypeError("audioBuffer must be an AudioBuffer.");let r=e.numberOfChannels,i=e.sampleRate,a=e.length,n=Math.floor(24e4/r),o=0,s=a,l=[];for(;s>0;){let a=Math.min(n,s),u=new Float32Array(r*a);for(let t=0;t<r;t++)e.copyFromChannel(u.subarray(t*a,(t+1)*a),t,o);let c=new tl({format:"f32-planar",sampleRate:i,numberOfFrames:a,numberOfChannels:r,timestamp:t+o/i,data:u});l.push(c),o+=a,s-=a}return l}}let tu=e=>{switch(e){case"u8":case"u8-planar":return 1;case"s16":case"s16-planar":return 2;case"s32":case"s32-planar":case"f32":case"f32-planar":return 4;default:throw Error("Unknown AudioSampleFormat")}},tc=e=>{switch(e){case"u8-planar":case"s16-planar":case"s32-planar":case"f32-planar":return!0;default:return!1}},td=e=>{switch(e){case"u8":case"u8-planar":return(e,t)=>(e.getUint8(t)-128)/128;case"s16":case"s16-planar":return(e,t)=>e.getInt16(t,!0)/32768;case"s32":case"s32-planar":return(e,t)=>e.getInt32(t,!0)/0x80000000;case"f32":case"f32-planar":return(e,t)=>e.getFloat32(t,!0)}},tp=e=>{switch(e){case"u8":case"u8-planar":return(e,t,r)=>e.setUint8(t,T((r+1)*127.5,0,255));case"s16":case"s16-planar":return(e,t,r)=>e.setInt16(t,T(Math.round(32767*r),-32768,32767),!0);case"s32":case"s32-planar":return(e,t,r)=>e.setInt32(t,T(Math.round(0x7fffffff*r),-0x80000000,0x7fffffff),!0);case"f32":case"f32-planar":return(e,t,r)=>e.setFloat32(t,r,!0)}},tf=e=>"u">typeof AudioData&&e instanceof AudioData,th=(e,t,r,i,a,n,o,s)=>{let l=td(r),c=tp(i),d=tu(r),p=tu(i),f=tc(r);if(tc(i))if(f){let i=new ArrayBuffer(s*d),a=u(i);e.copyTo(i,{planeIndex:n,frameOffset:o,frameCount:s,format:r});for(let e=0;e<s;e++){let r=e*d;c(t,e*p,l(a,r))}}else{let i=new ArrayBuffer(s*a*d),f=u(i);e.copyTo(i,{planeIndex:0,frameOffset:o,frameCount:s,format:r});for(let e=0;e<s;e++){let r=(e*a+n)*d;c(t,e*p,l(f,r))}}else if(f){let i=new ArrayBuffer(s*d),n=u(i);for(let u=0;u<a;u++){e.copyTo(i,{planeIndex:u,frameOffset:o,frameCount:s,format:r});for(let e=0;e<s;e++){let r=e*d;c(t,(e*a+u)*p,l(n,r))}}}else{let i=new ArrayBuffer(s*a*d),n=u(i);e.copyTo(i,{planeIndex:0,frameOffset:o,frameCount:s,format:r});for(let e=0;e<s;e++)for(let r=0;r<a;r++){let i=e*a+r,o=i*d;c(t,i*p,l(n,o))}}},tm=e=>{if(!e||"object"!=typeof e)throw TypeError("options must be an object.");if(void 0!==e.metadataOnly&&"boolean"!=typeof e.metadataOnly)throw TypeError("options.metadataOnly, when defined, must be a boolean.");if(void 0!==e.verifyKeyPackets&&"boolean"!=typeof e.verifyKeyPackets)throw TypeError("options.verifyKeyPackets, when defined, must be a boolean.");if(e.verifyKeyPackets&&e.metadataOnly)throw TypeError("options.verifyKeyPackets and options.metadataOnly cannot be enabled together.")},tg=e=>{if(!("number"==typeof e&&!Number.isNaN(e)))throw TypeError("timestamp must be a number.")},tv=(e,t,r)=>r.verifyKeyPackets?t.then(async t=>{if(!t||"delta"===t.type)return t;let r=await e.determinePacketType(t);return r&&(t.type=r),t}):t;class ty{constructor(e){if(!(e instanceof tb))throw TypeError("track must be an InputTrack.");this._track=e}getFirstPacket(e={}){if(tm(e),this._track.input._disposed)throw new t7;return tv(this._track,this._track._backing.getFirstPacket(e),e)}getPacket(e,t={}){if(tg(e),tm(t),this._track.input._disposed)throw new t7;return tv(this._track,this._track._backing.getPacket(e,t),t)}getNextPacket(e,t={}){if(!(e instanceof e4))throw TypeError("packet must be an EncodedPacket.");if(tm(t),this._track.input._disposed)throw new t7;return tv(this._track,this._track._backing.getNextPacket(e,t),t)}async getKeyPacket(e,r={}){if(tg(e),tm(r),this._track.input._disposed)throw new t7;if(!r.verifyKeyPackets)return this._track._backing.getKeyPacket(e,r);let i=await this._track._backing.getKeyPacket(e,r);return i&&(t("key"===i.type),"delta"===await this._track.determinePacketType(i))?this.getKeyPacket(i.timestamp-1/this._track.timeResolution,r):i}async getNextKeyPacket(e,r={}){if(!(e instanceof e4))throw TypeError("packet must be an EncodedPacket.");if(tm(r),this._track.input._disposed)throw new t7;if(!r.verifyKeyPackets)return this._track._backing.getNextKeyPacket(e,r);let i=await this._track._backing.getNextKeyPacket(e,r);return i&&(t("key"===i.type),"delta"===await this._track.determinePacketType(i))?this.getNextKeyPacket(i,r):i}packets(e,t,r={}){if(void 0!==e&&!(e instanceof e4))throw TypeError("startPacket must be an EncodedPacket.");if(void 0!==e&&e.isMetadataOnly&&!r?.metadataOnly)throw TypeError("startPacket can only be metadata-only if options.metadataOnly is enabled.");if(void 0!==t&&!(t instanceof e4))throw TypeError("endPacket must be an EncodedPacket.");if(tm(r),this._track.input._disposed)throw new t7;let i=[],{promise:a,resolve:n}=k(),{promise:o,resolve:s}=k(),l=!1,u=!1,c=null,d=[],p=()=>Math.max(2,d.length);(async()=>{let c=e??await this.getFirstPacket(r);for(;c&&!u&&!this._track.input._disposed&&!(t&&c.sequenceNumber>=t?.sequenceNumber);){if(i.length>p()){({promise:o,resolve:s}=k()),await o;continue}i.push(c),n(),({promise:a,resolve:n}=k()),c=await this.getNextPacket(c,r)}l=!0,n()})().catch(e=>{c||(c=e,n())});let f=this._track;return{async next(){for(;;)if(f.input._disposed)throw new t7;else if(u)return{value:void 0,done:!0};else if(c)throw c;else if(i.length>0){let e=i.shift(),t=performance.now();for(d.push(t);d.length>0&&t-d[0]>=1e3;)d.shift();return s(),{value:e,done:!1}}else{if(l)return{value:void 0,done:!0};await a}},return:async()=>(u=!0,s(),n(),{value:void 0,done:!0}),async throw(e){throw e},[Symbol.asyncIterator](){return this}}}}class tb{constructor(e,t){this.input=e,this._backing=t}isVideoTrack(){return this instanceof tx}isAudioTrack(){return this instanceof tw}get id(){return this._backing.getId()}get internalCodecId(){return this._backing.getInternalCodecId()}get languageCode(){return this._backing.getLanguageCode()}get name(){return this._backing.getName()}get timeResolution(){return this._backing.getTimeResolution()}get disposition(){return this._backing.getDisposition()}getFirstTimestamp(){return this._backing.getFirstTimestamp()}computeDuration(){return this._backing.computeDuration()}async computePacketStats(e=1/0){let t=new ty(this),r=1/0,i=-1/0,a=0,n=0;for await(let o of t.packets(void 0,void 0,{metadataOnly:!0})){if(a>=e&&o.timestamp>=i)break;r=Math.min(r,o.timestamp),i=Math.max(i,o.timestamp+o.duration),a++,n+=o.byteLength}return{packetCount:a,averagePacketRate:a?Number((a/(i-r)).toPrecision(16)):0,averageBitrate:a?Number((8*n/(i-r)).toPrecision(16)):0}}}class tx extends tb{constructor(e,t){super(e,t),this._backing=t}get type(){return"video"}get codec(){return this._backing.getCodec()}get codedWidth(){return this._backing.getCodedWidth()}get codedHeight(){return this._backing.getCodedHeight()}get rotation(){return this._backing.getRotation()}get displayWidth(){return this._backing.getRotation()%180==0?this._backing.getCodedWidth():this._backing.getCodedHeight()}get displayHeight(){return this._backing.getRotation()%180==0?this._backing.getCodedHeight():this._backing.getCodedWidth()}getColorSpace(){return this._backing.getColorSpace()}async hasHighDynamicRange(){let e=await this._backing.getColorSpace();return"bt2020"===e.primaries||"smpte432"===e.primaries||"pg"===e.transfer||"hlg"===e.transfer||"bt2020-ncl"===e.matrix}canBeTransparent(){return this._backing.canBeTransparent()}getDecoderConfig(){return this._backing.getDecoderConfig()}async getCodecParameterString(){let e=await this._backing.getDecoderConfig();return e?.codec??null}async canDecode(){try{let e=await this._backing.getDecoderConfig();if(!e)return!1;let r=this._backing.getCodec();if(t(null!==r),em.some(t=>t.supports(r,e)))return!0;if("u"<typeof VideoDecoder)return!1;let i=await VideoDecoder.isConfigSupported(e);return!0===i.supported}catch(e){return console.error("Error during decodability check:",e),!1}}async determinePacketType(e){if(!(e instanceof e4))throw TypeError("packet must be an EncodedPacket.");if(e.isMetadataOnly)throw TypeError("packet must not be metadata-only to determine its type.");if(null===this.codec)return null;let r=await this.getDecoderConfig();return t(r),e1(this.codec,r,e.data)}}class tw extends tb{constructor(e,t){super(e,t),this._backing=t}get type(){return"audio"}get codec(){return this._backing.getCodec()}get numberOfChannels(){return this._backing.getNumberOfChannels()}get sampleRate(){return this._backing.getSampleRate()}getDecoderConfig(){return this._backing.getDecoderConfig()}async getCodecParameterString(){let e=await this._backing.getDecoderConfig();return e?.codec??null}async canDecode(){try{let e=await this._backing.getDecoderConfig();if(!e)return!1;let r=this._backing.getCodec();if(t(null!==r),eg.some(t=>t.supports(r,e))||e.codec.startsWith("pcm-"))return!0;{if("u"<typeof AudioDecoder)return!1;let t=await AudioDecoder.isConfigSupported(e);return!0===t.supported}}catch(e){return console.error("Error during decodability check:",e),!1}}async determinePacketType(e){if(!(e instanceof e4))throw TypeError("packet must be an EncodedPacket.");return null===this.codec?null:"key"}}let tS=e=>{let t=(e.hasVideo?"video/":e.hasAudio?"audio/":"application/")+(e.isQuickTime?"quicktime":"mp4");if(e.codecStrings.length>0){let r=[...new Set(e.codecStrings)];t+=`; codecs="${r.join(", ")}"`}return t};class tk{constructor(e,t){if(this.data=e,this.mimeType=t,!(e instanceof Uint8Array))throw TypeError("data must be a Uint8Array.");if("string"!=typeof t)throw TypeError("mimeType must be a string.")}}class tC{constructor(e,t,r,i){if(this.data=e,this.mimeType=t,this.name=r,this.description=i,!(e instanceof Uint8Array))throw TypeError("data must be a Uint8Array.");if(void 0!==t&&"string"!=typeof t)throw TypeError("mimeType, when provided, must be a string.");if(void 0!==r&&"string"!=typeof r)throw TypeError("name, when provided, must be a string.");if(void 0!==i&&"string"!=typeof i)throw TypeError("description, when provided, must be a string.")}}(e,t)=>{if(e.presentationTimestamps){let r=S(e.presentationTimestamps,t,e=>e.presentationTimestamp);return -1===r?-1:e.presentationTimestamps[r].sampleIndex}{let r=S(e.sampleTimingEntries,t,e=>e.startDecodeTimestamp);if(-1===r)return -1;let i=e.sampleTimingEntries[r];return i.startIndex+Math.min(Math.floor((t-i.startDecodeTimestamp)/i.delta),i.count-1)}};class tE{constructor(e){this.value=e}}class t_{constructor(e){this.value=e}}class tT{constructor(e){this.value=e}}class tP{constructor(e){this.value=e}}(tH=t0||(t0={}))[tH.EBML=0x1a45dfa3]="EBML",tH[tH.EBMLVersion=17030]="EBMLVersion",tH[tH.EBMLReadVersion=17143]="EBMLReadVersion",tH[tH.EBMLMaxIDLength=17138]="EBMLMaxIDLength",tH[tH.EBMLMaxSizeLength=17139]="EBMLMaxSizeLength",tH[tH.DocType=17026]="DocType",tH[tH.DocTypeVersion=17031]="DocTypeVersion",tH[tH.DocTypeReadVersion=17029]="DocTypeReadVersion",tH[tH.Void=236]="Void",tH[tH.Segment=0x18538067]="Segment",tH[tH.SeekHead=0x114d9b74]="SeekHead",tH[tH.Seek=19899]="Seek",tH[tH.SeekID=21419]="SeekID",tH[tH.SeekPosition=21420]="SeekPosition",tH[tH.Duration=17545]="Duration",tH[tH.Info=0x1549a966]="Info",tH[tH.TimestampScale=2807729]="TimestampScale",tH[tH.MuxingApp=19840]="MuxingApp",tH[tH.WritingApp=22337]="WritingApp",tH[tH.Tracks=0x1654ae6b]="Tracks",tH[tH.TrackEntry=174]="TrackEntry",tH[tH.TrackNumber=215]="TrackNumber",tH[tH.TrackUID=29637]="TrackUID",tH[tH.TrackType=131]="TrackType",tH[tH.FlagEnabled=185]="FlagEnabled",tH[tH.FlagDefault=136]="FlagDefault",tH[tH.FlagForced=21930]="FlagForced",tH[tH.FlagOriginal=21934]="FlagOriginal",tH[tH.FlagHearingImpaired=21931]="FlagHearingImpaired",tH[tH.FlagVisualImpaired=21932]="FlagVisualImpaired",tH[tH.FlagCommentary=21935]="FlagCommentary",tH[tH.FlagLacing=156]="FlagLacing",tH[tH.Name=21358]="Name",tH[tH.Language=2274716]="Language",tH[tH.LanguageBCP47=2274717]="LanguageBCP47",tH[tH.CodecID=134]="CodecID",tH[tH.CodecPrivate=25506]="CodecPrivate",tH[tH.CodecDelay=22186]="CodecDelay",tH[tH.SeekPreRoll=22203]="SeekPreRoll",tH[tH.DefaultDuration=2352003]="DefaultDuration",tH[tH.Video=224]="Video",tH[tH.PixelWidth=176]="PixelWidth",tH[tH.PixelHeight=186]="PixelHeight",tH[tH.AlphaMode=21440]="AlphaMode",tH[tH.Audio=225]="Audio",tH[tH.SamplingFrequency=181]="SamplingFrequency",tH[tH.Channels=159]="Channels",tH[tH.BitDepth=25188]="BitDepth",tH[tH.SimpleBlock=163]="SimpleBlock",tH[tH.BlockGroup=160]="BlockGroup",tH[tH.Block=161]="Block",tH[tH.BlockAdditions=30113]="BlockAdditions",tH[tH.BlockMore=166]="BlockMore",tH[tH.BlockAdditional=165]="BlockAdditional",tH[tH.BlockAddID=238]="BlockAddID",tH[tH.BlockDuration=155]="BlockDuration",tH[tH.ReferenceBlock=251]="ReferenceBlock",tH[tH.Cluster=0x1f43b675]="Cluster",tH[tH.Timestamp=231]="Timestamp",tH[tH.Cues=0x1c53bb6b]="Cues",tH[tH.CuePoint=187]="CuePoint",tH[tH.CueTime=179]="CueTime",tH[tH.CueTrackPositions=183]="CueTrackPositions",tH[tH.CueTrack=247]="CueTrack",tH[tH.CueClusterPosition=241]="CueClusterPosition",tH[tH.Colour=21936]="Colour",tH[tH.MatrixCoefficients=21937]="MatrixCoefficients",tH[tH.TransferCharacteristics=21946]="TransferCharacteristics",tH[tH.Primaries=21947]="Primaries",tH[tH.Range=21945]="Range",tH[tH.Projection=30320]="Projection",tH[tH.ProjectionType=30321]="ProjectionType",tH[tH.ProjectionPoseRoll=30325]="ProjectionPoseRoll",tH[tH.Attachments=0x1941a469]="Attachments",tH[tH.AttachedFile=24999]="AttachedFile",tH[tH.FileDescription=18046]="FileDescription",tH[tH.FileName=18030]="FileName",tH[tH.FileMediaType=18016]="FileMediaType",tH[tH.FileData=18012]="FileData",tH[tH.FileUID=18094]="FileUID",tH[tH.Chapters=0x1043a770]="Chapters",tH[tH.Tags=0x1254c367]="Tags",tH[tH.Tag=29555]="Tag",tH[tH.Targets=25536]="Targets",tH[tH.TargetTypeValue=26826]="TargetTypeValue",tH[tH.TargetType=25546]="TargetType",tH[tH.TagTrackUID=25541]="TagTrackUID",tH[tH.TagEditionUID=25545]="TagEditionUID",tH[tH.TagChapterUID=25540]="TagChapterUID",tH[tH.TagAttachmentUID=25542]="TagAttachmentUID",tH[tH.SimpleTag=26568]="SimpleTag",tH[tH.TagName=17827]="TagName",tH[tH.TagLanguage=17530]="TagLanguage",tH[tH.TagString=17543]="TagString",tH[tH.TagBinary=17541]="TagBinary",tH[tH.ContentEncodings=28032]="ContentEncodings",tH[tH.ContentEncoding=25152]="ContentEncoding",tH[tH.ContentEncodingOrder=20529]="ContentEncodingOrder",tH[tH.ContentEncodingScope=20530]="ContentEncodingScope",tH[tH.ContentCompression=20532]="ContentCompression",tH[tH.ContentCompAlgo=16980]="ContentCompAlgo",tH[tH.ContentCompSettings=16981]="ContentCompSettings",tH[tH.ContentEncryption=20533]="ContentEncryption";let tI=[t0.EBML,t0.Segment],tA=[t0.SeekHead,t0.Info,t0.Cluster,t0.Tracks,t0.Cues,t0.Attachments,t0.Chapters,t0.Tags],tO=[...tI,...tA],tM=e=>{if(e<256)return 1;if(e<65536)return 2;if(e<0x1000000)return 3;if(e<0x100000000)return 4;if(e<0x10000000000)return 5;else return 6},tF=e=>{if(e<1n<<8n)return 1;if(e<1n<<16n)return 2;if(e<1n<<24n)return 3;if(e<1n<<32n)return 4;if(e<1n<<40n)return 5;else if(e<1n<<48n)return 6;else if(e<1n<<56n)return 7;else return 8},tR=e=>{if(e>=-64&&e<64)return 1;if(e>=-8192&&e<8192)return 2;if(e>=-1048576&&e<1048576)return 3;if(e>=-0x8000000&&e<0x8000000)return 4;if(e>=-0x400000000&&e<0x400000000)return 5;else return 6},tD=e=>{if(e<127)return 1;if(e<16383)return 2;if(e<2097151)return 3;if(e<0xfffffff)return 4;if(e<0x800000000-1)return 5;else if(e<0x40000000000-1)return 6;else throw Error("EBML varint size not supported "+e)};class tj{constructor(e){this.writer=e,this.helper=new Uint8Array(8),this.helperView=new DataView(this.helper.buffer),this.offsets=new WeakMap,this.dataOffsets=new WeakMap}writeByte(e){this.helperView.setUint8(0,e),this.writer.write(this.helper.subarray(0,1))}writeFloat32(e){this.helperView.setFloat32(0,e,!1),this.writer.write(this.helper.subarray(0,4))}writeFloat64(e){this.helperView.setFloat64(0,e,!1),this.writer.write(this.helper)}writeUnsignedInt(e,t=tM(e)){let r=0;switch(t){case 6:this.helperView.setUint8(r++,e/0x10000000000|0);case 5:this.helperView.setUint8(r++,e/0x100000000|0);case 4:this.helperView.setUint8(r++,e>>24);case 3:this.helperView.setUint8(r++,e>>16);case 2:this.helperView.setUint8(r++,e>>8);case 1:this.helperView.setUint8(r++,e);break;default:throw Error("Bad unsigned int size "+t)}this.writer.write(this.helper.subarray(0,r))}writeUnsignedBigInt(e,t=tF(e)){let r=0;for(let i=t-1;i>=0;i--)this.helperView.setUint8(r++,Number(e>>BigInt(8*i)&255n));this.writer.write(this.helper.subarray(0,r))}writeSignedInt(e,t=tR(e)){e<0&&(e+=2**(8*t)),this.writeUnsignedInt(e,t)}writeVarInt(e,t=tD(e)){let r=0;switch(t){case 1:this.helperView.setUint8(r++,128|e);break;case 2:this.helperView.setUint8(r++,64|e>>8),this.helperView.setUint8(r++,e);break;case 3:this.helperView.setUint8(r++,32|e>>16),this.helperView.setUint8(r++,e>>8),this.helperView.setUint8(r++,e);break;case 4:this.helperView.setUint8(r++,16|e>>24),this.helperView.setUint8(r++,e>>16),this.helperView.setUint8(r++,e>>8),this.helperView.setUint8(r++,e);break;case 5:this.helperView.setUint8(r++,8|e/0x100000000&7),this.helperView.setUint8(r++,e>>24),this.helperView.setUint8(r++,e>>16),this.helperView.setUint8(r++,e>>8),this.helperView.setUint8(r++,e);break;case 6:this.helperView.setUint8(r++,4|e/0x10000000000&3),this.helperView.setUint8(r++,e/0x100000000|0),this.helperView.setUint8(r++,e>>24),this.helperView.setUint8(r++,e>>16),this.helperView.setUint8(r++,e>>8),this.helperView.setUint8(r++,e);break;default:throw Error("Bad EBML varint size "+t)}this.writer.write(this.helper.subarray(0,r))}writeAsciiString(e){this.writer.write(new Uint8Array(e.split("").map(e=>e.charCodeAt(0))))}writeEBML(e){if(null!==e)if(e instanceof Uint8Array)this.writer.write(e);else if(Array.isArray(e))for(let t of e)this.writeEBML(t);else if(this.offsets.set(e,this.writer.getPos()),this.writeUnsignedInt(e.id),Array.isArray(e.data)){let t=this.writer.getPos(),r=-1===e.size?1:e.size??4;-1===e.size?this.writeByte(255):this.writer.seek(this.writer.getPos()+r);let i=this.writer.getPos();if(this.dataOffsets.set(e,i),this.writeEBML(e.data),-1!==e.size){let e=this.writer.getPos()-i,a=this.writer.getPos();this.writer.seek(t),this.writeVarInt(e,r),this.writer.seek(a)}}else if("number"==typeof e.data){let t=e.size??tM(e.data);this.writeVarInt(t),this.writeUnsignedInt(e.data,t)}else if("bigint"==typeof e.data){let t=e.size??tF(e.data);this.writeVarInt(t),this.writeUnsignedBigInt(e.data,t)}else if("string"==typeof e.data)this.writeVarInt(e.data.length),this.writeAsciiString(e.data);else if(e.data instanceof Uint8Array)this.writeVarInt(e.data.byteLength,e.size),this.writer.write(e.data);else if(e.data instanceof tE)this.writeVarInt(4),this.writeFloat32(e.data.value);else if(e.data instanceof t_)this.writeVarInt(8),this.writeFloat64(e.data.value);else if(e.data instanceof tT){let t=e.size??tR(e.data.value);this.writeVarInt(t),this.writeSignedInt(e.data.value,t)}else if(e.data instanceof tP){let t=d.encode(e.data.value);this.writeVarInt(t.length),this.writer.write(t)}else C(e.data)}}let tL={avc:"V_MPEG4/ISO/AVC",hevc:"V_MPEGH/ISO/HEVC",vp8:"V_VP8",vp9:"V_VP9",av1:"V_AV1",aac:"A_AAC",mp3:"A_MPEG/L3",opus:"A_OPUS",vorbis:"A_VORBIS",flac:"A_FLAC","pcm-u8":"A_PCM/INT/LIT","pcm-s16":"A_PCM/INT/LIT","pcm-s16be":"A_PCM/INT/BIG","pcm-s24":"A_PCM/INT/LIT","pcm-s24be":"A_PCM/INT/BIG","pcm-s32":"A_PCM/INT/LIT","pcm-s32be":"A_PCM/INT/BIG","pcm-f32":"A_PCM/FLOAT/IEEE","pcm-f64":"A_PCM/FLOAT/IEEE",webvtt:"S_TEXT/WEBVTT"},tB=e=>{let t=(e.hasVideo?"video/":e.hasAudio?"audio/":"application/")+(e.isWebM?"webm":"x-matroska");if(e.codecStrings.length>0){let r=[...new Set(e.codecStrings.filter(Boolean))];t+=`; codecs="${r.join(", ")}"`}return t};(tW=t1||(t1={}))[tW.None=0]="None",tW[tW.Xiph=1]="Xiph",tW[tW.FixedSize=2]="FixedSize",tW[tW.Ebml=3]="Ebml",(tq=t2||(t2={}))[tq.Block=1]="Block",tq[tq.Private=2]="Private",tq[tq.Next=4]="Next",(tG=t4||(t4={}))[tG.Zlib=0]="Zlib",tG[tG.Bzlib=1]="Bzlib",tG[tG.lzo1x=2]="lzo1x",tG[tG.HeaderStripping=3]="HeaderStripping";t0.SeekHead,t0.Info,t0.Tracks,t0.Cues;(tZ=t3||(t3={}))[tZ.Unsynchronisation=128]="Unsynchronisation",tZ[tZ.ExtendedHeader=64]="ExtendedHeader",tZ[tZ.ExperimentalIndicator=32]="ExperimentalIndicator",tZ[tZ.Footer=16]="Footer",(tK=t6||(t6={}))[tK.ISO_8859_1=0]="ISO_8859_1",tK[tK.UTF_16_WITH_BOM=1]="UTF_16_WITH_BOM",tK[tK.UTF_16_BE_NO_BOM=2]="UTF_16_BE_NO_BOM",tK[tK.UTF_8=3]="UTF_8";let tN=new Uint32Array(256);for(let e=0;e<256;e++){let t=e<<24;for(let e=0;e<8;e++)t=0x80000000&t?t<<1^0x4c11db7:t<<1;tN[e]=t>>>0}(tQ=t8||(t8={}))[tQ.PCM=1]="PCM",tQ[tQ.IEEE_FLOAT=3]="IEEE_FLOAT",tQ[tQ.ALAW=6]="ALAW",tQ[tQ.MULAW=7]="MULAW",tQ[tQ.EXTENSIBLE=65534]="EXTENSIBLE";let t$=e=>{let t=e.filePos,r=new n(rt(e,9));if(4095!==r.readBits(12)||(r.skipBits(1),0!==r.readBits(2)))return null;let i=r.readBits(1),a=r.readBits(2)+1,o=r.readBits(4);if(15===o)return null;r.skipBits(1);let s=r.readBits(3);if(0===s)throw Error("ADTS frames with channel configuration 0 are not supported.");r.skipBits(1),r.skipBits(1),r.skipBits(1),r.skipBits(1);let l=r.readBits(13);r.skipBits(11);let u=r.readBits(2)+1;if(1!==u)throw Error("ADTS frames with more than one AAC frame are not supported.");let c=null;return 1===i?e.filePos-=2:c=r.readBits(16),{objectType:a,samplingFrequencyIndex:o,channelConfiguration:s,frameLength:l,numberOfAacFrames:u,crcCheck:c,startPos:t}};e=>{let t=new n(e.payload);if(1!==t.readBits(24))return null;let r=t.readBits(8);if(t.skipBits(16),188===r||190===r||191===r||240===r||241===r||255===r||242===r||248===r)return null;t.skipBits(8);let i=t.readBits(2);t.skipBits(14);let a=0;if(2===i||3===i)t.skipBits(4),a+=0x40000000*t.readBits(3),t.skipBits(1),a+=32768*t.readBits(15),t.skipBits(1),a+=t.readBits(15);else throw Error("PES packets without PTS are not currently supported. If you think this file should be supported, please report it.");return{sectionStartPos:e.startPos,sectionEndPos:e.endPos,pts:a}};var tz,tU,tV,tH,tW,tq,tG,tZ,tK,tQ,tX,tJ,tY,t0,t1,t2,t4,t3,t6,t8,t5=e.i(912714);e.s([],832008),e.i(832008),e.s(["fs",0,t5],18281),e.i(18281);U();class t7 extends Error{constructor(e="Input has been disposed."){super(e),this.name="InputDisposedError"}}class t9{constructor(e,t,r,i,a){this.bytes=e,this.view=t,this.offset=r,this.start=i,this.end=a,this.bufferPos=i-r}static tempFromBytes(e){return new t9(e,u(e),0,0,e.length)}get length(){return this.end-this.start}get filePos(){return this.offset+this.bufferPos}set filePos(e){this.bufferPos=e-this.offset}get remainingLength(){return Math.max(this.end-this.filePos,0)}skip(e){this.bufferPos+=e}slice(e,t=this.end-e){if(e<this.start||e+t>this.end)throw RangeError("Slicing outside of original slice.");return new t9(this.bytes,this.view,this.offset,e,e+t)}}let re=(e,t)=>{if(e.filePos<e.start||e.filePos+t>e.end)throw RangeError(`Tried reading [${e.filePos}, ${e.filePos+t}), but slice is [${e.start}, ${e.end}). This is likely an internal error, please report it alongside the file that caused it.`)},rt=(e,t)=>{re(e,t);let r=e.bytes.subarray(e.bufferPos,e.bufferPos+t);return e.bufferPos+=t,r},rr=/<(?:(\d{2}):)?(\d{2}):(\d{2}).(\d{3})>/g,ri=/(?:(\d{2}):)?(\d{2}):(\d{2}).(\d{3})/,ra=e=>{let t=Math.floor(e/36e5),r=Math.floor(e%36e5/6e4),i=Math.floor(e%6e4/1e3);return t.toString().padStart(2,"0")+":"+r.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0")+"."+(e%1e3).toString().padStart(3,"0")};class rn{constructor(e){this.writer=e,this.helper=new Uint8Array(8),this.helperView=new DataView(this.helper.buffer),this.offsets=new WeakMap}writeU32(e){this.helperView.setUint32(0,e,!1),this.writer.write(this.helper.subarray(0,4))}writeU64(e){this.helperView.setUint32(0,Math.floor(e/0x100000000),!1),this.helperView.setUint32(4,e,!1),this.writer.write(this.helper.subarray(0,8))}writeAscii(e){for(let t=0;t<e.length;t++)this.helperView.setUint8(t%8,e.charCodeAt(t)),t%8==7&&this.writer.write(this.helper);e.length%8!=0&&this.writer.write(this.helper.subarray(0,e.length%8))}writeBox(e){if(this.offsets.set(e,this.writer.getPos()),e.contents&&!e.children)this.writeBoxHeader(e,e.size??e.contents.byteLength+8),this.writer.write(e.contents);else{let t=this.writer.getPos();if(this.writeBoxHeader(e,0),e.contents&&this.writer.write(e.contents),e.children)for(let t of e.children)t&&this.writeBox(t);let r=this.writer.getPos(),i=e.size??r-t;this.writer.seek(t),this.writeBoxHeader(e,i),this.writer.seek(r)}}writeBoxHeader(e,t){this.writeU32(e.largeSize?1:t),this.writeAscii(e.type),e.largeSize&&this.writeU64(t)}measureBoxHeader(e){return 8+8*!!e.largeSize}patchBox(e){let r=this.offsets.get(e);t(void 0!==r);let i=this.writer.getPos();this.writer.seek(r),this.writeBox(e),this.writer.seek(i)}measureBox(e){if(e.contents&&!e.children)return this.measureBoxHeader(e)+e.contents.byteLength;{let t=this.measureBoxHeader(e);if(e.contents&&(t+=e.contents.byteLength),e.children)for(let r of e.children)r&&(t+=this.measureBox(r));return t}}}let ro=new Uint8Array(8),rs=new DataView(ro.buffer),rl=e=>[(e%256+256)%256],ru=e=>(rs.setUint16(0,e,!1),[ro[0],ro[1]]),rc=e=>(rs.setInt16(0,e,!1),[ro[0],ro[1]]),rd=e=>(rs.setUint32(0,e,!1),[ro[1],ro[2],ro[3]]),rp=e=>(rs.setUint32(0,e,!1),[ro[0],ro[1],ro[2],ro[3]]),rf=e=>(rs.setInt32(0,e,!1),[ro[0],ro[1],ro[2],ro[3]]),rh=e=>(rs.setUint32(0,Math.floor(e/0x100000000),!1),rs.setUint32(4,e,!1),[ro[0],ro[1],ro[2],ro[3],ro[4],ro[5],ro[6],ro[7]]),rm=e=>(rs.setInt16(0,256*e,!1),[ro[0],ro[1]]),rg=e=>(rs.setInt32(0,65536*e,!1),[ro[0],ro[1],ro[2],ro[3]]),rv=e=>(rs.setInt32(0,0x40000000*e,!1),[ro[0],ro[1],ro[2],ro[3]]),ry=(e,t)=>{let r=[],i=e;do{let e=127&i;i>>=7,r.length>0&&(e|=128),r.push(e),void 0!==t&&t--}while(i>0||t)return r.reverse()},rb=(e,t=!1)=>{let r=Array(e.length).fill(null).map((t,r)=>e.charCodeAt(r));return t&&r.push(0),r},rx=e=>{let t=null;for(let r of e)(!t||r.timestamp>t.timestamp)&&(t=r);return t},rw=e=>{let t=Math.PI/180*e,r=Math.round(Math.cos(t)),i=Math.round(Math.sin(t));return[r,i,0,-i,r,0,0,0,1]},rS=rw(0),rk=e=>[rg(e[0]),rg(e[1]),rv(e[2]),rg(e[3]),rg(e[4]),rv(e[5]),rg(e[6]),rg(e[7]),rv(e[8])],rC=(e,t,r)=>({type:e,contents:t&&new Uint8Array(t.flat(10)),children:r}),rE=(e,t,r,i,a)=>rC(e,[rl(t),rd(r),i??[]],a),r_=e=>({type:"mdat",largeSize:e}),rT=e=>rC("moov",void 0,[rP(e.creationTime,e.trackDatas),...e.trackDatas.map(t=>rI(t,e.creationTime)),e.isFragmented?r7(e.trackDatas):null,ip(e)]),rP=(e,t)=>{let r=ij(Math.max(0,...t.filter(e=>e.samples.length>0).map(e=>{let t=rx(e.samples);return t.timestamp+t.duration})),iR),i=Math.max(0,...t.map(e=>e.track.id))+1,n=!a(e)||!a(r),o=n?rh:rp;return rE("mvhd",+n,0,[o(e),o(e),rp(iR),o(r),rg(1),rm(1),Array(10).fill(0),rk(rS),Array(24).fill(0),rp(i)])},rI=(e,t)=>{let r=iD(e);return rC("trak",void 0,[rA(e,t),rO(e,t),void 0!==r.name?rC("udta",void 0,[rC("name",[...d.encode(r.name)])]):null])},rA=(e,t)=>{let r,i=rx(e.samples),n=ij(i?i.timestamp+i.duration:0,iR),o=!a(t)||!a(n),s=o?rh:rp;r="video"===e.type?rw(e.track.metadata.rotation??0):rS;let l=2;return e.track.metadata.disposition?.default!==!1&&(l|=1),rE("tkhd",+o,l,[s(t),s(t),rp(e.track.id),rp(0),s(n),Array(8).fill(0),ru(0),ru(e.track.id),rm(+("audio"===e.type)),ru(0),rk(r),rg("video"===e.type?e.info.width:0),rg("video"===e.type?e.info.height:0)])},rO=(e,t)=>rC("mdia",void 0,[rM(e,t),rD(!0,rF[e.type],rR[e.type]),rj(e)]),rM=(e,t)=>{let r=rx(e.samples),i=ij(r?r.timestamp+r.duration:0,e.timescale),n=!a(t)||!a(i),o=n?rh:rp;return rE("mdhd",+n,0,[o(t),o(t),rp(e.timescale),o(i),ru(iT(e.track.metadata.languageCode??"und")),ru(0)])},rF={video:"vide",audio:"soun",subtitle:"text"},rR={video:"MediabunnyVideoHandler",audio:"MediabunnySoundHandler",subtitle:"MediabunnyTextHandler"},rD=(e,t,r,i="\0\0\0\0")=>rE("hdlr",0,0,[e?rb("mhlr"):rp(0),rb(t),rb(i),rp(0),rp(0),rb(r,!0)]),rj=e=>rC("minf",void 0,[rL[e.type](),rB(),rz(e)]),rL={video:()=>rE("vmhd",0,1,[ru(0),ru(0),ru(0),ru(0)]),audio:()=>rE("smhd",0,0,[ru(0),ru(0)]),subtitle:()=>rE("nmhd",0,0)},rB=()=>rC("dinf",void 0,[rN()]),rN=()=>rE("dref",0,0,[rp(1)],[r$()]),r$=()=>rE("url ",0,1),rz=e=>{let t=e.compositionTimeOffsetTable.length>1||e.compositionTimeOffsetTable.some(e=>0!==e.sampleCompositionTimeOffset);return rC("stbl",void 0,[rU(e),r1(e),t?r8(e):null,t?r5(e):null,r4(e),r3(e),r6(e),r2(e)])},rU=e=>{let r;if("video"===e.type)r=rV(iw(e.track.source._codec,e.info.decoderConfig.codec),e);else if("audio"===e.type){let i=ik(e.track.source._codec,e.muxer.isQuickTime);t(i),r=rq(i,e)}else"subtitle"===e.type&&(r=r0(iE[e.track.source._codec],e));return t(r),rE("stsd",0,0,[rp(1)],[r])},rV=(e,t)=>rC(e,[Array(6).fill(0),ru(1),ru(0),ru(0),Array(12).fill(0),ru(t.info.width),ru(t.info.height),rp(4718592),rp(4718592),rp(0),ru(1),Array(32).fill(0),ru(24),rc(65535)],[iS[t.track.source._codec](t),b(t.info.decoderConfig.colorSpace)?rH(t):null]),rH=e=>rC("colr",[rb("nclx"),ru(f[e.info.decoderConfig.colorSpace.primaries]),ru(m[e.info.decoderConfig.colorSpace.transfer]),ru(v[e.info.decoderConfig.colorSpace.matrix]),rl(!!e.info.decoderConfig.colorSpace.fullRange<<7)]),rW=e=>{if(!e.info.decoderConfig)return null;let t=e.info.decoderConfig,r=t.codec.split("."),i=Number(r[1]),a=Number(r[2]),n=Number(r[3]),o=r[4]?Number(r[4]):1,s=r[8]?Number(r[8]):Number(t.colorSpace?.fullRange??0),l=r[5]?Number(r[5]):t.colorSpace?.primaries?f[t.colorSpace.primaries]:2,u=r[6]?Number(r[6]):t.colorSpace?.transfer?m[t.colorSpace.transfer]:2,c=r[7]?Number(r[7]):t.colorSpace?.matrix?v[t.colorSpace.matrix]:2;return rE("vpcC",1,0,[rl(i),rl(a),rl((n<<4)+(o<<1)+s),rl(l),rl(u),rl(c),ru(0)])},rq=(e,t)=>{let r=0,i=16;if(H.includes(t.track.source._codec)){let{sampleSize:e}=ea(t.track.source._codec);(i=8*e)>16&&(r=1)}return rC(e,0===r?[Array(6).fill(0),ru(1),ru(r),ru(0),rp(0),ru(t.info.numberOfChannels),ru(i),ru(0),ru(0),ru(t.info.sampleRate<65536?t.info.sampleRate:0),ru(0)]:[Array(6).fill(0),ru(1),ru(r),ru(0),rp(0),ru(t.info.numberOfChannels),ru(Math.min(i,16)),ru(0),ru(0),ru(t.info.sampleRate<65536?t.info.sampleRate:0),ru(0),rp(1),rp(i/8),rp(t.info.numberOfChannels*i/8),rp(2)],[iC(t.track.source._codec,t.muxer.isQuickTime)?.(t)??null])},rG=e=>{let t;switch(e.track.source._codec){case"aac":t=64;break;case"mp3":t=107;break;case"vorbis":t=221;break;default:throw Error(`Unhandled audio codec: ${e.track.source._codec}`)}let r=[...rl(t),...rl(21),...rd(0),...rp(0),...rp(0)];if(e.info.decoderConfig.description){let t=l(e.info.decoderConfig.description);r=[...r,...rl(5),...ry(t.byteLength),...t]}return r=[...ru(1),...rl(0),...rl(4),...ry(r.length),...r,...rl(6),...rl(1),...rl(2)],rE("esds",0,0,r=[...rl(3),...ry(r.length),...r])},rZ=e=>rC("wave",void 0,[rK(e),rQ(e),rC("\0\0\0\0")]),rK=e=>rC("frma",[rb(ik(e.track.source._codec,e.muxer.isQuickTime))]),rQ=e=>{let{littleEndian:t}=ea(e.track.source._codec);return rC("enda",[ru(+t)])},rX=e=>{let r=e.info.numberOfChannels,i=3840,a=e.info.sampleRate,n=0,o=0,s=new Uint8Array(0),u=e.info.decoderConfig?.description;if(u){t(u.byteLength>=18);let e=e0(l(u));r=e.outputChannelCount,i=e.preSkip,a=e.inputSampleRate,n=e.outputGain,o=e.channelMappingFamily,e.channelMappingTable&&(s=e.channelMappingTable)}return rC("dOps",[rl(0),rl(r),ru(i),rp(a),rc(n),rl(o),...s])},rJ=e=>{let r=e.info.decoderConfig?.description;return t(r),rE("dfLa",0,0,[...l(r).subarray(4)])},rY=e=>{let{littleEndian:t,sampleSize:r}=ea(e.track.source._codec);return rE("pcmC",0,0,[rl(+t),rl(8*r)])},r0=(e,t)=>rC(e,[Array(6).fill(0),ru(1)],[i_[t.track.source._codec](t)]),r1=e=>rE("stts",0,0,[rp(e.timeToSampleTable.length),e.timeToSampleTable.map(e=>[rp(e.sampleCount),rp(e.sampleDelta)])]),r2=e=>{if(e.samples.every(e=>"key"===e.type))return null;let t=[...e.samples.entries()].filter(([,e])=>"key"===e.type);return rE("stss",0,0,[rp(t.length),t.map(([e])=>rp(e+1))])},r4=e=>rE("stsc",0,0,[rp(e.compactlyCodedChunkTable.length),e.compactlyCodedChunkTable.map(e=>[rp(e.firstChunk),rp(e.samplesPerChunk),rp(1)])]),r3=e=>{if("audio"===e.type&&e.info.requiresPcmTransformation){let{sampleSize:t}=ea(e.track.source._codec);return rE("stsz",0,0,[rp(t*e.info.numberOfChannels),rp(e.samples.reduce((t,r)=>t+ij(r.duration,e.timescale),0))])}return rE("stsz",0,0,[rp(0),rp(e.samples.length),e.samples.map(e=>rp(e.size))])},r6=e=>e.finalizedChunks.length>0&&i(e.finalizedChunks).offset>=0x100000000?rE("co64",0,0,[rp(e.finalizedChunks.length),e.finalizedChunks.map(e=>rh(e.offset))]):rE("stco",0,0,[rp(e.finalizedChunks.length),e.finalizedChunks.map(e=>rp(e.offset))]),r8=e=>rE("ctts",1,0,[rp(e.compositionTimeOffsetTable.length),e.compositionTimeOffsetTable.map(e=>[rp(e.sampleCount),rf(e.sampleCompositionTimeOffset)])]),r5=e=>{let r=1/0,i=-1/0,a=1/0,n=-1/0;t(e.compositionTimeOffsetTable.length>0),t(e.samples.length>0);for(let t=0;t<e.compositionTimeOffsetTable.length;t++){let a=e.compositionTimeOffsetTable[t];r=Math.min(r,a.sampleCompositionTimeOffset),i=Math.max(i,a.sampleCompositionTimeOffset)}for(let t=0;t<e.samples.length;t++){let r=e.samples[t];a=Math.min(a,ij(r.timestamp,e.timescale)),n=Math.max(n,ij(r.timestamp+r.duration,e.timescale))}let o=Math.max(-r,0);return n>=0x80000000?null:rE("cslg",0,0,[rf(o),rf(r),rf(i),rf(a),rf(n)])},r7=e=>rC("mvex",void 0,e.map(r9)),r9=e=>rE("trex",0,0,[rp(e.track.id),rp(1),rp(0),rp(0),rp(0)]),ie=(e,t)=>rC("moof",void 0,[it(e),...t.map(ii)]),it=e=>rE("mfhd",0,0,[rp(e)]),ir=e=>{let t=0,r=0,i="delta"===e.type;return r|=i,i?t|=1:t|=2,t<<24|r<<16},ii=e=>rC("traf",void 0,[ia(e),io(e),is(e)]),ia=e=>{t(e.currentChunk);let r=e.currentChunk.samples[1]??e.currentChunk.samples[0],i={duration:r.timescaleUnitsToNextSample,size:r.size,flags:ir(r)};return rE("tfhd",0,131128,[rp(e.track.id),rp(i.duration),rp(i.size),rp(i.flags)])},io=e=>(t(e.currentChunk),rE("tfdt",1,0,[rh(ij(e.currentChunk.startTimestamp,e.timescale))])),is=e=>{t(e.currentChunk);let r=e.currentChunk.samples.map(e=>e.timescaleUnitsToNextSample),i=e.currentChunk.samples.map(e=>e.size),a=e.currentChunk.samples.map(ir),n=e.currentChunk.samples.map(t=>ij(t.timestamp-t.decodeTimestamp,e.timescale)),o=new Set(r),s=new Set(i),l=new Set(a),u=new Set(n),c=2===l.size&&a[0]!==a[1],d=o.size>1,p=s.size>1,f=!c&&l.size>1,h=u.size>1||[...u].some(e=>0!==e);return rE("trun",1,1|4*c|256*d|512*p|1024*f|2048*h,[rp(e.currentChunk.samples.length),rp(e.currentChunk.offset-e.currentChunk.moofOffset||0),c?rp(a[0]):[],e.currentChunk.samples.map((e,t)=>[d?rp(r[t]):[],p?rp(i[t]):[],f?rp(a[t]):[],h?rf(n[t]):[]])])},il=(e,t)=>rE("tfra",1,0,[rp(e.track.id),rp(63),rp(e.finalizedChunks.length),e.finalizedChunks.map(r=>[rh(ij(r.samples[0].timestamp,e.timescale)),rh(r.moofOffset),rp(t+1),rp(1),rp(1)])]),iu=()=>rC("vtte"),ic=(e,t,r,i,a)=>rC("vttc",void 0,[null!==a?rC("vsid",[rf(a)]):null,null!==r?rC("iden",[...d.encode(r)]):null,null!==t?rC("ctim",[...d.encode(ra(t))]):null,null!==i?rC("sttg",[...d.encode(i)]):null,rC("payl",[...d.encode(e)])]),id=e=>rC("vtta",[...d.encode(e)]),ip=e=>{let t=[],r=e.format._options.metadataFormat??"auto",i=e.output._metadataTags;if("mdir"!==r&&("auto"!==r||e.isQuickTime))if("mdta"===r){let e=ib(i);e&&t.push(e)}else("udta"===r||"auto"===r&&e.isQuickTime)&&ih(t,e.output._metadataTags);else{let e=iy(i);e&&t.push(e)}return 0===t.length?null:rC("udta",void 0,t)},ih=(e,t)=>{for(let{key:r,value:i}of N(t))switch(r){case"title":e.push(im("nam",i));break;case"description":e.push(im("des",i));break;case"artist":e.push(im("ART",i));break;case"album":e.push(im("alb",i));break;case"albumArtist":e.push(im("albr",i));break;case"genre":e.push(im("gen",i));break;case"date":e.push(im("day",i.toISOString().slice(0,10)));break;case"comment":e.push(im("cmt",i));break;case"lyrics":e.push(im("lyr",i));break;case"raw":case"discNumber":case"discsTotal":case"trackNumber":case"tracksTotal":case"images":break;default:C(r)}if(t.raw)for(let r in t.raw){let i=t.raw[r];!(null==i||4!==r.length||e.some(e=>e.type===r))&&("string"==typeof i?e.push(im(r,i)):i instanceof Uint8Array&&e.push(rC(r,Array.from(i))))}},im=(e,t)=>{let r=d.encode(t);return rC(e,[ru(r.length),ru(iT("und")),Array.from(r)])},ig={"image/jpeg":13,"image/png":14,"image/bmp":27},iv=(e,t)=>{let r=[];for(let{key:i,value:a}of N(e))switch(i){case"title":r.push({key:t?"title":"nam",value:ix(a)});break;case"description":r.push({key:t?"description":"des",value:ix(a)});break;case"artist":r.push({key:t?"artist":"ART",value:ix(a)});break;case"album":r.push({key:t?"album":"alb",value:ix(a)});break;case"albumArtist":r.push({key:t?"album_artist":"aART",value:ix(a)});break;case"comment":r.push({key:t?"comment":"cmt",value:ix(a)});break;case"genre":r.push({key:t?"genre":"gen",value:ix(a)});break;case"lyrics":r.push({key:t?"lyrics":"lyr",value:ix(a)});break;case"date":r.push({key:t?"date":"day",value:ix(a.toISOString().slice(0,10))});break;case"images":for(let e of a)"coverFront"===e.kind&&r.push({key:"covr",value:rC("data",[rp(ig[e.mimeType]??0),rp(0),Array.from(e.data)])});break;case"trackNumber":if(t){let t=void 0!==e.tracksTotal?`${a}/${e.tracksTotal}`:a.toString();r.push({key:"track",value:ix(t)})}else r.push({key:"trkn",value:rC("data",[rp(0),rp(0),ru(0),ru(a),ru(e.tracksTotal??0),ru(0)])});break;case"discNumber":t||r.push({key:"disc",value:rC("data",[rp(0),rp(0),ru(0),ru(a),ru(e.discsTotal??0),ru(0)])});break;case"tracksTotal":case"discsTotal":case"raw":break;default:C(i)}if(e.raw)for(let i in e.raw){let a=e.raw[i];!(null==a||!t&&4!==i.length||r.some(e=>e.key===i))&&("string"==typeof a?r.push({key:i,value:ix(a)}):a instanceof Uint8Array?r.push({key:i,value:rC("data",[rp(0),rp(0),Array.from(a)])}):a instanceof tk&&r.push({key:i,value:rC("data",[rp(ig[a.mimeType]??0),rp(0),Array.from(a.data)])}))}return r},iy=e=>{let t=iv(e,!1);return 0===t.length?null:rE("meta",0,0,void 0,[rD(!1,"mdir","","appl"),rC("ilst",void 0,t.map(e=>rC(e.key,void 0,[e.value])))])},ib=e=>{let t=iv(e,!0);return 0===t.length?null:rC("meta",void 0,[rD(!1,"mdta",""),rE("keys",0,0,[rp(t.length)],t.map(e=>rC("mdta",[...d.encode(e.key)]))),rC("ilst",void 0,t.map((e,t)=>rC(String.fromCharCode(...rp(t+1)),void 0,[e.value])))])},ix=e=>rC("data",[rp(1),rp(0),...d.encode(e)]),iw=(e,t)=>{switch(e){case"avc":return t.startsWith("avc3")?"avc3":"avc1";case"hevc":return"hvc1";case"vp8":return"vp08";case"vp9":return"vp09";case"av1":return"av01"}},iS={avc:e=>e.info.decoderConfig&&rC("avcC",[...l(e.info.decoderConfig.description)]),hevc:e=>e.info.decoderConfig&&rC("hvcC",[...l(e.info.decoderConfig.description)]),vp8:rW,vp9:rW,av1:e=>rC("av1C",J(e.info.decoderConfig.codec))},ik=(e,t)=>{switch(e){case"aac":case"mp3":case"vorbis":return"mp4a";case"opus":return"Opus";case"flac":return"fLaC";case"ulaw":return"ulaw";case"alaw":return"alaw";case"pcm-u8":return"raw ";case"pcm-s8":return"sowt"}if(t)switch(e){case"pcm-s16":return"sowt";case"pcm-s16be":return"twos";case"pcm-s24":case"pcm-s24be":return"in24";case"pcm-s32":case"pcm-s32be":return"in32";case"pcm-f32":case"pcm-f32be":return"fl32";case"pcm-f64":case"pcm-f64be":return"fl64"}else switch(e){case"pcm-s16":case"pcm-s16be":case"pcm-s24":case"pcm-s24be":case"pcm-s32":case"pcm-s32be":return"ipcm";case"pcm-f32":case"pcm-f32be":case"pcm-f64":case"pcm-f64be":return"fpcm"}},iC=(e,t)=>{switch(e){case"aac":case"mp3":case"vorbis":return rG;case"opus":return rX;case"flac":return rJ}if(t)switch(e){case"pcm-s24":case"pcm-s24be":case"pcm-s32":case"pcm-s32be":case"pcm-f32":case"pcm-f32be":case"pcm-f64":case"pcm-f64be":return rZ}else switch(e){case"pcm-s16":case"pcm-s16be":case"pcm-s24":case"pcm-s24be":case"pcm-s32":case"pcm-s32be":case"pcm-f32":case"pcm-f32be":case"pcm-f64":case"pcm-f64be":return rY}return null},iE={webvtt:"wvtt"},i_={webvtt:e=>rC("vttC",[...d.encode(e.info.config.description)])},iT=e=>{t(3===e.length);let r=0;for(let t=0;t<3;t++)r<<=5,r+=e.charCodeAt(t)-96;return r};class iP{constructor(){this.ensureMonotonicity=!1,this.trackedWrites=null,this.trackedStart=-1,this.trackedEnd=-1}start(){}maybeTrackWrites(e){if(!this.trackedWrites)return;let t=this.getPos();if(t<this.trackedStart){if(t+e.byteLength<=this.trackedStart)return;e=e.subarray(this.trackedStart-t),t=0}let r=t+e.byteLength-this.trackedStart,i=this.trackedWrites.byteLength;for(;i<r;)i*=2;if(i!==this.trackedWrites.byteLength){let e=new Uint8Array(i);e.set(this.trackedWrites,0),this.trackedWrites=e}this.trackedWrites.set(e,t-this.trackedStart),this.trackedEnd=Math.max(this.trackedEnd,t+e.byteLength)}startTrackingWrites(){this.trackedWrites=new Uint8Array(1024),this.trackedStart=this.getPos(),this.trackedEnd=this.trackedStart}stopTrackingWrites(){if(!this.trackedWrites)throw Error("Internal error: Can't get tracked writes since nothing was tracked.");let e={data:this.trackedWrites.subarray(0,this.trackedEnd-this.trackedStart),start:this.trackedStart,end:this.trackedEnd};return this.trackedWrites=null,e}}class iI extends iP{constructor(e){if(super(),this.pos=0,this.maxPos=0,this.target=e,this.supportsResize="resize"in new ArrayBuffer(0),this.supportsResize)try{this.buffer=new ArrayBuffer(65536,{maxByteLength:0x100000000})}catch{this.buffer=new ArrayBuffer(65536),this.supportsResize=!1}else this.buffer=new ArrayBuffer(65536);this.bytes=new Uint8Array(this.buffer)}ensureSize(e){let t=this.buffer.byteLength;for(;t<e;)t*=2;if(t!==this.buffer.byteLength){if(t>0x100000000)throw Error("ArrayBuffer exceeded maximum size of 4294967296 bytes. Please consider using another target.");if(this.supportsResize)this.buffer.resize(t);else{let e=new ArrayBuffer(t),r=new Uint8Array(e);r.set(this.bytes,0),this.buffer=e,this.bytes=r}}}write(e){this.maybeTrackWrites(e),this.ensureSize(this.pos+e.byteLength),this.bytes.set(e,this.pos),this.target.onwrite?.(this.pos,this.pos+e.byteLength),this.pos+=e.byteLength,this.maxPos=Math.max(this.maxPos,this.pos)}seek(e){this.pos=e}getPos(){return this.pos}async flush(){}async finalize(){this.ensureSize(this.pos),this.target.buffer=this.buffer.slice(0,Math.max(this.maxPos,this.pos))}async close(){}getSlice(e,t){return this.bytes.slice(e,t)}}class iA extends iP{constructor(e){super(),this.pos=0,this.sections=[],this.lastWriteEnd=0,this.lastFlushEnd=0,this.writer=null,this.chunks=[],this.target=e,this.chunked=e._options.chunked??!1,this.chunkSize=e._options.chunkSize??0x1000000}start(){this.writer=this.target._writable.getWriter()}write(e){if(this.pos>this.lastWriteEnd){let e=this.pos-this.lastWriteEnd;this.pos=this.lastWriteEnd,this.write(new Uint8Array(e))}this.maybeTrackWrites(e),this.sections.push({data:e.slice(),start:this.pos}),this.target.onwrite?.(this.pos,this.pos+e.byteLength),this.pos+=e.byteLength,this.lastWriteEnd=Math.max(this.lastWriteEnd,this.pos)}seek(e){this.pos=e}getPos(){return this.pos}async flush(){if(this.pos>this.lastWriteEnd){let e=this.pos-this.lastWriteEnd;this.pos=this.lastWriteEnd,this.write(new Uint8Array(e))}if(t(this.writer),0===this.sections.length)return;let e=[],r=[...this.sections].sort((e,t)=>e.start-t.start);e.push({start:r[0].start,size:r[0].data.byteLength});for(let t=1;t<r.length;t++){let i=e[e.length-1],a=r[t];a.start<=i.start+i.size?i.size=Math.max(i.size,a.start+a.data.byteLength-i.start):e.push({start:a.start,size:a.data.byteLength})}for(let t of e){for(let e of(t.data=new Uint8Array(t.size),this.sections))t.start<=e.start&&e.start<t.start+t.size&&t.data.set(e.data,e.start-t.start);if(null!==this.writer.desiredSize&&this.writer.desiredSize<=0&&await this.writer.ready,this.chunked)this.writeDataIntoChunks(t.data,t.start),this.tryToFlushChunks();else{if(this.ensureMonotonicity&&t.start!==this.lastFlushEnd)throw Error("Internal error: Monotonicity violation.");this.writer.write({type:"write",data:t.data,position:t.start}),this.lastFlushEnd=t.start+t.data.byteLength}}this.sections.length=0}writeDataIntoChunks(e,t){let r=this.chunks.findIndex(e=>e.start<=t&&t<e.start+this.chunkSize);-1===r&&(r=this.createChunk(t));let i=this.chunks[r],a=t-i.start,n=e.subarray(0,Math.min(this.chunkSize-a,e.byteLength));i.data.set(n,a);let o={start:a,end:a+n.byteLength};if(this.insertSectionIntoChunk(i,o),0===i.written[0].start&&i.written[0].end===this.chunkSize&&(i.shouldFlush=!0),this.chunks.length>2){for(let e=0;e<this.chunks.length-1;e++)this.chunks[e].shouldFlush=!0;this.tryToFlushChunks()}n.byteLength<e.byteLength&&this.writeDataIntoChunks(e.subarray(n.byteLength),t+n.byteLength)}insertSectionIntoChunk(e,t){let r=0,i=e.written.length-1,a=-1;for(;r<=i;){let n=Math.floor(r+(i-r+1)/2);e.written[n].start<=t.start?(r=n+1,a=n):i=n-1}for(e.written.splice(a+1,0,t),(-1===a||e.written[a].end<t.start)&&a++;a<e.written.length-1&&e.written[a].end>=e.written[a+1].start;)e.written[a].end=Math.max(e.written[a].end,e.written[a+1].end),e.written.splice(a+1,1)}createChunk(e){let t={start:Math.floor(e/this.chunkSize)*this.chunkSize,data:new Uint8Array(this.chunkSize),written:[],shouldFlush:!1};return this.chunks.push(t),this.chunks.sort((e,t)=>e.start-t.start),this.chunks.indexOf(t)}tryToFlushChunks(e=!1){t(this.writer);for(let t=0;t<this.chunks.length;t++){let r=this.chunks[t];if(r.shouldFlush||e){for(let e of r.written){let t=r.start+e.start;if(this.ensureMonotonicity&&t!==this.lastFlushEnd)throw Error("Internal error: Monotonicity violation.");this.writer.write({type:"write",data:r.data.subarray(e.start,e.end),position:t}),this.lastFlushEnd=r.start+e.end}this.chunks.splice(t--,1)}}}finalize(){return this.chunked&&this.tryToFlushChunks(!0),t(this.writer),this.writer.close()}async close(){return this.writer?.close()}}class iO{constructor(){this._output=null,this.onwrite=null}}class iM extends iO{constructor(){super(...arguments),this.buffer=null}_createWriter(){return new iI(this)}}class iF extends iO{constructor(e,t={}){if(super(),!(e instanceof WritableStream))throw TypeError("StreamTarget requires a WritableStream instance.");if(null!=t&&"object"!=typeof t)throw TypeError("StreamTarget options, when provided, must be an object.");if(void 0!==t.chunked&&"boolean"!=typeof t.chunked)throw TypeError("options.chunked, when provided, must be a boolean.");if(void 0!==t.chunkSize&&(!Number.isInteger(t.chunkSize)||t.chunkSize<1024))throw TypeError("options.chunkSize, when provided, must be an integer and not smaller than 1024.");this._writable=e,this._options=t}_createWriter(){return new iA(this)}}let iR=1e3,iD=e=>{let t={},r=e.track;return void 0!==r.metadata.name&&(t.name=r.metadata.name),t},ij=(e,t,r=!0)=>{let i=e*t;return r?Math.round(i):i};class iL extends eF{constructor(e,t){super(e),this.auxTarget=new iM,this.auxWriter=this.auxTarget._createWriter(),this.auxBoxWriter=new rn(this.auxWriter),this.mdat=null,this.ftypSize=null,this.trackDatas=[],this.allTracksKnown=k(),this.creationTime=Math.floor(Date.now()/1e3)+0x7c25b080,this.finalizedChunks=[],this.nextFragmentNumber=1,this.maxWrittenTimestamp=-1/0,this.format=t,this.writer=e._writer,this.boxWriter=new rn(this.writer),this.isQuickTime=t instanceof iq;const r=this.writer instanceof iI&&"in-memory";this.fastStart=t._options.fastStart??r,this.isFragmented="fragmented"===this.fastStart,("in-memory"===this.fastStart||this.isFragmented)&&(this.writer.ensureMonotonicity=!0),this.minimumFragmentDuration=t._options.minimumFragmentDuration??1}async start(){var e;let t=await this.mutex.acquire(),r=this.output._tracks.some(e=>"video"===e.type&&"avc"===e.source._codec);if(this.format._options.onFtyp&&this.writer.startTrackingWrites(),this.boxWriter.writeBox((e={isQuickTime:this.isQuickTime,holdsAvc:r,fragmented:this.isFragmented}).isQuickTime?rC("ftyp",[rb("qt  "),rp(512),rb("qt  ")]):e.fragmented?rC("ftyp",[rb("iso5"),rp(512),rb("iso5"),rb("iso6"),rb("mp41")]):rC("ftyp",[rb("isom"),rp(512),rb("isom"),e.holdsAvc?rb("avc1"):[],rb("mp41")])),this.format._options.onFtyp){let{data:e,start:t}=this.writer.stopTrackingWrites();this.format._options.onFtyp(e,t)}if(this.ftypSize=this.writer.getPos(),"in-memory"===this.fastStart);else if("reserve"===this.fastStart){for(let e of this.output._tracks)if(void 0===e.metadata.maximumPacketCount)throw Error("All tracks must specify maximumPacketCount in their metadata when using fastStart: 'reserve'.")}else this.isFragmented||(this.format._options.onMdat&&this.writer.startTrackingWrites(),this.mdat=r_(!0),this.boxWriter.writeBox(this.mdat));await this.writer.flush(),t()}allTracksAreKnown(){for(let e of this.output._tracks)if(!e.source._closed&&!this.trackDatas.some(t=>t.track===e))return!1;return!0}async getMimeType(){await this.allTracksKnown.promise;let e=this.trackDatas.map(e=>"video"===e.type||"audio"===e.type?e.info.decoderConfig.codec:({webvtt:"wvtt"})[e.track.source._codec]);return tS({isQuickTime:this.isQuickTime,hasVideo:this.trackDatas.some(e=>"video"===e.type),hasAudio:this.trackDatas.some(e=>"audio"===e.type),codecStrings:e})}getVideoTrackData(e,r,i){let a=this.trackDatas.find(t=>t.track===e);if(a)return a;ed(i),t(i),t(i.decoderConfig);let n={...i.decoderConfig};t(void 0!==n.codedWidth),t(void 0!==n.codedHeight);let o=!1;if("avc"!==e.source._codec||n.description){if("hevc"===e.source._codec&&!n.description){let e=eW(r.data);if(!e)throw Error("Couldn't extract an HEVCDecoderConfigurationRecord from the HEVC packet. Make sure the packets are in Annex B format (as specified in ITU-T-REC-H.265) when not providing a description, or provide a description (must be an HEVCDecoderConfigurationRecord as specified in ISO 14496-15) and ensure the packets are in HEVC format.");n.description=(e=>{let t=[];for(let r of(t.push(e.configurationVersion),t.push((3&e.generalProfileSpace)<<6|(1&e.generalTierFlag)<<5|31&e.generalProfileIdc),t.push(e.generalProfileCompatibilityFlags>>>24&255),t.push(e.generalProfileCompatibilityFlags>>>16&255),t.push(e.generalProfileCompatibilityFlags>>>8&255),t.push(255&e.generalProfileCompatibilityFlags),t.push(...e.generalConstraintIndicatorFlags),t.push(255&e.generalLevelIdc),t.push(240|e.minSpatialSegmentationIdc>>8&15),t.push(255&e.minSpatialSegmentationIdc),t.push(252|3&e.parallelismType),t.push(252|3&e.chromaFormatIdc),t.push(248|7&e.bitDepthLumaMinus8),t.push(248|7&e.bitDepthChromaMinus8),t.push(e.avgFrameRate>>8&255),t.push(255&e.avgFrameRate),t.push((3&e.constantFrameRate)<<6|(7&e.numTemporalLayers)<<3|(1&e.temporalIdNested)<<2|3&e.lengthSizeMinusOne),t.push(255&e.arrays.length),e.arrays))for(let e of(t.push((1&r.arrayCompleteness)<<7|63&r.nalUnitType),t.push(r.nalUnits.length>>8&255),t.push(255&r.nalUnits.length),r.nalUnits)){t.push(e.length>>8&255),t.push(255&e.length);for(let r=0;r<e.length;r++)t.push(e[r])}return new Uint8Array(t)})(e),o=!0}}else{let e=eN(r.data);if(!e)throw Error("Couldn't extract an AVCDecoderConfigurationRecord from the AVC packet. Make sure the packets are in Annex B format (as specified in ITU-T-REC-H.264) when not providing a description, or provide a description (must be an AVCDecoderConfigurationRecord as specified in ISO 14496-15) and ensure the packets are in AVCC format.");n.description=(e=>{let r=[];for(let t of(r.push(e.configurationVersion),r.push(e.avcProfileIndication),r.push(e.profileCompatibility),r.push(e.avcLevelIndication),r.push(252|3&e.lengthSizeMinusOne),r.push(224|31&e.sequenceParameterSets.length),e.sequenceParameterSets)){let e=t.byteLength;r.push(e>>8),r.push(255&e);for(let i=0;i<e;i++)r.push(t[i])}for(let t of(r.push(e.pictureParameterSets.length),e.pictureParameterSets)){let e=t.byteLength;r.push(e>>8),r.push(255&e);for(let i=0;i<e;i++)r.push(t[i])}if(100===e.avcProfileIndication||110===e.avcProfileIndication||122===e.avcProfileIndication||144===e.avcProfileIndication)for(let i of(t(null!==e.chromaFormat),t(null!==e.bitDepthLumaMinus8),t(null!==e.bitDepthChromaMinus8),t(null!==e.sequenceParameterSetExt),r.push(252|3&e.chromaFormat),r.push(248|7&e.bitDepthLumaMinus8),r.push(248|7&e.bitDepthChromaMinus8),r.push(e.sequenceParameterSetExt.length),e.sequenceParameterSetExt)){let e=i.byteLength;r.push(e>>8),r.push(255&e);for(let t=0;t<e;t++)r.push(i[t])}return new Uint8Array(r)})(e),o=!0}let s=((e,t)=>{let r=e<0?-1:1,i=0,a=1,n=1,o=0,s=e=Math.abs(e);for(;;){let e=Math.floor(s),r=e*n+i,l=e*o+a;if(l>t||(i=n,a=o,n=r,o=l,!isFinite(s=1/(s-e))))break}return{numerator:r*n,denominator:o}})(1/(e.metadata.frameRate??57600),1e6).denominator,l={muxer:this,track:e,type:"video",info:{width:n.codedWidth,height:n.codedHeight,decoderConfig:n,requiresAnnexBTransformation:o},timescale:s,samples:[],sampleQueue:[],timestampProcessingQueue:[],timeToSampleTable:[],compositionTimeOffsetTable:[],lastTimescaleUnits:null,lastSample:null,finalizedChunks:[],currentChunk:null,compactlyCodedChunkTable:[]};return this.trackDatas.push(l),this.trackDatas.sort((e,t)=>e.track.id-t.track.id),this.allTracksAreKnown()&&this.allTracksKnown.resolve(),l}getAudioTrackData(e,r,i){let a=this.trackDatas.find(t=>t.track===e);if(a)return a;ef(i),t(i),t(i.decoderConfig);let n={...i.decoderConfig},o=!1;if("aac"===e.source._codec&&!n.description){let e=t$(t9.tempFromBytes(r.data));if(!e)throw Error("Couldn't parse ADTS header from the AAC packet. Make sure the packets are in ADTS format (as specified in ISO 13818-7) when not providing a description, or provide a description (must be an AudioSpecificConfig as specified in ISO 14496-3) and ensure the packets are raw AAC data.");let t=Y[e.samplingFrequencyIndex],i=ee[e.channelConfiguration];if(void 0===t||void 0===i)throw Error("Invalid ADTS frame header.");n.description=er({objectType:e.objectType,sampleRate:t,numberOfChannels:i}),o=!0}let s={muxer:this,track:e,type:"audio",info:{numberOfChannels:i.decoderConfig.numberOfChannels,sampleRate:i.decoderConfig.sampleRate,decoderConfig:n,requiresPcmTransformation:!this.isFragmented&&H.includes(e.source._codec),requiresAdtsStripping:o},timescale:i.decoderConfig.sampleRate,samples:[],sampleQueue:[],timestampProcessingQueue:[],timeToSampleTable:[],compositionTimeOffsetTable:[],lastTimescaleUnits:null,lastSample:null,finalizedChunks:[],currentChunk:null,compactlyCodedChunkTable:[]};return this.trackDatas.push(s),this.trackDatas.sort((e,t)=>e.track.id-t.track.id),this.allTracksAreKnown()&&this.allTracksKnown.resolve(),s}getSubtitleTrackData(e,r){let i=this.trackDatas.find(t=>t.track===e);if(i)return i;eh(r),t(r),t(r.config);let a={muxer:this,track:e,type:"subtitle",info:{config:r.config},timescale:1e3,samples:[],sampleQueue:[],timestampProcessingQueue:[],timeToSampleTable:[],compositionTimeOffsetTable:[],lastTimescaleUnits:null,lastSample:null,finalizedChunks:[],currentChunk:null,compactlyCodedChunkTable:[],lastCueEndTimestamp:0,cueQueue:[],nextSourceId:0,cueToSourceId:new WeakMap};return this.trackDatas.push(a),this.trackDatas.sort((e,t)=>e.track.id-t.track.id),this.allTracksAreKnown()&&this.allTracksKnown.resolve(),a}async addEncodedVideoPacket(e,t,r){let i=await this.mutex.acquire();try{let i=this.getVideoTrackData(e,t,r),a=t.data;if(i.info.requiresAnnexBTransformation){let e=[...eR(a)].map(e=>a.subarray(e.offset,e.offset+e.length));if(0===e.length)throw Error("Failed to transform packet data. Make sure all packets are provided in Annex B format, as specified in ITU-T-REC-H.264 and ITU-T-REC-H.265.");a=((e,t)=>{let r=new Uint8Array(e.reduce((e,r)=>e+t+r.byteLength,0)),i=0;for(let a of e){let e=new DataView(r.buffer,r.byteOffset,r.byteLength);switch(t){case 1:e.setUint8(i,a.byteLength);break;case 2:e.setUint16(i,a.byteLength,!1);break;case 3:_(e,i,a.byteLength,!1);break;case 4:e.setUint32(i,a.byteLength,!1)}i+=t,r.set(a,i),i+=a.byteLength}return r})(e,4)}let n=this.validateAndNormalizeTimestamp(i.track,t.timestamp,"key"===t.type),o=this.createSampleForTrack(i,a,n,t.duration,t.type);await this.registerSample(i,o)}finally{i()}}async addEncodedAudioPacket(e,t,r){let i=await this.mutex.acquire();try{let i=this.getAudioTrackData(e,t,r),a=t.data;if(i.info.requiresAdtsStripping){let e=t$(t9.tempFromBytes(a));if(!e)throw Error("Expected ADTS frame, didn't get one.");let t=null===e.crcCheck?7:9;a=a.subarray(t)}let n=this.validateAndNormalizeTimestamp(i.track,t.timestamp,"key"===t.type),o=this.createSampleForTrack(i,a,n,t.duration,t.type);i.info.requiresPcmTransformation&&await this.maybePadWithSilence(i,n),await this.registerSample(i,o)}finally{i()}}async maybePadWithSilence(e,t){let r=i(e.samples),a=r?r.timestamp+r.duration:0,n=t-a,o=ij(n,e.timescale);if(o>0){let{sampleSize:t,silentValue:r}=ea(e.info.decoderConfig.codec),i=new Uint8Array(t*(o*e.info.numberOfChannels)).fill(r),s=this.createSampleForTrack(e,new Uint8Array(i.buffer),a,n,"key");await this.registerSample(e,s)}}async addSubtitleCue(e,t,r){let i=await this.mutex.acquire();try{let i=this.getSubtitleTrackData(e,r);this.validateAndNormalizeTimestamp(i.track,t.timestamp,!0),"webvtt"===e.source._codec&&(i.cueQueue.push(t),await this.processWebVTTCues(i,t.timestamp))}finally{i()}}async processWebVTTCues(e,r){for(;e.cueQueue.length>0;){let i=new Set([]);for(let a of e.cueQueue)t(a.timestamp<=r),t(e.lastCueEndTimestamp<=a.timestamp+a.duration),i.add(Math.max(a.timestamp,e.lastCueEndTimestamp)),i.add(a.timestamp+a.duration);let a=[...i].sort((e,t)=>e-t),n=a[0],o=a[1]??n;if(r<o)break;if(e.lastCueEndTimestamp<n){this.auxWriter.seek(0);let t=iu();this.auxBoxWriter.writeBox(t);let r=this.auxWriter.getSlice(0,this.auxWriter.getPos()),i=this.createSampleForTrack(e,r,e.lastCueEndTimestamp,n-e.lastCueEndTimestamp,"key");await this.registerSample(e,i),e.lastCueEndTimestamp=n}this.auxWriter.seek(0);for(let t=0;t<e.cueQueue.length;t++){let r=e.cueQueue[t];if(r.timestamp>=o)break;rr.lastIndex=0;let i=rr.test(r.text),a=r.timestamp+r.duration,s=e.cueToSourceId.get(r);if(void 0===s&&o<a&&(s=e.nextSourceId++,e.cueToSourceId.set(r,s)),r.notes){let e=id(r.notes);this.auxBoxWriter.writeBox(e)}let l=ic(r.text,i?n:null,r.identifier??null,r.settings??null,s??null);this.auxBoxWriter.writeBox(l),a===o&&e.cueQueue.splice(t--,1)}let s=this.auxWriter.getSlice(0,this.auxWriter.getPos()),l=this.createSampleForTrack(e,s,n,o-n,"key");await this.registerSample(e,l),e.lastCueEndTimestamp=o}}createSampleForTrack(e,t,r,i,a){return{timestamp:r,decodeTimestamp:r,duration:i,data:t,size:t.byteLength,type:a,timescaleUnitsToNextSample:ij(i,e.timescale)}}processTimestamps(e,r){if(0===e.timestampProcessingQueue.length)return;if("audio"===e.type&&e.info.requiresPcmTransformation){let t=0;for(let r=0;r<e.timestampProcessingQueue.length;r++)t+=ij(e.timestampProcessingQueue[r].duration,e.timescale);if(0===e.timeToSampleTable.length)e.timeToSampleTable.push({sampleCount:t,sampleDelta:1});else{let r=i(e.timeToSampleTable);r.sampleCount+=t}e.timestampProcessingQueue.length=0;return}let a=e.timestampProcessingQueue.map(e=>e.timestamp).sort((e,t)=>e-t);for(let r=0;r<e.timestampProcessingQueue.length;r++){let n=e.timestampProcessingQueue[r];n.decodeTimestamp=a[r],this.isFragmented||null!==e.lastTimescaleUnits||(n.decodeTimestamp=0);let o=ij(n.timestamp-n.decodeTimestamp,e.timescale),s=ij(n.duration,e.timescale);if(null!==e.lastTimescaleUnits){t(e.lastSample);let r=Math.round(ij(n.decodeTimestamp,e.timescale,!1)-e.lastTimescaleUnits);if(t(r>=0),e.lastTimescaleUnits+=r,e.lastSample.timescaleUnitsToNextSample=r,!this.isFragmented){let a=i(e.timeToSampleTable);if(t(a),1===a.sampleCount){a.sampleDelta=r;let t=e.timeToSampleTable[e.timeToSampleTable.length-2];t&&t.sampleDelta===r&&(t.sampleCount++,e.timeToSampleTable.pop(),a=t)}else a.sampleDelta!==r&&(a.sampleCount--,e.timeToSampleTable.push(a={sampleCount:1,sampleDelta:r}));a.sampleDelta===s?a.sampleCount++:e.timeToSampleTable.push({sampleCount:1,sampleDelta:s});let n=i(e.compositionTimeOffsetTable);t(n),n.sampleCompositionTimeOffset===o?n.sampleCount++:e.compositionTimeOffsetTable.push({sampleCount:1,sampleCompositionTimeOffset:o})}}else e.lastTimescaleUnits=ij(n.decodeTimestamp,e.timescale,!1),this.isFragmented||(e.timeToSampleTable.push({sampleCount:1,sampleDelta:s}),e.compositionTimeOffsetTable.push({sampleCount:1,sampleCompositionTimeOffset:o}));e.lastSample=n}if(e.timestampProcessingQueue.length=0,t(e.lastSample),t(null!==e.lastTimescaleUnits),void 0!==r&&0===e.lastSample.timescaleUnitsToNextSample){t("key"===r.type);let i=Math.round(ij(r.timestamp,e.timescale,!1)-e.lastTimescaleUnits);e.lastSample.timescaleUnitsToNextSample=i}}async registerSample(e,t){"key"===t.type&&this.processTimestamps(e,t),e.timestampProcessingQueue.push(t),this.isFragmented?(e.sampleQueue.push(t),await this.interleaveSamples()):"reserve"===this.fastStart?await this.registerSampleFastStartReserve(e,t):await this.addSampleToTrack(e,t)}async addSampleToTrack(e,r){if(!this.isFragmented&&(e.samples.push(r),"reserve"===this.fastStart)){let r=e.track.metadata.maximumPacketCount;if(t(void 0!==r),e.samples.length>r)throw Error(`Track #${e.track.id} has already reached the maximum packet count (${r}). Either add less packets or increase the maximum packet count.`)}let i=!1;if(e.currentChunk){e.currentChunk.startTimestamp=Math.min(e.currentChunk.startTimestamp,r.timestamp);let t=r.timestamp-e.currentChunk.startTimestamp;if(this.isFragmented){let a=this.trackDatas.every(t=>{if(e===t)return"key"===r.type;let i=t.sampleQueue[0];return i?"key"===i.type:t.track.source._closed});t>=this.minimumFragmentDuration&&a&&r.timestamp>this.maxWrittenTimestamp&&(i=!0,await this.finalizeFragment())}else i=t>=.5}else i=!0;i&&(e.currentChunk&&await this.finalizeCurrentChunk(e),e.currentChunk={startTimestamp:r.timestamp,samples:[],offset:null,moofOffset:null}),t(e.currentChunk),e.currentChunk.samples.push(r),this.isFragmented&&(this.maxWrittenTimestamp=Math.max(this.maxWrittenTimestamp,r.timestamp))}async finalizeCurrentChunk(e){if(t(!this.isFragmented),!e.currentChunk)return;e.finalizedChunks.push(e.currentChunk),this.finalizedChunks.push(e.currentChunk);let r=e.currentChunk.samples.length;if("audio"===e.type&&e.info.requiresPcmTransformation&&(r=e.currentChunk.samples.reduce((t,r)=>t+ij(r.duration,e.timescale),0)),(0===e.compactlyCodedChunkTable.length||i(e.compactlyCodedChunkTable).samplesPerChunk!==r)&&e.compactlyCodedChunkTable.push({firstChunk:e.finalizedChunks.length,samplesPerChunk:r}),"in-memory"===this.fastStart){e.currentChunk.offset=0;return}for(let r of(e.currentChunk.offset=this.writer.getPos(),e.currentChunk.samples))t(r.data),this.writer.write(r.data),r.data=null;await this.writer.flush()}async interleaveSamples(e=!1){if(t(this.isFragmented),e||this.allTracksAreKnown())i:for(;;){let t=null,r=1/0;for(let i of this.trackDatas){if(!e&&0===i.sampleQueue.length&&!i.track.source._closed)break i;i.sampleQueue.length>0&&i.sampleQueue[0].timestamp<r&&(t=i,r=i.sampleQueue[0].timestamp)}if(!t)break;let i=t.sampleQueue.shift();await this.addSampleToTrack(t,i)}}async finalizeFragment(e=!0){t(this.isFragmented);let r=this.nextFragmentNumber++;if(1===r){this.format._options.onMoov&&this.writer.startTrackingWrites();let e=rT(this);if(this.boxWriter.writeBox(e),this.format._options.onMoov){let{data:e,start:t}=this.writer.stopTrackingWrites();this.format._options.onMoov(e,t)}}let i=this.trackDatas.filter(e=>e.currentChunk),a=ie(r,i),n=this.writer.getPos(),o=n+this.boxWriter.measureBox(a),s=o+8,l=1/0;for(let e of i){for(let t of(e.currentChunk.offset=s,e.currentChunk.moofOffset=n,e.currentChunk.samples))s+=t.size;l=Math.min(l,e.currentChunk.startTimestamp)}let u=s-o,c=u>=0x100000000;if(c)for(let e of i)e.currentChunk.offset+=8;this.format._options.onMoof&&this.writer.startTrackingWrites();let d=ie(r,i);if(this.boxWriter.writeBox(d),this.format._options.onMoof){let{data:e,start:t}=this.writer.stopTrackingWrites();this.format._options.onMoof(e,t,l)}t(this.writer.getPos()===o),this.format._options.onMdat&&this.writer.startTrackingWrites();let p=r_(c);for(let e of(p.size=u,this.boxWriter.writeBox(p),this.writer.seek(o+(c?16:8)),i))for(let t of e.currentChunk.samples)this.writer.write(t.data),t.data=null;if(this.format._options.onMdat){let{data:e,start:t}=this.writer.stopTrackingWrites();this.format._options.onMdat(e,t)}for(let e of i)e.finalizedChunks.push(e.currentChunk),this.finalizedChunks.push(e.currentChunk),e.currentChunk=null;e&&await this.writer.flush()}async registerSampleFastStartReserve(e,r){if(this.allTracksAreKnown()){if(!this.mdat){let e=rT(this),r=this.boxWriter.measureBox(e)+this.computeSampleTableSizeUpperBound()+4096;for(let e of(t(null!==this.ftypSize),this.writer.seek(this.ftypSize+r),this.format._options.onMdat&&this.writer.startTrackingWrites(),this.mdat=r_(!0),this.boxWriter.writeBox(this.mdat),this.trackDatas)){for(let t of e.sampleQueue)await this.addSampleToTrack(e,t);e.sampleQueue.length=0}}await this.addSampleToTrack(e,r)}else e.sampleQueue.push(r)}computeSampleTableSizeUpperBound(){t("reserve"===this.fastStart);let e=0;for(let r of this.trackDatas){let i=r.track.metadata.maximumPacketCount;t(void 0!==i),e+=8*Math.ceil(2/3*i)+4*i+8*Math.ceil(2/3*i)+12*Math.ceil(2/3*i)+4*i+8*i}return e}async onTrackClose(e){let t=await this.mutex.acquire();if("subtitle"===e.type&&"webvtt"===e.source._codec){let t=this.trackDatas.find(t=>t.track===e);t&&await this.processWebVTTCues(t,1/0)}this.allTracksAreKnown()&&this.allTracksKnown.resolve(),this.isFragmented&&await this.interleaveSamples(),t()}async finalize(){let e=await this.mutex.acquire();for(let e of(this.allTracksKnown.resolve(),this.trackDatas))"subtitle"===e.type&&"webvtt"===e.track.source._codec&&await this.processWebVTTCues(e,1/0);if(this.isFragmented){for(let e of(await this.interleaveSamples(!0),this.trackDatas))this.processTimestamps(e);await this.finalizeFragment(!1)}else for(let e of this.trackDatas)this.processTimestamps(e),await this.finalizeCurrentChunk(e);if("in-memory"===this.fastStart){let e;this.mdat=r_(!1);for(let r=0;r<2;r++){let r=rT(this),i=this.boxWriter.measureBox(r);e=this.boxWriter.measureBox(this.mdat);let a=this.writer.getPos()+i+e;for(let r of this.finalizedChunks)for(let{data:i}of(r.offset=a,r.samples))t(i),a+=i.byteLength,e+=i.byteLength;if(a<0x100000000)break;e>=0x100000000&&(this.mdat.largeSize=!0)}this.format._options.onMoov&&this.writer.startTrackingWrites();let r=rT(this);if(this.boxWriter.writeBox(r),this.format._options.onMoov){let{data:e,start:t}=this.writer.stopTrackingWrites();this.format._options.onMoov(e,t)}for(let r of(this.format._options.onMdat&&this.writer.startTrackingWrites(),this.mdat.size=e,this.boxWriter.writeBox(this.mdat),this.finalizedChunks))for(let e of r.samples)t(e.data),this.writer.write(e.data),e.data=null;if(this.format._options.onMdat){let{data:e,start:t}=this.writer.stopTrackingWrites();this.format._options.onMdat(e,t)}}else if(this.isFragmented){let e=this.writer.getPos(),t=rC("mfra",void 0,[...this.trackDatas.map(il),rE("mfro",0,0,[rp(0)])]);this.boxWriter.writeBox(t);let r=this.writer.getPos()-e;this.writer.seek(this.writer.getPos()-4),this.boxWriter.writeU32(r)}else{t(this.mdat);let e=this.boxWriter.offsets.get(this.mdat);t(void 0!==e);let r=this.writer.getPos()-e;if(this.mdat.size=r,this.mdat.largeSize=r>=0x100000000,this.boxWriter.patchBox(this.mdat),this.format._options.onMdat){let{data:e,start:t}=this.writer.stopTrackingWrites();this.format._options.onMdat(e,t)}let i=rT(this);if("reserve"===this.fastStart){t(null!==this.ftypSize),this.writer.seek(this.ftypSize),this.format._options.onMoov&&this.writer.startTrackingWrites(),this.boxWriter.writeBox(i);let e=this.boxWriter.offsets.get(this.mdat)-this.writer.getPos();this.boxWriter.writeBox({type:"free",size:e})}else this.format._options.onMoov&&this.writer.startTrackingWrites(),this.boxWriter.writeBox(i);if(this.format._options.onMoov){let{data:e,start:t}=this.writer.stopTrackingWrites();this.format._options.onMoov(e,t)}}e()}}let iB="Mediabunny",iN={video:1,audio:2,subtitle:17};class i$ extends eF{constructor(e,t){super(e),this.trackDatas=[],this.allTracksKnown=k(),this.segment=null,this.segmentInfo=null,this.seekHead=null,this.tracksElement=null,this.tagsElement=null,this.attachmentsElement=null,this.segmentDuration=null,this.cues=null,this.currentCluster=null,this.currentClusterStartMsTimestamp=null,this.currentClusterMaxMsTimestamp=null,this.trackDatasInCurrentCluster=new Map,this.duration=0,this.writer=e._writer,this.format=t,this.ebmlWriter=new tj(this.writer),this.format._options.appendOnly&&(this.writer.ensureMonotonicity=!0)}async start(){let e=await this.mutex.acquire();this.writeEBMLHeader(),this.createSegmentInfo(),this.createCues(),await this.writer.flush(),e()}writeEBMLHeader(){this.format._options.onEbmlHeader&&this.writer.startTrackingWrites();let e={id:t0.EBML,data:[{id:t0.EBMLVersion,data:1},{id:t0.EBMLReadVersion,data:1},{id:t0.EBMLMaxIDLength,data:4},{id:t0.EBMLMaxSizeLength,data:8},{id:t0.DocType,data:this.format instanceof iZ?"webm":"matroska"},{id:t0.DocTypeVersion,data:2},{id:t0.DocTypeReadVersion,data:2}]};if(this.ebmlWriter.writeEBML(e),this.format._options.onEbmlHeader){let{data:e,start:t}=this.writer.stopTrackingWrites();this.format._options.onEbmlHeader(e,t)}}maybeCreateSeekHead(e){if(this.format._options.appendOnly)return;let t=new Uint8Array([28,83,187,107]),r=new Uint8Array([21,73,169,102]),i=new Uint8Array([22,84,174,107]),a=new Uint8Array([25,65,164,105]),n=new Uint8Array([18,84,195,103]),o={id:t0.SeekHead,data:[{id:t0.Seek,data:[{id:t0.SeekID,data:t},{id:t0.SeekPosition,size:5,data:e?this.ebmlWriter.offsets.get(this.cues)-this.segmentDataOffset:0}]},{id:t0.Seek,data:[{id:t0.SeekID,data:r},{id:t0.SeekPosition,size:5,data:e?this.ebmlWriter.offsets.get(this.segmentInfo)-this.segmentDataOffset:0}]},{id:t0.Seek,data:[{id:t0.SeekID,data:i},{id:t0.SeekPosition,size:5,data:e?this.ebmlWriter.offsets.get(this.tracksElement)-this.segmentDataOffset:0}]},this.attachmentsElement?{id:t0.Seek,data:[{id:t0.SeekID,data:a},{id:t0.SeekPosition,size:5,data:e?this.ebmlWriter.offsets.get(this.attachmentsElement)-this.segmentDataOffset:0}]}:null,this.tagsElement?{id:t0.Seek,data:[{id:t0.SeekID,data:n},{id:t0.SeekPosition,size:5,data:e?this.ebmlWriter.offsets.get(this.tagsElement)-this.segmentDataOffset:0}]}:null]};this.seekHead=o}createSegmentInfo(){let e={id:t0.Duration,data:new t_(0)};this.segmentDuration=e;let t={id:t0.Info,data:[{id:t0.TimestampScale,data:1e6},{id:t0.MuxingApp,data:iB},{id:t0.WritingApp,data:iB},this.format._options.appendOnly?null:e]};this.segmentInfo=t}createTracks(){let e={id:t0.Tracks,data:[]};for(let r of(this.tracksElement=e,this.trackDatas)){let i=tL[r.track.source._codec];t(i);let a=0;if("audio"===r.type&&"opus"===r.track.source._codec){a=1e6*80;let e=r.info.decoderConfig.description;e&&(a=Math.round(1e9*(e0(l(e)).preSkip/48e3)))}e.data.push({id:t0.TrackEntry,data:[{id:t0.TrackNumber,data:r.track.id},{id:t0.TrackUID,data:r.track.id},{id:t0.TrackType,data:iN[r.type]},r.track.metadata.disposition?.default===!1?{id:t0.FlagDefault,data:0}:null,r.track.metadata.disposition?.forced?{id:t0.FlagForced,data:1}:null,r.track.metadata.disposition?.hearingImpaired?{id:t0.FlagHearingImpaired,data:1}:null,r.track.metadata.disposition?.visuallyImpaired?{id:t0.FlagVisualImpaired,data:1}:null,r.track.metadata.disposition?.original?{id:t0.FlagOriginal,data:1}:null,r.track.metadata.disposition?.commentary?{id:t0.FlagCommentary,data:1}:null,{id:t0.FlagLacing,data:0},{id:t0.Language,data:r.track.metadata.languageCode??"und"},{id:t0.CodecID,data:i},{id:t0.CodecDelay,data:0},{id:t0.SeekPreRoll,data:a},void 0!==r.track.metadata.name?{id:t0.Name,data:new tP(r.track.metadata.name)}:null,"video"===r.type?this.videoSpecificTrackInfo(r):null,"audio"===r.type?this.audioSpecificTrackInfo(r):null,"subtitle"===r.type?this.subtitleSpecificTrackInfo(r):null]})}}videoSpecificTrackInfo(e){let{frameRate:t,rotation:i}=e.track.metadata,a=[e.info.decoderConfig.description?{id:t0.CodecPrivate,data:l(e.info.decoderConfig.description)}:null,t?{id:t0.DefaultDuration,data:1e9/t}:null],n=i?r(-i):0,o=e.info.decoderConfig.colorSpace;return a.push({id:t0.Video,data:[{id:t0.PixelWidth,data:e.info.width},{id:t0.PixelHeight,data:e.info.height},e.info.alphaMode?{id:t0.AlphaMode,data:1}:null,b(o)?{id:t0.Colour,data:[{id:t0.MatrixCoefficients,data:v[o.matrix]},{id:t0.TransferCharacteristics,data:m[o.transfer]},{id:t0.Primaries,data:f[o.primaries]},{id:t0.Range,data:o.fullRange?2:1}]}:null,n?{id:t0.Projection,data:[{id:t0.ProjectionType,data:0},{id:t0.ProjectionPoseRoll,data:new tE((n+180)%360-180)}]}:null]}),a}audioSpecificTrackInfo(e){let t=H.includes(e.track.source._codec)?ea(e.track.source._codec):null;return[e.info.decoderConfig.description?{id:t0.CodecPrivate,data:l(e.info.decoderConfig.description)}:null,{id:t0.Audio,data:[{id:t0.SamplingFrequency,data:new tE(e.info.sampleRate)},{id:t0.Channels,data:e.info.numberOfChannels},t?{id:t0.BitDepth,data:8*t.sampleSize}:null]}]}subtitleSpecificTrackInfo(e){return[{id:t0.CodecPrivate,data:d.encode(e.info.config.description)}]}maybeCreateTags(){let e=[],t=(t,r)=>{e.push({id:t0.SimpleTag,data:[{id:t0.TagName,data:new tP(t)},"string"==typeof r?{id:t0.TagString,data:new tP(r)}:{id:t0.TagBinary,data:r}]})},r=this.output._metadataTags,i=new Set;for(let{key:e,value:a}of N(r))switch(e){case"title":t("TITLE",a),i.add("TITLE");break;case"description":t("DESCRIPTION",a),i.add("DESCRIPTION");break;case"artist":t("ARTIST",a),i.add("ARTIST");break;case"album":t("ALBUM",a),i.add("ALBUM");break;case"albumArtist":t("ALBUM_ARTIST",a),i.add("ALBUM_ARTIST");break;case"genre":t("GENRE",a),i.add("GENRE");break;case"comment":t("COMMENT",a),i.add("COMMENT");break;case"lyrics":t("LYRICS",a),i.add("LYRICS");break;case"date":t("DATE",a.toISOString().slice(0,10)),i.add("DATE");break;case"trackNumber":t("PART_NUMBER",void 0!==r.tracksTotal?`${a}/${r.tracksTotal}`:a.toString()),i.add("PART_NUMBER");break;case"discNumber":t("DISC",void 0!==r.discsTotal?`${a}/${r.discsTotal}`:a.toString()),i.add("DISC");break;case"tracksTotal":case"discsTotal":case"images":case"raw":break;default:C(e)}if(r.raw)for(let e in r.raw){let a=r.raw[e];!(null==a||i.has(e))&&("string"==typeof a||a instanceof Uint8Array)&&t(e,a)}0!==e.length&&(this.tagsElement={id:t0.Tags,data:[{id:t0.Tag,data:[{id:t0.Targets,data:[{id:t0.TargetTypeValue,data:50},{id:t0.TargetType,data:"MOVIE"}]},...e]}]})}maybeCreateAttachments(){let e=this.output._metadataTags,t=[],r=new Set,i=e.images??[];for(let e of i){let i,a=e.name;for(void 0===a&&(a=("coverFront"===e.kind?"cover":"coverBack"===e.kind?"back":"image")+($(e.mimeType)??""));;){i=0n;for(let e=0;e<8;e++)i<<=8n,i|=BigInt(Math.floor(256*Math.random()));if(0n!==i&&!r.has(i))break}r.add(i),t.push({id:t0.AttachedFile,data:[void 0!==e.description?{id:t0.FileDescription,data:new tP(e.description)}:null,{id:t0.FileName,data:new tP(a)},{id:t0.FileMediaType,data:e.mimeType},{id:t0.FileData,data:e.data},{id:t0.FileUID,data:i}]})}for(let[r,a]of Object.entries(e.raw??{}))a instanceof tC&&/^\d+$/.test(r)&&(i.find(e=>e.mimeType===a.mimeType&&z(e.data,a.data))||t.push({id:t0.AttachedFile,data:[void 0!==a.description?{id:t0.FileDescription,data:new tP(a.description)}:null,{id:t0.FileName,data:new tP(a.name??"")},{id:t0.FileMediaType,data:a.mimeType??""},{id:t0.FileData,data:a.data},{id:t0.FileUID,data:BigInt(r)}]}));0!==t.length&&(this.attachmentsElement={id:t0.Attachments,data:t})}createSegment(){this.createTracks(),this.maybeCreateTags(),this.maybeCreateAttachments(),this.maybeCreateSeekHead(!1);let e={id:t0.Segment,size:this.format._options.appendOnly?-1:6,data:[this.seekHead,this.segmentInfo,this.tracksElement,this.attachmentsElement,this.tagsElement]};if(this.segment=e,this.format._options.onSegmentHeader&&this.writer.startTrackingWrites(),this.ebmlWriter.writeEBML(e),this.format._options.onSegmentHeader){let{data:e,start:t}=this.writer.stopTrackingWrites();this.format._options.onSegmentHeader(e,t)}}createCues(){this.cues={id:t0.Cues,data:[]}}get segmentDataOffset(){return t(this.segment),this.ebmlWriter.dataOffsets.get(this.segment)}allTracksAreKnown(){for(let e of this.output._tracks)if(!e.source._closed&&!this.trackDatas.some(t=>t.track===e))return!1;return!0}async getMimeType(){await this.allTracksKnown.promise;let e=this.trackDatas.map(e=>"video"===e.type||"audio"===e.type?e.info.decoderConfig.codec:({webvtt:"wvtt"})[e.track.source._codec]);return tB({isWebM:this.format instanceof iZ,hasVideo:this.trackDatas.some(e=>"video"===e.type),hasAudio:this.trackDatas.some(e=>"audio"===e.type),codecStrings:e})}getVideoTrackData(e,r,i){let a=this.trackDatas.find(t=>t.track===e);if(a)return a;ed(i),t(i),t(i.decoderConfig),t(void 0!==i.decoderConfig.codedWidth),t(void 0!==i.decoderConfig.codedHeight);let n={track:e,type:"video",info:{width:i.decoderConfig.codedWidth,height:i.decoderConfig.codedHeight,decoderConfig:i.decoderConfig,alphaMode:!!r.sideData.alpha},chunkQueue:[],lastWrittenMsTimestamp:null};if("vp9"===e.source._codec){let e,t,r;n.info.decoderConfig={...n.info.decoderConfig,description:new Uint8Array((t=Number((e=n.info.decoderConfig.codec.split("."))[1]),r=Number(e[2]),[1,1,t,2,1,r,3,1,Number(e[3]),4,1,e[4]?Number(e[4]):1]))}}else"av1"===e.source._codec&&(n.info.decoderConfig={...n.info.decoderConfig,description:new Uint8Array(J(n.info.decoderConfig.codec))});return this.trackDatas.push(n),this.trackDatas.sort((e,t)=>e.track.id-t.track.id),this.allTracksAreKnown()&&this.allTracksKnown.resolve(),n}getAudioTrackData(e,r,i){let a=this.trackDatas.find(t=>t.track===e);if(a)return a;ef(i),t(i),t(i.decoderConfig);let n={...i.decoderConfig},o=!1;if("aac"===e.source._codec&&!n.description){let e=t$(t9.tempFromBytes(r.data));if(!e)throw Error("Couldn't parse ADTS header from the AAC packet. Make sure the packets are in ADTS format (as specified in ISO 13818-7) when not providing a description, or provide a description (must be an AudioSpecificConfig as specified in ISO 14496-3) and ensure the packets are raw AAC data.");let t=Y[e.samplingFrequencyIndex],i=ee[e.channelConfiguration];if(void 0===t||void 0===i)throw Error("Invalid ADTS frame header.");n.description=er({objectType:e.objectType,sampleRate:t,numberOfChannels:i}),o=!0}let s={track:e,type:"audio",info:{numberOfChannels:i.decoderConfig.numberOfChannels,sampleRate:i.decoderConfig.sampleRate,decoderConfig:n,requiresAdtsStripping:o},chunkQueue:[],lastWrittenMsTimestamp:null};return this.trackDatas.push(s),this.trackDatas.sort((e,t)=>e.track.id-t.track.id),this.allTracksAreKnown()&&this.allTracksKnown.resolve(),s}getSubtitleTrackData(e,r){let i=this.trackDatas.find(t=>t.track===e);if(i)return i;eh(r),t(r),t(r.config);let a={track:e,type:"subtitle",info:{config:r.config},chunkQueue:[],lastWrittenMsTimestamp:null};return this.trackDatas.push(a),this.trackDatas.sort((e,t)=>e.track.id-t.track.id),this.allTracksAreKnown()&&this.allTracksKnown.resolve(),a}async addEncodedVideoPacket(e,t,r){let i=await this.mutex.acquire();try{let i=this.getVideoTrackData(e,t,r),a="key"===t.type,n=this.validateAndNormalizeTimestamp(i.track,t.timestamp,a),o=t.duration;void 0!==e.metadata.frameRate&&(n=P(n,1/e.metadata.frameRate),o=P(o,1/e.metadata.frameRate));let s=i.info.alphaMode?t.sideData.alpha??null:null,l=this.createInternalChunk(t.data,n,o,t.type,s);"vp9"===e.source._codec&&this.fixVP9ColorSpace(i,l),i.chunkQueue.push(l),await this.interleaveChunks()}finally{i()}}async addEncodedAudioPacket(e,t,r){let i=await this.mutex.acquire();try{let i=this.getAudioTrackData(e,t,r),a=t.data;if(i.info.requiresAdtsStripping){let e=t$(t9.tempFromBytes(a));if(!e)throw Error("Expected ADTS frame, didn't get one.");let t=null===e.crcCheck?7:9;a=a.subarray(t)}let n="key"===t.type,o=this.validateAndNormalizeTimestamp(i.track,t.timestamp,n),s=this.createInternalChunk(a,o,t.duration,t.type);i.chunkQueue.push(s),await this.interleaveChunks()}finally{i()}}async addSubtitleCue(e,t,r){let i=await this.mutex.acquire();try{let i=this.getSubtitleTrackData(e,r),a=this.validateAndNormalizeTimestamp(i.track,t.timestamp,!0),n=t.text,o=Math.round(1e3*a);rr.lastIndex=0,n=n.replace(rr,e=>{let t=(e=>{let t=ri.exec(e);if(!t)throw Error("Expected match.");return 36e5*Number(t[1]||"0")+6e4*Number(t[2])+1e3*Number(t[3])+Number(t[4])})(e.slice(1,-1));return`<${ra(t-o)}>`});let s=d.encode(n),l=`${t.settings??""}
${t.identifier??""}
${t.notes??""}`,u=this.createInternalChunk(s,a,t.duration,"key",l.trim()?d.encode(l):null);i.chunkQueue.push(u),await this.interleaveChunks()}finally{i()}}async interleaveChunks(e=!1){if(e||this.allTracksAreKnown()){i:for(;;){let t=null,r=1/0;for(let i of this.trackDatas){if(!e&&0===i.chunkQueue.length&&!i.track.source._closed)break i;i.chunkQueue.length>0&&i.chunkQueue[0].timestamp<r&&(t=i,r=i.chunkQueue[0].timestamp)}if(!t)break;let i=t.chunkQueue.shift();this.writeBlock(t,i)}e||await this.writer.flush()}}fixVP9ColorSpace(e,t){if("key"!==t.type||!e.info.decoderConfig.colorSpace||!e.info.decoderConfig.colorSpace.matrix)return;let r=new n(t.data);r.skipBits(2);let i=r.readBits(1),a=(r.readBits(1)<<1)+i;if(3===a&&r.skipBits(1),r.readBits(1)||0!==r.readBits(1)||(r.skipBits(2),4817730!==r.readBits(24)))return;a>=2&&r.skipBits(1);let o={rgb:7,bt709:2,bt470bg:1,smpte170m:3}[e.info.decoderConfig.colorSpace.matrix];((e,t,r,i)=>{for(let a=t;a<r;a++){let t=Math.floor(a/8),n=e[t],o=7-(7&a);n&=~(1<<o),n|=(i&1<<r-a-1)>>r-a-1<<o,e[t]=n}})(t.data,r.pos,r.pos+3,o)}createInternalChunk(e,t,r,i,a=null){return{data:e,type:i,timestamp:t,duration:r,additions:a}}writeBlock(e,r){this.segment||this.createSegment();let i=Math.round(1e3*r.timestamp),a=this.trackDatas.every(t=>{if(e===t)return"key"===r.type;let i=t.chunkQueue[0];return i?"key"===i.type:t.track.source._closed}),n=!1;if(this.currentCluster){t(null!==this.currentClusterStartMsTimestamp),t(null!==this.currentClusterMaxMsTimestamp);let e=i-this.currentClusterStartMsTimestamp;n=a&&i>this.currentClusterMaxMsTimestamp&&e>=1e3*(this.format._options.minimumClusterDuration??1)||e>32767}else n=!0;n&&this.createNewCluster(i);let o=i-this.currentClusterStartMsTimestamp;if(o<-32768)return;let s=new Uint8Array(4),l=new DataView(s.buffer);l.setUint8(0,128|e.track.id),l.setInt16(1,o,!1);let u=Math.round(1e3*r.duration);if(r.additions){let t={id:t0.BlockGroup,data:[{id:t0.Block,data:[s,r.data]},"delta"===r.type?{id:t0.ReferenceBlock,data:new tT(e.lastWrittenMsTimestamp-i)}:null,r.additions?{id:t0.BlockAdditions,data:[{id:t0.BlockMore,data:[{id:t0.BlockAddID,data:1},{id:t0.BlockAdditional,data:r.additions}]}]}:null,u>0?{id:t0.BlockDuration,data:u}:null]};this.ebmlWriter.writeEBML(t)}else{l.setUint8(3,Number("key"===r.type)<<7);let e={id:t0.SimpleBlock,data:[s,r.data]};this.ebmlWriter.writeEBML(e)}this.duration=Math.max(this.duration,i+u),e.lastWrittenMsTimestamp=i,this.trackDatasInCurrentCluster.has(e)||this.trackDatasInCurrentCluster.set(e,{firstMsTimestamp:i}),this.currentClusterMaxMsTimestamp=Math.max(this.currentClusterMaxMsTimestamp,i)}createNewCluster(e){this.currentCluster&&this.finalizeCurrentCluster(),this.format._options.onCluster&&this.writer.startTrackingWrites(),this.currentCluster={id:t0.Cluster,size:this.format._options.appendOnly?-1:5,data:[{id:t0.Timestamp,data:e}]},this.ebmlWriter.writeEBML(this.currentCluster),this.currentClusterStartMsTimestamp=e,this.currentClusterMaxMsTimestamp=e,this.trackDatasInCurrentCluster.clear()}finalizeCurrentCluster(){if(t(this.currentCluster),!this.format._options.appendOnly){let e=this.writer.getPos()-this.ebmlWriter.dataOffsets.get(this.currentCluster),t=this.writer.getPos();this.writer.seek(this.ebmlWriter.offsets.get(this.currentCluster)+4),this.ebmlWriter.writeVarInt(e,5),this.writer.seek(t)}if(this.format._options.onCluster){t(null!==this.currentClusterStartMsTimestamp);let{data:e,start:r}=this.writer.stopTrackingWrites();this.format._options.onCluster(e,r,this.currentClusterStartMsTimestamp/1e3)}let e=this.ebmlWriter.offsets.get(this.currentCluster)-this.segmentDataOffset,r=new Map;for(let[e,{firstMsTimestamp:t}]of this.trackDatasInCurrentCluster)r.has(t)||r.set(t,[]),r.get(t).push(e);for(let[i,a]of[...r.entries()].sort((e,t)=>e[0]-t[0]))t(this.cues),this.cues.data.push({id:t0.CuePoint,data:[{id:t0.CueTime,data:i},...a.map(t=>({id:t0.CueTrackPositions,data:[{id:t0.CueTrack,data:t.track.id},{id:t0.CueClusterPosition,data:e}]}))]})}async onTrackClose(){let e=await this.mutex.acquire();this.allTracksAreKnown()&&this.allTracksKnown.resolve(),await this.interleaveChunks(),e()}async finalize(){let e=await this.mutex.acquire();if(this.allTracksKnown.resolve(),this.segment||this.createSegment(),await this.interleaveChunks(!0),this.currentCluster&&this.finalizeCurrentCluster(),t(this.cues),this.ebmlWriter.writeEBML(this.cues),!this.format._options.appendOnly){let e=this.writer.getPos(),r=this.writer.getPos()-this.segmentDataOffset;this.writer.seek(this.ebmlWriter.offsets.get(this.segment)+4),this.ebmlWriter.writeVarInt(r,6),this.segmentDuration.data=new t_(this.duration),this.writer.seek(this.ebmlWriter.offsets.get(this.segmentDuration)),this.ebmlWriter.writeEBML(this.segmentDuration),t(this.seekHead),this.writer.seek(this.ebmlWriter.offsets.get(this.seekHead)),this.maybeCreateSeekHead(!0),this.ebmlWriter.writeEBML(this.seekHead),this.writer.seek(e)}e()}}new Uint8Array([9,240]),new Uint8Array([70,1]);let iz=new Uint32Array(256);for(let e=0;e<256;e++){let t=e<<24;for(let e=0;e<8;e++)t=0x80000000&t?t<<1^0x4c11db7:t<<1;iz[e]=t>>>0}let iU=new Uint8Array(16);{let e=u(iU);iU[0]=0,e.setUint16(1,45069,!1),e.setUint16(3,1,!1),iU[5]=193,iU[6]=0,iU[7]=0,e.setUint16(8,1,!1),e.setUint16(10,61440,!1),e.setUint32(12,(e=>{let t=0xffffffff;for(let r=0;r<e.length;r++)t=(t<<8^iz[t>>>24^e[r]])>>>0;return t})(iU.subarray(0,12)),!1)}class iV{getSupportedVideoCodecs(){return this.getSupportedCodecs().filter(e=>V.includes(e))}getSupportedAudioCodecs(){return this.getSupportedCodecs().filter(e=>q.includes(e))}getSupportedSubtitleCodecs(){return this.getSupportedCodecs().filter(e=>G.includes(e))}_codecUnsupportedHint(e){return""}}class iH extends iV{constructor(e={}){if(!e||"object"!=typeof e)throw TypeError("options must be an object.");if(void 0!==e.fastStart&&![!1,"in-memory","reserve","fragmented"].includes(e.fastStart))throw TypeError("options.fastStart, when provided, must be false, 'in-memory', 'reserve', or 'fragmented'.");if(void 0!==e.minimumFragmentDuration&&(!Number.isFinite(e.minimumFragmentDuration)||e.minimumFragmentDuration<0))throw TypeError("options.minimumFragmentDuration, when provided, must be a non-negative number.");if(void 0!==e.onFtyp&&"function"!=typeof e.onFtyp)throw TypeError("options.onFtyp, when provided, must be a function.");if(void 0!==e.onMoov&&"function"!=typeof e.onMoov)throw TypeError("options.onMoov, when provided, must be a function.");if(void 0!==e.onMdat&&"function"!=typeof e.onMdat)throw TypeError("options.onMdat, when provided, must be a function.");if(void 0!==e.onMoof&&"function"!=typeof e.onMoof)throw TypeError("options.onMoof, when provided, must be a function.");if(void 0!==e.metadataFormat&&!["mdir","mdta","udta","auto"].includes(e.metadataFormat))throw TypeError("options.metadataFormat, when provided, must be either 'auto', 'mdir', 'mdta', or 'udta'.");super(),this._options=e}getSupportedTrackCounts(){return{video:{min:0,max:0x100000000-1},audio:{min:0,max:0x100000000-1},subtitle:{min:0,max:0x100000000-1},total:{min:1,max:0x100000000-1}}}get supportsVideoRotationMetadata(){return!0}_createMuxer(e){return new iL(e,this)}}class iW extends iH{constructor(e){super(e)}get _name(){return"MP4"}get fileExtension(){return".mp4"}get mimeType(){return"video/mp4"}getSupportedCodecs(){return[...V,...W,"pcm-s16","pcm-s16be","pcm-s24","pcm-s24be","pcm-s32","pcm-s32be","pcm-f32","pcm-f32be","pcm-f64","pcm-f64be",...G]}_codecUnsupportedHint(e){return new iq().getSupportedCodecs().includes(e)?" Switching to MOV will grant support for this codec.":""}}class iq extends iH{constructor(e){super(e)}get _name(){return"MOV"}get fileExtension(){return".mov"}get mimeType(){return"video/quicktime"}getSupportedCodecs(){return[...V,...q]}_codecUnsupportedHint(e){return new iW().getSupportedCodecs().includes(e)?" Switching to MP4 will grant support for this codec.":""}}class iG extends iV{constructor(e={}){if(!e||"object"!=typeof e)throw TypeError("options must be an object.");if(void 0!==e.appendOnly&&"boolean"!=typeof e.appendOnly)throw TypeError("options.appendOnly, when provided, must be a boolean.");if(void 0!==e.minimumClusterDuration&&(!Number.isFinite(e.minimumClusterDuration)||e.minimumClusterDuration<0))throw TypeError("options.minimumClusterDuration, when provided, must be a non-negative number.");if(void 0!==e.onEbmlHeader&&"function"!=typeof e.onEbmlHeader)throw TypeError("options.onEbmlHeader, when provided, must be a function.");if(void 0!==e.onSegmentHeader&&"function"!=typeof e.onSegmentHeader)throw TypeError("options.onHeader, when provided, must be a function.");if(void 0!==e.onCluster&&"function"!=typeof e.onCluster)throw TypeError("options.onCluster, when provided, must be a function.");super(),this._options=e}_createMuxer(e){return new i$(e,this)}get _name(){return"Matroska"}getSupportedTrackCounts(){return{video:{min:0,max:127},audio:{min:0,max:127},subtitle:{min:0,max:127},total:{min:1,max:127}}}get fileExtension(){return".mkv"}get mimeType(){return"video/x-matroska"}getSupportedCodecs(){return[...V,...W,...H.filter(e=>!["pcm-s8","pcm-f32be","pcm-f64be","ulaw","alaw"].includes(e)),...G]}get supportsVideoRotationMetadata(){return!1}}class iZ extends iG{constructor(e){super(e)}getSupportedCodecs(){return[...V.filter(e=>["vp8","vp9","av1"].includes(e)),...q.filter(e=>["opus","vorbis"].includes(e)),...G]}get _name(){return"WebM"}get fileExtension(){return".webm"}get mimeType(){return"video/webm"}_codecUnsupportedHint(e){return new iG().getSupportedCodecs().includes(e)?" Switching to MKV will grant support for this codec.":""}}var iK=e.i(49019),iQ=e.i(758927);class iX{constructor(){this._connectedTrack=null,this._closingPromise=null,this._closed=!1,this._timestampOffset=0}_ensureValidAdd(){if(!this._connectedTrack)throw Error("Source is not connected to an output track.");if("canceled"===this._connectedTrack.output.state)throw Error("Output has been canceled.");if("finalizing"===this._connectedTrack.output.state||"finalized"===this._connectedTrack.output.state)throw Error("Output has been finalized.");if("pending"===this._connectedTrack.output.state)throw Error("Output has not started.");if(this._closed)throw Error("Source is closed.")}async _start(){}async _flushAndClose(e){}close(){if(this._closingPromise)return;let e=this._connectedTrack;if(!e)throw Error("Cannot call close without connecting the source to an output track.");if("pending"===e.output.state)throw Error("Cannot call close before output has been started.");this._closingPromise=(async()=>{await this._flushAndClose(!1),this._closed=!0,"finalizing"!==e.output.state&&"finalized"!==e.output.state&&e.output._muxer.onTrackClose(e)})()}async _flushOrWaitForOngoingClose(e){return this._closingPromise??=(async()=>{await this._flushAndClose(e),this._closed=!0})()}}class iJ extends iX{constructor(e){if(super(),this._connectedTrack=null,!V.includes(e))throw TypeError(`Invalid video codec '${e}'. Must be one of: ${V.join(", ")}.`);this._codec=e}}class iY{constructor(e,t){this.source=e,this.encodingConfig=t,this.ensureEncoderPromise=null,this.encoderInitialized=!1,this.encoder=null,this.muxer=null,this.lastMultipleOfKeyFrameInterval=-1,this.codedWidth=null,this.codedHeight=null,this.resizeCanvas=null,this.customEncoder=null,this.customEncoderCallSerializer=new O,this.customEncoderQueueSize=0,this.alphaEncoder=null,this.splitter=null,this.splitterCreationFailed=!1,this.alphaFrameQueue=[],this.error=null,this.errorNeedsNewStack=!0}async add(e,r,i){try{if(this.checkForEncoderError(),this.source._ensureValidAdd(),null!==this.codedWidth&&null!==this.codedHeight){if(e.codedWidth!==this.codedWidth||e.codedHeight!==this.codedHeight){let i=this.encodingConfig.sizeChangeBehavior??"deny";if("passThrough"===i);else if("deny"===i)throw Error(`Video sample size must remain constant. Expected ${this.codedWidth}x${this.codedHeight}, got ${e.codedWidth}x${e.codedHeight}. To allow the sample size to change over time, set \`sizeChangeBehavior\` to a value other than 'strict' in the encoding options.`);else{let a=!1;this.resizeCanvas||("u">typeof document?(this.resizeCanvas=document.createElement("canvas"),this.resizeCanvas.width=this.codedWidth,this.resizeCanvas.height=this.codedHeight):this.resizeCanvas=new OffscreenCanvas(this.codedWidth,this.codedHeight),a=!0);let n=this.resizeCanvas.getContext("2d",{alpha:R()});t(n),a||(R()?(n.fillStyle="black",n.fillRect(0,0,this.codedWidth,this.codedHeight)):n.clearRect(0,0,this.codedWidth,this.codedHeight)),e.drawWithFit(n,{fit:i}),r&&e.close(),e=new e9(this.resizeCanvas,{timestamp:e.timestamp,duration:e.duration,rotation:e.rotation}),r=!0}}}else this.codedWidth=e.codedWidth,this.codedHeight=e.codedHeight;!this.encoderInitialized&&(this.ensureEncoderPromise||this.ensureEncoder(e),this.encoderInitialized||await this.ensureEncoderPromise),t(this.encoderInitialized);let a=this.encodingConfig.keyFrameInterval??5,n=Math.floor(e.timestamp/a),o={...i,keyFrame:i?.keyFrame||0===a||n!==this.lastMultipleOfKeyFrameInterval};if(this.lastMultipleOfKeyFrameInterval=n,this.customEncoder){this.customEncoderQueueSize++;let t=e.clone(),r=this.customEncoderCallSerializer.call(()=>this.customEncoder.encode(t,o)).then(()=>this.customEncoderQueueSize--).catch(e=>this.error??=e).finally(()=>{t.close()});this.customEncoderQueueSize>=4&&await r}else{t(this.encoder);let i=e.toVideoFrame();if(this.alphaEncoder)if(i.format&&!i.format.includes("A")||this.splitterCreationFailed)this.alphaFrameQueue.push(null),this.encoder.encode(i,o),i.close();else{let e=i.displayWidth,t=i.displayHeight;if(!this.splitter)try{this.splitter=new i0(e,t)}catch(e){console.error("Due to an error, only color data will be encoded.",e),this.splitterCreationFailed=!0,this.alphaFrameQueue.push(null),this.encoder.encode(i,o),i.close()}if(this.splitter){let e=this.splitter.extractColor(i),t=this.splitter.extractAlpha(i);this.alphaFrameQueue.push(t),this.encoder.encode(e,o),e.close(),i.close()}}else this.encoder.encode(i,o),i.close();r&&e.close(),this.encoder.encodeQueueSize>=4&&await new Promise(e=>this.encoder.addEventListener("dequeue",e,{once:!0}))}await this.muxer.mutex.currentPromise}finally{r&&e.close()}}ensureEncoder(e){let r=Error();this.ensureEncoderPromise=(async()=>{let i=ex({width:e.codedWidth,height:e.codedHeight,...this.encodingConfig,framerate:this.source._connectedTrack?.metadata.frameRate});this.encodingConfig.onEncoderConfig?.(i);let a=ev.find(e=>e.supports(this.encodingConfig.codec,i));if(a)this.customEncoder=new a,this.customEncoder.codec=this.encodingConfig.codec,this.customEncoder.config=i,this.customEncoder.onPacket=(e,t)=>{if(!(e instanceof e4))throw TypeError("The first argument passed to onPacket must be an EncodedPacket.");if(void 0!==t&&(!t||"object"!=typeof t))throw TypeError("The second argument passed to onPacket must be an object or undefined.");this.encodingConfig.onEncodedPacket?.(e,t),this.muxer.addEncodedVideoPacket(this.source._connectedTrack,e,t).catch(e=>{this.error??=e,this.errorNeedsNewStack=!1})},await this.customEncoder.init();else{if("u"<typeof VideoEncoder)throw Error("VideoEncoder is not supported by this browser.");if(i.alpha="discard","keep"===this.encodingConfig.alpha&&(i.latencyMode="quality"),(i.width%2==1||i.height%2==1)&&("avc"===this.encodingConfig.codec||"hevc"===this.encodingConfig.codec))throw Error(`The dimensions ${i.width}x${i.height} are not supported for codec '${this.encodingConfig.codec}'; both width and height must be even numbers. Make sure to round your dimensions to the nearest even number.`);if(!(await VideoEncoder.isConfigSupported(i)).supported)throw Error(`This specific encoder configuration (${i.codec}, ${i.bitrate} bps, ${i.width}x${i.height}, hardware acceleration: ${i.hardwareAcceleration??"no-preference"}) is not supported by this browser. Consider using another codec or changing your video parameters.`);let e=[],a=[],n=0,o=0,s=(e,t,r)=>{let i={};if(t){let e=new Uint8Array(t.byteLength);t.copyTo(e),i.alpha=e}let a=e4.fromEncodedChunk(e,i);this.encodingConfig.onEncodedPacket?.(a,r),this.muxer.addEncodedVideoPacket(this.source._connectedTrack,a,r).catch(e=>{this.error??=e,this.errorNeedsNewStack=!1})};this.encoder=new VideoEncoder({output:(r,i)=>{if(!this.alphaEncoder)return void s(r,null,i);let l=this.alphaFrameQueue.shift();t(void 0!==l),l?(this.alphaEncoder.encode(l,{keyFrame:"key"===r.type}),o++,l.close(),e.push({chunk:r,meta:i})):0===o?s(r,null,i):(a.push(n+o),e.push({chunk:r,meta:i}))},error:e=>{e.stack=r.stack,this.error??=e}}),this.encoder.configure(i),"keep"===this.encodingConfig.alpha&&(this.alphaEncoder=new VideoEncoder({output:(r,i)=>{o--;let l=e.shift();for(t(void 0!==l),s(l.chunk,r,l.meta),n++;a.length>0&&a[0]===n;){a.shift();let r=e.shift();t(void 0!==r),s(r.chunk,null,r.meta)}},error:e=>{e.stack=r.stack,this.error??=e}}),this.alphaEncoder.configure(i))}t(this.source._connectedTrack),this.muxer=this.source._connectedTrack.output._muxer,this.encoderInitialized=!0})()}async flushAndClose(e){e||this.checkForEncoderError(),this.customEncoder?(e||this.customEncoderCallSerializer.call(()=>this.customEncoder.flush()),await this.customEncoderCallSerializer.call(()=>this.customEncoder.close())):this.encoder&&(e||(await this.encoder.flush(),await this.alphaEncoder?.flush()),"closed"!==this.encoder.state&&this.encoder.close(),this.alphaEncoder&&"closed"!==this.alphaEncoder.state&&this.alphaEncoder.close(),this.alphaFrameQueue.forEach(e=>e?.close()),this.splitter?.close()),e||this.checkForEncoderError()}getQueueSize(){return this.customEncoder?this.customEncoderQueueSize:this.encoder?.encodeQueueSize??0}checkForEncoderError(){if(this.error)throw this.errorNeedsNewStack&&(this.error.stack=Error().stack),this.error}}class i0{constructor(e,t){this.lastFrame=null,"u">typeof OffscreenCanvas?this.canvas=new OffscreenCanvas(e,t):(this.canvas=document.createElement("canvas"),this.canvas.width=e,this.canvas.height=t);const r=this.canvas.getContext("webgl2",{alpha:!0});if(!r)throw Error("Couldn't acquire WebGL 2 context.");this.gl=r,this.colorProgram=this.createColorProgram(),this.alphaProgram=this.createAlphaProgram(),this.vao=this.createVAO(),this.sourceTexture=this.createTexture(),this.alphaResolutionLocation=this.gl.getUniformLocation(this.alphaProgram,"u_resolution"),this.gl.useProgram(this.colorProgram),this.gl.uniform1i(this.gl.getUniformLocation(this.colorProgram,"u_sourceTexture"),0),this.gl.useProgram(this.alphaProgram),this.gl.uniform1i(this.gl.getUniformLocation(this.alphaProgram,"u_sourceTexture"),0)}createVertexShader(){return this.createShader(this.gl.VERTEX_SHADER,`#version 300 es
			in vec2 a_position;
			in vec2 a_texCoord;
			out vec2 v_texCoord;
			
			void main() {
				gl_Position = vec4(a_position, 0.0, 1.0);
				v_texCoord = a_texCoord;
			}
		`)}createColorProgram(){let e=this.createVertexShader(),t=this.createShader(this.gl.FRAGMENT_SHADER,`#version 300 es
			precision highp float;
			
			uniform sampler2D u_sourceTexture;
			in vec2 v_texCoord;
			out vec4 fragColor;
			
			void main() {
				vec4 source = texture(u_sourceTexture, v_texCoord);
				fragColor = vec4(source.rgb, 1.0);
			}
		`),r=this.gl.createProgram();return this.gl.attachShader(r,e),this.gl.attachShader(r,t),this.gl.linkProgram(r),r}createAlphaProgram(){let e=this.createVertexShader(),t=this.createShader(this.gl.FRAGMENT_SHADER,`#version 300 es
			precision highp float;
			
			uniform sampler2D u_sourceTexture;
			uniform vec2 u_resolution; // The width and height of the canvas
			in vec2 v_texCoord;
			out vec4 fragColor;

			// This function determines the value for a single byte in the YUV stream
			float getByteValue(float byteOffset) {
				float width = u_resolution.x;
				float height = u_resolution.y;

				float yPlaneSize = width * height;

				if (byteOffset < yPlaneSize) {
					// This byte is in the luma plane. Find the corresponding pixel coordinates to sample from
					float y = floor(byteOffset / width);
					float x = mod(byteOffset, width);
					
					// Add 0.5 to sample the center of the texel
					vec2 sampleCoord = (vec2(x, y) + 0.5) / u_resolution;
					
					// The luma value is the alpha from the source texture
					return texture(u_sourceTexture, sampleCoord).a;
				} else {
					// Write a fixed value for chroma and beyond
					return 128.0 / 255.0;
				}
			}
			
			void main() {
				// Each fragment writes 4 bytes (R, G, B, A)
				float pixelIndex = floor(gl_FragCoord.y) * u_resolution.x + floor(gl_FragCoord.x);
				float baseByteOffset = pixelIndex * 4.0;

				vec4 result;
				for (int i = 0; i < 4; i++) {
					float currentByteOffset = baseByteOffset + float(i);
					result[i] = getByteValue(currentByteOffset);
				}
				
				fragColor = result;
			}
		`),r=this.gl.createProgram();return this.gl.attachShader(r,e),this.gl.attachShader(r,t),this.gl.linkProgram(r),r}createShader(e,t){let r=this.gl.createShader(e);return this.gl.shaderSource(r,t),this.gl.compileShader(r),this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS)||console.error("Shader compile error:",this.gl.getShaderInfoLog(r)),r}createVAO(){let e=this.gl.createVertexArray();this.gl.bindVertexArray(e);let t=new Float32Array([-1,-1,0,1,1,-1,1,1,-1,1,0,0,1,1,1,0]),r=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,r),this.gl.bufferData(this.gl.ARRAY_BUFFER,t,this.gl.STATIC_DRAW);let i=this.gl.getAttribLocation(this.colorProgram,"a_position"),a=this.gl.getAttribLocation(this.colorProgram,"a_texCoord");return this.gl.enableVertexAttribArray(i),this.gl.vertexAttribPointer(i,2,this.gl.FLOAT,!1,16,0),this.gl.enableVertexAttribArray(a),this.gl.vertexAttribPointer(a,2,this.gl.FLOAT,!1,16,8),e}createTexture(){let e=this.gl.createTexture();return this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),e}updateTexture(e){this.lastFrame!==e&&((e.displayWidth!==this.canvas.width||e.displayHeight!==this.canvas.height)&&(this.canvas.width=e.displayWidth,this.canvas.height=e.displayHeight),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.sourceTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e),this.lastFrame=e)}extractColor(e){return this.updateTexture(e),this.gl.useProgram(this.colorProgram),this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.bindVertexArray(this.vao),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),new VideoFrame(this.canvas,{timestamp:e.timestamp,duration:e.duration??void 0,alpha:"discard"})}extractAlpha(e){this.updateTexture(e),this.gl.useProgram(this.alphaProgram),this.gl.uniform2f(this.alphaResolutionLocation,this.canvas.width,this.canvas.height),this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.bindVertexArray(this.vao),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4);let{width:r,height:i}=this.canvas,a=Math.ceil(r/2)*Math.ceil(i/2),n=r*i+2*a,o=Math.ceil(n/(4*r)),s=new Uint8Array(4*r*o);this.gl.readPixels(0,0,r,o,this.gl.RGBA,this.gl.UNSIGNED_BYTE,s),t(128===(s=s.subarray(0,n))[r*i]),t(128===s[s.length-1]);let l={format:"I420",codedWidth:r,codedHeight:i,timestamp:e.timestamp,duration:e.duration??void 0,transfer:[s.buffer]};return new VideoFrame(s,l)}close(){this.gl.getExtension("WEBGL_lose_context")?.loseContext(),this.gl=null}}class i1 extends iJ{constructor(e){(e=>{if(!e||"object"!=typeof e)throw TypeError("Encoding config must be an object.");if(!V.includes(e.codec))throw TypeError(`Invalid video codec '${e.codec}'. Must be one of: ${V.join(", ")}.`);if(!(e.bitrate instanceof ek)&&(!Number.isInteger(e.bitrate)||e.bitrate<=0))throw TypeError("config.bitrate must be a positive integer or a quality.");if(void 0!==e.keyFrameInterval&&(!Number.isFinite(e.keyFrameInterval)||e.keyFrameInterval<0))throw TypeError("config.keyFrameInterval, when provided, must be a non-negative number.");if(void 0!==e.sizeChangeBehavior&&!["deny","passThrough","fill","contain","cover"].includes(e.sizeChangeBehavior))throw TypeError("config.sizeChangeBehavior, when provided, must be 'deny', 'passThrough', 'fill', 'contain' or 'cover'.");if(void 0!==e.onEncodedPacket&&"function"!=typeof e.onEncodedPacket)throw TypeError("config.onEncodedChunk, when provided, must be a function.");if(void 0!==e.onEncoderConfig&&"function"!=typeof e.onEncoderConfig)throw TypeError("config.onEncoderConfig, when provided, must be a function.");eb(e.codec,e)})(e),super(e.codec),this._encoder=new iY(this,e)}add(e,t){if(!(e instanceof e9))throw TypeError("videoSample must be a VideoSample.");return this._encoder.add(e,!1,t)}_flushAndClose(e){return this._encoder.flushAndClose(e)}}class i2 extends iX{constructor(e){if(super(),this._connectedTrack=null,!q.includes(e))throw TypeError(`Invalid audio codec '${e}'. Must be one of: ${q.join(", ")}.`);this._codec=e}}class i4{constructor(e,t){this.source=e,this.encodingConfig=t,this.ensureEncoderPromise=null,this.encoderInitialized=!1,this.encoder=null,this.muxer=null,this.lastNumberOfChannels=null,this.lastSampleRate=null,this.isPcmEncoder=!1,this.outputSampleSize=null,this.writeOutputValue=null,this.customEncoder=null,this.customEncoderCallSerializer=new O,this.customEncoderQueueSize=0,this.lastEndSampleIndex=null,this.error=null,this.errorNeedsNewStack=!0}async add(e,r){try{if(this.checkForEncoderError(),this.source._ensureValidAdd(),null!==this.lastNumberOfChannels&&null!==this.lastSampleRate){if(e.numberOfChannels!==this.lastNumberOfChannels||e.sampleRate!==this.lastSampleRate)throw Error(`Audio parameters must remain constant. Expected ${this.lastNumberOfChannels} channels at ${this.lastSampleRate} Hz, got ${e.numberOfChannels} channels at ${e.sampleRate} Hz.`)}else this.lastNumberOfChannels=e.numberOfChannels,this.lastSampleRate=e.sampleRate;!this.encoderInitialized&&(this.ensureEncoderPromise||this.ensureEncoder(e),this.encoderInitialized||await this.ensureEncoderPromise),t(this.encoderInitialized);{let t=Math.round(e.timestamp*e.sampleRate),r=Math.round((e.timestamp+e.duration)*e.sampleRate);if(null===this.lastEndSampleIndex)this.lastEndSampleIndex=r;else{let r=t-this.lastEndSampleIndex;if(r>=64){let t=new tl({data:new Float32Array(r*e.numberOfChannels),format:"f32-planar",sampleRate:e.sampleRate,numberOfChannels:e.numberOfChannels,numberOfFrames:r,timestamp:this.lastEndSampleIndex/e.sampleRate});await this.add(t,!0)}this.lastEndSampleIndex+=e.numberOfFrames}}if(this.customEncoder){this.customEncoderQueueSize++;let t=e.clone(),r=this.customEncoderCallSerializer.call(()=>this.customEncoder.encode(t)).then(()=>this.customEncoderQueueSize--).catch(e=>this.error??=e).finally(()=>{t.close()});this.customEncoderQueueSize>=4&&await r,await this.muxer.mutex.currentPromise}else if(this.isPcmEncoder)await this.doPcmEncoding(e,r);else{t(this.encoder);let i=e.toAudioData();this.encoder.encode(i),i.close(),r&&e.close(),this.encoder.encodeQueueSize>=4&&await new Promise(e=>this.encoder.addEventListener("dequeue",e,{once:!0})),await this.muxer.mutex.currentPromise}}finally{r&&e.close()}}async doPcmEncoding(e,r){t(this.outputSampleSize),t(this.writeOutputValue);let{numberOfChannels:i,numberOfFrames:a,sampleRate:n,timestamp:o}=e,s=[];for(let t=0;t<a;t+=2048){let r=Math.min(2048,e.numberOfFrames-t),a=new DataView(new ArrayBuffer(r*i*this.outputSampleSize));s.push({frameCount:r,view:a})}let l=new Float32Array(e.allocationSize({planeIndex:0,format:"f32-planar"})/Float32Array.BYTES_PER_ELEMENT);for(let t=0;t<i;t++){e.copyTo(l,{planeIndex:t,format:"f32-planar"});for(let e=0;e<s.length;e++){let{frameCount:r,view:a}=s[e];for(let n=0;n<r;n++)this.writeOutputValue(a,(n*i+t)*this.outputSampleSize,l[2048*e+n])}}r&&e.close();let u={decoderConfig:{codec:this.encodingConfig.codec,numberOfChannels:i,sampleRate:n}};for(let e=0;e<s.length;e++){let{frameCount:t,view:r}=s[e],i=r.buffer,a=2048*e,l=new e4(new Uint8Array(i),"key",o+a/n,t/n);this.encodingConfig.onEncodedPacket?.(l,u),await this.muxer.addEncodedAudioPacket(this.source._connectedTrack,l,u)}}ensureEncoder(e){let r=Error();this.ensureEncoderPromise=(async()=>{let{numberOfChannels:a,sampleRate:n}=e,o=eS({numberOfChannels:a,sampleRate:n,...this.encodingConfig});this.encodingConfig.onEncoderConfig?.(o);let s=ey.find(e=>e.supports(this.encodingConfig.codec,o));if(s)this.customEncoder=new s,this.customEncoder.codec=this.encodingConfig.codec,this.customEncoder.config=o,this.customEncoder.onPacket=(e,t)=>{if(!(e instanceof e4))throw TypeError("The first argument passed to onPacket must be an EncodedPacket.");if(void 0!==t&&(!t||"object"!=typeof t))throw TypeError("The second argument passed to onPacket must be an object or undefined.");this.encodingConfig.onEncodedPacket?.(e,t),this.muxer.addEncodedAudioPacket(this.source._connectedTrack,e,t).catch(e=>{this.error??=e,this.errorNeedsNewStack=!1})},await this.customEncoder.init();else if(H.includes(this.encodingConfig.codec))this.initPcmEncoder();else{if("u"<typeof AudioEncoder)throw Error("AudioEncoder is not supported by this browser.");if(!(await AudioEncoder.isConfigSupported(o)).supported)throw Error(`This specific encoder configuration (${o.codec}, ${o.bitrate} bps, ${o.numberOfChannels} channels, ${o.sampleRate} Hz) is not supported by this browser. Consider using another codec or changing your audio parameters.`);this.encoder=new AudioEncoder({output:(e,t)=>{if("aac"===this.encodingConfig.codec&&t?.decoderConfig&&(!t.decoderConfig.description||t.decoderConfig.description.byteLength<2||0===et(l(t.decoderConfig.description)).objectType)){let e=Number(i(o.codec.split(".")));t.decoderConfig.description=er({objectType:e,numberOfChannels:t.decoderConfig.numberOfChannels,sampleRate:t.decoderConfig.sampleRate})}let r=e4.fromEncodedChunk(e);this.encodingConfig.onEncodedPacket?.(r,t),this.muxer.addEncodedAudioPacket(this.source._connectedTrack,r,t).catch(e=>{this.error??=e,this.errorNeedsNewStack=!1})},error:e=>{e.stack=r.stack,this.error??=e}}),this.encoder.configure(o)}t(this.source._connectedTrack),this.muxer=this.source._connectedTrack.output._muxer,this.encoderInitialized=!0})()}initPcmEncoder(){this.isPcmEncoder=!0;let{dataType:e,sampleSize:r,littleEndian:i}=ea(this.encodingConfig.codec);switch(this.outputSampleSize=r,r){case 1:"unsigned"===e?this.writeOutputValue=(e,t,r)=>e.setUint8(t,T((r+1)*127.5,0,255)):"signed"===e?this.writeOutputValue=(e,t,r)=>{e.setInt8(t,T(Math.round(128*r),-128,127))}:"ulaw"===e?this.writeOutputValue=(e,t,r)=>{let i=T(Math.floor(32767*r),-32768,32767);e.setUint8(t,(e=>{let t=e,r=4096,i=0,a=12,n=0;for(t<0&&(t=-t,i=128),(t+=33)>8191&&(t=8191);(t&r)!==r&&a>=5;)r>>=1,a--;return n=t>>a-4&15,255&~(i|a-5<<4|n)})(i))}:"alaw"===e?this.writeOutputValue=(e,t,r)=>{let i=T(Math.floor(32767*r),-32768,32767);e.setUint8(t,(e=>{let t=2048,r=0,i=11,a=0,n=e;for(n<0&&(n=-n,r=128),n>4095&&(n=4095);(n&t)!==t&&i>=5;)t>>=1,i--;return a=n>>(4===i?1:i-4)&15,(r|i-4<<4|a)^85})(i))}:t(!1);break;case 2:"unsigned"===e?this.writeOutputValue=(e,t,r)=>e.setUint16(t,T((r+1)*32767.5,0,65535),i):"signed"===e?this.writeOutputValue=(e,t,r)=>e.setInt16(t,T(Math.round(32767*r),-32768,32767),i):t(!1);break;case 3:"unsigned"===e?this.writeOutputValue=(e,t,r)=>_(e,t,T((r+1)*8388607.5,0,0xffffff),i):"signed"===e?this.writeOutputValue=(e,t,r)=>{var a;return a=T(Math.round(8388607*r),-8388608,8388607),void((a=T(a,-8388608,8388607))<0&&(a=a+0x1000000&0xffffff),_(e,t,a,i))}:t(!1);break;case 4:"unsigned"===e?this.writeOutputValue=(e,t,r)=>e.setUint32(t,T((r+1)*2147483647.5,0,0xffffffff),i):"signed"===e?this.writeOutputValue=(e,t,r)=>e.setInt32(t,T(Math.round(0x7fffffff*r),-0x80000000,0x7fffffff),i):"float"===e?this.writeOutputValue=(e,t,r)=>e.setFloat32(t,r,i):t(!1);break;case 8:"float"===e?this.writeOutputValue=(e,t,r)=>e.setFloat64(t,r,i):t(!1);break;default:C(r),t(!1)}}async flushAndClose(e){e||this.checkForEncoderError(),this.customEncoder?(e||this.customEncoderCallSerializer.call(()=>this.customEncoder.flush()),await this.customEncoderCallSerializer.call(()=>this.customEncoder.close())):this.encoder&&(e||await this.encoder.flush(),"closed"!==this.encoder.state&&this.encoder.close()),e||this.checkForEncoderError()}getQueueSize(){return this.customEncoder?this.customEncoderQueueSize:this.isPcmEncoder?0:this.encoder?.encodeQueueSize??0}checkForEncoderError(){if(this.error)throw this.errorNeedsNewStack&&(this.error.stack=Error().stack),this.error}}class i3 extends i2{constructor(e){(e=>{if(!e||"object"!=typeof e)throw TypeError("Encoding config must be an object.");if(!q.includes(e.codec))throw TypeError(`Invalid audio codec '${e.codec}'. Must be one of: ${q.join(", ")}.`);if(void 0===e.bitrate&&(!H.includes(e.codec)||"flac"===e.codec))throw TypeError("config.bitrate must be provided for compressed audio codecs.");if(void 0!==e.bitrate&&!(e.bitrate instanceof ek)&&(!Number.isInteger(e.bitrate)||e.bitrate<=0))throw TypeError("config.bitrate, when provided, must be a positive integer or a quality.");if(void 0!==e.onEncodedPacket&&"function"!=typeof e.onEncodedPacket)throw TypeError("config.onEncodedChunk, when provided, must be a function.");if(void 0!==e.onEncoderConfig&&"function"!=typeof e.onEncoderConfig)throw TypeError("config.onEncoderConfig, when provided, must be a function.");ew(e.codec,e)})(e),super(e.codec),this._encoder=new i4(this,e)}add(e){if(!(e instanceof tl))throw TypeError("audioSample must be an AudioSample.");return this._encoder.add(e,!1)}_flushAndClose(e){return this._encoder.flushAndClose(e)}}class i6 extends iX{constructor(e){if(super(),this._connectedTrack=null,!G.includes(e))throw TypeError(`Invalid subtitle codec '${e}'. Must be one of: ${G.join(", ")}.`);this._codec=e}}var i8=e.i(347540),i5=e.i(149579),i7=e.i(706381),i9=e.i(222260);let ae=["video","audio","subtitle"],at=e=>{let t;if(!e||"object"!=typeof e)throw TypeError("metadata must be an object.");if(void 0!==e.languageCode&&(t=e.languageCode,!I.test(t)))throw TypeError("metadata.languageCode, when provided, must be a three-letter, ISO 639-2/T language code.");if(void 0!==e.name&&"string"!=typeof e.name)throw TypeError("metadata.name, when provided, must be a string.");if(void 0!==e.disposition&&(e=>{if(!e||"object"!=typeof e)throw TypeError("disposition must be an object.");if(void 0!==e.default&&"boolean"!=typeof e.default)throw TypeError("disposition.default must be a boolean.");if(void 0!==e.forced&&"boolean"!=typeof e.forced)throw TypeError("disposition.forced must be a boolean.");if(void 0!==e.original&&"boolean"!=typeof e.original)throw TypeError("disposition.original must be a boolean.");if(void 0!==e.commentary&&"boolean"!=typeof e.commentary)throw TypeError("disposition.commentary must be a boolean.");if(void 0!==e.hearingImpaired&&"boolean"!=typeof e.hearingImpaired)throw TypeError("disposition.hearingImpaired must be a boolean.");if(void 0!==e.visuallyImpaired&&"boolean"!=typeof e.visuallyImpaired)throw TypeError("disposition.visuallyImpaired must be a boolean.")})(e.disposition),void 0!==e.maximumPacketCount&&(!Number.isInteger(e.maximumPacketCount)||e.maximumPacketCount<0))throw TypeError("metadata.maximumPacketCount, when provided, must be a non-negative integer.")};class ar{constructor(e){if(this.state="pending",this._tracks=[],this._startPromise=null,this._cancelPromise=null,this._finalizePromise=null,this._mutex=new w,this._metadataTags={},!e||"object"!=typeof e)throw TypeError("options must be an object.");if(!(e.format instanceof iV))throw TypeError("options.format must be an OutputFormat.");if(!(e.target instanceof iO))throw TypeError("options.target must be a Target.");if(e.target._output)throw Error("Target is already used for another output.");e.target._output=this,this.format=e.format,this.target=e.target,this._writer=e.target._createWriter(),this._muxer=e.format._createMuxer(this)}addVideoTrack(e,t={}){if(!(e instanceof iJ))throw TypeError("source must be a VideoSource.");if(at(t),void 0!==t.rotation&&![0,90,180,270].includes(t.rotation))throw TypeError(`Invalid video rotation: ${t.rotation}. Has to be 0, 90, 180 or 270.`);if(!this.format.supportsVideoRotationMetadata&&t.rotation)throw Error(`${this.format._name} does not support video rotation metadata.`);if(void 0!==t.frameRate&&(!Number.isFinite(t.frameRate)||t.frameRate<=0))throw TypeError(`Invalid video frame rate: ${t.frameRate}. Must be a positive number.`);this._addTrack("video",e,t)}addAudioTrack(e,t={}){if(!(e instanceof i2))throw TypeError("source must be an AudioSource.");at(t),this._addTrack("audio",e,t)}addSubtitleTrack(e,t={}){if(!(e instanceof i6))throw TypeError("source must be a SubtitleSource.");at(t),this._addTrack("subtitle",e,t)}setMetadataTags(e){if(!e||"object"!=typeof e)throw TypeError("tags must be an object.");if(void 0!==e.title&&"string"!=typeof e.title)throw TypeError("tags.title, when provided, must be a string.");if(void 0!==e.description&&"string"!=typeof e.description)throw TypeError("tags.description, when provided, must be a string.");if(void 0!==e.artist&&"string"!=typeof e.artist)throw TypeError("tags.artist, when provided, must be a string.");if(void 0!==e.album&&"string"!=typeof e.album)throw TypeError("tags.album, when provided, must be a string.");if(void 0!==e.albumArtist&&"string"!=typeof e.albumArtist)throw TypeError("tags.albumArtist, when provided, must be a string.");if(void 0!==e.trackNumber&&(!Number.isInteger(e.trackNumber)||e.trackNumber<=0))throw TypeError("tags.trackNumber, when provided, must be a positive integer.");if(void 0!==e.tracksTotal&&(!Number.isInteger(e.tracksTotal)||e.tracksTotal<=0))throw TypeError("tags.tracksTotal, when provided, must be a positive integer.");if(void 0!==e.discNumber&&(!Number.isInteger(e.discNumber)||e.discNumber<=0))throw TypeError("tags.discNumber, when provided, must be a positive integer.");if(void 0!==e.discsTotal&&(!Number.isInteger(e.discsTotal)||e.discsTotal<=0))throw TypeError("tags.discsTotal, when provided, must be a positive integer.");if(void 0!==e.genre&&"string"!=typeof e.genre)throw TypeError("tags.genre, when provided, must be a string.");if(void 0!==e.date&&(!(e.date instanceof Date)||Number.isNaN(e.date.getTime())))throw TypeError("tags.date, when provided, must be a valid Date.");if(void 0!==e.lyrics&&"string"!=typeof e.lyrics)throw TypeError("tags.lyrics, when provided, must be a string.");if(void 0!==e.images){if(!Array.isArray(e.images))throw TypeError("tags.images, when provided, must be an array.");for(let t of e.images){if(!t||"object"!=typeof t)throw TypeError("Each image in tags.images must be an object.");if(!(t.data instanceof Uint8Array))throw TypeError("Each image.data must be a Uint8Array.");if("string"!=typeof t.mimeType)throw TypeError("Each image.mimeType must be a string.");if(!["coverFront","coverBack","unknown"].includes(t.kind))throw TypeError("Each image.kind must be 'coverFront', 'coverBack', or 'unknown'.")}}if(void 0!==e.comment&&"string"!=typeof e.comment)throw TypeError("tags.comment, when provided, must be a string.");if(void 0!==e.raw){if(!e.raw||"object"!=typeof e.raw)throw TypeError("tags.raw, when provided, must be an object.");for(let t of Object.values(e.raw))if(null!==t&&"string"!=typeof t&&!(t instanceof Uint8Array)&&!(t instanceof tk)&&!(t instanceof tC))throw TypeError("Each value in tags.raw must be a string, Uint8Array, RichImageData, AttachedFile, or null.")}if("pending"!==this.state)throw Error("Cannot set metadata tags after output has been started or canceled.");this._metadataTags=e}_addTrack(e,t,r){if("pending"!==this.state)throw Error("Cannot add track after output has been started or canceled.");if(t._connectedTrack)throw Error("Source is already used for a track.");let i=this.format.getSupportedTrackCounts(),a=this._tracks.reduce((t,r)=>t+ +(r.type===e),0),n=i[e].max;if(a===n)throw Error(0===n?`${this.format._name} does not support ${e} tracks.`:`${this.format._name} does not support more than ${n} ${e} track${1===n?"":"s"}.`);let o=i.total.max;if(this._tracks.length===o)throw Error(`${this.format._name} does not support more than ${o} tracks${1===o?"":"s"} in total.`);let s={id:this._tracks.length+1,output:this,type:e,source:t,metadata:r};if("video"===s.type){let e=this.format.getSupportedVideoCodecs();if(0===e.length)throw Error(`${this.format._name} does not support video tracks.`+this.format._codecUnsupportedHint(s.source._codec));if(!e.includes(s.source._codec))throw Error(`Codec '${s.source._codec}' cannot be contained within ${this.format._name}. Supported video codecs are: ${e.map(e=>`'${e}'`).join(", ")}.`+this.format._codecUnsupportedHint(s.source._codec))}else if("audio"===s.type){let e=this.format.getSupportedAudioCodecs();if(0===e.length)throw Error(`${this.format._name} does not support audio tracks.`+this.format._codecUnsupportedHint(s.source._codec));if(!e.includes(s.source._codec))throw Error(`Codec '${s.source._codec}' cannot be contained within ${this.format._name}. Supported audio codecs are: ${e.map(e=>`'${e}'`).join(", ")}.`+this.format._codecUnsupportedHint(s.source._codec))}else if("subtitle"===s.type){let e=this.format.getSupportedSubtitleCodecs();if(0===e.length)throw Error(`${this.format._name} does not support subtitle tracks.`+this.format._codecUnsupportedHint(s.source._codec));if(!e.includes(s.source._codec))throw Error(`Codec '${s.source._codec}' cannot be contained within ${this.format._name}. Supported subtitle codecs are: ${e.map(e=>`'${e}'`).join(", ")}.`+this.format._codecUnsupportedHint(s.source._codec))}this._tracks.push(s),t._connectedTrack=s}async start(){let e=this.format.getSupportedTrackCounts();for(let t of ae){let r=this._tracks.reduce((e,r)=>e+ +(r.type===t),0),i=e[t].min;if(r<i)throw Error(i===e[t].max?`${this.format._name} requires exactly ${i} ${t} track${1===i?"":"s"}.`:`${this.format._name} requires at least ${i} ${t} track${1===i?"":"s"}.`)}let t=e.total.min;if(this._tracks.length<t)throw Error(t===e.total.max?`${this.format._name} requires exactly ${t} track${1===t?"":"s"}.`:`${this.format._name} requires at least ${t} track${1===t?"":"s"}.`);if("canceled"===this.state)throw Error("Output has been canceled.");return this._startPromise?(console.warn("Output has already been started."),this._startPromise):this._startPromise=(async()=>{this.state="started",this._writer.start();let e=await this._mutex.acquire();await this._muxer.start();let t=this._tracks.map(e=>e.source._start());await Promise.all(t),e()})()}getMimeType(){return this._muxer.getMimeType()}async cancel(){return this._cancelPromise?(console.warn("Output has already been canceled."),this._cancelPromise):"finalizing"===this.state||"finalized"===this.state?void console.warn("Output has already been finalized."):this._cancelPromise=(async()=>{this.state="canceled";let e=await this._mutex.acquire(),t=this._tracks.map(e=>e.source._flushOrWaitForOngoingClose(!0));await Promise.all(t),await this._writer.close(),e()})()}async finalize(){if("pending"===this.state)throw Error("Cannot finalize before starting.");if("canceled"===this.state)throw Error("Cannot finalize after canceling.");return this._finalizePromise?(console.warn("Output has already been finalized."),this._finalizePromise):this._finalizePromise=(async()=>{this.state="finalizing";let e=await this._mutex.acquire(),t=this._tracks.map(e=>e.source._flushOrWaitForOngoingClose(!1));await Promise.all(t),await this._muxer.finalize(),await this._writer.flush(),await this._writer.finalize(),this.state="finalized",e()})()}}var ai=Symbol.dispose||Symbol.for("Symbol.dispose"),aa=Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose"),an=(e,t,r)=>{if(null!=t){var i;if("object"!=typeof t&&"function"!=typeof t)throw TypeError('Object expected to be assigned to "using" declaration');if(r&&(i=t[aa]),void 0===i&&(i=t[ai]),"function"!=typeof i)throw TypeError("Object not disposable");e.push([r,i,t])}else r&&e.push([r]);return t},ao=(e,t,r)=>{var i="function"==typeof SuppressedError?SuppressedError:function(e,t,r,i){return(i=Error(r)).name="SuppressedError",i.error=e,i.suppressed=t,i},a=e=>t=r?new i(e,t,"An error was suppressed during disposal"):(r=!0,e),n=i=>{for(;i=e.pop();)try{var o=i[1]&&i[1].call(i[2]);if(i[0])return Promise.resolve(o).then(n,e=>(a(e),n()))}catch(e){a(e)}if(r)throw t};return n()},as=async()=>{if(!("storage"in navigator)||!("getDirectory"in navigator.storage))return!1;try{let e=await navigator.storage.getDirectory(),t=await e.getFileHandle("remotion-probe-web-fs-support",{create:!0});return void 0!==t.createWritable}catch{return!1}},al=e=>{switch(e){case"h264":return"avc";case"h265":return"hevc";case"vp8":return"vp8";case"vp9":return"vp9";case"av1":return"av1";default:throw Error(`Unsupported codec: ${e}`)}},au=e=>{switch(e){case"mp4":return new iW;case"webm":return new iZ;default:throw Error(`Unsupported container: ${e}`)}},ac=e=>{switch(e){case"mp4":return"h264";case"webm":return"vp8";default:throw Error(`Unsupported container: ${e}`)}},ad=e=>{switch(e){case"very-low":return eC;case"low":return eE;case"medium":return e_;case"high":return eT;case"very-high":return eP;default:throw Error(`Unsupported quality: ${e}`)}},ap=e=>{switch(e){case"mp4":return"aac";case"webm":return"opus";default:throw Error(`Unsupported container: ${e}`)}},af=["h264","h265","vp8","vp9","av1"],ah=e=>{let t=au(e).getSupportedVideoCodecs();return af.filter(e=>t.includes(al(e)))},am=["aac","opus"],ag=e=>{let t=au(e).getSupportedAudioCodecs();return am.filter(e=>t.includes(e))},av=e=>e,ay=async e=>{let t=[],{container:r,requestedCodec:i,userSpecifiedAudioCodec:a,bitrate:n}=e,o=i??ap(r),s=ag(r);if(!s.includes(o))return t.push({type:"audio-codec-unsupported",message:`Audio codec "${o}" is not supported for container "${r}". Supported: ${s.join(", ")}`,severity:"error"}),{codec:null,issues:t};let l=av(o);if(await eA(l,{bitrate:n}))return{codec:o,issues:t};if(a)return t.push({type:"audio-codec-unsupported",message:`Audio codec "${o}" cannot be encoded by this browser. This is common for AAC on Firefox. Try using "opus" instead.`,severity:"error"}),{codec:null,issues:t};for(let e of s)if(e!==o){let r=av(e);if(await eA(r,{bitrate:n}))return t.push({type:"audio-codec-unsupported",message:`Falling back from audio codec "${o}" to "${e}" because the original codec cannot be encoded by this browser.`,severity:"warning"}),{codec:e,issues:t}}return t.push({type:"audio-codec-unsupported",message:`No audio codec can be encoded by this browser for container "${r}".`,severity:"error"}),{codec:null,issues:t}},ab=async e=>{let t,r=[];"u"<typeof VideoEncoder&&r.push({type:"webcodecs-unavailable",message:"WebCodecs API is not available in this browser. A modern browser with WebCodecs support is required.",severity:"error"});let i=e.container??"mp4",a=e.videoCodec??ac(i),n=e.transparent??!1,o=e.muted??!1,{width:s,height:l}=e,u="number"==typeof e.videoBitrate?e.videoBitrate:ad(e.videoBitrate??"medium"),c="number"==typeof e.audioBitrate?e.audioBitrate:ad(e.audioBitrate??"medium");au(i).getSupportedCodecs().includes(al(a))||r.push({type:"container-codec-mismatch",message:`Codec ${a} is not supported for container ${i}`,severity:"error"});let d=(e=>{let{width:t,height:r,codec:i}=e;return("h264"===i||"h265"===i)&&(t%2!=0||r%2!=0)?{type:"invalid-dimensions",message:`${i.toUpperCase()} codec requires width and height to be multiples of 2. Got ${t}x${r}`,severity:"error"}:null})({width:s,height:l,codec:a});d&&r.push(d),await eI(al(a),{bitrate:u})||r.push({type:"video-codec-unsupported",message:`Video codec "${a}" cannot be encoded by this browser`,severity:"error"}),n&&!["vp8","vp9"].includes(a)&&r.push({type:"transparent-video-unsupported",message:`Transparent video requires VP8 or VP9 codec with WebM container. ${a} does not support alpha channel.`,severity:"error"});let p=null;if(!o){let t=await ay({container:i,requestedCodec:e.audioCodec,userSpecifiedAudioCodec:void 0!==e.audioCodec&&null!==e.audioCodec,bitrate:c});p=t.codec,r.push(...t.issues)}let f=(()=>{try{let e=new OffscreenCanvas(1,1);if(!(e.getContext("webgl2")||e.getContext("webgl")))return{type:"webgl-unsupported",message:"WebGL is not supported. 3D CSS transforms will fail.",severity:"error"};return null}catch{return{type:"webgl-unsupported",message:"WebGL is not supported. 3D CSS transforms will fail.",severity:"error"}}})();f&&r.push(f);let h=await as();return"web-fs"===e.outputTarget?(h||r.push({type:"output-target-unsupported",message:'The "web-fs" output target is not supported in this browser. The File System Access API is required.',severity:"error"}),t="web-fs"):t="arraybuffer"===e.outputTarget?"arraybuffer":h?"web-fs":"arraybuffer",{canRender:0===r.filter(e=>"error"===e.severity).length,issues:r,resolvedVideoCodec:a,resolvedAudioCodec:p,resolvedOutputTarget:t}},ax=async(e,t)=>{let r=ah(e),i=r.map(al),a=t?.videoBitrate?"number"==typeof t.videoBitrate?t.videoBitrate:ad(t.videoBitrate):void 0,n=await eO(i,{bitrate:a});return r.filter(e=>n.includes(al(e)))},aw=async(e,t)=>{let r=ag(e),i=t?.audioBitrate?"number"==typeof t.audioBitrate?t.audioBitrate:ad(t.audioBitrate):void 0,a=await eM(r,{bitrate:i});return r.filter(e=>a.includes(e))},aS=async(e,t)=>{let r=new e9(e);try{await t.add(r)}finally{r.close(),e.close()}},ak=async(e,t)=>{let r=new tl(e);try{await t.add(r)}finally{r.close()}},aC=async({assets:e,frameBuffer:t})=>{let r=e.filter(e=>"artifact"===e.type),i=null,a=[];for(let e of r){if("binary"===e.contentType||"text"===e.contentType){a.push({frame:e.frame,content:e.content,filename:e.filename,downloadBehavior:e.downloadBehavior});continue}if("thumbnail"===e.contentType){if(null===t)continue;let r=t instanceof Blob?await t.arrayBuffer():new Uint8Array(await (await t.convertToBlob({type:"image/png"})).arrayBuffer());i=new Uint8Array(r),a.push({frame:e.frame,content:i,filename:e.filename,downloadBehavior:e.downloadBehavior});continue}throw Error("Unknown artifact type: "+e)}return a.filter(iQ.NoReactInternals.truthy)},aE=()=>{let e=[];return{handle:async({imageData:t,frame:r,assets:i,onArtifact:a})=>{for(let n of(await aC({assets:i,frameBuffer:t}))){let t=e.find(e=>e.filename===n.filename);if(t)throw Error(`An artifact with output "${n.filename}" was already registered at frame ${t.frame}, but now registered again at frame ${r}. Artifacts must have unique names. https://remotion.dev/docs/artifacts`);a(n),e.push({frame:r,filename:n.filename})}}}},a_=({assets:e,fps:t,timestamp:r})=>{let i=e.filter(e=>"inline-audio"===e.type);if(0===i.length)return null;let a=Math.round(96e3/t);for(let e of i)if(1!==e.toneFrequency)throw Error("Setting the toneFrequency is not supported yet in web rendering.");return new AudioData({data:function(e,t){if(1===e.length&&e[0].length===t)return e[0];let r=new Int16Array(t);if(1===e.length)return r.set(e[0].subarray(0,t)),r;for(let i=0;i<t;i++){let t=e.reduce((e,t)=>e+(t[i]??0),0);r[i]=Math.max(-32768,Math.min(32767,t))}return r}(i.map(e=>e.audio),a),format:"s16",numberOfChannels:2,numberOfFrames:a/2,sampleRate:48e3,timestamp:r})},aT=`
let intervalId = null;
self.onmessage = (e) => {
	if (e.data.type === 'start') {
		if (intervalId !== null) {
			clearInterval(intervalId);
		}
		intervalId = setInterval(() => self.postMessage('tick'), e.data.intervalMs);
	} else if (e.data.type === 'stop') {
		if (intervalId !== null) {
			clearInterval(intervalId);
			intervalId = null;
		}
	}
};
`,aP=({children:e,audioEnabled:t,videoEnabled:r,logLevel:i,compId:a,initialFrame:n,timeUpdater:o})=>{let[s,l]=(0,i8.useState)(n);return(0,i8.useImperativeHandle)(o,()=>({update:e=>{(0,i5.flushSync)(()=>{l(e)})}})),(0,i9.jsx)(iK.Internals.RemotionRootContexts,{audioEnabled:t,videoEnabled:r,logLevel:i,numberOfAudioTags:0,audioLatencyHint:"interactive",frameState:{[a]:s},children:e})};function aI(e){if(e.error)throw e.error}function aA({width:e,height:t,delayRenderTimeoutInMilliseconds:r,logLevel:i,resolvedProps:a,id:n,mediaCacheSizeInBytes:o,durationInFrames:s,fps:l,initialFrame:u,schema:c,Component:d,audioEnabled:p,videoEnabled:f,defaultCodec:h,defaultOutName:m}){if(!i7.default.createRoot)throw Error("@remotion/web-renderer requires React 18 or higher");let g=document.createElement("div");g.style.position="fixed",g.style.display="flex",g.style.flexDirection="column",g.style.backgroundColor="transparent",g.style.width=`${e}px`,g.style.height=`${t}px`,g.style.zIndex="-9999",g.style.top="0",g.style.left="0",g.style.right="0",g.style.bottom="0",g.style.visibility="hidden",g.style.pointerEvents="none";let v=`remotion-scaffold-${Math.random().toString(36).substring(2,15)}`;g.className=v;let y=iK.Internals.CSSUtils.injectCSS(iK.Internals.CSSUtils.makeDefaultPreviewCSS(`.${v}`,"white"));document.body.appendChild(g);let b={error:null},x=i7.default.createRoot(g,{onUncaughtError:e=>{b.error=e instanceof Error?e:Error(String(e))}}),w={remotion_renderReady:!0,remotion_delayRenderTimeouts:{},remotion_puppeteerTimeout:r,remotion_attempt:0,remotion_delayRenderHandles:[]},S=(0,i8.createRef)(),k=(0,i8.createRef)();return(0,i5.flushSync)(()=>{x.render((0,i9.jsx)(iK.Internals.MaxMediaCacheSizeContext.Provider,{value:o,children:(0,i9.jsx)(iK.Internals.RemotionEnvironmentContext.Provider,{value:{isStudio:!1,isRendering:!0,isPlayer:!1,isReadOnlyStudio:!1,isClientSideRendering:!0},children:(0,i9.jsx)(iK.Internals.DelayRenderContextType.Provider,{value:w,children:(0,i9.jsx)(iK.Internals.CompositionManager.Provider,{value:{compositions:[{id:n,component:d,nonce:0,defaultProps:{},folderName:null,parentFolderName:null,schema:c??null,calculateMetadata:null,durationInFrames:s,fps:l,height:t,width:e}],canvasContent:{type:"composition",compositionId:n},currentCompositionMetadata:{props:a,durationInFrames:s,fps:l,height:t,width:e,defaultCodec:h??null,defaultOutName:m??null,defaultVideoImageFormat:null,defaultPixelFormat:null,defaultProResProfile:null},folders:[]},children:(0,i9.jsx)(iK.Internals.RenderAssetManagerProvider,{collectAssets:k,children:(0,i9.jsx)(aP,{audioEnabled:p,videoEnabled:f,logLevel:i,compId:n,initialFrame:u,timeUpdater:S,children:(0,i9.jsx)(iK.Internals.CanUseRemotionHooks.Provider,{value:!0,children:(0,i9.jsx)(d,{...a})})})})})})})}))}),{delayRenderScope:w,div:g,errorHolder:b,[Symbol.dispose]:()=>{x.unmount(),g.remove(),y()},timeUpdater:S,collectAssets:k}}var aO=()=>{let e=0,t=0,r=0,i=0,a=0,n=0,o={current:null};return{getDrawn3dPixels:()=>e,getPrecomposedTiles:()=>t,addPrecompose:({canvasWidth:r,canvasHeight:i})=>{e+=r*i,t++},helperCanvasState:o,[Symbol.dispose]:()=>{o.current&&o.current.cleanup()},getWaitForReadyTime:()=>r,addWaitForReadyTime:e=>{r+=e},getAddSampleTime:()=>i,addAddSampleTime:e=>{i+=e},getCreateFrameTime:()=>a,addCreateFrameTime:e=>{a+=e},getAudioMixingTime:()=>n,addAudioMixingTime:e=>{n+=e}}},aM={ref:Promise.resolve()},aF=async({licenseKey:e,succeeded:t,apiName:r,isStill:i,isProduction:a})=>{},aR=({containerSize:e,intrinsicSize:t})=>{let r,i,a=e.width/e.height,n=t.width/t.height;n>a?(r=e.width,i=e.width/n):(i=e.height,r=e.height*n);let o=e.left+(e.width-r)/2,s=e.top+(e.height-i)/2;return{sourceX:0,sourceY:0,sourceWidth:t.width,sourceHeight:t.height,destX:o,destY:s,destWidth:r,destHeight:i}},aD=({containerSize:e,intrinsicSize:t})=>{let r=e.left+(e.width-t.width)/2,i=e.top+(e.height-t.height)/2,a=0,n=0,o=t.width,s=t.height,l=r,u=i,c=t.width,d=t.height;if(l<e.left){let t=e.left-l;a=t,o-=t,l=e.left,c-=t}if(u<e.top){let t=e.top-u;n=t,s-=t,u=e.top,d-=t}let p=e.left+e.width;if(l+c>p){let e=l+c-p;o-=e,c-=e}let f=e.top+e.height;if(u+d>f){let e=u+d-f;s-=e,d-=e}return{sourceX:a,sourceY:n,sourceWidth:o,sourceHeight:s,destX:l,destY:u,destWidth:c,destHeight:d}},aj=e=>"none"!==e.transform&&""!==e.transform,aL=e=>aj(e)||"none"!==e.rotate&&""!==e.rotate||"none"!==e.scale&&""!==e.scale,aB=e=>{try{let t=iQ.NoReactInternals.processColor(e);return null!=t}catch{return!1}},aN=e=>{if(!e||"none"===e)return null;let t=(e=>{let t="linear-gradient(",r=e.toLowerCase().indexOf(t);if(-1===r)return null;let i=0,a=r+t.length;for(let t=a;t<e.length;t++){let r=e[t];if("("===r)i++;else if(")"===r){if(0===i)return e.substring(a,t).trim();i--}}return null})(e);if(!t)return null;let r=t.split(/,(?![^(]*\))/),i=180,a=0;if(r.length>0){let e=r[0].trim();(e.startsWith("to ")||/^-?\d+\.?\d*(deg|rad|grad|turn)$/.test(e))&&(i=(e=>{let t=e.trim().toLowerCase();if(t.startsWith("to "))switch(t.substring(3).trim()){case"top":return 0;case"right":return 90;case"bottom":default:return 180;case"left":return 270;case"top right":case"right top":return 45;case"bottom right":case"right bottom":return 135;case"bottom left":case"left bottom":return 225;case"top left":case"left top":return 315}let r=t.match(/^(-?\d+\.?\d*)(deg|rad|grad|turn)$/);if(r){let e=parseFloat(r[1]);switch(r[2]){case"deg":default:return e;case"rad":return 180*e/Math.PI;case"grad":return 360*e/400;case"turn":return 360*e}}return 180})(e),a=1)}let n=(e=>{let t=e.split(/,(?![^(]*\))/),r=[];for(let e of t){let t=e.trim();if(!t)continue;let i=t.match(/(rgba?\([^)]+\)|hsla?\([^)]+\)|#[0-9a-f]{3,8}|[a-z]+)/i);if(!i)continue;let a=i[0];if(!aB(a))continue;let n=t.substring(i.index+a.length).trim(),o=null;if(n){let e=n.match(/(-?\d+\.?\d*)(%|px)?/);if(e){let t=parseFloat(e[1]),r=e[2];o="%"===r?t/100:"px"===r?null:t/100}}r.push({color:a,position:null!==o?o:-1})}if(0===r.length)return null;let i=-1,a=0;for(let e=0;e<r.length;e++)if(-1!==r[e].position){if(i>=0){let t=e-i-1;if(t>0){let n=(r[e].position-a)/(t+1);for(let t=i+1;t<e;t++)r[t].position=a+n*(t-i)}}else{let t=e;if(t>0){let i=r[e].position/(t+1);for(let t=0;t<e;t++)r[t].position=i*(t+1)}}i=e,a=r[e].position}if(r.every(e=>-1===e.position))if(1===r.length)r[0].position=.5;else for(let e=0;e<r.length;e++)r[e].position=e/(r.length-1);else if(i<r.length-1){let e=(1-a)/(r.length-1-i+1);for(let t=i+1;t<r.length;t++)r[t].position=a+e*(t-i)}for(let e of r)e.position=Math.max(0,Math.min(1,e.position));return r})(r.slice(a).join(","));return n&&0!==n.length?{angle:i,colorStops:n}:null},a$=({ctx:e,rect:t,gradientInfo:r,offsetLeft:i,offsetTop:a})=>{let n=(r.angle-90)*Math.PI/180,o=t.left-i+t.width/2,s=t.top-a+t.height/2,l=Math.cos(n),u=Math.sin(n),c=t.width/2,d=t.height/2,p=Math.abs(l)*c+Math.abs(u)*d;Number.isFinite(p)&&0!==p||(p=Math.sqrt(c**2+d**2));let f=o-l*p,h=s-u*p,m=o+l*p,g=s+u*p,v=e.createLinearGradient(f,h,m,g);for(let e of r.colorStops)v.addColorStop(e.position,e.color);return v},az=e=>{let{maskImage:t,webkitMaskImage:r}=e,i=t||r;return i&&"none"!==i?i:null},aU=e=>aN(e),aV=e=>{let t=e.boundingClientRect.width/2,r=e.boundingClientRect.height/2;return(e=>{if(""===e.trim())return null;let[t,r]=e.split(" ");return{x:parseFloat(t),y:parseFloat(r)}})(e.transformOrigin)??{x:t,y:r}},aH=({transform:e})=>{let{x:t,y:r}=aV(e);return{x:t+e.boundingClientRect.left,y:r+e.boundingClientRect.top}},aW=e=>{let t=Math.floor(e.left),r=Math.floor(e.top);return new DOMRect(t,r,Math.ceil(e.right)-t,Math.ceil(e.bottom)-r)},aq=({ctx:e,x:t,y:r,width:i,height:a,borderRadius:n})=>{e.beginPath(),e.moveTo(t+n.topLeft.horizontal,r),e.lineTo(t+i-n.topRight.horizontal,r),(n.topRight.horizontal>0||n.topRight.vertical>0)&&e.ellipse(t+i-n.topRight.horizontal,r+n.topRight.vertical,n.topRight.horizontal,n.topRight.vertical,0,-Math.PI/2,0),e.lineTo(t+i,r+a-n.bottomRight.vertical),(n.bottomRight.horizontal>0||n.bottomRight.vertical>0)&&e.ellipse(t+i-n.bottomRight.horizontal,r+a-n.bottomRight.vertical,n.bottomRight.horizontal,n.bottomRight.vertical,0,0,Math.PI/2),e.lineTo(t+n.bottomLeft.horizontal,r+a),(n.bottomLeft.horizontal>0||n.bottomLeft.vertical>0)&&e.ellipse(t+n.bottomLeft.horizontal,r+a-n.bottomLeft.vertical,n.bottomLeft.horizontal,n.bottomLeft.vertical,0,Math.PI/2,Math.PI),e.lineTo(t,r+n.topLeft.vertical),(n.topLeft.horizontal>0||n.topLeft.vertical>0)&&e.ellipse(t+n.topLeft.horizontal,r+n.topLeft.vertical,n.topLeft.horizontal,n.topLeft.vertical,0,Math.PI,3*Math.PI/2),e.closePath()},aG=(e,t)=>{let r=parseFloat(t.borderLeftWidth),i=parseFloat(t.borderRightWidth),a=parseFloat(t.borderTopWidth),n=parseFloat(t.borderBottomWidth);return new DOMRect(e.left+r,e.top+a,e.width-r-i,e.height-a-n)},aZ=(e,t,r)=>{if(!r||r.includes("text"))return e;if(r.includes("padding-box"))return aG(e,t);if(r.includes("content-box")){let r,i,a,n,o;return r=aG(e,t),i=parseFloat(t.paddingLeft),a=parseFloat(t.paddingRight),n=parseFloat(t.paddingTop),o=parseFloat(t.paddingBottom),new DOMRect(r.left+i,r.top+n,r.width-i-a,r.height-n-o)}return e};function aK({value:e,reference:t}){return(e=e.trim()).endsWith("%")?parseFloat(e)/100*t:(e.endsWith("px"),parseFloat(e))}function aQ(e){return 1===e.length?[e[0],e[0],e[0],e[0]]:2===e.length?[e[0],e[1],e[0],e[1]]:3===e.length?[e[0],e[1],e[2],e[1]]:[e[0],e[1],e[2],e[3]]}function aX({ctx:e,rect:t,borderRadius:r,forceClipEvenWhenZero:i=!1,computedStyle:a,backgroundClip:n}){if(0===r.topLeft.horizontal&&0===r.topLeft.vertical&&0===r.topRight.horizontal&&0===r.topRight.vertical&&0===r.bottomRight.horizontal&&0===r.bottomRight.vertical&&0===r.bottomLeft.horizontal&&0===r.bottomLeft.vertical&&!i)return()=>{};e.save();let o=aZ(t,a,n),s={topLeft:{horizontal:Math.max(0,r.topLeft.horizontal-(o.left-t.left)),vertical:Math.max(0,r.topLeft.vertical-(o.top-t.top))},topRight:{horizontal:Math.max(0,r.topRight.horizontal-(t.right-o.right)),vertical:Math.max(0,r.topRight.vertical-(o.top-t.top))},bottomRight:{horizontal:Math.max(0,r.bottomRight.horizontal-(t.right-o.right)),vertical:Math.max(0,r.bottomRight.vertical-(t.bottom-o.bottom))},bottomLeft:{horizontal:Math.max(0,r.bottomLeft.horizontal-(o.left-t.left)),vertical:Math.max(0,r.bottomLeft.vertical-(t.bottom-o.bottom))}};return aq({ctx:e,x:o.left,y:o.top,width:o.width,height:o.height,borderRadius:s}),e.clip(),()=>{e.restore()}}var aJ=async({backgroundImage:e,context:t,rect:r,backgroundColor:i,backgroundClip:a,element:n,logLevel:o,internalState:s,computedStyle:l,offsetLeft:u,offsetTop:c,scale:d})=>{let p=[];try{let f=t,h=t.globalCompositeOperation,m=0,g=0;an(p,{[Symbol.dispose]:()=>{t.globalCompositeOperation=h,t!==f&&t.drawImage(f.canvas,m,g,f.canvas.width/d,f.canvas.height/d)}},0);let v=aZ(r,l,a);if(a.includes("text")){m=v.left,g=v.top;let e=n.style.backgroundClip,t=n.style.webkitBackgroundClip;n.style.backgroundClip="initial",n.style.webkitBackgroundClip="initial";let r=await no({element:n,cutout:new DOMRect(v.left+u,v.top+c,v.width,v.height),logLevel:o,internalState:s,scale:d,onlyBackgroundClipText:!0});r.setTransform(new DOMMatrix().scale(d,d)),n.style.backgroundClip=e,n.style.webkitBackgroundClip=t,(f=r).globalCompositeOperation="source-in"}let y=(({backgroundColor:e,backgroundImage:t,contextToDraw:r,boundingRect:i,offsetLeft:a,offsetTop:n})=>{if(t&&"none"!==t){let e=aN(t);if(e)return a$({ctx:r,rect:i,gradientInfo:e,offsetLeft:a,offsetTop:n})}return e&&"transparent"!==e&&!("transparent"===e||e.startsWith("rgba")&&(e.endsWith(", 0)")||e.endsWith(",0")))?e:null})({backgroundImage:e,backgroundColor:i,contextToDraw:f,boundingRect:v,offsetLeft:m,offsetTop:g});if(!y)return;let b=f.fillStyle;f.fillStyle=y,f.fillRect(v.left-m,v.top-g,v.width,v.height),f.fillStyle=b}catch(e){var f=e,h=1}finally{ao(p,f,h)}},aY=(e,t)=>"dashed"===e?[2*t,t]:"dotted"===e?[t,t]:[],a0=({ctx:e,side:t,x:r,y:i,width:a,height:n,borderRadius:o,borderProperties:s})=>{let{width:l,color:u,style:c}=s;if(l<=0||"none"===c||"hidden"===c)return;e.beginPath(),e.strokeStyle=u,e.lineWidth=l,e.setLineDash(aY(c,l));let d=l/2;if("top"===t){let t=r+o.topLeft.horizontal,n=r+a-o.topRight.horizontal;e.moveTo(t,i+d),e.lineTo(n,i+d)}else if("right"===t){let t=i+o.topRight.vertical,s=i+n-o.bottomRight.vertical;e.moveTo(r+a-d,t),e.lineTo(r+a-d,s)}else if("bottom"===t){let t=r+o.bottomLeft.horizontal,s=r+a-o.bottomRight.horizontal;e.moveTo(t,i+n-d),e.lineTo(s,i+n-d)}else if("left"===t){let t=i+o.topLeft.vertical,a=i+n-o.bottomLeft.vertical;e.moveTo(r+d,t),e.lineTo(r+d,a)}e.stroke()},a1=({ctx:e,corner:t,x:r,y:i,width:a,height:n,borderRadius:o,topBorder:s,rightBorder:l,bottomBorder:u,leftBorder:c})=>{let d,p,f,h,m,g,v=o[t];if(v.horizontal<=0&&v.vertical<=0)return;"topLeft"===t?(d=c,p=s,f=r+v.horizontal,h=i+v.vertical,m=Math.PI,g=3*Math.PI/2):"topRight"===t?(d=s,p=l,f=r+a-v.horizontal,h=i+v.vertical,m=-Math.PI/2,g=0):"bottomRight"===t?(d=l,p=u,f=r+a-v.horizontal,h=i+n-v.vertical,m=0,g=Math.PI/2):(d=u,p=c,f=r+v.horizontal,h=i+n-v.vertical,m=Math.PI/2,g=Math.PI);let y=(d.width+p.width)/2,b=d.width>=p.width?d.color:p.color,x=d.width>=p.width?d.style:p.style;if(y>0&&"none"!==x&&"hidden"!==x){e.beginPath(),e.strokeStyle=b,e.lineWidth=y,e.setLineDash(aY(x,y));let t=Math.max(0,v.horizontal-y/2),r=Math.max(0,v.vertical-y/2);e.ellipse(f,h,t,r,0,m,g),e.stroke()}},a2=e=>{if(!e||"none"===e)return[];let t=[];for(let r of e.split(/,(?![^(]*\))/)){let e=r.trim();if(!e||"none"===e)continue;let i={offsetX:0,offsetY:0,blurRadius:0,color:"rgba(0, 0, 0, 0.5)",inset:!1};i.inset=/\binset\b/i.test(e);let a=e.replace(/\binset\b/gi,"").trim(),n=a.match(/(rgba?\([^)]+\)|hsla?\([^)]+\)|#[0-9a-f]{3,8}|[a-z]+)/i);n&&(i.color=n[0],a=a.replace(n[0],"").trim());let o=(a.match(/[+-]?\d*\.?\d+(?:px|em|rem|%)?/gi)||[]).map(e=>parseFloat(e)||0);o.length>=2&&(i.offsetX=o[0],i.offsetY=o[1],o.length>=3&&(i.blurRadius=Math.max(0,o[2]))),t.push(i)}return t},a4=e=>parseFloat(e)||0,a3=e=>parseFloat(e)||0,a6=async({rect:e,computedStyle:t,context:r,draw:i,opacity:a,totalMatrix:n,parentRect:o,logLevel:s,element:l,internalState:u,scale:c})=>{let{backgroundImage:d,backgroundColor:p,backgroundClip:f}=t,h=function({borderRadius:e,width:t,height:r}){let i=e.split("/").map(e=>e.trim()),a=i[0],n=i[1],o=a.split(/\s+/).filter(e=>e),s=n?n.split(/\s+/).filter(e=>e):o,[l,u,c,d]=aQ(o),[p,f,h,m]=aQ(s);return function({borderRadius:e,width:t,height:r}){let i={topLeft:{...e.topLeft},topRight:{...e.topRight},bottomRight:{...e.bottomRight},bottomLeft:{...e.bottomLeft}},a=i.topLeft.horizontal+i.topRight.horizontal;if(a>t){let e=t/a;i.topLeft.horizontal*=e,i.topRight.horizontal*=e}let n=i.topRight.vertical+i.bottomRight.vertical;if(n>r){let e=r/n;i.topRight.vertical*=e,i.bottomRight.vertical*=e}let o=i.bottomRight.horizontal+i.bottomLeft.horizontal;if(o>t){let e=t/o;i.bottomRight.horizontal*=e,i.bottomLeft.horizontal*=e}let s=i.bottomLeft.vertical+i.topLeft.vertical;if(s>r){let e=r/s;i.bottomLeft.vertical*=e,i.topLeft.vertical*=e}return i}({borderRadius:{topLeft:{horizontal:aK({value:l,reference:t}),vertical:aK({value:p,reference:r})},topRight:{horizontal:aK({value:u,reference:t}),vertical:aK({value:f,reference:r})},bottomRight:{horizontal:aK({value:c,reference:t}),vertical:aK({value:h,reference:r})},bottomLeft:{horizontal:aK({value:d,reference:t}),vertical:aK({value:m,reference:r})}},width:t,height:r})}({borderRadius:t.borderRadius,width:e.width,height:e.height}),m=(({ctx:e,transform:t,parentRect:r,scale:i})=>{let a=new DOMMatrix().scale(i,i).translate(-r.x,-r.y).multiply(t).translate(r.x,r.y);return e.setTransform(a),()=>{e.setTransform(new DOMMatrix)}})({ctx:r,transform:n,parentRect:o,scale:c}),g=(({ctx:e,opacity:t})=>{let r=e.globalAlpha;return e.globalAlpha=r*t,()=>{e.globalAlpha=r}})({ctx:r,opacity:a});(({ctx:e,rect:t,borderRadius:r,computedStyle:i,logLevel:a})=>{let n=a2(i.boxShadow);if(0!==n.length)for(let i=n.length-1;i>=0;i--){let o=n[i],s=t.left+Math.min(o.offsetX,0)-o.blurRadius,l=t.right+Math.max(o.offsetX,0)+o.blurRadius,u=t.top+Math.min(o.offsetY,0)-o.blurRadius,c=new DOMRect(s,u,l-s,t.bottom+Math.max(o.offsetY,0)+o.blurRadius-u),d=t.left-s,p=t.top-u,f=new OffscreenCanvas(c.width,c.height),h=f.getContext("2d");if(!h)throw Error("Failed to get context");if(o.inset){iK.Internals.Log.warn({logLevel:a,tag:"@remotion/web-renderer"},'Detected "box-shadow" with "inset". This is not yet supported in @remotion/web-renderer');continue}h.shadowBlur=o.blurRadius,h.shadowColor=o.color,h.shadowOffsetX=o.offsetX,h.shadowOffsetY=o.offsetY,h.fillStyle="black",aq({ctx:h,x:d,y:p,width:t.width,height:t.height,borderRadius:r}),h.fill(),h.shadowColor="transparent",h.globalCompositeOperation="destination-out",aq({ctx:h,x:d,y:p,width:t.width,height:t.height,borderRadius:r}),h.fill(),e.drawImage(f,t.left-d,t.top-p)}})({ctx:r,computedStyle:t,rect:e,borderRadius:h,logLevel:s});let v=aX({ctx:r,rect:e,borderRadius:h,forceClipEvenWhenZero:!1,computedStyle:t,backgroundClip:f});await aJ({backgroundImage:d,context:r,rect:e,backgroundColor:p,backgroundClip:f,element:l,logLevel:s,internalState:u,computedStyle:t,offsetLeft:o.left,offsetTop:o.top,scale:c}),await i({dimensions:e,computedStyle:t,contextToDraw:r}),v(),(({ctx:e,rect:t,borderRadius:r,computedStyle:i})=>{let a,n={top:{width:parseFloat((a=i).borderTopWidth)||0,color:a.borderTopColor||a.borderColor||"black",style:a.borderTopStyle||a.borderStyle||"solid"},right:{width:parseFloat(a.borderRightWidth)||0,color:a.borderRightColor||a.borderColor||"black",style:a.borderRightStyle||a.borderStyle||"solid"},bottom:{width:parseFloat(a.borderBottomWidth)||0,color:a.borderBottomColor||a.borderColor||"black",style:a.borderBottomStyle||a.borderStyle||"solid"},left:{width:parseFloat(a.borderLeftWidth)||0,color:a.borderLeftColor||a.borderColor||"black",style:a.borderLeftStyle||a.borderStyle||"solid"}};if(!(n.top.width>0||n.right.width>0||n.bottom.width>0||n.left.width>0))return;let o=e.strokeStyle,s=e.lineWidth,l=e.getLineDash();n.top.width===n.right.width&&n.top.width===n.bottom.width&&n.top.width===n.left.width&&n.top.color===n.right.color&&n.top.color===n.bottom.color&&n.top.color===n.left.color&&n.top.style===n.right.style&&n.top.style===n.bottom.style&&n.top.style===n.left.style&&n.top.width>0?(({ctx:e,x:t,y:r,width:i,height:a,borderRadius:n,borderWidth:o,borderColor:s,borderStyle:l})=>{e.beginPath(),e.strokeStyle=s,e.lineWidth=o,e.setLineDash(aY(l,o));let u=o/2,c=t+u,d=r+u,p=i-o,f=a-o,h={topLeft:{horizontal:Math.max(0,n.topLeft.horizontal-u),vertical:Math.max(0,n.topLeft.vertical-u)},topRight:{horizontal:Math.max(0,n.topRight.horizontal-u),vertical:Math.max(0,n.topRight.vertical-u)},bottomRight:{horizontal:Math.max(0,n.bottomRight.horizontal-u),vertical:Math.max(0,n.bottomRight.vertical-u)},bottomLeft:{horizontal:Math.max(0,n.bottomLeft.horizontal-u),vertical:Math.max(0,n.bottomLeft.vertical-u)}};e.moveTo(c+h.topLeft.horizontal,d),e.lineTo(c+p-h.topRight.horizontal,d),(h.topRight.horizontal>0||h.topRight.vertical>0)&&e.ellipse(c+p-h.topRight.horizontal,d+h.topRight.vertical,h.topRight.horizontal,h.topRight.vertical,0,-Math.PI/2,0),e.lineTo(c+p,d+f-h.bottomRight.vertical),(h.bottomRight.horizontal>0||h.bottomRight.vertical>0)&&e.ellipse(c+p-h.bottomRight.horizontal,d+f-h.bottomRight.vertical,h.bottomRight.horizontal,h.bottomRight.vertical,0,0,Math.PI/2),e.lineTo(c+h.bottomLeft.horizontal,d+f),(h.bottomLeft.horizontal>0||h.bottomLeft.vertical>0)&&e.ellipse(c+h.bottomLeft.horizontal,d+f-h.bottomLeft.vertical,h.bottomLeft.horizontal,h.bottomLeft.vertical,0,Math.PI/2,Math.PI),e.lineTo(c,d+h.topLeft.vertical),(h.topLeft.horizontal>0||h.topLeft.vertical>0)&&e.ellipse(c+h.topLeft.horizontal,d+h.topLeft.vertical,h.topLeft.horizontal,h.topLeft.vertical,0,Math.PI,3*Math.PI/2),e.closePath(),e.stroke()})({ctx:e,x:t.left,y:t.top,width:t.width,height:t.height,borderRadius:r,borderWidth:n.top.width,borderColor:n.top.color,borderStyle:n.top.style}):(a1({ctx:e,corner:"topLeft",x:t.left,y:t.top,width:t.width,height:t.height,borderRadius:r,topBorder:n.top,rightBorder:n.right,bottomBorder:n.bottom,leftBorder:n.left}),a1({ctx:e,corner:"topRight",x:t.left,y:t.top,width:t.width,height:t.height,borderRadius:r,topBorder:n.top,rightBorder:n.right,bottomBorder:n.bottom,leftBorder:n.left}),a1({ctx:e,corner:"bottomRight",x:t.left,y:t.top,width:t.width,height:t.height,borderRadius:r,topBorder:n.top,rightBorder:n.right,bottomBorder:n.bottom,leftBorder:n.left}),a1({ctx:e,corner:"bottomLeft",x:t.left,y:t.top,width:t.width,height:t.height,borderRadius:r,topBorder:n.top,rightBorder:n.right,bottomBorder:n.bottom,leftBorder:n.left}),a0({ctx:e,side:"top",x:t.left,y:t.top,width:t.width,height:t.height,borderRadius:r,borderProperties:n.top}),a0({ctx:e,side:"right",x:t.left,y:t.top,width:t.width,height:t.height,borderRadius:r,borderProperties:n.right}),a0({ctx:e,side:"bottom",x:t.left,y:t.top,width:t.width,height:t.height,borderRadius:r,borderProperties:n.bottom}),a0({ctx:e,side:"left",x:t.left,y:t.top,width:t.width,height:t.height,borderRadius:r,borderProperties:n.left})),e.strokeStyle=o,e.lineWidth=s,e.setLineDash(l)})({ctx:r,rect:e,borderRadius:h,computedStyle:t}),(({ctx:e,rect:t,borderRadius:r,computedStyle:i})=>{let a=a4(i.outlineWidth),{outlineStyle:n}=i,o=i.outlineColor||"black",s=a3(i.outlineOffset);if(a<=0||"none"===n||"hidden"===n)return;let l=e.strokeStyle,u=e.lineWidth,c=e.getLineDash();e.strokeStyle=o,e.lineWidth=a,e.setLineDash("dashed"===n?[2*a,a]:"dotted"===n?[a,a]:[]);let d=s+a/2;aq({ctx:e,x:t.left-d,y:t.top-d,width:t.width+2*d,height:t.height+2*d,borderRadius:{topLeft:{horizontal:0===r.topLeft.horizontal?0:Math.max(0,r.topLeft.horizontal+d),vertical:0===r.topLeft.vertical?0:Math.max(0,r.topLeft.vertical+d)},topRight:{horizontal:0===r.topRight.horizontal?0:Math.max(0,r.topRight.horizontal+d),vertical:0===r.topRight.vertical?0:Math.max(0,r.topRight.vertical+d)},bottomRight:{horizontal:0===r.bottomRight.horizontal?0:Math.max(0,r.bottomRight.horizontal+d),vertical:0===r.bottomRight.vertical?0:Math.max(0,r.bottomRight.vertical+d)},bottomLeft:{horizontal:0===r.bottomLeft.horizontal?0:Math.max(0,r.bottomLeft.horizontal+d),vertical:0===r.bottomLeft.vertical?0:Math.max(0,r.bottomLeft.vertical+d)}}}),e.stroke(),e.strokeStyle=l,e.lineWidth=u,e.setLineDash(c)})({ctx:r,rect:e,borderRadius:h,computedStyle:t});let y=(({ctx:e,rect:t,borderRadius:r,overflowHidden:i,computedStyle:a,backgroundClip:n})=>i?aX({ctx:e,rect:t,borderRadius:r,forceClipEvenWhenZero:!0,computedStyle:a,backgroundClip:n}):()=>{})({ctx:r,rect:e,borderRadius:h,overflowHidden:"hidden"===t.overflow,computedStyle:t,backgroundClip:f});return m(),{cleanupAfterChildren:()=>{g(),y()}}};function a8(e){if(e.nextSibling())return!0;for(;e.parentNode();)if(e.nextSibling())return!0;return!1}var a5=e=>{let t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT),r=1/0,i=1/0,a=-1/0,n=-1/0;for(;;){let e=getComputedStyle(t.currentNode),o=a4(e.outlineWidth),s=a3(e.outlineOffset),l=t.currentNode.getBoundingClientRect(),u=a2(e.boxShadow),c=0,d=0,p=0,f=0;for(let e of u)e.inset||(c=Math.max(c,Math.abs(Math.min(e.offsetX,0))+e.blurRadius),d=Math.max(d,Math.max(e.offsetX,0)+e.blurRadius),p=Math.max(p,Math.abs(Math.min(e.offsetY,0))+e.blurRadius),f=Math.max(f,Math.max(e.offsetY,0)+e.blurRadius));if(r=Math.min(r,l.left-s-o-c),i=Math.min(i,l.top-s-o-p),a=Math.max(a,l.right+s+o+d),n=Math.max(n,l.bottom+s+o+f),"hidden"===e.overflow&&!a8(t)||!t.nextNode())break}return new DOMRect(r,i,a-r,n-i)},a7=`
    attribute vec2 aPosition;
    attribute vec2 aTexCoord;
    uniform mat4 uTransform;
    uniform vec2 uResolution;
    uniform vec2 uOffset;
    varying vec2 vTexCoord;

    void main() {
        vec4 pos = uTransform * vec4(aPosition, 0.0, 1.0);
        pos.xy = pos.xy + uOffset * pos.w;

        // Convert homogeneous coords to clip space
        gl_Position = vec4(
            (pos.x / uResolution.x) * 2.0 - pos.w,   // x
            pos.w - (pos.y / uResolution.y) * 2.0,   // y (flipped)
            0.0,
            pos.w
        );

        vTexCoord = aTexCoord;
    }
`,a9=`
		precision mediump float;
		uniform sampler2D uTexture;
		varying vec2 vTexCoord;

		void main() {
				gl_FragColor = texture2D(uTexture, vTexCoord);
		}
`;function ne(e,t,r){let i=e.createShader(r);if(!i)throw Error("Could not create shader");if(e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS)){let t=e.getShaderInfoLog(i);throw e.deleteShader(i),Error("Shader compile error: "+t)}return i}var nt=async({element:e,context:t,draw:r,logLevel:i,parentRect:a,internalState:n,rootElement:o,scale:s})=>{let l=[];try{let{opacity:c,computedStyle:d,totalMatrix:p,dimensions:f,precompositing:h}=an(l,(({element:e,rootElement:t})=>{let r=e,i=[],a=[],n=1,o=null,s=null;for(;r;){let l=getComputedStyle(r);if(r===e){o=l,n=parseFloat(l.opacity);let e=az(l);s=e?aU(e):null;let t=r.style.maskImage,i=r.style.webkitMaskImage;r.style.maskImage="none",r.style.webkitMaskImage="none";let u=r;a.push(()=>{u.style.maskImage=t,u.style.webkitMaskImage=i})}if(aL(l)||r===e){let e=new DOMMatrix(aj(l)?l.transform:void 0),{transform:t,scale:n,rotate:o}=r.style,s=[];""!==o&&"none"!==o&&s.push(new DOMMatrix(`rotate(${o})`)),""!==n&&"none"!==n&&s.push(new DOMMatrix(`scale(${n})`)),s.push(e),r.style.transform="none",r.style.scale="none",r.style.rotate="none",i.push({element:r,transformOrigin:l.transformOrigin,boundingClientRect:null,matrices:s});let u=r;a.push(()=>{u.style.transform=t,u.style.scale=n,u.style.rotate=o})}if(r===t)break;r=r.parentElement}for(let e of i)e.boundingClientRect=e.element.getBoundingClientRect();let l=i[0].boundingClientRect,u=aV(i[0]),c=new DOMMatrix;for(let e of i.slice().reverse())for(let t of e.matrices){let r=aH({transform:e}),i=new DOMMatrix().translate(r.x,r.y).multiply(t).translate(-r.x,-r.y);c.multiplySelf(i)}if(!o)throw Error("Element computed style not found");let d=!c.is2D,p=null!==s;return{dimensions:l,totalMatrix:c,[Symbol.dispose]:()=>{for(let e of a)e()},nativeTransformOrigin:u,computedStyle:o,opacity:n,maskImageInfo:s,precompositing:{needs3DTransformViaWebGL:d,needsMaskImage:s,needsPrecompositing:!!(d||p)}}})({element:e,rootElement:o}),0);if(0===c||"hidden"===d.backfaceVisibility&&p.m33<0)return{type:"skip-children"};if(f.width<=0||f.height<=0)return{type:"continue",cleanupAfterChildren:null};let m=new DOMRect(f.left-a.x,f.top-a.y,f.width,f.height);if(h.needsPrecompositing){var u;let r=Date.now(),o=null;if(h.needsMaskImage&&(o=aW(a5(e))),h.needs3DTransformViaWebGL){let t=(({element:e,parentRect:t,matrix:r})=>{let i=a5(e),a=function(e,t){let r,i,a,n,o,s;if(r=new DOMPoint(0,0).matrixTransform(t),i=new DOMPoint(1,0).matrixTransform(t),a=new DOMPoint(0,1).matrixTransform(t),n={x:i.x-r.x,y:i.y-r.y},o={x:a.x-r.x,y:a.y-r.y},s=1/Math.hypot(n.x,n.y),Math.max(s,1/Math.hypot(o.x,o.y))>100||0)return null;let l=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],u=[];for(let e of l){let r=function(e,t,r){let i=r.m11-e*r.m14,a=r.m21-e*r.m24,n=e*r.m44-r.m41,o=r.m12-t*r.m14,s=r.m22-t*r.m24,l=t*r.m44-r.m42,u=i*s-a*o;return 1e-10>Math.abs(u)?null:{x:(n*s-a*l)/u,y:(i*l-n*o)/u}}(e.x,e.y,t);if(null===r)return null;u.push(r)}let c=u.map(e=>e.x),d=u.map(e=>e.y);return new DOMRect(Math.min(...c),Math.min(...d),Math.max(...c)-Math.min(...c),Math.max(...d)-Math.min(...d))}(t,r);return a?(({firstRect:e,secondRect:t})=>{let r=Math.max(e.left,t.left),i=Math.max(e.top,t.top),a=Math.min(e.bottom,t.bottom);return new DOMRect(r,i,Math.min(e.right,t.right)-r,a-i)})({firstRect:i,secondRect:a}):null})({element:e,parentRect:a,matrix:p});if(!t)return{type:"continue",cleanupAfterChildren:null};o=aW((({firstRect:e,secondRect:t})=>{if(null===e)return aW(t);let r=Math.min(e.left,t.left),i=Math.min(e.top,t.top),a=Math.max(e.bottom,t.bottom);return aW(new DOMRect(r,i,Math.max(e.right,t.right)-r,a-i))})({firstRect:o,secondRect:t}))}if(!o)throw Error("Precompose rect not found");if(o.width<=0||o.height<=0||(u=o,u.right<=a.left||u.left>=a.right||u.bottom<=a.top||u.top>=a.bottom))return{type:"continue",cleanupAfterChildren:null};let l=await no({cutout:o,element:e,logLevel:i,internalState:n,scale:s,onlyBackgroundClipText:!1}),c=l.canvas,d=aW((({rect:e,scale:t})=>new DOMRect(e.x*t,e.y*t,e.width*t,e.height*t))({scale:s,rect:function({rect:e,matrix:t}){let r=new DOMPointReadOnly(e.left,e.top),i=new DOMPointReadOnly(e.right,e.top),a=new DOMPointReadOnly(e.left,e.bottom),n=new DOMPointReadOnly(e.right,e.bottom),o=r.matrixTransform(t),s=i.matrixTransform(t),l=a.matrixTransform(t),u=n.matrixTransform(t),c=Math.min(o.x/o.w,s.x/s.w,l.x/l.w,u.x/u.w),d=Math.max(o.x/o.w,s.x/s.w,l.x/l.w,u.x/u.w),p=Math.min(o.y/o.w,s.y/s.w,l.y/l.w,u.y/u.w);return new DOMRect(c,p,d-c,Math.max(o.y/o.w,s.y/s.w,l.y/l.w,u.y/u.w)-p)}({rect:o,matrix:p})}));if(h.needsMaskImage&&(({gradientInfo:e,rect:t,precomposeRect:r,tempContext:i,scale:a})=>{let n=new DOMRect((t.left-r.left)*a,(t.top-r.top)*a,t.width*a,t.height*a),o=a$({ctx:i,rect:n,gradientInfo:e,offsetLeft:0,offsetTop:0});i.globalCompositeOperation="destination-in",i.fillStyle=o,i.fillRect(n.left,n.top,n.width,n.height)})({gradientInfo:h.needsMaskImage,rect:m,precomposeRect:o,tempContext:l,scale:s}),h.needs3DTransformViaWebGL){let e=(({matrix:e,sourceRect:t,tempCanvas:r,rectAfterTransforms:i,internalState:a,scale:n})=>i.width<=0||i.height<=0?null:(({matrix:e,sourceCanvas:t,sourceRect:r,destRect:i,internalState:a,scale:n})=>{let{canvas:o,gl:s,program:l,locations:u}=(({canvasWidth:e,canvasHeight:t,helperCanvasState:r})=>{if(r.current)return(r.current.canvas.width!==e||r.current.canvas.height!==t)&&(r.current.canvas.width=e,r.current.canvas.height=t),r.current.gl.viewport(0,0,e,t),r.current.gl.clearColor(0,0,0,0),r.current.gl.clear(r.current.gl.COLOR_BUFFER_BIT),r.current;let i=new OffscreenCanvas(e,t),a=i.getContext("webgl",{premultipliedAlpha:!0})??void 0;if(!a)throw Error("WebGL not supported");let n=ne(a,a7,a.VERTEX_SHADER),o=ne(a,a9,a.FRAGMENT_SHADER),s=a.createProgram();if(!s)throw Error("Could not create program");if(a.attachShader(s,n),a.attachShader(s,o),a.linkProgram(s),!a.getProgramParameter(s,a.LINK_STATUS))throw Error("Program link error: "+a.getProgramInfoLog(s));let l={aPosition:a.getAttribLocation(s,"aPosition"),aTexCoord:a.getAttribLocation(s,"aTexCoord"),uTransform:a.getUniformLocation(s,"uTransform"),uResolution:a.getUniformLocation(s,"uResolution"),uOffset:a.getUniformLocation(s,"uOffset"),uTexture:a.getUniformLocation(s,"uTexture")};return a.deleteShader(n),a.deleteShader(o),r.current={canvas:i,gl:a,program:s,locations:l,cleanup:()=>{a.deleteProgram(s);let e=a.getExtension("WEBGL_lose_context");e&&e.loseContext()}},r.current})({canvasWidth:i.width,canvasHeight:i.height,helperCanvasState:a.helperCanvasState});s.useProgram(l),s.viewport(0,0,i.width,i.height),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);let c=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,c);let d=new Float32Array([r.x,r.y,r.x+r.width,r.y,r.x,r.y+r.height,r.x,r.y+r.height,r.x+r.width,r.y,r.x+r.width,r.y+r.height]);s.bufferData(s.ARRAY_BUFFER,d,s.STATIC_DRAW),s.enableVertexAttribArray(u.aPosition),s.vertexAttribPointer(u.aPosition,2,s.FLOAT,!1,0,0);let p=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,p);let f=new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]);s.bufferData(s.ARRAY_BUFFER,f,s.STATIC_DRAW),s.enableVertexAttribArray(u.aTexCoord),s.vertexAttribPointer(u.aTexCoord,2,s.FLOAT,!1,0,0);let h=s.createTexture();s.bindTexture(s.TEXTURE_2D,h),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,t);let m=(1!==n?new DOMMatrix().scale(n,n).multiply(e):e).toFloat32Array();return s.uniformMatrix4fv(u.uTransform,!1,m),s.uniform2f(u.uResolution,i.width,i.height),s.uniform2f(u.uOffset,-i.x,-i.y),s.uniform1i(u.uTexture,0),s.drawArrays(s.TRIANGLES,0,6),s.disableVertexAttribArray(u.aPosition),s.disableVertexAttribArray(u.aTexCoord),s.deleteTexture(h),s.deleteBuffer(c),s.deleteBuffer(p),s.bindTexture(s.TEXTURE_2D,null),s.bindBuffer(s.ARRAY_BUFFER,null),s.disable(s.BLEND),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),o})({sourceRect:t,matrix:e,sourceCanvas:r,destRect:i,internalState:a,scale:n}))({matrix:p,sourceRect:o,tempCanvas:c,rectAfterTransforms:d,internalState:n,scale:s});e&&(c=e)}let f=t.getTransform();return t.setTransform(new DOMMatrix),t.drawImage(c,0,c.height-d.height,d.width,d.height,d.left-a.x,d.top-a.y,d.width,d.height),t.setTransform(f),iK.Internals.Log.trace({logLevel:i,tag:"@remotion/web-renderer"},`Transforming element in 3D - canvas size: ${o.width}x${o.height} - compose: ${Date.now()-r}ms - helper canvas: ${c.width}x${c.height}`),n.addPrecompose({canvasWidth:o.width,canvasHeight:o.height}),{type:"skip-children"}}let{cleanupAfterChildren:g}=await a6({rect:m,computedStyle:d,context:t,draw:r,opacity:c,totalMatrix:p,parentRect:a,logLevel:i,element:e,internalState:n,scale:s});return{type:"continue",cleanupAfterChildren:g}}catch(e){var c=e,d=1}finally{ao(l,c,d)}},nr=async({node:e,context:t,logLevel:r,parentRect:i,internalState:a,rootElement:n,onlyBackgroundClipText:o,scale:s})=>{let l=document.createElement("span"),u=e.parentNode;if(!u)throw Error("Text node has no parent");u.insertBefore(l,e),l.appendChild(e);let c=await nt({context:t,element:l,draw:(({span:e,logLevel:t,onlyBackgroundClipText:r,parentRect:i})=>({computedStyle:a,contextToDraw:n})=>{let{fontFamily:o,fontSize:s,fontWeight:l,direction:u,writingMode:c,letterSpacing:d,textTransform:p,webkitTextFillColor:f}=a;if("horizontal-tb"!==c)return void iK.Internals.Log.warn({logLevel:t,tag:"@remotion/web-renderer"},'Detected "writing-mode" CSS property. Vertical text is not yet supported in @remotion/web-renderer');n.save();let h=parseFloat(s);n.font=`${l} ${h}px ${o}`,n.fillStyle=r?"black":f,n.letterSpacing=d;let m="rtl"===u;n.textAlign=m?"right":"left",n.textBaseline="alphabetic";let g=e.textContent;for(let t of(e.textContent="uppercase"===p?g.toUpperCase():"lowercase"===p?g.toLowerCase():"capitalize"===p?g.replace(/\b\w/g,e=>e.toUpperCase()):g,(e=>{let t=e.textContent,r=Array.from(new Intl.Segmenter("en",{granularity:"word"}).segment(e.textContent)).map(e=>e.segment),i=[];for(let a=0;a<r.length;a++){let n=r.slice(0,a),o=r.slice(a+1),s=r[a],l=n.join(""),u=o.join(""),c=document.createTextNode(l),d=document.createTextNode(u),p=document.createElement("span");p.textContent=s,e.textContent="",e.appendChild(c),e.appendChild(p),e.appendChild(d);let f=p.getBoundingClientRect();e.textContent=t,i.push({text:s,rect:f})}return i})(e))){let{fontBoundingBoxDescent:e,fontBoundingBoxAscent:r}=n.measureText(g),a=r+e,o=(t.rect.height-a)/2;n.fillText(t.text,(m?t.rect.right:t.rect.left)-i.x,t.rect.top+r+o-i.y)}e.textContent=g,n.restore()})({span:l,logLevel:r,onlyBackgroundClipText:o,parentRect:i}),logLevel:r,parentRect:i,internalState:a,rootElement:n,scale:s});return u.insertBefore(e,l),u.removeChild(l),c},ni=({node:e,context:t,logLevel:r,parentRect:i,internalState:a,rootElement:n,onlyBackgroundClipText:o,scale:s})=>{if(e instanceof HTMLElement||e instanceof SVGElement)return nt({element:e,context:t,draw:async({dimensions:t,contextToDraw:r,computedStyle:i})=>{if(e instanceof SVGSVGElement)return void(({drawable:e,dimensions:t,contextToDraw:r})=>{let i=(({containerSize:e,elementSize:t})=>{if(Math.round(e.width)===Math.round(t.width)&&Math.round(e.height)===Math.round(t.height))return{width:e.width,height:e.height,top:e.top,left:e.left};if(e.width<=0||e.height<=0)throw Error(`Container must have positive dimensions, but got ${e.width}x${e.height}`);if(t.width<=0||t.height<=0)throw Error(`Element must have positive dimensions, but got ${t.width}x${t.height}`);let r=Math.min(e.height/t.height,e.width/t.width),i=t.width*r,a=t.height*r;if(i>e.width+1e-6||a>e.height+1e-6)throw Error(`Element is too big to fit into the container. Max size: ${e.width}x${e.height}, element size: ${i}x${a}`);return{width:i,height:a,top:(e.height-a)/2+e.top,left:(e.width-i)/2+e.left}})({containerSize:t,elementSize:{width:e.width,height:e.height}});r.drawImage(e,i.left,i.top,i.width,i.height)})({drawable:await (e=>{let{fill:t,color:r}=getComputedStyle(e),i=e.style.transform,a=e.style.transformOrigin,n=e.style.marginLeft,o=e.style.marginRight,s=e.style.marginTop,l=e.style.marginBottom,u=e.style.fill,c=e.style.color;e.style.transform="none",e.style.transformOrigin="",e.style.marginLeft="0",e.style.marginRight="0",e.style.marginTop="0",e.style.marginBottom="0",e.style.fill=t,e.style.color=r;let d=new XMLSerializer().serializeToString(e);return e.style.marginLeft=n,e.style.marginRight=o,e.style.marginTop=s,e.style.marginBottom=l,e.style.transform=i,e.style.transformOrigin=a,e.style.fill=u,e.style.color=c,new Promise((e,t)=>{let r=new Image,i=`data:image/svg+xml;base64,${btoa(d)}`;r.onload=function(){e(r)},r.onerror=()=>{t(Error("Failed to convert SVG to image"))},r.src=i})})(e),dimensions:t,contextToDraw:r});if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement)try{(({drawable:e,dimensions:t,computedStyle:r,contextToDraw:i})=>{let a=(e=>{if(!e)return"fill";let t=e.trim().toLowerCase();switch(t){case"fill":case"contain":case"cover":case"none":case"scale-down":return t;default:return"fill"}})(r.objectFit),n=e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:{width:e.width,height:e.height},o=(({objectFit:e,containerSize:t,intrinsicSize:r})=>{switch(e){case"fill":return(({containerSize:e,intrinsicSize:t})=>({sourceX:0,sourceY:0,sourceWidth:t.width,sourceHeight:t.height,destX:e.left,destY:e.top,destWidth:e.width,destHeight:e.height}))({containerSize:t,intrinsicSize:r});case"contain":return aR({containerSize:t,intrinsicSize:r});case"cover":return(({containerSize:e,intrinsicSize:t})=>{if(e.height<=0||t.height<=0)return{sourceX:0,sourceY:0,sourceWidth:0,sourceHeight:0,destX:e.left,destY:e.top,destWidth:0,destHeight:0};let r=e.width/e.height,i=t.width/t.height,a=0,n=0,o=t.width,s=t.height;return i>r?(o=t.height*r,a=(t.width-o)/2):(s=t.width/r,n=(t.height-s)/2),{sourceX:a,sourceY:n,sourceWidth:o,sourceHeight:s,destX:e.left,destY:e.top,destWidth:e.width,destHeight:e.height}})({containerSize:t,intrinsicSize:r});case"none":return aD({containerSize:t,intrinsicSize:r});case"scale-down":{let e=aR({containerSize:t,intrinsicSize:r}),i=aD({containerSize:t,intrinsicSize:r});return e.destWidth*e.destHeight<i.destWidth*i.destHeight?e:i}default:throw Error(`Unknown object-fit value: ${e}`)}})({objectFit:a,containerSize:{width:t.width,height:t.height,left:t.left,top:t.top},intrinsicSize:n});i.drawImage(e,o.sourceX,o.sourceY,o.sourceWidth,o.sourceHeight,o.destX,o.destY,o.destWidth,o.destHeight)})({drawable:e,dimensions:t,computedStyle:i,contextToDraw:r})}catch(t){if(e instanceof HTMLImageElement){let r=t instanceof DOMException?"SecurityError"===t.name?Error(`Could not draw image with src="${e.src}" to canvas: The image is tainted due to CORS restrictions. The server hosting this image must respond with the "Access-Control-Allow-Origin" header. See: https://remotion.dev/docs/client-side-rendering/migration`):"InvalidStateError"===t.name?Error(`Could not draw image with src="${e.src}" to canvas: The image is in a broken state. This usually means the image failed to load - check that the URL is valid and accessible.`):null:null;if(r)throw r}throw t}},logLevel:r,parentRect:i,internalState:a,rootElement:n,scale:s});if(e instanceof Text)return nr({node:e,context:t,logLevel:r,parentRect:i,internalState:a,rootElement:n,onlyBackgroundClipText:o,scale:s});throw Error("Unknown node type")},na=e=>e instanceof Element&&(e.parentElement instanceof SVGSVGElement||"none"===getComputedStyle(e).display)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT,nn=async({element:e,context:t,logLevel:r,parentRect:i,internalState:a,onlyBackgroundClipText:n,scale:o})=>{let s=[];try{let l,u=document.createTreeWalker(e,n?NodeFilter.SHOW_TEXT:NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,na);if(n&&(u.nextNode(),!u.currentNode))return;let{checkCleanUpAtBeginningOfIteration:c,addCleanup:d}=an(s,(l=[],{checkCleanUpAtBeginningOfIteration:()=>{for(let e=0;e<l.length;){let t=l[e];t.element===u.currentNode||t.element.contains(u.currentNode)?e++:(t.cleanupFn(),l.splice(e,1))}},addCleanup:(e,t)=>{l.unshift({element:e,cleanupFn:t})},[Symbol.dispose]:()=>{for(let e of l)e.cleanupFn()}}),0);for(;;){c();let s=await ni({node:u.currentNode,context:t,logLevel:r,parentRect:i,internalState:a,rootElement:e,onlyBackgroundClipText:n,scale:o});if("skip-children"===s.type){if(!a8(u))break}else if(s.cleanupAfterChildren&&d(u.currentNode,s.cleanupAfterChildren),!u.nextNode())break}}catch(e){var l=e,u=1}finally{ao(s,l,u)}},no=async({element:e,scale:t,logLevel:r,internalState:i,onlyBackgroundClipText:a,cutout:n})=>{let o=new OffscreenCanvas(Math.ceil(n.width*t),Math.ceil(n.height*t)).getContext("2d");if(!o)throw Error("Could not get context");return await nn({element:e,context:o,logLevel:r,parentRect:n,internalState:i,onlyBackgroundClipText:a,scale:t}),o},ns=250,nl=e=>{if(void 0!==e){if("number"!=typeof e)throw Error('Scale should be a number or undefined, but is "'+JSON.stringify(e)+'"');if(Number.isNaN(e))throw Error("`scale` should not be NaN, but is NaN");if(!Number.isFinite(e))throw Error(`"scale" must be finite, but is ${e}`);if(e<=0)throw Error(`"scale" must be bigger than 0, but is ${e}`);if(e>16)throw Error(`"scale" must be smaller or equal than 16, but is ${e}`)}},nu=({originalFrame:e,returnedFrame:t,expectedWidth:r,expectedHeight:i,expectedTimestamp:a})=>{if(!(t instanceof VideoFrame))throw e.close(),Error("onFrame callback must return a VideoFrame or void");if(t===e)return t;if(t.displayWidth!==r||t.displayHeight!==i)throw e.close(),t.close(),Error(`VideoFrame dimensions mismatch: expected ${r}x${i}, got ${t.displayWidth}x${t.displayHeight}`);if(t.timestamp!==a)throw e.close(),t.close(),Error(`VideoFrame timestamp mismatch: expected ${a}, got ${t.timestamp}`);return e.close(),t},nc=function(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}},nd=({timeoutInMilliseconds:e,scope:t,signal:r,apiName:i,internalState:a,keepalive:n})=>{let o=performance.now(),{promise:s,resolve:l,reject:u}=nc(),c=!1,d=()=>{if(!c){if(r?.aborted){c=!0,a?.addWaitForReadyTime(performance.now()-o),u(Error(`${i}() was cancelled`));return}if(!0===t.remotion_renderReady){a?.addWaitForReadyTime(performance.now()-o),l();return}if(void 0!==t.remotion_cancelledError){c=!0,a?.addWaitForReadyTime(performance.now()-o);let e=t.remotion_cancelledError,r=Error(e.split(`
`)[0].replace(/^Error: /,""));r.stack=e,u(r);return}if(performance.now()-o>e+3e3){c=!0,a?.addWaitForReadyTime(performance.now()-o),u(Error(Object.values(t.remotion_delayRenderTimeouts).map(e=>e.label).join(", ")));return}p()}},p=()=>{let e=new Promise(e=>{requestAnimationFrame(()=>e())});(n?Promise.race([e,n.waitForTick()]):e).then(d)};return d(),s},np=null,nf=()=>(np||(np=crypto.randomUUID()),`__remotion_render:${np}:`),nh=async()=>{try{let e=await navigator.storage.getDirectory();for await(let[t]of e.entries())t.startsWith("__remotion_render:")&&!t.startsWith(nf())&&await e.removeEntry(t)}catch{}},nm=async()=>{let e=await navigator.storage.getDirectory(),t=`${nf()}${crypto.randomUUID()}`,r=await e.getFileHandle(t,{create:!0}),i=await r.createWritable(),a=new WritableStream({async write(e){await i.seek(e.position),await i.write(e)}});return{stream:a,getBlob:async()=>(await e.getFileHandle(t)).getFile(),close:()=>i.close()}},ng=async({composition:e,inputProps:t,delayRenderTimeoutInMilliseconds:r,logLevel:i,mediaCacheSizeInBytes:a,schema:n,videoCodec:o,audioCodec:s,audioBitrate:l,container:u,signal:c,onProgress:d,hardwareAcceleration:p,keyframeIntervalInSeconds:f,videoBitrate:h,frameRange:m,transparent:g,onArtifact:v,onFrame:y,outputTarget:b,licenseKey:x,muted:w,scale:S,isProduction:k})=>{let C=[];try{let I;nl(S);let A=null===b?await as()?"web-fs":"arraybuffer":b;"web-fs"===A&&await nh();let O=au(u);if(o&&!O.getSupportedCodecs().includes(al(o)))return Promise.reject(Error(`Codec ${o} is not supported for container ${u}`));let M="number"==typeof l?l:ad(l),F=null;if(!w){let e=await ay({container:u,requestedCodec:s,userSpecifiedAudioCodec:null!=s,bitrate:M});for(let t of e.issues){if("error"===t.severity)return Promise.reject(Error(t.message));iK.Internals.Log.warn({logLevel:i,tag:"@remotion/web-renderer"},t.message)}F=e.codec}let R=await iK.Internals.resolveVideoConfig({calculateMetadata:e.calculateMetadata??null,signal:c??new AbortController().signal,defaultProps:e.defaultProps??{},inputProps:t??{},compositionId:e.id,compositionDurationInFrames:e.durationInFrames??null,compositionFps:e.fps??null,compositionHeight:e.height??null,compositionWidth:e.width??null}),D=((e,t)=>{if(null===t)return[0,e-1];if("number"==typeof t){if(t<0||t>=e)throw Error(`Frame number is out of range, must be between 0 and ${e-1} but got ${t}`);return[t,t]}if(t[1]>=e||t[0]<0)throw Error(`The "durationInFrames" of the composition was evaluated to be ${e}, but frame range ${t.join("-")} is not inbetween 0-${e-1}`);return t})(R.durationInFrames,m);if(c?.aborted)return Promise.reject(Error("renderMediaOnWeb() was cancelled"));let{delayRenderScope:j,div:L,timeUpdater:B,collectAssets:N,errorHolder:$}=an(C,aA({width:R.width,height:R.height,fps:R.fps,durationInFrames:R.durationInFrames,Component:e.component,resolvedProps:R.props,id:R.id,delayRenderTimeoutInMilliseconds:r,logLevel:i,mediaCacheSizeInBytes:a,schema:n??null,audioEnabled:!w,videoEnabled:!0,initialFrame:0,defaultCodec:R.defaultCodec,defaultOutName:R.defaultOutName}),0),z=an(C,aO(),0),U=an(C,function({fps:e,logLevel:t}){let r=Math.round(1e3/e),i=[],a=null,n=!1;if("u"<typeof Worker)return iK.Internals.Log.warn({logLevel:t,tag:"@remotion/web-renderer"},"Web Workers not available. Rendering may pause when tab is backgrounded."),{waitForTick:()=>new Promise(e=>{setTimeout(e,r)}),[Symbol.dispose]:()=>{}};let o=new Blob([aT],{type:"application/javascript"}),s=URL.createObjectURL(o);return(a=new Worker(s)).onmessage=()=>{let e=i;for(let t of(i=[],e))t()},a.onerror=e=>{iK.Internals.Log.error({logLevel:t,tag:"@remotion/web-renderer"},"Background keepalive worker encountered an error and will be terminated.",e);let r=i;for(let e of(i=[],r))e();n||(n=!0,a?.terminate(),a=null,URL.revokeObjectURL(s))},a.postMessage({type:"start",intervalMs:r}),{waitForTick:()=>new Promise(e=>{i.push(e)}),[Symbol.dispose]:()=>{if(n)return;n=!0,a?.postMessage({type:"stop"}),a?.terminate(),a=null,URL.revokeObjectURL(s);let e=i;for(let t of(i=[],e))t()}}}({fps:R.fps,logLevel:i}),0),V=aE(),H="web-fs"===A?await nm():null,W=H?new iF(H.stream):new iM,q=an(C,(E={format:O,target:W},{output:I=new ar(E),[Symbol.dispose]:()=>{"finalized"!==I.state&&"canceled"!==I.state&&I.cancel()}}),0),G=an(C,((e,t=ns)=>{if(!e)return null;let r=0,i=null,a=null;return{throttled:n=>{let o=Date.now(),s=o-r;i=n,s>=t?(r=o,e(n),i=null,null!==a&&(clearTimeout(a),a=null)):null===a&&(a=setTimeout(()=>{null!==i&&(r=Date.now(),e(i),i=null),a=null},t-s))},[Symbol.dispose]:()=>{null!==a&&(clearTimeout(a),a=null),i=null}}})(d),0),Z=G?.throttled??null;try{let e=[];try{let t;if(c?.aborted||(await nd({timeoutInMilliseconds:r,scope:j,signal:c,apiName:"renderMediaOnWeb",internalState:z,keepalive:U}),aI($),c?.aborted))throw Error("renderMediaOnWeb() was cancelled");let a=an(e,(_={codec:al(o),bitrate:"number"==typeof h?h:ad(h),sizeChangeBehavior:"deny",hardwareAcceleration:p,latencyMode:"quality",keyFrameInterval:f,alpha:g?"keep":"discard"},{videoSampleSource:t=new i1(_),[Symbol.dispose]:()=>{t.close()}}),0);q.output.addVideoTrack(a.videoSampleSource);let n=an(e,(({muted:e,codec:t,bitrate:r})=>{if(e||null===t)return null;let i=new i3({codec:t,bitrate:r});return{audioSampleSource:i,[Symbol.dispose]:()=>i.close()}})({muted:w,codec:F?av(F):null,bitrate:M}),0);if(n&&q.output.addAudioTrack(n.audioSampleSource),await q.output.start(),c?.aborted)throw Error("renderMediaOnWeb() was cancelled");let s={renderedFrames:0,encodedFrames:0};for(let e=D[0];e<=D[1];e++){if(c?.aborted||(B.current?.update(e),await nd({timeoutInMilliseconds:r,scope:j,signal:c,apiName:"renderMediaOnWeb",keepalive:U,internalState:z}),aI($),c?.aborted))throw Error("renderMediaOnWeb() was cancelled");let t=performance.now(),o=await no({element:L,scale:S,logLevel:i,internalState:z,onlyBackgroundClipText:!1,cutout:new DOMRect(0,0,R.width,R.height)});if(z.addCreateFrameTime(performance.now()-t),c?.aborted)throw Error("renderMediaOnWeb() was cancelled");let l=Math.round((e-D[0])/R.fps*1e6),u=new VideoFrame(o.canvas,{timestamp:l});s.renderedFrames++,Z?.({...s});let d=u;if(y){let e=await y(u);if(c?.aborted)throw Error("renderMediaOnWeb() was cancelled");d=nu({originalFrame:u,returnedFrame:e,expectedWidth:Math.round(R.width*S),expectedHeight:Math.round(R.height*S),expectedTimestamp:l})}let p=performance.now(),f=N.current.collectAssets();if(v&&await V.handle({imageData:o.canvas,frame:e,assets:f,onArtifact:v}),c?.aborted)throw Error("renderMediaOnWeb() was cancelled");let h=w?null:a_({assets:f,fps:R.fps,timestamp:l});z.addAudioMixingTime(performance.now()-p);let m=performance.now();if(await Promise.all([aS(d,a.videoSampleSource),h&&n?ak(h,n.audioSampleSource):Promise.resolve()]),z.addAddSampleTime(performance.now()-m),s.encodedFrames++,Z?.({...s}),c?.aborted)throw Error("renderMediaOnWeb() was cancelled")}if(d?.({...s}),a.videoSampleSource.close(),n?.audioSampleSource.close(),await q.output.finalize(),iK.Internals.Log.verbose({logLevel:i,tag:"web-renderer"},`Render timings: waitForReady=${z.getWaitForReadyTime().toFixed(2)}ms, createFrame=${z.getCreateFrameTime().toFixed(2)}ms, addSample=${z.getAddSampleTime().toFixed(2)}ms, audioMixing=${z.getAudioMixingTime().toFixed(2)}ms`),H)return aF({licenseKey:x??null,succeeded:!0,apiName:"renderMediaOnWeb",isStill:!1,isProduction:k??!0}),await H.close(),{getBlob:()=>H.getBlob(),internalState:z};if(!(W instanceof iM))throw Error("Expected target to be a BufferTarget");return aF({licenseKey:x??null,succeeded:!0,apiName:"renderMediaOnWeb",isStill:!1,isProduction:k??!0}),{getBlob:()=>{if(!W.buffer)throw Error("The resulting buffer is empty");return Promise.resolve(new Blob([W.buffer],{type:(e=>{switch(e){case"mp4":return"video/mp4";case"webm":return"video/webm";default:throw Error(`Unsupported container: ${e}`)}})(u)}))},internalState:z}}catch(e){var E,_,T=e,P=1}finally{ao(e,T,P)}}catch(e){throw c?.aborted||aF({succeeded:!1,licenseKey:x??null,apiName:"renderMediaOnWeb",isStill:!1,isProduction:k??!0}).catch(e=>{iK.Internals.Log.error({logLevel:"error",tag:"web-renderer"},"Failed to send usage event",e)}),e}}catch(e){var I=e,A=1}finally{ao(C,I,A)}},nv=e=>{let t=e.container??"mp4",r=e.videoCodec??ac(t);return aM.ref=aM.ref.catch(()=>Promise.resolve()).then(()=>ng({...e,delayRenderTimeoutInMilliseconds:e.delayRenderTimeoutInMilliseconds??3e4,logLevel:e.logLevel??window.remotion_logLevel??"info",schema:e.schema??void 0,mediaCacheSizeInBytes:e.mediaCacheSizeInBytes??null,videoCodec:r,audioCodec:e.audioCodec??null,audioBitrate:e.audioBitrate??"medium",container:t,signal:e.signal??null,onProgress:e.onProgress??null,hardwareAcceleration:e.hardwareAcceleration??"no-preference",keyframeIntervalInSeconds:e.keyframeIntervalInSeconds??5,videoBitrate:e.videoBitrate??"medium",frameRange:e.frameRange??null,transparent:e.transparent??!1,onArtifact:e.onArtifact??null,onFrame:e.onFrame??null,outputTarget:e.outputTarget??null,licenseKey:e.licenseKey??null,muted:e.muted??!1,scale:e.scale??1,isProduction:e.isProduction??!0})),aM.ref};async function ny({frame:e,delayRenderTimeoutInMilliseconds:t,logLevel:r,inputProps:i,schema:a,imageFormat:n,mediaCacheSizeInBytes:o,composition:s,signal:l,onArtifact:u,licenseKey:c,scale:d,isProduction:p}){let f=[];try{nl(d);let h=await iK.Internals.resolveVideoConfig({calculateMetadata:s.calculateMetadata??null,signal:l??new AbortController().signal,defaultProps:s.defaultProps??{},inputProps:i??{},compositionId:s.id,compositionDurationInFrames:s.durationInFrames??null,compositionFps:s.fps??null,compositionHeight:s.height??null,compositionWidth:s.width??null});if(l?.aborted)return Promise.reject(Error("renderStillOnWeb() was cancelled"));let m=an(f,aO(),0),{delayRenderScope:g,div:v,collectAssets:y,errorHolder:b}=an(f,aA({width:h.width,height:h.height,delayRenderTimeoutInMilliseconds:t,logLevel:r,resolvedProps:h.props,id:h.id,mediaCacheSizeInBytes:o,audioEnabled:!1,Component:s.component,videoEnabled:!0,durationInFrames:h.durationInFrames,fps:h.fps,schema:a??null,initialFrame:e,defaultCodec:h.defaultCodec,defaultOutName:h.defaultOutName}),0),x=aE();try{if(l?.aborted||(await nd({timeoutInMilliseconds:t,scope:g,signal:l,apiName:"renderStillOnWeb",internalState:null,keepalive:null}),aI(b),l?.aborted))throw Error("renderStillOnWeb() was cancelled");let i=await no({element:v,scale:d,logLevel:r,internalState:m,onlyBackgroundClipText:!1,cutout:new DOMRect(0,0,h.width,h.height)}),a=await i.canvas.convertToBlob({type:`image/${n}`}),o=y.current.collectAssets();return u&&await x.handle({imageData:a,frame:e,assets:o,onArtifact:u}),aF({licenseKey:c??null,succeeded:!0,apiName:"renderStillOnWeb",isStill:!0,isProduction:p}),{blob:a,internalState:m}}catch(e){throw l?.aborted||aF({succeeded:!1,licenseKey:c??null,apiName:"renderStillOnWeb",isStill:!0,isProduction:p}).catch(e=>{iK.Internals.Log.error({logLevel:"error",tag:"web-renderer"},"Failed to send usage event",e)}),e}}catch(e){var h=e,m=1}finally{ao(f,h,m)}}var nb=e=>(aM.ref=aM.ref.catch(()=>Promise.resolve()).then(()=>ny({...e,delayRenderTimeoutInMilliseconds:e.delayRenderTimeoutInMilliseconds??3e4,logLevel:e.logLevel??window.remotion_logLevel??"info",schema:e.schema??void 0,mediaCacheSizeInBytes:e.mediaCacheSizeInBytes??null,signal:e.signal??null,onArtifact:e.onArtifact??null,licenseKey:e.licenseKey??null,scale:e.scale??1,isProduction:e.isProduction??!0})),aM.ref);e.s(["canRenderMediaOnWeb",()=>ab,"getDefaultAudioCodecForContainer",()=>ap,"getDefaultVideoCodecForContainer",()=>ac,"getEncodableAudioCodecs",()=>aw,"getEncodableVideoCodecs",()=>ax,"getSupportedAudioCodecsForContainer",()=>ag,"getSupportedVideoCodecsForContainer",()=>ah,"renderMediaOnWeb",()=>nv,"renderStillOnWeb",()=>nb],29282)},721045,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CertificateIcon=void 0;let i=e.r(222260);r.CertificateIcon=e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",...e,children:(0,i.jsx)("path",{fill:"currentcolor",d:"M192 32l128 0 0 96c0 35.3 28.7 64 64 64l96 0 0 256c0 17.7-14.3 32-32 32l-192 0 0 32 192 0c35.3 0 64-28.7 64-64l0-261.5c0-17-6.7-33.3-18.7-45.3L370.7 18.7C358.7 6.7 342.5 0 325.5 0L192 0c-35.3 0-64 28.7-64 64l0 80c10.9 0 21.6 1 32 2.9L160 64c0-17.7 14.3-32 32-32zM352 45.3L466.7 160 384 160c-17.7 0-32-14.3-32-32l0-82.7zM32 320a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zM176 438.7l0 66.3-40.1-22.9c-4.9-2.8-11-2.8-15.9 0L80 505 80 438.7c14.8 6 31 9.3 48 9.3s33.2-3.3 48-9.3zm32-18.8c29.3-23.5 48-59.5 48-99.9 0-70.7-57.3-128-128-128S0 249.3 0 320c0 40.4 18.7 76.5 48 99.9l0 101.8c0 12.3 10 22.3 22.3 22.3 3.9 0 7.7-1 11.1-2.9l46.6-26.6 46.6 26.6c3.4 1.9 7.2 2.9 11.1 2.9 12.3 0 22.3-10 22.3-22.3l0-101.8zM128 344a24 24 0 1 1 0-48 24 24 0 1 1 0 48zm0-80a56 56 0 1 0 0 112 56 56 0 1 0 0-112z"})})},747558,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useEncodableAudioCodecs=void 0;let i=e.r(29282),a=e.r(347540);r.useEncodableAudioCodecs=e=>{var t;let r=(0,a.useRef)({}),[n,o]=(0,a.useState)(()=>({[e]:(0,i.getSupportedAudioCodecsForContainer)(e)}));return(0,a.useEffect)(()=>{if(r.current[e])return;let t=(0,i.getSupportedAudioCodecsForContainer)(e);r.current[e]={codecs:t,status:"fetching"},(0,i.getEncodableAudioCodecs)(e).then(t=>{r.current[e]={codecs:t,status:"done"},o(r=>({...r,[e]:t}))}).catch(()=>{r.current[e]={codecs:t,status:"done"}})},[e]),null!=(t=n[e])?t:(0,i.getSupportedAudioCodecsForContainer)(e)}},535813,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useEncodableVideoCodecs=void 0;let i=e.r(29282),a=e.r(347540);r.useEncodableVideoCodecs=e=>{var t;let r=(0,a.useRef)({}),[n,o]=(0,a.useState)(()=>({[e]:(0,i.getSupportedVideoCodecsForContainer)(e)}));return(0,a.useEffect)(()=>{if(r.current[e])return;let t=(0,i.getSupportedVideoCodecsForContainer)(e);r.current[e]={codecs:t,status:"fetching"},(0,i.getEncodableVideoCodecs)(e).then(t=>{r.current[e]={codecs:t,status:"done"},o(r=>({...r,[e]:t}))}).catch(()=>{r.current[e]={codecs:t,status:"done"}})},[e]),null!=(t=n[e])?t:(0,i.getSupportedVideoCodecsForContainer)(e)}},25642,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WebRendererExperimentalBadge=void 0;let i=e.r(222260),a=e.r(921224),n=e.r(97870),o={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},s={fontSize:14,fontFamily:"sans-serif",color:a.LIGHT_TEXT},l={width:14,height:14,flexShrink:0,fill:a.WARNING_COLOR,marginRight:8},u={color:"inherit",textDecoration:"underline",fontSize:14};r.WebRendererExperimentalBadge=()=>(0,i.jsxs)("div",{style:o,children:[(0,i.jsx)(n.WarningTriangle,{type:"warning",style:l}),(0,i.jsxs)("div",{style:s,children:["The Remotion Web Renderer is experimental."," ",(0,i.jsx)("a",{href:"https://github.com/remotion-dev/remotion/issues/5913",target:"_blank",rel:"noopener noreferrer",style:u,children:"Track progress on GitHub"})," ","and discuss in the"," ",(0,i.jsx)("a",{href:"https://remotion.dev/discord",target:"_blank",rel:"noopener noreferrer",style:u,children:"#web-renderer"})," ","channel on Discord."]})]})},236440,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WebRenderModalAdvanced=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(170260),o=e.r(671927),s=e.r(146575),l=e.r(432804),u=e.r(462098),c=e.r(239229),d=e.r(400157),p={flex:1};r.WebRenderModalAdvanced=({renderMode:e,delayRenderTimeout:t,setDelayRenderTimeout:r,mediaCacheSizeInBytes:f,setMediaCacheSizeInBytes:h,hardwareAcceleration:m,setHardwareAcceleration:g})=>{let v=(0,a.useCallback)(()=>{h(e=>null===e?1e9:null)},[h]),y=(0,a.useCallback)(e=>{h(t=>{if(null===t)throw TypeError("Expected previous value");return"function"==typeof e?e(t):e})},[h]),b=(0,a.useMemo)(()=>[{label:"No Preference",onClick:()=>g("no-preference"),leftItem:"no-preference"===m?(0,i.jsx)(n.Checkmark,{}):null,id:"no-preference",keyHint:null,quickSwitcherLabel:null,subMenu:null,type:"item",value:"no-preference"},{label:"Prefer Hardware",onClick:()=>g("prefer-hardware"),leftItem:"prefer-hardware"===m?(0,i.jsx)(n.Checkmark,{}):null,id:"prefer-hardware",keyHint:null,quickSwitcherLabel:null,subMenu:null,type:"item",value:"prefer-hardware"},{label:"Prefer Software",onClick:()=>g("prefer-software"),leftItem:"prefer-software"===m?(0,i.jsx)(n.Checkmark,{}):null,id:"prefer-software",keyHint:null,quickSwitcherLabel:null,subMenu:null,type:"item",value:"prefer-software"}],[m,g]);return(0,i.jsxs)("div",{style:p,children:[(0,i.jsx)(c.NumberSetting,{name:"Delay Render Timeout",formatter:e=>`${e}ms`,min:0,max:1e9,step:1e3,value:t,onValueChanged:r,hint:"delayRenderTimeoutInMillisecondsOption"}),(0,i.jsxs)("div",{style:u.optionRow,children:[(0,i.jsxs)("div",{style:u.label,children:["Custom @remotion/media cache size ",(0,i.jsx)(s.Spacing,{x:.5}),(0,i.jsx)(d.OptionExplainerBubble,{id:"mediaCacheSizeInBytesOption"})]}),(0,i.jsx)("div",{style:u.rightRow,children:(0,i.jsx)(o.Checkbox,{checked:null!==f,onChange:v,name:"media-cache-size"})})]}),null===f?null:(0,i.jsx)(c.NumberSetting,{name:"@remotion/media cache size",formatter:e=>`${e} bytes`,min:0,max:1e10,step:0xa00000,value:f,onValueChanged:y}),"video"===e?(0,i.jsxs)("div",{style:u.optionRow,children:[(0,i.jsx)("div",{style:u.label,children:"Hardware Acceleration"}),(0,i.jsx)("div",{style:u.rightRow,children:(0,i.jsx)(l.Combobox,{values:b,selectedId:m,title:"Hardware Acceleration"})})]}):null]})}},505605,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getQualityOptions=void 0;let i=e.r(222260),a=e.r(170260),n=[{value:"very-low",label:"Very Low"},{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"very-high",label:"Very High"}];r.getQualityOptions=(e,t)=>n.map(({value:r,label:n})=>({label:n,onClick:()=>t(r),leftItem:e===r?(0,i.jsx)(a.Checkmark,{}):null,id:r,keyHint:null,quickSwitcherLabel:null,subMenu:null,type:"item",value:r}))},852109,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WebRenderModalAudio=void 0;let i=e.r(222260),a=e.r(29282),n=e.r(347540),o=e.r(170260),s=e.r(494296),l=e.r(432804),u=e.r(146575),c=e.r(902060),d=e.r(909555),p=e.r(462098),f=e.r(505605),h={flex:1,overflowY:"auto"},m={backgroundColor:"rgba(59, 130, 246, 0.15)",border:"1px solid rgba(59, 130, 246, 0.4)",borderRadius:4,padding:"8px 12px",marginLeft:16,marginRight:16,marginTop:8,fontSize:13,lineHeight:1.4,color:"#60a5fa"},g=e=>{switch(e){case"aac":return"AAC";case"opus":return"Opus";default:return e}};r.WebRenderModalAudio=({muted:e,setMuted:t,audioCodec:r,setAudioCodec:v,audioBitrate:y,setAudioBitrate:b,container:x,encodableCodecs:w,effectiveAudioCodec:S})=>{let k=(0,n.useMemo)(()=>(0,a.getSupportedAudioCodecsForContainer)(x),[x]),C=(0,n.useMemo)(()=>k.map(e=>{let t=w.includes(e);return{label:g(e),onClick:()=>v(e),leftItem:r===e?(0,i.jsx)(o.Checkmark,{}):null,id:e,keyHint:null,quickSwitcherLabel:null,subMenu:null,type:"item",value:e,disabled:!t}}),[k,w,r,v]),E=(0,n.useMemo)(()=>(0,f.getQualityOptions)(y,b),[y,b]);return(0,i.jsxs)("div",{style:h,className:s.VERTICAL_SCROLLBAR_CLASSNAME,children:[(0,i.jsx)(c.MutedSetting,{enforceAudioTrack:!1,muted:e,setMuted:t}),e?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.RenderModalHr,{}),(0,i.jsxs)("div",{style:p.optionRow,children:[(0,i.jsxs)("div",{style:p.label,children:["Audio Quality",(0,i.jsx)(u.Spacing,{x:.5})]}),(0,i.jsx)("div",{style:p.rightRow,children:(0,i.jsx)(l.Combobox,{values:E,selectedId:y,title:"Audio Quality"})})]}),(0,i.jsxs)("div",{style:p.optionRow,children:[(0,i.jsxs)("div",{style:p.label,children:["Audio Codec",(0,i.jsx)(u.Spacing,{x:.5})]}),(0,i.jsx)("div",{style:p.rightRow,children:(0,i.jsx)(l.Combobox,{values:C,selectedId:r,title:"Audio Codec"})})]}),S!==r?(0,i.jsxs)("div",{style:m,children:[g(r)," is not available in this browser. Using ",g(S)," ","instead."]}):null]})]})}},121383,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WebRenderModalBasic=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(170260),o=e.r(146575),s=e.r(432804),l=e.r(190327),u=e.r(310099),c=e.r(200539),d=e.r(414154),p=e.r(53947),f=e.r(462098),h=e.r(400157),m=e.r(187011),g={flex:1};r.WebRenderModalBasic=({renderMode:e,resolvedComposition:t,imageFormat:r,setStillFormat:v,frame:y,onFrameChanged:b,onFrameSetDirectly:x,container:w,setContainerFormat:S,setCodec:k,encodableVideoCodecs:C,effectiveVideoCodec:E,startFrame:_,setStartFrame:T,endFrame:P,setEndFrame:I,outName:A,onOutNameChange:O,validationMessage:M,logLevel:F,setLogLevel:R})=>{let D=(0,a.useMemo)(()=>[{label:"PNG",onClick:()=>v("png"),key:"png",selected:"png"===r},{label:"JPEG",onClick:()=>v("jpeg"),key:"jpeg",selected:"jpeg"===r},{label:"WebP",onClick:()=>v("webp"),key:"webp",selected:"webp"===r}],[r,v]),j=(0,a.useMemo)(()=>["trace","verbose","info","warn","error"].map(e=>({label:(0,p.humanReadableLogLevel)(e),onClick:()=>R(e),leftItem:F===e?(0,i.jsx)(n.Checkmark,{}):null,id:e,keyHint:null,quickSwitcherLabel:null,subMenu:null,type:"item",value:e})),[F,R]),L=(0,a.useMemo)(()=>[{label:"MP4",onClick:()=>S("mp4"),leftItem:"mp4"===w?(0,i.jsx)(n.Checkmark,{}):null,id:"mp4",keyHint:null,quickSwitcherLabel:null,subMenu:null,type:"item",value:"mp4"},{label:"WebM",onClick:()=>S("webm"),leftItem:"webm"===w?(0,i.jsx)(n.Checkmark,{}):null,id:"webm",keyHint:null,quickSwitcherLabel:null,subMenu:null,type:"item",value:"webm"}],[w,S]),B=(0,a.useMemo)(()=>({h264:"H.264",h265:"H.265",vp8:"VP8",vp9:"VP9",av1:"AV1"}),[]),N=(0,a.useMemo)(()=>C.map(e=>({label:B[e],onClick:()=>k(e),leftItem:E===e?(0,i.jsx)(n.Checkmark,{}):null,id:e,keyHint:null,quickSwitcherLabel:null,subMenu:null,type:"item",value:e})),[C,E,k,B]);return(0,i.jsxs)("div",{style:g,children:["still"===e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:f.optionRow,children:[(0,i.jsx)("div",{style:f.label,children:"Format"}),(0,i.jsx)("div",{style:f.rightRow,children:(0,i.jsx)(c.SegmentedControl,{items:D,needsWrapping:!0})})]}),t.durationInFrames>1?(0,i.jsxs)("div",{style:f.optionRow,children:[(0,i.jsx)("div",{style:f.label,children:"Frame"}),(0,i.jsx)("div",{style:f.rightRow,children:(0,i.jsx)(u.RightAlignInput,{children:(0,i.jsx)(l.InputDragger,{value:y,onTextChange:b,placeholder:`0-${t.durationInFrames-1}`,onValueChange:x,name:"frame",step:1,min:0,status:"ok",max:t.durationInFrames-1,rightAlign:!0})})})]}):null]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:f.optionRow,children:[(0,i.jsx)("div",{style:f.label,children:"Container"}),(0,i.jsx)("div",{style:f.rightRow,children:(0,i.jsx)(s.Combobox,{values:L,selectedId:w,title:"Container"})})]}),(0,i.jsxs)("div",{style:f.optionRow,children:[(0,i.jsxs)("div",{style:f.label,children:["Codec",(0,i.jsx)(o.Spacing,{x:.5}),(0,i.jsx)(h.OptionExplainerBubble,{id:"videoCodecOption"})]}),(0,i.jsx)("div",{style:f.rightRow,children:(0,i.jsx)(s.Combobox,{values:N,selectedId:E,title:"Codec"})})]}),(0,i.jsx)(d.FrameRangeSetting,{durationInFrames:t.durationInFrames,startFrame:null!=_?_:0,endFrame:null!=P?P:t.durationInFrames-1,setStartFrame:T,setEndFrame:I})]}),(0,i.jsx)(m.RenderModalOutputName,{existence:!1,inputStyle:f.input,outName:A,onValueChange:O,validationMessage:M,label:"Download name"}),(0,i.jsxs)("div",{style:f.optionRow,children:[(0,i.jsxs)("div",{style:f.label,children:["Log Level ",(0,i.jsx)(o.Spacing,{x:.5}),(0,i.jsx)(h.OptionExplainerBubble,{id:"logLevelOption"})]}),(0,i.jsx)("div",{style:f.rightRow,children:(0,i.jsx)(s.Combobox,{values:j,selectedId:F,title:"Log Level"})})]})]})}},783742,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CheckCircleFilled=void 0;let i=e.r(222260);r.CheckCircleFilled=e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",style:{width:14,height:14},viewBox:"0 0 512 512",...e,children:(0,i.jsx)("path",{d:"M256 512a256 256 0 1 1 0-512 256 256 0 1 1 0 512zM374 145.7c-10.7-7.8-25.7-5.4-33.5 5.3L221.1 315.2 169 263.1c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l72 72c5 5 11.8 7.5 18.8 7s13.4-4.1 17.5-9.8L379.3 179.2c7.8-10.7 5.4-25.7-5.3-33.5z"})})},455994,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WebRenderModalLicenseKeyDetails=r.fetchLicenseKeyDetails=void 0;let i=e.r(222260),a=e.r(921224),n=e.r(783742),o=e.r(97870),s={color:a.LIGHT_TEXT,fontSize:14,fontFamily:"sans-serif",lineHeight:1.5,display:"flex",alignItems:"center"},l={fontSize:14,fontFamily:"sans-serif",lineHeight:1.5,cursor:"pointer"},u={display:"flex",alignItems:"center",gap:6},c={width:14,height:14,flexShrink:0},d="https://remotion.pro";r.fetchLicenseKeyDetails=async e=>(await fetch(`${d}/api/validate-license-key`,{method:"POST",body:JSON.stringify({licenseKey:e}),headers:{"Content-Type":"application/json"}})).json(),r.WebRenderModalLicenseKeyDetails=({details:e})=>(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{style:u,children:[(0,i.jsx)(n.CheckCircleFilled,{style:{...c,fill:a.LIGHT_TEXT}}),(0,i.jsxs)("div",{style:s,children:["Belongs to",(0,i.jsx)("a",{href:`${d}/projects/${e.projectSlug}`,target:"_blank",style:l,children:e.projectName}),"-",(0,i.jsx)("a",{href:`${d}/projects/${e.projectSlug}/usage#client-renders-usage`,target:"_blank",style:l,children:"View usage"})]})]}),e.hasActiveSubscription?(0,i.jsxs)("div",{style:u,children:[(0,i.jsx)(n.CheckCircleFilled,{style:{...c,fill:a.LIGHT_TEXT}}),(0,i.jsx)("div",{style:s,children:"Active Company License"})]}):(0,i.jsxs)("div",{style:u,children:[(0,i.jsx)(o.WarningTriangle,{type:"warning",style:{...c,fill:a.WARNING_COLOR}}),(0,i.jsx)("div",{style:s,children:"No active Company License"})]})]})},966265,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WebRenderModalLicense=r.row=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(671927),s=e.r(310099),l=e.r(97870),u=e.r(146575),c=e.r(455994);r.row={display:"flex",flexDirection:"row",paddingLeft:16,paddingRight:16};let d={flex:1},p={color:n.LIGHT_TEXT,fontSize:14,fontFamily:"sans-serif",paddingLeft:16,paddingRight:16,paddingTop:16,paddingBottom:8,lineHeight:1.5},f={color:n.LIGHT_TEXT,fontSize:14,fontFamily:"sans-serif",padding:9,border:"1px solid "+n.INPUT_BORDER_COLOR_UNHOVERED,borderRadius:8,lineHeight:1.5,marginLeft:16,marginRight:16},h={color:"white",fontSize:14},m={fontSize:14,lineHeight:"40px",color:n.LIGHT_TEXT,flex:1,fontFamily:"sans-serif",cursor:"pointer",userSelect:"none"},g={minWidth:250},v={display:"flex",alignItems:"center",gap:10,flex:1},y={fontSize:14,fontFamily:"monospace",color:n.BLUE},b={fontSize:14,fontFamily:"monospace",color:n.LIGHT_TEXT,backgroundColor:n.INPUT_BACKGROUND,padding:6,borderRadius:3,marginTop:6,overflowX:"auto",maxWidth:"100%"},x={...b,fontSize:11},w="rm_pub_";r.WebRenderModalLicense=({licenseKey:e,setLicenseKey:t,initialPublicLicenseKey:n})=>{let[S,k]=(0,a.useState)({valid:!0,message:null,details:null}),[C,E]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(null===e||"free-license"===e)return k({valid:!0,message:null,details:null});let t=(e=>{if(0===e.length)return{valid:!1,message:null,details:null};if(!e.startsWith(w))return{valid:!1,message:`License key must start with "${w}"`,details:null};let t=e.slice(w.length);return/^[a-zA-Z0-9]*$/.test(t)?55!==e.length?{valid:!1,message:"License key must be 55 characters long",details:null}:{valid:!0,message:null,details:null}:{valid:!1,message:"License key must contain only alphanumeric characters after the prefix",details:null}})(e);if(!t.valid)return k(t);k({valid:!0,message:null,details:null}),E(!0),(0,c.fetchLicenseKeyDetails)(e).then(e=>{E(!1),e.isValid?k({valid:!0,message:null,details:e}):k({valid:!1,message:"License key is invalid or has been reset",details:null})}).catch(()=>{E(!1),k({valid:!1,message:"Failed to fetch license key details",details:null})})},[e]);let _=(0,a.useCallback)(()=>{t("free-license")},[t]),T=(0,a.useCallback)(()=>{t(null!=n?n:"")},[n,t]),P=(0,a.useCallback)(e=>{t(e.target.value)},[t]);return(0,i.jsxs)("div",{style:d,children:[(0,i.jsxs)("div",{style:p,children:["Remotion is free if you are an individual or company with a headcount of 3 or less. See"," ",(0,i.jsx)("a",{style:h,href:"https://remotion.dev/license",children:"LICENSE.md"}),"."]}),(0,i.jsx)("div",{style:r.row,children:(0,i.jsxs)("div",{style:v,children:[(0,i.jsx)(o.Checkbox,{checked:"free-license"===e,onChange:_,name:"free-license",rounded:!0}),(0,i.jsxs)("div",{style:m,onClick:_,children:["I am eligible for the Free License, ","don't"," print a warning"]})]})}),"free-license"===e?(0,i.jsxs)("div",{style:f,children:["Enjoy Remotion! Add the following to"," ",(0,i.jsx)("code",{style:y,children:"remotion.config.ts"})," to persist this setting:",(0,i.jsx)("div",{style:b,children:"Config.setPublicLicenseKey('free-license');"})]}):null,(0,i.jsx)("div",{style:r.row,children:(0,i.jsxs)("div",{style:v,children:[(0,i.jsx)(o.Checkbox,{checked:"free-license"!==e&&null!==e,onChange:T,name:"company-license",rounded:!0}),(0,i.jsx)("div",{style:m,onClick:T,children:"I have a Company License"})]})}),"free-license"!==e&&null!==e?(0,i.jsxs)("div",{style:f,children:["Add your public license key from"," ",(0,i.jsx)("a",{href:"https://remotion.pro/dashboard",target:"_blank",style:h,children:"remotion.pro"})," ","below.",(0,i.jsx)(u.Spacing,{y:1,block:!0}),(0,i.jsx)(s.RemotionInput,{value:e,onChange:P,placeholder:"remotion.pro public license key (starts with rm_pub_)",status:S.valid||0===e.length?"ok":"error",rightAlign:!1,style:g,autoFocus:!0}),S.message?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Spacing,{y:1,block:!0}),(0,i.jsx)(l.ValidationMessage,{message:S.message,align:"flex-start",type:"error"})]}):null,S.valid&&e.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Spacing,{y:1,block:!0}),"Add the following to"," ",(0,i.jsx)("code",{style:y,children:"remotion.config.ts"})," to persist this setting:",(0,i.jsx)("div",{style:x,children:"Config.setPublicLicenseKey('"+e+"');"})]}):null,C&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Spacing,{y:1,block:!0}),"Loading license key details..."]}),S.details&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Spacing,{y:1,block:!0}),(0,i.jsx)(c.WebRenderModalLicenseKeyDetails,{details:S.details})]})]}):null,null===e?(0,i.jsxs)("div",{style:p,children:["If you are not eligible for the free license, you need to obtain a"," ",(0,i.jsx)("a",{style:h,target:"_blank",href:"https://remotion.pro/license",children:"Company License"}),"."]}):null]})}},210820,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WebRenderModalPicture=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(671927),o=e.r(432804),s=e.r(462098),l=e.r(239229),u=e.r(505605),c=e.r(581843),d={flex:1};r.WebRenderModalPicture=({renderMode:e,videoBitrate:t,setVideoBitrate:r,keyframeIntervalInSeconds:p,setKeyframeIntervalInSeconds:f,transparent:h,setTransparent:m,scale:g,setScale:v,compositionWidth:y,compositionHeight:b})=>{let x=(0,a.useMemo)(()=>(0,u.getQualityOptions)(t,r),[t,r]),w=(0,a.useCallback)(e=>{m(e.target.checked)},[m]);return(0,i.jsxs)("div",{style:d,children:[(0,i.jsx)(c.ScaleSetting,{scale:g,setScale:v,compositionWidth:y,compositionHeight:b}),"video"!==e?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:s.optionRow,children:[(0,i.jsx)("div",{style:s.label,children:"Quality"}),(0,i.jsx)("div",{style:s.rightRow,children:(0,i.jsx)(o.Combobox,{values:x,selectedId:t,title:"Quality"})})]}),(0,i.jsx)(l.NumberSetting,{name:"Keyframe Interval",formatter:e=>`${e}s`,min:1,max:300,step:1,value:p,onValueChanged:f}),(0,i.jsxs)("div",{style:s.optionRow,children:[(0,i.jsx)("div",{style:s.label,children:"Transparent"}),(0,i.jsx)("div",{style:s.rightRow,children:(0,i.jsx)(n.Checkbox,{checked:h,onChange:w,name:"transparent"})})]})]})]})}},526051,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WebRenderModalWithLoader=void 0;let i=e.r(222260),a=e.r(213637),n=e.r(29282),o=e.r(347540),s=e.r(597066),l=e.r(44600),u=e.r(721045),c=e.r(21793),d=e.r(261228),p=e.r(434063),f=e.r(369225),h=e.r(137798),m=e.r(839270),g=e.r(652693),v=e.r(494296),y=e.r(80047),b=e.r(454528),x=e.r(132726),w=e.r(896509),S=e.r(200539),k=e.r(324502),C=e.r(860979),E=e.r(836693),_=e.r(896254),T=e.r(503233),P=e.r(747558),I=e.r(535813),A=e.r(25642),O=e.r(236440),M=e.r(852109),F=e.r(121383),R=e.r(966265),D=e.r(210820),j=["?","*","+",":","%"],L=({initialFrame:e,defaultProps:t,inFrameMark:r,outFrameMark:b,initialLogLevel:L,initialLicenseKey:B})=>{let N=(0,o.useContext)(T.ResolvedCompositionContext),{setSelectedModal:$}=(0,o.useContext)(h.ModalsContext),{setSidebarCollapsedState:z}=(0,o.useContext)(m.SidebarContext),{addClientStillJob:U,addClientVideoJob:V}=(0,o.useContext)(w.RenderQueueContext);if(!N)throw Error("Should not be able to render without resolving comp first");let{resolved:{result:H},unresolved:W}=N,[q]=(0,o.useState)(()=>void 0===H.durationInFrames||H.durationInFrames>1),[G,Z]=(0,o.useState)(q?"video":"still"),[K,Q]=(0,o.useState)("general"),[X,J]=(0,o.useState)("png"),[Y,ee]=(0,o.useState)(()=>e),[et,er]=(0,o.useState)(()=>L),[ei,ea]=(0,o.useState)(()=>t),[en,eo]=(0,o.useState)(3e4),[es,el]=(0,o.useState)(null),[eu,ec]=(0,o.useState)(!1),[ed,ep]=(0,o.useState)("h264"),[ef,eh]=(0,o.useState)("mp4"),[em,eg]=(0,o.useState)("aac"),[ev,ey]=(0,o.useState)("medium"),[eb,ex]=(0,o.useState)("high"),[ew,eS]=(0,o.useState)("no-preference"),[ek,eC]=(0,o.useState)(5),[eE,e_]=(0,o.useState)(()=>null!=r?r:null),[eT,eP]=(0,o.useState)(()=>null!=b?b:null),[eI,eA]=(0,o.useState)(!1),[eO,eM]=(0,o.useState)(!1),[eF,eR]=(0,o.useState)(1),[eD,ej]=(0,o.useState)(B),eL=(0,P.useEncodableAudioCodecs)(ef),eB=(0,I.useEncodableVideoCodecs)(ef),eN=(0,o.useMemo)(()=>{var e;return eL.includes(em)?em:null!=(e=eL[0])?e:em},[em,eL]),e$=(0,o.useMemo)(()=>{var e;return eB.includes(ed)?ed:null!=(e=eB[0])?e:ed},[ed,eB]),ez=(0,o.useMemo)(()=>null===eT?H.durationInFrames-1:Math.max(0,Math.min(H.durationInFrames-1,eT)),[eT,H.durationInFrames]),eU=(0,o.useMemo)(()=>null===eE?0:Math.max(0,Math.min(ez,eE)),[ez,eE]),[eV]=(0,o.useState)(()=>(0,a.getDefaultOutLocation)({compositionName:H.id,defaultExtension:"still"===G?X:q?ef:X,type:"asset",compositionDefaultOutName:H.defaultOutName,clientSideRender:!0})),[eH,eW]=(0,o.useState)(()=>eV),eq=(0,o.useCallback)(e=>{J(e),eW(t=>(0,E.getStringBeforeSuffix)(t)+"."+e)},[]),eG=(0,o.useCallback)(e=>{eh(e),eg((0,n.getDefaultAudioCodecForContainer)(e)),eW(t=>(0,E.getStringBeforeSuffix)(t)+"."+e)},[]),eZ=(0,o.useCallback)(e=>{Z(e),"video"===e?eW(e=>(0,E.getStringBeforeSuffix)(e)+"."+ef):"still"===e&&eW(e=>(0,E.getStringBeforeSuffix)(e)+"."+X)},[ef,X]),eK=(0,o.useMemo)(()=>{let e=[{label:"Still",onClick:()=>{eZ("still")},key:"still",selected:"still"===G}];return H.durationInFrames>1&&e.push({label:"Video",onClick:()=>{eZ("video")},key:"video",selected:"video"===G}),e},[G,H.durationInFrames,eZ]),eQ=(0,o.useCallback)(e=>{ee(e)},[ee]),eX=(0,o.useCallback)(e=>{ee(t=>{let r=parseFloat(e);return Number.isNaN(r)?t:r})},[ee]),eJ=(0,o.useCallback)(e=>{eW(e.target.value)},[]),eY=(0,o.useMemo)(()=>{if("still"===G)return(({outName:e,stillImageFormat:t})=>{try{let r=e.substring(e.lastIndexOf(".")+1),i=e.substring(0,e.lastIndexOf("."));if(i.length<1)throw Error("The prefix must be at least 1 character long");if("."===i[0]||(()=>{for(let e of i.split("/"))if("."===e[0])return!0;return!1})())throw Error("The output name must not start with a dot");if(i.split("").some(e=>j.includes(e)))throw Error("Filename can't contain the following characters:  ?, *, +, %, :");if(("jpeg"!==t||"jpg"!==r)&&r!==t)throw Error(`The extension ${r} is not supported for still image format ${t}`);return{valid:!0}}catch(e){return{valid:!1,error:e}}})({outName:eH,stillImageFormat:X});try{let e=eH.substring(eH.lastIndexOf(".")+1),t=eH.substring(0,eH.lastIndexOf("."));if(t.length<1)throw Error("The prefix must be at least 1 character long");if("."===t[0]||(()=>{for(let e of t.split("/"))if("."===e[0])return!0;return!1})())throw Error("The output name must not start with a dot");if(t.split("").some(e=>j.includes(e)))throw Error("Filename can't contain the following characters:  ?, *, +, %, :");if(e!==ef)throw Error(`The extension ${e} is not supported for container format ${ef}`);return{valid:!0}}catch(e){return{valid:!1,error:e}}},[eH,X,G,ef]),e0=(0,o.useCallback)(()=>{var e,t;let r={component:W.component,calculateMetadata:null!=(e=W.calculateMetadata)?e:null,width:H.width,height:H.height,fps:H.fps,durationInFrames:H.durationInFrames,defaultProps:H.defaultProps};"still"===G?U({type:"client-still",compositionId:H.id,outName:eH,imageFormat:X,frame:Y,inputProps:ei,delayRenderTimeout:en,mediaCacheSizeInBytes:es,logLevel:et,licenseKey:eD,scale:eF},r):V({type:"client-video",compositionId:H.id,outName:eH,container:ef,videoCodec:e$,audioCodec:eN,startFrame:eU,endFrame:ez,audioBitrate:ev,videoBitrate:eb,hardwareAcceleration:ew,keyframeIntervalInSeconds:ek,transparent:eI,muted:eO,inputProps:ei,delayRenderTimeout:en,mediaCacheSizeInBytes:es,logLevel:et,licenseKey:eD,scale:eF},r),z({left:null,right:"expanded"}),(0,x.persistSelectedOptionsSidebarPanel)("renders"),null==(t=x.optionsSidebarTabs.current)||t.selectRendersPanel(),$(null)},[G,W.component,W.calculateMetadata,H.width,H.height,H.fps,H.durationInFrames,H.defaultProps,H.id,z,eH,X,Y,ei,en,es,et,eD,ef,e$,eN,eU,ez,ev,eb,ew,ek,eI,eO,$,U,V,eF]);return(0,i.jsxs)("div",{style:_.outerModalStyle,children:[(0,i.jsx)(y.ModalHeader,{title:`Render ${H.id}`}),(0,i.jsxs)("div",{style:_.container,children:[(0,i.jsx)(S.SegmentedControl,{items:eK,needsWrapping:!1}),(0,i.jsx)("div",{style:_.flexer}),(0,i.jsxs)(g.Button,{autoFocus:!0,onClick:e0,style:_.buttonStyle,disabled:!eY.valid,children:["Render ",G,(0,i.jsx)(s.ShortcutHint,{keyToPress:"",cmdOrCtrl:!0})]})]}),(0,i.jsx)("div",{style:_.container,children:(0,i.jsx)(A.WebRendererExperimentalBadge,{})}),(0,i.jsxs)("div",{style:_.horizontalLayout,children:[(0,i.jsxs)("div",{style:_.leftSidebar,children:[(0,i.jsxs)(k.VerticalTab,{style:_.horizontalTab,selected:"general"===K,onClick:()=>Q("general"),children:[(0,i.jsx)("div",{style:_.iconContainer,children:(0,i.jsx)(d.FileIcon,{style:_.icon})}),"General"]}),(0,i.jsxs)(k.VerticalTab,{style:_.horizontalTab,selected:"data"===K,onClick:()=>Q("data"),children:[(0,i.jsx)("div",{style:_.iconContainer,children:(0,i.jsx)(c.DataIcon,{style:_.icon})}),"Input Props"]}),(0,i.jsxs)(k.VerticalTab,{style:_.horizontalTab,selected:"picture"===K,onClick:()=>Q("picture"),children:[(0,i.jsx)("div",{style:_.iconContainer,children:(0,i.jsx)(p.PicIcon,{style:_.icon})}),"Picture"]}),"video"===G?(0,i.jsxs)(k.VerticalTab,{style:_.horizontalTab,selected:"audio"===K,onClick:()=>Q("audio"),children:[(0,i.jsx)("div",{style:_.iconContainer,children:(0,i.jsx)(l.AudioIcon,{style:_.icon})}),"Audio"]}):null,(0,i.jsxs)(k.VerticalTab,{style:_.horizontalTab,selected:"advanced"===K,onClick:()=>Q("advanced"),children:[(0,i.jsx)("div",{style:_.iconContainer,children:(0,i.jsx)(f.GearIcon,{style:_.icon})}),"Other"]}),(0,i.jsxs)(k.VerticalTab,{style:_.horizontalTab,selected:"license"===K,onClick:()=>Q("license"),children:[(0,i.jsx)("div",{style:_.iconContainer,children:(0,i.jsx)(u.CertificateIcon,{style:_.icon})}),"License"]})]}),(0,i.jsx)("div",{style:_.optionsPanel,className:v.VERTICAL_SCROLLBAR_CLASSNAME,children:"general"===K?(0,i.jsx)(F.WebRenderModalBasic,{renderMode:G,resolvedComposition:H,imageFormat:X,setStillFormat:eq,frame:Y,onFrameChanged:eX,onFrameSetDirectly:eQ,container:ef,setContainerFormat:eG,setCodec:ep,encodableVideoCodecs:eB,effectiveVideoCodec:e$,startFrame:eU,setStartFrame:e_,endFrame:ez,setEndFrame:eP,outName:eH,onOutNameChange:eJ,validationMessage:eY.valid?null:eY.error.message,logLevel:et,setLogLevel:er}):"data"===K?(0,i.jsx)(C.DataEditor,{defaultProps:ei,setDefaultProps:ea,unresolvedComposition:W,mayShowSaveButton:!1,propsEditType:"input-props",saving:eu,setSaving:ec,readOnlyStudio:!1}):"picture"===K?(0,i.jsx)(D.WebRenderModalPicture,{renderMode:G,videoBitrate:eb,setVideoBitrate:ex,keyframeIntervalInSeconds:ek,setKeyframeIntervalInSeconds:eC,transparent:eI,setTransparent:eA,scale:eF,setScale:eR,compositionWidth:H.width,compositionHeight:H.height}):"audio"===K?(0,i.jsx)(M.WebRenderModalAudio,{muted:eO,setMuted:eM,audioCodec:em,setAudioCodec:eg,audioBitrate:ev,setAudioBitrate:ey,container:ef,encodableCodecs:eL,effectiveAudioCodec:eN}):"advanced"===K?(0,i.jsx)(O.WebRenderModalAdvanced,{renderMode:G,delayRenderTimeout:en,setDelayRenderTimeout:eo,mediaCacheSizeInBytes:es,setMediaCacheSizeInBytes:el,hardwareAcceleration:ew,setHardwareAcceleration:eS}):(0,i.jsx)(R.WebRenderModalLicense,{licenseKey:eD,setLicenseKey:ej,initialPublicLicenseKey:B})})]})]})};r.WebRenderModalWithLoader=e=>(0,i.jsx)(b.DismissableModal,{children:(0,i.jsx)(T.ResolveCompositionBeforeModal,{compositionId:e.compositionId,children:(0,i.jsx)(L,{...e})})})},891077,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CopyButton=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(238666),o=e.r(652693),s=e.r(277984),l=e.r(146575),u={display:"flex",minWidth:"114px"},c=(0,i.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"clipboard",className:"svg-inline--fa fa-clipboard fa-w-12",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",style:{width:16,height:16,color:"white"},children:(0,i.jsx)("path",{fill:"currentColor",d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 40c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm144 418c0 3.3-2.7 6-6 6H54c-3.3 0-6-2.7-6-6V118c0-3.3 2.7-6 6-6h42v36c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-36h42c3.3 0 6 2.7 6 6z"})}),d={fontSize:14};r.CopyButton=({textToCopy:e,label:t,labelWhenCopied:r})=>{let[p,f]=(0,a.useState)(!1),h=(0,a.useCallback)(()=>{(0,n.copyText)(e).then(()=>{f(Date.now())}).catch(e=>{(0,s.showNotification)(`Could not copy: ${e.message}`,2e3)})},[e]);return(0,a.useEffect)(()=>{if(!p)return;let e=setTimeout(()=>f(!1),2e3);return()=>clearTimeout(e)},[p]),(0,i.jsxs)(o.Button,{onClick:h,buttonContainerStyle:u,children:[c,(0,i.jsx)(l.Spacing,{x:1.5})," ",(0,i.jsx)("span",{style:d,children:p?r:t})]})}},25599,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OpenIssueButton=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o={width:"11px",height:"11px"},s={border:"none",width:"24px",height:"24px",display:"flex",justifyContent:"center",alignItems:"center"};r.OpenIssueButton=({link:e})=>{let[t,r]=(0,a.useState)(!1),l=(0,a.useCallback)(()=>{window.open(e,"_blank")},[e]),u=(0,a.useMemo)(()=>t?"white":n.LIGHT_TEXT,[t]),c=(0,i.jsx)("svg",{viewBox:"0 0 512 512",style:o,children:(0,i.jsx)("path",{fill:u,d:"M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32h82.7L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3V192c0 17.7 14.3 32 32 32s32-14.3 32-32V32c0-17.7-14.3-32-32-32H320zM80 32C35.8 32 0 67.8 0 112V432c0 44.2 35.8 80 80 80H400c44.2 0 80-35.8 80-80V320c0-17.7-14.3-32-32-32s-32 14.3-32 32V432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16H192c17.7 0 32-14.3 32-32s-14.3-32-32-32H80z"})}),d=(0,a.useCallback)(()=>{r(!0)},[]),p=(0,a.useCallback)(()=>{r(!1)},[]);return(0,i.jsx)("button",{title:"Open GitHub issue in new Tab",type:"button",onPointerEnter:d,onPointerLeave:p,style:s,onClick:l,children:c})}},915908,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.KnownBugs=void 0;let i=e.r(222260),a=e.r(25599),n={display:"flex",flexDirection:"row",alignItems:"center"},o={fontSize:14,flex:1};r.KnownBugs=({bugs:e})=>{let t=e.map(e=>(0,i.jsxs)("div",{style:n,children:[(0,i.jsxs)("div",{style:o,children:[" ",e.title]}),(0,i.jsx)(a.OpenIssueButton,{link:e.link})]},e.description+e.link));return(0,i.jsx)("div",{children:t})}},829219,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UpdateModal=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(921224),o=e.r(238666),s=e.r(891077),l=e.r(915908),u=e.r(80047),c=e.r(454528),d=e.r(277984),p=e.r(146575),f={padding:20,paddingTop:0},h={fontSize:14},m={paddingTop:12,paddingBottom:8,...h},g={background:n.SELECTED_BACKGROUND,padding:"12px 10px",fontSize:14,marginTop:10,marginBottom:10},v={fontWeight:"bold",color:n.BLUE,textDecoration:"none",...h},y={npm:"npx remotion upgrade",yarn:"yarn remotion upgrade",pnpm:"pnpm exec remotion upgrade",bun:"bun remotion upgrade",unknown:"npx remotion upgrade"};r.UpdateModal=({info:e,knownBugs:t})=>{let r=(0,a.useMemo)(()=>t&&(null==t?void 0:t.length)>0,[t]),n=y[e.packageManager],b=(0,a.useCallback)(()=>{(0,o.copyText)(n).catch(e=>{(0,d.showNotification)(`Could not copy: ${e.message}`,2e3)})},[n]);return(0,i.jsxs)(c.DismissableModal,{children:[(0,i.jsx)(u.ModalHeader,{title:"Update available"}),(0,i.jsxs)("div",{style:f,children:[r?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:m,children:["The currently installed version ",e.currentVersion," has the following known bugs:"]}),(0,i.jsx)(l.KnownBugs,{bugs:t}),(0,i.jsx)("div",{style:{height:"20px"}}),(0,i.jsx)("div",{style:h,children:"To upgrade, run the following command:"})]}):(0,i.jsx)("div",{style:m,children:"A new update for Remotion is available! Run the following command:"}),(0,i.jsxs)(p.Row,{align:"center",children:[(0,i.jsx)(p.Flex,{children:(0,i.jsx)("pre",{onClick:b,style:g,children:n})}),(0,i.jsx)(p.Spacing,{x:1}),(0,i.jsx)(s.CopyButton,{textToCopy:n,label:"Copy",labelWhenCopied:"Copied!"})]}),(0,i.jsxs)("div",{style:h,children:["This will upgrade Remotion from ",e.currentVersion," to"," ",e.latestVersion,"."]}),(0,i.jsxs)("div",{style:h,children:["Read the"," ",(0,i.jsx)("a",{style:v,target:"_blank",href:"https://github.com/remotion-dev/remotion/releases",children:"Release notes"})," ","to know what","'s"," new in Remotion."]})]})]})}},92301,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.Modals=void 0;let a=e.r(222260),n=e.r(347540),o=e.r(850586),s=e.r(137798),l=e.r(413088),u=e.r(288774),c=e.r(152682),d=e.r(425837),p=e.r(292354),f=e.r(351203),h=i(e.r(493432)),m=e.r(902315),g=e.r(620872),v=e.r(526051),y=e.r(829219);r.Modals=({readOnlyStudio:e})=>{let{selectedModal:t}=(0,n.useContext)(s.ModalsContext),r="connected"===(0,n.useContext)(o.StudioServerConnectionCtx).previewServerState.type;return(0,a.jsxs)(a.Fragment,{children:[t&&"duplicate-comp"===t.type&&(0,a.jsx)(d.DuplicateComposition,{compositionType:t.compositionType,compositionId:t.compositionId}),t&&"delete-comp"===t.type&&(0,a.jsx)(c.DeleteComposition,{compositionId:t.compositionId}),t&&"rename-comp"===t.type&&(0,a.jsx)(p.RenameComposition,{compositionId:t.compositionId}),t&&"input-props-override"===t.type&&(0,a.jsx)(f.OverrideInputPropsModal,{}),t&&"web-render"===t.type&&(0,a.jsx)(v.WebRenderModalWithLoader,{type:"web-render",initialFrame:t.initialFrame,compositionId:t.compositionId,defaultProps:t.defaultProps,inFrameMark:t.inFrameMark,outFrameMark:t.outFrameMark,initialLogLevel:t.initialLogLevel,initialLicenseKey:t.initialLicenseKey}),t&&r&&"server-render"===t.type&&(0,a.jsx)(g.RenderModalWithLoader,{initialFrame:t.initialFrame,initialDarkMode:t.initialDarkMode,compositionId:t.compositionId,initialVideoImageFormat:t.initialVideoImageFormat,initialJpegQuality:t.initialJpegQuality,initialScale:t.initialScale,initialLogLevel:t.initialLogLevel,initialOffthreadVideoCacheSizeInBytes:t.initialOffthreadVideoCacheSizeInBytes,initialOffthreadVideoThreads:t.initialOffthreadVideoThreads,initialMediaCacheSizeInBytes:t.initialMediaCacheSizeInBytes,initialConcurrency:t.initialConcurrency,maxConcurrency:t.maxConcurrency,minConcurrency:t.minConcurrency,initialStillImageFormat:t.initialStillImageFormat,initialMuted:t.initialMuted,initialEnforceAudioTrack:t.initialEnforceAudioTrack,initialProResProfile:t.initialProResProfile,initialx264Preset:t.initialx264Preset,initialPixelFormat:t.initialPixelFormat,initialAudioBitrate:t.initialAudioBitrate,initialVideoBitrate:t.initialVideoBitrate,initialEveryNthFrame:t.initialEveryNthFrame,initialNumberOfGifLoops:t.initialNumberOfGifLoops,initialDelayRenderTimeout:t.initialDelayRenderTimeout,initialEnvVariables:t.initialEnvVariables,initialDisableWebSecurity:t.initialDisableWebSecurity,initialGl:t.initialOpenGlRenderer,initialHeadless:t.initialHeadless,initialIgnoreCertificateErrors:t.initialIgnoreCertificateErrors,initialEncodingBufferSize:t.initialEncodingBufferSize,initialEncodingMaxRate:t.initialEncodingMaxRate,initialUserAgent:t.initialUserAgent,initialColorSpace:t.initialColorSpace,initialMultiProcessOnLinux:t.initialMultiProcessOnLinux,initialRepro:t.initialRepro,initialBeep:t.initialBeep,initialForSeamlessAacConcatenation:t.initialForSeamlessAacConcatenation,defaultProps:t.defaultProps,inFrameMark:t.inFrameMark,outFrameMark:t.outFrameMark,defaultConfigurationAudioCodec:t.defaultConfigurationAudioCodec,defaultConfigurationVideoCodec:t.defaultConfigurationVideoCodec,renderTypeOfLastRender:t.renderTypeOfLastRender,defaultMetadata:t.defaulMetadata,initialHardwareAcceleration:t.initialHardwareAcceleration,initialChromeMode:t.initialChromeMode,renderDefaults:t.renderDefaults}),t&&"render-progress"===t.type&&(0,a.jsx)(m.RenderStatusModal,{jobId:t.jobId}),t&&"update"===t.type&&(0,a.jsx)(y.UpdateModal,{info:t.info,knownBugs:t.knownBugs}),t&&"install-packages"===t.type&&(0,a.jsx)(u.InstallPackageModal,{packageManager:t.packageManager}),t&&"quick-switcher"===t.type&&(0,a.jsx)(h.default,{readOnlyStudio:e,invocationTimestamp:t.invocationTimestamp,initialMode:t.mode}),process.env.ASK_AI_ENABLED&&(0,a.jsx)(l.AskAiModal,{})]})}},449943,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t});Object.defineProperty(r,"__esModule",{value:!0}),r.Editor=r.BUFFER_STATE_DELAY_IN_MILLISECONDS=void 0;let s=e.r(222260),l=e.r(853987),u=o(e.r(347540)),c=e.r(49019),d=e.r(921224),p=e.r(971831),f=e.r(184085),h=e.r(818046),m=e.r(260240),g=e.r(7791),v=e.r(77194),y=e.r(92301),b=e.r(277984),x=e.r(156866),w={backgroundColor:d.BACKGROUND,display:"flex",width:"100%",height:"100%",flexDirection:"column",position:"absolute"};r.BUFFER_STATE_DELAY_IN_MILLISECONDS=void 0===process.env.BUFFER_STATE_DELAY_IN_MILLISECONDS||null===process.env.BUFFER_STATE_DELAY_IN_MILLISECONDS?300:Number(process.env.BUFFER_STATE_DELAY_IN_MILLISECONDS),r.Editor=({Root:e,readOnlyStudio:t})=>{let i=l.PlayerInternals.useElementSize(f.drawRef,{triggerOnWindowResize:!1,shouldApplyCssTransforms:!0});(0,u.useEffect)(()=>{if(t)return;let e=e=>{window.remotion_unsavedProps&&(e.returnValue="Are you sure you want to leave?")};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[t]);let[a,n]=u.default.useState(!1),o=(0,u.useCallback)(()=>{n(!0)},[]),d=(0,u.useMemo)(()=>i?{type:"canvas-size",canvasSize:i}:null,[i]),S=(0,u.useMemo)(()=>u.default.memo(e),[e]);return(0,s.jsx)(m.HigherZIndex,{onEscape:p.noop,onOutsideClick:p.noop,children:(0,s.jsxs)(h.TimelineZoomContext,{children:[(0,s.jsx)(c.Internals.CurrentScaleContext.Provider,{value:d,children:(0,s.jsxs)("div",{style:w,children:[a?(0,s.jsx)(S,{}):null,(0,s.jsxs)(c.Internals.CanUseRemotionHooksProvider,{children:[(0,s.jsx)(g.EditorContent,{readOnlyStudio:t,children:(0,s.jsx)(x.TopPanel,{drawRef:f.drawRef,bufferStateDelayInMilliseconds:r.BUFFER_STATE_DELAY_IN_MILLISECONDS,onMounted:o,readOnlyStudio:t})}),(0,s.jsx)(v.GlobalKeybindings,{})]})]})}),(0,s.jsx)(y.Modals,{readOnlyStudio:t}),(0,s.jsx)(b.NotificationCenter,{})]})})}},595373,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PreviewSizeProvider=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(601679),s="remotion.previewSize";r.PreviewSizeProvider=({children:e})=>{let[t,r]=(0,a.useState)(()=>{let e;return null===(e=localStorage.getItem(s))?{size:"auto",translation:{x:0,y:0}}:JSON.parse(e)}),[l,u]=(0,a.useState)(()=>({x:0,y:0})),{editorZoomGestures:c}=(0,a.useContext)(o.EditorZoomGesturesContext),d=(0,a.useCallback)(e=>{r(t=>{let r=e(t);return localStorage.setItem(s,JSON.stringify(r)),r})},[]),p=(0,a.useMemo)(()=>({size:c?t:{size:t.size,translation:{x:0,y:0}},setSize:d,translation:l,setTranslation:u}),[c,t,d,l]);return(0,i.jsx)(n.Internals.PreviewSizeContext.Provider,{value:p,children:e})}},489291,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CheckerboardProvider=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(786676);r.CheckerboardProvider=({children:e})=>{let[t,r]=(0,a.useState)(()=>(0,n.loadCheckerboardOption)()),o=(0,a.useCallback)(e=>{r(t=>{let r=e(t);return(0,n.persistCheckerboardOption)(r),r})},[]),s=(0,a.useMemo)(()=>({checkerboard:t,setCheckerboard:o}),[t,o]);return(0,i.jsx)(n.CheckerboardContext.Provider,{value:s,children:e})}},41368,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MediaVolumeProvider=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(49019),o=e.r(929138);r.MediaVolumeProvider=({children:e})=>{let[t,r]=(0,a.useState)(()=>(0,o.loadMuteOption)()),[s,l]=(0,a.useState)(1),u=(0,a.useMemo)(()=>({mediaMuted:t,mediaVolume:s}),[t,s]),c=(0,a.useMemo)(()=>({setMediaMuted:r,setMediaVolume:l}),[]);return(0,i.jsx)(n.Internals.MediaVolumeContext.Provider,{value:u,children:(0,i.jsx)(n.Internals.SetMediaVolumeContext.Provider,{value:c,children:e})})}},437714,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ModalsProvider=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(137798);r.ModalsProvider=({children:e})=>{let[t,r]=(0,a.useState)(null),o=(0,a.useMemo)(()=>({selectedModal:t,setSelectedModal:r}),[t]);return(0,i.jsx)(n.ModalsContext.Provider,{value:o,children:e})}},601862,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ClientRenderQueueProcessor=void 0;let i=e.r(29282),a=e.r(347540),n=e.r(896509);r.ClientRenderQueueProcessor=()=>{let{getAbortController:e,getCompositionForJob:t,updateClientJobProgress:r,markClientJobDone:o,markClientJobFailed:s,markClientJobCancelled:l,setProcessJobCallback:u}=(0,a.useContext)(n.RenderQueueContext),c=(0,a.useCallback)(async(e,r)=>{var a,n;let o=t(e.id);if(!o)throw Error(`Composition not found for job ${e.id}`);let{blob:s}=await (0,i.renderStillOnWeb)({composition:{component:o.component,width:o.width,height:o.height,fps:o.fps,durationInFrames:o.durationInFrames,defaultProps:o.defaultProps,calculateMetadata:null!=(a=o.calculateMetadata)?a:void 0,id:e.compositionId},frame:e.frame,imageFormat:e.imageFormat,inputProps:e.inputProps,delayRenderTimeoutInMilliseconds:e.delayRenderTimeout,mediaCacheSizeInBytes:e.mediaCacheSizeInBytes,logLevel:e.logLevel,licenseKey:null!=(n=e.licenseKey)?n:void 0,scale:e.scale,signal:r});return{getBlob:()=>Promise.resolve(s),width:o.width,height:o.height}},[t]),d=(0,a.useCallback)(async(e,r,a)=>{var n,o;let s=t(e.id);if(!s)throw Error(`Composition not found for job ${e.id}`);let l=e.endFrame-e.startFrame+1,{getBlob:u}=await (0,i.renderMediaOnWeb)({composition:{component:s.component,width:s.width,height:s.height,fps:s.fps,durationInFrames:s.durationInFrames,defaultProps:s.defaultProps,calculateMetadata:null!=(n=s.calculateMetadata)?n:void 0,id:e.compositionId},inputProps:e.inputProps,delayRenderTimeoutInMilliseconds:e.delayRenderTimeout,mediaCacheSizeInBytes:e.mediaCacheSizeInBytes,logLevel:e.logLevel,videoCodec:e.videoCodec,audioCodec:e.audioCodec,audioBitrate:e.audioBitrate,container:e.container,videoBitrate:e.videoBitrate,hardwareAcceleration:e.hardwareAcceleration,keyframeIntervalInSeconds:e.keyframeIntervalInSeconds,frameRange:[e.startFrame,e.endFrame],transparent:e.transparent,muted:e.muted,scale:e.scale,signal:r,onProgress:t=>{a(e.id,{renderedFrames:t.renderedFrames,encodedFrames:t.encodedFrames,totalFrames:l})},outputTarget:"web-fs",licenseKey:null!=(o=e.licenseKey)?o:void 0});return{getBlob:u,width:s.width,height:s.height}},[t]),p=(0,a.useCallback)(async t=>{let i=e(t.id);try{var a;let e,n,s;if("client-still"===t.type)e=await c(t,i.signal);else if("client-video"===t.type)e=await d(t,i.signal,r);else throw Error("Unknown job type");let l=await e.getBlob();a=t.outName,n=URL.createObjectURL(l),(s=document.createElement("a")).href=n,s.download=a.includes("/")?a.substring(a.lastIndexOf("/")+1):a,s.click(),URL.revokeObjectURL(n);let u={width:e.width,height:e.height,sizeInBytes:l.size};o(t.id,e.getBlob,u)}catch(e){i.signal.aborted?l(t.id):s(t.id,e)}},[e,c,d,r,o,s,l]);return(0,a.useEffect)(()=>(u(p),()=>u(null)),[p,u]),null}},298380,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.loadMarks=r.persistMarks=void 0,r.persistMarks=e=>{localStorage.setItem("remotion.editor.marksv2",JSON.stringify(e))},r.loadMarks=()=>{let e=localStorage.getItem("remotion.editor.marksv2");return null===e?{}:JSON.parse(e)}},434097,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SetTimelineInOutProvider=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(535932),o=e.r(298380);r.SetTimelineInOutProvider=({children:e})=>{let[t,r]=(0,a.useState)(()=>(0,o.loadMarks)()),s=(0,a.useMemo)(()=>({setInAndOutFrames:r}),[]);return(0,a.useEffect)(()=>{(0,o.persistMarks)(t)},[t]),(0,i.jsx)(n.TimelineInOutContext.Provider,{value:t,children:(0,i.jsx)(n.SetTimelineInOutContext.Provider,{value:s,children:e})})}},163801,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ShowGuidesProvider=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(6256);r.ShowGuidesProvider=({children:e})=>{let[t,r]=(0,a.useState)(()=>(0,n.loadGuidesList)()),[o,s]=(0,a.useState)(null),[l,u]=(0,a.useState)(null),[c,d]=(0,a.useState)(()=>(0,n.loadEditorShowGuidesOption)()),p=(0,a.useRef)(!1),f=(0,a.useRef)(!1),h=(0,a.useCallback)(e=>{d(t=>{let r=e(t);return(0,n.persistEditorShowGuidesOption)(r),r})},[]),m=(0,a.useMemo)(()=>({editorShowGuides:c,setEditorShowGuides:h,guidesList:t,setGuidesList:r,selectedGuideId:o,setSelectedGuideId:s,shouldCreateGuideRef:p,shouldDeleteGuideRef:f,hoveredGuideId:l,setHoveredGuideId:u}),[c,h,t,o,l]);return(0,i.jsx)(n.EditorShowGuidesContext.Provider,{value:m,children:e})}},634069,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ShowRulersProvider=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(816811);r.ShowRulersProvider=({children:e})=>{let[t,r]=(0,a.useState)(()=>(0,n.loadEditorShowRulersOption)()),o=(0,a.useCallback)(e=>{r(t=>{let r=e(t);return(0,n.persistEditorShowRulersOption)(r),r})},[]),s=(0,a.useMemo)(()=>({editorShowRulers:t,setEditorShowRulers:o}),[t,o]);return(0,i.jsx)(n.EditorShowRulersContext.Provider,{value:s,children:e})}},251256,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZoomGesturesProvider=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(601679);r.ZoomGesturesProvider=({children:e})=>{let[t,r]=(0,a.useState)(()=>(0,n.loadEditorZoomGesturesOption)()),o=(0,a.useCallback)(e=>{r(t=>{let r=e(t);return(0,n.persistEditorZoomGesturesOption)(r),r})},[]),s=(0,a.useMemo)(()=>({editorZoomGestures:t,setEditorZoomGestures:o}),[t,o]);return(0,i.jsx)(n.EditorZoomGesturesContext.Provider,{value:s,children:e})}},567369,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.EditorContexts=void 0;let i=e.r(222260),a=e.r(853987),n=e.r(850586),o=e.r(873273),s=e.r(452160),l=e.r(521098),u=e.r(595373),c=e.r(839270),d=e.r(929627),p=e.r(489291),f=e.r(798207),h=e.r(41368),m=e.r(437714),g=e.r(601862),v=e.r(896509),y=e.r(434097),b=e.r(163801),x=e.r(634069),w=e.r(251256);r.EditorContexts=({children:e,readOnlyStudio:t})=>(0,i.jsx)(f.ZodProvider,{children:(0,i.jsx)(d.VisualControlsProvider,{children:(0,i.jsx)(n.PreviewServerConnection,{readOnlyStudio:t,children:(0,i.jsxs)(v.RenderQueueContextProvider,{children:[(0,i.jsx)(g.ClientRenderQueueProcessor,{}),(0,i.jsx)(l.KeybindingContextProvider,{children:(0,i.jsx)(p.CheckerboardProvider,{children:(0,i.jsx)(w.ZoomGesturesProvider,{children:(0,i.jsx)(x.ShowRulersProvider,{children:(0,i.jsx)(b.ShowGuidesProvider,{children:(0,i.jsx)(u.PreviewSizeProvider,{children:(0,i.jsx)(m.ModalsProvider,{children:(0,i.jsx)(h.MediaVolumeProvider,{children:(0,i.jsx)(a.PlayerInternals.PlayerEmitterProvider,{currentPlaybackRate:null,children:(0,i.jsx)(c.SidebarContextProvider,{children:(0,i.jsx)(o.FolderContextProvider,{children:(0,i.jsx)(s.HighestZIndexProvider,{children:(0,i.jsx)(y.SetTimelineInOutProvider,{children:e})})})})})})})})})})})})})]})})})})},892341,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ServerDisconnected=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(850586),o={position:"fixed",justifyContent:"flex-end",alignItems:"flex-start",display:"flex",width:"100%",height:"100%",flexDirection:"column",padding:30,pointerEvents:"none",backgroundColor:"transparent",fontFamily:"SF Pro, Arial, Helvetica, sans-serif"},s={backgroundColor:"#e74c3c",color:"white",paddingLeft:20,paddingRight:20,paddingTop:12,paddingBottom:12,borderRadius:4,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.4)",lineHeight:1.5},l={fontSize:16,fontFamily:"monospace"},u=!1;window.addEventListener("beforeunload",()=>{u=!0}),r.ServerDisconnected=()=>{let{previewServerState:e}=(0,a.useContext)(n.StudioServerConnectionCtx),t=document.getElementById("__remotion_favicon");return"disconnected"!==e.type?(t.setAttribute("href","/favicon.ico"),null):u?null:(t.setAttribute("href","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAARiSURBVHgB7d1NThRBFAfw/2tGgru5gXMD8QZ4AmVjAi6kN0TiAm8gnkBcGARNumcx4E48Ae0JaE9gewLHlQSZelaNgyHGL/RVd1X3+y10RQL58+rVx1QBKKWUUkoppZRSSimllFJKKVUjQs32stEiJcktZiwxzKL9Fvqzb6S0/44JVBKbtwa9aj29U6JjagtkJzsYzBEyBi9d5utsQIULCcxvelgo03R5jBarJZCXw/17E+bt82r4Hy4gtuEQekUbK8h7IHvDV5vMZht+VAlRfmYw3EhXKrSA10Ce2X7RIzpGDVzlgM1wPb2bI2JeA9nN99/b/waoV+XCmTAex1g13gLZyUZrdjjJ0CAbTB5bMN4C2ctHxwxaRABiCsZLIG6KmxC/R2BiCCaBBwn4NgJk10B2GOWj3Wz/IQLlpUL28oOjyy4AG1AZppuhVYt4hWRZ1o8gDGc6rL4YHjxCQMQDOcNCEI38bxnmLTc9d30PARAPZAITZP/4A1ctx3bjcw0NEw8koeQ64tRnu25qeggTb+q2/BmRcyv9K7yw3MTOsmiFuLMOtICblJzS5+Mm+opoIBOgFYHMuL5yVHcoooFQuwJxag9FNJCIG/rv1BqKaCDfzshbqbZQxAJxK3SJI9qATUPJstdef0axQGJbof+jwRc6eQ2PxAIx4DZXx3duSrybv3oCTyR7yACdYR762sIXDKQbFfId4ZGPJi8YCA3QLf05YvF+IhYIEV1Dx9hNu8XdbLQFQV6OcDuFaFNyKiwWiJ19DNBN/VN8XoMQrRABDFqCEJ32CiBisT08rRAZAwjRQAKjgcgQO+rVQARMb3gJ0UAkML+DEA1EwAQkdkNMcnOx1Zcxf8V9ol7y88GSm4tdDKRy1xsgSIes/0BM4ndN5HZ7OzZkMePperqSQ5jkkFWhO6r76WrYJ4b2N+YTumF60QeeSG6/d2DI4rHvW1eCPaT9Q9YZw/sVOMlZVoUWM8zpg/Su97dVJGdZFVrKhbFR05MdYoFcwWmF1rF9kbG8UeP7KaI3qBp628QTHrueUccwdZHw/ZDWNHY7tU1u1B2GIxqIYSO2Dd0Ud79wnq/eaOpBgR4EMVDW/oijINu87d7U6hYaJBrInA0k0iu4bvVtZ1KrBRrm4Vr06GNkF3cO7RCVhvK4pmiFOISkjOStk1lVrBQIiPh5SAyN3fWKWeMuEBjxCmEkh3bVvokAzd5idL2iQqDEA1nASXmK+XFIfeTCo5gFAudllvo8G20TUeNVElMQ58QrxLHD1jbB3GumSnhsz7qHE9BhTEGc87aOm16KJHi7rfqj8yfI53E1j/l9eK8L651stJUQeXx/iuzU1QztZLGIsRp+xvtOh3Qo3/qCedumEC6qZetpJztwz7O6UAa4FNsP7ELTfXbWbskUdjgq9M9VCJoFcwvTlfyPDd9t3XNJjA+2IZcGpmxi+7tpjW3OupurJziZhtKWPzWhlFJKKaWUUkoppZRSSiml/uwrgZ/Bfwo/wccAAAAASUVORK5CYII="),(0,i.jsx)("div",{style:o,className:"css-reset",children:(0,i.jsxs)("div",{style:s,children:["The studio server has disconnected. ",(0,i.jsx)("br",{}),window.remotion_studioServerCommand?(0,i.jsxs)("span",{children:["Run"," ",(0,i.jsx)("code",{style:l,children:window.remotion_studioServerCommand})," ","to run it again."]}):(0,i.jsx)("span",{children:"Fast refresh will not work."})]})}))}},284629,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.injectCSS=void 0;let i=e.r(49019),a=e.r(850301),n=!1;r.injectCSS=()=>{!n&&(i.Internals.CSSUtils.injectCSS(`
  html {
    --remotion-cli-internals-blue: #0b84f3;
    overscroll-behavior-y: none;
    overscroll-behavior-x: none;
  }
  
  body {
    overscroll-behavior-y: none;
    overscroll-behavior-x: none;
    /* Override Chakra UI position: relative on body */
    position: static !important;
  }
  
  .remotion-splitter {
    user-select: none;
  }
  
  .remotion-splitter-horizontal {
    transform: scaleY(2);
    background: linear-gradient(
      to bottom,
      transparent ${25}%,
      black ${25}%,
      black ${75}%,
      transparent ${75}%
    );
  }
  
  .remotion-splitter-horizontal.remotion-splitter-active, .remotion-splitter-horizontal.remotion-splitter-hover {
    background: linear-gradient(
      to bottom,
      transparent ${41.666666666666664}%,
      var(--remotion-cli-internals-blue) ${41.666666666666664}%,
      var(--remotion-cli-internals-blue) ${58.333333333333336}%,
      transparent ${58.333333333333336}%
    );
    cursor: row-resize;
    transform: scaleY(6);
    z-index: 1000;
  }
  
  .remotion-splitter-vertical {
    transform: scaleX(2);
    background: linear-gradient(
      to right,
      transparent ${25}%,
      black ${25}%,
      black ${75}%,
      transparent ${75}%
    );
  }
  
  .remotion-splitter-vertical.remotion-splitter-active, .remotion-splitter-vertical.remotion-splitter-hover {
    background: linear-gradient(
      to right,
      transparent ${41.666666666666664}%,
      var(--remotion-cli-internals-blue) ${41.666666666666664}%,
      var(--remotion-cli-internals-blue) ${58.333333333333336}%,
      transparent ${58.333333333333336}%
    );
    transform: scaleX(6);
    cursor: col-resize;
    z-index: 1000;
  }
  
  input::-webkit-outer-spin-button,
  input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
  
  input:focus,
  textarea:focus,
  button:focus,
  a:focus {
    outline: none;
    box-shadow:
      inset 1px 1px #555,
      inset -1px -1px #555,
      inset 1px -1px #555,
      inset -1px 1px #555;
  }
  
  input[type='color'].__remotion_color_picker::-webkit-color-swatch-wrapper {
    padding: 0;
  }
  input[type='color'].__remotion_color_picker::-webkit-color-swatch {
    border: none;
  }
  
  .__remotion_thumb,
  .__remotion_thumb::-webkit-slider-thumb {
    -webkit-appearance: none;
    -webkit-tap-highlight-color: transparent;
  }
  
  .__remotion_thumb {
    pointer-events: none;
    position: absolute;
    height: 0;
    outline: none;
    top: 15.5px;
    width: 221px;
    margin-left: -2px;
    z-index: 2;
  }
  
  /* For Firefox browsers */
  .__remotion_thumb::-moz-range-thumb {
    border: 1px solid black;
    border-radius: 2px;
    cursor: pointer;
    height: 37px;
    width: 10px;
    pointer-events: all;
    border-color: black;
    background-color: white;
    position: relative;
  }
  
  /* For Chrome browsers */
  .__remotion_thumb::-webkit-slider-thumb {
    border: 1px solid black;
    border-radius: 2px;
    cursor: pointer;
    height: 39px;
    width: 10px;
    pointer-events: all;
    border-color: black;
    background-color: white;
    position: relative;
  }  

  .${a.DEFAULT_PROPS_PATH_ACTIVE_CLASSNAME} span {
    color: var(--remotion-cli-internals-blue) !important;
    transition: color 0.2s ease-in-out;
  }
  `.trim()),n=!0)}},519807,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Studio=void 0;let i=e.r(222260),a=e.r(347540),n=e.r(149579),o=e.r(49019),s=e.r(449943),l=e.r(567369),u=e.r(892341),c=e.r(284629);r.Studio=({rootComponent:e,readOnly:t})=>{var r;return(0,a.useLayoutEffect)(()=>{(0,c.injectCSS)()},[]),(0,i.jsx)(o.Internals.CompositionManagerProvider,{onlyRenderComposition:null,currentCompositionMetadata:null,initialCompositions:[],initialCanvasContent:null,children:(0,i.jsx)(o.Internals.RemotionRootContexts,{frameState:null,audioEnabled:window.remotion_audioEnabled,videoEnabled:window.remotion_videoEnabled,logLevel:window.remotion_logLevel,numberOfAudioTags:window.remotion_numberOfAudioTags,audioLatencyHint:null!=(r=window.remotion_audioLatencyHint)?r:"interactive",children:(0,i.jsx)(o.Internals.ResolveCompositionConfigInStudio,{children:(0,i.jsxs)(l.EditorContexts,{readOnlyStudio:t,children:[(0,i.jsx)(s.Editor,{readOnlyStudio:t,Root:e}),t?null:(0,n.createPortal)((0,i.jsx)(u.ServerDisconnected,{}),document.getElementById("server-disconnected-overlay"))]})})})})}},740242,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StudioInternals=void 0,r.StudioInternals={Studio:e.r(519807).Studio}},505884,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t}),s=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.setBundleModeAndUpdate=void 0;let l=e.r(222260),u=e.r(347540),c=s(e.r(706381)),d=e.r(49019),p=e.r(758927),f={type:"index"};d.Internals.CSSUtils.injectCSS(d.Internals.CSSUtils.makeDefaultPreviewCSS(null,"#1f2428"));let h=()=>{let[e,t]=(0,u.useState)(!1);return((0,u.useEffect)(()=>{let e=setTimeout(()=>{t(!0)},2e3);return()=>{clearTimeout(e)}},[]),e)?(0,l.jsx)(d.AbsoluteFill,{style:{justifyContent:"center",alignItems:"center",fontSize:13,opacity:.6,color:"white",fontFamily:"Helvetica, Arial, sans-serif"},children:"Loading Studio"}):null},m=({state:e})=>{let{compositions:t,currentCompositionMetadata:r,canvasContent:i}=(0,u.useContext)(d.Internals.CompositionManager),{setCanvasContent:a}=(0,u.useContext)(d.Internals.CompositionSetters),n=(0,u.useRef)(null),{delayRender:o,continueRender:s}=(0,d.useDelayRender)(),[c]=(0,u.useState)(()=>o(`Waiting for Composition "${e.compositionName}"`));return((0,u.useEffect)(()=>()=>s(c),[c,s]),(0,u.useEffect)(()=>{if(0===t.length)return;let r=t.find(t=>t.id===e.compositionName);if(!r)throw Error(`Found no composition with the name ${e.compositionName}. The following compositions were found instead: ${t.map(e=>e.id).join(", ")}. All compositions must have their ID calculated deterministically and must be mounted at the same time.`);a({type:"composition",compositionId:r.id})},[t,e,r,a]),(0,u.useEffect)(()=>{if(!i)return;let{current:e}=n;if(!e)throw Error("portal did not render");return e.appendChild(d.Internals.portalNode()),s(c),()=>{e.removeChild(d.Internals.portalNode())}},[i,c,s]),r)?(0,l.jsx)("div",{ref:n,id:"remotion-canvas",style:{width:r.width,height:r.height,display:"flex",backgroundColor:"transparent"}}):null},g=(0,d.delayRender)("Loading root component - See https://remotion.dev/docs/troubleshooting/loading-root-component if you experience a timeout",{timeoutInMilliseconds:1e4}),v=document.getElementById("video-container"),y=null,b=e=>{if(!c.default.createRoot){if(p.NoReactInternals.ENABLE_V5_BREAKING_CHANGES)throw Error("Remotion 5.0 does only support React 18+. However, ReactDOM.createRoot() is undefined.");c.default.render(e,v);return}(y||(y=c.default.createRoot(v))).render(e)},x=t=>{var r,i;let a=f;if("composition"===a.type&&b((0,l.jsx)(d.Internals.CompositionManagerProvider,{initialCanvasContent:null,onlyRenderComposition:a.compositionName,currentCompositionMetadata:{props:p.NoReactInternals.deserializeJSONWithSpecialTypes(a.serializedResolvedPropsWithSchema),durationInFrames:a.compositionDurationInFrames,fps:a.compositionFps,height:a.compositionHeight,width:a.compositionWidth,defaultCodec:a.compositionDefaultCodec,defaultOutName:a.compositionDefaultOutName,defaultVideoImageFormat:a.compositionDefaultVideoImageFormat,defaultPixelFormat:a.compositionDefaultPixelFormat,defaultProResProfile:a.compositionDefaultProResProfile},initialCompositions:[],children:(0,l.jsx)(d.Internals.RemotionRootContexts,{frameState:null,audioEnabled:window.remotion_audioEnabled,videoEnabled:window.remotion_videoEnabled,logLevel:window.remotion_logLevel,numberOfAudioTags:0,audioLatencyHint:null!=(r=window.remotion_audioLatencyHint)?r:"interactive",children:(0,l.jsxs)(d.Internals.RenderAssetManagerProvider,{collectAssets:null,children:[(0,l.jsx)(t,{}),(0,l.jsx)(m,{state:a})]})})})),"evaluation"===a.type&&b((0,l.jsx)(d.Internals.CompositionManagerProvider,{initialCanvasContent:null,onlyRenderComposition:null,currentCompositionMetadata:null,initialCompositions:[],children:(0,l.jsx)(d.Internals.RemotionRootContexts,{frameState:null,audioEnabled:window.remotion_audioEnabled,videoEnabled:window.remotion_videoEnabled,logLevel:window.remotion_logLevel,numberOfAudioTags:0,audioLatencyHint:null!=(i=window.remotion_audioLatencyHint)?i:"interactive",children:(0,l.jsx)(d.Internals.RenderAssetManagerProvider,{collectAssets:null,children:(0,l.jsx)(t,{})})})})),"index"===a.type){if(void 0!==window.remotion_puppeteerTimeout)return;b((0,l.jsx)("div",{children:(0,l.jsx)(h,{})})),Promise.resolve().then(()=>o(e.r(740242))).then(({StudioInternals:e})=>{window.remotion_isStudio=!0,window.remotion_isReadOnlyStudio=!0,window.remotion_inputProps="{}",d.Internals.enableSequenceStackTraces(),b((0,l.jsx)(e.Studio,{readOnly:!0,rootComponent:t}))}).catch(e=>{b((0,l.jsxs)("div",{children:["Failed to load Remotion Studio: ",e.message]}))})}};d.Internals.waitForRoot(e=>{x(e),(0,d.continueRender)(g)}),r.setBundleModeAndUpdate=e=>{f=e;let t=(0,d.delayRender)("Waiting for root component to load - See https://remotion.dev/docs/troubleshooting/loading-root-component if you experience a timeout");d.Internals.waitForRoot(e=>{x(e),requestAnimationFrame(()=>{(0,d.continueRender)(t)})})}},662654,(e,t,r)=>{"use strict";var i,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&a(t,e,r[o]);return n(t,e),t}),s=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.internalBundle=r.findClosestFolderWithItem=r.getConfig=void 0,r.bundle=E;let l=e.r(213637),u=o(e.r(902157)),c=s(e.r(660526)),d=s(e.r(750227)),p=e.r(812057),f=e.r(925127),h=s(e.r(167530)),m=e.r(695338),g=e.r(449852),v=e.r(920011),y=e.r(349327),b=(0,p.promisify)(h.default),x=async e=>e?(await u.default.promises.mkdir(e,{recursive:!0}),e):u.default.promises.mkdtemp(d.default.join(c.default.tmpdir(),"remotion-webpack-bundle-")),w=e=>e.startsWith("/")?w(e.substr(1)):e,S=e=>e.endsWith("/")?S(e.substr(0,e.length-1)):e;r.getConfig=({entryPoint:e,outDir:t,resolvedRemotionRoot:r,onProgress:i,options:a,bufferStateDelayInMilliseconds:n,maxTimelineTracks:o,experimentalClientSideRenderingEnabled:s})=>{var l,u,c,p;return(0,y.webpackConfig)({entry:d.default.join(505884,"..","esm","renderEntry.mjs"),userDefinedComponent:e,outDir:t,environment:"production",webpackOverride:null!=(l=null==a?void 0:a.webpackOverride)?l:e=>e,onProgress:e=>{null==i||i(e)},enableCaching:null==(u=null==a?void 0:a.enableCaching)||u,maxTimelineTracks:o,remotionRoot:r,keyboardShortcutsEnabled:null==(c=null==a?void 0:a.keyboardShortcutsEnabled)||c,bufferStateDelayInMilliseconds:n,poll:null,experimentalClientSideRenderingEnabled:s,askAIEnabled:null==(p=null==a?void 0:a.askAIEnabled)||p})},r.findClosestFolderWithItem=(e,t)=>{let r="";for(let i=0;i<5;i++){if(r=d.default.join(e,t),u.default.existsSync(r))return d.default.dirname(r);e=d.default.dirname(e)}return null};let k=async e=>{if(!(await u.promises.readFile(e,"utf8")).includes("registerRoot"))throw Error(`You passed ${e} as your entry point, but this file does not contain "registerRoot". You should use the file that calls registerRoot() as the entry point. To ignore this error, pass "ignoreRegisterRootWarning" to bundle(). This error cannot be ignored on the CLI.`)},C=async e=>{var t,i,a,n,o,s,c,p,h,y;let C=d.default.resolve(process.cwd(),e.entryPoint),E=null!=(i=null!=(t=null==e?void 0:e.rootDir)?t:(0,r.findClosestFolderWithItem)(C,"package.json"))?i:process.cwd();e.ignoreRegisterRootWarning||await k(C);let _=await x(null!=(a=null==e?void 0:e.outDir)?a:null);null==(n=e.onDirectoryCreated)||n.call(e,_);let T=process.cwd();f.isMainThread&&process.chdir(E);let{onProgress:P,...I}=e,[,A]=await (0,r.getConfig)({outDir:_,entryPoint:C,resolvedRemotionRoot:E,onProgress:P,options:I,bufferStateDelayInMilliseconds:null!=(o=e.bufferStateDelayInMilliseconds)?o:null,maxTimelineTracks:e.maxTimelineTracks,experimentalClientSideRenderingEnabled:e.experimentalClientSideRenderingEnabled}),O=await b([A]);if(f.isMainThread&&process.chdir(T),!O)throw Error("Expected webpack output");let{errors:M}=O.toJson();if(void 0!==M&&M.length>0)throw Error(M[0].message+"\n"+M[0].details);let F=null!=(s=null==e?void 0:e.publicPath)?s:"/",R="/"+[S(w(F)),"public"].filter(Boolean).join("/"),D=(null==I?void 0:I.publicDir)?d.default.resolve(E,I.publicDir):d.default.join(E,"public"),j=d.default.join(_,"public"),L=!1;u.default.existsSync(D)&&await (0,m.copyDir)({src:D,dest:j,onSymlinkDetected:(e,t)=>{if(L)return;let r=d.default.join(t,e.name);I.onSymlinkDetected?I.onSymlinkDetected(r):(L=!0,console.warn(`
Found a symbolic link in the public folder (${r}). The symlink will be forwarded into the bundle.`))},onProgress:e=>{var t;return null==(t=I.onPublicDirCopyProgress)?void 0:t.call(I,e)},copiedBytes:0,lastReportedProgress:0});let B=(0,g.indexHtml)({staticHash:R,publicPath:F,editorName:null,inputProps:null,remotionRoot:E,studioServerCommand:null,renderQueue:null,numberOfAudioTags:0,publicFiles:(0,v.readRecursively)({folder:".",startPath:D,staticHash:R,limit:1e4}).map(e=>({...e,name:e.name.split(d.default.sep).join("/")})),includeFavicon:!0,title:"Remotion Bundle",renderDefaults:null!=(c=e.renderDefaults)?c:void 0,publicFolderExists:`${F+(F.endsWith("/")?"":"/")}public`,gitSource:null!=(p=e.gitSource)?p:null,projectName:(0,l.getProjectName)({gitSource:null!=(h=e.gitSource)?h:null,resolvedRemotionRoot:E,basename:d.default.basename}),installedDependencies:null,packageManager:"unknown",logLevel:"info",mode:"bundle",audioLatencyHint:null!=(y=e.audioLatencyHint)?y:"interactive"});return u.default.writeFileSync(d.default.join(_,"index.html"),B),u.default.copyFileSync(d.default.join("/ROOT/node_modules/@remotion/bundler/dist","../favicon.ico"),d.default.join(_,"favicon.ico")),u.default.copyFileSync(d.default.resolve(542591,"..","lib","mappings.wasm"),d.default.join(_,l.SOURCE_MAP_ENDPOINT.replace("/",""))),_};async function E(...e){var t,i,a,n,o,s,l,u,c,d,p,f,h,m,g,v,y,b,x;let w=(e=>{var t;if(0===e.length)throw TypeError("bundle() was called without arguments");let r=e[0];if("string"==typeof r)return{entryPoint:r,onProgress:e[1],...null!=(t=e[2])?t:{}};if("string"!=typeof r.entryPoint)throw TypeError("bundle() was called without the `entryPoint` option");return r})(e);return await (0,r.internalBundle)({bufferStateDelayInMilliseconds:null!=(t=w.bufferStateDelayInMilliseconds)?t:null,enableCaching:null==(i=w.enableCaching)||i,entryPoint:w.entryPoint,gitSource:null!=(a=w.gitSource)?a:null,ignoreRegisterRootWarning:null!=(n=w.ignoreRegisterRootWarning)&&n,maxTimelineTracks:null!=(o=w.maxTimelineTracks)?o:null,onDirectoryCreated:null!=(s=w.onDirectoryCreated)?s:()=>{},onProgress:null!=(l=w.onProgress)?l:()=>{},onPublicDirCopyProgress:null!=(u=w.onPublicDirCopyProgress)?u:()=>{},onSymlinkDetected:null!=(c=w.onSymlinkDetected)?c:()=>{},outDir:null!=(d=w.outDir)?d:null,publicDir:null!=(p=w.publicDir)?p:null,publicPath:null!=(f=w.publicPath)?f:null,rootDir:null!=(h=w.rootDir)?h:null,webpackOverride:null!=(m=w.webpackOverride)?m:e=>e,audioLatencyHint:null!=(g=w.audioLatencyHint)?g:null,experimentalClientSideRenderingEnabled:null!=(v=w.experimentalClientSideRenderingEnabled)&&v,renderDefaults:null!=(y=w.renderDefaults)?y:null,askAIEnabled:null==(b=w.askAIEnabled)||b,keyboardShortcutsEnabled:null==(x=w.keyboardShortcutsEnabled)||x})}r.internalBundle=C},213008,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.webpack=r.bundle=r.BundlerInternals=void 0;let i=e.r(662654),a=e.r(449852),n=e.r(920011),o=e.r(97769),s=e.r(349327),l=e.r(926729);r.webpack=e.r(167530),r.BundlerInternals={esbuild:l,webpackConfig:s.webpackConfig,indexHtml:a.indexHtml,cacheExists:o.cacheExists,clearCache:o.clearCache,getConfig:i.getConfig,readRecursively:n.readRecursively,findClosestFolderWithItem:i.findClosestFolderWithItem,internalBundle:i.internalBundle};var u=e.r(662654);Object.defineProperty(r,"bundle",{enumerable:!0,get:function(){return u.bundle}})},601457,(e,t,r)=>{t.exports=e.x("node:readline",()=>require("node:readline"))},478500,(e,t,r)=>{t.exports=e.x("node:async_hooks",()=>require("node:async_hooks"))},519653,e=>{"use strict";let t,r,i,a,n,o,s,l,u,c;var d,p,f,h,m=e.i(747909),g=e.i(174017),v=e.i(996250),y=e.i(759756),b=e.i(561916),x=e.i(174677),w=e.i(869741),S=e.i(316795),k=e.i(487718),C=e.i(995169),E=e.i(47587),_=e.i(666012),T=e.i(570101),P=e.i(626937),I=e.i(10372),A=e.i(193695);e.i(52474);var O=e.i(600220),M=e.i(89171);e.i(844376);var F=e.i(611838),R=e.i(902157),D=e.i(750227),j=e.i(870722),L=e.i(874533),B=e.i(660526),N=e.i(440264),$=e.i(524836),z=e.i(347299),U=e.i(758927),V=e.i(495879),H=e.i(857764);e.i(583420),e.i(924966),e.i(991014);var W=e.i(792789);e.i(619173);let q=W.default;var G=e.i(814747),Z=e.i(522734),K=e.i(981318),Q=e.i(466560),X=e.i(812057);e.i(222260);var J="remotion_buffer:",Y=e.i(504446),ee=e.i(446786),et=e.i(57328),er=e=>1e3*2**(e-1),ei=e=>new Promise(t=>{setTimeout(t,e)}),ea=async({host:e,succeeded:t,event:r,isStill:i,isProduction:a,licenseKey:n})=>{let o;for(let s=1;s<=4;s++){let l=new AbortController,u=setTimeout(()=>{l.abort()},1e4);try{let o=await fetch("https://www.remotion.pro/api/track/register-usage-point",{method:"POST",body:JSON.stringify({event:r,apiKey:n,host:e,succeeded:t,isStill:i,isProduction:a}),headers:{"Content-Type":"application/json"},signal:l.signal});clearTimeout(u);let s=await o.json();if(s.success)return{billable:s.billable,classification:s.classification};if(!o.ok)throw Error(s.error);throw Error(`Unexpected response from server: ${JSON.stringify(s)}`)}catch(t){clearTimeout(u);let e="AbortError"===t.name;if(!(t.message.includes("Failed to fetch")||t.message.includes("Load failed")||t.message.includes("NetworkError when attempting to fetch resource")||e))throw t;if(o=e?Error("Request timed out after 10 seconds"):t,s<4){let e=er(s);console.log(`Failed to send usage event (attempt ${s}/4), retrying in ${e}ms...`,t),await ei(e)}}}throw o},en=Object.defineProperty;({get url(){return`file://${e.P("node_modules/@remotion/renderer/dist/esm/index.mjs")}`}}).url;var eo=e=>{let t=D.default.dirname(e);R.default.existsSync(t)||R.default.mkdirSync(t,{recursive:!0})},es=()=>{let e=process.env||{};if("NO_COLOR"in e)return!1;if("FORCE_COLOR"in e)return!0;let t="win32"===process.platform,r=j.isatty?.(1)&&e.TERM&&"dumb"!==e.TERM,i="CI"in e&&("GITHUB_ACTIONS"in e||"GITLAB_CI"in e||"CIRCLECI"in e);return t||r||i},el=(n={enabled:()=>es(),visible:!0,styles:{},keys:{}},o=(e,t,r)=>e.wrap?.(t,r),s=(e,t)=>{if(""===e||null==e)return"";if(!1===n.enabled())return e;if(!1===n.visible)return"";let r=String(e),i=r.includes(`
`),a=t.length;for(;a-- >0;)r=o(n.styles[t[a]],r,i);return r},(l=(e,t,r)=>{var i;let a,o,l;n.styles[e]=(i={name:e,codes:t},a=`\x1b[${i.codes[0]}m`,o=`\x1b[${i.codes[1]}m`,l=RegExp(`\\u001b\\[${i.codes[1]}m`,"g"),i.wrap=(e,t)=>{e.includes(o)&&(e=e.replace(l,o+a));let r=a+e+o;return t?r.replace(/\r*\n/g,`${o}$&${a}`):r},i),(n.keys[r]||(n.keys[r]=[])).push(e),Reflect.defineProperty(n,e,{configurable:!0,enumerable:!0,set(t){n.alias?.(e,t)},get(){let t=e=>s(e,t.stack);return Reflect.setPrototypeOf(t,n),t.stack=this.stack?this.stack.concat(e):[e],t}})})("reset",[0,0],"modifier"),l("bold",[1,22],"modifier"),l("dim",[2,22],"modifier"),l("italic",[3,23],"modifier"),l("underline",[4,24],"modifier"),l("inverse",[7,27],"modifier"),l("hidden",[8,28],"modifier"),l("strikethrough",[9,29],"modifier"),l("black",[30,39],"color"),l("red",[31,39],"color"),l("green",[32,39],"color"),l("yellow",[33,39],"color"),l("blue",[34,39],"color"),l("magenta",[35,39],"color"),l("cyan",[36,39],"color"),l("white",[37,39],"color"),l("gray",[90,39],"color"),l("grey",[90,39],"color"),l("bgBlack",[40,49],"bg"),l("bgRed",[41,49],"bg"),l("bgGreen",[42,49],"bg"),l("bgYellow",[43,49],"bg"),l("bgBlue",[44,49],"bg"),l("bgMagenta",[45,49],"bg"),l("bgWhite",[47,49],"bg"),l("blackBright",[90,39],"bright"),l("redBright",[91,39],"bright"),l("greenBright",[92,39],"bright"),l("yellowBright",[93,39],"bright"),l("blueBright",[94,39],"bright"),l("magentaBright",[95,39],"bright"),l("whiteBright",[97,39],"bright"),l("bgBlackBright",[100,49],"bgBright"),l("bgRedBright",[101,49],"bgBright"),l("bgGreenBright",[102,49],"bgBright"),l("bgYellowBright",[103,49],"bgBright"),l("bgBlueBright",[104,49],"bgBright"),l("bgMagentaBright",[105,49],"bgBright"),l("bgWhiteBright",[107,49],"bgBright"),n.alias=(e,t)=>{let r=n[t];if("function"!=typeof r)throw TypeError("Expected alias to be the name of an existing color (string) or a function");r.stack||(Reflect.defineProperty(r,"name",{value:e}),n.styles[e]=r,r.stack=[e]),Reflect.defineProperty(n,e,{configurable:!0,enumerable:!0,set(t){n.alias?.(e,t)},get(){let e=t=>s(t,e.stack);return Reflect.setPrototypeOf(e,n),e.stack=this.stack?this.stack.concat(r.stack):r.stack,e}})},n),eu=["trace","verbose","info","warn","error"],ec=(e,t)=>eu.indexOf(e)<=eu.indexOf(t),ed=()=>{let e=(()=>{let e=process.cwd(),t="";for(let r=0;r<5;r++){if(t=D.default.join(e,"package.json"),R.default.existsSync(t))return t;e=D.default.dirname(e)}return null})();return null===e?process.cwd():D.default.dirname(e)},ep=e=>{if(void 0===e)throw Error("serveUrl is undefined");return!!(e.startsWith("www.")||e.includes("amazonaws.com"))||e.startsWith("https://")||e.startsWith("http://")},ef=`
`,eh=e=>{let t;try{t=R.default.readdirSync(e)}catch{return R.default.mkdirSync(e,{recursive:!0})}t.forEach(t=>{t=D.default.join(e,t),R.default.rmSync(t,{recursive:!0,force:!0})})},em=null,eg=()=>{if(!em)throw Error("reproWriteInstance is not initialized");return em},ev=(e,...t)=>{ex()&&eg().writeLine(e,...t)},ey=!1,eb=()=>{ey=!1},ex=()=>ey;function ew(e){return!!e}var eS=el.gray(""),ek={formatLogs:(e,t,r)=>{let i;return[t.indent?eS:null,t.tag?(i=t.tag,es()?el.bgBlack(` ${i} `):`[${i}]`):null].filter(ew).concat(r.map(t=>"warn"===e?el.yellow(t):"error"===e?el.red(t):"verbose"===e||"trace"===e?el.gray(t):t))},trace:(e,...t)=>{if(ev("trace",...t),ec(e.logLevel,"trace"))return 0===t.length?process.stdout.write(`
`):console.log(...ek.formatLogs("trace",e,t))},verbose:(e,...t)=>{if(ev("verbose",...t),ec(e.logLevel,"verbose"))return 0===t.length?process.stdout.write(`
`):console.log(...ek.formatLogs("verbose",e,t))},info:(e,...t)=>{if(ev("info",...t),ec(e.logLevel,"info"))return 0===t.length?process.stdout.write(`
`):console.log(...ek.formatLogs("info",e,t))},warn:(e,...t)=>{if(ev("warn",...t),ec(e.logLevel,"warn"))return 0===t.length?process.stdout.write(`
`):console.warn(...ek.formatLogs("warn",e,t))},error:(e,...t)=>{if(ev("error",...t),ec(e.logLevel,"error"))return 0===t.length?process.stdout.write(`
`):console.error(...ek.formatLogs("error",e,t))}},eC=[301,302,303,307,308],eE=async(e,t=0)=>{if(t>10)throw Error(`Too many redirects while downloading ${e}`);let{request:r,response:i}=await new Promise((t,r)=>{let i=(e=>{if(e.startsWith("https://"))return $.default.get;if(e.startsWith("http://"))return z.default.get;throw Error(`Can only download URLs starting with http:// or https://, got "${e}"`)})(e)(e,"u"<typeof Bun?{headers:{"user-agent":"Mozilla/5.0 (@remotion/renderer - https://remotion.dev)"}}:{},e=>{t({request:i,response:e})});i.on("error",e=>(i.destroy(),r(e)))});if(eC.includes(i.statusCode)){if(!i.headers.location)throw Error(`Received a status code ${i.statusCode} but no "Location" header while calling ${i.headers.location}`);let{origin:a}=new URL(e),n=new URL(i.headers.location,a).toString();return r.destroy(),i.destroy(),eE(n,t+1)}if(i.statusCode>=400){let t=await e_(i);throw r.destroy(),i.destroy(),Error([`Received a status code of ${i.statusCode} while downloading file ${e}.`,t?"The response body was:":null,t?"---":null,t||null,t?"---":null].filter(ew).join(`
`))}return{request:r,response:i}},e_=async e=>{let t=new Promise(t=>{let r="";e.on("data",e=>{r+=e}),e.on("end",()=>{t(r)}),e.on("error",()=>t(r))}),r=null,i=await Promise.race([t,new Promise(e=>{r=setTimeout(()=>{e(null)},5e3)})]);return r&&clearTimeout(r),i},eT="cancelled",eP="Download finished with",eI=async(e,t=2,r=1)=>{try{return await (({onProgress:e,url:t,to:r,abortSignal:i})=>new Promise((a,n)=>{let o,s=!1,l=!1,u=e=>{i.removeEventListener("abort",f),o&&clearTimeout(o),n(e),s=!0},c=()=>{o&&clearTimeout(o),o=setTimeout(()=>{l||u(Error(`Tried to download file ${t}, but the server sent no data for 20 seconds`))},2e4)};c();let d=!1,p=()=>{},f=()=>{u(Error(eT)),p()};i.addEventListener("abort",f),eE(t).then(({response:t,request:n})=>{if(p=()=>{n.destroy(),t.destroy()},i.aborted)return void f();let h=t.headers["content-disposition"]??null,m=r(h,t.headers["content-type"]??null);eo(m);let g=t.headers["content-length"],v=void 0===g?null:Number(g),y=(0,R.createWriteStream)(m),b=0;y.on("close",()=>{if(!s){var t;return d||e?.({downloaded:b,percent:1,totalSize:b}),c(),t={sizeInBytes:b,to:m},void(i.removeEventListener("abort",f),l=!0,a(t),o&&clearTimeout(o))}}),y.on("error",e=>u(e)),t.on("error",e=>{p(),u(e)}),t.pipe(y).on("error",e=>u(e)),t.on("data",t=>{c(),b+=t.length,c();let r=null===v?null:b/v;e?.({downloaded:b,percent:r,totalSize:v}),1===r&&(d=!0)}),t.on("close",()=>{null!==v&&b!==v&&u(Error(`${eP} ${b} bytes, but expected ${v} bytes from 'Content-Length'.`)),y.close(),p()})}).catch(e=>{u(e)})}))(e)}catch(a){let{message:i}=a;if(i===eT)throw a;if("aborted"===i||i.includes("ECONNRESET")||i.includes(eP)||i.includes("503")||i.includes("502")||i.includes("504")||i.includes("500")){if(0===t)throw a;ek.warn({indent:e.indent,logLevel:e.logLevel},`Downloading ${e.url} failed (will retry): ${i}`);let n=(r+1)**2;return await new Promise(e=>{setTimeout(()=>e(),1e3*n)}),eI(e,t-1,r+1)}throw a}},eA="chrome",eO=(e,t)=>{if(!e)throw Error(t)},eM=e=>{if("string"===e.type)return el.green(`"${e.value}"`);if("object"===e.type)return e.subtype||"Object"!==e.value?"date"===e.subtype?el.reset(`Date { ${el.magenta(String(e.value))} }`):"arraybuffer"===e.subtype||"array"===e.subtype||"dataview"===e.subtype||"error"===e.subtype?el.reset(`${e.value}`):"generator"===e.subtype?el.reset(`[generator ${e.value}]`):"iterator"===e.subtype||"map"===e.subtype||"node"===e.subtype?el.reset(`${e.value}`):"null"===e.subtype?el.white(`${e.value}`):("promise"===e.subtype||"proxy"===e.subtype||"regexp"===e.subtype||"set"===e.subtype||"typedarray"===e.subtype||"wasmvalue"===e.subtype||"webassemblymemory"===e.subtype||"weakmap"===e.subtype||e.subtype,el.reset(`${e.value}`)):el.reset(`{}`);if("accessor"===e.type)return el.gray("get()");if("bigint"===e.type||"boolean"===e.type)return el.yellow(`${e.value}`);if("function"===e.type)return el.cyan("Function");if("number"===e.type)return el.yellow(`${e.value}`);if("symbol"===e.type)return el.green(`${e.value}`);if("undefined"===e.type)return el.gray("undefined");throw Error("unexpected property type "+JSON.stringify(e))};class eF{type;text;args;previewString;#r;logLevel;tag;constructor({type:e,text:t,args:r,stackTraceLocations:i,previewString:a,logLevel:n,tag:o}){this.type=e,this.text=t,this.args=r,this.previewString=a,this.#r=i,this.logLevel=n,this.tag=o}stackTrace(){return this.#r}}class eR{emitter;eventsMap=new Map;constructor(){this.emitter=function(e){return{all:e=e||new Map,on:(t,r)=>{let i=e?.get(t);i?.push(r)||e?.set(t,[r])},off:(t,r)=>{let i=e?.get(t);i&&i.splice(i.indexOf(r)>>>0,1)},emit:(t,r)=>{(e?.get(t)||[]).slice().forEach(e=>{e(r)}),(e?.get("*")||[]).slice().forEach(e=>{e(t,r)})}}}(this.eventsMap)}on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}addListener(e,t){return this.on(e,t),this}emit(e,t){return this.emitter.emit(e,t),this.eventListenersCount(e)>0}once(e,t){let r=i=>{t(i),this.off(e,r)};return this.on(e,r)}listenerCount(e){return this.eventListenersCount(e)}removeAllListeners(e){return e?this.eventsMap.delete(e):this.eventsMap.clear(),this}eventListenersCount(e){return this.eventsMap.get(e)?.length||0}}class eD extends Error{constructor(e){super(e),this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}}class ej extends eD{}class eL extends eD{code;originalMessage=""}var eB={Disconnected:Symbol("Connection.Disconnected")};class eN extends eR{transport;#i=0;#a=new Map;#n=!1;#o=new Map;constructor(e){super(),this.transport=e,this.transport.onmessage=this.#s.bind(this),this.transport.onclose=this.#l.bind(this)}static fromSession(e){return e.connection()}session(e){return this.#a.get(e)||null}send(e,...t){let r=t.length?t[0]:void 0,i=this._rawSend({method:e,params:r});return new Promise((t,a)=>{this.#o.set(i,{resolve:t,reject:a,method:e,returnSize:!0,stack:Error().stack??"",fn:e+JSON.stringify(r)})})}_rawSend(e){let t=++this.#i,r=JSON.stringify({...e,id:t});return this.transport.send(r),t}#s(e){let t=JSON.parse(e);if("Target.attachedToTarget"===t.method){let{sessionId:e}=t.params,r=new ez(this,t.params.targetInfo.type,e);this.#a.set(e,r),this.emit("sessionattached",r);let i=this.#a.get(t.sessionId);i&&i.emit("sessionattached",r)}else if("Target.detachedFromTarget"===t.method){let e=this.#a.get(t.params.sessionId);if(e){e._onClosed(),this.#a.delete(t.params.sessionId),this.emit("sessiondetached",e);let r=this.#a.get(t.sessionId);r&&r.emit("sessiondetached",e)}}if(t.sessionId){let r=this.#a.get(t.sessionId);r&&r._onMessage(t,e.length)}else if(t.id){let r=this.#o.get(t.id);r&&(this.#o.delete(t.id),t.error?r.reject(eU(r.method,t)):r.returnSize?r.resolve({value:t.result,size:e.length}):r.resolve(t.result))}else this.emit(t.method,t.params)}#l(){if(!this.#n){for(let e of(this.transport.onmessage=void 0,this.transport.onclose=void 0,this.#o.values()))e.reject(eV(new eL,`Protocol error (${e.method}): Target closed. https://www.remotion.dev/docs/target-closed`));for(let e of(this.#o.clear(),this.#a.values()))e._onClosed();this.#a.clear(),this.emit(eB.Disconnected)}}dispose(){this.#l(),this.transport.close()}async createSession(e){let{value:{sessionId:t}}=await this.send("Target.attachToTarget",{targetId:e.targetId,flatten:!0}),r=this.#a.get(t);if(!r)throw Error("CDPSession creation failed.");return r}}var e$={Disconnected:Symbol("CDPSession.Disconnected")};class ez extends eR{#u;#c;#o=new Map;#d;constructor(e,t,r){super(),this.#d=e,this.#c=t,this.#u=r}connection(){return this.#d}send(e,...t){if(!this.#d)return Promise.reject(Error(`Protocol error (${e}): Session closed. Most likely the ${this.#c} has been closed.`));let r=t.length?t[0]:void 0,i=this.#d._rawSend({sessionId:this.#u,method:e,params:r});return new Promise((t,a)=>{if(this.#o.size>100){for(let e of this.#o.values())ek.info({indent:!1,logLevel:"info"},e.fn);throw Error("Leak detected: Too many callbacks")}this.#o.set(i,{resolve:t,reject:a,method:e,returnSize:!0,stack:Error().stack??"",fn:e+JSON.stringify(r)})})}_onMessage(e,t){let r=e.id?this.#o.get(e.id):void 0;e.id&&r?(this.#o.delete(e.id),e.error?r.reject(eU(r.method,e)):r.returnSize?r.resolve({value:e.result,size:t}):r.resolve(e.result)):this.emit(e.method,e.params)}_onClosed(){for(let e of(this.#d=void 0,this.#o.values()))e.reject(eV(new eL,`Protocol error (${e.method}): Target closed. https://www.remotion.dev/docs/target-closed`));this.#o.clear(),this.emit(e$.Disconnected)}id(){return this.#u}}function eU(e,t){let r=`Protocol error (${e}): ${t.error.message}`;return"data"in t.error&&(r+=` ${t.error.data}`),eV(new eL,r,t.error.message)}function eV(e,t,r){return e.message=t,e.originalMessage=r??e.originalMessage,e}function eH(e){if(e.exception)return e.exception.description||e.exception.value;let t=e.text;if(e.stackTrace)for(let r of e.stackTrace.callFrames){let e=r.url+":"+r.lineNumber+":"+r.columnNumber,i=r.functionName||"<anonymous>";t+=`
    at ${i} (${e})`}return t}function eW(e){if(eO(!e.objectId,"Cannot extract value when objectId is given"),e.unserializableValue){if("bigint"===e.type&&"u">typeof BigInt)return BigInt(e.unserializableValue.replace("n",""));switch(e.unserializableValue){case"-0":return -0;case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw Error("Unsupported unserializable value: "+e.unserializableValue)}}return e.value}async function eq(e,t){t.objectId&&await e.send("Runtime.releaseObject",{objectId:t.objectId}).catch(()=>{})}function eG(e,t,r){return e.on(t,r),()=>e.off(t,r)}function eZ(e){for(let t of e)t();e.length=0}var eK=e=>"string"==typeof e||e instanceof String;function eQ(e,...t){return eK(e)?(eO(0===t.length,"Cannot evaluate a string with arguments"),e):`(${e})(${t.map(function(e){return Object.is(e,void 0)?"undefined":JSON.stringify(e)}).join(",")})`}async function eX(e,t,r,i){let a,n=new ej(`waiting for ${t} failed: timeout ${r}ms exceeded`),o=new Promise((e,t)=>{a=t}),s=null;r&&(s=setTimeout(()=>a(n),r));try{return await Promise.race([new Promise((e,t)=>{i.once("closed",()=>t())}),e,o])}finally{s&&clearTimeout(s)}}function eJ(e){return"object"==typeof e&&null!==e&&"name"in e&&"message"in e}class eY{#p;#f=null;#h=null;#m=!1;#g=new Set;get _waitTasks(){return this.#g}constructor(e){this.#p=e,this._setContext(null)}frame(){return this.#p}_setContext(e){if(e)for(let t of(eO(this.#h,"Execution Context has already been set."),this.#h?.call(null,e),this.#h=null,this._waitTasks))t.rerun();else this.#f=new Promise(e=>{this.#h=e})}_hasContext(){return!this.#h}_detach(){for(let e of(this.#m=!0,this._waitTasks))e.terminate(Error("waitForFunction failed: frame got detached."))}executionContext(){if(this.#m)throw Error(`Execution context is not available in detached frame "${this.#p.url()}" (are you trying to evaluate?)`);if(null===this.#f)throw Error("Execution content promise is missing");return this.#f}async evaluateHandle(e,...t){return(await this.executionContext()).evaluateHandle(e,...t)}async evaluate(e,...t){return(await this.executionContext()).evaluate(e,...t)}waitForFunction({browser:e,timeout:t,pageFunction:r,title:i}){return new e1({domWorld:this,predicateBody:r,title:i,timeout:t,args:[],browser:e})}}var e0=()=>{};class e1{#v;#y;#b;#x;#w=0;#S=e0;#k=e0;#C;#E=!1;#_;promise;constructor(e){if(this.#v=e.domWorld,this.#y=e.timeout,this.#b=function(e){return eK(e)?`return (${e});`:`return (${e})(...args);`}(e.predicateBody),this.#x=e.args,this.#w=0,this.#v._waitTasks.add(this),this.promise=new Promise((e,t)=>{this.#S=e,this.#k=t}),e.timeout){const t=new ej(`waiting for ${e.title} failed: timeout ${e.timeout}ms exceeded`);this.#C=setTimeout(()=>this.#k(t),e.timeout)}this.#_=e.browser,this.#_.on("closed",this.onBrowserClose),this.#_.on("closed-silent",this.onBrowserCloseSilent),this.rerun()}onBrowserClose=()=>this.terminate(Error("Browser was closed"));onBrowserCloseSilent=()=>this.terminate(null);terminate(e){this.#E=!0,e&&this.#k(e),this.#T()}async rerun(){let e=++this.#w,t=null,r=null,i=await this.#v.executionContext();if(!this.#E&&e===this.#w&&!this.#E&&e===this.#w){try{t=await i.evaluateHandle(e2,this.#b,this.#y,...this.#x)}catch(e){r=e}if(this.#E||e!==this.#w){t&&await t.dispose();return}if(!r&&await this.#v.evaluate(e=>!e,t).catch(()=>!0)){if(!t)throw Error("Assertion: result handle is not available");await t.dispose();return}if(r){if(r.message.includes("TypeError: binding is not a function"))return this.rerun();if(r.message.includes("Execution context is not available in detached frame"))return void this.terminate(Error("waitForFunction failed: frame got detached."));if(r.message.includes("Execution context was destroyed")||r.message.includes("Cannot find context with specified id"))return;this.#k(r)}else{if(!t)throw Error("Assertion: result handle is not available");this.#S(t)}this.#T()}}#T(){if(void 0!==this.#C&&clearTimeout(this.#C),this.#_.off("closed",this.onBrowserClose),this.#_.off("closed-silent",this.onBrowserCloseSilent),this.#v._waitTasks.size>100)throw Error("Leak detected: Too many WaitTasks");this.#v._waitTasks.delete(this)}}function e2(e,t,...r){let i=Function("...args",e),a=!1;return t&&setTimeout(()=>{a=!0},t),new Promise(e=>{async function t(){if(a)return void e(void 0);let n=await i(...r);n?e(n):requestAnimationFrame(t)}t()})}function e4(e,t){let r=e.frame();return"node"===t.subtype&&r?new e6(e,e._client,t):new e3(e,e._client,t)}class e3{#P;#I=!1;#A;#O;get _disposed(){return this.#I}get _remoteObject(){return this.#O}get _context(){return this.#A}constructor(e,t,r){this.#A=e,this.#P=t,this.#O=r}executionContext(){return this.#A}evaluateHandle(e,...t){return this.executionContext().evaluateHandle(e,this,...t)}asElement(){return null}async dispose(){this.#I||(this.#I=!0,await eq(this.#P,this.#O))}toString(){return this.#O.objectId?"JSHandle@"+(this.#O.subtype||this.#O.type):eW(this.#O)}}class e6 extends e3{asElement(){return this}}var e8="pptr://__puppeteer_evaluation_script__",e5=/^[\x20\t]*\/\/[@#] sourceURL=\s*(\S*?)\s*$/m;class e7{_client;_world;_contextId;_contextName;constructor(e,t,r){this._client=e,this._world=r,this._contextId=t.id,this._contextName=t.name}frame(){return this._world?this._world.frame():null}evaluate(e,...t){return this.#M(!0,e,...t)}evaluateHandle(e,...t){return this.#M(!1,e,...t)}async #M(e,t,...r){let i,a=`//# sourceURL=${e8}`;if(eK(t)){let r=this._contextId,i=e5.test(t)?t:t+`
`+a,{value:{exceptionDetails:n,result:o}}=await this._client.send("Runtime.evaluate",{expression:i,contextId:r,returnByValue:e,awaitPromise:!0,userGesture:!0}).catch(l);if(n)throw Error("Evaluation failed: "+eH(n));return e?eW(o):e4(this,o)}if("function"!=typeof t)throw Error(`Expected to get |string| or |function| as the first argument, but got "${t}" instead.`);let n=t.toString();try{Function("("+n+")")}catch(e){n=n.startsWith("async ")?"async function "+n.substring(6):"function "+n;try{Function("("+n+")")}catch(e){throw Error("Passed function is not well-serializable!")}}try{i=this._client.send("Runtime.callFunctionOn",{functionDeclaration:n+`
`+a+`
`,executionContextId:this._contextId,arguments:r.map((function(e){if("bigint"==typeof e)return{unserializableValue:`${e.toString()}n`};if(Object.is(e,-0))return{unserializableValue:"-0"};if(Object.is(e,1/0))return{unserializableValue:"Infinity"};if(Object.is(e,-1/0))return{unserializableValue:"-Infinity"};if(Object.is(e,NaN))return{unserializableValue:"NaN"};let t=e&&e instanceof e3?e:null;if(t){if(t._context!==this)throw Error("JSHandles can be evaluated only in the context they were created!");if(t._disposed)throw Error("JSHandle is disposed!");return t._remoteObject.unserializableValue?{unserializableValue:t._remoteObject.unserializableValue}:t._remoteObject.objectId?{objectId:t._remoteObject.objectId}:{value:t._remoteObject.value}}return{value:e}}).bind(this)),returnByValue:e,awaitPromise:!0,userGesture:!0})}catch(e){throw e instanceof TypeError&&e.message.startsWith("Converting circular structure to JSON")&&(e.message+=" Recursive objects are not allowed."),e}let{value:{exceptionDetails:o,result:s}}=await i.catch(l);if(o)throw Error("Evaluation failed: "+eH(o));return e?eW(s):e4(this,s);function l(e){if(e.message.includes("Object reference chain is too long")||e.message.includes("Object couldn't be returned by value"))return{value:{result:{type:"undefined"}},size:1};if(e.message.endsWith("Cannot find context with specified id")||e.message.endsWith("Inspected target navigated or closed"))throw Error("Execution context was destroyed, most likely because of a navigation.");throw e}}}class e9{_requestId;_response=null;_url=null;_fromMemoryCache=!1;#F;#p;constructor(e,t){this._requestId=t.requestId,this.#F=t.requestId===t.loaderId&&"Document"===t.type,this.#p=e,this._url=t.request.url}response(){return this._response}frame(){return this.#p}isNavigationRequest(){return this.#F}}class te{#R;constructor(e,t){this.#R=t?t.statusCode:e.status}status(){return this.#R}}class tt{#D=new Map;#j=new Map;#L=new Map;#B=new Map;#N=new Map;#$=new Map;#z=new Map;forget(e){this.#D.delete(e),this.#j.delete(e),this.#$.delete(e),this.#N.delete(e),this.#B.delete(e),this.#z.delete(e)}queueFailedLoadInfo(e,t){this.#z.set(e,{event:t})}getFailedLoadInfo(e){return this.#z.get(e)?.event}getResponseExtraInfo(e){return this.#B.has(e)||this.#B.set(e,[]),this.#B.get(e)}queuedRedirectInfo(e){return this.#N.has(e)||this.#N.set(e,[]),this.#N.get(e)}queueRedirectInfo(e,t){this.queuedRedirectInfo(e).push(t)}takeQueuedRedirectInfo(e){return this.queuedRedirectInfo(e).shift()}storeRequestWillBeSent(e,t){this.#D.set(e,t)}getRequestWillBeSent(e){return this.#D.get(e)}forgetRequestWillBeSent(e){this.#D.delete(e)}storeRequestPaused(e,t){this.#j.set(e,t)}getRequest(e){return this.#L.get(e)}storeRequest(e,t){this.#L.set(e,t)}forgetRequest(e){this.#L.delete(e)}getQueuedEventGroup(e){return this.#$.get(e)}queueEventGroup(e,t){this.#$.set(e,t)}forgetQueuedEventGroup(e){this.#$.delete(e)}}var tr={Request:Symbol("NetworkManager.Request")};class ti extends eR{#P;#U;#V=new tt;#H;#W;constructor(e,t,r,i){super(),this.#P=e,this.#U=t,this.#H=r,this.#W=i,this.#P.on("Fetch.requestPaused",this.#q.bind(this)),this.#P.on("Network.requestWillBeSent",this.#G.bind(this)),this.#P.on("Network.requestServedFromCache",this.#Z.bind(this)),this.#P.on("Network.responseReceived",this.#K.bind(this)),this.#P.on("Network.loadingFinished",this.#Q.bind(this)),this.#P.on("Network.loadingFailed",this.#X.bind(this)),this.#P.on("Network.responseReceivedExtraInfo",this.#J.bind(this))}async initialize(){await this.#P.send("Network.enable")}#G(e){this.#Y(e,void 0)}#q(e){let t,{networkId:r,requestId:i}=e;if(!r)return;let a=(t=this.#V.getRequestWillBeSent(r))&&(t.request.url!==e.request.url||t.request.method!==e.request.method)?void this.#V.forgetRequestWillBeSent(r):t;a?(this.#ee(a,e),this.#Y(a,i)):this.#V.storeRequestPaused(r,e)}#ee(e,t){e.request.headers={...e.request.headers,...t.request.headers}}#Y(e,t){if(e.redirectResponse){let r=null;if(e.redirectHasExtraInfo&&!(r=this.#V.getResponseExtraInfo(e.requestId).shift()))return void this.#V.queueRedirectInfo(e.requestId,{event:e,fetchRequestId:t});let i=this.#V.getRequest(e.requestId);i&&this.#et(i,e.redirectResponse,r)}let r=new e9(e.frameId?this.#U.frame(e.frameId):null,e);this.#V.storeRequest(e.requestId,r),this.emit(tr.Request,r)}#Z(e){let t=this.#V.getRequest(e.requestId);t&&(t._fromMemoryCache=!0)}#et(e,t,r){e._response=new te(t,r),this.#er(e,!1)}#ei(e,t){let r=this.#V.getRequest(e.requestId);r&&(r._response=new te(e.response,t))}#K(e){let t=this.#V.getRequest(e.requestId),r=null;!t||t._fromMemoryCache||!e.hasExtraInfo||(r=this.#V.getResponseExtraInfo(e.requestId).shift())?this.#ei(e,r):this.#V.queueEventGroup(e.requestId,{responseReceivedEvent:e})}#J(e){let t=this.#V.takeQueuedRedirectInfo(e.requestId);if(t){this.#V.getResponseExtraInfo(e.requestId).push(e),this.#Y(t.event,t.fetchRequestId);return}let r=this.#V.getQueuedEventGroup(e.requestId);if(r){this.#V.forgetQueuedEventGroup(e.requestId),this.#ei(r.responseReceivedEvent,e),r.loadingFinishedEvent&&this.#ea(r.loadingFinishedEvent),r.loadingFailedEvent&&this.#en(r.loadingFailedEvent);return}this.#V.getResponseExtraInfo(e.requestId).push(e)}#er(e,t){let r=e._requestId;this.#V.forgetRequest(r),t&&this.#V.forget(r)}#Q(e){let t=this.#V.getQueuedEventGroup(e.requestId);t?t.loadingFinishedEvent=e:this.#ea(e)}#ea(e){let t=this.#V.getRequest(e.requestId);t&&this.#er(t,!0)}#X(e){let t=this.#V.getQueuedEventGroup(e.requestId);t?t.loadingFailedEvent=e:this.#en(e)}#en(e){let t=this.#V.getRequest(e.requestId);t&&(e.canceled||(({extraInfo:e,logLevel:t,indent:r,request:i,event:a})=>{let n=e[0]??null;ek.warn({indent:r,logLevel:t},`Browser failed to load ${i._url} (${a.type}): ${a.errorText}`),n&&(ek.warn({indent:r,logLevel:t},`HTTP status code: ${n.statusCode}, headers:`),ek.warn({indent:r,logLevel:t},JSON.stringify(n.headers,null,2))),"net::ERR_FAILED"===a.errorText&&"Fetch"===a.type&&i._url?.includes("/proxy")&&(ek.warn({indent:r,logLevel:t},"This could be caused by Chrome rejecting the request because the disk space is low."),ek.warn({indent:r,logLevel:t},"This could be caused by Chrome rejecting the request because the disk space is low."),ek.warn({indent:r,logLevel:t},"Consider increasing the disk size of your Lambda function."))})({extraInfo:this.#V.getResponseExtraInfo(e.requestId),event:e,indent:this.#H,logLevel:this.#W,request:t}),this.#er(t,!0))}}var ta=new Map([["load","load"]]),tn=()=>{};class to{#eo;#U;#p;#y;#es=null;#el;#eu=tn;#ec=new Promise(e=>{this.#eu=e});#ed=tn;#ep=new Promise(e=>{this.#ed=e});#ef=tn;#eh=new Promise(e=>{this.#ef=e});#em=tn;#eg=new Promise(e=>{this.#em=e});#ev;#ey;#eb;#ex;#ew;constructor(e,t,r,i){eO(ta.get(r),"Unknown value for options.waitUntil: "+r),this.#eo=[r],this.#U=e,this.#p=t,this.#y=i,this.#el=[eG(e._client,e$.Disconnected,this.#eS.bind(this,Error("Navigation failed because browser has disconnected!"))),eG(this.#U,tu.LifecycleEvent,this.#ek.bind(this)),eG(this.#U,tu.FrameNavigatedWithinDocument,this.#eC.bind(this)),eG(this.#U,tu.FrameNavigated,this.#eE.bind(this)),eG(this.#U,tu.FrameSwapped,this.#e_.bind(this)),eG(this.#U,tu.FrameDetached,this.#eT.bind(this)),eG(this.#U.networkManager(),tr.Request,this.#Y.bind(this))],this.#ev=this.#eP(),this.#ek()}#Y(e){e.frame()===this.#p&&e.isNavigationRequest()&&(this.#es=e)}#eT(e){this.#p===e?this.#em.call(null,Error("Navigating frame was detached")):this.#ek()}navigationResponse(){return this.#es?this.#es.response():null}#eS(e){this.#em.call(null,e)}sameDocumentNavigationPromise(){return this.#ec}newDocumentNavigationPromise(){return this.#eh}lifecyclePromise(){return this.#ep}timeoutOrTerminationPromise(){return Promise.race([this.#ev,this.#eg])}async #eP(){if(!this.#y)return new Promise(tn);let e="Navigation timeout of "+this.#y+" ms exceeded";return await new Promise(e=>{this.#ey=setTimeout(e,this.#y)}),new ej(e)}#eC(e){e===this.#p&&(this.#eb=!0,this.#ek())}#eE(e){e===this.#p&&(this.#ex=!0,this.#ek())}#e_(e){e===this.#p&&(this.#ew=!0,this.#ek())}#ek(){(function e(t,r){for(let e of r)if(!t._lifecycleEvents.has(e))return!1;for(let i of t.childFrames())if(i._hasStartedLoading&&!e(i,r))return!1;return!0})(this.#p,this.#eo)&&(this.#ed(),this.#eb&&this.#eu(),(this.#ew||this.#ex)&&this.#ef())}dispose(){eZ(this.#el),void 0!==this.#ey&&clearTimeout(this.#ey)}}var ts=e=>e?.message?.includes("Target closed")||e?.message?.includes("Session closed"),tl="__puppeteer_utility_world__",tu={FrameNavigated:Symbol("FrameManager.FrameNavigated"),FrameDetached:Symbol("FrameManager.FrameDetached"),FrameSwapped:Symbol("FrameManager.FrameSwapped"),LifecycleEvent:Symbol("FrameManager.LifecycleEvent"),FrameNavigatedWithinDocument:Symbol("FrameManager.FrameNavigatedWithinDocument"),ExecutionContextCreated:Symbol("FrameManager.ExecutionContextCreated"),ExecutionContextDestroyed:Symbol("FrameManager.ExecutionContextDestroyed")};class tc extends eR{#eI;#eA;#eO=new Map;#eM=new Map;#eF=new Set;#eR;#P;get _client(){return this.#P}constructor(e,t,r,i){super(),this.#P=e,this.#eI=t,this.#eA=new ti(e,this,r,i),this.setupEventListeners(this.#P)}setupEventListeners(e){e.on("Page.frameAttached",t=>{this.#eD(e,t.frameId,t.parentFrameId)}),e.on("Page.frameNavigated",e=>{this.#ej(e.frame)}),e.on("Page.navigatedWithinDocument",e=>{this.#eL(e.frameId,e.url)}),e.on("Page.frameDetached",e=>{this.#eT(e.frameId,e.reason)}),e.on("Page.frameStartedLoading",e=>{this.#eB(e.frameId)}),e.on("Page.frameStoppedLoading",e=>{this.#eN(e.frameId)}),e.on("Runtime.executionContextCreated",t=>{this.#e$(t.context,e)}),e.on("Runtime.executionContextDestroyed",t=>{this.#ez(t.executionContextId,e)}),e.on("Runtime.executionContextsCleared",()=>{this.#eU(e)}),e.on("Page.lifecycleEvent",e=>{this.#eV(e)}),e.on("Target.attachedToTarget",e=>{this.#eH(e)}),e.on("Target.detachedFromTarget",e=>{this.#eW(e)})}async initialize(e=this.#P){try{let{value:{frameTree:t}}=(await Promise.all([e.send("Page.enable"),e.send("Page.getFrameTree"),e===this.#P?Promise.resolve():e.send("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!1,flatten:!0})]))[1];this.#eq(e,t),await Promise.all([e.send("Page.setLifecycleEventsEnabled",{enabled:!0}),e.send("Runtime.enable").then(()=>this._ensureIsolatedWorld(e,tl)),e===this.#P?this.#eA.initialize():Promise.resolve()])}catch(e){if(eJ(e)&&ts(e))return;throw e}}networkManager(){return this.#eA}async navigateFrame(e,t,r,i={}){let{referer:a,waitUntil:n="load"}=i,o=new to(this,e,n,r),s=await Promise.race([l(this.#P,t,a,e._id),o.timeoutOrTerminationPromise()]);if(s||(s=await Promise.race([o.timeoutOrTerminationPromise(),o.newDocumentNavigationPromise(),o.sameDocumentNavigationPromise()])),o.dispose(),s)throw s;return o.navigationResponse();async function l(e,t,r,i){try{let{value:a}=await e.send("Page.navigate",{url:t,referrer:r,frameId:i});return a.errorText?Error(`${a.errorText} at ${t}`):null}catch(e){if(eJ(e))return e;throw e}}}async #eH(e){if("iframe"!==e.targetInfo.type)return;let t=this.#eO.get(e.targetInfo.targetId),r=eN.fromSession(this.#P);eO(r);let i=r.session(e.sessionId);eO(i),t&&t._updateClient(i),this.setupEventListeners(i),await this.initialize(i)}#eW(e){if(!e.targetId)return;let t=this.#eO.get(e.targetId);t?.isOOPFrame()&&this.#eG(t)}#eV(e){let t=this.#eO.get(e.frameId);t&&(t._onLifecycleEvent(e.loaderId,e.name),this.emit(tu.LifecycleEvent,t))}#eB(e){let t=this.#eO.get(e);t&&t._onLoadingStarted()}#eN(e){let t=this.#eO.get(e);t&&(t._onLoadingStopped(),this.emit(tu.LifecycleEvent,t))}#eq(e,t){if(t.frame.parentId&&this.#eD(e,t.frame.id,t.frame.parentId),this.#ej(t.frame),t.childFrames)for(let r of t.childFrames)this.#eq(e,r)}page(){return this.#eI}mainFrame(){return eO(this.#eR,"Requesting main frame too early!"),this.#eR}frames(){return Array.from(this.#eO.values())}frame(e){return this.#eO.get(e)||null}#eD(e,t,r){if(this.#eO.has(t)){let r=this.#eO.get(t);e&&r.isOOPFrame()&&r._updateClient(e);return}eO(r);let i=this.#eO.get(r);eO(i);let a=new td(this,i,t,e);this.#eO.set(a._id,a)}#ej(e){let t=!e.parentId,r=t?this.#eR:this.#eO.get(e.id);if(eO(t||r,"We either navigate top level or have old version of the navigated frame"),r)for(let e of r.childFrames())this.#eG(e);t&&(r?(this.#eO.delete(r._id),r._id=e.id):r=new td(this,null,e.id,this.#P),this.#eO.set(e.id,r),this.#eR=r),eO(r),r._navigated(e),this.emit(tu.FrameNavigated,r)}async _ensureIsolatedWorld(e,t){let r=`${e.id()}:${t}`;this.#eF.has(r)||(this.#eF.add(r),await e.send("Page.addScriptToEvaluateOnNewDocument",{source:`//# sourceURL=${e8}`,worldName:t}),await Promise.all(this.frames().filter(t=>t._client()===e).map(r=>e.send("Page.createIsolatedWorld",{frameId:r._id,worldName:t,grantUniveralAccess:!0}).catch(()=>{}))))}#eL(e,t){let r=this.#eO.get(e);r&&(r._navigatedWithinDocument(t),this.emit(tu.FrameNavigatedWithinDocument,r),this.emit(tu.FrameNavigated,r))}#eT(e,t){let r=this.#eO.get(e);"remove"===t?r&&this.#eG(r):"swap"===t&&this.emit(tu.FrameSwapped,r)}#e$(e,t){let r,i=e.auxData,a=i?.frameId,n="string"==typeof a?this.#eO.get(a):void 0;if(n){if(n._client()!==t)return;e.auxData&&e.auxData.isDefault?r=n._mainWorld:e.name!==tl||n._secondaryWorld._hasContext()||(r=n._secondaryWorld)}let o=new e7(n?._client()||this.#P,e,r);r&&r._setContext(o);let s=`${t.id()}:${e.id}`;this.#eM.set(s,o)}#ez(e,t){let r=`${t.id()}:${e}`,i=this.#eM.get(r);i&&(this.#eM.delete(r),i._world&&i._world._setContext(null))}#eU(e){for(let[t,r]of this.#eM.entries())r._client===e&&(r._world&&r._world._setContext(null),this.#eM.delete(t))}executionContextById(e,t=this.#P){let r=`${t.id()}:${e}`,i=this.#eM.get(r);return eO(i,"INTERNAL ERROR: missing context with id = "+e),i}#eG(e){for(let t of e.childFrames())this.#eG(t);e._detach(),this.#eO.delete(e._id),this.emit(tu.FrameDetached,e)}}class td{#eZ;#eK="";#P;_frameManager;_id;_loaderId="";_name;_hasStartedLoading=!1;_lifecycleEvents=new Set;_mainWorld;_secondaryWorld;_childFrames;constructor(e,t,r,i){this._frameManager=e,this.#eZ=t??null,this.#eK="",this._id=r,this._loaderId="",this._childFrames=new Set,this.#eZ&&this.#eZ._childFrames.add(this),this._updateClient(i)}_updateClient(e){this.#P=e,this._mainWorld=new eY(this),this._secondaryWorld=new eY(this)}isOOPFrame(){return this.#P!==this._frameManager._client}goto(e,t,r={}){return this._frameManager.navigateFrame(this,e,t,r)}_client(){return this.#P}executionContext(){return this._mainWorld.executionContext()}evaluateHandle(e,...t){return this._mainWorld.evaluateHandle(e,...t)}evaluate(e,...t){return this._mainWorld.evaluate(e,...t)}url(){return this.#eK}childFrames(){return Array.from(this._childFrames)}_navigated(e){this._name=e.name,this.#eK=`${e.url}${e.urlFragment||""}`}_navigatedWithinDocument(e){this.#eK=e}_onLifecycleEvent(e,t){"init"===t&&(this._loaderId=e,this._lifecycleEvents.clear()),this._lifecycleEvents.add(t)}_onLoadingStopped(){this._lifecycleEvents.add("load")}_onLoadingStarted(){this._hasStartedLoading=!0}_detach(){this._mainWorld._detach(),this._secondaryWorld._detach(),this.#eZ&&this.#eZ._childFrames.delete(this),this.#eZ=null}}class tp{#eQ;constructor(){this.#eQ=Promise.resolve()}postTask(e){let t=this.#eQ.then(e);return this.#eQ=t.then(()=>{},()=>{}),t}}class tf{#e;#t;constructor(){this.#e=null,this.#t=null}setDefaultTimeout(e){this.#e=e}setDefaultNavigationTimeout(e){this.#t=e}navigationTimeout(){return null!==this.#t?this.#t:null!==this.#e?this.#e:3e4}timeout(){return null!==this.#e?this.#e:3e4}}var th=(e,t)=>{let r=t.filter(e=>!("symbol"===e.type&&e.description?.includes("__remotion_"))).map(e=>(e=>{if(e.preview){var t=e.preview;if(void 0===t)return"";if("object"===t.type){if("date"===t.subtype)return el.reset(`Date { ${el.magenta(String(t.description))} }`);let e=t.properties.map(e=>el.reset(`${e.name}: ${eM(e)}`));return"array"===t.subtype?t.overflow?el.reset(`[ ${t.properties.map(e=>eM(e)).join(", ")}, ]`):el.reset(`[ ${t.properties.map(e=>eM(e)).join(", ")} ]`):"arraybuffer"===t.subtype||"dataview"===t.subtype||"generator"===t.subtype||"iterator"===t.subtype||"map"===t.subtype?el.reset(String(t.description)):"node"===t.subtype?el.magenta(`<${t.description}>`):"null"===t.subtype?el.white(String(t.description)):"promise"===t.subtype||"proxy"===t.subtype?el.reset(String(t.description)):"regexp"===t.subtype?el.red(String(t.description)):"set"===t.subtype||"typedarray"===t.subtype||"error"===t.subtype||"wasmvalue"===t.subtype||"weakmap"===t.subtype||"weakset"===t.subtype||"webassemblymemory"===t.subtype?el.reset(String(t.description)):0===e.length?el.reset("{}"):t.overflow?el.reset(`{ ${e.join(", ")}, }`):el.reset(`{ ${e.join(", ")} }`)}return""}if("string"===e.type)return e.value.includes(U.NoReactInternals.DELAY_RENDER_CLEAR_TOKEN)?el.gray(`${e.value}`):`${e.value}`;if("number"===e.type)return el.yellow(`${e.value}`);if("bigint"===e.type)return el.yellow(`${e.description}`);if("boolean"===e.type)return el.yellow(`${e.value}`);if("function"===e.type)return el.cyan(String(e.description));if("object"===e.type)return"null"===e.subtype?"null":el.reset("Object");if("symbol"===e.type)return el.green(`${e.description}`);if("undefined"===e.type)return el.gray("undefined");throw Error("unhandled remote object")})(e)).filter(Boolean).join(" "),i=null,a=null;for(let e of t)"symbol"===e.type&&e.description?.includes("__remotion_level_")&&(i=e.description?.split("__remotion_level_")?.[1]?.replace(")","")),"symbol"===e.type&&e.description?.includes("__remotion_tag_")&&(a=e.description?.split("__remotion_tag_")?.[1]?.replace(")",""));return{previewString:r,logLevelFromRemotionLog:i,logLevelFromEvent:"debug"===e?"verbose":"error"===e?"error":"warning"===e?"warn":"verbose",tag:a}};class tm extends eR{id;static async _create({client:e,target:t,defaultViewport:r,browser:i,sourceMapGetter:a,logLevel:n,indent:o,pageIndex:s,onBrowserLog:l,onLog:u}){let c=new tm({client:e,target:t,browser:i,sourceMapGetter:a,logLevel:n,indent:o,pageIndex:s,onBrowserLog:l,onLog:u});return await c.#eX(),await c.setViewport(r),c}closed=!1;#P;#eJ;#eY=new tf;#U;#e0=new Map;browser;screenshotTaskQueue;sourceMapGetter;logLevel;indent;pageIndex;onBrowserLog;onLog;constructor({client:e,target:t,browser:r,sourceMapGetter:i,logLevel:a,indent:n,pageIndex:o,onBrowserLog:s,onLog:l}){super(),this.#P=e,this.#eJ=t,this.#U=new tc(e,this,n,a),this.screenshotTaskQueue=new tp,this.browser=r,this.id=String(Math.random()),this.sourceMapGetter=i,this.logLevel=a,this.indent=n,this.pageIndex=o,this.onBrowserLog=s,this.onLog=l,e.on("Target.attachedToTarget",t=>{switch(t.targetInfo.type){case"iframe":case"worker":break;default:e.send("Target.detachFromTarget",{sessionId:t.sessionId}).catch(e=>ek.error({indent:n,logLevel:a},e))}}),e.on("Runtime.consoleAPICalled",e=>this.#e1(e)),e.on("Runtime.bindingCalled",e=>this.#e2(e)),e.on("Inspector.targetCrashed",()=>this.#e4()),e.on("Log.entryAdded",e=>this.#e3(e))}#e6=e=>{let t=e.stackTrace(),{url:r,columnNumber:i,lineNumber:a}=t[0]??{},n=this.logLevel,o=this.indent;if(!(e.text.includes("Mixed Content:")&&e.text.includes("http://localhost:")))if(this.onBrowserLog?.({stackTrace:t,text:e.text,type:e.type}),r?.endsWith(U.NoReactInternals.bundleName)&&a&&this.sourceMapGetter()){let t=this.sourceMapGetter()?.originalPositionFor({column:i??0,line:a}),r=[t?.source,t?.line,t?.column].filter(ew).join(":"),n=e.previewString.includes(U.NoReactInternals.DELAY_RENDER_CLEAR_TOKEN),o=`Tab ${this.pageIndex}`,s=[t?.name,n?null:r].filter(ew).join("@"),l=[o,e.tag,e.tag?null:s].filter(ew).join(", ");this.onLog({logLevel:e.logLevel,tag:l,previewString:e.previewString})}else"error"===e.type?e.text.includes("Failed to load resource:")?ek.error({logLevel:n,tag:r,indent:o},e.text.replace(/\(\)$/,"")):ek.error({logLevel:n,tag:`console.${e.type}`,indent:o},e.text):ek.verbose({logLevel:n,tag:`console.${e.type}`,indent:o},e.text)};async #eX(){await Promise.all([this.#U.initialize(),this.#P.send("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!1,flatten:!0}),this.#P.send("Performance.enable"),this.#P.send("Log.enable")])}on(e,t){return super.on(e,t)}once(e,t){return super.once(e,t)}off(e,t){return super.off(e,t)}target(){return this.#eJ}_client(){return this.#P}#e4(){this.emit("error",Error("Page crashed!"))}#e3(e){let{level:t,text:r,args:i,source:a,url:n,lineNumber:o}=e.entry;i&&i.map(e=>eq(this.#P,e));let{previewString:s,logLevelFromRemotionLog:l,logLevelFromEvent:u,tag:c}=th(t,i??[]);if("worker"!==a){let e=new eF({type:t,text:r,args:[],stackTraceLocations:[{url:n,lineNumber:o}],previewString:s,logLevel:l??u,tag:c});this.onBrowserLog?.({stackTrace:e.stackTrace(),text:e.text,type:e.type}),this.#e6(e)}}mainFrame(){return this.#U.mainFrame()}async setViewport(e){let t=process.env.DISABLE_FROM_SURFACE?{mobile:!1,width:e.width,height:e.height,deviceScaleFactor:1,screenHeight:e.height,screenWidth:e.width,scale:e.deviceScaleFactor,viewport:{height:e.height*e.deviceScaleFactor,width:e.width*e.deviceScaleFactor,scale:1,x:0,y:0}}:{mobile:!1,width:e.width,height:e.height,deviceScaleFactor:e.deviceScaleFactor,screenOrientation:{angle:0,type:"portraitPrimary"}},{value:r}=await this.#P.send("Emulation.setDeviceMetricsOverride",t);return r}setDefaultNavigationTimeout(e){this.#eY.setDefaultNavigationTimeout(e)}setDefaultTimeout(e){this.#eY.setDefaultTimeout(e)}async evaluateHandle(e,...t){return(await this.mainFrame().executionContext()).evaluateHandle(e,...t)}#e1(e){if(0===e.executionContextId)return;let t=this.#U.executionContextById(e.executionContextId,this.#P),r=e.args.map(e=>e4(t,e));this.#e8(e.type,r,e.stackTrace)}async #e2(e){let t;try{t=JSON.parse(e.payload)}catch{return}let{type:r,name:i,seq:a,args:n}=t;if("exposedFun"!==r||!this.#e0.has(i))return;let o=null;try{let e=this.#e0.get(i);eO(e);let t=await e(...n);o=eQ(function(e,t,r){window[e].callbacks.get(t).resolve(r),window[e].callbacks.delete(t)},i,a,t)}catch(e){o=eJ(e)?eQ(function(e,t,r,i){let a=Error(r);a.stack=i,window[e].callbacks.get(t).reject(a),window[e].callbacks.delete(t)},i,a,e.message,e.stack):eQ(function(e,t,r){window[e].callbacks.get(t).reject(r),window[e].callbacks.delete(t)},i,a,e)}await this.#P.send("Runtime.evaluate",{expression:o,contextId:e.executionContextId})}#e8(e,t,r){let i=[];for(let e of t){let t=e._remoteObject;t.objectId?i.push(e.toString()):i.push(eW(t))}let a=[];if(r)for(let e of r.callFrames)a.push({url:e.url,lineNumber:e.lineNumber,columnNumber:e.columnNumber});let{previewString:n,logLevelFromRemotionLog:o,logLevelFromEvent:s,tag:l}=th(e,t.map(e=>e._remoteObject)??[]),u=new eF({type:e,text:i.join(" "),args:t,stackTraceLocations:a,previewString:n,logLevel:o??s,tag:l});this.#e6(u)}url(){return this.mainFrame().url()}goto({url:e,timeout:t,options:r={}}){return this.#U.mainFrame().goto(e,t,r)}async bringToFront(){await this.#P.send("Page.bringToFront")}async setAutoDarkModeOverride(){console.log(await this.#P.send("Emulation.setEmulatedMedia",{media:"screen",features:[{name:"prefers-color-scheme",value:"dark"}]}))}evaluate(e,...t){return this.#U.mainFrame().evaluate(e,...t)}async evaluateOnNewDocument(e,...t){let r=eQ(e,...t);await this.#P.send("Page.addScriptToEvaluateOnNewDocument",{source:r})}async close(e={runBeforeUnload:void 0}){let t=this.#P.connection();t&&(e.runBeforeUnload?await this.#P.send("Page.close"):(await t.send("Target.closeTarget",{targetId:this.#eJ._targetId}),await this.#eJ._isClosedPromise))}setBrowserSourceMapGetter(e){this.sourceMapGetter=e}}var tg=e=>{if(ep(e)||!(0,R.existsSync)(e))return;let t=2;for(;t>=0;){try{R.default.rmSync(e,{maxRetries:2,recursive:!0,force:!0,retryDelay:100})}catch{t--;continue}break}};class tv{static async create(e){let t=new H.URL(e);if("localhost"===t.hostname){let{address:e}=await V.promises.lookup(t.hostname,{verbatim:!1});t.hostname=e}return new Promise((e,r)=>{let i=new q(t,[],{followRedirects:!0,perMessageDeflate:!1,maxPayload:0x40000000,headers:{"User-Agent":"Remotion CLI"}});i.addEventListener("open",()=>e(new tv(i))),i.addEventListener("error",r)})}websocket;onmessage;onclose;constructor(e){this.websocket=e,this.websocket.addEventListener("message",e=>{this.onmessage&&this.onmessage.call(null,e.data)}),this.websocket.addEventListener("close",()=>{this.onclose&&this.onclose.call(null)}),this.websocket.addEventListener("error",()=>{})}send(e){this.websocket.send(e)}close(){this.websocket.close()}forgetEventLoop(){this.websocket._socket.unref()}rememberEventLoop(){this.websocket._socket.ref()}}var ty=e=>!(e.startsWith("DevTools listening on")||e.includes("Falling back to ALSA for audio output")||e.includes("Floss manager not present, cannot set Floss enable/disable")||e.includes("Failed to send GpuControl.CreateCommandBuffer")||e.includes("CreatePlatformSocket() failed: Address family not supported by protocol")||e.includes("Fontconfig error: No writable cache directories")||e.includes("AttributionReportingCrossAppWeb cannot be enabled in this configuration")||e.includes("Trying to Produce a Memory representation from a non-existent mailbox.")||e.includes("Received HEADERS for invalid stream")||e.includes("CVDisplayLinkCreateWithCGDisplay failed")||e.includes("Falling back to ALSA for audio output")||e.includes("VizNullHypothesis is disabled")),tb=e=>{let t=(e=>{let t=e.match(/^\[([0-9]{4})\/([0-9]{6})\.([0-9]{6}):([A-Z]+):(.*)\(([0-9]+)\)\](.*)/);if(!t)return null;let r=t[1],i=parseInt(r.slice(0,2),10),a=parseInt(r.slice(2,4),10),n=t[2],o=parseInt(n.slice(0,2),10),s=parseInt(n.slice(2,4),10),l=parseInt(n.slice(4,6),10),u=parseInt(t[3],10),c=t[4],d=t[5];return{day:i,month:a,hour:o,minute:s,seconds:l,microseconds:u,level:c,location:d,lineNumber:parseInt(t[6],10),message:t[7].trim()}})(e);if(!t)return{output:e,tag:"chrome"};let{location:r,lineNumber:i,message:a}=t;return"CONSOLE"===r?null:{output:`${r}:${i}: ${a}`,tag:"chrome"}},tx=`Puppeteer was unable to kill the process which ran the browser binary.
 This means that, on future Puppeteer launches, Puppeteer might not be able to launch the browser.
 Please check your open processes and ensure that the browser processes that Puppeteer launched have been killed.
 If you think this is a bug, please report it on the Puppeteer issue tracker.`,tw=async({executablePath:e,processArguments:t,userDataDir:r,logLevel:i,indent:a,timeout:n})=>{let o=ec(i,"verbose"),s=L.spawn(e,t,{detached:"win32"!==process.platform,env:process.env,stdio:o?["ignore","pipe","pipe"]:["pipe","pipe","pipe"]}),l=await function({browserProcess:e,timeout:t,logLevel:r,indent:i}){let a=e.stderr,n=e.stdout;eO(a,"`browserProcess` does not have stderr."),eO(n,"`browserProcess` does not have stdout.");let o="";return new Promise((s,l)=>{a.addListener("data",p),n.addListener("data",p),a.addListener("close",d);let u=[()=>a.removeListener("data",p),()=>n.removeListener("data",p),()=>a.removeListener("close",d),eG(e,"exit",(e,t)=>(ek.verbose({indent:i,logLevel:r},"Browser process exited with code",e,"signal",t),d(Error(`Closed with ${e} signal: ${t}`)))),eG(e,"error",e=>d(e))],c=t?setTimeout(function(){f(),l(new ej(`Timed out after ${t} ms while trying to connect to the browser! Chrome logged the following: ${o}`))},t):0;function d(e){f(),l(Error(["Failed to launch the browser process!",e?e.stack:null,o,"Troubleshooting: https://remotion.dev/docs/troubleshooting/browser-launch"].filter(ew).join(`
`)))}function p(e){let t=(o+=e.toString("utf8")).match(/DevTools listening on (ws:\/\/.*)/);t&&(f(),s(t[1]))}function f(){c&&clearTimeout(c),eZ(u)}})}({browserProcess:s,timeout:n,indent:a,logLevel:i}),u=new eN(await tv.create(l)),c=()=>{if(s.pid&&function(e){try{return process.kill(e,0)}catch(e){if(eJ(e)&&("errno"in e||"code"in e||"path"in e||"syscall"in e)&&e.code&&"ESRCH"===e.code)return!1;throw e}}(s.pid))try{{let e=-s.pid;ek.verbose({indent:a,logLevel:i},`Trying to kill browser process group ${e}`);try{process.kill(e,"SIGKILL")}catch(t){ek.verbose({indent:a,logLevel:i},`Could not kill browser process group ${e}. Killing process via Node.js API`),s.kill("SIGKILL")}}}catch(e){throw Error(`${tx}
Error cause: ${eJ(e)?e.stack:e}`)}tg(r),eZ(h)},d=()=>p?Promise.resolve():(ek.verbose({indent:a,logLevel:i},"Received SIGTERM signal. Killing browser process"),c(),tg(r),eZ(h),f);o&&(s.stdout?.on("data",e=>{let t=e.toString("utf8").trim();if(ty(t)){let e=tb(t);if(!e)return;let{output:r,tag:n}=e;ek.verbose({indent:a,logLevel:i,tag:n},r)}}),s.stderr?.on("data",e=>{let t=e.toString("utf8").trim();if(ty(t)){let e=tb(t);if(!e)return;let{output:r,tag:n}=e;ek.error({indent:a,logLevel:i,tag:n},r)}}));let p=!1,f=new Promise((e,t)=>{s.once("exit",()=>{p=!0;try{e()}catch(e){t(e)}})}),h=[eG(process,"exit",c)];return h.push(eG(process,"SIGINT",()=>{c(),process.exit(130)})),h.push(eG(process,"SIGTERM",d)),h.push(eG(process,"SIGHUP",d)),{listeners:h,deleteBrowserCaches:()=>{for(let e of[(0,D.join)(r,"Default","Cache","Cache_Data"),(0,D.join)(r,"Default","Code Cache"),(0,D.join)(r,"Default","DawnCache"),(0,D.join)(r,"Default","GPUCache")])tg(e)},forgetEventLoop:()=>{s.unref(),s.stdout?.unref(),s.stderr?.unref(),eO(u,"BrowserRunner not connected."),u.transport.forgetEventLoop()},rememberEventLoop:()=>{s.ref(),s.stdout?.ref(),s.stderr?.ref(),eO(u,"BrowserRunner not connected."),u.transport.rememberEventLoop()},connection:u,closeProcess:d}},tS=e=>"page"===e.type||"background_page"===e.type||"webview"===e.type;class tk{#e5;#e7;#e9;#te;#tt;_initializedPromise;_initializedCallback;_isClosedPromise;_closedCallback;_isInitialized;_targetId;constructor(e,t,r,i){this.#e7=e,this.#e5=t,this._targetId=e.targetId,this.#e9=r,this.#te=i,this._initializedPromise=new Promise(e=>{this._initializedCallback=e}).then(e=>{if(!e)return!1;let t=this.opener();return t&&t.#tt&&this.type(),!0}),this._isClosedPromise=new Promise(e=>{this._closedCallback=e}),this._isInitialized=!tS(this.#e7)||""!==this.#e7.url,this._isInitialized&&this._initializedCallback(!0)}createCDPSession(){return this.#e9()}_getTargetInfo(){return this.#e7}async page({sourceMapGetter:e,logLevel:t,indent:r,pageIndex:i,onBrowserLog:a,onLog:n}){return tS(this.#e7)&&!this.#tt&&(this.#tt=this.#e9().then(o=>tm._create({client:o,target:this,defaultViewport:this.#te??null,browser:this.browser(),sourceMapGetter:e,logLevel:t,indent:r,pageIndex:i,onBrowserLog:a,onLog:n}))),await this.#tt??null}async expectPage(){return await this.#tt??null}url(){return this.#e7.url}type(){let{type:e}=this.#e7;return"page"===e||"background_page"===e||"service_worker"===e||"shared_worker"===e||"browser"===e||"webview"===e?e:"other"}browser(){return this.#e5.browser()}browserContext(){return this.#e5}opener(){let{openerId:e}=this.#e7;if(e)return this.browser()._targets.get(e)}_targetInfoChanged(e){this.#e7=e,this._isInitialized||tS(this.#e7)&&""===this.#e7.url||(this._isInitialized=!0,this._initializedCallback(!0))}}class tC extends eR{static async create({defaultViewport:e,timeout:t,userDataDir:r,args:i,executablePath:a,logLevel:n,indent:o}){let s=await tw({executablePath:a,processArguments:i,userDataDir:r,indent:o,logLevel:n,timeout:t}),l=new tC({connection:s.connection,defaultViewport:e,runner:s});return await s.connection.send("Target.setDiscoverTargets",{discover:!0}),l}#te;connection;#tr;#ti;#ta;id;runner;get _targets(){return this.#ta}constructor({connection:e,defaultViewport:t,runner:r}){super(),this.#te=t,this.connection=e,this.id=Math.random().toString(36).substring(2,15),this.#tr=new tE(this),this.#ti=new Map,this.#ta=new Map,this.connection.on("Target.targetCreated",this.#tn.bind(this)),this.connection.on("Target.targetDestroyed",this.#to.bind(this)),this.connection.on("Target.targetInfoChanged",this.#ts.bind(this)),this.runner=r}browserContexts(){return[this.#tr,...Array.from(this.#ti.values())]}async #tn(e){let{targetInfo:t}=e,{browserContextId:r}=t,i=r&&this.#ti.has(r)?this.#ti.get(r):this.#tr;if(!i)throw Error("Missing browser context");let a=new tk(t,i,()=>this.connection.createSession(t),this.#te??null);eO(!this.#ta.has(e.targetInfo.targetId),"Target should not exist before targetCreated"),this.#ta.set(e.targetInfo.targetId,a),await a._initializedPromise&&this.emit("targetcreated",a)}#to(e){let t=this.#ta.get(e.targetId);if(!t)throw Error(`Missing target in _targetDestroyed (id = ${e.targetId})`);t._initializedCallback(!1),this.#ta.delete(e.targetId),t._closedCallback()}#ts(e){let t=this.#ta.get(e.targetInfo.targetId);if(!t)throw Error(`Missing target in targetInfoChanged (id = ${e.targetInfo.targetId})`);let r=t.url(),i=t._isInitialized;t._targetInfoChanged(e.targetInfo),i&&r!==t.url()&&this.emit("targetchanged",t)}newPage({context:e,logLevel:t,indent:r,pageIndex:i,onBrowserLog:a,onLog:n}){return this.#tr.newPage({context:e,logLevel:t,indent:r,pageIndex:i,onBrowserLog:a,onLog:n})}async _createPageInContext({context:e,logLevel:t,indent:r,pageIndex:i,onBrowserLog:a,onLog:n}){let{value:{targetId:o}}=await this.connection.send("Target.createTarget",{url:"about:blank",browserContextId:void 0}),s=this.#ta.get(o);if(!s)throw Error(`Missing target for page (id = ${o})`);if(!await s._initializedPromise)throw Error(`Failed to create target for page (id = ${o})`);let l=await s.page({sourceMapGetter:e,logLevel:t,indent:r,pageIndex:i,onBrowserLog:a,onLog:n});if(!l)throw Error("Failed to create a page for context");return l}targets(){return Array.from(this.#ta.values()).filter(e=>e._isInitialized)}async waitForTarget(e,t={}){let r,{timeout:i=3e4}=t,a=!1,n=new Promise(e=>{r=e});this.on("targetcreated",o),this.on("targetchanged",o);try{if(!i)return await n;return this.targets().forEach(o),await eX(n,"target",i,this)}finally{this.off("targetcreated",o),this.off("targetchanged",o)}async function o(t){await e(t)&&!a&&(a=!0,r(t))}}async pages(){return(await Promise.all(this.browserContexts().map(e=>e.pages()))).reduce((e,t)=>e.concat(t),[])}async close({silent:e}){await this.runner.closeProcess(),(await this.pages()).forEach(e=>{e.emit("disposed"),e.closed=!0}),this.disconnect(),this.emit(e?"closed-silent":"closed")}disconnect(){this.connection.dispose()}}class tE extends eR{#_;constructor(e){super(),this.#_=e}targets(){return this.#_.targets().filter(e=>e.browserContext()===this)}waitForTarget(e,t={}){return this.#_.waitForTarget(t=>t.browserContext()===this&&e(t),t)}async pages(){return(await Promise.all(this.targets().filter(e=>"page"===e.type()).map(e=>e.expectPage()))).filter(e=>!!e)}newPage({context:e,logLevel:t,indent:r,pageIndex:i,onBrowserLog:a,onLog:n}){return this.#_._createPageInContext({context:e,logLevel:t,indent:r,pageIndex:i,onBrowserLog:a,onLog:n})}browser(){return this.#_}}var t_=!1,tT=({indent:e,logLevel:t,type:r,binariesDirectory:i})=>{let a=i??tP(e,t);switch(r){case"compositor":return G.default.resolve(a,"remotion");case"ffmpeg":return G.default.join(a,"ffmpeg");case"ffprobe":return G.default.join(a,"ffprobe");default:throw Error(`Unknown executable type: ${r}`)}},tP=(t,r)=>{switch(process.platform){case"win32":if("x64"===process.arch)return(()=>{let e=Error("Cannot find module '@remotion/compositor-win32-x64-msvc'");throw e.code="MODULE_NOT_FOUND",e})().dir;throw Error(`Unsupported architecture on Windows: ${process.arch}`);case"darwin":switch(process.arch){case"x64":return(()=>{let e=Error("Cannot find module '@remotion/compositor-darwin-x64'");throw e.code="MODULE_NOT_FOUND",e})().dir;case"arm64":return e.r(59948).dir;default:throw Error(`Unsupported architecture on macOS: ${process.arch}`)}case"linux":{let e=function({indent:e,logLevel:t}){if(!process.report&&"u">typeof Bun)return t_||ek.warn({indent:e,logLevel:t},"Bun limitation: Could not determine if your Linux is using musl or glibc. Assuming glibc."),t_=!0,!1;let r=process.report?.getReport();if(r&&"string"==typeof r)return t_||ek.warn({indent:e,logLevel:t},"Bun limitation: Could not determine if your Windows is using musl or glibc. Assuming glibc."),t_=!0,!1;let{glibcVersionRuntime:i}=r.header;return!i}({indent:t,logLevel:r});switch(process.arch){case"x64":if(e)return(()=>{let e=Error("Cannot find module '@remotion/compositor-linux-x64-musl'");throw e.code="MODULE_NOT_FOUND",e})().dir;return(()=>{let e=Error("Cannot find module '@remotion/compositor-linux-x64-gnu'");throw e.code="MODULE_NOT_FOUND",e})().dir;case"arm64":if(e)return(()=>{let e=Error("Cannot find module '@remotion/compositor-linux-arm64-musl'");throw e.code="MODULE_NOT_FOUND",e})().dir;return(()=>{let e=Error("Cannot find module '@remotion/compositor-linux-arm64-gnu'");throw e.code="MODULE_NOT_FOUND",e})().dir;default:throw Error(`Unsupported architecture on Linux: ${process.arch}`)}}default:throw Error(`Unsupported OS: ${process.platform}, architecture: ${process.arch}`)}},tI=e=>({DYLD_LIBRARY_PATH:e}),tA=e=>{(e=>{let t=(0,R.statSync)(e),{mode:r}=t;if(1&r)return!0;if(!process.getuid||!process.getgid)throw Error("Cannot check permissions on Linux without process.getuid and process.getgid");let i=process.getuid(),a=process.getgid(),n=i===t.uid,o=a===t.gid;return n&&!!(64&r)||o&&!!(8&r)})(e)||(0,R.chmodSync)(e,493)},tO=({args:e,bin:t,indent:r,logLevel:i,options:a,binariesDirectory:n,cancelSignal:o})=>{let s=tT({type:t,indent:r,logLevel:i,binariesDirectory:n});tA(s);let l=G.default.dirname(s),u=(0,F.default)(s,e.filter(ew),{cwd:l,env:tI(l),...a});return o?.(()=>{u.kill()}),u},tM=e=>"mp3"===e||"aac"===e||"wav"===e,tF=e=>!(tR()||tM(e))&&("h264"===e||"h264-mkv"===e||"h265"===e),tR=()=>"true"===process.env.REMOTION_PARTITIONED_RENDERING,tD=["h264","h265","vp8","vp9","mp3","aac","wav","prores","h264-mkv","h264-ts","gif"],tj="h264",tL=({frame:e,durationInFrames:t})=>e<0?t+e:e,tB=async e=>{if(!e.endsWith(".js.map"))return Promise.reject(Error(`The URL ${e} does not seem to be a valid source map URL.`));let t=await t$(e);return new K.SourceMapConsumer(t)},tN=(e,t,r)=>{let i=function(e){let t=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)\s*$/gm,r=null;for(;;){let i=t.exec(e);if(null==i)break;r=i}return r?.[1]?r[1].toString():null}(t);if(null===i)return Promise.resolve(null);if(0===i.indexOf("data:")){let e=i.match(/^data:application\/json;([\w=:"-]+;)*base64,/);if(!e)throw Error("Sorry, non-base64 inline source-map encoding is not supported.");let t=window.atob(i.substring(e[0].length));try{let e=new K.SourceMapConsumer(JSON.parse(t));return Promise.resolve(e)}catch{return Promise.resolve(null)}}if("local"===r){let t=G.default.join(G.default.dirname(e),i);return Promise.resolve(new K.SourceMapConsumer((0,Z.readFileSync)(t,"utf8")))}let a=e.lastIndexOf("/");return tB(e.substring(0,a+1)+i)},t$=async e=>{let{request:t,response:r}=await eE(e);return new Promise((e,i)=>{let a="";r.on("data",e=>{a+=e}),r.on("end",()=>{t.destroy(),r.destroy(),e(a)}),r.on("error",e=>(t.destroy(),r.destroy(),i(e)))})},tz=async e=>{let t=[...new Set(e.map(e=>e.fileName).filter(e=>e.startsWith("http://")||e.startsWith("https://")).filter(ew))],r=await Promise.all(t.map(e=>tH(e))),i={};for(let e=0;e<t.length;e++)i[t[e]]=r[e];return tU(e,i)},tU=(e,t)=>e.map(e=>{let r=t[e.fileName];return r?tV(e,r):null}).filter(ew).filter(e=>null!==e.originalScriptCode),tV=(e,t)=>{var r,i;let a,n=(r=e.lineNumber,i=e.columnNumber,{line:(a=t.originalPositionFor({line:r,column:i})).line,column:a.column,source:a.source}),o=n.source?t.sourceContentFor(n.source,!1):null,s=o&&n.line?function(e,t,r){let i=[];for(let t=Math.max(0,e-1-3)+1;t<=Math.min(r.length-1,e-1+3);++t)i.push({lineNumber:t+1,content:r[t],highlight:t+1===e});return i}(n.line,0,o.split(`
`)):null;return{originalColumnNumber:n.column,originalFileName:n.source,originalFunctionName:e.functionName,originalLineNumber:n.line,originalScriptCode:s}},tH=async e=>{let t=await t$(e);return tN(e,t,"remote")},tW=/^\s*(at|in)\s.+(:\d+)/,tq=/(^|@)\S+:\d+|.+line\s+\d+\s+>\s+(eval|Function).+/,tG=/\(?(.+?)(?::(\d+))?(?::(\d+))?\)?$/;function tZ(e){let t=tG.exec(e);if(!t)throw Error("Could not match in extractLocation");return t.slice(1).map(e=>{let t=Number(e);return isNaN(t)?e:t})}var tK=({functionName:e,fileName:t,lineNumber:r,columnNumber:i})=>(e&&0===e.indexOf("Object.")&&(e=e.slice(7)),"friendlySyntaxErrorLabel"!==e&&"exports.__esModule"!==e&&"<anonymous>"!==e&&e||(e=null),{columnNumber:i,fileName:t,functionName:e,lineNumber:r}),tQ=e=>e.filter(e=>tW.test(e)||tq.test(e)).map(e=>{if(tq.test(e)){let t=!1;/ > (eval|Function)/.test(e)&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > (eval|Function):\d+:\d+/g,":$1"),t=!0);let r=e.split(/[@]/g),i=r.pop();if(!i)throw Error("could not get last");let[a,n,o]=tZ(i);return tK({functionName:r.join("@")||(t?"eval":null),fileName:a,lineNumber:n,columnNumber:o})}-1!==e.indexOf("(eval ")&&(e=e.replace(/(\(eval at [^()]*)|(\),.*$)/g,"")),-1!==e.indexOf("(at ")&&(e=e.replace(/\(at /,"("));let t=e.trim().split(/\s+/g).slice(1),r=t.pop();if(!r)throw Error("could not get last");let[i,a,n]=tZ(r);return tK({functionName:t.join(" ")||null,fileName:i,lineNumber:a,columnNumber:n})});class tX extends Error{stackFrame;delayRenderCall;frame;chunk;constructor({message:e,stack:t,stackFrame:r,frame:i,name:a,chunk:n}){super(e),this.stack=t,this.stackFrame=r,this.frame=i,this.chunk=n,this.name=a,this.delayRenderCall=t?(e=>{let t=e.indexOf(U.NoReactInternals.DELAY_RENDER_CALLSTACK_TOKEN);return -1===t?null:tQ(e.substring(t+U.NoReactInternals.DELAY_RENDER_CALLSTACK_TOKEN.length).trim().split(`
`))})(t):null}}class tJ extends Error{symbolicatedStackFrames;frame;chunk;name;delayRenderCall;constructor({message:e,symbolicatedStackFrames:t,frame:r,name:i,delayRenderCall:a,stack:n,chunk:o}){super(e),this.symbolicatedStackFrames=t,this.frame=r,this.chunk=o,this.name=i,this.delayRenderCall=a,this.stack=n}}var tY=e=>{let t=e.indexOf(U.NoReactInternals.DELAY_RENDER_CALLSTACK_TOKEN);return -1===t?e:e.substring(0,t)},t0=({page:e,onError:t,frame:r})=>{let i=e._client(),a=e=>{let i=e.exceptionDetails.exception?.description,a=(e=>{let t=e.exceptionDetails.exception?.description;if(!t)return null;let r=e.exceptionDetails.exception?.className,i=`${r}: `;t.startsWith(i)&&(t=t.substring(i.length));let a=e.exceptionDetails.stackTrace?.callFrames.length??0,n=t.split(`
`);return n.slice(0,Math.max(1,n.length-a)).join(`
`)})(e);if(!a){console.error(e);let r=Error(i);r.stack=i,t(r);return}if(!e.exceptionDetails.stackTrace){let e=Error(tY(a));e.stack=i,t(e);return}let n=e.exceptionDetails.exception?.className;t(new tX({message:tY(a),stackFrame:e.exceptionDetails.stackTrace.callFrames.map(e=>({columnNumber:e.columnNumber,fileName:e.url,functionName:e.functionName,lineNumber:e.lineNumber})),frame:r,name:n,stack:e.exceptionDetails.exception?.description,chunk:null}))};return i.on("Runtime.exceptionThrown",a),()=>(i.off("Runtime.exceptionThrown",a),Promise.resolve())},t1=async e=>{let{delayRenderCall:t,stackFrame:r}=e,[i,a]=await Promise.all([r?tz(r):null,t?tz(t):null].filter(ew));return new tJ({message:e.message,symbolicatedStackFrames:i,frame:e.frame,name:e.name,delayRenderCall:a,stack:e.stack,chunk:e.chunk})},t2={"h264-mkv":{default:"mkv",forAudioCodec:{"pcm-16":{possible:["mkv"],default:"mkv"},mp3:{possible:["mkv"],default:"mkv"}}},"h264-ts":{default:"ts",forAudioCodec:{"pcm-16":{possible:["ts"],default:"ts"},aac:{possible:["ts"],default:"ts"}}},aac:{default:"aac",forAudioCodec:{aac:{possible:["aac","3gp","m4a","m4b","mpg","mpeg"],default:"aac"},"pcm-16":{possible:["wav"],default:"wav"}}},gif:{default:"gif",forAudioCodec:{}},h264:{default:"mp4",forAudioCodec:{"pcm-16":{possible:["mkv","mov"],default:"mkv"},aac:{possible:["mp4","mkv","mov"],default:"mp4"},mp3:{possible:["mp4","mkv","mov"],default:"mp4"}}},h265:{default:"mp4",forAudioCodec:{aac:{possible:["mp4","mkv","hevc"],default:"mp4"},"pcm-16":{possible:["mkv"],default:"mkv"}}},mp3:{default:"mp3",forAudioCodec:{mp3:{possible:["mp3"],default:"mp3"},"pcm-16":{possible:["wav"],default:"wav"}}},prores:{default:"mov",forAudioCodec:{aac:{possible:["mov","mkv","mxf"],default:"mov"},"pcm-16":{possible:["mov","mkv","mxf"],default:"mov"}}},vp8:{default:"webm",forAudioCodec:{"pcm-16":{possible:["mkv"],default:"mkv"},opus:{possible:["webm"],default:"webm"}}},vp9:{default:"webm",forAudioCodec:{"pcm-16":{possible:["mkv"],default:"mkv"},opus:{possible:["webm"],default:"webm"}}},wav:{default:"wav",forAudioCodec:{"pcm-16":{possible:["wav"],default:"wav"}}}};function t4(e){return`${Math.round(e/1024/1024*10)/10} Mb`}var t3=({indent:e,logLevel:t,api:r})=>({chromeMode:i})=>{"chrome-for-testing"===i?ek.info({indent:e,logLevel:t},"Downloading Chrome for Testing https://www.remotion.dev/chrome-for-testing"):ek.info({indent:e,logLevel:t},"Downloading Chrome Headless Shell https://www.remotion.dev/chrome-headless-shell"),ek.info({indent:e,logLevel:t},`Customize this behavior by adding a onBrowserDownload function to ${r}.`);let a=0;return{onProgress:r=>{(r.downloadedBytes>a+1e7||1===r.percent)&&(a=r.downloadedBytes,"chrome-for-testing"===i?ek.info({indent:e,logLevel:t},`Downloading Chrome for Testing - ${t4(r.downloadedBytes)}/${t4(r.totalSizeInBytes)}`):ek.info({indent:e,logLevel:t},`Downloading Chrome Headless Shell - ${t4(r.downloadedBytes)}/${t4(r.totalSizeInBytes)}`))},version:null}},t6=({logLevel:e,tag:t,previewString:r})=>{ek[e]({logLevel:e,tag:t,indent:!1},r)},t8=async({args:e,executablePath:t,defaultViewport:r,indent:i,logLevel:a,userDataDir:n,timeout:o})=>{let s=await tC.create({defaultViewport:r,args:e,executablePath:t,timeout:o,userDataDir:n,logLevel:a,indent:i});try{await s.waitForTarget(e=>"page"===e.type(),{timeout:o})}catch(e){throw await s.close({silent:!1}),e}return s},t5="134.0.6998.35",t7="1161";function t9({platform:e,version:t,chromeMode:r}){return"linux-arm64"===e?"chrome-for-testing"===r?`https://playwright.azureedge.net/builds/chromium/${t??t7}/chromium-linux-arm64.zip`:`https://playwright.azureedge.net/builds/chromium/${t??t7}/chromium-headless-shell-linux-arm64.zip`:"headless-shell"===r?`https://storage.googleapis.com/chrome-for-testing-public/${t??t5}/${e}/chrome-headless-shell-${e}.zip`:`https://storage.googleapis.com/chrome-for-testing-public/${t??t5}/${e}/chrome-${e}.zip`}var re=R.promises.mkdir,rt=(0,X.promisify)(R.unlink.bind(R));function rr(e){return new Promise(t=>{R.access(e,e=>t(!e))})}var ri=()=>{let e=B.platform();switch(e){case"darwin":return"arm64"===B.arch()?"mac-arm64":"TURBOPACK unreachable";case"linux":return"arm64"===B.arch()?"linux-arm64":"TURBOPACK unreachable";case"win32":return"win64";default:throw Error("Unsupported platform: "+e)}},ra=e=>D.join((()=>{let e=process.cwd(),t=e;for(;;){try{if(R.default.statSync(D.default.join(t,"package.json")).isFile())break}catch(e){}let e=D.default.dirname(t);if(t===e){t=void 0;break}t=e}return t?"1"===process.versions.pnp?D.default.resolve(t,".pnp/.remotion"):"3"===process.versions.pnp?D.default.resolve(t,".yarn/.remotion"):D.default.resolve(t,"node_modules/.remotion"):D.default.resolve(e,".remotion")})(),"headless-shell"===e?"chrome-headless-shell":"chrome-for-testing"),rn=async({logLevel:e,indent:t,onProgress:r,version:i,chromeMode:a})=>{let n=ri(),o=t9({platform:n,version:i,chromeMode:a}),s=o.split("/").pop();if(!s)throw Error(`A malformed download URL was found: ${o}.`);let l=ra(a),u=D.join(l,s),c=ro(l,n);if(await rr(c))return rs(a);await rr(l)||await re(l,{recursive:!0}),"darwin"!==B.platform()&&"linux"!==B.platform()&&B.arch();try{await eI({url:o,to:()=>u,onProgress:e=>{if(null===e.totalSize||null===e.percent)throw Error("Expected totalSize and percent to be defined");r({downloadedBytes:e.downloaded,totalSizeInBytes:e.totalSize,percent:e.percent,alreadyAvailable:!1})},indent:t,logLevel:e,abortSignal:new AbortController().signal}),await (0,Q.default)(u,{dir:c});let i=D.join(c,"chrome-linux","chrome"),a=D.join(c,"chrome-linux","chrome-headless-shell");R.existsSync(i)&&R.renameSync(i,a);let n=D.join(c,"chrome-linux");R.existsSync(n)&&R.renameSync(n,D.join(c,"chrome-headless-shell-linux-arm64"))}catch(e){return Promise.reject(e)}finally{await rr(u)&&await rt(u)}let d=rs(a);return tA(d.executablePath),d},ro=(e,t)=>D.resolve(e,t),rs=e=>{let t=(e=>{let t=ra(e),r=ri(),i=ro(t,r);if("chrome-for-testing"===e){if("mac-arm64"===r||"mac-x64"===r)return D.join(i,`chrome-${r}`,"Google Chrome for Testing.app/Contents/MacOS/Google Chrome for Testing");if("win64"===r)return D.join(i,"chrome-win64","chrome.exe");if("linux64"===r||"linux-arm64"===r)return D.join(i,"chrome-linux64","chrome");throw Error("unsupported platform"+r)}if("headless-shell"===e)return D.join(i,`chrome-headless-shell-${r}`,"win64"===r?"chrome-headless-shell.exe":"linux-arm64"===r?"headless_shell":"chrome-headless-shell");throw Error("unsupported chrome mode"+e)})(e),r=ra(e),i=ri(),a=ro(r,i),n=t9({platform:i,version:null,chromeMode:e}),o=R.existsSync(a);return{executablePath:t,folderPath:a,local:o,url:n}},rl=Promise.resolve(),ru=async({indent:e,logLevel:t,browserExecutable:r,onBrowserDownload:i,chromeMode:a})=>{if("no-browser"===rd({browserExecutable:r,chromeMode:a}).type){let{onProgress:r,version:n}=i({chromeMode:a});await rn({indent:e,logLevel:t,onProgress:r,version:n,chromeMode:a})}return rd({browserExecutable:r,chromeMode:a})},rc=e=>rl=rl.then(()=>ru(e)),rd=({browserExecutable:e,chromeMode:t})=>{if(e){if(!Z.default.existsSync(e))throw Error(`"browserExecutable" was specified as '${e}' but the path doesn't exist. Pass "null" for "browserExecutable" to download a browser automatically.`);return{path:e,type:"user-defined-path"}}let r=rs(t);return r.local&&Z.default.existsSync(r.executablePath)?{path:r.executablePath,type:"local-puppeteer-browser"}:{type:"no-browser"}},rp=()=>{let e=(0,B.cpus)().length,t=(()=>{if(void 0!==h)return h;try{let e=parseInt((0,L.execSync)("nproc",{stdio:"pipe"}).toString().trim(),10);return h=e,e}catch{return null}})();return null===t?e:Math.min(t,e)},rf=e=>{if(!(0,R.existsSync)("/proc/meminfo"))return null;try{let e=(0,R.readFileSync)("/proc/meminfo","utf-8").split(`
`).find(e=>e.startsWith("MemAvailable"));if(!e)throw Error("MemAvailable not found in /proc/meminfo");let t=e.match(/(\d+)\s+(\w+)/);if(!t||3!==t.length)throw Error("Failed to parse MemAvailable value");let r=parseInt(t[1],10),i=t[2].toLowerCase();switch(i){case"kb":return 1024*r;case"mb":return 1024*r*1024;case"gb":return 1024*r*1048576;default:throw Error(`Unknown unit: ${i}`)}}catch(t){return ek.warn({indent:!1,logLevel:e},"/proc/meminfo exists but failed to get memory info. Error:"),ek.warn({indent:!1,logLevel:e},t),null}},rh=e=>{let t=process.env.AWS_LAMBDA_FUNCTION_MEMORY_SIZE?1024*parseInt(process.env.AWS_LAMBDA_FUNCTION_MEMORY_SIZE,10)*1024:null;if(null!==t)return Math.min((0,B.freemem)(),t);let r=(()=>{let e=(()=>{try{let e=(0,R.readFileSync)("/sys/fs/cgroup/memory.max","utf-8");if("max"===e.trim())return 1/0;return parseInt(e,10)}catch{return null}})();if(null!==e){let t=(()=>{try{let e=(0,R.readFileSync)("/sys/fs/cgroup/memory.current","utf-8");return parseInt(e,10)}catch{return null}})();if(null!==t)return e-t}let t=(()=>{try{let e=(0,R.readFileSync)("/sys/fs/cgroup/memory/memory.limit_in_bytes","utf-8");if("max"===e.trim())return 1/0;return parseInt(e,10)}catch{return null}})();if(null!==t){let e=(()=>{try{let e=(0,R.readFileSync)("/sys/fs/cgroup/memory/memory.usage_in_bytes","utf-8");return parseInt(e,10)}catch{return null}})();if(null!==e)return t-e}return null})();if(null!==r){let t=(0,B.freemem)(),i=rf(e);return r>1.25*t&&Number.isFinite(r)&&(ek.warn({indent:!1,logLevel:e},"Detected differing memory amounts:"),ek.warn({indent:!1,logLevel:e},`Memory reported by CGroup: ${(r/1024/1024).toFixed(2)} MB`),null!==i&&ek.warn({indent:!1,logLevel:e},`Memory reported by /proc/meminfo: ${(i/1024/1024).toFixed(2)} MB`),ek.warn({indent:!1,logLevel:e},`Memory reported by Node: ${(t/1024/1024).toFixed(2)} MB`),ek.warn({indent:!1,logLevel:e},"You might have inadvertenly set the --memory flag of `docker run` to a value that is higher than the global Docker memory limit."),ek.warn({indent:!1,logLevel:e},"Using the lower amount of memory for calculation.")),Math.min(t,r)}let i=rf(e);return null!==i?Math.min((0,B.freemem)(),i):(0,B.freemem)()},rm=["swangle","angle","egl","swiftshader","vulkan","angle-egl"],rg=e=>{if(null===e)return null;if(!rm.includes(e))throw TypeError(`${e} is not a valid GL backend. Accepted values: ${rm.join(", ")}`);return e},rv=async({browser:e,browserExecutable:t,chromiumOptions:r,forceDeviceScaleFactor:i,indent:a,viewport:n,logLevel:o,onBrowserDownload:s,chromeMode:l})=>{let u,c,d,p;if("firefox"===e)throw TypeError("Firefox supported is not yet turned on. Stay tuned for the future.");ek.verbose({indent:a,logLevel:o},"Ensuring browser executable"),await rc({browserExecutable:t,logLevel:o,indent:a,onBrowserDownload:s,chromeMode:l}),ek.verbose({indent:a,logLevel:o},"Ensured browser is available.");let f=(({preferredBrowserExecutable:e,logLevel:t,indent:r,chromeMode:i})=>{let a=(({browserExecutablePath:e,indent:t,logLevel:r,chromeMode:i})=>{if(e)return R.default.existsSync(e)||ek.warn({indent:t,logLevel:r},`Browser executable was specified as '${e}' but the path doesn't exist.`),{path:e,type:"user-defined-path"};let a=rs(i);return a.local&&R.default.existsSync(a.executablePath)?{path:a.executablePath,type:"local-puppeteer-browser"}:{type:"no-browser"}})({browserExecutablePath:e,indent:r,logLevel:t,chromeMode:i});if("no-browser"===a.type)throw TypeError("No browser found for rendering frames! Please open a GitHub issue and describe how you reached this error: https://remotion.dev/issue");return a.path})({preferredBrowserExecutable:t,logLevel:o,indent:a,chromeMode:l}),h=(rg(u=r.gl??null??null),"swangle"===u)?["--use-gl=angle","--use-angle=swiftshader"]:"angle-egl"===u?["--use-gl=angle","--use-angle=gl-egl"]:"vulkan"===u?["--use-angle=vulkan","--use-vulkan=native","--disable-vulkan-fallback-to-gl-for-testing","--disable-vulkan-surface","--ignore-gpu-blocklist","--enable-gpu"]:null===u?[]:[`--use-gl=${u}`],m=r.enableMultiProcessOnLinux??!0;ek.verbose({indent:a,logLevel:o,tag:"openBrowser()"},`Opening browser: gl = ${r.gl}, executable = ${f}, enableMultiProcessOnLinux = ${m}`),r.userAgent&&ek.verbose({indent:a,logLevel:o,tag:"openBrowser()"},`Using custom user agent: ${r.userAgent}`);let g=await R.default.promises.mkdtemp(D.default.join(B.default.tmpdir(),"puppeteer_dev_chrome_profile-")),v=await t8({executablePath:f,logLevel:o,indent:a,userDataDir:g,timeout:25e3,args:["about:blank","--allow-pre-commit-input","--disable-background-networking",`--enable-features=${(c=r.gl??null,d=["NetworkService","NetworkServiceInProcess"],"vulkan"===c?[...d,"Vulkan","UseSkiaRenderer"]:"angle-egl"===c?[...d,"VaapiVideoDecoder"]:d).join(",")}`,"--disable-background-timer-throttling","--disable-backgrounding-occluded-windows","--disable-breakpad","--disable-client-side-phishing-detection","--disable-component-extensions-with-background-pages","--disable-default-apps","--disable-dev-shm-usage","--no-proxy-server","--proxy-server='direct://'","--proxy-bypass-list=*","--force-gpu-mem-available-mb=4096","--disable-hang-monitor","--disable-extensions","--allow-chrome-scheme-url","--disable-ipc-flooding-protection","--disable-popup-blocking","--disable-prompt-on-repost","--disable-renderer-backgrounding","--disable-sync","--force-color-profile=srgb","--metrics-recording-only","--mute-audio","--no-first-run",`--video-threads=${(p=rh(o),Math.max(1,Math.round(Math.min(2*rp()/3,(p-2e9)/4e8))))}`,"--enable-automation","--password-store=basic","--use-mock-keychain","--enable-blink-features=IdleDetection","--export-tagged-pdf","--intensive-wake-up-throttling-policy=0",r.headless??!0?"chrome-for-testing"===l?"--headless=new":"--headless=old":null,"--no-sandbox","--disable-setuid-sandbox",...h,"--disable-background-media-suspend",null,"--allow-running-insecure-content","--disable-component-update","--disable-domain-reliability","--disable-features=AudioServiceOutOfProcess,IsolateOrigins,site-per-process,Translate,BackForwardCache,AvoidUnnecessaryBeforeUnloadCheckSync,IntensiveWakeUpThrottling","--disable-print-preview","--disable-site-isolation-trials","--disk-cache-size=268435456","--hide-scrollbars","--no-default-browser-check","--no-pings","--font-render-hinting=none","--no-zygote","--ignore-gpu-blocklist","--enable-unsafe-webgpu",void 0===i?null:`--force-device-scale-factor=${i}`,r.ignoreCertificateErrors?"--ignore-certificate-errors":null,...r?.disableWebSecurity?["--disable-web-security"]:[],r?.userAgent?`--user-agent="${r.userAgent}"`:null,"--remote-debugging-port=0",`--user-data-dir=${g}`].filter(Boolean),defaultViewport:n??{height:720,width:1280,deviceScaleFactor:1}}),y=await v.pages();return await y[0]?.close(),v},ry=async({passedInInstance:e,browserExecutable:t,chromiumOptions:r,forceDeviceScaleFactor:i,indent:a,logLevel:n,onBrowserDownload:o,chromeMode:s,pageIndex:l,onBrowserLog:u,onLog:c})=>{if(e){let t=await e.newPage({context:()=>null,logLevel:n,indent:a,pageIndex:l,onBrowserLog:u,onLog:c});return{page:t,cleanupPage:()=>(t.close().catch(e=>{e.message.includes("Target closed")||ek.error({indent:a,logLevel:n},"Was not able to close puppeteer page",e)}),Promise.resolve())}}let d=await rv({browser:eA,browserExecutable:t,chromiumOptions:r,forceDeviceScaleFactor:i,indent:a,viewport:null,logLevel:n,onBrowserDownload:o,chromeMode:s});return{page:await d.newPage({context:()=>null,logLevel:n,indent:a,pageIndex:l,onBrowserLog:u,onLog:c}),cleanupPage:()=>(d.close({silent:!0}).catch(e=>{e.message.includes("Target closed")||ek.error({indent:a,logLevel:n},"Was not able to close puppeteer page",e)}),Promise.resolve())}},rb={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/ace+json":{source:"iana",compressible:!0},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/aif+cbor":{source:"iana"},"application/aif+json":{source:"iana",compressible:!0},"application/alto-cdni+json":{source:"iana",compressible:!0},"application/alto-cdnifilter+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-propmap+json":{source:"iana",compressible:!0},"application/alto-propmapparams+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwl":{source:"iana",extensions:["cwl"]},"application/cwl+json":{source:"iana",compressible:!0},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"apache",compressible:!0,extensions:["ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdf":{source:"iana",extensions:["fdf"]},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"apache",charset:"UTF-8",compressible:!0,extensions:["js"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/linkset":{source:"iana"},"application/linkset+json":{source:"iana",compressible:!0},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["sig","asc"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0,extensions:["xsf"]},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"apache"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-msgstore-ctrl-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-regroup+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"apache",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"apache"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"apache"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.belightsoft.lhzd+zip":{source:"iana",compressible:!1},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"apache",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"apache",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"apache",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.genozip":{source:"iana"},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"apache",compressible:!0},"application/vnd.geocube+xml":{source:"apache",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.gnu.taler.exchange+json":{source:"iana",compressible:!0},"application/vnd.gnu.taler.merchant+json":{source:"iana",compressible:!0},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"apache"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"apache",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"apache"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.ipld.car":{source:"iana"},"application/vnd.ipld.raw":{source:"iana"},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"apache",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"apache",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"apache",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.onvif.metadata":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0,extensions:["xhtm"]},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml","uo"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xfdf":{source:"iana",extensions:["xfdf"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+cbor":{source:"iana"},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana",extensions:["adts","aac"]},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"apache"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp","dib"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif","btf"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana",extensions:["apng"]},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"apache"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"apache"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"apache"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/prc":{source:"iana",extensions:["prc"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/u3d":{source:"iana",extensions:["u3d"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana",extensions:["pyo","pyox"]},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"apache"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["md","markdown"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"apache"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"apache"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}},rx={};function rw(e){if(!e||"string"!=typeof e)return!1;let t=(0,D.extname)("."+e).toLowerCase().substr(1);return!!t&&(rx[t]||!1)}function rS(e){if(!e||"string"!=typeof e)return!1;let t=-1===e.indexOf("/")?rw(e):e;if(!t)return!1;if(-1===t.indexOf("charset")){let e=function(e){if(!e||"string"!=typeof e)return!1;let t=rk.exec(e),r=t&&rb[t[1].toLowerCase()];return r?.charset?r.charset:!!(t&&rC.test(t[1]))&&"UTF-8"}(t);e&&(t+="; charset="+e.toLowerCase())}return t}d={},p={},c=["nginx","apache",void 0,"iana"],Object.keys(rb).forEach(e=>{let t=rb[e],r=t.extensions;if(r?.length){d[e]=r;for(let i=0;i<r.length;i++){let a=r[i];if(p[a]){let e=c.indexOf(rb[p[a]].source),r=c.indexOf(t.source);if("application/octet-stream"!==p[a]&&(e>r||e===r&&"application/"===p[a].substr(0,12)))continue}rx[a]=e}}});var rk=/^\s*([^;\s]*)(?:;|\s|$)/,rC=/^text\//i,rE=e=>{let t=[],r=0,i=async(e,i,...a)=>{r++;let n=(async()=>e(...a))();i(n);try{await n}catch{}r--,t.length>0&&t.shift()?.()},a=(a,...n)=>new Promise(o=>{((a,n,...o)=>{t.push(()=>i(a,n,...o)),(async()=>{await Promise.resolve(),r<e&&t.length>0&&t.shift()?.()})()})(a,o,...n)});return Object.defineProperties(a,{activeCount:{get:()=>r},pendingCount:{get:()=>t.length},clearQueue:{value:()=>{t.length=0}}}),a},r_=rE(1),rT=async({src:e,indent:t,logLevel:r,binariesDirectory:i,cancelSignal:a,audioStreamIndex:n})=>{let o=[["-v","error"],["-select_streams",n?`a:${n}`:"a:0"],["-show_entries","stream=channels:stream=start_time:format=duration:format=format_name"],["-of","default=nw=1"],[e]].reduce((e,t)=>e.concat(t),[]).filter(Boolean);try{let e=await tO({bin:"ffprobe",args:o,indent:t,logLevel:r,binariesDirectory:i,cancelSignal:a}),n=e.stdout.match(/channels=([0-9]+)/),s=e.stdout.match(/duration=([0-9.]+)/),l=e.stdout.match(/start_time=([0-9.]+)/),u=e.stdout.match(/format_name=([a-zA-Z0-9.]+)/),c=!!u&&"mp3"===u[1];return{channels:n?parseInt(n[1],10):0,duration:s?parseFloat(s[1]):null,startTime:l?c?0:parseFloat(l[1]):null}}catch(e){if(e.message.includes("This file cannot be read by `ffprobe`. Is it a valid multimedia file?"))throw Error("This file cannot be read by `ffprobe`. Is it a valid multimedia file?");throw e}};async function rP({downloadMap:e,src:t,indent:r,logLevel:i,binariesDirectory:a,cancelSignal:n,audioStreamIndex:o}){let s=o?`${t}-${o}`:t;if(e.durationOfAssetCache[s])return e.durationOfAssetCache[s];let l=await rT({src:t,indent:r,logLevel:i,binariesDirectory:a,cancelSignal:n,audioStreamIndex:o});return e.durationOfAssetCache[s]=l,l}var rI=({downloadMap:e,src:t,indent:r,logLevel:i,binariesDirectory:a,cancelSignal:n,audioStreamIndex:o})=>r_(()=>rP({downloadMap:e,src:t,indent:r,logLevel:i,binariesDirectory:a,cancelSignal:n,audioStreamIndex:o})),rA=Buffer.byteLength.bind(Buffer),rO=/[/?<>\\:*|"]/g,rM=/[\x00-\x1f\x80-\x9f]/g,rF=/^\.+$/,rR=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,rD=/[. ]+$/,rj=/[/\\]/,rL=({src:e,downloadDir:t,to:r,downloadMap:i})=>{i.listeners[e]||(i.listeners[e]={}),i.listeners[e][t]||(i.listeners[e][t]=[]),i.isDownloadingMap[e]||(i.isDownloadingMap[e]={}),i.isDownloadingMap[e][t]=!1,i.hasBeenDownloadedMap[e]||(i.hasBeenDownloadedMap[e]={}),i.hasBeenDownloadedMap[e][t]=r,i.listeners[e][t].forEach(e=>e())},rB=async({src:e,downloadMap:t,indent:r,logLevel:i,shouldAnalyzeAudioImmediately:a,binariesDirectory:n,cancelSignalForAudioAnalysis:o,audioStreamIndex:s})=>{if(e.startsWith("same-as"))return e;let{downloadDir:l}=t;if(t.hasBeenDownloadedMap[e]?.[l]){let r=t.hasBeenDownloadedMap[e]?.[l];if(R.default.existsSync(r))return r;t.hasBeenDownloadedMap[e][l]=null,t.isDownloadingMap[e]||(t.isDownloadingMap[e]={}),t.isDownloadingMap[e][l]=!1}if(t.isDownloadingMap[e]?.[l])return(({src:e,downloadDir:t,downloadMap:r})=>r.hasBeenDownloadedMap[e]?.[t]?Promise.resolve(r.hasBeenDownloadedMap[e]?.[t]):(r.listeners[e]||(r.listeners[e]={}),r.listeners[e][t]||(r.listeners[e][t]=[]),new Promise(i=>{r.listeners[e][t].push(()=>{let a=r.hasBeenDownloadedMap[e];if(!a?.[t])throw Error("Expected file for "+e+"to be available in "+t);i(a[t])})})))({downloadMap:t,src:e,downloadDir:l});if(t.isDownloadingMap[e]||(t.isDownloadingMap[e]={}),t.isDownloadingMap[e][l]=!0,t.emitter.dispatchDownload(e),e.startsWith("data:")){let[r,i]=e.substring(5).split(",");if(!r.includes(";"))throw TypeError(["A data URL was passed but did not have the correct format so that Remotion could convert it for the video to be rendered. The format of the data URL must be `data:[mime-type];[encoding],[data]`. The data that was received is (truncated to 100 characters):",e.substring(0,100)].join(" "));let[a,n]=r.split(";");if(!a.includes("/"))throw TypeError(["A data URL was passed but did not have the correct format so that Remotion could convert it for the video to be rendered. The format of the data URL must be `data:[mime-type];[encoding],[data]`. The `mime-type` parameter must be a valid mime type. The data that was received is (truncated to 100 characters):",e.substr(0,100)].join(" "));let o=["ascii","base64","base64url","binary","hex","latin1","ucs-2","ucs2","utf-8","utf16le","utf8"];if(!o.find(e=>n===e))throw TypeError(["A data URL was passed but did not have the correct format so that Remotion could convert it for the video to be rendered. The format of the data URL must be `data:[mime-type];[encoding],[data]`. The `encoding` parameter must be one of the following:",`${o.join(" ")}.`,"The data that was received is (truncated to 100 characters):",e.substr(0,100)].join(" "));let s=rN({contentDisposition:null,downloadDir:l,src:e,contentType:a});eo(s);let u=Buffer.from(i,n);return await R.default.promises.writeFile(s,u),rL({src:e,downloadMap:t,downloadDir:l,to:s}),s}let{to:u}=await eI({url:e,onProgress:r=>{t.emitter.dispatchDownloadProgress(e,r.percent,r.downloaded,r.totalSize)},to:(t,r)=>rN({contentDisposition:t,downloadDir:l,src:e,contentType:r}),indent:r,logLevel:i,abortSignal:t.cleanupController.signal});return rL({src:e,downloadMap:t,downloadDir:l,to:u}),a&&await rI({binariesDirectory:n,downloadMap:t,src:u,indent:r,logLevel:i,cancelSignal:o,audioStreamIndex:s}),u},rN=({src:e,downloadDir:t,contentDisposition:r,contentType:i})=>{if(e.startsWith("same-as"))return e;let{pathname:a,search:n}=(({contentDisposition:e,src:t,contentType:r})=>{let i="filename=";if(e?.includes(i)){let t=e.indexOf(i),r=e.substring(t+i.length),a=r.indexOf(";");return -1===a?{pathname:r.trim(),search:""}:{search:"",pathname:r.substring(0,a).trim()}}let{pathname:a,search:n}=new URL(t);if(!(0,D.extname)(a)&&r){let e=rb[r.toLowerCase()]?.extensions?.[0]??null;return{pathname:`${a}.${e}`,search:n}}return{pathname:a,search:n}})({contentDisposition:r,contentType:i,src:e}),o=a.split("."),s=o.length>1&&o[o.length-1]?`.${o[o.length-1]}`:"",l=String((0,U.random)(`${e}${a}${n}`)).replace("0.","");return D.default.join(t,(l+s).split(rj).map(e=>{var t=e;if("string"!=typeof t)throw Error("Input must be string");return function(e,t){let r,i;if("string"!=typeof e)throw Error("Input must be string");let a=e.length,n=0;for(let t=0;t<a;t+=1){var o;if(r=e.charCodeAt(t),i=e[t],r>=55296&&r<=56319&&(o=e.charCodeAt(t+1))>=56320&&o<=57343&&(t+=1,i+=e[t]),255===(n+=rA(i)))return e.slice(0,t+1);if(n>255)return e.slice(0,t-i.length+1)}return e}(t.replace(rO,"").replace(rM,"").replace(rF,"").replace(rR,"").replace(rD,""),0)}).join(D.default.sep))},r$=async({renderAsset:e,onDownload:t,downloadMap:r,logLevel:i,indent:a,binariesDirectory:n,cancelSignalForAudioAnalysis:o,shouldAnalyzeAudioImmediately:s})=>{let l=rz(r,t),u=await rB({src:e.src,downloadMap:r,indent:a,logLevel:i,shouldAnalyzeAudioImmediately:s,binariesDirectory:n,cancelSignalForAudioAnalysis:o,audioStreamIndex:e.audioStreamIndex});return l(),{...e,src:u}},rz=(e,t)=>{let r=[];if(!t||e.downloadListeners.includes(t))return()=>{};e.downloadListeners.push(t),r.push(()=>(e.downloadListeners=e.downloadListeners.filter(e=>e!==t),Promise.resolve()));let i=e.emitter.addEventListener("download",({detail:{src:i}})=>{let a=t(i),n=e.emitter.addEventListener("progress",({detail:{downloaded:e,percent:t,src:r,totalSize:n}})=>{i===r&&a?.({downloaded:e,percent:t,totalSize:n})});r.push(()=>(n(),Promise.resolve()))});return r.push(()=>(i(),Promise.resolve())),()=>{r.forEach(e=>e())}},rU=()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),rV="Request closed";class rH{listeners={progress:[],download:[]};addEventListener(e,t){return this.listeners[e].push(t),()=>{this.removeEventListener(e,t)}}removeEventListener(e,t){this.listeners[e]=this.listeners[e].filter(e=>e!==t)}dispatchEvent(e,t){this.listeners[e].forEach(e=>{e({detail:t})})}dispatchDownloadProgress(e,t,r,i){this.dispatchEvent("progress",{downloaded:r,percent:t,totalSize:i,src:e})}dispatchDownload(e){this.dispatchEvent("download",{src:e})}}var rW="abcdefghijklmnopqrstuvwxyz0123456789",rq=e=>{let t=D.default.join(B.default.tmpdir(),e+Array(10).fill(1).map(()=>rW[Math.floor(Math.random()*rW.length)]).join(""));return R.default.existsSync(t)&&R.default.rmSync(t,{recursive:!0,force:!0}),(0,R.mkdirSync)(t),t},rG=async({input:e,output:t,toneFrequency:r,indent:i,logLevel:a,binariesDirectory:n,cancelSignal:o})=>{let s=`asetrate=48000*${r},aresample=48000,atempo=1/${r}`,l=["-hide_banner","-i",e,["-ac","2"],"-filter:a",s,["-c:a","pcm_s16le"],["-ar",String(48e3)],"-y",t].flat(2);ek.verbose({indent:i,logLevel:a},"Changing tone frequency using FFmpeg:",JSON.stringify(l.join(" ")),"Filter:",s);let u=Date.now(),c=tO({bin:"ffmpeg",args:l,indent:i,logLevel:a,binariesDirectory:n,cancelSignal:o});await c,ek.verbose({indent:i,logLevel:a},"Changed tone frequency using FFmpeg",`${Date.now()-u}ms`)},rZ=e=>new Uint8Array([255&e,e>>8&255,e>>16&255,e>>24&255]),rK=e=>new Uint8Array([255&e,e>>8&255]),rQ=(e,t)=>{let r=D.default.join(e,t);return(0,R.mkdirSync)(r),r},rX=()=>{let e,t,r,i,a,n=rq(`remotion-v${N.VERSION}-assets`),o=!1;return{isDownloadingMap:{},hasBeenDownloadedMap:{},listeners:{},durationOfAssetCache:{},id:String(Math.random()),assetDir:n,downloadListeners:[],downloadDir:rQ(n,"remotion-assets-dir"),complexFilter:rQ(n,"remotion-complex-filter"),preEncode:rQ(n,"pre-encode"),audioMixing:rQ(n,"remotion-audio-mixing"),audioPreprocessing:rQ(n,"remotion-audio-preprocessing"),stitchFrames:rQ(n,"remotion-stitch-temp-dir"),compositingDir:rQ(n,"remotion-compositing-temp-dir"),emitter:new rH,preventCleanup:()=>{o=!0},allowCleanup:()=>{o=!1},isPreventedFromCleanup:()=>o,inlineAudioMixing:(e=rQ(n,"remotion-inline-audio-mixing"),t={},r={},i={},a=t=>D.default.join(e,`${t.id}.wav`),{cleanup:()=>{for(let e of Object.values(t))try{R.default.closeSync(e)}catch{}tg(e)},addAsset:({asset:e,fps:n,totalNumberOfFrames:o,firstFrame:s,trimLeftOffset:l,trimRightOffset:u})=>{(({asset:e,fps:i,totalNumberOfFrames:n,trimLeftOffset:o,trimRightOffset:s})=>{let l=a(e);if(t[l]||(t[l]=R.default.openSync(l,"w")),r[l])return;r[l]=!0;let u=Math.round((n/i-o+s)*192e3),c=t[l];(0,R.writeSync)(c,new Uint8Array([82,73,70,70]),0,4,0),(0,R.writeSync)(c,new Uint8Array(rZ(40+u)),0,4,4),(0,R.writeSync)(c,new Uint8Array([87,65,86,69]),0,4,8),(0,R.writeSync)(c,new Uint8Array([102,109,116,32]),0,4,12),(0,R.writeSync)(c,new Uint8Array([16,0,0,0]),0,4,16),(0,R.writeSync)(c,new Uint8Array([1,0]),0,2,20),(0,R.writeSync)(c,new Uint8Array([2,0]),0,2,22),(0,R.writeSync)(c,new Uint8Array(rZ(48e3)),0,4,24),(0,R.writeSync)(c,new Uint8Array(rZ(192e3)),0,4,28),(0,R.writeSync)(c,new Uint8Array(rK(4)),0,2,32),(0,R.writeSync)(c,rK(16),0,2,34),(0,R.writeSync)(c,new Uint8Array([100,97,116,97]),0,4,36),(0,R.writeSync)(c,new Uint8Array(rZ(u)),0,4,40)})({asset:e,fps:n,totalNumberOfFrames:o,trimLeftOffset:l,trimRightOffset:u});let c=a(e);if(void 0!==i[c]&&i[c]!==e.toneFrequency)throw Error(`toneFrequency must be the same across the entire audio, got ${e.toneFrequency}, but before it was ${i[c]}`);let d=t[c];i[c]=e.toneFrequency;let p=new Int16Array(e.audio),f=e.frame===s,h=e.frame===o+s-1;f&&(p=p.slice(2*Math.floor(48e3*l))),h&&(p=p.slice(0,p.length+2*Math.ceil(48e3*u)));let m=2*Math.floor(((e.frame-s)/n-(f?0:l))*48e3)*2;(0,R.writeSync)(d,p,0,p.byteLength,44+m)},getListOfAssets:()=>Object.keys(t),finish:async({binariesDirectory:e,indent:r,logLevel:a,cancelSignal:n})=>{for(let o of Object.keys(t)){let t=i[o];if(1!==t){let i=o.replace(/.wav$/,"-tmp.wav");await rG({input:o,output:i,toneFrequency:t,indent:r,logLevel:a,binariesDirectory:e,cancelSignal:n}),R.default.renameSync(i,o)}}}}),cleanupController:new AbortController}},rJ=e=>{e.isPreventedFromCleanup()||(e.cleanupController.abort(),tg(e.downloadDir),tg(e.complexFilter),tg(e.compositingDir),e.inlineAudioMixing.cleanup(),tg(e.assetDir))},rY=e=>e.includes("?")?rY(e.substr(0,e.indexOf("?"))):e.endsWith("index.html")?e:e.endsWith("/")?`${e}index.html`:`${e}/index.html`,r0=({timeout:e})=>{let t=[],r=[],i=()=>{0===t.length&&r.forEach(e=>e())};return{lock:()=>{let e=Math.random();return t.push(e),e},unlock:e=>{t=t.filter(t=>t!==e),i()},waitForAllToBeDone:()=>{let a=new Promise(e=>{r.push(()=>{e()})});return(i(),0===t.length)?Promise.resolve():null===e?a:Promise.race([a,new Promise(t=>{setTimeout(()=>t(),e)})])}}},r1=async({hosts:e,port:t})=>(await Promise.all(e.map(e=>(({portToTry:e,host:t})=>new Promise(r=>{let i="unavailable",a=new Y.default.Socket;a.on("connect",()=>{i="unavailable",a.destroy()}),a.setTimeout(3e3),a.on("timeout",()=>{i="unavailable",a.destroy(),r(i)}),a.on("error",()=>{i="available"}),a.on("close",()=>r(i)),a.connect(e,t)}))({portToTry:t,host:e})))).every(e=>"available"===e)?"available":"unavailable",r2=async({from:e,to:t,hostsToTest:r})=>{for(let i of r6(e,t))if(await r1({port:i,hosts:r})==="available")return i;throw Error("No available ports found")},r4=r0({timeout:1e4}),r3=async({desiredPort:e,from:t,hostsToTry:r,to:i})=>{await r4.waitForAllToBeDone();let a=r4.lock(),n=()=>r4.unlock(a);if(void 0!==e&&await r1({port:e,hosts:r})==="available")return{port:e,unlockPort:n};let o=await r2({from:t,to:i,hostsToTest:r});if(e&&e!==o)throw n(),Error(`You specified port ${e} to be used for the HTTP server, but it is not available. Choose a different port or remove the setting to let Remotion automatically select a free port.`);return{port:o,unlockPort:n}},r6=(e,t)=>{if(!Number.isInteger(e)||!Number.isInteger(t))throw TypeError("`from` and `to` must be integer numbers");if(e<1024||e>65535)throw RangeError("`from` must be between 1024 and 65535");if(t<1024||t>65536)throw RangeError("`to` must be between 1024 and 65536");if(t<e)throw RangeError("`to` must be greater than or equal to `from`");return Array(t-e+1).fill(!0).map((t,r)=>r+e)},r8=null,r5=e=>{if(r8)return r8;let t=ie(ee.default.networkInterfaces()),r={host:r7(t,e),hostsToTry:r9(t)};return r8=r,r},r7=(e,t)=>t||!it(e)?"0.0.0.0":"::",r9=e=>[ir(e)?"::1":null,ii(e)?"127.0.0.1":null,it(e)?"::":null,"0.0.0.0"].filter(ew),ie=e=>{let t=[];for(let r in e)for(let i of e[r])t.push(i);return t},it=e=>{for(let t of e)if("IPv6"===t.family&&!t.internal)return!0;return!1},ir=e=>{for(let t of e)if("IPv6"===t.family&&t.internal&&"::1"===t.address)return!0;return!1},ii=e=>{for(let t of e)if("IPv4"===t.family&&t.internal&&"127.0.0.1"===t.address)return!0;return!1},ia=function(e,t){return e=io(e),t=io(t),0===e.lastIndexOf(t,0)&&(e[t.length]===D.default.sep||void 0===e[t.length])};function io(e){return e[e.length-1]===D.default.sep?e.slice(0,-1):e}var is=(e,t)=>{let{base:r}=D.default.parse(e),i={};if(t){(i={"Content-Length":String(t.size),"Accept-Ranges":"bytes"})["Last-Modified"]=t.mtime.toUTCString();let e=rS(r);e&&(i["Content-Type"]=e)}return i},il=async(e,t)=>{let r,i=(r=".html",[D.default.join(t,`index${r}`),t.endsWith("/")?t.replace(/\/$/g,r):t+r].filter(e=>D.default.basename(e)!==r)),a=null;for(let t=0;t<i.length;t++){let r=i[t],n=D.default.join(e,r);try{a=await R.promises.lstat(n)}catch(e){if("ENOENT"!==e.code&&"ENOTDIR"!==e.code)throw e}if(a)return{stats:a,absolutePath:n}}return null},iu=(e,t,r)=>{let{message:i,statusCode:a}=r,n=is(e,null);t.writeHead(a,{...n,"Content-Type":"application/json"}),t.end(JSON.stringify({statusCode:a,message:i}))},ic=(e,t)=>iu(e,t,{statusCode:500,code:"internal_server_error",message:"A server error has occurred"}),id=async(e,t,r)=>{let i=process.cwd(),a=D.default.resolve(i,r.public),n=null;try{let t=new URL(e.url,`http://${e.headers.host}`);n=decodeURIComponent(t.pathname)}catch{return iu("/",t,{statusCode:400,code:"bad_request",message:"Bad Request"})}let o=D.default.join(a,n);if(!ia(o,a))return iu(o,t,{statusCode:400,code:"bad_request",message:"Bad Request"});let s=null;if(""!==D.default.extname(n))try{s=await R.promises.lstat(o)}catch(e){if("ENOENT"!==e.code&&"ENOTDIR"!==e.code)return ic(o,t)}if(!s){try{let e=await il(a,n);e&&(s=e.stats,o=e.absolutePath)}catch(e){if("ENOENT"!==e.code&&"ENOTDIR"!==e.code)return ic(o,t)}try{s=await R.promises.lstat(o)}catch(e){if("ENOENT"!==e.code&&"ENOTDIR"!==e.code)return ic(o,t)}}s?.isDirectory()&&(s=null);let l=s?.isSymbolicLink();if(!s||l)return iu(o,t,{statusCode:404,code:"not_found",message:"The requested path ("+o+") could not be found"});let u=null;if(e.headers.range&&s.size){let r=((e,t)=>{if("string"!=typeof t)throw TypeError("argument str must be a string");let r=t.indexOf("=");if(-1===r)return -2;let i=t.slice(r+1).split(","),a=[],n=t.slice(0,r);for(let t=0;t<i.length;t++){let r=i[t].split("-"),n=parseInt(r[0],10),o=parseInt(r[1],10);isNaN(n)?(n=e-o,o=e-1):isNaN(o)&&(o=e-1),o>e-1&&(o=e-1),isNaN(n)||isNaN(o)||n>o||n<0||a.push({start:n,end:o})}return a.length<1?-1:{ranges:a,type:n}})(s.size,e.headers.range);if("object"==typeof r&&"bytes"===r.type){let{start:e,end:i}=r.ranges[0];u={start:e,end:i},t.statusCode=206}else t.statusCode=416,t.setHeader("Content-Range",`bytes */${s.size}`)}let c=null;try{c=(0,R.createReadStream)(o,u??{})}catch{return ic(o,t)}let d=is(o,s);null!==u&&(d["Content-Range"]=`bytes ${u.start}-${u.end}/${s.size}`,d["Content-Length"]=String(u.end-u.start+1)),d["Cache-Control"]="no-cache, no-store, must-revalidate",t.writeHead(t.statusCode||200,d),c.pipe(t)},ip=async(e,t)=>{let{listener:r,close:i,compositor:a}=(({downloadMap:e,logLevel:t,indent:r,offthreadVideoCacheSizeInBytes:i,binariesDirectory:a,offthreadVideoThreads:n})=>{if(null!=i){if("number"!=typeof i)throw Error("Expected a number");if(i<0||0===i)throw Error("Expected a positive number");if(Number.isNaN(i))throw Error("Expected a number");if(!Number.isFinite(i))throw Error("Expected a finite number");if(i%1!=0)throw Error("Expected a whole number")}let o=(({type:e,payload:t,logLevel:r,indent:i,binariesDirectory:a=null})=>{let n=tT({type:"compositor",indent:i,logLevel:r,binariesDirectory:a});tA(n);let o={nonce:rU(),payload:{type:e,params:t}},s=D.default.dirname(n),l=(0,L.spawn)(n,[JSON.stringify(o)],{cwd:s,env:{DYLD_LIBRARY_PATH:s}}),u=[],c=new Map,{onData:d,getOutputBuffer:p,clear:f}=(e=>{let t=new Uint8Array(J.length);for(let e=0;e<J.length;e++)t[e]=J.charCodeAt(e);let r=[],i=new Uint8Array(0),a=null,n=()=>{let r=(()=>{let e=0;for(;;){let r=i.indexOf(t[0],e);if(-1===r)return -1;if(i.subarray(r,r+t.length).toString()!==t.toString()){e=r+1;continue}return r}})();if(-1===r)return;r+=t.length;let o="",s="",l="";for(;;){if(r>i.length-1)return;let e=i[r];if(r++,58===e)break;o+=String.fromCharCode(e)}for(;;){if(r>i.length-1)return;let e=i[r];if(r++,58===e)break;s+=String.fromCharCode(e)}for(;;){if(r>i.length-1)return;let e=i[r];if(58===e)break;r++,l+=String.fromCharCode(e)}let u=Number(s),c=Number(l),d=i.length-r-1;if(d<u){a={dataMissing:u-d};return}e(1===c?"error":"success",o,i.subarray(r+1,r+1+Number(s))),a=null,i=i.subarray(r+Number(s)+1),n()};return{onData:e=>{if(r.push(e),a&&(a.dataMissing-=e.length),a&&a.dataMissing>0)return;let t=new Uint8Array(i.length+r.reduce((e,t)=>e+t.length,0));t.set(i,0);let o=i.length;for(let e of r)t.set(e,o),o+=e.length;i=t,r=[],n()},getOutputBuffer:()=>i,clear:()=>{r=[],i=new Uint8Array(0)}}})((e,t,a)=>{if("0"===t)ek.verbose({indent:i,logLevel:r,tag:"compositor"},new TextDecoder("utf8").decode(a));else if(c.has(t)){if("error"===e)try{let e=JSON.parse(new TextDecoder("utf8").decode(a));c.get(t).reject(Error(`Compositor error: ${e.error}
${e.backtrace}`))}catch{c.get(t).reject(Error(new TextDecoder("utf8").decode(a)))}else c.get(t).resolve(a);c.delete(t)}}),h={type:"running"};l.stdout.on("data",d),l.stderr.on("data",e=>{u.push(e)});let m=null,g=null;l.on("close",(e,t)=>{let a=Array.from(c.values());if(0===e){for(let e of(h={type:"quit-without-error",signal:t},m?.(),a))e.reject(Error(`Compositor quit${t?` with signal ${t}`:""}`));c.clear()}else{let n=Buffer.concat(u).toString("utf-8")+new TextDecoder("utf-8").decode(p());h={type:"quit-with-error",error:n,signal:t},ek.verbose({indent:i,logLevel:r},`Compositor exited with code ${e} and signal ${t}`);let o=null===e?Error(`Compositor exited with signal ${t}`):Error(`Compositor exited with code ${e}: ${n}`);for(let e of a)e.reject(o);c.clear(),g?.(o)}f(),u=[]});let v=()=>new Promise((e,t)=>{"quit-without-error"===h.type?t(Error(`Compositor quit${h.signal?` with signal ${h.signal}`:""}`)):"quit-with-error"===h.type?t(Error(`Compositor quit${h.signal?` with signal ${h.signal}`:""}: ${h.error}`)):(m=e,g=t)}),y=async()=>(await Promise.resolve(),"quit-with-error"===h.type)?Promise.reject(Error(`Compositor quit${h.signal?` with signal ${h.signal}`:""}: ${h.error}`)):"quit-without-error"===h.type?Promise.reject(Error(`Compositor quit${h.signal?` with signal ${h.signal}`:""}`)):new Promise((e,t)=>{l.stdin.write(`EOF
`,r=>{r?t(r):e()})});return{shutDownOrKill:()=>{let e=null,t=async()=>{await new Promise(t=>{e=setTimeout(t,5e3)}),l.kill("SIGKILL")};return Promise.race([(async()=>{await y(),await v()})(),t()]).finally(()=>{null!==e&&clearTimeout(e)})},waitForDone:v,finishCommands:y,executeCommand:(e,t)=>new Promise((r,i)=>{if("quit-without-error"===h.type)return void i(Error(`Compositor quit${h.signal?` with signal ${h.signal}`:""}`));if("quit-with-error"===h.type)return void i(Error(`Compositor quit${h.signal?` with signal ${h.signal}`:""}: ${h.error.trim()}`));let a=rU();l.stdin.write(JSON.stringify({nonce:a,payload:{type:e,params:t}})+`
`,e=>{e&&i(e)}),c.set(a,{resolve:r,reject:i})}),pid:l.pid??null}})({type:"StartLongRunningProcess",payload:{concurrency:n,maximum_frame_cache_size_in_bytes:i,verbose:ec(t,"verbose")},logLevel:t,indent:r,binariesDirectory:a});return{close:()=>o.shutDownOrKill(),listener:(i,n)=>{if(!i.url)throw Error("Request came in without URL");if(!i.url.startsWith("/proxy")){n.writeHead(404),n.end();return}let{src:s,time:l,transparent:u,toneMapped:c}=(e=>{let t=new URL(e,"http://localhost").search;if(!t.trim())throw Error("Expected query from "+e);let r=new H.URLSearchParams(t),i=r.get("src");if(!i)throw Error("Did not pass `src` parameter");let a=r.get("time");if(!a)throw Error("Did not get `time` parameter");let n=r.get("transparent"),o=r.get("toneMapped");if(!o)throw Error("Did not get `toneMapped` parameter");return{src:i,time:parseFloat(a),transparent:"true"===n,toneMapped:"true"===o}})(i.url);if(n.setHeader("access-control-allow-origin","*"),n.setHeader("cache-control","no-cache, no-store, must-revalidate"),"OPTIONS"===i.method){n.statusCode=200,i.headers["access-control-request-private-network"]&&n.setHeader("Access-Control-Allow-Private-Network","true"),n.end();return}let d=!1;i.on("close",()=>{d=!0});let p=Date.now();rB({src:s,downloadMap:e,indent:r,logLevel:t,binariesDirectory:a,cancelSignalForAudioAnalysis:void 0,shouldAnalyzeAudioImmediately:!0,audioStreamIndex:void 0}).then(e=>new Promise((t,r)=>{d?r(Error(rV)):(p=Date.now(),o.executeCommand("ExtractFrame",{src:e,original_src:s,time:l,transparent:u,tone_mapped:c}).then(t).catch(r))})).then(e=>new Promise((i,a)=>{if(d)return void a(Error(rV));if(!e)return void a(Error("no readable from compositor"));let o=Date.now()-p;o>1e3&&ek.verbose({indent:r,logLevel:t},`Took ${o}ms to extract frame from ${s} at ${l}`);let u=e.at(0),c=e.at(1),f=e.at(2);if(137===u&&80===c&&78===f)n.setHeader("content-type","image/png"),n.setHeader("content-length",e.byteLength);else{if(66!==u||77!==c)return void a(Error(`Unknown file type: ${u} ${c} ${f}`));n.setHeader("content-type","image/bmp"),n.setHeader("content-length",e.byteLength)}n.writeHead(200),n.write(e,e=>{n.end(),e?a(e):i()})})).catch(e=>{ek.error({indent:r,logLevel:t},"Could not extract frame from compositor",e),n.headersSent?ek.error({indent:r,logLevel:t},"Cannot propagate error message to client because headers have already been sent"):(n.writeHead(500),n.write(JSON.stringify({error:e.stack}))),n.end()})},compositor:o}})({downloadMap:t.downloadMap,offthreadVideoThreads:t.offthreadVideoThreads,logLevel:t.logLevel,indent:t.indent,offthreadVideoCacheSizeInBytes:t.offthreadVideoCacheSizeInBytes,binariesDirectory:t.binariesDirectory}),n={},o=z.default.createServer((t,i)=>{if(t.url?.startsWith("/proxy"))return r(t,i);if(null===e){i.writeHead(404),i.end("Server only supports /proxy");return}id(t,i,{public:e}).catch(()=>{i.headersSent||i.writeHead(500),i.end("Error serving file")})});o.on("connection",e=>{let t;try{t=e.remoteAddress+":"+e.remotePort}catch{t=":"}n[t]=e,e.on("close",()=>{delete n[t]})});let s=null,l=r5(t.forceIPv4);for(let e=0;e<10;e++){let e=()=>{};try{s=await new Promise((r,i)=>{r3({desiredPort:t?.port??void 0,from:3e3,to:3100,hostsToTry:l.hostsToTry}).then(({port:t,unlockPort:a})=>{e=a,o.listen({port:t,host:l.host}),o.on("listening",()=>(r(t),e())),o.on("error",t=>{e(),i(t)})}).catch(t=>(e(),i(t)))});let r=function(){for(let e in n)n[e].destroy()},u=async()=>{await Promise.all([new Promise((e,t)=>{i().catch(r=>{r.message.includes("Compositor quit")?e():t(r)}).finally(()=>{e()})}),new Promise((e,t)=>{r(),o.close(r=>{if(r){if("ERR_SERVER_NOT_RUNNING"===r.code)return e();t(r)}else e()})})])};return{port:s,close:u,compositor:a}}catch(e){if(!(e instanceof Error))throw e;if("EADDRINUSE"===e.code);else throw e}}throw Error("Tried 10 times to find a free port. Giving up.")},{lock:ih,unlock:im,waitForAllToBeDone:ig}=r0({timeout:5e4}),iv=async({webpackConfigOrServeUrl:e,port:t,remotionRoot:r,offthreadVideoThreads:i,logLevel:a,indent:n,offthreadVideoCacheSizeInBytes:o,binariesDirectory:s,forceIPv4:l})=>{var u;let c,d=rX();if(ek.verbose({indent:n,logLevel:a},"Created directory for temporary files",d.assetDir),ep(e)){let{port:u,close:c,compositor:p}=await ip(null,{port:t,downloadMap:d,remotionRoot:r,offthreadVideoThreads:i,logLevel:a,indent:n,offthreadVideoCacheSizeInBytes:o,binariesDirectory:s,forceIPv4:l}),f=rY(e),h=null;return tB(((e,t)=>{if(ep(e)){let r=new URL(e),i=r.pathname.lastIndexOf("/");return -1===i?r.origin+"/"+t:r.origin+r.pathname.substring(0,i+1)+t}let r=e.lastIndexOf(G.default.sep);return e.substring(0,r+1)+t})(f,U.NoReactInternals.bundleMapName)).then(e=>{h=e}).catch(e=>{ek.verbose({indent:n,logLevel:a},"Could not fetch sourcemap for ",f,e)}),Promise.resolve({serveUrl:f,closeServer:()=>(rJ(d),h?.destroy(),h=null,c()),offthreadPort:u,compositor:p,sourceMap:()=>h,downloadMap:d})}let p=D.default.join(e,"index.html");if(!(0,R.existsSync)(p))throw Error(`Tried to serve the Webpack bundle on a HTTP server, but the file ${p} does not exist. Is this a valid path to a Webpack bundle?`);let f=null;(u=D.default.join(e,U.NoReactInternals.bundleName),c=(0,Z.readFileSync)(u,"utf8"),tN(u,c,"local")).then(e=>{f=e}).catch(t=>{ek.verbose({indent:n,logLevel:a},"Could not fetch sourcemap for ",e,t)});let{port:h,close:m,compositor:g}=await ip(e,{port:t,downloadMap:d,remotionRoot:r,offthreadVideoThreads:i,logLevel:a,indent:n,offthreadVideoCacheSizeInBytes:o,binariesDirectory:s,forceIPv4:l});return Promise.resolve({closeServer:async e=>(f?.destroy(),f=null,rJ(d),e||await ig(),m()),serveUrl:`http://localhost:${h}`,offthreadPort:h,compositor:g,sourceMap:()=>f,downloadMap:d})},iy=async(e,t,{onDownload:r})=>{if(e){let t=rz(e.downloadMap,r);return{server:e,cleanupServer:()=>(t(),Promise.resolve())}}let i=await iv(t),a=rz(i.downloadMap,r);return{server:i,cleanupServer:e=>(a(),Promise.all([i.closeServer(e)]))}};function ib({args:e,frame:t,page:r,pageFunction:i,timeoutInMilliseconds:a}){let n=null;return Promise.race([new Promise((e,t)=>{n=setTimeout(()=>{t(Error(`Timed out evaluating page function "${i.toString()}"`))},a)}),ix({args:e,frame:t,page:r,pageFunction:i,timeoutInMilliseconds:a})]).then(e=>(null!==n&&clearTimeout(n),e))}async function ix({page:e,pageFunction:t,frame:r,args:i}){let a,n=(await e.mainFrame().executionContext())._contextId,o=e._client();if("function"!=typeof t)throw Error(`Expected to get |string| or |function| as the first argument, but got "${t}" instead.`);let s=t.toString();try{Function("("+s+")")}catch{s=s.startsWith("async ")?"async function "+s.substring(6):"function "+s;try{Function("("+s+")")}catch{throw Error("Passed function is not well-serializable!")}}try{a=o.send("Runtime.callFunctionOn",{functionDeclaration:s+`
`+"//# sourceURL=__puppeteer_evaluation_script__"+`
`,executionContextId:n,arguments:i.map(e=>(function(e){if("number"==typeof e||"string"==typeof e||"boolean"==typeof e)return{value:e};if("bigint"==typeof e)return{unserializableValue:`${e.toString()}n`};if(Object.is(e,-0))return{unserializableValue:"-0"};if(Object.is(e,1/0))return{unserializableValue:"Infinity"};if(Object.is(e,-1/0))return{unserializableValue:"-Infinity"};if(Object.is(e,NaN))return{unserializableValue:"NaN"};let t=e&&e instanceof e3?e:null;if(t){if(t._disposed)throw Error("JSHandle is disposed!");return t._remoteObject.unserializableValue?{unserializableValue:t._remoteObject.unserializableValue}:t._remoteObject.objectId?{objectId:t._remoteObject.objectId}:{value:t._remoteObject.value}}return{value:e}})(e)),returnByValue:!0,awaitPromise:!0,userGesture:!0})}catch(e){throw e instanceof TypeError&&e.message.startsWith("Converting circular structure to JSON")&&(e.message+=" Are you passing a nested JSHandle?"),e}try{let{value:{exceptionDetails:t,result:i},size:n}=await a;if(t){let i=new tX({stack:t.exception?.description,name:t.exception?.className,message:t.exception?.description?.split(`
`)[0],frame:r,stackFrame:tQ((t.exception?.description).split(`
`)),chunk:null});throw e.close(),i}return{size:n,value:function(e){if(e.unserializableValue){if("bigint"===e.type&&"u">typeof BigInt)return BigInt(e.unserializableValue.replace("n",""));switch(e.unserializableValue){case"-0":return -0;case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw Error("Unsupported unserializable value: "+e.unserializableValue)}}return e.value}(i)}}catch(e){if(e?.originalMessage?.startsWith("Object couldn't be returned by value"))throw Error("Could not serialize the return value of the function. Did you pass non-serializable values to defaultProps?");throw e}}var iw="cancelled",iS="ready",ik=({page:e,timeoutInMilliseconds:t,frame:r,indent:i,logLevel:a})=>{let n=[],o=new Promise((o,s)=>{let l=e.mainFrame()._mainWorld.waitForFunction({browser:e.browser,timeout:t+3e3,pageFunction:`window.remotion_renderReady === true ? "${iS}" : window.remotion_cancelledError !== undefined ? "${iw}" : false`,title:null===r?"the page to render the React component":`the page to render the React component at frame ${r}`});n.push(()=>{l.terminate(Error("cleanup"))}),l.promise.then(r=>{let n=r.toString();return n===iw?new Promise((r,n)=>{ix({pageFunction:()=>window.remotion_cancelledError,args:[],frame:null,page:e,timeoutInMilliseconds:t}).then(({value:e})=>{"string"!=typeof e?n(e):n(new tX({frame:null,stack:e,name:"CancelledError",message:e.split(`
`)[0],stackFrame:tQ(e.split(`
`)),chunk:null}))}).catch(e=>{ek.verbose({indent:i,logLevel:a},"Could not get cancelled error",e),n(Error("Render was cancelled using cancelRender()"))})}):n===iS?o(r):void s(Error("Unexpected token "+n))}).catch(n=>{n.message.includes("timeout")&&n.message.includes("exceeded")?ib({pageFunction:()=>Object.keys(window.remotion_delayRenderTimeouts).map((e,t)=>{let{label:r}=window.remotion_delayRenderTimeouts[e];return null===r?`${t+1}. (no label)`:`"${t+1}. ${r}"`}).join(", "),args:[],frame:r,page:e,timeoutInMilliseconds:5e3}).then(e=>{s(Error(`Timeout (${t}ms) exceeded rendering the component${r?" at frame "+r:" initially"}. ${e.value?`Open delayRender() handles: ${e.value}`:""}. You can increase the timeout using the "timeoutInMilliseconds" / "--timeout" option of the function or command you used to trigger this render.`))}).catch(e=>{ek.warn({indent:i,logLevel:a},"Tried to get delayRender() handles for timeout, but could not do so because of",e),s(n)}):s(n)})});return Promise.race([new Promise((t,r)=>{let i=()=>{r(Error("Target closed (page disposed)"))};e.on("disposed",i),n.push(()=>{e.off("disposed",i)})}),new Promise((t,r)=>{let i=()=>{r(Error("Target closed"))};e.browser.on("closed-silent",i),n.push(()=>{e.browser.off("closed-silent",i)})}),o]).finally(()=>{n.forEach(e=>{e()})})},iC=async({frame:e,page:t,composition:r,timeoutInMilliseconds:i,logLevel:a,indent:n,attempt:o})=>{await ik({page:t,timeoutInMilliseconds:i,frame:null,indent:n,logLevel:a}),await ib({pageFunction:(e,t,r)=>{window.remotion_setFrame(e,t,r)},args:[e,r,o],frame:e,page:t,timeoutInMilliseconds:i}),await ik({page:t,timeoutInMilliseconds:i,frame:e,indent:n,logLevel:a}),await t.evaluateHandle("document.fonts.ready")},iE=async(e,t,r)=>{try{let i=await e.goto({url:t,timeout:r});if(null===i)return[null,Error(`Visited "${t}" but got no response.`)];return[i,null]}catch(e){return[null,e]}},i_=e=>{if(null!=e){if("number"!=typeof e)throw TypeError(`'timeoutInMilliseconds' should be a number, but is: ${JSON.stringify(e)}`);if(e<7e3)throw TypeError(`'timeoutInMilliseconds' should be bigger or equal than 7000, but is ${e}`);if(Number.isNaN(e))throw TypeError(`'timeoutInMilliseconds' should not be NaN, but is ${e}`);if(!Number.isFinite(e))throw TypeError(`'timeoutInMilliseconds' should be finite, but is ${e}`);if(e%1!=0)throw TypeError(`'timeoutInMilliseconds' should be an integer, but is ${e}`)}},iT=async({serializedInputPropsWithCustomSchema:e,envVariables:t,page:r,serveUrl:i,initialFrame:a,timeoutInMilliseconds:n,proxyPort:o,retriesRemaining:s,audioEnabled:l,videoEnabled:u,indent:c,logLevel:d,onServeUrlVisited:p,isMainTab:f,mediaCacheSizeInBytes:h,initialMemoryAvailable:m,darkMode:g})=>{i_(n);let v=n??3e4;r.setDefaultTimeout(v),r.setDefaultNavigationTimeout(v);let y=rY(i);await r.evaluateOnNewDocument((e,t,r,i)=>{window.remotion_puppeteerTimeout=e,window.remotion_isMainTab=t,window.remotion_mediaCacheSizeInBytes=r,window.remotion_initialMemoryAvailable=i,void 0===window.process&&(window.process={}),void 0===window.process.env&&(window.process.env={}),window.process.env.NODE_ENV="production"},v,f,h,m),await r.evaluateOnNewDocument('window.remotion_broadcastChannel = new BroadcastChannel("remotion-video-frame-extraction")'),t&&await r.evaluateOnNewDocument(e=>{window.remotion_envVariables=e},JSON.stringify(t)),g&&await r.setAutoDarkModeOverride(),await r.evaluateOnNewDocument((e,t,r,i,a,n)=>{window.remotion_inputProps=e,window.remotion_initialFrame=t,window.remotion_attempt=1,window.remotion_proxyPort=r,window.remotion_audioEnabled=i,window.remotion_videoEnabled=a,window.remotion_logLevel=n,window.alert=e=>{e?window.window.remotion_cancelledError=Error(`alert("${e}") was called. It cannot be called in a headless browser.`).stack:window.window.remotion_cancelledError=Error("alert() was called. It cannot be called in a headless browser.").stack},window.confirm=e=>(e?window.remotion_cancelledError=Error(`confirm("${e}") was called. It cannot be called in a headless browser.`).stack:window.remotion_cancelledError=Error("confirm() was called. It cannot be called in a headless browser.").stack,!1)},e,a,o,l,u,d);let b=async()=>(await new Promise(e=>{setTimeout(()=>{e()},2e3)}),iT({envVariables:t,initialFrame:a,serializedInputPropsWithCustomSchema:e,page:r,proxyPort:o,retriesRemaining:s-1,serveUrl:i,timeoutInMilliseconds:n,audioEnabled:l,videoEnabled:u,indent:c,logLevel:d,onServeUrlVisited:p,isMainTab:f,mediaCacheSizeInBytes:h,initialMemoryAvailable:m,darkMode:g})),[x,w]=await iE(r,y,v);if(null!==w){if(w.message.includes("ECONNRESET")||w.message.includes("ERR_CONNECTION_TIMED_OUT"))return b();throw w}let S=x.status();if(S>=500&&S<=504&&s>0)return b();if(!eC.every(e=>e!==S))throw Error(`Error while getting compositions: Tried to go to ${y} but the status code was ${S} instead of 200. Does the site you specified exist?`);p();let{value:k}=await ix({pageFunction:()=>window.getStaticCompositions,args:[],frame:null,page:r,timeoutInMilliseconds:v});if(void 0===k){let{value:e}=await ix({pageFunction:()=>document.body.innerHTML,args:[],frame:null,page:r,timeoutInMilliseconds:v});if(e.includes("We encountered an internal error."))return b();throw Error([`Error while getting compositions: Tried to go to ${y} and verify that it is a Remotion project by checking if window.getStaticCompositions is defined.`,"However, the function was undefined, which indicates that this is not a valid Remotion project. Please check the URL you passed.","The page loaded contained the following markup:",e.substring(0,500)+(e.length>500?"...":""),"Does this look like a foreign page? If so, try to stop this server."].join(`
`))}let{value:C}=await ix({pageFunction:()=>window.siteVersion,args:[],frame:null,page:r,timeoutInMilliseconds:v}),{value:E}=await ix({pageFunction:()=>window.remotion_version,args:[],frame:null,page:r,timeoutInMilliseconds:v});if("11"!==C)throw Error([`Incompatible site: When visiting ${y}, a bundle was found, but one that is not compatible with this version of Remotion. Found version: ${C} - Required version: 11. To resolve this error:`,"When using server-side rendering:",`  Use 'bundle()' with '@remotion/bundler' of version ${N.VERSION} to create a compatible bundle.`,"When using the Remotion Lambda:","  Use `npx remotion lambda sites create` to redeploy the site with the latest version.","  Use --site-name with the same name as before to overwrite your site.","  Use `deploySite()` if you are using the Node.JS APIs."].join(`
`));E!==N.VERSION&&(E?ek.warn({indent:c,logLevel:d},[`The site was bundled with version ${E} of @remotion/bundler, while @remotion/renderer is on version ${N.VERSION}. You may not have the newest bugfixes and features.`,"To resolve this warning:"," Use `npx remotion lambda sites create` to redeploy the site with the latest version.","   Use --site-name with the same name as before to overwrite your site."," Use `deploySite()` if you are using the Node.JS APIs."].join(`
`)):ek.warn({indent:c,logLevel:d},`The site was bundled with an old version of Remotion, while @remotion/renderer is on version ${N.VERSION}. You may not have the newest bugfixes and features. Re-bundle the site to fix this issue.`))},iP=async e=>{let t=null;try{return await Promise.race([iT(e),new Promise((r,i)=>{t=setTimeout(()=>{i(Error([`Timed out after ${e.timeoutInMilliseconds}ms while setting up the headless browser.`,"This could be because the you specified takes a long time to load (or network resources that it includes like fonts) or because the browser is not responding.",null].filter(ew).join(`
`)))},e.timeoutInMilliseconds)})])}finally{null!==t&&clearTimeout(t)}},iI=[],iA=(e,t,r)=>{let i=e.stack;if(!(i&&iI.includes(i))){if(i&&(iI.push(i),iI=iI.slice(-10)),e.message.includes("Could not play video with")&&(ek.info({indent:r,logLevel:t}),ek.info({indent:r,logLevel:t}," Get help for this issue at https://remotion.dev/docs/media-playback-error")),e.message.includes("A delayRender()")&&e.message.includes("was called but not cleared after")&&(ek.info({indent:r,logLevel:t}),e.message.includes("/proxy")&&ek.info({indent:r,logLevel:t}," Get help for this issue at https://remotion.dev/docs/troubleshooting/delay-render-proxy"),ek.info({indent:r,logLevel:t}," Get help for this issue at https://remotion.dev/docs/timeout")),e.message.includes("Target closed")&&(ek.info({indent:r,logLevel:t}),ek.info({indent:r,logLevel:t}," Get help for this issue at https://remotion.dev/docs/target-closed")),e.message.includes("Timed out evaluating")&&(ek.info({indent:r,logLevel:t}),ek.info({indent:r,logLevel:t}," Get help for this issue at https://remotion.dev/docs/troubleshooting/timed-out-page-function")),e.message.includes("ENAMETOOLONG")&&(ek.info({indent:r,logLevel:t}),ek.info({indent:r,logLevel:t}," Get help for this issue at https://remotion.dev/docs/enametoolong")),e.message.includes("Member must have value less than or equal to 3008")&&(ek.warn({indent:r,logLevel:t}),ek.warn({indent:r,logLevel:t}," This error indicates that you have a AWS account on the free or basic tier or have been limited by your organization."),ek.warn({indent:r,logLevel:t},"Often times this can be solved by adding a credit card, or if already done, by contacting AWS support."),ek.warn({indent:r,logLevel:t},"Alternatively, you can decrease the memory size of your Lambda function to a value below 3008 MB. See: https://www.remotion.dev/docs/lambda/runtime#core-count--vcpus"),ek.warn({indent:r,logLevel:t},"See also: https://repost.aws/questions/QUKruWYNDYTSmP17jCnIz6IQ/questions/QUKruWYNDYTSmP17jCnIz6IQ/unable-to-set-lambda-memory-over-3008mb")),(e.stack?.includes("TooManyRequestsException: Rate Exceeded.")||e.message?.includes("ConcurrentInvocationLimitExceeded"))&&(ek.info({indent:r,logLevel:t}),ek.info({indent:r,logLevel:t}," This error indicates that your Lambda concurrency limit is too low. See: https://www.remotion.dev/docs/lambda/troubleshooting/rate-limit")),e.message.includes("Error creating WebGL context")&&(ek.info({indent:r,logLevel:t}),ek.warn({indent:r,logLevel:t},' You might need to set the OpenGL renderer to "angle-egl", "angle" (or "swangle" if rendering on lambda). Learn why at https://www.remotion.dev/docs/three'),ek.warn({indent:r,logLevel:t}," Check how it's done at https://www.remotion.dev/docs/chromium-flags#--gl")),e.message.includes("The bucket does not allow ACLs")&&(ek.info({indent:r,logLevel:t}),ek.info({indent:r,logLevel:t}," Fix for this issue: https://remotion.dev/docs/lambda/troubleshooting/bucket-disallows-acl")),e.message.includes("Minified React error #306")){let i=e.message.match(/<\w+>/)?.[0];ek.info({indent:r,logLevel:t},[" This error indicates that the component",i?`(${i})`:null,"you are trying to render is not imported correctly."].filter(ew).join(" ")),ek.info({indent:r,logLevel:t}),ek.info({indent:r,logLevel:t},"   Check the root file and ensure that the component is not undefined."),ek.info({indent:r,logLevel:t},"   Oftentimes, this happens if the component is missing the `export` keyword"),ek.info({indent:r,logLevel:t},"   or if the component was renamed and the import statement not properly adjusted.")}e.message.includes("GLIBC_")&&(ek.info({indent:r,logLevel:t}," Remotion requires at least Libc 2.35."),ek.info({indent:r,logLevel:t}," Get help for this issue: https://github.com/remotion-dev/remotion/issues/2439")),e.message.includes("EBADF")&&(ek.info({indent:r,logLevel:t}," This error might be fixed by changing your Node version:"),ek.info({indent:r,logLevel:t},"   https://github.com/remotion-dev/remotion/issues/2452")),e.message.includes("routines::unsupported")&&(ek.info({indent:r,logLevel:t}," This error might happen if using Cloud Run with credentials that have a newline at the end or are otherwise badly encoded."),ek.info({indent:r,logLevel:t},"   https://github.com/remotion-dev/remotion/issues/3864")),e.message.includes("Failed to fetch")&&(ek.info({indent:r,logLevel:t}," On Lambda, one reason this could happen is that Chrome is rejecting an asset to be loaded when it is running low on disk space."),ek.info({indent:r,logLevel:t},"Try increasing the disk size of your Lambda function.")),e.message.includes("Invalid value specified for cpu")&&(ek.info({indent:r,logLevel:t}),ek.info({indent:r,logLevel:t}," This error indicates that your GCP account does have a limit. Try setting `--maxInstances=5` / `maxInstances: 5` when deploying this service."),ek.info({indent:r,logLevel:t}))}},iO=e=>async(...t)=>{try{return await e(...t)}catch(i){let{indent:e}=t[0],{logLevel:r}=t[0];throw iA(i,r,e),i}},iM=async({envVariables:e,serializedInputPropsWithCustomSchema:t,page:r,proxyPort:i,serveUrl:a,timeoutInMilliseconds:n,indent:o,logLevel:s,mediaCacheSizeInBytes:l,darkMode:u})=>{i_(n),await iP({serializedInputPropsWithCustomSchema:t,envVariables:e,page:r,serveUrl:a,initialFrame:0,timeoutInMilliseconds:n,proxyPort:i,retriesRemaining:2,audioEnabled:!1,videoEnabled:!1,indent:o,logLevel:s,onServeUrlVisited:()=>{},isMainTab:!0,mediaCacheSizeInBytes:l,initialMemoryAvailable:rh(s),darkMode:u}),await ix({page:r,pageFunction:()=>{window.remotion_setBundleMode({type:"evaluation"})},frame:null,args:[],timeoutInMilliseconds:n}),await ik({page:r,timeoutInMilliseconds:n,frame:null,indent:o,logLevel:s});let{value:c}=await ix({pageFunction:()=>window.getStaticCompositions(),frame:null,page:r,args:[],timeoutInMilliseconds:n});return c.map(e=>{let{width:t,durationInFrames:r,fps:i,height:a,id:n,defaultCodec:o,defaultOutName:s,defaultVideoImageFormat:l,defaultPixelFormat:u,defaultProResProfile:c}=e;return{id:n,width:t,height:a,fps:i,durationInFrames:r,props:U.NoReactInternals.deserializeJSONWithSpecialTypes(e.serializedResolvedPropsWithCustomSchema),defaultProps:U.NoReactInternals.deserializeJSONWithSpecialTypes(e.serializedDefaultPropsWithCustomSchema),defaultCodec:o,defaultOutName:s,defaultVideoImageFormat:l,defaultPixelFormat:u,defaultProResProfile:c}})},iF=iO(async({browserExecutable:e,chromiumOptions:t,envVariables:r,indent:i,serializedInputPropsWithCustomSchema:a,onBrowserLog:n,port:o,puppeteerInstance:s,serveUrlOrWebpackUrl:l,server:u,timeoutInMilliseconds:c,logLevel:d,offthreadVideoCacheSizeInBytes:p,binariesDirectory:f,onBrowserDownload:h,chromeMode:m,offthreadVideoThreads:g,mediaCacheSizeInBytes:v,onLog:y})=>{let{page:b,cleanupPage:x}=await ry({passedInInstance:s,browserExecutable:e,chromiumOptions:t,forceDeviceScaleFactor:void 0,indent:i,logLevel:d,onBrowserDownload:h,chromeMode:m,pageIndex:0,onBrowserLog:n,onLog:y}),w=[x];return new Promise((e,n)=>{w.push(t0({page:b,frame:null,onError:e=>n(e)})),iy(u,{webpackConfigOrServeUrl:l,port:o,remotionRoot:ed(),offthreadVideoThreads:g??2,logLevel:d,indent:i,offthreadVideoCacheSizeInBytes:p,binariesDirectory:f,forceIPv4:!1},{onDownload:()=>{}}).then(({server:{serveUrl:e,offthreadPort:n,sourceMap:o},cleanupServer:s})=>(b.setBrowserSourceMapGetter(o),w.push(()=>s(!0)),iM({envVariables:r,serializedInputPropsWithCustomSchema:a,page:b,proxyPort:n,serveUrl:e,timeoutInMilliseconds:c,indent:i,logLevel:d,offthreadVideoCacheSizeInBytes:p,binariesDirectory:f,onBrowserDownload:h,chromeMode:m,offthreadVideoThreads:g,mediaCacheSizeInBytes:v,darkMode:t.darkMode??!1}))).then(t=>e(t)).catch(e=>{n(e)}).finally(()=>{w.forEach(e=>{e()})})})}),iR=e=>{let t,r=rp();if(null===e)return Math.round(Math.min(8,Math.max(1,r/2)));if((t="string"==typeof e?Math.floor(parseInt(e.slice(0,-1),10)/100*r):Math.floor(e))>r)throw Error(`Maximum for --concurrency is ${r} (number of cores on this system)`);if(t<1)throw Error("Minimum for concurrency is 1.");return t},iD=(e,t)=>{if(0===t)throw Error("everyNthFrame cannot be 0");return Array(e[1]-e[0]+1).fill(!0).map((t,r)=>r+e[0]).filter(e=>e%t==0)},ij=(e,t)=>{if(!tD.includes(e))throw Error(`Codec must be one of the following: ${tD.join(", ")}, but got ${e}`);let r=t2[e];if(null===t)return r.default;if(!(t in r.forAudioCodec))throw Error(`Audio codec ${t} is not supported for codec ${e}`);return r.forAudioCodec[t].default},iL=e=>{if(null===e)return null;let t=(e=>{let t=typeof e;if("string"!==t)throw TypeError(`Expected a string, got a ${t}`);let r=e;if(0===r.length)return".";let i=47===r.charCodeAt(0),a=47===r.charCodeAt(r.length-1);return(0!==(r=((e,t)=>{let r,i="",a=0,n=-1,o=0;for(let s=0;s<=e.length;++s){if(s<e.length)r=e.charCodeAt(s);else if(47===r)break;else r=47;if(47===r){if(n===s-1||1===o);else if(n!==s-1&&2===o){if(i.length<2||2!==a||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2)){if(i.length>2){let e=i.lastIndexOf("/");if(e!==i.length-1){-1===e?(i="",a=0):a=(i=i.slice(0,e)).length-1-i.lastIndexOf("/"),n=s,o=0;continue}}else if(2===i.length||1===i.length){i="",a=0,n=s,o=0;continue}}t&&(i.length>0?i+="/..":i="..",a=2)}else i.length>0?i+="/"+e.slice(n+1,s):i=e.slice(n+1,s),a=s-n-1;n=s,o=0}else 46===r&&-1!==o?++o:o=-1}return i})(r=(e=>{try{return decodeURIComponent(e)}catch{return e}})(r),!i)).length||i||(r="."),r.length>0&&a&&(r+="/"),i)?"/"+r:r})(e).split("."),r=t.length>=2,i=t.length;return r?t[i-1]:null},iB=(e,t)=>{if(null===t)return[0,e-1];if("number"==typeof t){if(t<0||t>=e)throw Error(`Frame number is out of range, must be between 0 and ${e-1} but got ${t}`);return[t,t]}if(t[1]>=e||t[0]<0)throw Error(`The "durationInFrames" of the <Composition /> was evaluated to be ${e}, but frame range ${t.join("-")} is not inbetween 0-${e-1}`);return t},iN=["png","jpeg","none"],i$=["png","jpeg","pdf","webp"],iz="jpeg",iU="png",iV=e=>{if(void 0!==e&&"number"!=typeof e)throw Error(`JPEG Quality option must be a number or undefined. Got ${typeof e} (${JSON.stringify(e)})`);if(void 0!==e){if(!Number.isFinite(e))throw RangeError(`JPEG Quality must be a finite number, but is ${e}`);if(Number.isNaN(e))throw RangeError("JPEG Quality is NaN, but must be a real number");if(e>100||e<0)throw RangeError("JPEG Quality option must be between 0 and 100.")}},iH={},iW={stopPerfMeasure:()=>iQ,startPerfMeasure:()=>iK,getPerf:()=>iX};for(var iq in iW)en(iH,iq,{get:iW[iq],enumerable:!0,configurable:!0,set:e=>iW[iq]=()=>e});var iG={capture:[],"extract-frame":[],piping:[]},iZ={},iK=e=>{let t=Math.random();return iZ[t]={id:t,marker:e,start:Date.now()},t},iQ=e=>{let t=Date.now()-iZ[e].start;iG[iZ[e].marker].push(t),delete iZ[e]},iX=()=>["Render performance:",...Object.keys(iG).filter(e=>iG[e].length).map(e=>`  ${e} => ${Math.round(iG[e].reduce((e,t)=>e+t,0)/iG[e].length)}ms (n = ${iG[e].length})`)],iJ=["yuv420p","yuva420p","yuv422p","yuv444p","yuv420p10le","yuv422p10le","yuv444p10le","yuva444p10le"],iY="yuv420p",i0=(e,t)=>{if(void 0===e)return e;if(!iJ.includes(e))throw TypeError(`Value ${e} is not valid as a pixel format.`);if("yuva420p"!==e)return;let r="vp8"===t||"vp9"===t?iJ:iJ.filter(e=>"yuva420p"!==e);if(!r.includes(e))throw TypeError(`Pixel format was set to 'yuva420p' but codec ${t} does not support it. Valid pixel formats for codec ${t} are: ${r.join(", ")}.`)},i1="separate-audio-to",i2={h264:["aac","pcm-16","mp3"],"h264-mkv":["pcm-16","mp3"],"h264-ts":["pcm-16","aac"],aac:["aac","pcm-16"],avi:[],gif:[],h265:["aac","pcm-16"],mp3:["mp3","pcm-16"],prores:["aac","pcm-16"],vp8:["opus","pcm-16"],vp9:["opus","pcm-16"],wav:["pcm-16"]},i4=e=>{if("aac"===e)return"libfdk_aac";if("mp3"===e)return"libmp3lame";if("opus"===e)return"libopus";if("pcm-16"===e)return"pcm_s16le";throw Error("unknown audio codec: "+e)},i3={"h264-mkv":{lossless:"pcm-16",compressed:"pcm-16"},"h264-ts":{lossless:"pcm-16",compressed:"aac"},aac:{lossless:"pcm-16",compressed:"aac"},gif:{lossless:null,compressed:null},h264:{lossless:"pcm-16",compressed:"aac"},h265:{lossless:"pcm-16",compressed:"aac"},mp3:{lossless:"pcm-16",compressed:"mp3"},prores:{lossless:"pcm-16",compressed:"pcm-16"},vp8:{lossless:"pcm-16",compressed:"opus"},vp9:{lossless:"pcm-16",compressed:"opus"},wav:{lossless:"pcm-16",compressed:"pcm-16"}},i6={aac:"aac",mp3:"mp3",opus:"opus","pcm-16":"wav"},i8=e=>{if(i6[e])return i6[e];throw Error(`Unsupported audio codec: ${e}`)},i5=({codec:e,setting:t,preferLossless:r,separateAudioTo:i})=>{let a=null;if(i){let t=i.split(".").pop();for(let[r,i]of Object.entries(i6))if(i===t&&(a=r,!i2[e].includes(a)&&a))throw Error(`The codec is ${e} but the audio codec derived from --${i1} is ${a}. The only supported codecs are: ${i2[e].join(", ")}`)}if(r){let t=i7({codec:e,preferLossless:r});if(a&&t!==a)throw Error(`The audio codec derived from --${i1} is ${a}, but does not match the audio codec derived from the "Prefer lossless" option (${t}). Remove any conflicting options.`);return t}if(null===t)return a||i7({codec:e,preferLossless:r});if(a!==t&&a)throw Error(`The audio codec derived from --${i1} is ${a}, but does not match the audio codec derived from your ${i9.name} setting (${t}). Remove any conflicting options.`);return t},i7=({codec:e,preferLossless:t})=>i3[e][t?"lossless":"compressed"],i9={name:"Audio Codec"},ae=(e,t)=>{let r=e.match(/frame=(\s+)?([0-9]+)\s/);if(r)return Number(r[2]);let i=e.match(/time=(\d+):(\d+):(\d+).(\d+)\s/);if(i){let[,e,r,a,n]=i;return Number(n)/100*t+Number(a)*t+Number(r)*t*60+Number(e)*t*3600}},at=e=>{var t;return((t=1e6*e/21333.333333333332)%1>.4999999?Math.ceil(t):Math.floor(t))*21333.333333333332/1e6},ar=async({files:e,resolvedAudioCodec:t,audioBitrate:r,filelistDir:i,output:a,indent:n,logLevel:o,addRemotionMetadata:s,fps:l,binariesDirectory:u,cancelSignal:c,onProgress:d})=>{let p=e.map(e=>`file '${e}'`).join(`
`),f=(0,G.join)(i,"audio-files.txt");(0,Z.writeFileSync)(f,p);let h=Date.now(),m=["-hide_banner","-f","concat","-safe","0","-i",f,"-c:a",i4(t),"aac"===t?"-cutoff":null,"aac"===t?"18000":null,"-b:a",r||"320k","-vn",s?"-metadata":null,s?`comment=Made with Remotion ${N.VERSION}`:null,"-y",a];ek.verbose({indent:n,logLevel:o},`Combining audio with re-encoding, command: ${m.join(" ")}`);try{let e=tO({args:m,bin:"ffmpeg",indent:n,logLevel:o,binariesDirectory:u,cancelSignal:c});return e.stderr?.on("data",e=>{let t=e.toString("utf8"),r=ae(t,l);void 0===r?ek.verbose({indent:n,logLevel:o},t):(d(r),ek.verbose({indent:n,logLevel:o},`Encoded ${r} audio frames`))}),await e,ek.verbose({indent:n,logLevel:o},`Encoded audio in ${Date.now()-h}ms`),a}catch(e){throw(0,Z.rmSync)(f,{recursive:!0}),e}},ai=async({files:e,filelistDir:t,indent:r,logLevel:i,output:a,chunkDurationInSeconds:n,addRemotionMetadata:o,fps:s,binariesDirectory:l,cancelSignal:u,onProgress:c})=>{let d=Date.now(),p=e.map((t,r)=>{let i=r===e.length-1,a=1e6*at(r*n),o=1e6*at((r+1)*n),s=0;r>0&&(s=85333.33333333333);let l=(0===r?42666.666666666664:s)+(o-a)-21333.333333333332*!i;return[`file '${t}'`,`inpoint ${s}us`,`outpoint ${l}us`].filter(ew).join(`
`)}).join(`
`),f=(0,G.join)(t,"audio-files.txt");(0,Z.writeFileSync)(f,p);let h=["-hide_banner","-f","concat","-safe","0","-i",f,"-c:a","copy","-vn",o?"-metadata":null,o?`comment=Made with Remotion ${N.VERSION}`:null,"-y",a];ek.verbose({indent:r,logLevel:i},`Combining AAC audio seamlessly, command: ${h.join(" ")}`);try{let e=tO({args:h,bin:"ffmpeg",indent:r,logLevel:i,binariesDirectory:l,cancelSignal:u});return e.stderr?.on("data",e=>{let t=e.toString("utf8"),a=ae(t,s);void 0!==a&&(c(a),ek.verbose({indent:r,logLevel:i},`Encoded ${a} audio frames`))}),await e,ek.verbose({indent:r,logLevel:i},`Combined audio seamlessly in ${Date.now()-d}ms`),a}catch(e){throw(0,Z.rmSync)(f,{recursive:!0}),ek.error({indent:r,logLevel:i},e),e}},aa=({lastFrame:e,totalFrames:t,countType:r})=>{if("actual-frames"===r)return String(e).length;if("from-zero"===r)return String(t-1).length;throw Error("Unknown file type")},an=()=>{let e=[],t=!1;return{cancelSignal:r=>{e.push(r),t&&r()},cancel:()=>{t||(e.forEach(e=>{e()}),t=!0)}}},ao="renderMedia() got cancelled",as="renderFrames() got cancelled",al="renderStill() got cancelled",au="stitchFramesToVideo() got cancelled",ac=async({context:e,initialFrame:t,browserReplacer:r,logLevel:i,indent:a,pagesArray:n,onBrowserLog:o,scale:s,timeoutInMilliseconds:l,composition:u,proxyPort:c,serveUrl:d,muted:p,envVariables:f,serializedInputPropsWithCustomSchema:h,imageFormat:m,serializedResolvedPropsWithCustomSchema:g,pageIndex:v,isMainTab:y,mediaCacheSizeInBytes:b,onLog:x,darkMode:w})=>{let S=await r.getBrowser().newPage({context:e,logLevel:i,indent:a,pageIndex:v,onBrowserLog:o,onLog:x});return n.push(S),await S.setViewport({width:u.width,height:u.height,deviceScaleFactor:s}),await iP({serializedInputPropsWithCustomSchema:h,envVariables:f,page:S,serveUrl:d,initialFrame:t,timeoutInMilliseconds:l,proxyPort:c,retriesRemaining:2,audioEnabled:!p,videoEnabled:"none"!==m,indent:a,logLevel:i,onServeUrlVisited:()=>{},isMainTab:y,mediaCacheSizeInBytes:b,initialMemoryAvailable:rh(i),darkMode:w}),await ix({pageFunction:(e,t,r,i,a,n,o,s,l,u,c)=>{window.remotion_setBundleMode({type:"composition",compositionName:e,serializedResolvedPropsWithSchema:t,compositionDurationInFrames:r,compositionFps:i,compositionHeight:a,compositionWidth:n,compositionDefaultCodec:o,compositionDefaultOutName:s,compositionDefaultVideoImageFormat:l,compositionDefaultPixelFormat:u,compositionDefaultProResProfile:c})},args:[u.id,g,u.durationInFrames,u.fps,u.height,u.width,u.defaultCodec,u.defaultOutName,u.defaultVideoImageFormat,u.defaultPixelFormat,u.defaultProResProfile],frame:null,page:S,timeoutInMilliseconds:l}),S};class ad{resources;waiters;constructor(e){this.resources=e,this.waiters=[]}acquire(){let e=this.resources.shift();return void 0!==e?Promise.resolve(e):new Promise(e=>{this.waiters.push(t=>{e(t)})})}release(e){let t=this.waiters.shift();void 0===t?this.resources.push(e):t(e)}}var ap=async({frame:e,freePage:t,timeoutInMilliseconds:r})=>{let{value:i}=await ix({pageFunction:()=>window.remotion_collectAssets(),args:[],frame:e,page:t,timeoutInMilliseconds:r});return i.map(e=>{if("artifact"!==e.type)return e;if("binary"===e.contentType||"text"===e.contentType){if("string"!=typeof e.content)throw Error(`Expected string content for artifact ${e.id}, but got ${e.content}`);let t="binary"===e.contentType?new TextEncoder().encode(atob(e.content)):e.content;return{...e,content:t}}return e.contentType,e})},af=e=>e.filter(e=>"audio"===e.type||"video"===e.type),ah=({assets:e,frameBuffer:t})=>e.filter(e=>"artifact"===e.type).map(e=>{if("binary"===e.contentType||"text"===e.contentType)return{frame:e.frame,content:e.content,filename:e.filename,downloadBehavior:e.downloadBehavior};if("thumbnail"===e.contentType)return null===t?null:{frame:e.frame,content:new Uint8Array(t),filename:e.filename,downloadBehavior:e.downloadBehavior};throw Error("Unknown artifact type: "+e)}).filter(ew),am=async({format:e,height:t,omitBackground:r,page:i,width:a,path:n,jpegQuality:o,scale:s})=>{let l=i._client(),u=i.target();await l.send("Target.activateTarget",{targetId:u._targetId}),r&&await l.send("Emulation.setDefaultBackgroundColorOverride",{color:{r:0,g:0,b:0,a:0}});let c=iK("capture");try{let i;if("pdf"===e)i=(await l.send("Page.printToPDF",{paperWidth:a/96,paperHeight:t/96,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,scale:1,printBackground:!0})).value;else{let r=!process.env.DISABLE_FROM_SURFACE||t>8192||a>8192,n=r?1:s,{value:u}=await l.send("Page.captureScreenshot",{format:e,quality:o,clip:{x:0,y:0,height:t*n,scale:1,width:a*n},captureBeyondViewport:!0,optimizeForSpeed:!0,fromSurface:r});i=u}iQ(c),r&&await l.send("Emulation.setDefaultBackgroundColorOverride");let u=Buffer.from(i.data,"base64");return n&&await R.default.promises.writeFile(n,u),u}catch(e){if(e.message.includes("Unable to capture screenshot"))throw Error(["Could not take a screenshot because Google Chrome ran out of memory or disk space.",process?.env?.__RESERVED_IS_INSIDE_REMOTION_LAMBDA?"Deploy a new Lambda function with more memory or disk space.":"Decrease the concurrency to use less RAM."].join(" "));throw e}},ag=async({freePage:e,imageFormat:t,jpegQuality:r,width:i,height:a,output:n,scale:o,wantsBuffer:s,timeoutInMilliseconds:l})=>{var u;return"none"===t?null:("png"===t||"pdf"===t||"webp"===t?await ix({pageFunction:()=>{document.body.style.background="transparent"},args:[],frame:null,page:e,timeoutInMilliseconds:l}):await ix({pageFunction:()=>{document.body.style.background="black"},args:[],frame:null,page:e,timeoutInMilliseconds:l}),await ((u={page:e,omitBackground:"png"===t,path:(s?void 0:n)??void 0,type:t,jpegQuality:r,width:i,height:a,scale:o}).jpegQuality&&(et.ok("number"==typeof u.jpegQuality,"Expected options.quality to be a number but found "+typeof u.jpegQuality),et.ok(Number.isInteger(u.jpegQuality),"Expected options.quality to be an integer"),et.ok(u.jpegQuality>=0&&u.jpegQuality<=100,"Expected options.quality to be between 0 and 100 (inclusive), got "+u.jpegQuality)),u.page.screenshotTaskQueue.postTask(()=>am({page:u.page,format:u.type,height:u.height,width:u.width,omitBackground:u.omitBackground,path:u.path,jpegQuality:"jpeg"===u.type?u.jpegQuality:void 0,scale:u.scale}))))},av=async({reject:e,width:t,height:r,compId:i,attempt:a,stoppedSignal:n,indent:o,logLevel:s,timeoutInMilliseconds:l,outputDir:u,onFrameBuffer:c,imageFormat:d,onError:p,lastFrame:f,jpegQuality:h,frameDir:m,scale:g,countType:v,assets:y,framesToRender:b,onArtifact:x,onDownload:w,downloadMap:S,binariesDirectory:k,cancelSignal:C,framesRenderedObj:E,onFrameUpdate:_,frame:T,page:P,imageSequencePattern:I,fps:A,trimLeftOffset:O,trimRightOffset:M,allFramesAndExtraFrames:F})=>{let R=performance.now(),D=b.indexOf(T),j=-1===D;if(n.stopped)return Promise.reject(Error("Render was stopped"));let L=t=>{e(t)},B=t0({page:P,onError:L,frame:T});P.on("error",L);let N=Date.now();await iC({frame:T,page:P,composition:i,timeoutInMilliseconds:l,indent:o,logLevel:s,attempt:a});let $=Date.now()-N;if($>1e3&&ek.verbose({indent:o,logLevel:s},`Seeking to frame ${T} took ${$}ms`),!u&&!c&&"none"!==d)throw Error("Called renderFrames() without specifying either `outputDir` or `onFrameBuffer`");if(u&&c&&"none"!==d)throw Error("Pass either `outputDir` or `onFrameBuffer` to renderFrames(), not both.");let[z,U]=await Promise.all([ag({freePage:P,height:r,imageFormat:j?"none":d,output:null===D?null:G.default.join(m,(({index:e,frame:t,imageFormat:r,countType:i,lastFrame:a,totalFrames:n,imageSequencePattern:o})=>{let s=aa({lastFrame:a,countType:i,totalFrames:n}),l="actual-frames"===i?String(t).padStart(s,"0"):String(e).padStart(s,"0");if(o)return(({pattern:e,frame:t,ext:r})=>e.replace(/\[frame\]/g,t).replace(/\[ext\]/g,r))({pattern:o,frame:l,ext:r});if("actual-frames"===i||"from-zero"===i)return`element-${l}.${r}`;throw TypeError("Unknown count type")})({frame:T,imageFormat:d,index:D,countType:v,lastFrame:f,totalFrames:b.length,imageSequencePattern:I})),jpegQuality:h,width:t,scale:g,wantsBuffer:!!c,timeoutInMilliseconds:l}),ap({frame:T,freePage:P,timeoutInMilliseconds:l})]);if(c&&!j){if(!z)throw Error("unexpected null buffer");c(z,T)}let V=y.filter(ew),H=V.map(e=>e.audioAndVideoAssets).flat(2),W=V.map(e=>e.artifactAssets).flat(2),q=af(U),Z=ah({assets:U,frameBuffer:z});for(let e of Z){for(let t of W)if(e.filename===t.filename)return Promise.reject(Error(`An artifact with output "${e.filename}" was already registered at frame ${t.frame}, but now registered again at frame ${e.frame}. Artifacts must have unique names. https://remotion.dev/docs/artifacts`));x?.(e)}let K=q.map(e=>((e,t)=>{if(t.src.length<400)return t;let r=e.find(e=>e.src===t.src);return r?{...t,src:`same-as-${r.id}-${r.frame}`}:t})(H,e)),Q=U.filter(e=>"inline-audio"===e.type);for(let e of(y.push({audioAndVideoAssets:K,frame:T,artifactAssets:Z.map(e=>({frame:e.frame,filename:e.filename})),inlineAudioAssets:Q}),K))r$({renderAsset:e,onDownload:w,downloadMap:S,indent:o,logLevel:s,binariesDirectory:k,cancelSignalForAudioAnalysis:C,shouldAnalyzeAudioImmediately:!0}).catch(t=>{let r=e.src.substring(0,1e3)+(e.src.length>1e3?"...":"");p(Error(`Error while downloading ${r}: ${t.stack}`))});for(let e of Q)S.inlineAudioMixing.addAsset({asset:e,fps:A,totalNumberOfFrames:F.length,firstFrame:F[0],trimLeftOffset:O,trimRightOffset:M});B(),P.off("error",L),j||(E.count++,_?.(E.count,T,performance.now()-R))},ay=async({retriesLeft:e,attempt:t,assets:r,imageFormat:i,binariesDirectory:a,cancelSignal:n,composition:o,countType:s,downloadMap:l,frameDir:u,framesToRender:c,jpegQuality:d,onArtifact:p,onDownload:f,onError:h,outputDir:m,poolPromise:g,scale:v,stoppedSignal:y,timeoutInMilliseconds:b,indent:x,logLevel:w,makeBrowser:S,makeNewPage:k,browserReplacer:C,concurrencyOrFramesToRender:E,framesRenderedObj:_,lastFrame:T,onFrameBuffer:P,onFrameUpdate:I,nextFrameToRender:A,imageSequencePattern:O,trimLeftOffset:M,trimRightOffset:F,allFramesAndExtraFrames:R})=>{let D=await g;if(y.stopped)return;let j=await D.acquire(),L=A.getNextFrame(j.pageIndex);try{await Promise.race([(({attempt:e,binariesDirectory:t,cancelSignal:r,imageFormat:i,indent:a,logLevel:n,assets:o,countType:s,downloadMap:l,frameDir:u,framesToRender:c,jpegQuality:d,onArtifact:p,onDownload:f,scale:h,composition:m,onError:g,outputDir:v,stoppedSignal:y,timeoutInMilliseconds:b,lastFrame:x,onFrameBuffer:w,onFrameUpdate:S,framesRenderedObj:k,frame:C,page:E,imageSequencePattern:_,trimLeftOffset:T,trimRightOffset:P,allFramesAndExtraFrames:I})=>new Promise((A,O)=>{av({reject:O,width:m.width,height:m.height,compId:m.id,attempt:e,indent:a,logLevel:n,stoppedSignal:y,timeoutInMilliseconds:b,imageFormat:i,onFrameBuffer:w,outputDir:v,assets:o,binariesDirectory:t,cancelSignal:r,countType:s,downloadMap:l,frameDir:u,framesToRender:c,jpegQuality:d,lastFrame:x,onArtifact:p,onDownload:f,onError:g,scale:h,framesRenderedObj:k,onFrameUpdate:S,frame:C,page:E,imageSequencePattern:_,fps:m.fps,trimLeftOffset:T,trimRightOffset:P,allFramesAndExtraFrames:I}).then(()=>{A()}).catch(e=>{O(e)})}))({trimLeftOffset:M,trimRightOffset:F,allFramesAndExtraFrames:R,attempt:t,assets:r,binariesDirectory:a,cancelSignal:n,countType:s,downloadMap:l,frameDir:u,framesToRender:c,imageFormat:i,indent:x,jpegQuality:d,logLevel:w,onArtifact:p,onDownload:f,scale:v,composition:o,framesRenderedObj:_,lastFrame:T,onError:h,onFrameBuffer:P,onFrameUpdate:I,outputDir:m,stoppedSignal:y,timeoutInMilliseconds:b,nextFrameToRender:A,frame:L,page:j,imageSequencePattern:O}),new Promise((e,t)=>{n?.(()=>{t(Error(as))})})]),D.release(j)}catch($){let D=ts($),B=$.stack?.includes(U.NoReactInternals.DELAY_RENDER_RETRY_TOKEN),N=$?.message?.includes("ERR_CONNECTION_REFUSED")||$?.message?.includes("ERR_CONNECTION_RESET")||$?.message?.includes("ERR_CONNECTION_TIMED_OUT")||$?.message?.includes("ERR_INTERNET_DISCONNECTED")||$?.message?.includes("ERR_NAME_RESOLUTION_FAILED")||$?.message?.includes("ERR_ADDRESS_UNREACHABLE")||$?.message?.includes("ERR_NETWORK_CHANGED");if("object"==typeof $&&null!==$&&"message"in $&&"string"==typeof $.message&&($.message.includes(ao)||$.message.includes(as)||$.message.includes(al)||$.message.includes(au))&&!B||!D&&!B&&!N)throw $;if(y.stopped)return;if(0===e)throw ek.warn({indent:x,logLevel:w},`The browser crashed ${t} times while rendering frame ${L}. Not retrying anymore. Learn more about this error under https://www.remotion.dev/docs/target-closed`),$;if(B){let e=await g,D=await k(L,j.pageIndex);e.release(D),ek.warn({indent:x,logLevel:w},`delayRender() timed out while rendering frame ${L}: ${$.message}`);let B=(e=>{if(!e)throw Error("Expected stack");let{stack:t}=e;if(!t)throw Error("Expected stack: "+JSON.stringify(e));let r=t.indexOf(U.NoReactInternals.DELAY_RENDER_ATTEMPT_TOKEN);if(-1===r)throw Error("Expected to find attempt token in stack");let i=t.indexOf(U.NoReactInternals.DELAY_RENDER_RETRY_TOKEN);if(-1===i)throw Error("Expected to find retry token in stack");let a=Number(t.substring(r+U.NoReactInternals.DELAY_RENDER_ATTEMPT_TOKEN.length,i));if(Number.isNaN(a))throw Error(`Expected to find a number in the stack ${t}`);return a})($);return A.returnFrame(L),ay({retriesLeft:B,attempt:t+1,assets:r,imageFormat:i,binariesDirectory:a,cancelSignal:n,composition:o,countType:s,downloadMap:l,frameDir:u,framesToRender:c,indent:x,jpegQuality:d,logLevel:w,onArtifact:p,onDownload:f,onError:h,outputDir:m,poolPromise:g,scale:v,stoppedSignal:y,timeoutInMilliseconds:b,makeBrowser:S,makeNewPage:k,browserReplacer:C,concurrencyOrFramesToRender:E,framesRenderedObj:_,lastFrame:T,onFrameBuffer:P,onFrameUpdate:I,nextFrameToRender:A,imageSequencePattern:O,trimLeftOffset:M,trimRightOffset:F,allFramesAndExtraFrames:R})}ek.warn({indent:x,logLevel:w},`The browser crashed while rendering frame ${L}, retrying ${e} more times. Learn more about this error under https://www.remotion.dev/docs/target-closed`),await C.replaceBrowser(S,async()=>{let e=Array(E).fill(!0).map((e,t)=>k(L,t)),t=await Promise.all(e),r=await g;for(let e of t)r.release(e)}),A.returnFrame(L),await ay({retriesLeft:e-1,attempt:t+1,assets:r,binariesDirectory:a,cancelSignal:n,composition:o,countType:s,downloadMap:l,frameDir:u,framesToRender:c,imageFormat:i,indent:x,jpegQuality:d,logLevel:w,onArtifact:p,makeBrowser:S,onDownload:f,onError:h,outputDir:m,poolPromise:g,scale:v,stoppedSignal:y,timeoutInMilliseconds:b,browserReplacer:C,makeNewPage:k,concurrencyOrFramesToRender:E,framesRenderedObj:_,lastFrame:T,onFrameBuffer:P,onFrameUpdate:I,nextFrameToRender:A,imageSequencePattern:O,trimLeftOffset:M,trimRightOffset:F,allFramesAndExtraFrames:R})}},ab=U.NoReactInternals.validateFps,ax=U.NoReactInternals.validateDimension,aw=U.NoReactInternals.validateDurationInFrames,aS=e=>{if(void 0!==e){if("number"!=typeof e)throw Error('Scale should be a number or undefined, but is "'+JSON.stringify(e)+'"');if(Number.isNaN(e))throw Error("`scale` should not be NaN, but is NaN");if(!Number.isFinite(e))throw Error(`"scale" must be finite, but is ${e}`);if(e<=0)throw Error(`"scale" must be bigger than 0, but is ${e}`);if(e>16)throw Error(`"scale" must be smaller or equal than 16, but is ${e}`)}},ak=async({onFrameUpdate:e,outputDir:t,onStart:r,serializedInputPropsWithCustomSchema:i,serializedResolvedPropsWithCustomSchema:a,jpegQuality:n,imageFormat:o,frameRange:s,onError:l,envVariables:u,onBrowserLog:c,onFrameBuffer:d,onDownload:p,pagesArray:f,serveUrl:h,composition:m,timeoutInMilliseconds:g,scale:v,resolvedConcurrency:y,everyNthFrame:b,proxyPort:x,cancelSignal:w,downloadMap:S,muted:k,makeBrowser:C,browserReplacer:E,sourceMapGetter:_,logLevel:T,indent:P,parallelEncodingEnabled:I,compositionStart:A,forSeamlessAacConcatenation:O,onArtifact:M,binariesDirectory:F,imageSequencePattern:j,mediaCacheSizeInBytes:L,onLog:B,darkMode:N})=>{t&&!R.default.existsSync(t)&&R.default.mkdirSync(t,{recursive:!0});let $=iB(m.durationInFrames,s),{extraFramesToCaptureAssetsBackend:z,extraFramesToCaptureAssetsFrontend:U,chunkLengthInSeconds:V,trimLeftOffset:H,trimRightOffset:W}=(({compositionStart:e,realFrameRange:t,fps:r,forSeamlessAacConcatenation:i})=>{if(!i)return{extraFramesToCaptureAssetsBackend:[],extraFramesToCaptureAssetsFrontend:[],chunkLengthInSeconds:(t[1]-t[0]+1)/r,trimLeftOffset:0,trimRightOffset:0};let a=t[0];if(a<e)throw Error("chunkStart may not be below compositionStart");let n=a-e;if(n<0)throw Error("chunkStat - compositionStart may not be below 0");let o=n+(t[1]-t[0]+1),s=Math.max(0,at(n/r)-.042666666666666665),l=at(o/r)+.042666666666666665,u=Math.floor(s*r),c=u+e,d=Math.ceil(l*r)+e,p=Array(t[0]-c).fill(!0).map((e,t)=>t+c),f=Array(d-t[1]-1).fill(!0).map((e,r)=>r+t[1]+1),h=(l*r-Math.ceil(l*r))/r;return{extraFramesToCaptureAssetsFrontend:p,extraFramesToCaptureAssetsBackend:f,chunkLengthInSeconds:l-s,trimLeftOffset:(s*r-u)/r,trimRightOffset:h}})({fps:m.fps,compositionStart:A,realFrameRange:$,forSeamlessAacConcatenation:O}),q=iD($,b),G=q[q.length-1],Z=Math.min(q.length,y),K=(e,t)=>ac({context:_,initialFrame:e,browserReplacer:E,indent:P,logLevel:T,onBrowserLog:c,pagesArray:f,scale:v,composition:m,envVariables:u,imageFormat:o,muted:k,proxyPort:x,serializedInputPropsWithCustomSchema:i,serializedResolvedPropsWithCustomSchema:a,serveUrl:h,timeoutInMilliseconds:g,pageIndex:t,isMainTab:0===t,mediaCacheSizeInBytes:L,onLog:B,darkMode:N}),Q=async()=>{let e=Array(Z).fill(!0).map((e,t)=>K(q[t],t));return new ad(await Promise.all(e))},X=1===b?"actual-frames":"from-zero",J=aa({lastFrame:G,totalFrames:q.length,countType:X}),Y={count:0},ee=Q();r?.({frameCount:q.length,parallelEncoding:I,resolvedConcurrency:y});let et=[],er={stopped:!1};w?.(()=>{er.stopped=!0});let ei=t??S.compositingDir,ea=[...U,...q,...z],en=tR();en&&ek.info({indent:P,logLevel:T},"Experimental: Using partitioned rendering (https://github.com/remotion-dev/remotion/pull/4830)");let eo=en?(({allFramesAndExtraFrames:e,concurrencyOrFramesToRender:t})=>{let r=(({frames:e,concurrency:t})=>{let r=[],i=0;for(let a=0;a<t;a++){let n=i+Math.ceil((e.length-i)/(t-a));r.push(e.slice(i,n)),i=n}return{partitions:r,getNextFrame:e=>{if(0===r[e].length){if(r.map(e=>e.length).every(e=>0===e))throw Error("No more frames to render");let t=-1;for(let e=0;e<r.length;e++){if(-1===t){t=e;continue}r[e].length>r[t].length&&(t=e)}if(-1===t)throw Error("No more frames to render");let i=Math.ceil(r[t].length/2)-1;r[e]=r[t].slice(i),r[t]=r[t].slice(0,i)}let t=r[e].shift();if(void 0===t)throw Error("No more frames to render");return t}}})({frames:e,concurrency:t});return{getNextFrame:e=>r.getNextFrame(e),returnFrame:()=>{throw Error("retrying failed frames for partitioned rendering is not supported. Disable partitioned rendering.")}}})({allFramesAndExtraFrames:ea,concurrencyOrFramesToRender:Z}):(({allFramesAndExtraFrames:e,concurrencyOrFramesToRender:t})=>{let r=new Map;return{getNextFrame:t=>{let i=e.find(e=>!r.has(e));if(void 0===i)throw Error("No more frames to render");return r.set(i,!0),i},returnFrame:e=>{r.delete(e)}}})({allFramesAndExtraFrames:ea,concurrencyOrFramesToRender:Z}),es=j||"element-[frame].[ext]",el=es.replace(/\[frame\]/g,`%0${J}d`).replace(/\[ext\]/g,o);await Promise.all(ea.map(()=>ay({retriesLeft:1,attempt:1,assets:et,binariesDirectory:F,cancelSignal:w,composition:m,countType:X,downloadMap:S,frameDir:ei,framesToRender:q,imageFormat:o,indent:P,jpegQuality:n,logLevel:T,onArtifact:M,onDownload:p,onError:l,outputDir:t,poolPromise:ee,scale:v,stoppedSignal:er,timeoutInMilliseconds:g,makeBrowser:C,browserReplacer:E,concurrencyOrFramesToRender:Z,framesRenderedObj:Y,lastFrame:G,makeNewPage:K,onFrameBuffer:d,onFrameUpdate:e,nextFrameToRender:eo,imageSequencePattern:es,trimLeftOffset:H,trimRightOffset:W,allFramesAndExtraFrames:ea})));let eu="from-zero"===X?0:q[0];return await Promise.all([]),{assetsInfo:{assets:et.sort((e,t)=>e.frame-t.frame),imageSequenceName:D.default.join(ei,el),firstFrameIndex:eu,downloadMap:S,trimLeftOffset:H,trimRightOffset:W,chunkLengthInSeconds:V,forSeamlessAacConcatenation:O},frameCount:q.length}},aC=iO(({browserExecutable:e,cancelSignal:t,chromiumOptions:r,composition:i,concurrency:a,envVariables:n,everyNthFrame:o,frameRange:s,imageFormat:l,indent:u,jpegQuality:c,muted:d,onBrowserLog:p,onDownload:f,onFrameBuffer:h,onFrameUpdate:m,onStart:g,outputDir:v,port:y,puppeteerInstance:b,scale:x,server:w,timeoutInMilliseconds:S,logLevel:k,webpackBundleOrServeUrl:C,serializedInputPropsWithCustomSchema:E,serializedResolvedPropsWithCustomSchema:_,offthreadVideoCacheSizeInBytes:T,parallelEncodingEnabled:P,binariesDirectory:I,forSeamlessAacConcatenation:A,compositionStart:O,onBrowserDownload:M,onArtifact:F,chromeMode:R,offthreadVideoThreads:D,imageSequencePattern:j,mediaCacheSizeInBytes:L,onLog:B})=>{ax(i.height,"height","in the `config` object passed to `renderFrames()`"),ax(i.width,"width","in the `config` object passed to `renderFrames()`"),ab(i.fps,"in the `config` object of `renderFrames()`",!1),aw(i.durationInFrames,{component:"in the `config` object passed to `renderFrames()`",allowFloats:!1}),iV(c),aS(x);let N=()=>rv({browser:eA,browserExecutable:e,chromiumOptions:r,forceDeviceScaleFactor:x,indent:u,viewport:null,logLevel:k,onBrowserDownload:M,chromeMode:R}),$=b??N(),z=iR(a),U=[];return new Promise((e,a)=>{let V=[],H=e=>{a(e)};Promise.race([new Promise((e,r)=>{t?.(()=>{r(Error(as))})}),Promise.all([iy(w,{webpackConfigOrServeUrl:C,port:y,remotionRoot:ed(),offthreadVideoThreads:D??2,logLevel:k,indent:u,offthreadVideoCacheSizeInBytes:T,binariesDirectory:I,forceIPv4:!1},{onDownload:f}),$]).then(([{server:e,cleanupServer:a},y])=>{let b,w,C,{serveUrl:T,offthreadPort:$,sourceMap:W,downloadMap:q}=e,G=(b=y,w=[],C=!1,{getBrowser:()=>b,replaceBrowser:async(e,t)=>{if(C)return new Promise((e,t)=>{w.push({resolve:e,reject:t})});try{C=!0,await b.close({silent:!0}).then(()=>{ek.info({indent:u,logLevel:k},"Killed previous browser and making new one")}).catch(()=>{});let r=await e();return b=r,await t(),w.forEach(e=>e.resolve(r)),ek.info({indent:u,logLevel:k},"Made new browser"),r}catch(e){throw w.forEach(t=>t.reject(e)),e}finally{C=!1}}}),Z=(({puppeteerInstance:e,concurrency:t,logLevel:r,indent:i})=>{if(t<=1)return{stopCycling:()=>{}};let a=null,n=0,o=!1,s=()=>{a=setTimeout(()=>{e.getBrowser().pages().then(e=>{if(0===e.length)return;let t=e[n%e.length];if(n++,!t?.closed&&!o&&t?.url()!=="about:blank")return t.bringToFront()}).catch(e=>ek.error({indent:i,logLevel:r},e)).finally(()=>{o||s()})},200)};return s(),{stopCycling:()=>{if(a)return o=!0,clearTimeout(a)}}})({puppeteerInstance:G,concurrency:z,logLevel:k,indent:u});return V.push(()=>(Z.stopCycling(),Promise.resolve())),V.push(()=>a(!1)),ak({onError:H,pagesArray:U,serveUrl:T,composition:i,resolvedConcurrency:z,onDownload:f,proxyPort:$,makeBrowser:N,browserReplacer:G,sourceMapGetter:W,downloadMap:q,cancelSignal:t,envVariables:n,everyNthFrame:o,frameRange:s,imageFormat:l,jpegQuality:c,muted:d,onBrowserLog:p,onFrameBuffer:h,onFrameUpdate:m,onStart:g,outputDir:v,scale:x,timeoutInMilliseconds:S,logLevel:k,indent:u,serializedInputPropsWithCustomSchema:E,serializedResolvedPropsWithCustomSchema:_,parallelEncodingEnabled:P,binariesDirectory:I,forSeamlessAacConcatenation:A,compositionStart:O,onBrowserDownload:M,onArtifact:F,chromeMode:R,offthreadVideoThreads:D,imageSequencePattern:j,mediaCacheSizeInBytes:L,onLog:B,darkMode:r.darkMode??!1})})]).then(t=>(w?.compositor.executeCommand("CloseAllVideos",{}).then(()=>{ek.verbose({indent:u,logLevel:k,tag:"compositor"},"Freed memory from compositor")}).catch(e=>{ek.verbose({indent:u,logLevel:k},"Could not close compositor",e)}),e(t))).catch(e=>a(e)).finally(()=>{b?Promise.all(U.map(e=>e.close())).catch(e=>{ts(e)||ek.error({indent:u,logLevel:k},"Unable to close browser tab",e)}):Promise.resolve($).then(e=>e.close({silent:!0})).catch(e=>{e?.message.includes("Target closed")||ek.error({indent:u,logLevel:k},"Unable to close browser",e)}),V.forEach(e=>{e()})})})}),aE={h264:18,h265:23,vp8:9,vp9:28,prores:null,gif:null,"h264-mkv":18,"h264-ts":18,aac:null,mp3:null,wav:null},a_={h264:[1,51],h265:[0,51],vp8:[4,63],vp9:[0,63],prores:[0,0],gif:[0,0],"h264-mkv":[1,51],"h264-ts":[1,51],aac:[0,0],mp3:[0,0],wav:[0,0]},aT=({codec:e,crf:t,videoBitrate:r,encodingMaxRate:i,encodingBufferSize:a,hardwareAcceleration:n})=>{if(t&&r)throw Error('"crf" and "videoBitrate" can not both be set. Choose one of either.');if(t&&"required"===n)throw Error('"crf" option is not supported with hardware acceleration');if(i&&!a)throw Error('"encodingMaxRate" can not be set without also setting "encodingBufferSize".');let o=a?["-bufsize",a]:[],s=i?["-maxrate",i]:[];if(r)return"prores"===e?(console.warn("ProRes does not support videoBitrate. Ignoring."),[]):tM(e)?(console.warn(`${e} does not support videoBitrate. Ignoring.`),[]):["-b:v",r,...o,...s];if(null==t){let t=(e=>{let t=aE[e];if(void 0===t)throw TypeError(`Got unexpected codec "${e}"`);return t})(e);return null===t?[...o,...s]:["-crf",String(t),...o,...s]}if("number"!=typeof t)throw TypeError("Expected CRF to be a number, but is "+JSON.stringify(t));let l=(e=>{let t=a_[e];if(void 0===t)throw TypeError(`Got unexpected codec "${e}"`);return t})(e);if(0===t&&("h264"===e||"h264-mkv"===e||"h264-ts"===e))throw TypeError("Setting the CRF to 0 with a H264 codec is not supported anymore because of it's inconsistencies between platforms. Videos with CRF 0 cannot be played on iOS/macOS. 0 is a extreme value with inefficient settings which you probably do not want. Set CRF to a higher value to fix this error.");if(t<l[0]||t>l[1]){if(0===l[0]&&0===l[1])throw TypeError(`The "${e}" codec does not support the --crf option.`);throw TypeError(`CRF must be between ${l[0]} and ${l[1]} for codec ${e}. Passed: ${t}`)}return"prores"===e?(console.warn('ProRes does not support the "crf" option. Ignoring.'),[]):tM(e)?(console.warn(`${e} does not support the "crf" option. Ignoring.`),[]):["-crf",String(t),...o,...s]},aP={"h264-mkv":{audio:!0,video:!0},aac:{audio:!0,video:!1},gif:{video:!0,audio:!1},h264:{video:!0,audio:!0},"h264-ts":{video:!0,audio:!0},h265:{video:!0,audio:!0},mp3:{audio:!0,video:!1},prores:{audio:!0,video:!0},vp8:{audio:!0,video:!0},vp9:{audio:!0,video:!0},wav:{audio:!0,video:!1}},aI=e=>aP[e];U.NoReactInternals.ENABLE_V5_BREAKING_CHANGES;var aA=U.NoReactInternals.ENABLE_V5_BREAKING_CHANGES?"bt709":"default",aO=["ultrafast","superfast","veryfast","faster","fast","medium","slow","slower","veryslow","placebo"],aM=({hasPreencoded:e,proResProfileName:t,pixelFormat:r,x264Preset:i,codec:a,crf:n,videoBitrate:o,encodingMaxRate:s,encodingBufferSize:l,colorSpace:u,hardwareAcceleration:c,indent:d,logLevel:p})=>{let f=(({codec:e,encodingMaxRate:t,encodingBufferSize:r,crf:i,hardwareAcceleration:a,logLevel:n,indent:o})=>{let s="required"===a||"if-possible"===a,l=(({encodingMaxRate:e,encodingBufferSize:t,crf:r})=>null!==t?"encodingBufferSize":null!==e?"encodingMaxRate":null!=r?"crf":null)({encodingMaxRate:t,encodingBufferSize:r,crf:i});if("required"===a&&l)throw Error(`When using hardware accelerated encoding, the option "${l}" with hardware acceleration is not supported. Disable hardware accelerated encoding or use "if-possible" instead.`);let u=()=>{"if-possible"===a&&l&&ek.warn({indent:o,logLevel:n},`${o?"":`
`}Hardware accelerated encoding disabled - "${l}" option is not supported with hardware acceleration`)};if("prores"===e)return s&&"darwin"===process.platform&&!l?{encoderName:"prores_videotoolbox",hardwareAccelerated:!0}:(u(),{encoderName:"prores_ks",hardwareAccelerated:!1});if("h264"===e)return s&&"darwin"===process.platform&&!l?{encoderName:"h264_videotoolbox",hardwareAccelerated:!0}:(u(),{encoderName:"libx264",hardwareAccelerated:!1});if("h265"===e)return s&&"darwin"===process.platform&&!l?{encoderName:"hevc_videotoolbox",hardwareAccelerated:!0}:(u(),{encoderName:"libx265",hardwareAccelerated:!1});if("vp8"===e)return{encoderName:"libvpx",hardwareAccelerated:!1};if("vp9"===e)return{encoderName:"libvpx-vp9",hardwareAccelerated:!1};if("gif"===e)return{encoderName:"gif",hardwareAccelerated:!1};if("mp3"===e||"aac"===e||"wav"===e)return null;if("h264-mkv"===e||"h264-ts"===e)return{encoderName:"libx264",hardwareAccelerated:!1};throw Error(`Could not get codec for ${e}`)})({codec:a,encodingMaxRate:s,encodingBufferSize:l,crf:n,hardwareAcceleration:c,indent:d,logLevel:p});if(null===f)throw TypeError(`encoderSettings is null: ${JSON.stringify(a)} (hwaccel = ${c})`);let{encoderName:h,hardwareAccelerated:m}=f;if(!m&&"required"===c)throw Error(`Codec ${a} does not support hardware acceleration on ${process.platform}, but "hardwareAcceleration" is set to "required"`);ek.verbose({indent:d,logLevel:p,tag:"stitchFramesToVideo()"},`Encoder: ${h}, hardware accelerated: ${m}`);let g=u??aA,v="bt709"===g?[["-colorspace:v","bt709"],["-color_primaries:v","bt709"],["-color_trc:v","bt709"],["-color_range","tv"],e?[]:["-vf","zscale=matrix=709:matrixin=709:range=limited"]]:"bt2020-ncl"===g?[["-colorspace:v","bt2020nc"],["-color_primaries:v","bt2020"],["-color_trc:v","arib-std-b67"],["-color_range","tv"],e?[]:["-vf","zscale=matrix=2020_ncl:matrixin=2020_ncl:range=limited"]]:[];return[["-c:v",e?"copy":h],"h264-ts"===a?["-f","mpegts"]:null,...v,...(({hasPreencoded:e,proResProfileName:t,pixelFormat:r,x264Preset:i,codec:a,crf:n,videoBitrate:o,encodingMaxRate:s,encodingBufferSize:l,hardwareAcceleration:u})=>e||"gif"===a?[]:[t?["-profile:v",t]:null,["-pix_fmt",r],"yuva420p"===r?["-auto-alt-ref","0"]:null,i?["-preset",i]:null,["-video_track_timescale","90000"],aT({crf:n,videoBitrate:o,codec:a,encodingMaxRate:s,encodingBufferSize:l,hardwareAcceleration:u})].filter(ew))({codec:a,crf:n,hasPreencoded:e,pixelFormat:r,proResProfileName:t,videoBitrate:o,encodingMaxRate:s,encodingBufferSize:l,x264Preset:i,hardwareAcceleration:c})].filter(ew)},aF=(e,t)=>{if("prores"!==e)return null;switch(t){case"4444-xq":return"5";case"4444":return"4";case"hq":default:return"3";case"standard":return"2";case"light":return"1";case"proxy":return"0"}},aR=({width:e,height:t,codec:r,scale:i,wantsImageSequence:a,indent:n,logLevel:o})=>{if(a||"h264-mkv"!==r&&"h264"!==r&&"h265"!==r&&"h264-ts"!==r)return{actualWidth:e,actualHeight:t};let s=t;for(;Math.round(s*i)%2!=0;)s--;let l=e;for(;Math.round(l*i)%2!=0;)l--;return l!==e&&ek.verbose({indent:n,logLevel:o},`Rounding width to an even number from ${e} to ${l}`),s!==t&&ek.verbose({indent:n,logLevel:o},`Rounding height to an even number from ${t} to ${s}`),{actualWidth:l,actualHeight:s}},aD=({codec:e,proResProfile:t})=>{if(void 0!==t&&"prores"!==e)throw TypeError(`You have set a ProRes profile but the codec is "${e}". Set the codec to "prores" or remove the ProRes profile.`);if(void 0!==t&&!U.NoReactInternals.proResProfileOptions.includes(t))throw TypeError(`The ProRes profile "${t}" is not valid. Valid options are ${U.NoReactInternals.proResProfileOptions.map(e=>`"${e}"`).join(", ")}`)},aj=e=>null===e?"0":0===e?"-1":String(e),aL=e=>{if(!e.startsWith("file:"))return e;let{protocol:t}=new URL(e);if("file:"===t)return H.default.fileURLToPath(e);throw TypeError(`Unexpected src ${e}`)},aB=e=>{if("number"==typeof e)return e;if(0===e.length)throw TypeError("Volume array must have at least 1 number");return 1===new Set(e).size?e[0]:e},aN=(e,t)=>{let r=t.src.match(/same-as-(.*)-([0-9.]+)$/);if(!r)return t;let[,i,a]=r,n=e.find(e=>e.id===i&&String(e.frame)===a);if(!n)throw console.log("List of assets:"),console.log(e),TypeError("Cannot uncompress asset, asset list seems corrupt. Please file a bug in the Remotion repo with the debug information above.");return{...t,src:n.src}},a$=(e,t)=>e.id===t.id,az=(e,t)=>{let r=e.findIndex(e=>a$(e,t));return -1!==r&&(e.splice(r,1),!0)},aU=e=>{let t=af(e),r=[];for(let e of t)r.find(t=>t.id===e.id)||r.push(e);return r},aV=async({assets:e,onDownload:t,downloadMap:r,indent:i,logLevel:a,binariesDirectory:n})=>{let o=e.reduce((e,t,r)=>r%1e3==0?[...e,[t]]:[...e.slice(0,-1),[...e.slice(-1)[0],t]],[]),s=[];for(let e of o){let o=e.map(e=>Promise.all(e.audioAndVideoAssets.map(e=>r$({renderAsset:e,onDownload:t,downloadMap:r,indent:i,logLevel:a,binariesDirectory:n,cancelSignalForAudioAnalysis:void 0,shouldAnalyzeAudioImmediately:!0})))),l=await Promise.all(o);s.push(l)}return s.flat(1)},aH=async({audioCodec:e,outName:t,binariesDirectory:r,indent:i,logLevel:a,audioBitrate:n,cancelSignal:o,inName:s,onProgress:l,chunkLengthInSeconds:u,fps:c})=>{if("pcm-16"===e)return(0,R.cpSync)(s,t),l(1);let d=tO({bin:"ffmpeg",args:[["-hide_banner"],["-i",s],["-c:a",i4(e)],"aac"===e?["-f","adts"]:null,e?["-b:a",n||"320k"]:null,"aac"===e?"-cutoff":null,"aac"===e?"18000":null,["-y",t]].filter(ew).flat(2),indent:i,logLevel:a,binariesDirectory:r,cancelSignal:o});d.stderr?.on("data",e=>{let t=ae(e.toString("utf8"),c);void 0!==t&&l(t/(u*c))}),await d},aW="outputaudio",aq=async(e,t)=>{let r=Math.random().toString().replace(".",""),i=D.default.join(t.complexFilter,"complex-filter-"+r+".txt");return(0,R.existsSync)(t.complexFilter)||R.default.mkdirSync(t.complexFilter,{recursive:!0}),await R.default.promises.writeFile(i,e),{file:i,cleanup:()=>{R.default.unlinkSync(i)}}},aG=async({filters:e,downloadMap:t})=>{if(0===e.length)return{complexFilterFlag:null,cleanup:()=>{},complexFilter:null};let r=(({inputs:e})=>[...e.map((e,t)=>{let r=[e.filter.pad_start?e.filter.pad_start:null,e.filter.pad_end?e.filter.pad_end:null,"acopy"];return`[${t}:a]${r.filter(ew).join(",")}[padded${t}]`}),`${Array(e.length).fill(!0).map((e,t)=>`[padded${t}]`).join("")}amix=inputs=${e.length}:dropout_transition=0:normalize=0[${aW}]`].join(";"))({inputs:e}),{file:i,cleanup:a}=await aq(r,t);return{complexFilterFlag:["-filter_complex_script",i],cleanup:a,complexFilter:r}},aZ=async({outName:e,indent:t,logLevel:r,binariesDirectory:i,cancelSignal:a,chunkLengthInSeconds:n})=>{await tO({bin:"ffmpeg",args:["-f","lavfi","-i","anullsrc=r=48000","-c:a","pcm_s16le","-t",String(n),"-ar",String(48e3),e],indent:t,logLevel:r,binariesDirectory:i,cancelSignal:a})},aK=async({outName:e,files:t,downloadMap:r,remotionRoot:i,indent:a,logLevel:n,binariesDirectory:o,cancelSignal:s,onProgress:l,fps:u,chunkLengthInSeconds:c})=>{if(0===t.length){await aZ({outName:e,chunkLengthInSeconds:c,indent:a,logLevel:n,binariesDirectory:o,cancelSignal:s}),l(1);return}if(t.length>=32){let d=t.reduce((e,t,r)=>r%10==0?[...e,[t]]:[...e.slice(0,-1),[...e.slice(-1)[0],t]],[]),p=rq("remotion-large-audio-mixing");try{let t=Array(d.length).fill(0),f=0,h=()=>{let e=t.reduce((e,t)=>e+t,0)/d.length,r=.8*e+.2*f;l(r)},m=await Promise.all(d.map(async(e,l)=>{let d=D.default.join(p,`chunk-${l}.wav`);return await aX({files:e,chunkLengthInSeconds:c,outName:d,downloadMap:r,remotionRoot:i,indent:a,logLevel:n,binariesDirectory:o,cancelSignal:s,onProgress:e=>{t[l]=e,h()},fps:u}),d}));await aX({files:m.map(e=>({filter:{pad_end:null,pad_start:null},outName:e})),outName:e,downloadMap:r,remotionRoot:i,indent:a,logLevel:n,binariesDirectory:o,cancelSignal:s,onProgress:e=>{f=e,h()},fps:u,chunkLengthInSeconds:c});return}finally{tg(p)}}let{complexFilterFlag:d,cleanup:p,complexFilter:f}=await aG({filters:t,downloadMap:r}),h=[["-hide_banner"],...t.map(e=>["-i",e.outName]),d,["-c:a","pcm_s16le"],["-map",`[${aW}]`],["-y",e]].filter(ew).flat(2);ek.verbose({indent:a,logLevel:n},"Merging audio tracks","Command:",`ffmpeg ${h.join(" ")}`,"Complex filter script:",f);let m=tO({bin:"ffmpeg",args:h,indent:a,logLevel:n,binariesDirectory:o,cancelSignal:s});m.stderr?.on("data",e=>{let t=ae(e.toString("utf8"),u);void 0!==t&&l(t/(c*u))}),await m,l(1),p()},aQ=rE(3),aX=e=>aQ(aK,e),aJ=e=>1===e?null:e>=.5&&e<=2?`atempo=${e.toFixed(5)}`:`${aJ(Math.sqrt(e))},${aJ(Math.sqrt(e))}`,aY=({arr:e,delay:t,fps:r})=>{let i,a,n;if(0===e.length)throw Error("Volume array expression should never have length 0");if(1===e.length)return String(e[0][0]);let[o,...s]=e,[l,u]=o;return i=(({frames:e,trimLeft:t,fps:r})=>{let i=[];for(let t=0;t<e.length;t++){let r=e[t-1],a=e[t];(void 0===r||a!==r+1)&&i.push([]),i[i.length-1].push(a)}return i.map(e=>{let i=e[0],a=e[e.length-1];return`between(t,${((i-.5)/r+t).toFixed(4)},${((a+.5)/r+t).toFixed(4)})`}).join("+")})({frames:u,trimLeft:t,fps:r}),a=String(l),n=aY({arr:s,delay:t,fps:r}),`if(${i},${a},${n})`},a0=({volume:e,fps:t,trimLeft:r})=>{if("number"==typeof e)return{eval:"once",value:String(e)};if(1==[...new Set(e)].length)return a0({volume:e[0],fps:t,trimLeft:r});let i=[...e,e[e.length-1]],a={};i.forEach((e,t)=>{let r=Number((Math.round(97*e)/97).toFixed(3));a[r]||(a[r]=[]),a[r].push(t)});let n=aY({arr:Object.keys(a).map(e=>[Number(e),a[e]]).sort((e,t)=>e[1].length-t[1].length),delay:r,fps:t});return{eval:"frame",value:`'${n}'`}},a1=({fps:e,trimLeftOffset:t,seamless:r,assetDuration:i,audioStartFrame:a,trimLeft:n,playbackRate:o})=>{let s=n-a;if(!r)return{trimLeft:a/e+s/e*o+t,maxTrim:i};if(r)return{trimLeft:a/e/o+s/e+t,maxTrim:i?i/o:null};throw Error("This should never happen")},a2=e=>{var t;let r=(t=1e6*e)%1<1e-7?Math.floor(t):t%1>.9999999?Math.ceil(t):t,i=`${r}us`;return i.includes("e-")?"0us":i},a4=async({outName:e,asset:t,fps:r,downloadMap:i,indent:a,logLevel:n,binariesDirectory:o,cancelSignal:s,onProgress:l,chunkLengthInSeconds:u,trimLeftOffset:c,trimRightOffset:d,forSeamlessAacConcatenation:p,audioStreamIndex:f})=>{let{channels:h,duration:m,startTime:g}=await rI({downloadMap:i,src:aL(t.src),indent:a,logLevel:n,binariesDirectory:o,cancelSignal:s,audioStreamIndex:f}),v=(({channels:e,volume:t,fps:r,assetDuration:i,chunkLengthInSeconds:a,forSeamlessAacConcatenation:n,trimLeftOffset:o,trimRightOffset:s,asset:l,indent:u,logLevel:c,presentationTimeOffsetInSeconds:d})=>{if(0===e)return null;let{toneFrequency:p,startInVideo:f}=l,h=f/r,{trimLeft:m,maxTrim:g}=a1({trimLeft:l.trimLeft,fps:r,trimLeftOffset:o,seamless:n,assetDuration:i,audioStartFrame:l.audioStartFrame,playbackRate:l.playbackRate});if(g&&m>=g)return null;if(null!==p&&(p<=0||p>2))throw Error("toneFrequency must be a positive number between 0.01 and 2");let{actualTrimLeft:v,audibleDuration:y,filter:b}=(({assetDuration:e,asset:t,trimLeftOffset:r,trimRightOffset:i,fps:a,indent:n,logLevel:o})=>{let{trimLeft:s,maxTrim:l}=a1({trimLeft:t.trimLeft,fps:a,trimLeftOffset:r,seamless:!0,assetDuration:e,audioStartFrame:t.audioStartFrame,playbackRate:t.playbackRate}),u=s+t.duration/a-r+i,c=l?Math.min(u,l):u;return c<s&&(ek.warn({indent:n,logLevel:o},"trimRightOrAssetDuration < trimLeft: "+JSON.stringify({trimRight:u,trimLeft:s,assetDuration:e,assetTrimLeft:t.trimLeft})),c=s),{filter:[aJ(t.playbackRate),`atrim=${a2(s)}:${a2(c)}`],actualTrimLeft:s,audibleDuration:c-s}})({assetDuration:i,trimLeftOffset:o,trimRightOffset:s,asset:l,fps:r,indent:u,logLevel:c}),x=a0({volume:t,fps:r,trimLeft:v}),w=a-y-h,S=h+(0===l.trimLeft?d:0);return{filter:"[0:a]"+["aformat=sample_fmts=s16:sample_rates=48000",...b,"1"===x.value?null:`volume=${x.value}:eval=${x.eval}`,p&&1!==p?`asetrate=48000*${p},aresample=48000,atempo=1/${p}`:null].filter(ew).join(",")+"[a0]",pad_end:w>1e-7?"apad=pad_len="+Math.round(48e3*w):null,pad_start:0===S?null:`adelay=${Array(e+1).fill((1e3*S).toFixed(0)).join("|")}`,actualTrimLeft:v}})({asset:t,fps:r,channels:h,assetDuration:m,chunkLengthInSeconds:u,trimLeftOffset:c,trimRightOffset:d,forSeamlessAacConcatenation:p,volume:aB(t.volume),indent:a,logLevel:n,presentationTimeOffsetInSeconds:g??0});if(null===v)return null;let{cleanup:y,file:b}=await (null===v.filter?{file:null,cleanup:()=>{}}:aq(v.filter,i)),x=[["-hide_banner"],["-i",aL(t.src)],f?["-map",`0:a:${f}`]:[],["-ac","2"],b?["-filter_script:a",b]:null,["-c:a","pcm_s16le"],["-ar",String(48e3)],["-y",e]].flat(2).filter(ew);ek.verbose({indent:a,logLevel:n},"Preprocessing audio track:",JSON.stringify(x.join(" ")),"Filter:",v.filter);let w=Date.now(),S=tO({bin:"ffmpeg",args:x,indent:a,logLevel:n,binariesDirectory:o,cancelSignal:s});return S.stderr?.on("data",e=>{let t=ae(e.toString("utf8"),r);void 0!==t&&l((t-v.actualTrimLeft*r)/(u*r))}),await S,ek.verbose({indent:a,logLevel:n},"Preprocessed audio track",`${Date.now()-w}ms`),y(),{outName:e,filter:v}},a3=rE(2),a6=async({assets:e,onDownload:t,fps:r,logLevel:i,onProgress:a,downloadMap:n,remotionRoot:o,indent:s,binariesDirectory:l,audioBitrate:u,audioCodec:c,cancelSignal:d,chunkLengthInSeconds:p,trimLeftOffset:f,trimRightOffset:h,forSeamlessAacConcatenation:m})=>{let g=await aV({assets:e,onDownload:t??(()=>()=>{}),downloadMap:n,indent:s,logLevel:i,binariesDirectory:l});Object.keys(n.hasBeenDownloadedMap).forEach(e=>{delete n.hasBeenDownloadedMap[e]}),Object.keys(n.isDownloadingMap).forEach(e=>{delete n.isDownloadingMap[e]});let v=(e=>{let t=[],r=e.flat(1);for(let i=0;i<e.length;i++){let a=aU(e[i-1]??[]),n=aU(e[i]),o=aU(e[i+1]??[]);for(let e of n){az(a,e)||t.push({src:aL(aN(r,e).src),type:e.type,duration:null,id:e.id,startInVideo:i,trimLeft:e.mediaFrame,volume:[],playbackRate:e.playbackRate,toneFrequency:e.toneFrequency,audioStartFrame:e.audioStartFrame,audioStreamIndex:e.audioStreamIndex});let n=t.find(t=>null===t.duration&&a$(t,e));if(!n)throw Error("something wrong");az(o,e)||(n.duration=i-n.startInVideo+1),n.volume=[...n.volume,e.volume]}}for(let e of t)if(null===e.duration)throw Error("duration is unexpectedly null");return t.map(e=>({...e,volume:aB(e.volume)}))})(g);ek.verbose({indent:s,logLevel:i,tag:"audio"},"asset positions",JSON.stringify(v));let y=Array(v.length).fill(0),b=0,x=0,w=()=>{a(.7*(0===y.length?1:y.reduce((e,t)=>e+t,0)/v.length)+.1*b+.2*x)},S=await Promise.all(v.map(async(e,t)=>{let a,o=G.default.join(n.audioMixing,`${t}.wav`),u=await (a={outName:o,asset:e,fps:r,downloadMap:n,indent:s,logLevel:i,binariesDirectory:l,cancelSignal:d,onProgress:e=>{y[t]=e,w()},chunkLengthInSeconds:p,trimLeftOffset:f,trimRightOffset:h,forSeamlessAacConcatenation:m,audioStreamIndex:e.audioStreamIndex},a3(a4,a));return y[t]=1,w(),u}));await n.inlineAudioMixing.finish({indent:s,logLevel:i,binariesDirectory:l,cancelSignal:d});let k=n.inlineAudioMixing.getListOfAssets(),C=[...S.filter(ew),...k.map(e=>({outName:e,filter:{filter:null,pad_start:null,pad_end:null}}))],E=G.default.join(n.audioPreprocessing,"merged.wav"),_=i8(c),T=G.default.join(n.audioPreprocessing,`audio.${_}`);return await aX({files:C,outName:E,downloadMap:n,remotionRoot:o,indent:s,logLevel:i,binariesDirectory:l,cancelSignal:d,fps:r,onProgress:e=>{b=e,w()},chunkLengthInSeconds:p}),await aH({audioBitrate:u,audioCodec:c,binariesDirectory:l,indent:s,logLevel:i,inName:E,outName:T,cancelSignal:d,chunkLengthInSeconds:p,fps:r,onProgress:e=>{x=e,w()}}),tg(E),tg(n.audioMixing),C.forEach(e=>{tg(e.outName)}),T},a8=e=>{let t=`Made with Remotion ${N.VERSION}`,r={comment:t};return Object.keys(e).forEach(i=>{let a=i.toLowerCase();"comment"===a?r[a]=`${t}; ${e[i]}`:r[a]=e[i]}),Object.entries(r).map(([e,t])=>["-metadata",`${e}=${t}`]).flat(1)},a5=({codec:e,assetsInfo:t,enforceAudioTrack:r,muted:i})=>i||!aI(e).audio?"no":r?"yes":null===t?"maybe":t.assets.flat(1).length>0?"yes":"no",a7=(e,t)=>{if(null!=e){if("number"==typeof e)throw TypeError(`"${t}" must be a string ending in "K" or "M". Got a number: ${e}`);if("string"!=typeof e)throw TypeError(`"${t}" must be a string or null, but got ${JSON.stringify(e)}`);if(!e.endsWith("K")&&!e.endsWith("k")&&!e.endsWith("M"))throw TypeError(`"${t}" must end in "K", "k" or "M", but got ${JSON.stringify(e)}`)}},a9=async({assetsInfo:e,audioBitrate:t,audioCodec:r,cancelSignal:i,codec:a,crf:n,enforceAudioTrack:o,ffmpegOverride:s,force:l,fps:u,height:c,indent:d,muted:p,onDownload:f,outputLocation:h,pixelFormat:m,preEncodedFileLocation:g,preferLossless:v,proResProfile:y,logLevel:b,videoBitrate:x,maxRate:w,bufferSize:S,width:k,numberOfGifLoops:C,onProgress:E,x264Preset:_,colorSpace:T,binariesDirectory:P,separateAudioTo:I,metadata:A,hardwareAcceleration:O},M)=>{ax(c,"height","passed to `stitchFramesToVideo()`"),ax(k,"width","passed to `stitchFramesToVideo()`"),aR({width:k,height:c,codec:a,scale:1,wantsImageSequence:!1,indent:d,logLevel:b}),aD({codec:a,proResProfile:y}),a7(t,"audioBitrate"),a7(x,"videoBitrate"),a7(w,"maxRate"),a7(S,"bufferSize"),ab(u,"in `stitchFramesToVideo()`",!1),e.downloadMap.preventCleanup();let F=aF(a,y),j=aI(a),B=a5({assetsInfo:e,codec:a,enforceAudioTrack:o,muted:p});if("maybe"===B)throw Error("Remotion is not sure whether to render audio. Please report this in the Remotion repo.");let N="yes"===B,$=j.video;if(!N&&!$)throw Error("The output format has neither audio nor video. This can happen if you are rendering an audio codec and the output file has no audio or the muted flag was passed.");let z=i5({codec:a,preferLossless:v,setting:r,separateAudioTo:I}),U=h?null:D.default.join(e.downloadMap.stitchFrames,`out.${ij(a,z)}`);ek.verbose({indent:d,logLevel:b,tag:"stitchFramesToVideo()"},"audioCodec",z),ek.verbose({indent:d,logLevel:b,tag:"stitchFramesToVideo()"},"pixelFormat",m),ek.verbose({indent:d,logLevel:b,tag:"stitchFramesToVideo()"},"codec",a),ek.verbose({indent:d,logLevel:b,tag:"stitchFramesToVideo()"},"shouldRenderAudio",N),ek.verbose({indent:d,logLevel:b,tag:"stitchFramesToVideo()"},"shouldRenderVideo",$),aT({crf:n,codec:a,videoBitrate:x,encodingMaxRate:w,encodingBufferSize:S,hardwareAcceleration:O}),i0(m,a);let V=N&&z?await a6({assets:e.assets,onDownload:f,fps:u,chunkLengthInSeconds:e.chunkLengthInSeconds,logLevel:b,onProgress:e=>{ek.verbose({indent:d,logLevel:b,tag:"audio"},`Encoding progress: ${Math.round(100*e)}%`)},downloadMap:e.downloadMap,remotionRoot:M,indent:d,binariesDirectory:P,audioBitrate:t,audioCodec:z,cancelSignal:i??void 0,trimLeftOffset:e.trimLeftOffset,trimRightOffset:e.trimRightOffset,forSeamlessAacConcatenation:e.forSeamlessAacConcatenation}):null;if(j.audio&&!j.video){if(!z)throw TypeError("exporting audio but has no audio codec name. Report this in the Remotion repo.");if(!V)throw TypeError("exporting audio but has no audio file. Report this in the Remotion repo.");if(I)throw Error("`separateAudioTo` was set, but this render was audio-only. This option is meant to be used for video renders.");(0,R.cpSync)(V,h??U),E?.(Math.round(e.chunkLengthInSeconds*u)),tg(D.default.dirname(V));let t=await new Promise((e,t)=>{U?R.promises.readFile(U).then(t=>e(t)).catch(e=>t(e)):e(null)});return tg(e.downloadMap.stitchFrames),e.downloadMap.allowCleanup(),Promise.resolve(t)}let H=[...g?[["-i",g]]:[["-r",String(u)],["-f","image2"],["-s",`${k}x${c}`],["-start_number",String(e.firstFrameIndex)],["-i",e.imageSequenceName],"gif"===a?["-filter_complex","split[v],palettegen,[v]paletteuse"]:null],V&&!I?["-i",V,"-c:a","copy"]:["-an"],null===C?null:["-loop",aj(C)],...aM({codec:a,crf:n,videoBitrate:x,encodingMaxRate:w,encodingBufferSize:S,hasPreencoded:!!g,proResProfileName:F,pixelFormat:m,x264Preset:_,colorSpace:T,hardwareAcceleration:O,indent:d,logLevel:b}),"h264"===a?["-movflags","faststart"]:null,["-map_metadata","-1"],...a8(A??{}),l?"-y":null,h??U].flat(2).filter(Boolean),W=s?s({type:"stitcher",args:H}):H;ek.verbose({indent:d??!1,logLevel:b,tag:"stitchFramesToVideo()"},"Generated final FFmpeg command:"),ek.verbose({indent:d,logLevel:b,tag:"stitchFramesToVideo()"},W.join(" "));let q=(({args:e,bin:t,indent:r,logLevel:i,options:a,binariesDirectory:n,cancelSignal:o})=>{let s=tT({type:t,indent:r,logLevel:i,binariesDirectory:n});tA(s);let l=G.default.dirname(s),u=(0,L.spawn)(s,e.filter(ew),{cwd:l,env:tI(l),...a});return o?.(()=>{u.kill()}),u})({bin:"ffmpeg",args:W,indent:d,logLevel:b,binariesDirectory:P,cancelSignal:i??void 0}),Z="",K=!1;if(q.stderr?.on("data",t=>{let r=t.toString();if(Z+=r,E){let t=ae(r,u);void 0!==t&&(t===e.assets.length&&(K?q.stdin?.write("q"):K=!0),E?.(t))}}),I){if(!V)throw Error(`\`separateAudioTo\` was set to ${JSON.stringify(I)}, but this render included no audio`);let e=D.default.resolve(M,I);(0,R.cpSync)(V,e),(0,R.rmSync)(V)}let Q=await new Promise((t,r)=>{q.once("close",(i,a)=>{if(0===i){if(null===U)return rJ(e.downloadMap),t(null);R.promises.readFile(U).then(e=>{t(e)}).catch(e=>{r(e)}).finally(()=>{rJ(e.downloadMap)})}else r(Error(`FFmpeg quit with code ${i} ${a?`(${a})`:""} The FFmpeg output was ${Z}`))})});return e.downloadMap.allowCleanup(),Q},ne=iO(({proResProfile:e,x264Preset:t,crf:r,composition:i,serializedInputPropsWithCustomSchema:a,pixelFormat:n,codec:o,envVariables:s,frameRange:l,puppeteerInstance:u,outputLocation:c,onProgress:d,overwrite:p,onDownload:f,onBrowserLog:h,onStart:m,timeoutInMilliseconds:g,chromiumOptions:v,scale:y,browserExecutable:b,port:x,cancelSignal:w,muted:S,enforceAudioTrack:k,ffmpegOverride:C,audioBitrate:E,videoBitrate:_,encodingMaxRate:T,encodingBufferSize:P,audioCodec:I,concurrency:A,disallowParallelEncoding:O,everyNthFrame:M,imageFormat:F,indent:j,jpegQuality:$,numberOfGifLoops:z,onCtrlCExit:U,preferLossless:V,serveUrl:H,server:W,logLevel:q,serializedResolvedPropsWithCustomSchema:G,offthreadVideoCacheSizeInBytes:Z,colorSpace:K,repro:Q,binariesDirectory:X,separateAudioTo:J,forSeamlessAacConcatenation:Y,compositionStart:ee,onBrowserDownload:et,onArtifact:er,metadata:ei,hardwareAcceleration:en,chromeMode:es,offthreadVideoThreads:eu,mediaCacheSizeInBytes:ec,onLog:ev,licenseKey:ew,isProduction:eS})=>{let eC,eE=n??i.defaultPixelFormat??iY;Q?(({serveUrl:e,compositionName:t,serializedInputPropsWithCustomSchema:r,serializedResolvedPropsWithCustomSchema:i})=>{let a,n,o,s,l,u;ey=!0,a=ed(),n=D.default.join(a,".remotionrepro"),o=D.default.join(n,"logs.txt"),s=D.default.join(a,`remotion-repro-${t}-${Date.now()}.zip`),eh(n),l=R.default.createWriteStream(o,{flags:"a"}),em={start:({serveUrl:e,serializedInputPropsWithCustomSchema:t,serializedResolvedPropsWithCustomSchema:r})=>{if(!ep(e)){let t=D.default.resolve(n,"bundle");eh(t),R.default.cpSync(e,t,{recursive:!0})}let i=D.default.resolve(n,"input-props.json");R.default.writeFileSync(i,t);let a=D.default.resolve(n,"resolved-props.json");R.default.writeFileSync(a,r),u("info",[`Args: ${JSON.stringify(process.argv)}`]),u("info",[`Node/Bun version: ${process.version}`]),u("info",[`OS: ${process.platform}-${process.arch}`]),u("info",[`Serve URL: ${e}`]),u("info",[`Remotion version: ${N.VERSION}`])},writeLine:u=(e,...t)=>{if(!t.length)return;let r=new Date().toISOString(),i=`[${r}] ${e} ${JSON.stringify(t)}`;l.write(i+ef)},onRenderSucceed:({indent:e,logLevel:t,output:r})=>new Promise((i,a)=>{try{if(r){let e=D.default.resolve(n,"output");eh(e);let t=D.default.basename(r),i=D.default.join(e,t);R.default.copyFileSync(r,i)}eb(),l.end(()=>{l.close(()=>{(({sourceFolder:e,targetZip:t,indent:r,logLevel:i})=>{B.default.platform();try{ek.info({indent:r,logLevel:i},"+ Creating reproduction ZIP"),(0,L.execSync)(`zip -r "${t}" "${e}"`),(0,R.rmSync)(e,{recursive:!0}),ek.info({indent:r,logLevel:i},`${el.blue(`+ Repro: ${t}`)}`)}catch(t){ek.error({indent:r,logLevel:i},`Failed to zip repro folder, The repro folder is ${e}. You can try manually zip it.`),ek.error({indent:r,logLevel:i},t)}})({sourceFolder:n,targetZip:s,indent:e,logLevel:t}),i()})})}catch(e){ek.error({indent:!1,logLevel:t},"repro render success error:"),ek.error({indent:!1,logLevel:t},e),a(e)}})},eg().start({serveUrl:e,serializedInputPropsWithCustomSchema:r,serializedResolvedPropsWithCustomSchema:i})})({serveUrl:H,compositionName:i.id,serializedInputPropsWithCustomSchema:a,serializedResolvedPropsWithCustomSchema:G}):eb(),iV($),aT({crf:r,codec:o,videoBitrate:_,encodingMaxRate:T,encodingBufferSize:P,hardwareAcceleration:en}),a7(E,"audioBitrate"),a7(_,"videoBitrate"),a7(T,"encodingMaxRate"),a7(P,"encodingBufferSize"),aD({codec:o,proResProfile:e}),(({codec:e,x264Preset:t})=>{if(null!==t&&"h264"!==e&&"h264-mkv"!==e&&"h264-ts"!==e)throw TypeError(`You have set a x264 preset but the codec is "${e}". Set the codec to "h264" or remove the Preset profile.`);if(null!==t&&!aO.includes(t))throw TypeError(`The Preset profile "${t}" is not valid. Valid options are ${aO.map(e=>`"${e}"`).join(", ")}`)})({codec:o,x264Preset:t}),i0(eE,o),c&&(({codec:e,audioCodecSetting:t,extension:r,preferLossless:i,separateAudioTo:a})=>{if(!t2[e])throw TypeError(`The codec "${e}" is not supported. Supported codecs are: ${Object.keys(t2).join(", ")}`);let n=t2[e],o=i5({codec:e,preferLossless:i,setting:t,separateAudioTo:a});if(null===o){if(r!==n.default)throw TypeError(`When using the ${e} codec, the output filename must end in .${n.default}.`);return}if(!(o in n.forAudioCodec))throw Error(`Audio codec ${o} is not supported for codec ${e}`);let s=n.forAudioCodec[o].possible;if(!s.includes(r)&&!a)throw TypeError(`When using the ${e} codec with the ${o} audio codec, the output filename must end in one of the following: ${s.join(", ")}.`)})({codec:o,audioCodecSetting:I,extension:iL(c),preferLossless:V,separateAudioTo:J});let e_=c?D.default.resolve(process.cwd(),c):null;aS(y);if(void 0!==C&&C&&"function"!=typeof C)throw TypeError(`Argument passed for "ffmpegArgsHook" is not a function: ${C}`);(e=>{if(void 0===e)throw TypeError('Argument missing for parameter "everyNthFrame"');if("number"!=typeof e)throw TypeError(`Argument passed to "everyNthFrame" is not a number: ${e}`);if(e<1)throw RangeError(`The value for "everyNthFrame" cannot be below 1, but is ${e}`);if(!Number.isFinite(e))throw RangeError(`"everyNthFrame" ${e} is not finite`);if(e%1!=0)throw RangeError(`Argument for everyNthFrame must be an integer, but got ${e}`);if(1===e)return})(M);if(null!=z){if("number"!=typeof z)throw TypeError(`Argument passed to "numberOfGifLoops" is not a number: ${z}`);if(z<0)throw RangeError(`The value for "numberOfGifLoops" cannot be below 0, but is ${z}`);if(!Number.isFinite(z))throw RangeError(`"numberOfGifLoops" ${z} is not finite`);if(z%1!=0)throw RangeError(`Argument for numberOfGifLoops must be an integer, but got ${z}`);if("gif"!==o)throw Error(`"everyNthFrame" can only be set if "codec" is set to "gif". The codec is "${o}"`)}let eT="encoding",eP=null,eI=0,eA=0,eO=0,eM=null,eF=null,eR=!1,eD=0,ej=[],eL=Date.now(),{estimatedUsage:eB,freeMemory:eN,hasEnoughMemory:e$}=(({width:e,height:t,logLevel:r})=>{let i=rh(r),a=(({width:e,height:t})=>1e3*e*t)({height:t,width:e});return{hasEnoughMemory:i-a>2e9&&a/i<.5,freeMemory:i,estimatedUsage:a}})({height:i.height,width:i.width,logLevel:q}),ez=!O&&e$&&tF(o);ek.verbose({indent:j,logLevel:q,tag:"renderMedia()"},"Free memory:",eN,"Estimated usage parallel encoding",eB);let eU=iR(A);ek.verbose({indent:j,logLevel:q,tag:"renderMedia()"},"Using concurrency:",eU),ek.verbose({indent:j,logLevel:q,tag:"renderMedia()"},"delayRender() timeout:",g),ek.verbose({indent:j,logLevel:q,tag:"renderMedia()"},"Codec supports parallel rendering:",tF(o)),O&&ek.verbose({indent:j,logLevel:q,tag:"renderMedia()"},"User disallowed parallel encoding."),ez?ek.verbose({indent:j,logLevel:q,tag:"renderMedia()"},"Parallel encoding is enabled."):ek.verbose({indent:j,logLevel:q,tag:"renderMedia()"},"Parallel encoding is disabled.");let eV=tM(o)?"none":F??i.defaultVideoImageFormat??iz;((e,t)=>{if("none"===t||void 0===e)return;if(!iN.includes(t))throw TypeError(`Value ${t} is not valid as an image format.`);if("yuva420p"===e||"yuva444p10le"===e){if("png"!==t)throw TypeError(`Pixel format was set to '${e}' but the image format is not PNG. To render transparent videos, you need to set PNG as the image format.`)}})(eE,eV);let eH=R.default.mkdtempSync(D.default.join(B.default.tmpdir(),"react-motion-render")),eW=ez?D.default.join(eH,"pre-encode."+ij(o,I)):null;U&&eH&&U(`Delete ${eH}`,()=>tg(eH));let{actualWidth:eq,actualHeight:eG}=aR({codec:o,height:i.height,scale:y,width:i.width,wantsImageSequence:!1,indent:j,logLevel:q}),eZ=eq*y,eK=eG*y,eQ={...i,height:eG,width:eq},eX=iB(eQ.durationInFrames,l),eJ=iD(eX,M).length;ek.verbose({indent:j,logLevel:q,tag:"renderMedia()"},`Rendering frames ${eX.join("-")}`);let eY=()=>{let e=Math.round(.8*eI+.2*eA);d?.({encodedDoneIn:eF,encodedFrames:e,renderedDoneIn:eM,renderedFrames:eO,renderEstimatedTime:eD,stitchStage:eT,progress:Math.round((70*eO+30*e)/eJ)/100})},e0=an(),e1=an(),e2=an();w?.(()=>{e0.cancel()});let{waitForRightTimeOfFrameToBeInserted:e4,setFrameToStitch:e3,waitForFinish:e6}=(e=>{let[t]=e,r=e[e.length-1],i=[],a=()=>{for(let e of i.slice(0))t===e.forFrame&&(e.resolve(),i=i.filter(t=>t.id!==e.id))},n=e=>new Promise(t=>{i.push({id:String(Math.random()),forFrame:e,resolve:t}),a()}),o=async()=>{await n(r+1)};return{waitForRightTimeOfFrameToBeInserted:n,setFrameToStitch:e=>{t=e,a()},waitForFinish:o}})(eX),e8=eQ.fps/M;ab(e8,'in "renderMedia()"',"gif"===o);let e5=async()=>{if(eC){await e6(),eC?.stdin?.end();try{await eC}catch{throw Error(eP?.getLogs())}}return{usesParallelEncoding:!!eC}},e7=!aI(o).audio||S,e9=[],te=0,tt=0,tr=()=>Promise.resolve(void 0);return(({happyPath:e,cancelSignal:t,cancelMessage:r})=>{if(!t)return e;let i=()=>{},a=new Promise((e,a)=>{t?.(()=>{i=e,a(Error(r))})});return Promise.race([e.then(e=>(process.nextTick(()=>i?.(void 0)),e)),a])})({happyPath:new Promise((i,n)=>{Promise.resolve((()=>{if(eW){var i;let a,n,s,l,u,c,d,p;i={width:eZ,height:eK,fps:e8,outputLocation:eW,pixelFormat:eE,codec:o,proResProfile:e,crf:r,onProgress:e=>{eI=e,eY()},logLevel:q,imageFormat:eV,signal:e1.cancelSignal,ffmpegOverride:C??(({args:e})=>e),videoBitrate:_,encodingMaxRate:T,encodingBufferSize:P,indent:j,x264Preset:t??null,colorSpace:K,binariesDirectory:X,hardwareAcceleration:en},ax(i.height,"height","passed to `stitchFramesToVideo()`"),ax(i.width,"width","passed to `stitchFramesToVideo()`"),a=i.codec??tj,ab(i.fps,"in `stitchFramesToVideo()`","gif"===a),aR({width:i.width,height:i.height,codec:a,scale:1,wantsImageSequence:!1,indent:i.indent,logLevel:i.logLevel}),n=i.pixelFormat??iY,s=aF(a,i.proResProfile),i0(n,a),l=[["-r",i.fps],["-f","image2pipe"],["-s",`${i.width}x${i.height}`],["-vcodec","jpeg"===i.imageFormat?"mjpeg":"png"],["-i","-"],...aM({hasPreencoded:!1,proResProfileName:s,pixelFormat:n,x264Preset:i.x264Preset,codec:a,crf:i.crf,videoBitrate:i.videoBitrate,encodingMaxRate:i.encodingMaxRate,encodingBufferSize:i.encodingBufferSize,colorSpace:i.colorSpace,hardwareAcceleration:i.hardwareAcceleration,indent:i.indent,logLevel:i.logLevel}),"-y",i.outputLocation],ek.verbose({indent:i.indent,logLevel:i.logLevel,tag:"prespawnFfmpeg()"},"Generated FFMPEG command:"),ek.verbose({indent:i.indent,logLevel:i.logLevel,tag:"prespawnFfmpeg()"},l.join(" ")),u=l.flat(2).filter(Boolean),c=tO({bin:"ffmpeg",args:i.ffmpegOverride?i.ffmpegOverride({type:"pre-stitcher",args:u}):u,indent:i.indent,logLevel:i.logLevel,binariesDirectory:i.binariesDirectory,cancelSignal:i.signal}),d="",c.stderr?.on("data",e=>{let t=e.toString();if(d+=t,i.onProgress){let e=ae(t,i.fps);void 0!==e&&i.onProgress(e)}}),p={type:"running"},c.on("exit",e=>{p="number"==typeof e&&e>0?{type:"quit-with-error",exitCode:e,stderr:d}:{type:"quit-successfully",stderr:d}}),eC=(eP={task:c,getLogs:()=>d,getExitStatus:()=>p}).task}})()).then(()=>iy(W,{offthreadVideoThreads:eu??2,indent:j,port:x,remotionRoot:ed(),logLevel:q,webpackConfigOrServeUrl:H,offthreadVideoCacheSizeInBytes:Z??null,binariesDirectory:X,forceIPv4:!1},{onDownload:f})).then(({server:e,cleanupServer:t})=>{tr=t;let r=Date.now();return aC({composition:eQ,onFrameUpdate:(e,t)=>{eO=e;let i=Date.now(),a=i-r;r=i,ej.push(a),ej.length>150&&ej.shift();let n=ej.reduce((e,t)=>e+t,0)/ej.length;eD=Math.round((eJ-eO)*n),eY();let o={frame:t,time:a};if(!(a<tt)||10!==e9.length){if(a>te)e9.unshift(o),te=a;else{let e=e9.findIndex(({time:e})=>e<a);e9.splice(e,0,o)}e9.length>10&&e9.pop(),tt=e9[e9.length-1]?.time??tt}},concurrency:A,outputDir:ez?null:eH,onStart:e=>{eO=0,eY(),m?.(e)},serializedInputPropsWithCustomSchema:a,envVariables:s,imageFormat:eV,jpegQuality:$,frameRange:l,puppeteerInstance:u,everyNthFrame:M,onFrameBuffer:ez?async(e,t)=>{if(await e4(t),eR)return;let r=iK("piping"),i=eP?.getExitStatus();if(i?.type==="quit-successfully")throw Error(`FFmpeg already quit while trying to pipe frame ${t} to it. Stderr: ${i.stderr}}`);if(i?.type==="quit-with-error")throw Error(`FFmpeg quit with code ${i.exitCode} while piping frame ${t}. Stderr: ${i.stderr}}`);eC?.stdin?.write(e),iQ(r),e3(Math.min(eX[1]+1,t+M))}:null,webpackBundleOrServeUrl:H,onBrowserLog:h,onDownload:f,timeoutInMilliseconds:g,chromiumOptions:v,scale:y,browserExecutable:b,port:x,cancelSignal:e0.cancelSignal,muted:e7,logLevel:q,indent:j,server:e,serializedResolvedPropsWithCustomSchema:G,offthreadVideoCacheSizeInBytes:Z,offthreadVideoThreads:eu,parallelEncodingEnabled:ez,binariesDirectory:X,compositionStart:ee,forSeamlessAacConcatenation:Y,onBrowserDownload:et,onArtifact:er,chromeMode:es,imageSequencePattern:null,mediaCacheSizeInBytes:ec,onLog:ev})}).then(e=>Promise.all([e,e5()])).then(([{assetsInfo:i}])=>{var a;eM=Date.now()-eL,ek.verbose({indent:j,logLevel:q},"Rendering frames done in",eM+"ms"),e_&&eo(e_);let n=Date.now();return a={width:Math.round(eZ),height:Math.round(eK),fps:e8,outputLocation:e_,preEncodedFileLocation:eW,preferLossless:V,indent:j,force:p,pixelFormat:eE,codec:o,proResProfile:e,crf:r,assetsInfo:i,onProgress:e=>{eW?(eT="muxing",eA=Math.min(e,eJ)):(eA=Math.min(e,eJ),eI=Math.min(e,eJ)),eI===eJ&&(eF=Date.now()-n),e>0&&eY()},onDownload:f,numberOfGifLoops:z,logLevel:q,cancelSignal:e2.cancelSignal,muted:e7,enforceAudioTrack:k,ffmpegOverride:C??null,audioBitrate:E,videoBitrate:_,bufferSize:P,maxRate:T,audioCodec:I,x264Preset:t??null,colorSpace:K,binariesDirectory:X,separateAudioTo:J,metadata:ei,hardwareAcceleration:en},Promise.race([a9(a,ed()),new Promise((e,t)=>{a.cancelSignal?.(()=>{t(Error(au))})})])}).then(e=>{ek.verbose({indent:j,logLevel:q},"Stitching done in",eF+"ms"),e9.sort((e,t)=>t.time-e.time);let t={buffer:e,slowestFrames:e9},r=()=>{null===ew?i(t):ea({event:"cloud-render",host:null,succeeded:!0,licenseKey:ew??null,isProduction:eS??!0,isStill:!1}).then(()=>{ek.verbose({indent:j,logLevel:q},"Usage event sent successfully")}).catch(e=>{ek.error({indent:j,logLevel:q},"Failed to send usage event"),ek.error({indent:!0,logLevel:q},e)}).finally(()=>{i(t)})};ex()?eg().onRenderSucceed({indent:j,logLevel:q,output:e_}).then(()=>{r()}).catch(e=>{ek.error({indent:j,logLevel:q},"Could not create reproduction",e),r()}):r()}).catch(e=>{if(eR=!0,e0.cancel(),e2.cancel(),e1.cancel(),void 0!==eC&&null===eC.exitCode){let t=new Promise(e=>{setTimeout(()=>{e()},2e3),eC.on("close",e)});try{eC.kill()}catch{}return t.then(()=>{n(e)})}n(e)}).finally(()=>{null!==eW&&R.default.existsSync(eW)&&tg(D.default.dirname(eW)),eH&&R.default.existsSync(eH)&&tg(eH),tr?.(!1).catch(e=>{ek.error({indent:j,logLevel:q},"Could not cleanup: ",e)})})}),cancelSignal:w,cancelMessage:ao})}),nt=async({composition:e,imageFormat:t=iU,serveUrl:r,puppeteerInstance:i,onError:a,serializedInputPropsWithCustomSchema:n,envVariables:o,output:s,frame:l=0,overwrite:u,browserExecutable:c,timeoutInMilliseconds:d,chromiumOptions:p,scale:f,proxyPort:h,cancelSignal:m,jpegQuality:g,onBrowserLog:v,sourceMapGetter:y,logLevel:b,indent:x,serializedResolvedPropsWithCustomSchema:w,onBrowserDownload:S,onArtifact:k,chromeMode:C,mediaCacheSizeInBytes:E,onLog:_})=>{ax(e.height,"height","in the `config` object passed to `renderStill()`"),ax(e.width,"width","in the `config` object passed to `renderStill()`"),ab(e.fps,"in the `config` object of `renderStill()`",!1),aw(e.durationInFrames,{component:"in the `config` object passed to `renderStill()`",allowFloats:!1});if(!i$.includes(t))throw TypeError(String(`Image format should be one of: ${i$.map(e=>`"${e}"`).join(", ")}`));U.NoReactInternals.validateFrame({frame:l,durationInFrames:e.durationInFrames,allowFloats:!1});let T=tL({durationInFrames:e.durationInFrames,frame:l});if(i_(d),aS(f),s="string"==typeof s?D.default.resolve(process.cwd(),s):null,iV(g),s){if(R.default.existsSync(s)){if(!u)throw Error(`Cannot render still - "overwrite" option was set to false, but the output destination ${s} already exists.`);if(!(0,R.statSync)(s).isFile())throw Error(`The output location ${s} already exists, but is not a file, but something else (e.g. folder). Cannot save to it.`)}eo(s)}let P=i??await rv({browser:eA,browserExecutable:c,chromiumOptions:p,forceDeviceScaleFactor:f,indent:x,viewport:null,logLevel:b,onBrowserDownload:S,chromeMode:C}),I=await P.newPage({context:y,logLevel:b,indent:x,pageIndex:0,onBrowserLog:v,onLog:_});await I.setViewport({width:e.width,height:e.height,deviceScaleFactor:f});let A=t0({page:I,onError:e=>{a(e),O()},frame:null}),O=async()=>{A(),i?await I.close():P.close({silent:!0}).catch(e=>{ek.error({indent:x,logLevel:b},"Unable to close browser",e)})};m?.(()=>{O()}),await iP({serializedInputPropsWithCustomSchema:n,envVariables:o,page:I,serveUrl:r,initialFrame:T,timeoutInMilliseconds:d,proxyPort:h,retriesRemaining:2,audioEnabled:!1,videoEnabled:!0,indent:x,logLevel:b,onServeUrlVisited:()=>{},isMainTab:!0,mediaCacheSizeInBytes:E,initialMemoryAvailable:rh(b),darkMode:p.darkMode??!1}),await ix({pageFunction:(e,t,r,i,a,n,o,s,l,u,c)=>{window.remotion_setBundleMode({type:"composition",compositionName:e,serializedResolvedPropsWithSchema:t,compositionDurationInFrames:r,compositionFps:i,compositionHeight:a,compositionWidth:n,compositionDefaultCodec:o,compositionDefaultOutName:s,compositionDefaultVideoImageFormat:l,compositionDefaultPixelFormat:u,compositionDefaultProResProfile:c})},args:[e.id,w,e.durationInFrames,e.fps,e.height,e.width,e.defaultCodec,e.defaultOutName,e.defaultVideoImageFormat,e.defaultPixelFormat,e.defaultProResProfile],frame:null,page:I,timeoutInMilliseconds:d}),await iC({frame:T,page:I,composition:e.id,timeoutInMilliseconds:d,indent:x,logLevel:b,attempt:0});let[M,F]=await Promise.all([ag({freePage:I,height:e.height,width:e.width,imageFormat:t,scale:f,output:s,jpegQuality:g,wantsBuffer:!s,timeoutInMilliseconds:d}),ap({frame:l,freePage:I,timeoutInMilliseconds:d})]),j=ah({assets:F,frameBuffer:M}),L=[];for(let e of j){for(let t of L)if(e.filename===t.filename)throw Error(`An artifact with output "${e.filename}" was already registered at frame ${t.frame}, but now registered again at frame ${e.frame}. Artifacts must have unique names. https://remotion.dev/docs/artifacts`);L.push(e),k?.(e)}return await O(),{buffer:s?null:M}},nr=iO(e=>{let t=[];return Promise.race([new Promise((r,i)=>{let a=e=>i(e);iy(e.server,{webpackConfigOrServeUrl:e.serveUrl,port:e.port,remotionRoot:ed(),offthreadVideoThreads:e.offthreadVideoThreads??2,logLevel:e.logLevel,indent:e.indent,offthreadVideoCacheSizeInBytes:e.offthreadVideoCacheSizeInBytes,binariesDirectory:e.binariesDirectory,forceIPv4:!1},{onDownload:e.onDownload}).then(({server:r,cleanupServer:i})=>{t.push(()=>i(!1));let{serveUrl:n,offthreadPort:o,sourceMap:s}=r;return nt({...e,serveUrl:n,onError:a,proxyPort:o,sourceMapGetter:s})}).then(t=>{null===e.licenseKey?r(t):ea({licenseKey:e.licenseKey,event:"cloud-render",host:null,succeeded:!0,isStill:!0,isProduction:e.isProduction??!0}).then(()=>{ek.verbose(e,"Usage event sent successfully")}).catch(t=>{ek.error(e,"Failed to send usage event"),ek.error(e,t)}).finally(()=>{r(t)})}).catch(e=>i(e)).finally(()=>{t.forEach(t=>{t().catch(t=>{ek.error(e,"Cleanup error:",t)})})})}),new Promise((t,r)=>{e.cancelSignal?.(()=>{r(Error(al))})})])}),ni=async({page:e,serializedInputPropsWithCustomSchema:t,envVariables:r,serveUrl:i,timeoutInMilliseconds:a,port:n,id:o,indent:s,logLevel:l,onServeUrlVisited:u,mediaCacheSizeInBytes:c,chromiumOptions:d})=>{i_(a),await iP({serializedInputPropsWithCustomSchema:t,envVariables:r,page:e,serveUrl:i,initialFrame:0,timeoutInMilliseconds:a,proxyPort:n,retriesRemaining:2,audioEnabled:!1,videoEnabled:!1,indent:s,logLevel:l,onServeUrlVisited:u,isMainTab:!0,mediaCacheSizeInBytes:c,initialMemoryAvailable:rh(l),darkMode:d.darkMode??!1}),await ix({page:e,pageFunction:()=>{window.remotion_setBundleMode({type:"evaluation"})},frame:null,args:[],timeoutInMilliseconds:a}),await ik({page:e,timeoutInMilliseconds:a,frame:null,logLevel:l,indent:s}),ek.verbose({indent:s,tag:"selectComposition()",logLevel:l},"Running calculateMetadata()...");let p=Date.now(),{value:f,size:h}=await ix({pageFunction:e=>window.remotion_calculateComposition(e),frame:null,page:e,args:[o],timeoutInMilliseconds:a});ek.verbose({indent:s,tag:"selectComposition()",logLevel:l},`calculateMetadata() took ${Date.now()-p}ms`);let{width:m,durationInFrames:g,fps:v,height:y,defaultCodec:b,defaultOutName:x,defaultVideoImageFormat:w,defaultPixelFormat:S,defaultProResProfile:k}=f;return{metadata:{id:o,width:m,height:y,fps:v,durationInFrames:g,props:U.NoReactInternals.deserializeJSONWithSpecialTypes(f.serializedResolvedPropsWithCustomSchema),defaultProps:U.NoReactInternals.deserializeJSONWithSpecialTypes(f.serializedDefaultPropsWithCustomSchema),defaultCodec:b,defaultOutName:x,defaultVideoImageFormat:w,defaultPixelFormat:S,defaultProResProfile:k},propsSize:h}},na=iO(async e=>{let t=[],{puppeteerInstance:r,browserExecutable:i,chromiumOptions:a,serveUrl:n,logLevel:o,indent:s,port:l,envVariables:u,id:c,serializedInputPropsWithCustomSchema:d,onBrowserLog:p,server:f,timeoutInMilliseconds:h,offthreadVideoCacheSizeInBytes:m,binariesDirectory:g,onBrowserDownload:v,onServeUrlVisited:y,chromeMode:b,mediaCacheSizeInBytes:x}=e,[{page:w,cleanupPage:S},k]=await Promise.all([ry({passedInInstance:r,browserExecutable:i,chromiumOptions:a,forceDeviceScaleFactor:void 0,indent:s,logLevel:o,onBrowserDownload:v,chromeMode:b,pageIndex:0,onBrowserLog:p,onLog:nh.defaultOnLog}),iy(e.server,{webpackConfigOrServeUrl:n,port:l,remotionRoot:ed(),offthreadVideoThreads:0,logLevel:o,indent:s,offthreadVideoCacheSizeInBytes:m,binariesDirectory:g,forceIPv4:!1},{onDownload:()=>{}}).then(e=>(t.push(()=>e.cleanupServer(!0)),e))]);return t.push(()=>S()),new Promise((e,n)=>{t.push(t0({page:w,frame:null,onError:e=>n(e)})),w.setBrowserSourceMapGetter(k.server.sourceMap),ni({serveUrl:k.server.serveUrl,page:w,port:k.server.offthreadPort,browserExecutable:i,chromiumOptions:a,envVariables:u,id:c,serializedInputPropsWithCustomSchema:d,timeoutInMilliseconds:h,logLevel:o,indent:s,puppeteerInstance:r,server:f,offthreadVideoCacheSizeInBytes:m,binariesDirectory:g,onBrowserDownload:v,onServeUrlVisited:y,chromeMode:b,mediaCacheSizeInBytes:x}).then(t=>e(t)).catch(e=>{n(e)}).finally(()=>{t.forEach(e=>{e().catch(e=>{ek.error({indent:s,logLevel:o},"Cleanup error:",e)})})})})}),nn=async({browserExecutable:e,indent:t,logLevel:r,chromiumOptions:i,timeoutInMilliseconds:a,onBrowserDownload:n,chromeMode:o,onLog:s})=>{let{page:l,cleanupPage:u}=await ry({passedInInstance:void 0,browserExecutable:e,chromiumOptions:i,forceDeviceScaleFactor:void 0,indent:t,logLevel:r,onBrowserDownload:n,chromeMode:o,pageIndex:0,onBrowserLog:null,onLog:s});await l.goto({url:"chrome://gpu",timeout:12e3});let{value:c}=await ix({pageFunction:()=>{let e=[],t=document.querySelector("info-view")?.shadowRoot?.querySelector("ul")?.querySelectorAll("li");return[].forEach.call(t,t=>{let[r,i]=t.innerText.split(": ");e.push({feature:r,status:i})}),e},frame:null,args:[],page:l,timeoutInMilliseconds:a});return u(),c},no=()=>rp(),ns=()=>1,nl=(e,t)=>!(t<=4)&&"aac"===e,nu=e=>"h264"===e,nc=async({fps:e,codec:t,filelistDir:r,numberOfGifLoops:i,output:a,indent:n,logLevel:o,onProgress:s,files:l,addRemotionMetadata:u,binariesDirectory:c,cancelSignal:d})=>{let p=l.map(e=>`file '${e}'`).join(`
`),f=(0,G.join)(r,"video-files.txt");(0,Z.writeFileSync)(f,p);let h="gif"===t?"gif":"copy",m=["-hide_banner","-r",String(e),"-f","concat","-safe","0","-i",f,null===i?null:"-loop",null===i?null:aj(i),"gif"===t?"-filter_complex":null,"gif"===t?"split[v],palettegen,[v]paletteuse":null,"-an","-c:v",h,"h265"===t?"-tag:v":null,"h265"===t?"hvc1":null,u?"-metadata":null,u?`comment=Made with Remotion ${N.VERSION}`:null,"-y",a].filter(ew),g="copy"!==h,v=Date.now();ek.verbose({indent:n,logLevel:o},`Combining video ${g?"with reencoding":"without reencoding"}, command: ${m.join(" ")}`);try{let t=tO({args:m,bin:"ffmpeg",indent:n,logLevel:o,binariesDirectory:c,cancelSignal:d});return t.stderr?.on("data",t=>{let r=ae(t.toString("utf8"),e);void 0===r?ek.verbose({indent:n,logLevel:o},t.toString("utf8")):(ek.verbose({indent:n,logLevel:o},`Encoded ${r} video frames`),s(r))}),await t,ek.verbose({indent:n,logLevel:o},`Finished combining video in ${Date.now()-v}ms`),a}catch(e){throw(0,Z.rmSync)(f,{recursive:!0}),e}},nd=async({videoOutput:e,audioOutput:t,output:r,indent:i,logLevel:a,onProgress:n,binariesDirectory:o,fps:s,cancelSignal:l,addFaststart:u,metadata:c})=>{let d=Date.now();ek.verbose({indent:i,logLevel:a},"Muxing video and audio together");let p=["-hide_banner",e?"-i":null,e,t?"-i":null,t,e?"-c:v":null,e?"copy":null,t?"-c:a":null,t?"copy":null,u?"-movflags":null,u?"faststart":null,...a8(c??{}),"-y",r].filter(ew);ek.verbose({indent:i,logLevel:a},"Combining command: ",p);let f=tO({bin:"ffmpeg",args:p,indent:i,logLevel:a,binariesDirectory:o,cancelSignal:l});f.stderr?.on("data",e=>{let t=e.toString("utf8"),r=ae(t,s);void 0===r?t.includes("Estimating duration from bitrate, this may be inaccurate")||ek.verbose({indent:i,logLevel:a},t):(ek.verbose({indent:i,logLevel:a},`Combined ${r} frames`),n(r))}),await f,ek.verbose({indent:i,logLevel:a},`Muxing done in ${Date.now()-d}ms`)},np={"h264-mkv":!1,"h264-ts":!1,h264:!0,h265:!0,aac:!1,gif:!1,mp3:!1,prores:!1,vp8:!1,vp9:!1,wav:!1},nf=async({outputLocation:e,onProgress:t,codec:r,fps:i,numberOfGifLoops:a,audioBitrate:n,indent:o,logLevel:s,binariesDirectory:l,cancelSignal:u,metadata:c,audioFiles:d,videoFiles:p,framesPerChunk:f,audioCodec:h,preferLossless:m,everyNthFrame:g,frameRange:v,compositionDurationInFrames:y})=>{let b=rq("remotion-filelist"),x=!tM(r),w=i5({setting:h,codec:r,preferLossless:m,separateAudioTo:null}),S=null!==w&&d.length>0,k=nu(r),C=nl(w,f),E=iD(iB(y,v),g).length,_=x?(0,D.join)(b,`video.${ij(r,w)}`):null,T=S?(0,D.join)(b,`audio.${i8(w)}`):null,P=f/i,I=0,A=0,O=0,M=()=>{let e=(S?E:0)+(x?E:0)+E,r=I+A+O;t({frames:r/e*E,totalProgress:r/e})};ek.verbose({indent:o,logLevel:s},`Combining chunks, audio = ${!1===S?"no":C?"seamlessly":"normally"}, video = ${!1===x?"no":k?"seamlessly":"normally"}`),await Promise.all([S&&T?(({seamless:e,filelistDir:t,files:r,indent:i,logLevel:a,audioBitrate:n,resolvedAudioCodec:o,output:s,chunkDurationInSeconds:l,addRemotionMetadata:u,binariesDirectory:c,fps:d,cancelSignal:p,onProgress:f})=>e?ai({filelistDir:t,files:r,indent:i,logLevel:a,output:s,chunkDurationInSeconds:l,addRemotionMetadata:u,binariesDirectory:c,fps:d,cancelSignal:p,onProgress:f}):ar({filelistDir:t,files:r,resolvedAudioCodec:o,audioBitrate:n,output:s,indent:i,logLevel:a,addRemotionMetadata:u,binariesDirectory:c,fps:d,cancelSignal:p,onProgress:f}))({audioBitrate:n,filelistDir:b,files:d,indent:o,logLevel:s,output:T,resolvedAudioCodec:w,seamless:C,chunkDurationInSeconds:P,addRemotionMetadata:!x,binariesDirectory:l,fps:i,cancelSignal:u,onProgress:e=>{I=e,M()}}):null,x&&!k&&_?nc({codec:r,filelistDir:b,fps:i,indent:o,logLevel:s,numberOfGifLoops:a,output:_,files:p,addRemotionMetadata:!S,binariesDirectory:l,cancelSignal:u,onProgress:e=>{A=e,M()}}):null].filter(ew));try{await nd({audioOutput:T,indent:o,logLevel:s,onProgress:e=>{O=e,M()},output:e,videoOutput:k?(({files:e})=>`concat:${e.join("|")}`)({files:p}):_,binariesDirectory:l,fps:i,cancelSignal:u,addFaststart:np[r],metadata:c}),t({totalProgress:1,frames:E}),(0,R.rmSync)(b,{recursive:!0})}catch(e){throw(0,R.rmSync)(b,{recursive:!0}),e}},nh={resolveConcurrency:iR,serveStatic:ip,validateEvenDimensionsWithCodec:aR,getFileExtensionFromCodec:ij,tmpDir:rq,deleteDirectory:tg,isServeUrl:ep,ensureOutputDirectory:eo,getRealFrameRange:iB,validatePuppeteerTimeout:i_,downloadFile:eI,parseStack:tQ,symbolicateError:t1,SymbolicateableError:tX,getFramesToRender:iD,getExtensionOfFilename:iL,getDesiredPort:r3,isPathInside:ia,execa:F.default,registerErrorSymbolicationLock:ih,unlockErrorSymbolicationLock:im,canUseParallelEncoding:tF,mimeContentType:rS,mimeLookup:rw,validateConcurrency:({setting:e,value:t,checkIfValidForCurrentMachine:r})=>{if(void 0!==t&&null!==t){if("number"!=typeof t&&"string"!=typeof t)throw Error(e+" must a number or a string but is "+t);if("number"==typeof t){if(t%1!=0)throw Error(e+" must be an integer, but is "+t);if(r){if(t<ns())throw Error(`${e} must be at least ${ns()}, but is ${JSON.stringify(t)}`);if(t>no())throw Error(`${e} is set higher than the amount of CPU cores available. Available CPU cores: ${no()}, value set: ${t}`)}}else if(!/^\d+(\.\d+)?%$/.test(t))throw Error(`${e} must be a number or percentage, but is ${JSON.stringify(t)}`)}},validPixelFormats:iJ,DEFAULT_BROWSER:eA,validateFrameRange:e=>{if(null!==e){if("number"==typeof e){if(e<0)throw TypeError("Frame must be a non-negative number, got "+e);if(!Number.isFinite(e))throw TypeError("Frame must be a finite number, got "+e);if(!Number.isInteger(e))throw Error(`Frame must be an integer, but got a float (${e})`);return}if(Array.isArray(e)){if(2!==e.length)throw TypeError("Frame range must be a tuple, got an array with length "+e.length);for(let t of e){if("number"!=typeof t)throw Error(`Each value of frame range must be a number, but got ${typeof t} (${JSON.stringify(t)})`);if(!Number.isFinite(t))throw TypeError("Each value of frame range must be finite, but got "+t);if(!Number.isInteger(t))throw Error(`Each value of frame range must be an integer, but got a float (${t})`);if(t<0)throw Error(`Each value of frame range must be non-negative, but got ${t}`)}let[t,r]=e;if(r<t)throw Error("The second value of frame range must be not smaller than the first one, but got "+e.join("-"));return}throw TypeError("Frame range must be a number or a tuple of numbers, but got object of type "+typeof e)}},DEFAULT_OPENGL_RENDERER:null,validateOpenGlRenderer:rg,validCodecs:tD,DEFAULT_PIXEL_FORMAT:iY,validateJpegQuality:iV,DEFAULT_TIMEOUT:3e4,DEFAULT_CODEC:tj,logLevels:eu,isEqualOrBelowLogLevel:ec,isValidLogLevel:e=>eu.indexOf(e)>-1,perf:iH,convertToPositiveFrameIndex:tL,findRemotionRoot:ed,validateBitrate:a7,getMinConcurrency:ns,getMaxConcurrency:no,getDefaultAudioCodec:i7,defaultFileExtensionMap:t2,supportedAudioCodecs:i2,makeFileExtensionMap:()=>{let e={};return Object.keys(t2).forEach(t=>{let r=t2[t],i=Object.keys(r.forAudioCodec).map(e=>r.forAudioCodec[e].possible);for(let a of[r.default,...i.flat(1)])e[a]||(e[a]=[]),e[a].includes(t)||e[a].push(t)}),e},defaultCodecsForFileExtension:{"3gp":"aac",aac:"aac",gif:"gif",hevc:"h265",m4a:"aac",m4b:"aac",mkv:"h264-mkv",mov:"prores",mp3:"mp3",mp4:"h264",mpeg:"aac",mpg:"aac",mxf:"prores",wav:"wav",webm:"vp8",ts:"h264-ts"},getExecutablePath:tT,callFf:tO,validStillImageFormats:i$,validVideoImageFormats:iN,DEFAULT_STILL_IMAGE_FORMAT:iU,DEFAULT_VIDEO_IMAGE_FORMAT:iz,DEFAULT_JPEG_QUALITY:80,chalk:el,Log:ek,INDENT_TOKEN:eS,isColorSupported:es,HeadlessBrowser:tC,prepareServer:iv,makeOrReuseServer:iy,internalRenderStill:nr,internalOpenBrowser:rv,internalSelectComposition:na,internalGetCompositions:iF,internalRenderFrames:aC,internalRenderMedia:ne,validOpenGlRenderers:rm,isIpV6Supported:it,getChromiumGpuInformation:nn,getPortConfig:r5,makeDownloadMap:rX,getExtensionFromAudioCodec:i8,makeFileExecutableIfItIsNot:tA,resolveAudioCodec:i5,getShouldRenderAudio:a5,codecSupportsMedia:aI,toMegabytes:t4,internalEnsureBrowser:rc,printUsefulErrorMessage:iA,DEFAULT_RENDER_FRAMES_OFFTHREAD_VIDEO_THREADS:2,canConcatVideoSeamlessly:nu,canConcatAudioSeamlessly:nl,internalCombineChunks:nf,defaultOnLog:t6};if("u"<typeof Bun){if(Number(process.version.replace("v","").split(".")[0])<U.NoReactInternals.MIN_NODE_VERSION)throw Error(`Remotion requires at least Node ${U.NoReactInternals.MIN_NODE_VERSION}. You currently have ${process.version}. Update your node version to ${U.NoReactInternals.MIN_NODE_VERSION} to use Remotion.`)}else if(!Bun.semver.satisfies(Bun.version,`>=${U.NoReactInternals.MIN_BUN_VERSION}`))throw Error(`Remotion requires at least Bun ${U.NoReactInternals.MIN_BUN_VERSION}. You currently have ${Bun.version}. Update your Bun version to ${U.NoReactInternals.MIN_BUN_VERSION} to use Remotion.`);var nm=e.i(213008);function ng(e){return e.replace(/^[A-Z]:/,"").replace(/\\/g,"/")}let nv=e=>void 0===e?void 0:e.variant??e.enabled,ny=e=>{if("string"!=typeof e)return e;try{return JSON.parse(e)}catch{return e}},nb="0123456789abcdef";class nx{constructor(e){this.bytes=e}static ofInner(e){if(16===e.length)return new nx(e);throw TypeError("not 128-bit length")}static fromFieldsV7(e,t,r,i){if(!Number.isInteger(e)||!Number.isInteger(t)||!Number.isInteger(r)||!Number.isInteger(i)||e<0||t<0||r<0||i<0||e>0xffffffffffff||t>4095||r>0x3fffffff||i>0xffffffff)throw RangeError("invalid field value");let a=new Uint8Array(16);return a[0]=e/0x10000000000,a[1]=e/0x100000000,a[2]=e/0x1000000,a[3]=e/65536,a[4]=e/256,a[5]=e,a[6]=112|t>>>8,a[7]=t,a[8]=128|r>>>24,a[9]=r>>>16,a[10]=r>>>8,a[11]=r,a[12]=i>>>24,a[13]=i>>>16,a[14]=i>>>8,a[15]=i,new nx(a)}static parse(e){let t;switch(e.length){case 32:t=/^[0-9a-f]{32}$/i.exec(e)?.[0];break;case 36:t=/^([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(e)?.slice(1,6).join("");break;case 38:t=/^\{([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})\}$/i.exec(e)?.slice(1,6).join("");break;case 45:t=/^urn:uuid:([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(e)?.slice(1,6).join("")}if(t){let e=new Uint8Array(16);for(let r=0;r<16;r+=4){let i=parseInt(t.substring(2*r,2*r+8),16);e[r+0]=i>>>24,e[r+1]=i>>>16,e[r+2]=i>>>8,e[r+3]=i}return new nx(e)}throw SyntaxError("could not parse UUID string")}toString(){let e="";for(let t=0;t<this.bytes.length;t++)e+=nb.charAt(this.bytes[t]>>>4),e+=nb.charAt(15&this.bytes[t]),(3===t||5===t||7===t||9===t)&&(e+="-");return e}toHex(){let e="";for(let t=0;t<this.bytes.length;t++)e+=nb.charAt(this.bytes[t]>>>4),e+=nb.charAt(15&this.bytes[t]);return e}toJSON(){return this.toString()}getVariant(){let e=this.bytes[8]>>>4;if(e<0)throw Error("unreachable");if(e<=7)return this.bytes.every(e=>0===e)?"NIL":"VAR_0";if(e<=11)return"VAR_10";if(e<=13)return"VAR_110";if(e<=15)return this.bytes.every(e=>255===e)?"MAX":"VAR_RESERVED";throw Error("unreachable")}getVersion(){return"VAR_10"===this.getVariant()?this.bytes[6]>>>4:void 0}clone(){return new nx(this.bytes.slice(0))}equals(e){return 0===this.compareTo(e)}compareTo(e){for(let t=0;t<16;t++){let r=this.bytes[t]-e.bytes[t];if(0!==r)return Math.sign(r)}return 0}}class nw{constructor(e){this.timestamp=0,this.counter=0,this.random=e??nS()}generate(){return this.generateOrResetCore(Date.now(),1e4)}generateOrAbort(){return this.generateOrAbortCore(Date.now(),1e4)}generateOrResetCore(e,t){let r=this.generateOrAbortCore(e,t);return void 0===r&&(this.timestamp=0,r=this.generateOrAbortCore(e,t)),r}generateOrAbortCore(e,t){if(!Number.isInteger(e)||e<1||e>0xffffffffffff)throw RangeError("`unixTsMs` must be a 48-bit positive integer");if(t<0||t>0xffffffffffff)throw RangeError("`rollbackAllowance` out of reasonable range");if(e>this.timestamp)this.timestamp=e,this.resetCounter();else{if(!(e+t>=this.timestamp))return;this.counter++,this.counter>0x3ffffffffff&&(this.timestamp++,this.resetCounter())}return nx.fromFieldsV7(this.timestamp,Math.trunc(this.counter/0x40000000),this.counter&0x40000000-1,this.random.nextUint32())}resetCounter(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}generateV4(){let e=new Uint8Array(Uint32Array.of(this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32()).buffer);return e[6]=64|e[6]>>>4,e[8]=128|e[8]>>>2,nx.ofInner(e)}}let nS=()=>({nextUint32:()=>65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random())}),nk=()=>(t||(t=new nw)).generate(),nC=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercel-screenshot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],nE=function(e,t=[]){if(!e)return!1;let r=e.toLowerCase();return nC.concat(t).some(e=>{let t=e.toLowerCase();return -1!==r.indexOf(t)})};e.s(["DEFAULT_BLOCKED_UA_STRS",()=>nC,"isBlockedUA",()=>nE],669815);var n_=((f={}).AnonymousId="anonymous_id",f.DistinctId="distinct_id",f.Props="props",f.EnablePersonProcessing="enable_person_processing",f.PersonMode="person_mode",f.FeatureFlagDetails="feature_flag_details",f.FeatureFlags="feature_flags",f.FeatureFlagPayloads="feature_flag_payloads",f.BootstrapFeatureFlagDetails="bootstrap_feature_flag_details",f.BootstrapFeatureFlags="bootstrap_feature_flags",f.BootstrapFeatureFlagPayloads="bootstrap_feature_flag_payloads",f.OverrideFeatureFlags="override_feature_flags",f.Queue="queue",f.OptedOut="opted_out",f.SessionId="session_id",f.SessionStartTimestamp="session_start_timestamp",f.SessionLastTimestamp="session_timestamp",f.PersonProperties="person_properties",f.GroupProperties="group_properties",f.InstalledAppBuild="installed_app_build",f.InstalledAppVersion="installed_app_version",f.SessionReplay="session_replay",f.SurveyLastSeenDate="survey_last_seen_date",f.SurveysSeen="surveys_seen",f.Surveys="surveys",f.RemoteConfig="remote_config",f.FlagsEndpointWasHit="flags_endpoint_was_hit",f);let nT=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];function nP(e,t){return -1!==e.indexOf(t)}let nI=function(e){return e.trim()},nA=function(e){return e.replace(/^\$/,"")};function nO(e){return["distinct_id","distinctid"].includes(e.toLowerCase())}e.s(["includes",()=>nP,"isDistinctIdStringLike",()=>nO,"stripLeadingDollar",()=>nA,"trim",()=>nI],438311);let nM=Array.isArray,nF=Object.prototype,nR=nF.hasOwnProperty,nD=nF.toString,nj=nM||function(e){return"[object Array]"===nD.call(e)},nL=e=>"function"==typeof e,nB=e=>nL(e)&&-1!==e.toString().indexOf("[native code]"),nN=e=>e===Object(e)&&!nj(e),n$=e=>{if(nN(e)){for(let t in e)if(nR.call(e,t))return!1;return!0}return!1},nz=e=>void 0===e,nU=e=>"[object String]"==nD.call(e),nV=e=>nU(e)&&0===e.trim().length,nH=e=>null===e,nW=e=>nz(e)||nH(e),nq=e=>"[object Number]"==nD.call(e)&&e==e,nG=e=>nq(e)&&e>0,nZ=e=>"[object Boolean]"===nD.call(e),nK=e=>e instanceof FormData,nQ=e=>e instanceof File,nX=e=>e instanceof Error,nJ=e=>nP(nT,e);function nY(e){return null===e||"object"!=typeof e}function n0(e,t){return Object.prototype.toString.call(e)===`[object ${t}]`}function n1(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":case"[object WebAssembly.Exception]":return!0;default:return n6(e,Error)}}function n2(e){return n0(e,"ErrorEvent")}function n4(e){return!nz(Event)&&n6(e,Event)}function n3(e){return n0(e,"Object")}function n6(e,t){try{return e instanceof t}catch{return!1}}let n8=[!0,"true",1,"1","yes"],n5=e=>nP(n8,e),n7=[!1,"false",0,"0","no"],n9=e=>nP(n7,e);function oe(e,t,r,i,a){if(t>r&&(i.warn("min cannot be greater than max."),t=r),nq(e))if(e>r)return i.warn(" cannot be  greater than max: "+r+". Using max value instead."),r;else return e<t?(i.warn(" cannot be less than min: "+t+". Using min value instead."),t):e;return i.warn(" must be a number. using max or fallback. max: "+r+", fallback: "+a),oe(a||r,t,r,i)}e.s(["hasOwnProperty",()=>nR,"isArray",()=>nj,"isBoolean",()=>nZ,"isBuiltin",()=>n0,"isEmptyObject",()=>n$,"isEmptyString",()=>nV,"isError",()=>n1,"isErrorEvent",()=>n2,"isEvent",()=>n4,"isFile",()=>nQ,"isFormData",()=>nK,"isFunction",()=>nL,"isKnownUnsafeEditableEvent",()=>nJ,"isNativeFunction",()=>nB,"isNoLike",()=>n9,"isNull",()=>nH,"isNullish",()=>nW,"isNumber",()=>nq,"isObject",()=>nN,"isPlainError",()=>nX,"isPlainObject",()=>n3,"isPositiveNumber",()=>nG,"isPrimitive",()=>nY,"isString",()=>nU,"isUndefined",()=>nz,"isYesLike",()=>n5,"noLikeValues",()=>n7,"yesLikeValues",()=>n8],345365),e.s(["clampToRange",()=>oe],273165);class ot{constructor(e){this._buckets={},this._onBucketRateLimited=e._onBucketRateLimited,this._bucketSize=oe(e.bucketSize,0,100,e._logger),this._refillRate=oe(e.refillRate,0,this._bucketSize,e._logger),this._refillInterval=oe(e.refillInterval,0,864e5,e._logger)}_applyRefill(e,t){let r=Math.floor((t-e.lastAccess)/this._refillInterval);if(r>0){let t=r*this._refillRate;e.tokens=Math.min(e.tokens+t,this._bucketSize),e.lastAccess=e.lastAccess+r*this._refillInterval}}consumeRateLimit(e){let t=Date.now(),r=String(e),i=this._buckets[r];return i?this._applyRefill(i,t):(i={tokens:this._bucketSize,lastAccess:t},this._buckets[r]=i),0===i.tokens||(i.tokens--,0===i.tokens&&this._onBucketRateLimited?.(e),0===i.tokens)}stop(){this._buckets={}}}e.s(["BucketedRateLimiter",()=>ot],597908);class or{add(e){let t=nk().toString();return this.promiseByIds[t]=e,e.catch(()=>{}).finally(()=>{delete this.promiseByIds[t]}),e}async join(){let e=Object.values(this.promiseByIds),t=e.length;for(;t>0;)await Promise.all(e),t=(e=Object.values(this.promiseByIds)).length}get length(){return Object.keys(this.promiseByIds).length}constructor(){this.promiseByIds={}}}e.s(["PromiseQueue",()=>or],329250);let oi=(e,t,r)=>{function i(a,...n){t(()=>{(0,r[a])(e,...n)})}return{info:(...e)=>{i("log",...e)},warn:(...e)=>{i("warn",...e)},error:(...e)=>{i("error",...e)},critical:(...t)=>{r.error(e,...t)},createLogger:i=>oi(`${e} ${i}`,t,r)}},oa=e=>e();function on(e,t=oa){return oi(e,t,function(e=console){return{log:e.log.bind(e),warn:e.warn.bind(e),error:e.error.bind(e),debug:e.debug.bind(e)}}())}e.s(["_createLogger",()=>oi,"createLogger",()=>on],890294);let oo="Mobile",os="Android",ol="Tablet",ou=os+" "+ol,oc="iPad",od="Apple",op=od+" Watch",of="Safari",oh="BlackBerry",om="Samsung",og=om+"Browser",ov=om+" Internet",oy="Chrome",ob=oy+" OS",ox=oy+" iOS",ow="Internet Explorer",oS=ow+" "+oo,ok="Opera",oC=ok+" Mini",oE="Edge",o_="Microsoft "+oE,oT="Firefox",oP=oT+" iOS",oI="Nintendo",oA="PlayStation",oO="Xbox",oM=os+" "+oo,oF=oo+" "+of,oR="Windows",oD=oR+" Phone",oj="Nokia",oL="Ouya",oB="Generic",oN=oB+" "+oo.toLowerCase(),o$=oB+" "+ol.toLowerCase(),oz="Konqueror",oU="(\\d+(\\.\\d+)?)",oV=RegExp("Version/"+oU),oH=RegExp(oO,"i"),oW=RegExp(oA+" \\w+","i"),oq=RegExp(oI+" \\w+","i"),oG=RegExp(oh+"|PlayBook|BB10","i"),oZ={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000","5.1":"XP","5.2":"XP","6.0":"Vista","6.1":"7","6.2":"8","6.3":"8.1","6.4":"10","10.0":"10"},oK=function(e,t){var r;if(t=t||"",nP(e," OPR/")&&nP(e,"Mini"))return oC;if(nP(e," OPR/"))return ok;if(oG.test(e))return oh;if(nP(e,"IE"+oo)||nP(e,"WPDesktop"))return oS;if(nP(e,og))return ov;if(nP(e,oE)||nP(e,"Edg/"))return o_;if(nP(e,"FBIOS"))return"Facebook "+oo;if(nP(e,"UCWEB")||nP(e,"UCBrowser"))return"UC Browser";if(nP(e,"CriOS"))return ox;if(nP(e,"CrMo")||nP(e,oy))return oy;if(nP(e,os)&&nP(e,of))return oM;if(nP(e,"FxiOS"))return oP;if(nP(e.toLowerCase(),oz.toLowerCase()))return oz;if((r=t)&&nP(r,od)||nP(e,of)&&!nP(e,oy)&&!nP(e,os))return nP(e,oo)?oF:of;if(nP(e,oT))return oT;else if(nP(e,"MSIE")||nP(e,"Trident/"))return ow;else if(nP(e,"Gecko"))return oT;return""},oQ={[oS]:[RegExp("rv:"+oU)],[o_]:[RegExp(oE+"?\\/"+oU)],[oy]:[RegExp("("+oy+"|CrMo)\\/"+oU)],[ox]:[RegExp("CriOS\\/"+oU)],"UC Browser":[RegExp("(UCBrowser|UCWEB)\\/"+oU)],[of]:[oV],[oF]:[oV],[ok]:[RegExp("("+ok+"|OPR)\\/"+oU)],[oT]:[RegExp(oT+"\\/"+oU)],[oP]:[RegExp("FxiOS\\/"+oU)],[oz]:[RegExp("Konqueror[:/]?"+oU,"i")],[oh]:[RegExp(oh+" "+oU),oV],[oM]:[RegExp("android\\s"+oU,"i")],[ov]:[RegExp(og+"\\/"+oU)],[ow]:[RegExp("(rv:|MSIE )"+oU)],Mozilla:[RegExp("rv:"+oU)]},oX=function(e,t){let r=oQ[oK(e,t)];if(nz(r))return null;for(let t=0;t<r.length;t++){let i=r[t],a=e.match(i);if(a)return parseFloat(a[a.length-2])}return null},oJ=[[RegExp(oO+"; "+oO+" (.*?)[);]","i"),e=>[oO,e&&e[1]||""]],[RegExp(oI,"i"),[oI,""]],[RegExp(oA,"i"),[oA,""]],[oG,[oh,""]],[RegExp(oR,"i"),(e,t)=>{if(/Phone/.test(t)||/WPDesktop/.test(t))return[oD,""];if(new RegExp(oo).test(t)&&!/IEMobile\b/.test(t))return[oR+" "+oo,""];let r=/Windows NT ([0-9.]+)/i.exec(t);if(r&&r[1]){let e=oZ[r[1]]||"";return/arm/i.test(t)&&(e="RT"),[oR,e]}return[oR,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,e=>e&&e[3]?["iOS",[e[3],e[4],e[5]||"0"].join(".")]:["iOS",""]],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,e=>{let t="";return e&&e.length>=3&&(t=nz(e[2])?e[3]:e[2]),["watchOS",t]}],[RegExp("("+os+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+os+")","i"),e=>e&&e[2]?[os,[e[2],e[3],e[4]||"0"].join(".")]:[os,""]],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,e=>{let t=["Mac OS X",""];if(e&&e[1]){let r=[e[1],e[2],e[3]||"0"];t[1]=r.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[ob,""]],[/Linux|debian/i,["Linux",""]]],oY=function(e){for(let t=0;t<oJ.length;t++){let[r,i]=oJ[t],a=r.exec(e),n=a&&(nL(i)?i(a,e):i);if(n)return n}return["",""]},o0=function(e){if(oq.test(e))return oI;if(oW.test(e))return oA;if(oH.test(e))return oO;if(RegExp(oL,"i").test(e))return oL;if(RegExp("("+oD+"|WPDesktop)","i").test(e))return oD;if(/iPad/.test(e))return oc;if(/iPod/.test(e))return"iPod Touch";if(/iPhone/.test(e))return"iPhone";if(/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e))return op;else if(oG.test(e))return oh;else if(/(kobo)\s(ereader|touch)/i.test(e))return"Kobo";else if(RegExp(oj,"i").test(e))return oj;else if(/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e)||/(kf[a-z]+)( bui|\)).+silk\//i.test(e))return"Kindle Fire";else if(/(Android|ZTE)/i.test(e))if(!(!new RegExp(oo).test(e)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e)))return os;else return/pixel[\daxl ]{1,6}/i.test(e)&&!/pixel c/i.test(e)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e)||/lmy47v/i.test(e)&&!/QTAQZ3/i.test(e)?os:ou;else if(RegExp("(pda|"+oo+")","i").test(e))return oN;else if(RegExp(ol,"i").test(e)&&!RegExp(ol+" pc","i").test(e))return o$;else return""},o1=function(e){let t=o0(e);return t===oc||t===ou||"Kobo"===t||"Kindle Fire"===t||t===o$?ol:t===oI||t===oO||t===oA||t===oL?"Console":t===op?"Wearable":t?oo:"Desktop"};e.s(["detectBrowser",()=>oK,"detectBrowserVersion",()=>oX,"detectDevice",()=>o0,"detectDeviceType",()=>o1,"detectOS",()=>oY],854543);let o2="utf8";function o4(e,t){if(!e||"string"!=typeof e||0===e.trim().length)throw Error(t)}function o3(e){return e?.replace(/\/+$/,"")}async function o6(e,t){let r=null;for(let i=0;i<t.retryCount+1;i++){i>0&&await new Promise(e=>setTimeout(e,t.retryDelay));try{return await e()}catch(e){if(r=e,!t.retryCheck(e))throw e}}throw r}function o8(){return new Date().getTime()}function o5(){return new Date().toISOString()}function o7(e,t){let r=setTimeout(e,t);return r?.unref&&r?.unref(),r}let o9=e=>e&&"function"==typeof e.then,se=e=>e instanceof Error;function st(){return"u">typeof fetch?fetch:void 0!==globalThis.fetch?globalThis.fetch:void 0}function sr(e){return Promise.all(e.map(e=>(e??Promise.resolve()).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))}e.s(["STRING_FORMAT",()=>o2,"allSettled",()=>sr,"assert",()=>o4,"currentISOTime",()=>o5,"currentTimestamp",()=>o8,"getFetch",()=>st,"isError",()=>se,"isPromise",()=>o9,"removeTrailingSlash",()=>o3,"retriable",()=>o6,"safeSetTimeout",()=>o7],903462);class si{constructor(){this.events={},this.events={}}on(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),()=>{this.events[e]=this.events[e].filter(e=>e!==t)}}emit(e,t){for(let r of this.events[e]||[])r(t);for(let r of this.events["*"]||[])r(e,t)}}async function sa(e,t=!0){try{let t=new Blob([e],{type:"text/plain"}).stream().pipeThrough(new CompressionStream("gzip"));return await new Response(t).blob()}catch(e){return t&&console.error("Failed to gzip compress data",e),null}}class sn extends Error{constructor(e,t){super("HTTP error while fetching PostHog: status="+e.status+", reqByteLength="+t),this.response=e,this.reqByteLength=t,this.name="PostHogFetchHttpError"}get status(){return this.response.status}get text(){return this.response.text()}get json(){return this.response.json()}}class so extends Error{constructor(e){super("Network error while fetching PostHog",e instanceof Error?{cause:e}:{}),this.error=e,this.name="PostHogFetchNetworkError"}}async function ss(e){if(e instanceof sn){let t="";try{t=await e.text}catch{}console.error(`Error while flushing PostHog: message=${e.message}, response body=${t}`,e)}else console.error("Error while flushing PostHog",e);return Promise.resolve()}function sl(e){return"object"==typeof e&&(e instanceof sn||e instanceof so)}function su(e){return"object"==typeof e&&e instanceof sn&&413===e.status}class sc{constructor(e,t={}){this.flushPromise=null,this.shutdownPromise=null,this.promiseQueue=new or,this._events=new si,this._isInitialized=!1,o4(e,"You must pass your PostHog project's api key."),this.apiKey=e,this.host=o3(t.host||"https://us.i.posthog.com"),this.flushAt=t.flushAt?Math.max(t.flushAt,1):20,this.maxBatchSize=Math.max(this.flushAt,t.maxBatchSize??100),this.maxQueueSize=Math.max(this.flushAt,t.maxQueueSize??1e3),this.flushInterval=t.flushInterval??1e4,this.preloadFeatureFlags=t.preloadFeatureFlags??!0,this.defaultOptIn=t.defaultOptIn??!0,this.disableSurveys=t.disableSurveys??!1,this._retryOptions={retryCount:t.fetchRetryCount??3,retryDelay:t.fetchRetryDelay??3e3,retryCheck:sl},this.requestTimeout=t.requestTimeout??1e4,this.featureFlagsRequestTimeoutMs=t.featureFlagsRequestTimeoutMs??3e3,this.remoteConfigRequestTimeoutMs=t.remoteConfigRequestTimeoutMs??3e3,this.disableGeoip=t.disableGeoip??!0,this.disabled=t.disabled??!1,this.historicalMigration=t?.historicalMigration??!1,this._initPromise=Promise.resolve(),this._isInitialized=!0,this._logger=on("[PostHog]",this.logMsgIfDebug.bind(this)),this.evaluationContexts=t?.evaluationContexts??t?.evaluationEnvironments,t?.evaluationEnvironments&&!t?.evaluationContexts&&this._logger.warn("evaluationEnvironments is deprecated. Use evaluationContexts instead. This property will be removed in a future version."),this.disableCompression=!("CompressionStream"in globalThis)||(t?.disableCompression??!1)}logMsgIfDebug(e){this.isDebug&&e()}wrap(e){return this.disabled?void this._logger.warn("The client is disabled"):this._isInitialized?e():void this._initPromise.then(()=>e())}getCommonEventProperties(){return{$lib:this.getLibraryId(),$lib_version:this.getLibraryVersion()}}get optedOut(){return this.getPersistedProperty(n_.OptedOut)??!this.defaultOptIn}async optIn(){this.wrap(()=>{this.setPersistedProperty(n_.OptedOut,!1)})}async optOut(){this.wrap(()=>{this.setPersistedProperty(n_.OptedOut,!0)})}on(e,t){return this._events.on(e,t)}debug(e=!0){if(this.removeDebugCallback?.(),e){let e=this.on("*",(e,t)=>this._logger.info(e,t));this.removeDebugCallback=()=>{e(),this.removeDebugCallback=void 0}}}get isDebug(){return!!this.removeDebugCallback}get isDisabled(){return this.disabled}buildPayload(e){return{distinct_id:e.distinct_id,event:e.event,properties:{...e.properties||{},...this.getCommonEventProperties()}}}addPendingPromise(e){return this.promiseQueue.add(e)}identifyStateless(e,t,r){this.wrap(()=>{let i={...this.buildPayload({distinct_id:e,event:"$identify",properties:t})};this.enqueue("identify",i,r)})}async identifyStatelessImmediate(e,t,r){let i={...this.buildPayload({distinct_id:e,event:"$identify",properties:t})};await this.sendImmediate("identify",i,r)}captureStateless(e,t,r,i){this.wrap(()=>{let a=this.buildPayload({distinct_id:e,event:t,properties:r});this.enqueue("capture",a,i)})}async captureStatelessImmediate(e,t,r,i){let a=this.buildPayload({distinct_id:e,event:t,properties:r});await this.sendImmediate("capture",a,i)}aliasStateless(e,t,r,i){this.wrap(()=>{let a=this.buildPayload({event:"$create_alias",distinct_id:t,properties:{...r||{},distinct_id:t,alias:e}});this.enqueue("alias",a,i)})}async aliasStatelessImmediate(e,t,r,i){let a=this.buildPayload({event:"$create_alias",distinct_id:t,properties:{...r||{},distinct_id:t,alias:e}});await this.sendImmediate("alias",a,i)}groupIdentifyStateless(e,t,r,i,a,n){this.wrap(()=>{let o=this.buildPayload({distinct_id:a||`$${e}_${t}`,event:"$groupidentify",properties:{$group_type:e,$group_key:t,$group_set:r||{},...n||{}}});this.enqueue("capture",o,i)})}async getRemoteConfig(){await this._initPromise;let e=this.host;"https://us.i.posthog.com"===e?e="https://us-assets.i.posthog.com":"https://eu.i.posthog.com"===e&&(e="https://eu-assets.i.posthog.com");let t=`${e}/array/${this.apiKey}/config`,r={method:"GET",headers:{...this.getCustomHeaders(),"Content-Type":"application/json"}};return this.fetchWithRetry(t,r,{retryCount:0},this.remoteConfigRequestTimeoutMs).then(e=>e.json()).catch(e=>{this._logger.error("Remote config could not be loaded",e),this._events.emit("error",e)})}async getFlags(e,t={},r={},i={},a={},n=!0){await this._initPromise;let o=`${this.host}/flags/?v=2${n?"&config=true":""}`,s={token:this.apiKey,distinct_id:e,groups:t,person_properties:r,group_properties:i,...a};this.evaluationContexts&&this.evaluationContexts.length>0&&(s.evaluation_contexts=this.evaluationContexts);let l={method:"POST",headers:{...this.getCustomHeaders(),"Content-Type":"application/json"},body:JSON.stringify(s)};return this._logger.info("Flags URL",o),this.fetchWithRetry(o,l,{retryCount:0},this.featureFlagsRequestTimeoutMs).then(e=>e.json()).then(e=>({success:!0,response:(e=>{if("flags"in e){let t,r=Object.fromEntries(Object.entries(e.flags??{}).map(([e,t])=>[e,nv(t)]).filter(([,e])=>void 0!==e)),i=Object.fromEntries(Object.keys(t=e.flags??{}).filter(e=>{let r=t[e];return r.enabled&&r.metadata&&void 0!==r.metadata.payload}).map(e=>{let r=t[e].metadata?.payload;return[e,r?ny(r):void 0]}));return{...e,featureFlags:r,featureFlagPayloads:i}}{let t=e.featureFlags??{},r=Object.fromEntries(Object.entries(e.featureFlagPayloads||{}).map(([e,t])=>[e,ny(t)])),i=Object.fromEntries(Object.entries(t).map(([e,t])=>{var i,a;return[e,{key:e,enabled:"string"==typeof(i=t)||i,variant:"string"==typeof i?i:void 0,reason:void 0,metadata:{id:void 0,version:void 0,payload:(a=r[e])?JSON.stringify(a):void 0,description:void 0}}]}));return{...e,featureFlags:t,featureFlagPayloads:r,flags:i}}})(e)})).catch(e=>(this._events.emit("error",e),{success:!1,error:this.categorizeRequestError(e)}))}categorizeRequestError(e){if(e instanceof sn)return{type:"api_error",statusCode:e.status};if(e instanceof so){let t=e.error;return t instanceof Error&&("AbortError"===t.name||"TimeoutError"===t.name)?{type:"timeout"}:{type:"connection_error"}}return{type:"unknown_error"}}async getFeatureFlagStateless(e,t,r={},i={},a={},n){await this._initPromise;let o=await this.getFeatureFlagDetailStateless(e,t,r,i,a,n);if(void 0===o)return{response:void 0,requestId:void 0};let s=nv(o.response);return void 0===s&&(s=!1),{response:s,requestId:o.requestId}}async getFeatureFlagDetailStateless(e,t,r={},i={},a={},n){await this._initPromise;let o=await this.getFeatureFlagDetailsStateless(t,r,i,a,n,[e]);if(void 0!==o)return{response:o.flags[e],requestId:o.requestId,evaluatedAt:o.evaluatedAt}}async getFeatureFlagPayloadStateless(e,t,r={},i={},a={},n){await this._initPromise;let o=await this.getFeatureFlagPayloadsStateless(t,r,i,a,n,[e]);if(!o)return;let s=o[e];return void 0===s?null:s}async getFeatureFlagPayloadsStateless(e,t={},r={},i={},a,n){return await this._initPromise,(await this.getFeatureFlagsAndPayloadsStateless(e,t,r,i,a,n)).payloads}async getFeatureFlagsStateless(e,t={},r={},i={},a,n){return await this._initPromise,await this.getFeatureFlagsAndPayloadsStateless(e,t,r,i,a,n)}async getFeatureFlagsAndPayloadsStateless(e,t={},r={},i={},a,n){await this._initPromise;let o=await this.getFeatureFlagDetailsStateless(e,t,r,i,a,n);return o?{flags:o.featureFlags,payloads:o.featureFlagPayloads,requestId:o.requestId}:{flags:void 0,payloads:void 0,requestId:void 0}}async getFeatureFlagDetailsStateless(e,t={},r={},i={},a,n){await this._initPromise;let o={};(a??this.disableGeoip)&&(o.geoip_disable=!0),n&&(o.flag_keys_to_evaluate=n);let s=await this.getFlags(e,t,r,i,o);if(!s.success)return;let l=s.response;return(l.errorsWhileComputingFlags&&console.error("[FEATURE FLAGS] Error while computing feature flags, some flags may be missing or incorrect. Learn more at https://posthog.com/docs/feature-flags/best-practices"),l.quotaLimited?.includes("feature_flags"))?(console.warn("[FEATURE FLAGS] Feature flags quota limit exceeded - feature flags unavailable. Learn more about billing limits at https://posthog.com/docs/billing/limits-alerts"),{flags:{},featureFlags:{},featureFlagPayloads:{},requestId:l?.requestId,quotaLimited:l.quotaLimited}):l}async getSurveysStateless(){if(await this._initPromise,!0===this.disableSurveys)return this._logger.info("Loading surveys is disabled."),[];let e=`${this.host}/api/surveys/?token=${this.apiKey}`,t={method:"GET",headers:{...this.getCustomHeaders(),"Content-Type":"application/json"}},r=await this.fetchWithRetry(e,t).then(e=>{if(200!==e.status||!e.json){let t=`Surveys API could not be loaded: ${e.status}`,r=Error(t);this._logger.error(r),this._events.emit("error",Error(t));return}return e.json()}).catch(e=>{this._logger.error("Surveys API could not be loaded",e),this._events.emit("error",e)}),i=r?.surveys;return i&&this._logger.info("Surveys fetched from API: ",JSON.stringify(i)),i??[]}get props(){return this._props||(this._props=this.getPersistedProperty(n_.Props)),this._props||{}}set props(e){this._props=e}async register(e){this.wrap(()=>{this.props={...this.props,...e},this.setPersistedProperty(n_.Props,this.props)})}async unregister(e){this.wrap(()=>{delete this.props[e],this.setPersistedProperty(n_.Props,this.props)})}processBeforeEnqueue(e){return e}enqueue(e,t,r){this.wrap(()=>{if(this.optedOut)return void this._events.emit(e,"Library is disabled. Not sending event. To re-enable, call posthog.optIn()");let i=this.prepareMessage(e,t,r);if(null===(i=this.processBeforeEnqueue(i)))return;let a=this.getPersistedProperty(n_.Queue)||[];a.length>=this.maxQueueSize&&(a.shift(),this._logger.info("Queue is full, the oldest event is dropped.")),a.push({message:i}),this.setPersistedProperty(n_.Queue,a),this._events.emit(e,i),a.length>=this.flushAt&&this.flushBackground(),this.flushInterval&&!this._flushTimer&&(this._flushTimer=o7(()=>this.flushBackground(),this.flushInterval))})}async sendImmediate(e,t,r){if(this.disabled)return void this._logger.warn("The client is disabled");if(this._isInitialized||await this._initPromise,this.optedOut)return void this._events.emit(e,"Library is disabled. Not sending event. To re-enable, call posthog.optIn()");let i=this.prepareMessage(e,t,r);if(null===(i=this.processBeforeEnqueue(i)))return;let a={api_key:this.apiKey,batch:[i],sent_at:o5()};this.historicalMigration&&(a.historical_migration=!0);let n=JSON.stringify(a),o=`${this.host}/batch/`,s=this.disableCompression?null:await sa(n,this.isDebug),l={method:"POST",headers:{...this.getCustomHeaders(),"Content-Type":"application/json",...null!==s&&{"Content-Encoding":"gzip"}},body:s||n};try{await this.fetchWithRetry(o,l)}catch(e){this._events.emit("error",e)}}prepareMessage(e,t,r){let i={...t,type:e,library:this.getLibraryId(),library_version:this.getLibraryVersion(),timestamp:r?.timestamp?r?.timestamp:o5(),uuid:r?.uuid?r.uuid:nk().toString()};return(r?.disableGeoip??this.disableGeoip)&&(i.properties||(i.properties={}),i.properties.$geoip_disable=!0),i.distinctId&&(i.distinct_id=i.distinctId,delete i.distinctId),i}clearFlushTimer(){this._flushTimer&&(clearTimeout(this._flushTimer),this._flushTimer=void 0)}flushBackground(){this.flush().catch(async e=>{await ss(e)})}async flush(){let e=sr([this.flushPromise]).then(()=>this._flush());return this.flushPromise=e,this.addPendingPromise(e),sr([e]).then(()=>{this.flushPromise===e&&(this.flushPromise=null)}),e}getCustomHeaders(){let e=this.getCustomUserAgent(),t={};return e&&""!==e&&(t["User-Agent"]=e),t}async _flush(){this.clearFlushTimer(),await this._initPromise;let e=this.getPersistedProperty(n_.Queue)||[];if(!e.length)return;let t=[],r=e.length;for(;e.length>0&&t.length<r;){let r=e.slice(0,this.maxBatchSize),i=r.map(e=>e.message),a=()=>{let t=(this.getPersistedProperty(n_.Queue)||[]).slice(r.length);this.setPersistedProperty(n_.Queue,t),e=t},n={api_key:this.apiKey,batch:i,sent_at:o5()};this.historicalMigration&&(n.historical_migration=!0);let o=JSON.stringify(n),s=`${this.host}/batch/`,l=this.disableCompression?null:await sa(o,this.isDebug),u={method:"POST",headers:{...this.getCustomHeaders(),"Content-Type":"application/json",...null!==l&&{"Content-Encoding":"gzip"}},body:l||o},c={retryCheck:e=>!su(e)&&sl(e)};try{await this.fetchWithRetry(s,u,c)}catch(e){if(su(e)&&i.length>1){this.maxBatchSize=Math.max(1,Math.floor(i.length/2)),this._logger.warn(`Received 413 when sending batch of size ${i.length}, reducing batch size to ${this.maxBatchSize}`);continue}throw e instanceof so||a(),this._events.emit("error",e),e}a(),t.push(...i)}this._events.emit("flush",t)}async fetchWithRetry(e,t,r,i){AbortSignal.timeout??=function(e){let t=new AbortController;return setTimeout(()=>t.abort(),e),t.signal};let a=t.body?t.body:"",n=-1;try{n=a instanceof Blob?a.size:Buffer.byteLength(a,o2)}catch{n=a instanceof Blob?a.size:new TextEncoder().encode(a).length}return await o6(async()=>{let r=null;try{r=await this.fetch(e,{signal:AbortSignal.timeout(i??this.requestTimeout),...t})}catch(e){throw new so(e)}if("no-cors"!==t.mode&&(r.status<200||r.status>=400))throw new sn(r,n);return r},{...this._retryOptions,...r})}async _shutdown(e=3e4){await this._initPromise;let t=!1;this.clearFlushTimer();let r=async()=>{try{for(await this.promiseQueue.join();;){let e=this.getPersistedProperty(n_.Queue)||[];if(0===e.length||(await this.flush(),t))break}}catch(e){if(!sl(e))throw e;await ss(e)}};return Promise.race([new Promise((r,i)=>{o7(()=>{this._logger.error("Timed out while shutting down PostHog"),t=!0,i("Timeout while shutting down PostHog. Some events may not have been sent.")},e)}),r()])}async shutdown(e=3e4){return this.shutdownPromise?this._logger.warn("shutdown() called while already shutting down. shutdown() is meant to be called once before process exit - use flush() for per-request cleanup"):this.shutdownPromise=this._shutdown(e).finally(()=>{this.shutdownPromise=null}),this.shutdownPromise}}class sd{constructor(e,t,r=[]){this.coercers=e,this.stackParser=t,this.modifiers=r}buildFromUnknown(e,t={}){let r=t&&t.mechanism||{handled:!0,type:"generic"},i=this.buildCoercingContext(r,t,0).apply(e),a=this.buildParsingContext(),n=this.parseStacktrace(i,a);return{$exception_list:this.convertToExceptionList(n,r),$exception_level:"error"}}async modifyFrames(e){for(let t of e)t.stacktrace&&t.stacktrace.frames&&nj(t.stacktrace.frames)&&(t.stacktrace.frames=await this.applyModifiers(t.stacktrace.frames));return e}coerceFallback(e){return{type:"Error",value:"Unknown error",stack:e.syntheticException?.stack,synthetic:!0}}parseStacktrace(e,t){let r,i;return null!=e.cause&&(r=this.parseStacktrace(e.cause,t)),""!=e.stack&&null!=e.stack&&(i=this.applyChunkIds(this.stackParser(e.stack,+!!e.synthetic),t.chunkIdMap)),{...e,cause:r,stack:i}}applyChunkIds(e,t){return e.map(e=>(e.filename&&t&&(e.chunk_id=t[e.filename]),e))}applyCoercers(e,t){for(let r of this.coercers)if(r.match(e))return r.coerce(e,t);return this.coerceFallback(t)}async applyModifiers(e){let t=e;for(let e of this.modifiers)t=await e(t);return t}convertToExceptionList(e,t){let r={type:e.type,value:e.value,mechanism:{type:t.type??"generic",handled:t.handled??!0,synthetic:e.synthetic??!1}};e.stack&&(r.stacktrace={type:"raw",frames:e.stack});let i=[r];return null!=e.cause&&i.push(...this.convertToExceptionList(e.cause,{...t,handled:!0})),i}buildParsingContext(){return{chunkIdMap:function(e){let t=globalThis._posthogChunkIds;if(!t)return;let n=Object.keys(t);return a&&n.length===i?a:(i=n.length,a=n.reduce((i,a)=>{r||(r={});let n=r[a];if(n)i[n[0]]=n[1];else{let n=e(a);for(let e=n.length-1;e>=0;e--){let o=n[e],s=o?.filename,l=t[a];if(s&&l){i[s]=l,r[a]=[s,l];break}}}return i},{}))}(this.stackParser)}}buildCoercingContext(e,t,r=0){let i=(r,i)=>{if(i<=4){let a=this.buildCoercingContext(e,t,i);return this.applyCoercers(r,a)}};return{...t,syntheticException:0==r?t.syntheticException:void 0,mechanism:e,apply:e=>i(e,r),next:e=>i(e,r+1)}}}function sp(e,t,r,i,a){let n={platform:e,filename:t,function:"<anonymous>"===r?"?":r,in_app:!0};return nz(i)||(n.lineno=i),nz(a)||(n.colno=a),n}e.s(["ErrorPropertiesBuilder",()=>sd],169309);let sf=(e,t)=>{let r=-1!==e.indexOf("safari-extension"),i=-1!==e.indexOf("safari-web-extension");return r||i?[-1!==e.indexOf("@")?e.split("@")[0]:"?",r?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},sh=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,sm=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,sg=/\((\S*)(?::(\d+))(?::(\d+))\)/,sv=(e,t)=>{let r=sh.exec(e);if(r){let[,e,i,a]=r;return sp(t,e,"?",+i,+a)}let i=sm.exec(e);if(i){if(i[2]&&0===i[2].indexOf("eval")){let e=sg.exec(i[2]);e&&(i[2]=e[1],i[3]=e[2],i[4]=e[3])}let[e,r]=sf(i[1]||"?",i[2]);return sp(t,r,e,i[3]?+i[3]:void 0,i[4]?+i[4]:void 0)}},sy=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,sb=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,sx=(e,t)=>{let r=sy.exec(e);if(r){if(r[3]&&r[3].indexOf(" > eval")>-1){let e=sb.exec(r[3]);e&&(r[1]=r[1]||"eval",r[3]=e[1],r[4]=e[2],r[5]="")}let e=r[3],i=r[1]||"?";return[i,e]=sf(i,e),sp(t,e,i,r[4]?+r[4]:void 0,r[5]?+r[5]:void 0)}},sw=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,sS=(e,t)=>{let r=sw.exec(e);return r?sp(t,r[2],r[1]||"?",+r[3],r[4]?+r[4]:void 0):void 0},sk=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,sC=(e,t)=>{let r=sk.exec(e);return r?sp(t,r[2],r[3]||"?",+r[1]):void 0},sE=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,s_=(e,t)=>{let r=sE.exec(e);return r?sp(t,r[5],r[3]||r[4]||"?",+r[1],+r[2]):void 0},sT=/^\s*[-]{4,}$/,sP=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/,sI=(e,t)=>{let r=e.match(sP);if(r){let e,i,a,n,o;if(r[1]){let t=(a=r[1]).lastIndexOf(".");if("."===a[t-1]&&t--,t>0){e=a.slice(0,t),i=a.slice(t+1);let r=e.indexOf(".Module");r>0&&(a=a.slice(r+1),e=e.slice(0,r))}n=void 0}i&&(n=e,o=i),"<anonymous>"===i&&(o=void 0,a=void 0),void 0===a&&(o=o||"?",a=n?`${n}.${o}`:o);let s=r[2]?.startsWith("file://")?r[2].slice(7):r[2],l="native"===r[5];return s?.match(/\/[A-Z]:/)&&(s=s.slice(1)),s||!r[5]||l||(s=r[5]),{filename:s?decodeURI(s):void 0,module:void 0,function:a,lineno:sA(r[3]),colno:sA(r[4]),in_app:function(e,t=!1){return!(t||e&&!e.startsWith("/")&&!e.match(/^[A-Z]:/)&&!e.startsWith(".")&&!e.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&void 0!==e&&!e.includes("node_modules/")}(s||"",l),platform:t}}if(e.match(sT))return{filename:e,platform:t}};function sA(e){return parseInt(e||"",10)||void 0}let sO=/\(error: (.*)\)/;function sM(e){if(!e.length)return[];let t=Array.from(e);return t.reverse(),t.slice(0,50).map(e=>{var r;return{...e,filename:e.filename||((r=t)[r.length-1]||{}).filename,function:e.function||"?"}})}function sF(){return sR("web:javascript",sv,sx)}function sR(e,...t){return(r,i=0)=>{let a=[],n=r.split("\n");for(let r=i;r<n.length;r++){let i=n[r];if(i.length>1024)continue;let o=sO.test(i)?i.replace(sO,"$1"):i;if(!o.match(/\S*Error: /)){for(let r of t){let t=r(o,e);if(t){a.push(t);break}}if(a.length>=50)break}}return sM(a)}}e.s(["createDefaultStackParser",()=>sF,"createStackParser",()=>sR,"reverseAndStripFrames",()=>sM],910728);class sD{match(e){return this.isDOMException(e)||this.isDOMError(e)}coerce(e,t){let r=nU(e.stack);return{type:this.getType(e),value:this.getValue(e),stack:r?e.stack:void 0,cause:e.cause?t.next(e.cause):void 0,synthetic:!1}}getType(e){return this.isDOMError(e)?"DOMError":"DOMException"}getValue(e){let t=e.name||(this.isDOMError(e)?"DOMError":"DOMException");return e.message?`${t}: ${e.message}`:t}isDOMException(e){return n0(e,"DOMException")}isDOMError(e){return n0(e,"DOMError")}}e.s(["DOMExceptionCoercer",()=>sD],333603);class sj{match(e){return nX(e)}coerce(e,t){return{type:this.getType(e),value:this.getMessage(e,t),stack:this.getStack(e),cause:e.cause?t.next(e.cause):void 0,synthetic:!1}}getType(e){return e.name||e.constructor.name}getMessage(e,t){let r=e.message;return r.error&&"string"==typeof r.error.message?String(r.error.message):String(r)}getStack(e){return e.stacktrace||e.stack||void 0}}e.s(["ErrorCoercer",()=>sj],913446);class sL{match(e){return n2(e)&&void 0!=e.error}coerce(e,t){let r=t.apply(e.error);return r||{type:"ErrorEvent",value:e.message,stack:t.syntheticException?.stack,synthetic:!0}}}e.s(["ErrorEventCoercer",()=>sL],760887);let sB=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;class sN{match(e){return"string"==typeof e}coerce(e,t){let[r,i]=this.getInfos(e);return{type:r??"Error",value:i??e,stack:t.syntheticException?.stack,synthetic:!0}}getInfos(e){let t="Error",r=e,i=e.match(sB);return i&&(t=i[1],r=i[2]),[t,r]}}e.s(["StringCoercer",()=>sN],622175);let s$=["fatal","error","warning","log","info","debug"];function sz(e,t=40){let r=Object.keys(e);if(r.sort(),!r.length)return"[object has no keys]";for(let e=r.length;e>0;e--){let i=r.slice(0,e).join(", ");if(!(i.length>t)){if(e===r.length)return i;return i.length<=t?i:`${i.slice(0,t)}...`}}return""}class sU{match(e){return"object"==typeof e&&null!==e}coerce(e,t){let r=this.getErrorPropertyFromObject(e);return r?t.apply(r):{type:this.getType(e),value:this.getValue(e),stack:t.syntheticException?.stack,level:this.isSeverityLevel(e.level)?e.level:"error",synthetic:!0}}getType(e){return n4(e)?e.constructor.name:"Error"}getValue(e){if("name"in e&&"string"==typeof e.name){let t=`'${e.name}' captured as exception`;return"message"in e&&"string"==typeof e.message&&(t+=` with message: '${e.message}'`),t}if("message"in e&&"string"==typeof e.message)return e.message;let t=this.getObjectClassName(e),r=sz(e);return`${t&&"Object"!==t?`'${t}'`:"Object"} captured as exception with keys: ${r}`}isSeverityLevel(e){return nU(e)&&!nV(e)&&s$.indexOf(e)>=0}getErrorPropertyFromObject(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let r=e[t];if(se(r))return r}}getObjectClassName(e){try{let t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){return}}}e.s(["ObjectCoercer",()=>sU],112154);class sV{match(e){return n4(e)}coerce(e,t){let r=e.constructor.name;return{type:r,value:`${r} captured as exception with keys: ${sz(e)}`,stack:t.syntheticException?.stack,synthetic:!0}}}e.s(["EventCoercer",()=>sV],41324);class sH{match(e){return nY(e)}coerce(e,t){return{type:"Error",value:`Primitive value captured as exception: ${String(e)}`,stack:t.syntheticException?.stack,synthetic:!0}}}e.s(["PrimitiveCoercer",()=>sH],279478);class sW{match(e){return n0(e,"PromiseRejectionEvent")}coerce(e,t){let r=this.getUnhandledRejectionReason(e);return nY(r)?{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(r)}`,stack:t.syntheticException?.stack,synthetic:!0}:t.apply(r)}getUnhandledRejectionReason(e){if(nY(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}}e.s(["PromiseRejectionEventCoercer",()=>sW],301802),e.s([],559567);class sq{constructor(e){this._maxSize=e,this._cache=new Map}get(e){let t=this._cache.get(e);if(void 0!==t)return this._cache.delete(e),this._cache.set(e,t),t}set(e,t){this._cache.set(e,t)}reduce(){for(;this._cache.size>=this._maxSize;){let e=this._cache.keys().next().value;e&&this._cache.delete(e)}}}e.s(["ReduceableCache",()=>sq],945294),e.s([],21754),e.i(21754),e.i(169309),e.i(910728),e.s(["chromeStackLineParser",()=>sv,"createDefaultStackParser",()=>sF,"createStackParser",()=>sR,"geckoStackLineParser",()=>sx,"nodeStackLineParser",()=>sI,"opera10StackLineParser",()=>sC,"opera11StackLineParser",()=>s_,"reverseAndStripFrames",()=>sM,"winjsStackLineParser",()=>sS],222546),e.i(222546),e.i(559567),e.i(333603),e.i(913446),e.i(760887),e.i(622175),e.i(112154),e.i(41324),e.i(279478),e.i(301802),e.s(["DOMExceptionCoercer",()=>sD,"ErrorCoercer",()=>sj,"ErrorEventCoercer",()=>sL,"EventCoercer",()=>sV,"ObjectCoercer",()=>sU,"PrimitiveCoercer",()=>sH,"PromiseRejectionEventCoercer",()=>sW,"StringCoercer",()=>sN],190166),e.i(190166),e.i(945294),e.s(["DOMExceptionCoercer",()=>sD,"ErrorCoercer",()=>sj,"ErrorEventCoercer",()=>sL,"ErrorPropertiesBuilder",()=>sd,"EventCoercer",()=>sV,"ObjectCoercer",()=>sU,"PrimitiveCoercer",()=>sH,"PromiseRejectionEventCoercer",()=>sW,"ReduceableCache",()=>sq,"StringCoercer",()=>sN,"chromeStackLineParser",()=>sv,"createDefaultStackParser",()=>sF,"createStackParser",()=>sR,"geckoStackLineParser",()=>sx,"nodeStackLineParser",()=>sI,"opera10StackLineParser",()=>sC,"opera11StackLineParser",()=>s_,"reverseAndStripFrames",()=>sM,"winjsStackLineParser",()=>sS],11168);var sG=e.i(11168),sZ=sG,sK=e.i(601457);let sQ=new sZ.ReduceableCache(25),sX=new sZ.ReduceableCache(20);async function sJ(e){let t={};for(let a=e.length-1;a>=0;a--){var r,i;let n=e[a],o=n?.filename;!(!n||"string"!=typeof o||"number"!=typeof n.lineno||(r=o).startsWith("node:")||r.endsWith(".min.js")||r.endsWith(".min.cjs")||r.endsWith(".min.mjs")||r.startsWith("data:")||void 0!==(i=n).lineno&&i.lineno>1e4||void 0!==i.colno&&i.colno>1e3)&&(t[o]||(t[o]=[]),t[o].push(n.lineno))}let a=Object.keys(t);if(0==a.length)return e;let n=[];for(let e of a){if(sX.get(e))continue;let r=t[e];if(!r)continue;r.sort((e,t)=>e-t);let i=function(e){if(!e.length)return[];let t=0,r=e[0];if("number"!=typeof r)return[];let i=s0(r),a=[];for(;;){if(t===e.length-1){a.push(i);break}let r=e[t+1];if("number"!=typeof r)break;r<=i[1]?i[1]=r+7:(a.push(i),i=s0(r)),t++}return a}(r);if(i.every(t=>(function(e,t){let r=sQ.get(e);if(void 0===r)return!1;for(let e=t[0];e<=t[1];e++)if(void 0===r[e])return!1;return!0})(e,t)))continue;let a=function(e,t,r){let i=e.get(t);return void 0===i?(e.set(t,r),r):i}(sQ,e,{});n.push(function(e,t,r){return new Promise(i=>{let a=(0,R.createReadStream)(e),n=(0,sK.createInterface)({input:a});function o(){a.destroy(),i()}let s=0,l=0,u=t[0];if(void 0===u)return void o();let c=u[0],d=u[1];function p(){sX.set(e,1),n.close(),n.removeAllListeners(),o()}a.on("error",p),n.on("error",p),n.on("close",o),n.on("line",e=>{if(!(++s<c)&&(r[s]=function(e,t){let r=e,i=r.length;if(i<=150)return r;t>i&&(t=i);let a=Math.max(t-60,0);a<5&&(a=0);let n=Math.min(a+140,i);return n>i-5&&(n=i),n===i&&(a=Math.max(n-140,0)),r=r.slice(a,n),a>0&&(r=`...${r}`),n<i&&(r+="..."),r}(e,0),s>=d)){if(l===t.length-1){n.close(),n.removeAllListeners();return}let e=t[++l];if(void 0===e){n.close(),n.removeAllListeners();return}c=e[0],d=e[1]}})})}(e,i,a))}return await Promise.all(n).catch(()=>{}),e&&e.length>0&&function(e,t){for(let r of e)if(r.filename&&void 0===r.context_line&&"number"==typeof r.lineno){let e=t.get(r.filename);if(void 0===e)continue;!function(e,t,r){if(void 0===t.lineno||void 0===r)return;t.pre_context=[];for(let i=s1(e);i<e;i++){let e=r[i];if(void 0===e)return void sY(t);t.pre_context.push(e)}if(void 0===r[e])return sY(t);t.context_line=r[e];let i=function(e){return e+7}(e);t.post_context=[];for(let a=e+1;a<=i;a++){let e=r[a];if(void 0===e)break;t.post_context.push(e)}}(r.lineno,r,e)}}(e,sQ),sQ.reduce(),e}function sY(e){delete e.pre_context,delete e.context_line,delete e.post_context}function s0(e){return[s1(e),e+7]}function s1(e){return Math.max(1,e-7)}class s2{constructor(e,t,r){this.client=e,this._exceptionAutocaptureEnabled=t.enableExceptionAutocapture||!1,this._logger=r,this._rateLimiter=new ot({refillRate:1,bucketSize:10,refillInterval:1e4,_logger:this._logger}),this.startAutocaptureIfEnabled()}static isPreviouslyCapturedError(e){return nN(e)&&"__posthog_previously_captured_error"in e&&!0===e.__posthog_previously_captured_error}static async buildEventMessage(e,t,r,i){let a={...i};r||(a.$process_person_profile=!1);let n=this.errorPropertiesBuilder.buildFromUnknown(e,t);return n.$exception_list=await this.errorPropertiesBuilder.modifyFrames(n.$exception_list),{event:"$exception",distinctId:r||nk().toString(),properties:{...n,...a}}}startAutocaptureIfEnabled(){if(this.isEnabled()){var t,r,i;let a;t=this.onException.bind(this),r=this.onFatalError.bind(this),globalThis.process?.on("uncaughtException",(a=!1,Object.assign(i=>{let n=e.g.process.listeners("uncaughtException").filter(e=>"domainUncaughtExceptionClear"!==e.name&&!0!==e._posthogErrorHandler).length;t(i,{mechanism:{type:"onuncaughtexception",handled:!1}}),a||0!==n||(a=!0,r(i))},{_posthogErrorHandler:!0}))),i=this.onException.bind(this),globalThis.process?.on("unhandledRejection",e=>i(e,{mechanism:{type:"onunhandledrejection",handled:!1}}))}}onException(e,t){this.client.addPendingPromise((async()=>{if(!s2.isPreviouslyCapturedError(e)){let r=await s2.buildEventMessage(e,t),i=r.properties,a=i?.$exception_list[0]?.type??"Exception";return this._rateLimiter.consumeRateLimit(a)?void this._logger.info("Skipping exception capture because of client rate limiting.",{exception:a}):this.client.capture(r)}})())}async onFatalError(e){console.error(e),await this.client.shutdown(2e3),process.exit(1)}isEnabled(){return!this.client.isDisabled&&this._exceptionAutocaptureEnabled}shutdown(){this._rateLimiter.stop()}}e.i(903462),e.i(669815),e.i(597908),e.i(273165),e.i(438311),e.i(345365),e.i(329250),e.i(890294),e.i(854543);async function s4(e){let t=globalThis.crypto?.subtle;if(!t)throw Error("SubtleCrypto API not available");return Array.from(new Uint8Array(await t.digest("SHA-1",new TextEncoder().encode(e)))).map(e=>e.toString(16).padStart(2,"0")).join("")}let s3=["is_not"];class s6 extends Error{constructor(e){super(),Error.captureStackTrace(this,this.constructor),this.name="ClientError",this.message=e,Object.setPrototypeOf(this,s6.prototype)}}class s8 extends Error{constructor(e){super(e),this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor),Object.setPrototypeOf(this,s8.prototype)}}class s5 extends Error{constructor(e){super(e),this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor),Object.setPrototypeOf(this,s5.prototype)}}class s7{constructor({pollingInterval:e,personalApiKey:t,projectApiKey:r,timeout:i,host:a,customHeaders:n,...o}){this.debugMode=!1,this.shouldBeginExponentialBackoff=!1,this.backOffCount=0,this.pollingInterval=e,this.personalApiKey=t,this.featureFlags=[],this.featureFlagsByKey={},this.groupTypeMapping={},this.cohorts={},this.loadedSuccessfullyOnce=!1,this.timeout=i,this.projectApiKey=r,this.host=a,this.poller=void 0,this.fetch=o.fetch||fetch,this.onError=o.onError,this.customHeaders=n,this.onLoad=o.onLoad,this.cacheProvider=o.cacheProvider,this.strictLocalEvaluation=o.strictLocalEvaluation??!1,this.loadFeatureFlags()}debug(e=!0){this.debugMode=e}logMsgIfDebug(e){this.debugMode&&e()}async getFeatureFlag(e,t,r={},i={},a={}){let n,o;if(await this.loadFeatureFlags(),!this.loadedSuccessfullyOnce)return n;if(void 0!==(o=this.featureFlagsByKey[e]))try{n=(await this.computeFlagAndPayloadLocally(o,t,r,i,a)).value,this.logMsgIfDebug(()=>console.debug(`Successfully computed flag locally: ${e} -> ${n}`))}catch(t){t instanceof s5||t instanceof s8?this.logMsgIfDebug(()=>console.debug(`${t.name} when computing flag locally: ${e}: ${t.message}`)):t instanceof Error&&this.onError?.(Error(`Error computing flag locally: ${e}: ${t}`))}return n}async getAllFlagsAndPayloads(e,t={},r={},i={},a){await this.loadFeatureFlags();let n={},o={},s=0==this.featureFlags.length,l=a?a.map(e=>this.featureFlagsByKey[e]).filter(Boolean):this.featureFlags,u={};return await Promise.all(l.map(async a=>{try{let{value:s,payload:l}=await this.computeFlagAndPayloadLocally(a,e,t,r,i,void 0,u);n[a.key]=s,l&&(o[a.key]=l)}catch(e){e instanceof s5||e instanceof s8?this.logMsgIfDebug(()=>console.debug(`${e.name} when computing flag locally: ${a.key}: ${e.message}`)):e instanceof Error&&this.onError?.(Error(`Error computing flag locally: ${a.key}: ${e}`)),s=!0}})),{response:n,payloads:o,fallbackToFlags:s}}async computeFlagAndPayloadLocally(e,t,r={},i={},a={},n,o,s=!1){let l;if(s||await this.loadFeatureFlags(),!this.loadedSuccessfullyOnce)return{value:!1,payload:null};l=void 0!==n?n:await this.computeFlagValueLocally(e,t,r,i,a,o);let u=this.getFeatureFlagPayload(e.key,l);return{value:l,payload:u}}async computeFlagValueLocally(e,t,r={},i={},a={},n={}){if(e.ensure_experience_continuity)throw new s8("Flag has experience continuity enabled");if(!e.active)return!1;let o=(e.filters||{}).aggregation_group_type_index;if(void 0==o)return await this.matchFeatureFlagProperties(e,t,i,n);{let t=this.groupTypeMapping[String(o)];if(!t)throw this.logMsgIfDebug(()=>console.warn(`[FEATURE FLAGS] Unknown group type index ${o} for feature flag ${e.key}`)),new s8("Flag has unknown group type index");if(!(t in r))return this.logMsgIfDebug(()=>console.warn(`[FEATURE FLAGS] Can't compute group feature flag: ${e.key} without group names passed in`)),!1;let i=a[t];return await this.matchFeatureFlagProperties(e,r[t],i,n)}}getFeatureFlagPayload(e,t){let r=null;if(!1!==t&&null!=t&&("boolean"==typeof t?r=this.featureFlagsByKey?.[e]?.filters?.payloads?.[t.toString()]||null:"string"==typeof t&&(r=this.featureFlagsByKey?.[e]?.filters?.payloads?.[t]||null),null!=r)){if("object"==typeof r)return r;if("string"==typeof r)try{return JSON.parse(r)}catch{}return r}return null}async evaluateFlagDependency(e,t,r,i){let a=e.key;if(!this.featureFlagsByKey)throw new s8("Feature flags not available for dependency evaluation");if(!("dependency_chain"in e))throw new s8(`Flag dependency property for '${a}' is missing required 'dependency_chain' field`);let n=e.dependency_chain;if(!Array.isArray(n))throw new s8(`Flag dependency property for '${a}' has an invalid 'dependency_chain' (expected array, got ${typeof n})`);if(0===n.length)throw new s8(`Circular dependency detected for flag '${a}' (empty dependency chain)`);for(let e of n){if(!(e in i)){let n=this.featureFlagsByKey[e];if(n)if(n.active)try{let a=await this.matchFeatureFlagProperties(n,t,r,i);i[e]=a}catch(t){throw new s8(`Error evaluating flag dependency '${e}' for flag '${a}': ${t}`)}else i[e]=!1;else throw new s8(`Missing flag dependency '${e}' for flag '${a}'`)}if(null==i[e])throw new s8(`Dependency '${e}' could not be evaluated`)}let o=i[a];return this.flagEvaluatesToExpectedValue(e.value,o)}flagEvaluatesToExpectedValue(e,t){return"boolean"==typeof e?e===t||"string"==typeof t&&""!==t&&!0===e:"string"==typeof e&&t===e}async matchFeatureFlagProperties(e,t,r,i={}){let a,n=e.filters||{},o=n.groups||[],s=!1;for(let l of o)try{if(await this.isConditionMatch(e,t,l,r,i)){let r=l.variant,i=n.multivariate?.variants||[];a=r&&i.some(e=>e.key===r)?r:await this.getMatchingVariant(e,t)||!0;break}}catch(e){if(e instanceof s5)throw e;if(e instanceof s8)s=!0;else throw e}if(void 0!==a)return a;if(s)throw new s8("Can't determine if feature flag is enabled or not with given properties");return!1}async isConditionMatch(e,t,r,i,a={}){let n=r.rollout_percentage,o=e=>{this.logMsgIfDebug(()=>console.warn(e))};if((r.properties||[]).length>0){for(let e of r.properties){let r=e.type;if(!("cohort"===r?function e(t,r,i,a=!1){let n=String(t.value);if(!(n in i))throw new s5(`cohort ${n} not found in local cohorts - likely a static cohort that requires server evaluation`);return function t(r,i,a,n=!1){if(!r)return!0;let o=r.type,s=r.values;if(!s||0===s.length)return!0;let l=!1;if("values"in s[0]){for(let e of s)try{let r=t(e,i,a,n);if("AND"===o){if(!r)return!1}else if(r)return!0}catch(t){if(t instanceof s5)throw t;if(t instanceof s8)n&&console.debug(`Failed to compute property ${e} locally: ${t}`),l=!0;else throw t}if(l)throw new s8("Can't match cohort without a given cohort property value");return"AND"===o}for(let t of s)try{let r;if("cohort"===t.type)r=e(t,i,a,n);else if("flag"===t.type){n&&console.warn(`[FEATURE FLAGS] Flag dependency filters are not supported in local evaluation. Skipping condition with dependency on flag '${t.key||"unknown"}'`);continue}else r=le(t,i);let s=t.negation||!1;if("AND"===o){if(!r&&!s||r&&s)return!1}else if(r&&!s||!r&&s)return!0}catch(e){if(e instanceof s5)throw e;if(e instanceof s8)n&&console.debug(`Failed to compute property ${t} locally: ${e}`),l=!0;else throw e}if(l)throw new s8("can't match cohort without a given cohort property value");return"AND"===o}(i[n],r,i,a)}(e,i,this.cohorts,this.debugMode):"flag"===r?await this.evaluateFlagDependency(e,t,i,a):le(e,i,o)))return!1}if(void 0==n)return!0}return!(void 0!=n&&await s9(e.key,t)>n/100)}async getMatchingVariant(e,t){let r=await s9(e.key,t,"variant"),i=this.variantLookupTable(e).find(e=>r>=e.valueMin&&r<e.valueMax);if(i)return i.key}variantLookupTable(e){let t=[],r=0,i=0,a=e.filters||{};return(a.multivariate?.variants||[]).forEach(e=>{i=r+e.rollout_percentage/100,t.push({valueMin:r,valueMax:i,key:e.key}),r=i}),t}updateFlagState(e){this.featureFlags=e.flags,this.featureFlagsByKey=e.flags.reduce((e,t)=>(e[t.key]=t,e),{}),this.groupTypeMapping=e.groupTypeMapping,this.cohorts=e.cohorts,this.loadedSuccessfullyOnce=!0}warnAboutExperienceContinuityFlags(e){if(this.strictLocalEvaluation)return;let t=e.filter(e=>e.ensure_experience_continuity);t.length>0&&console.warn(`[PostHog] You are using local evaluation but ${t.length} flag(s) have experience continuity enabled: ${t.map(e=>e.key).join(", ")}. Experience continuity is incompatible with local evaluation and will cause a server request on every flag evaluation, negating local evaluation cost savings. To avoid server requests and unexpected costs, either disable experience continuity on these flags in PostHog, use strictLocalEvaluation: true in client init, or pass onlyEvaluateLocally: true per flag call (flags that cannot be evaluated locally will return undefined).`)}async loadFromCache(e){if(!this.cacheProvider)return!1;try{let t=await this.cacheProvider.getFlagDefinitions();if(t)return this.updateFlagState(t),this.logMsgIfDebug(()=>console.debug(`[FEATURE FLAGS] ${e} (${t.flags.length} flags)`)),this.onLoad?.(this.featureFlags.length),this.warnAboutExperienceContinuityFlags(t.flags),!0;return!1}catch(e){return this.onError?.(Error(`Failed to load from cache: ${e}`)),!1}}async loadFeatureFlags(e=!1){if(!this.loadedSuccessfullyOnce||e)return!e&&this.nextFetchAllowedAt&&Date.now()<this.nextFetchAllowedAt?void this.logMsgIfDebug(()=>console.debug("[FEATURE FLAGS] Skipping fetch, in backoff period")):(this.loadingPromise||(this.loadingPromise=this._loadFeatureFlags().catch(e=>this.logMsgIfDebug(()=>console.debug(`[FEATURE FLAGS] Failed to load feature flags: ${e}`))).finally(()=>{this.loadingPromise=void 0})),this.loadingPromise)}isLocalEvaluationReady(){return(this.loadedSuccessfullyOnce??!1)&&(this.featureFlags?.length??0)>0}getPollingInterval(){return this.shouldBeginExponentialBackoff?Math.min(6e4,this.pollingInterval*2**this.backOffCount):this.pollingInterval}beginBackoff(){this.shouldBeginExponentialBackoff=!0,this.backOffCount+=1,this.nextFetchAllowedAt=Date.now()+this.getPollingInterval()}clearBackoff(){this.shouldBeginExponentialBackoff=!1,this.backOffCount=0,this.nextFetchAllowedAt=void 0}async _loadFeatureFlags(){this.poller&&(clearTimeout(this.poller),this.poller=void 0),this.poller=setTimeout(()=>this.loadFeatureFlags(!0),this.getPollingInterval());try{let e=!0;if(this.cacheProvider)try{e=await this.cacheProvider.shouldFetchFlagDefinitions()}catch(e){this.onError?.(Error(`Error in shouldFetchFlagDefinitions: ${e}`))}if(!e&&(await this.loadFromCache("Loaded flags from cache (skipped fetch)")||this.loadedSuccessfullyOnce))return;let t=await this._requestFeatureFlagDefinitions();if(!t)return;switch(t.status){case 304:this.logMsgIfDebug(()=>console.debug("[FEATURE FLAGS] Flags not modified (304), using cached data")),this.flagsEtag=t.headers?.get("ETag")??this.flagsEtag,this.loadedSuccessfullyOnce=!0,this.clearBackoff();return;case 401:throw this.beginBackoff(),new s6(`Your project key or personal API key is invalid. Setting next polling interval to ${this.getPollingInterval()}ms. More information: https://posthog.com/docs/api#rate-limiting`);case 402:console.warn("[FEATURE FLAGS] Feature flags quota limit exceeded - unsetting all local flags. Learn more about billing limits at https://posthog.com/docs/billing/limits-alerts"),this.featureFlags=[],this.featureFlagsByKey={},this.groupTypeMapping={},this.cohorts={};return;case 403:throw this.beginBackoff(),new s6(`Your personal API key does not have permission to fetch feature flag definitions for local evaluation. Setting next polling interval to ${this.getPollingInterval()}ms. Are you sure you're using the correct personal and Project API key pair? More information: https://posthog.com/docs/api/overview`);case 429:throw this.beginBackoff(),new s6(`You are being rate limited. Setting next polling interval to ${this.getPollingInterval()}ms. More information: https://posthog.com/docs/api#rate-limiting`);case 200:{let r=await t.json()??{};if(!("flags"in r))return void this.onError?.(Error(`Invalid response when getting feature flags: ${JSON.stringify(r)}`));this.flagsEtag=t.headers?.get("ETag")??void 0;let i={flags:r.flags??[],groupTypeMapping:r.group_type_mapping||{},cohorts:r.cohorts||{}};if(this.updateFlagState(i),this.clearBackoff(),this.cacheProvider&&e)try{await this.cacheProvider.onFlagDefinitionsReceived(i)}catch(e){this.onError?.(Error(`Failed to store in cache: ${e}`))}this.onLoad?.(this.featureFlags.length),this.warnAboutExperienceContinuityFlags(i.flags);break}default:return}}catch(e){e instanceof s6&&this.onError?.(e)}}getPersonalApiKeyRequestOptions(e="GET",t){let r={...this.customHeaders,"Content-Type":"application/json",Authorization:`Bearer ${this.personalApiKey}`};return t&&(r["If-None-Match"]=t),{method:e,headers:r}}_requestFeatureFlagDefinitions(){let e=`${this.host}/api/feature_flag/local_evaluation?token=${this.projectApiKey}&send_cohorts`,t=this.getPersonalApiKeyRequestOptions("GET",this.flagsEtag),r=null;if(this.timeout&&"number"==typeof this.timeout){let e=new AbortController;r=o7(()=>{e.abort()},this.timeout),t.signal=e.signal}try{return(0,this.fetch)(e,t)}finally{clearTimeout(r)}}async stopPoller(e=3e4){if(clearTimeout(this.poller),this.cacheProvider)try{let t=this.cacheProvider.shutdown();t instanceof Promise&&await Promise.race([t,new Promise((t,r)=>setTimeout(()=>r(Error(`Cache shutdown timeout after ${e}ms`)),e))])}catch(e){this.onError?.(Error(`Error during cache shutdown: ${e}`))}}}async function s9(e,t,r=""){return parseInt((await s4(`${e}.${t}${r}`)).slice(0,15),16)/0x1000000000000000}function le(e,t,r){let i=e.key,a=e.value,n=e.operator||"exact";if(i in t){if("is_not_set"===n)throw new s8("Operator is_not_set is not supported")}else throw new s8(`Property ${i} not found in propertyValues`);let o=t[i];if(null==o&&!s3.includes(n))return r&&r(`Property ${i} cannot have a value of null/undefined with the ${n} operator`),!1;function s(e,t){return Array.isArray(e)?e.map(e=>String(e).toLowerCase()).includes(String(t).toLowerCase()):String(e).toLowerCase()===String(t).toLowerCase()}function l(e,t,r){if("gt"===r)return e>t;if("gte"===r)return e>=t;if("lt"===r)return e<t;if("lte"===r)return e<=t;throw Error(`Invalid operator: ${r}`)}switch(n){case"exact":return s(a,o);case"is_not":return!s(a,o);case"is_set":return i in t;case"icontains":return String(o).toLowerCase().includes(String(a).toLowerCase());case"not_icontains":return!String(o).toLowerCase().includes(String(a).toLowerCase());case"regex":return lt(String(a))&&null!==String(o).match(String(a));case"not_regex":return lt(String(a))&&null===String(o).match(String(a));case"gt":case"gte":case"lt":case"lte":{let e="number"==typeof a?a:null;if("string"==typeof a)try{e=parseFloat(a)}catch(e){}if(null==e||null==o)return l(String(o),String(a),n);if("string"==typeof o)return l(o,String(a),n);return l(o,e,n)}case"is_date_after":case"is_date_before":{if("boolean"==typeof a)throw new s8("Date operations cannot be performed on boolean values");let e=function(e){let t=e.match(/^-?(?<number>[0-9]+)(?<interval>[a-z])$/),r=new Date(new Date().toISOString());if(!t)return null;{if(!t.groups)return null;let e=parseInt(t.groups.number);if(e>=1e4)return null;let i=t.groups.interval;if("h"==i)r.setUTCHours(r.getUTCHours()-e);else if("d"==i)r.setUTCDate(r.getUTCDate()-e);else if("w"==i)r.setUTCDate(r.getUTCDate()-7*e);else if("m"==i)r.setUTCMonth(r.getUTCMonth()-e);else{if("y"!=i)return null;r.setUTCFullYear(r.getUTCFullYear()-e)}return r}}(String(a));if(null==e&&(e=lr(a)),null==e)throw new s8(`Invalid date: ${a}`);let t=lr(o);if(["is_date_before"].includes(n))return t<e;return t>e}default:throw new s8(`Unknown operator: ${n}`)}}function lt(e){try{return new RegExp(e),!0}catch(e){return!1}}function lr(e){if(e instanceof Date)return e;if("string"==typeof e||"number"==typeof e){let t=new Date(e);if(!isNaN(t.valueOf()))return t;throw new s8(`${e} is in an invalid date format`)}throw new s8(`The date provided ${e} must be a string, number, or date object`)}class li{getProperty(e){return this._memoryStorage[e]}setProperty(e,t){this._memoryStorage[e]=null!==t?t:void 0}constructor(){this._memoryStorage={}}}class la extends sc{constructor(e,t={}){if(super(e,t),this._memoryStorage=new li,this.options=t,this.context=this.initializeContext(),this.options.featureFlagsPollingInterval="number"==typeof t.featureFlagsPollingInterval?Math.max(t.featureFlagsPollingInterval,100):3e4,t.personalApiKey){if(t.personalApiKey.includes("phc_"))throw Error('Your Personal API key is invalid. These keys are prefixed with "phx_" and can be created in PostHog project settings.');!1!==t.enableLocalEvaluation&&(this.featureFlagsPoller=new s7({pollingInterval:this.options.featureFlagsPollingInterval,personalApiKey:t.personalApiKey,projectApiKey:e,timeout:t.requestTimeout??1e4,host:this.host,fetch:t.fetch,onError:e=>{this._events.emit("error",e)},onLoad:e=>{this._events.emit("localEvaluationFlagsLoaded",e)},customHeaders:this.getCustomHeaders(),cacheProvider:t.flagDefinitionCacheProvider,strictLocalEvaluation:t.strictLocalEvaluation}))}this.errorTracking=new s2(this,t,this._logger),this.distinctIdHasSentFlagCalls={},this.maxCacheSize=t.maxCacheSize||5e4}getPersistedProperty(e){return this._memoryStorage.getProperty(e)}setPersistedProperty(e,t){return this._memoryStorage.setProperty(e,t)}fetch(e,t){return this.options.fetch?this.options.fetch(e,t):fetch(e,t)}getLibraryVersion(){return"5.24.3"}getCustomUserAgent(){return`${this.getLibraryId()}/${this.getLibraryVersion()}`}enable(){return super.optIn()}disable(){return super.optOut()}debug(e=!0){super.debug(e),this.featureFlagsPoller?.debug(e)}capture(e){"string"==typeof e&&this._logger.warn("Called capture() with a string as the first argument when an object was expected."),this.addPendingPromise(this.prepareEventMessage(e).then(({distinctId:e,event:t,properties:r,options:i})=>super.captureStateless(e,t,r,{timestamp:i.timestamp,disableGeoip:i.disableGeoip,uuid:i.uuid})).catch(e=>{e&&console.error(e)}))}async captureImmediate(e){return"string"==typeof e&&this._logger.warn("Called captureImmediate() with a string as the first argument when an object was expected."),this.addPendingPromise(this.prepareEventMessage(e).then(({distinctId:e,event:t,properties:r,options:i})=>super.captureStatelessImmediate(e,t,r,{timestamp:i.timestamp,disableGeoip:i.disableGeoip,uuid:i.uuid})).catch(e=>{e&&console.error(e)}))}identify({distinctId:e,properties:t={},disableGeoip:r}){let{$set:i,$set_once:a,$anon_distinct_id:n,...o}=t;super.identifyStateless(e,{$set:i||o,$set_once:a||{},$anon_distinct_id:n??void 0},{disableGeoip:r})}async identifyImmediate({distinctId:e,properties:t={},disableGeoip:r}){let{$set:i,$set_once:a,$anon_distinct_id:n,...o}=t;super.identifyStatelessImmediate(e,{$set:i||o,$set_once:a||{},$anon_distinct_id:n??void 0},{disableGeoip:r})}alias(e){super.aliasStateless(e.alias,e.distinctId,void 0,{disableGeoip:e.disableGeoip})}async aliasImmediate(e){await super.aliasStatelessImmediate(e.alias,e.distinctId,void 0,{disableGeoip:e.disableGeoip})}isLocalEvaluationReady(){return this.featureFlagsPoller?.isLocalEvaluationReady()??!1}async waitForLocalEvaluationReady(e=3e4){return!!this.isLocalEvaluationReady()||void 0!==this.featureFlagsPoller&&new Promise(t=>{let r=setTimeout(()=>{i(),t(!1)},e),i=this._events.on("localEvaluationFlagsLoaded",e=>{clearTimeout(r),i(),t(e>0)})})}async _getFeatureFlagResult(e,t,r={},i){let a,n,o,s,l,u,c,d=r.sendFeatureFlagEvents??!0;if(void 0!==this._flagOverrides&&e in this._flagOverrides){let t=this._flagOverrides[e];if(void 0===t)return;let r=this._payloadOverrides?.[e];return{key:e,enabled:!1!==t,variant:"string"==typeof t?t:void 0,payload:r}}let{groups:p,disableGeoip:f}=r,{onlyEvaluateLocally:h,personProperties:m,groupProperties:g}=r,v=this.addLocalPersonAndGroupProperties(t,p,m,g);m=v.allPersonProperties,g=v.allGroupProperties,void 0==h&&(h=this.options.strictLocalEvaluation??!1);let y=!1;if(void 0!==this.featureFlagsPoller){await this.featureFlagsPoller?.loadFeatureFlags();let r=this.featureFlagsPoller?.featureFlagsByKey[e];if(r)try{let n=await this.featureFlagsPoller?.computeFlagAndPayloadLocally(r,t,p,m,g,i);if(n){y=!0;let t=n.value;l=r.id,c="Evaluated locally",a={key:e,enabled:!1!==t,variant:"string"==typeof t?t:void 0,payload:n.payload??void 0}}}catch(t){if(t instanceof s5||t instanceof s8)this._logger?.info(`${t.name} when computing flag locally: ${e}: ${t.message}`);else throw t}}if(!y&&!h){let r=await super.getFeatureFlagDetailsStateless(t,p,m,g,f,[e]);if(void 0===r)s="unknown_error";else{n=r.requestId,o=r.evaluatedAt;let t=[];r.errorsWhileComputingFlags&&t.push("errors_while_computing_flags"),r.quotaLimited?.includes("feature_flags")&&t.push("quota_limited");let i=r.flags[e];if(void 0===i)t.push("flag_missing");else{let t;if(l=i.metadata?.id,u=i.metadata?.version,c=i.reason?.description??i.reason?.code,i.metadata?.payload!==void 0)try{t=JSON.parse(i.metadata.payload)}catch{t=i.metadata.payload}a={key:e,enabled:i.enabled,variant:i.variant,payload:t}}t.length>0&&(s=t.join(","))}}if(d){let r=void 0===a?void 0:!1!==a.enabled&&(a.variant??!0),i=`${e}_${r}`;if(!(t in this.distinctIdHasSentFlagCalls)||!this.distinctIdHasSentFlagCalls[t].includes(i)){Object.keys(this.distinctIdHasSentFlagCalls).length>=this.maxCacheSize&&(this.distinctIdHasSentFlagCalls={}),Array.isArray(this.distinctIdHasSentFlagCalls[t])?this.distinctIdHasSentFlagCalls[t].push(i):this.distinctIdHasSentFlagCalls[t]=[i];let a={$feature_flag:e,$feature_flag_response:r,$feature_flag_id:l,$feature_flag_version:u,$feature_flag_reason:c,locally_evaluated:y,[`$feature/${e}`]:r,$feature_flag_request_id:n,$feature_flag_evaluated_at:o};s&&(a.$feature_flag_error=s),this.capture({distinctId:t,event:"$feature_flag_called",properties:a,groups:p,disableGeoip:f})}}return void 0!==a&&void 0!==this._payloadOverrides&&e in this._payloadOverrides&&(a={...a,payload:this._payloadOverrides[e]}),a}async getFeatureFlag(e,t,r){let i=await this._getFeatureFlagResult(e,t,{...r,sendFeatureFlagEvents:r?.sendFeatureFlagEvents??this.options.sendFeatureFlagEvent??!0});if(void 0!==i)return!1!==i.enabled&&(i.variant??!0)}async getFeatureFlagPayload(e,t,r,i){if(void 0!==this._payloadOverrides&&e in this._payloadOverrides)return this._payloadOverrides[e];let a=await this._getFeatureFlagResult(e,t,{...i,sendFeatureFlagEvents:!1},r);if(void 0!==a)return a.payload??null}async getFeatureFlagResult(e,t,r){return this._getFeatureFlagResult(e,t,{...r,sendFeatureFlagEvents:r?.sendFeatureFlagEvents??this.options.sendFeatureFlagEvent??!0})}async getRemoteConfigPayload(e){if(!this.options.personalApiKey)throw Error("Personal API key is required for remote config payload decryption");let t=await this._requestRemoteConfigPayload(e);if(!t)return;let r=await t.json();if("string"==typeof r)try{return JSON.parse(r)}catch(e){}return r}async isFeatureEnabled(e,t,r){let i=await this.getFeatureFlag(e,t,r);if(void 0!==i)return!!i}async getAllFlags(e,t){return(await this.getAllFlagsAndPayloads(e,t)).featureFlags||{}}async getAllFlagsAndPayloads(e,t){let{groups:r,disableGeoip:i,flagKeys:a}=t||{},{onlyEvaluateLocally:n,personProperties:o,groupProperties:s}=t||{},l=this.addLocalPersonAndGroupProperties(e,r,o,s);o=l.allPersonProperties,s=l.allGroupProperties,void 0==n&&(n=this.options.strictLocalEvaluation??!1);let u=await this.featureFlagsPoller?.getAllFlagsAndPayloads(e,r,o,s,a),c={},d={},p=!0;if(u&&(c=u.response,d=u.payloads,p=u.fallbackToFlags),p&&!n){let t=await super.getFeatureFlagsAndPayloadsStateless(e,r,o,s,i,a);c={...c,...t.flags||{}},d={...d,...t.payloads||{}}}return void 0!==this._flagOverrides&&(c={...c,...this._flagOverrides}),void 0!==this._payloadOverrides&&(d={...d,...this._payloadOverrides}),{featureFlags:c,featureFlagPayloads:d}}groupIdentify({groupType:e,groupKey:t,properties:r,distinctId:i,disableGeoip:a}){super.groupIdentifyStateless(e,t,r,{disableGeoip:a},i)}async reloadFeatureFlags(){await this.featureFlagsPoller?.loadFeatureFlags(!0)}overrideFeatureFlags(e){let t=e=>Object.fromEntries(e.map(e=>[e,!0]));if(!1===e){this._flagOverrides=void 0,this._payloadOverrides=void 0;return}if(Array.isArray(e)){this._flagOverrides=t(e);return}if(this._isFeatureFlagOverrideOptions(e)){"flags"in e&&(!1===e.flags?this._flagOverrides=void 0:Array.isArray(e.flags)?this._flagOverrides=t(e.flags):void 0!==e.flags&&(this._flagOverrides={...e.flags})),"payloads"in e&&(!1===e.payloads?this._payloadOverrides=void 0:void 0!==e.payloads&&(this._payloadOverrides={...e.payloads}));return}this._flagOverrides={...e}}_isFeatureFlagOverrideOptions(e){if("object"!=typeof e||null===e||Array.isArray(e))return!1;if("flags"in e){let t=e.flags;if(!1===t||Array.isArray(t)||"object"==typeof t&&null!==t)return!0}if("payloads"in e){let t=e.payloads;if(!1===t||"object"==typeof t&&null!==t)return!0}return!1}withContext(e,t,r){return this.context?this.context.run(e,t,r):t()}getContext(){return this.context?.get()}async _shutdown(e){return this.featureFlagsPoller?.stopPoller(e),this.errorTracking.shutdown(),super._shutdown(e)}async _requestRemoteConfigPayload(e){if(!this.options.personalApiKey)return;let t=`${this.host}/api/projects/@current/feature_flags/${e}/remote_config?token=${encodeURIComponent(this.apiKey)}`,r={method:"GET",headers:{...this.getCustomHeaders(),"Content-Type":"application/json",Authorization:`Bearer ${this.options.personalApiKey}`}},i=null;if(this.options.requestTimeout&&"number"==typeof this.options.requestTimeout){let e=new AbortController;i=o7(()=>{e.abort()},this.options.requestTimeout),r.signal=e.signal}try{return await this.fetch(t,r)}catch(e){this._events.emit("error",e);return}finally{i&&clearTimeout(i)}}extractPropertiesFromEvent(e,t){if(!e)return{personProperties:{},groupProperties:{}};let r={},i={};for(let[a,n]of Object.entries(e))if(n3(n)&&t&&a in t){let e={};for(let[t,r]of Object.entries(n))e[String(t)]=String(r);i[String(a)]=e}else r[String(a)]=String(n);return{personProperties:r,groupProperties:i}}async getFeatureFlagsForEvent(e,t,r,i){let a=i?.personProperties||{},n=i?.groupProperties||{},o=i?.flagKeys;if(i?.onlyEvaluateLocally??this.options.strictLocalEvaluation)if(!((this.featureFlagsPoller?.featureFlags?.length||0)>0))return{};else{let i={};for(let[e,r]of Object.entries(t||{}))i[e]=String(r);return await this.getAllFlags(e,{groups:i,personProperties:a,groupProperties:n,disableGeoip:r,onlyEvaluateLocally:!0,flagKeys:o})}if((this.featureFlagsPoller?.featureFlags?.length||0)>0){let i={};for(let[e,r]of Object.entries(t||{}))i[e]=String(r);return await this.getAllFlags(e,{groups:i,personProperties:a,groupProperties:n,disableGeoip:r,onlyEvaluateLocally:!0,flagKeys:o})}return(await super.getFeatureFlagsStateless(e,t,a,n,r)).flags}addLocalPersonAndGroupProperties(e,t,r,i){let a={distinct_id:e,...r||{}},n={};if(t)for(let e of Object.keys(t))n[e]={$group_key:t[e],...i?.[e]||{}};return{allPersonProperties:a,allGroupProperties:n}}captureException(e,t,r,i){if(!s2.isPreviouslyCapturedError(e)){let a=Error("PostHog syntheticException");this.addPendingPromise(s2.buildEventMessage(e,{syntheticException:a},t,r).then(e=>this.capture({...e,uuid:i})))}}async captureExceptionImmediate(e,t,r){if(!s2.isPreviouslyCapturedError(e)){let i=Error("PostHog syntheticException");this.addPendingPromise(s2.buildEventMessage(e,{syntheticException:i},t,r).then(e=>this.captureImmediate(e)))}}async prepareEventMessage(e){let{distinctId:t,event:r,properties:i,groups:a,sendFeatureFlags:n,timestamp:o,disableGeoip:s,uuid:l}=e,u=this.context?.get(),c=t||u?.distinctId,d={...u?.properties||{},...i||{}};c||(c=nk().toString(),d.$process_person_profile=!1),u?.sessionId&&!d.$session_id&&(d.$session_id=u.sessionId);let p=this._runBeforeSend({distinctId:c,event:r,properties:d,groups:a,sendFeatureFlags:n,timestamp:o,disableGeoip:s,uuid:l});if(!p)return Promise.reject(null);let f=await Promise.resolve().then(async()=>n?await this.getFeatureFlagsForEvent(p.distinctId,a,s,"object"==typeof n?n:void 0):(p.event,{})).then(e=>{let t={};if(e)for(let[r,i]of Object.entries(e))t[`$feature/${r}`]=i;let r=Object.keys(e||{}).filter(t=>e?.[t]!==!1).sort();return r.length>0&&(t.$active_feature_flags=r),t}).catch(()=>({})).then(e=>({...e,...p.properties||{},$groups:p.groups||a}));return"$pageview"===p.event&&this.options.__preview_capture_bot_pageviews&&"string"==typeof f.$raw_user_agent&&nE(f.$raw_user_agent,this.options.custom_blocked_useragents||[])&&(p.event="$bot_pageview",f.$browser_type="bot"),{distinctId:p.distinctId,event:p.event,properties:f,options:{timestamp:p.timestamp,disableGeoip:p.disableGeoip,uuid:p.uuid}}}_runBeforeSend(e){let t=this.options.before_send;if(!t)return e;let r=Array.isArray(t)?t:[t],i=e;for(let t of r){if(!(i=t(i)))return this._logger.info(`Event '${e.event}' was rejected in beforeSend function`),null;if(!i.properties||0===Object.keys(i.properties).length){let e=`Event '${i.event}' has no properties after beforeSend function, this is likely an error.`;this._logger.warn(e)}}return i}}var sZ=sG,ln=e.i(478500);class lo{constructor(){this.storage=new ln.AsyncLocalStorage}get(){return this.storage.getStore()}run(e,t,r){if(r?.fresh===!0)return this.storage.run(e,t);{let r=this.get()||{},i={distinctId:e.distinctId??r.distinctId,sessionId:e.sessionId??r.sessionId,properties:{...r.properties||{},...e.properties||{}}};return this.storage.run(i,t)}}}let ls="posthog-node";class ll{static #tl=this.POSTHOG_ID_TAG="posthog_distinct_id";constructor(e,t,r,i,a){this.name=ls,this.name=ls,this.setupOnce=function(n,o){n(createEventProcessor(e,{organization:t,projectId:o()?.getClient()?.getDsn()?.projectId,prefix:r,severityAllowList:i,sendExceptionsToPostHog:a??!0}))}}}s2.errorPropertiesBuilder=new sZ.ErrorPropertiesBuilder([new sZ.EventCoercer,new sZ.ErrorCoercer,new sZ.ObjectCoercer,new sZ.StringCoercer,new sZ.PrimitiveCoercer],sZ.createStackParser("node:javascript",sZ.nodeStackLineParser),[(u=function(e=process.argv[1]?(0,G.dirname)(process.argv[1]):process.cwd(),t="\\"===G.sep){let r=t?ng(e):e;return e=>{if(!e)return;let i=t?ng(e):e,{dir:a,base:n,ext:o}=G.posix.parse(i);(".js"===o||".mjs"===o||".cjs"===o)&&(n=n.slice(0,-1*o.length));let s=decodeURIComponent(n);a||(a=".");let l=a.lastIndexOf("/node_modules");if(l>-1)return`${a.slice(l+14).replace(/\//g,".")}:${s}`;if(a.startsWith(r)){let e=a.slice(r.length+1).replace(/\//g,".");return e?`${e}:${s}`:s}return s}}(),async e=>{for(let t of e)t.module=u(t.filename);return e}),sJ]);class lu extends la{getLibraryId(){return"posthog-node"}initializeContext(){return new lo}}let lc=new class{client=null;enabled=!1;initialize(e){if(this.client)return void console.warn("Server tracking service already initialized");if(!e.apiKey){console.warn("PostHog API key not provided. Server tracking disabled."),this.enabled=!1;return}if(this.enabled=!1!==e.enabled,!this.enabled)return void console.info("Server tracking is disabled");try{this.client=new lu(e.apiKey,{host:e.host||"https://us.i.posthog.com"}),console.info("PostHog server tracking initialized")}catch(e){console.error("Failed to initialize PostHog server:",e),this.enabled=!1}}identify(e,t){if(this.isEnabled()&&this.client)try{this.client.identify({distinctId:e,properties:t||{}})}catch(e){console.error("Failed to identify user on server:",e)}}track(e,t){if(!this.isEnabled()||!this.client)return void console.debug("Server tracking disabled, skipping event:",e);try{this.client.capture({distinctId:t?.userId||"anonymous",event:e,properties:t||{}})}catch(e){console.error("Failed to track event on server:",e)}}page(e,t){if(this.isEnabled()&&this.client)try{this.client.capture({distinctId:t?.userId||"anonymous",event:"$pageview",properties:{page_name:e,...t}})}catch(e){console.error("Failed to track page view on server:",e)}}reset(){console.debug("Server tracking reset called (no-op)")}isEnabled(){return this.enabled&&null!==this.client}async shutdown(){this.client&&await this.client.shutdown()}};var ld=e.i(49201);async function lp(){let e=G.default.join(process.cwd(),"src","Root.tsx");return await (0,nm.bundle)({entryPoint:e,webpackOverride:e=>e})}async function lf(e,t={}){try{let{outputPath:r,format:i="png",quality:a=90,overwrite:n=!0}=t;if(!["png","jpeg","webp"].includes(i))throw Error(`Invalid format: ${i}. Supported formats: png, jpeg, webp`);let o=function(e,t,r){let i;if(r)return r;let a=(i=G.default.join(process.cwd(),"output","ads"),Z.default.existsSync(i)||Z.default.mkdirSync(i,{recursive:!0}),i),n=Date.now(),o=`${e}-${n}.${t}`;return G.default.join(a,o)}(e.id,i,r);if(!n&&Z.default.existsSync(o))throw Error(`File already exists: ${o}`);let s=await lp(),l=await ((e,t)=>{if(!e)throw Error("No serve URL or webpack bundle directory was passed to getCompositions().");let{browserExecutable:r,chromiumOptions:i,envVariables:a,inputProps:n,onBrowserLog:o,port:s,puppeteerInstance:l,timeoutInMilliseconds:u,logLevel:c,onBrowserDownload:d,binariesDirectory:p,offthreadVideoCacheSizeInBytes:f,chromeMode:h,offthreadVideoThreads:m,mediaCacheSizeInBytes:g}=t??{},v=c??"info";return iF({browserExecutable:r??null,chromiumOptions:i??{},envVariables:a??{},serializedInputPropsWithCustomSchema:U.NoReactInternals.serializeJSONWithSpecialTypes({data:n??{},indent:void 0,staticBase:null}).serializedString,indent:!1,onBrowserLog:o??null,port:s??null,puppeteerInstance:l??void 0,serveUrlOrWebpackUrl:e,server:void 0,timeoutInMilliseconds:u??3e4,logLevel:v,offthreadVideoCacheSizeInBytes:f??null,binariesDirectory:p??null,onBrowserDownload:d??t3({indent:!1,logLevel:v,api:"getCompositions()"}),chromeMode:h??"headless-shell",offthreadVideoThreads:m??null,mediaCacheSizeInBytes:g??null,onLog:t6})})(s,{inputProps:{}}),u=l.find(t=>t.width===e.dimensions.width&&t.height===e.dimensions.height)||l.find(e=>e.id.includes("Ad"));if(!u)throw Error("No ad composition found");let c={composition:u,serveUrl:s,output:o,imageFormat:"jpeg"===i?"jpeg":"png",inputProps:{template:e}};"jpeg"===i&&(c.jpegQuality=a),await (e=>{let{composition:t,serveUrl:r,browserExecutable:i,cancelSignal:a,chromiumOptions:n,dumpBrowserLogs:o,envVariables:s,frame:l,imageFormat:u,inputProps:c,jpegQuality:d,onBrowserLog:p,onDownload:f,output:h,overwrite:m,port:g,puppeteerInstance:v,scale:y,timeoutInMilliseconds:b,verbose:x,quality:w,offthreadVideoCacheSizeInBytes:S,logLevel:k,binariesDirectory:C,onBrowserDownload:E,onArtifact:_,chromeMode:T,offthreadVideoThreads:P,mediaCacheSizeInBytes:I,apiKey:A,licenseKey:O,isProduction:M}=e;if(void 0!==d&&"jpeg"!==u)throw Error("You can only pass the `quality` option if `imageFormat` is 'jpeg'.");let F=k??(x||o?"verbose":"info");return w&&ek.warn({indent:!1,logLevel:F},"Passing `quality()` to `renderStill` is deprecated. Use `jpegQuality` instead."),nr({composition:t,browserExecutable:i??null,cancelSignal:a??null,chromiumOptions:n??{},envVariables:s??{},frame:l??0,imageFormat:u??iU,indent:!1,serializedInputPropsWithCustomSchema:U.NoReactInternals.serializeJSONWithSpecialTypes({staticBase:null,indent:void 0,data:c??{}}).serializedString,jpegQuality:d??w??80,onBrowserLog:p??null,onDownload:f??null,output:h??null,overwrite:m??!0,port:g??null,puppeteerInstance:v??null,scale:y??1,server:void 0,serveUrl:r,timeoutInMilliseconds:b??3e4,logLevel:F,serializedResolvedPropsWithCustomSchema:U.NoReactInternals.serializeJSONWithSpecialTypes({indent:void 0,staticBase:null,data:t.props??{}}).serializedString,offthreadVideoCacheSizeInBytes:S??null,binariesDirectory:C??null,onBrowserDownload:E??t3({indent:!1,logLevel:F,api:"renderStill()"}),onArtifact:_??null,chromeMode:T??"headless-shell",offthreadVideoThreads:P??null,mediaCacheSizeInBytes:I??null,licenseKey:O??A??null,onLog:t6,isProduction:M??null})})(c);let d=Z.default.statSync(o),p={success:!0,outputPath:o,width:e.dimensions.width,height:e.dimensions.height,format:i,sizeInBytes:d.size};return lc.track("first_render_completed",{templateId:e.id,format:i,width:p.width,height:p.height,sizeInBytes:p.sizeInBytes,timestamp:new Date().toISOString()}),p}catch(r){let e=r instanceof Error?r.message:String(r);return{success:!1,outputPath:"",width:0,height:0,format:t.format||"png",error:e}}}async function lh(e){let t=`req_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,r=(0,ld.measureAPIPerformance)("/api/render",t);try{let{template:t,options:i,userId:a}=await e.json();if(!t||!t.id){let e="template is required and must have an id";return r(!1,400,e),M.NextResponse.json({error:e},{status:400})}let n=await lf(t,i);if(!n.success)return r(!1,500,n.error||"Render failed"),M.NextResponse.json({success:!1,result:n},{status:500});return r(!0,200),lc.track("first_render_completed",{templateId:t.id,format:n.format,width:n.width,height:n.height,sizeInBytes:n.sizeInBytes,timestamp:new Date().toISOString(),userId:a}),M.NextResponse.json({success:n.success,result:n})}catch(t){console.error("Error in render API:",t);let e=t instanceof Error?t.message:"Failed to render";return r(!1,500,e),M.NextResponse.json({error:e},{status:500})}}e.s(["POST",()=>lh],370707);var lm=e.i(370707);let lg=new m.AppRouteRouteModule({definition:{kind:g.RouteKind.APP_ROUTE,page:"/api/render/route",pathname:"/api/render",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/render/route.ts",nextConfigOutput:"standalone",userland:lm}),{workAsyncStorage:lv,workUnitAsyncStorage:ly,serverHooks:lb}=lg;function lx(){return(0,v.patchFetch)({workAsyncStorage:lv,workUnitAsyncStorage:ly})}async function lw(e,t,r){lg.isDev&&(0,y.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let i="/api/render/route";i=i.replace(/\/index$/,"")||"/";let a=await lg.prepare(e,t,{srcPage:i,multiZoneDraftMode:!1});if(!a)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:n,params:o,nextConfig:s,parsedUrl:l,isDraftMode:u,prerenderManifest:c,routerServerContext:d,isOnDemandRevalidate:p,revalidateOnlyGenerated:f,resolvedPathname:h,clientReferenceManifest:m,serverActionsManifest:v}=a,M=(0,w.normalizeAppPath)(i),F=!!(c.dynamicRoutes[M]||c.routes[h]),R=async()=>((null==d?void 0:d.render404)?await d.render404(e,t,l,!1):t.end("This page could not be found"),null);if(F&&!u){let e=!!c.routes[h],t=c.dynamicRoutes[M];if(t&&!1===t.fallback&&!e){if(s.experimental.adapterPath)return await R();throw new A.NoFallbackError}}let D=null;!F||lg.isDev||u||(D="/index"===(D=h)?"/":D);let j=!0===lg.isDev||!F,L=F&&!j;v&&m&&(0,x.setManifestsSingleton)({page:i,clientReferenceManifest:m,serverActionsManifest:v});let B=e.method||"GET",N=(0,b.getTracer)(),$=N.getActiveScopeSpan(),z={params:o,prerenderManifest:c,renderOpts:{experimental:{authInterrupts:!!s.experimental.authInterrupts},cacheComponents:!!s.cacheComponents,supportsDynamicResponse:j,incrementalCache:(0,y.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:s.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,i,a)=>lg.onRequestError(e,t,i,a,d)},sharedContext:{buildId:n}},U=new S.NodeNextRequest(e),V=new S.NodeNextResponse(t),H=k.NextRequestAdapter.fromNodeNextRequest(U,(0,k.signalFromNodeResponse)(t));try{let a=async e=>lg.handle(H,z).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=N.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==C.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=r.get("next.route");if(a){let t=`${B} ${a}`;e.setAttributes({"next.route":a,"http.route":a,"next.span_name":t}),e.updateName(t)}else e.updateName(`${B} ${i}`)}),n=!!(0,y.getRequestMeta)(e,"minimalMode"),o=async o=>{var l,h;let m=async({previousCacheEntry:s})=>{try{if(!n&&p&&f&&!s)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let i=await a(o);e.fetchMetrics=z.renderOpts.fetchMetrics;let l=z.renderOpts.pendingWaitUntil;l&&r.waitUntil&&(r.waitUntil(l),l=void 0);let u=z.renderOpts.collectedTags;if(!F)return await (0,_.sendResponse)(U,V,i,z.renderOpts.pendingWaitUntil),null;{let e=await i.blob(),t=(0,T.toNodeOutgoingHttpHeaders)(i.headers);u&&(t[I.NEXT_CACHE_TAGS_HEADER]=u),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==z.renderOpts.collectedRevalidate&&!(z.renderOpts.collectedRevalidate>=I.INFINITE_CACHE)&&z.renderOpts.collectedRevalidate,a=void 0===z.renderOpts.collectedExpire||z.renderOpts.collectedExpire>=I.INFINITE_CACHE?void 0:z.renderOpts.collectedExpire;return{value:{kind:O.CachedRouteKind.APP_ROUTE,status:i.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){throw(null==s?void 0:s.isStale)&&await lg.onRequestError(e,t,{routerKind:"App Router",routePath:i,routeType:"route",revalidateReason:(0,E.getRevalidateReason)({isStaticGeneration:L,isOnDemandRevalidate:p})},!1,d),t}},v=await lg.handleResponse({req:e,nextConfig:s,cacheKey:D,routeKind:g.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:c,isRoutePPREnabled:!1,isOnDemandRevalidate:p,revalidateOnlyGenerated:f,responseGenerator:m,waitUntil:r.waitUntil,isMinimalMode:n});if(!F)return null;if((null==v||null==(l=v.value)?void 0:l.kind)!==O.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==v||null==(h=v.value)?void 0:h.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});n||t.setHeader("x-nextjs-cache",p?"REVALIDATED":v.isMiss?"MISS":v.isStale?"STALE":"HIT"),u&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let y=(0,T.fromNodeOutgoingHttpHeaders)(v.value.headers);return n&&F||y.delete(I.NEXT_CACHE_TAGS_HEADER),!v.cacheControl||t.getHeader("Cache-Control")||y.get("Cache-Control")||y.set("Cache-Control",(0,P.getCacheControlHeader)(v.cacheControl)),await (0,_.sendResponse)(U,V,new Response(v.value.body,{headers:y,status:v.value.status||200})),null};$?await o($):await N.withPropagatedContext(e.headers,()=>N.trace(C.BaseServerSpan.handleRequest,{spanName:`${B} ${i}`,kind:b.SpanKind.SERVER,attributes:{"http.method":B,"http.target":e.url}},o))}catch(t){if(t instanceof A.NoFallbackError||await lg.onRequestError(e,t,{routerKind:"App Router",routePath:M,routeType:"route",revalidateReason:(0,E.getRevalidateReason)({isStaticGeneration:L,isOnDemandRevalidate:p})},!1,d),F)throw t;return await (0,_.sendResponse)(U,V,new Response(null,{status:500})),null}}e.s(["handler",()=>lw,"patchFetch",()=>lx,"routeModule",()=>lg,"serverHooks",()=>lb,"workAsyncStorage",()=>lv,"workUnitAsyncStorage",()=>ly],519653)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__a485813f._.js.map