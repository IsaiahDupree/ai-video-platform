module.exports=[2479,a=>{a.v({actions:"list-module__vX8uWq__actions",badge:"list-module__vX8uWq__badge",badgeButton:"list-module__vX8uWq__badgeButton",badgeDefault:"list-module__vX8uWq__badgeDefault",badgeHidden:"list-module__vX8uWq__badgeHidden",badgeInfo:"list-module__vX8uWq__badgeInfo",badgeSecondary:"list-module__vX8uWq__badgeSecondary",badgeSuccess:"list-module__vX8uWq__badgeSuccess",badgeVisible:"list-module__vX8uWq__badgeVisible",badgeWarning:"list-module__vX8uWq__badgeWarning",buttonDelete:"list-module__vX8uWq__buttonDelete",buttonEdit:"list-module__vX8uWq__buttonEdit",buttonPrimary:"list-module__vX8uWq__buttonPrimary",buttonSecondary:"list-module__vX8uWq__buttonSecondary",container:"list-module__vX8uWq__container",content:"list-module__vX8uWq__content",emptyState:"list-module__vX8uWq__emptyState",error:"list-module__vX8uWq__error",filterGroup:"list-module__vX8uWq__filterGroup",filterSelect:"list-module__vX8uWq__filterSelect",filters:"list-module__vX8uWq__filters",footer:"list-module__vX8uWq__footer",header:"list-module__vX8uWq__header",link:"list-module__vX8uWq__link",loading:"list-module__vX8uWq__loading",muted:"list-module__vX8uWq__muted",searchBox:"list-module__vX8uWq__searchBox",searchInput:"list-module__vX8uWq__searchInput",subtitle:"list-module__vX8uWq__subtitle",success:"list-module__vX8uWq__success",table:"list-module__vX8uWq__table"})},45756,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(2479);function f(){let a=(0,d.useRouter)(),[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)("all"),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(null);(0,c.useEffect)(()=>{x()},[p]),(0,c.useEffect)(()=>{let a=h;if("all"!==n){let b="visible"===n;a=a.filter(a=>a.attributes?.visible===b)}if(l.trim()){let b=l.toLowerCase();a=a.filter(a=>{let c=a.attributes?.name?.toLowerCase()||"",d=a.attributes?.url?.toLowerCase()||"",e=a.attributes?.state?.toLowerCase()||"";return c.includes(b)||d.includes(b)||e.includes(b)})}k(a)},[h,l,n]);let x=async()=>{try{g(!0),s(null);let a=new URLSearchParams;p&&a.set("appId",p);let b=await fetch(`/api/cpp/list?${a}`),c=await b.json();c.success?i(c.data):s(c.error||"Failed to load custom product pages")}catch(a){s(a instanceof Error?a.message:"Failed to load custom product pages")}finally{g(!1)}},y=async(a,b)=>{if(confirm(`Are you sure you want to delete "${b}"? This action cannot be undone.`))try{w(a),s(null);let b=await fetch(`/api/cpp/${a}`,{method:"DELETE"}),c=await b.json();c.success?(u("Custom product page deleted successfully"),i(b=>b.filter(b=>b.id!==a)),setTimeout(()=>u(null),3e3)):s(c.error||"Failed to delete custom product page")}catch(a){s(a instanceof Error?a.message:"Failed to delete custom product page")}finally{w(null)}},z=async a=>{try{s(null);let b=!a.attributes?.visible,c=await fetch(`/api/cpp/${a.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({visible:b})}),d=await c.json();d.success?(u(`Custom product page is now ${b?"visible":"hidden"}`),i(b=>b.map(b=>b.id===a.id?d.data:b)),setTimeout(()=>u(null),3e3)):s(d.error||"Failed to update visibility")}catch(a){s(a instanceof Error?a.message:"Failed to update visibility")}};return(0,b.jsxs)("div",{className:e.default.container,children:[(0,b.jsxs)("div",{className:e.default.header,children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{children:"Custom Product Pages"}),(0,b.jsx)("p",{className:e.default.subtitle,children:"Manage your Custom Product Pages"})]}),(0,b.jsx)("button",{onClick:()=>a.push("/cpp"),className:e.default.buttonPrimary,children:"Create New CPP"})]}),(0,b.jsxs)("div",{className:e.default.filters,children:[(0,b.jsx)("div",{className:e.default.searchBox,children:(0,b.jsx)("input",{type:"text",placeholder:"Search by name, URL, or state...",value:l,onChange:a=>m(a.target.value),className:e.default.searchInput})}),(0,b.jsxs)("div",{className:e.default.filterGroup,children:[(0,b.jsx)("label",{children:"Visibility:"}),(0,b.jsxs)("select",{value:n,onChange:a=>o(a.target.value),className:e.default.filterSelect,children:[(0,b.jsx)("option",{value:"all",children:"All"}),(0,b.jsx)("option",{value:"visible",children:"Visible"}),(0,b.jsx)("option",{value:"hidden",children:"Hidden"})]})]}),(0,b.jsx)("button",{onClick:x,disabled:f,className:e.default.buttonSecondary,children:f?"Refreshing...":"Refresh"})]}),r&&(0,b.jsxs)("div",{className:e.default.error,children:[(0,b.jsx)("strong",{children:"Error:"})," ",r]}),t&&(0,b.jsxs)("div",{className:e.default.success,children:[(0,b.jsx)("strong",{children:"Success:"})," ",t]}),(0,b.jsx)("div",{className:e.default.content,children:f&&0===h.length?(0,b.jsx)("div",{className:e.default.loading,children:"Loading custom product pages..."}):0===j.length?(0,b.jsx)("div",{className:e.default.emptyState,children:l||"all"!==n?(0,b.jsx)("p",{children:"No custom product pages match your filters."}):(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{children:"No custom product pages found."}),(0,b.jsx)("button",{onClick:()=>a.push("/cpp"),className:e.default.buttonPrimary,children:"Create First Custom Product Page"})]})}):(0,b.jsx)("div",{className:e.default.table,children:(0,b.jsxs)("table",{children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"Name"}),(0,b.jsx)("th",{children:"State"}),(0,b.jsx)("th",{children:"Visibility"}),(0,b.jsx)("th",{children:"URL"}),(0,b.jsx)("th",{children:"Actions"})]})}),(0,b.jsx)("tbody",{children:j.map(c=>{var d;return(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:(0,b.jsx)("strong",{children:c.attributes?.name||"Unnamed"})}),(0,b.jsx)("td",{children:(0,b.jsx)("span",{className:`${e.default.badge} ${(a=>{switch(a){case"READY_FOR_DISTRIBUTION":return e.default.badgeSuccess;case"PREPARE_FOR_SUBMISSION":return e.default.badgeWarning;case"PROCESSING_FOR_DISTRIBUTION":return e.default.badgeInfo;case"REPLACED_WITH_NEW_VERSION":return e.default.badgeSecondary;default:return e.default.badgeDefault}})(c.attributes?.state)}`,children:(d=c.attributes?.state)?d.split("_").map(a=>a.charAt(0)+a.slice(1).toLowerCase()).join(" "):"Unknown"})}),(0,b.jsx)("td",{children:(0,b.jsx)("button",{onClick:()=>z(c),className:`${e.default.badgeButton} ${c.attributes?.visible?e.default.badgeVisible:e.default.badgeHidden}`,title:"Click to toggle visibility",children:c.attributes?.visible?"Visible":"Hidden"})}),(0,b.jsx)("td",{children:c.attributes?.url?(0,b.jsx)("a",{href:c.attributes.url,target:"_blank",rel:"noopener noreferrer",className:e.default.link,children:c.attributes.url.length>40?c.attributes.url.substring(0,40)+"...":c.attributes.url}):(0,b.jsx)("span",{className:e.default.muted,children:"â€”"})}),(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:e.default.actions,children:[(0,b.jsx)("button",{onClick:()=>{var b;return b=c.id,void a.push(`/cpp/edit/${b}`)},className:e.default.buttonEdit,title:"Edit",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>y(c.id,c.attributes?.name||"this page"),disabled:v===c.id,className:e.default.buttonDelete,title:"Delete",children:v===c.id?"Deleting...":"Delete"})]})})]},c.id)})})]})})}),j.length>0&&(0,b.jsxs)("div",{className:e.default.footer,children:["Showing ",j.length," of ",h.length," custom product page",1!==h.length?"s":""]})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=src_app_cpp_list_ebe80672._.js.map