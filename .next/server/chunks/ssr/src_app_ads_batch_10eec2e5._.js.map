{"version":3,"sources":["turbopack:///[project]/src/app/ads/batch/batch.module.css [app-ssr] (css module)","turbopack:///[project]/src/app/ads/batch/components/ColumnMappingForm.module.css [app-ssr] (css module)","turbopack:///[project]/src/app/ads/batch/components/PreviewGrid.module.css [app-ssr] (css module)","turbopack:///[project]/src/app/ads/batch/components/BatchJobStatus.module.css [app-ssr] (css module)","../../../../src/app/ads/batch/page.tsx","../../../../src/app/ads/batch/components/ColumnMappingForm.tsx","../../../../src/app/ads/batch/components/PreviewGrid.tsx","../../../../src/app/ads/batch/components/BatchJobStatus.tsx"],"sourcesContent":["__turbopack_context__.v({\n  \"actions\": \"batch-module__XCvZ4W__actions\",\n  \"buttonOutline\": \"batch-module__XCvZ4W__buttonOutline\",\n  \"buttonPrimary\": \"batch-module__XCvZ4W__buttonPrimary\",\n  \"buttonSecondary\": \"batch-module__XCvZ4W__buttonSecondary\",\n  \"container\": \"batch-module__XCvZ4W__container\",\n  \"error\": \"batch-module__XCvZ4W__error\",\n  \"fileInput\": \"batch-module__XCvZ4W__fileInput\",\n  \"fileName\": \"batch-module__XCvZ4W__fileName\",\n  \"fileSize\": \"batch-module__XCvZ4W__fileSize\",\n  \"header\": \"batch-module__XCvZ4W__header\",\n  \"section\": \"batch-module__XCvZ4W__section\",\n  \"sectionHeader\": \"batch-module__XCvZ4W__sectionHeader\",\n  \"sectionTitle\": \"batch-module__XCvZ4W__sectionTitle\",\n  \"select\": \"batch-module__XCvZ4W__select\",\n  \"stepNumber\": \"batch-module__XCvZ4W__stepNumber\",\n  \"subtitle\": \"batch-module__XCvZ4W__subtitle\",\n  \"title\": \"batch-module__XCvZ4W__title\",\n  \"uploadArea\": \"batch-module__XCvZ4W__uploadArea\",\n  \"uploadIcon\": \"batch-module__XCvZ4W__uploadIcon\",\n  \"uploadLabel\": \"batch-module__XCvZ4W__uploadLabel\",\n});\n","__turbopack_context__.v({\n  \"actions\": \"ColumnMappingForm-module__Mt7egW__actions\",\n  \"buttonSmall\": \"ColumnMappingForm-module__Mt7egW__buttonSmall\",\n  \"clearButton\": \"ColumnMappingForm-module__Mt7egW__clearButton\",\n  \"compact\": \"ColumnMappingForm-module__Mt7egW__compact\",\n  \"container\": \"ColumnMappingForm-module__Mt7egW__container\",\n  \"defaultValue\": \"ColumnMappingForm-module__Mt7egW__defaultValue\",\n  \"fieldDescription\": \"ColumnMappingForm-module__Mt7egW__fieldDescription\",\n  \"fieldName\": \"ColumnMappingForm-module__Mt7egW__fieldName\",\n  \"helpText\": \"ColumnMappingForm-module__Mt7egW__helpText\",\n  \"sampleValue\": \"ColumnMappingForm-module__Mt7egW__sampleValue\",\n  \"select\": \"ColumnMappingForm-module__Mt7egW__select\",\n  \"summary\": \"ColumnMappingForm-module__Mt7egW__summary\",\n  \"summaryItem\": \"ColumnMappingForm-module__Mt7egW__summaryItem\",\n  \"table\": \"ColumnMappingForm-module__Mt7egW__table\",\n  \"tableBody\": \"ColumnMappingForm-module__Mt7egW__tableBody\",\n  \"tableCell\": \"ColumnMappingForm-module__Mt7egW__tableCell\",\n  \"tableHeader\": \"ColumnMappingForm-module__Mt7egW__tableHeader\",\n  \"tableHeaderCell\": \"ColumnMappingForm-module__Mt7egW__tableHeaderCell\",\n  \"tableRow\": \"ColumnMappingForm-module__Mt7egW__tableRow\",\n  \"tableRowMapped\": \"ColumnMappingForm-module__Mt7egW__tableRowMapped\",\n});\n","__turbopack_context__.v({\n  \"card\": \"PreviewGrid-module__L5-mUa__card\",\n  \"cardFooter\": \"PreviewGrid-module__L5-mUa__cardFooter\",\n  \"empty\": \"PreviewGrid-module__L5-mUa__empty\",\n  \"error\": \"PreviewGrid-module__L5-mUa__error\",\n  \"errorDetails\": \"PreviewGrid-module__L5-mUa__errorDetails\",\n  \"errorIcon\": \"PreviewGrid-module__L5-mUa__errorIcon\",\n  \"errorText\": \"PreviewGrid-module__L5-mUa__errorText\",\n  \"grid\": \"PreviewGrid-module__L5-mUa__grid\",\n  \"image\": \"PreviewGrid-module__L5-mUa__image\",\n  \"imageContainer\": \"PreviewGrid-module__L5-mUa__imageContainer\",\n  \"loading\": \"PreviewGrid-module__L5-mUa__loading\",\n  \"rowLabel\": \"PreviewGrid-module__L5-mUa__rowLabel\",\n});\n","__turbopack_context__.v({\n  \"actions\": \"BatchJobStatus-module__UNPJba__actions\",\n  \"container\": \"BatchJobStatus-module__UNPJba__container\",\n  \"downloadButton\": \"BatchJobStatus-module__UNPJba__downloadButton\",\n  \"error\": \"BatchJobStatus-module__UNPJba__error\",\n  \"manifestButton\": \"BatchJobStatus-module__UNPJba__manifestButton\",\n  \"progress\": \"BatchJobStatus-module__UNPJba__progress\",\n  \"progressBar\": \"BatchJobStatus-module__UNPJba__progressBar\",\n  \"progressFill\": \"BatchJobStatus-module__UNPJba__progressFill\",\n  \"progressText\": \"BatchJobStatus-module__UNPJba__progressText\",\n  \"spin\": \"BatchJobStatus-module__UNPJba__spin\",\n  \"statError\": \"BatchJobStatus-module__UNPJba__statError\",\n  \"statItem\": \"BatchJobStatus-module__UNPJba__statItem\",\n  \"statLabel\": \"BatchJobStatus-module__UNPJba__statLabel\",\n  \"statValue\": \"BatchJobStatus-module__UNPJba__statValue\",\n  \"stats\": \"BatchJobStatus-module__UNPJba__stats\",\n  \"statusBadge\": \"BatchJobStatus-module__UNPJba__statusBadge\",\n  \"statusDefault\": \"BatchJobStatus-module__UNPJba__statusDefault\",\n  \"statusError\": \"BatchJobStatus-module__UNPJba__statusError\",\n  \"statusIcon\": \"BatchJobStatus-module__UNPJba__statusIcon\",\n  \"statusProcessing\": \"BatchJobStatus-module__UNPJba__statusProcessing\",\n  \"statusSuccess\": \"BatchJobStatus-module__UNPJba__statusSuccess\",\n  \"statusText\": \"BatchJobStatus-module__UNPJba__statusText\",\n});\n","'use client';\n\n/**\n * ADS-013: Column Mapping UI\n * Upload CSV and map columns to template fields\n */\n\nimport { useState, useCallback, useEffect } from 'react';\nimport { AdTemplate } from '../../../types/adTemplate';\nimport { ColumnMapping } from '../../../services/csvImport';\nimport { trackFeatureDiscovery } from '../../../services/retentionTracking';\nimport styles from './batch.module.css';\nimport ColumnMappingForm from './components/ColumnMappingForm';\nimport PreviewGrid from './components/PreviewGrid';\nimport BatchJobStatus from './components/BatchJobStatus';\n\n// Sample templates for selection\nconst STARTER_TEMPLATES = [\n  'example-hero-ad',\n  'example-quote-ad',\n  'example-minimal-ad',\n  'example-text-only-ad',\n];\n\ninterface CSVUploadState {\n  file: File | null;\n  headers: string[];\n  sampleRows: Record<string, string>[];\n  error: string | null;\n}\n\ninterface BatchJobState {\n  jobId: string | null;\n  status: 'idle' | 'mapping' | 'previewing' | 'rendering' | 'completed' | 'error';\n  progress: number;\n  totalAssets: number;\n  completedAssets: number;\n  failedAssets: number;\n  error: string | null;\n}\n\nexport default function BatchImportPage() {\n  const [csvState, setCSVState] = useState<CSVUploadState>({\n    file: null,\n    headers: [],\n    sampleRows: [],\n    error: null,\n  });\n\n  const [selectedTemplate, setSelectedTemplate] = useState('example-hero-ad');\n  const [template, setTemplate] = useState<AdTemplate | null>(null);\n  const [columnMapping, setColumnMapping] = useState<ColumnMapping>({});\n  const [batchJob, setBatchJob] = useState<BatchJobState>({\n    jobId: null,\n    status: 'idle',\n    progress: 0,\n    totalAssets: 0,\n    completedAssets: 0,\n    failedAssets: 0,\n    error: null,\n  });\n\n  // Load template\n  const loadTemplate = async (templateId: string) => {\n    try {\n      const response = await fetch(`/data/ads/${templateId}.json`);\n      const data = await response.json();\n      setTemplate(data);\n    } catch (error) {\n      console.error('Error loading template:', error);\n    }\n  };\n\n  // Handle CSV file upload\n  const handleCSVUpload = useCallback(async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    try {\n      const text = await file.text();\n      const lines = text.split('\\n').filter(line => line.trim());\n\n      if (lines.length === 0) {\n        throw new Error('CSV file is empty');\n      }\n\n      // Parse headers (first line)\n      const headers = lines[0].split(',').map(h => h.trim().replace(/^\"|\"$/g, ''));\n\n      // Parse sample rows (next 3 rows)\n      const sampleRows = lines.slice(1, 4).map(line => {\n        const values = line.split(',').map(v => v.trim().replace(/^\"|\"$/g, ''));\n        const row: Record<string, string> = {};\n        headers.forEach((header, i) => {\n          row[header] = values[i] || '';\n        });\n        return row;\n      });\n\n      setCSVState({\n        file,\n        headers,\n        sampleRows,\n        error: null,\n      });\n\n      setBatchJob(prev => ({ ...prev, status: 'mapping' }));\n    } catch (error) {\n      setCSVState({\n        file: null,\n        headers: [],\n        sampleRows: [],\n        error: error instanceof Error ? error.message : 'Failed to parse CSV',\n      });\n    }\n  }, []);\n\n  // Track feature discovery\n  useEffect(() => {\n    trackFeatureDiscovery('csv_import');\n  }, []);\n\n  // Handle template selection\n  const handleTemplateChange = (templateId: string) => {\n    setSelectedTemplate(templateId);\n    loadTemplate(templateId);\n  };\n\n  // Handle column mapping update\n  const handleMappingUpdate = (mapping: ColumnMapping) => {\n    setColumnMapping(mapping);\n  };\n\n  // Generate preview\n  const handleGeneratePreview = async () => {\n    if (!csvState.file || !template) return;\n\n    setBatchJob(prev => ({\n      ...prev,\n      status: 'previewing',\n      progress: 0,\n    }));\n\n    try {\n      // Create FormData for API request\n      const formData = new FormData();\n      formData.append('csv', csvState.file);\n      formData.append('template', JSON.stringify(template));\n      formData.append('columnMapping', JSON.stringify(columnMapping));\n      formData.append('previewCount', '3');\n\n      const response = await fetch('/api/ads/batch/preview', {\n        method: 'POST',\n        body: formData,\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to generate preview');\n      }\n\n      const result = await response.json();\n\n      setBatchJob(prev => ({\n        ...prev,\n        status: 'previewing',\n        totalAssets: result.assets.length,\n        completedAssets: result.assets.filter((a: any) => a.status === 'completed').length,\n        failedAssets: result.assets.filter((a: any) => a.status === 'failed').length,\n      }));\n    } catch (error) {\n      setBatchJob(prev => ({\n        ...prev,\n        status: 'error',\n        error: error instanceof Error ? error.message : 'Preview generation failed',\n      }));\n    }\n  };\n\n  // Start full batch render\n  const handleStartBatchRender = async () => {\n    if (!csvState.file || !template) return;\n\n    setBatchJob(prev => ({\n      ...prev,\n      status: 'rendering',\n      progress: 0,\n    }));\n\n    try {\n      // Create FormData for API request\n      const formData = new FormData();\n      formData.append('csv', csvState.file);\n      formData.append('template', JSON.stringify(template));\n      formData.append('columnMapping', JSON.stringify(columnMapping));\n      formData.append('format', 'png');\n      formData.append('createZip', 'true');\n\n      const response = await fetch('/api/ads/batch/render', {\n        method: 'POST',\n        body: formData,\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to start batch render');\n      }\n\n      const result = await response.json();\n\n      setBatchJob(prev => ({\n        ...prev,\n        jobId: result.jobId,\n        status: 'rendering',\n        totalAssets: result.totalAssets,\n      }));\n\n      // Poll for job status\n      pollJobStatus(result.jobId);\n    } catch (error) {\n      setBatchJob(prev => ({\n        ...prev,\n        status: 'error',\n        error: error instanceof Error ? error.message : 'Batch render failed',\n      }));\n    }\n  };\n\n  // Poll job status\n  const pollJobStatus = async (jobId: string) => {\n    const interval = setInterval(async () => {\n      try {\n        const response = await fetch(`/api/ads/batch/status/${jobId}`);\n        if (!response.ok) {\n          throw new Error('Failed to fetch job status');\n        }\n\n        const job = await response.json();\n\n        setBatchJob(prev => ({\n          ...prev,\n          status: job.status === 'completed' ? 'completed' : 'rendering',\n          progress: job.progress,\n          completedAssets: job.completedCount,\n          failedAssets: job.failedCount,\n        }));\n\n        if (job.status === 'completed' || job.status === 'failed') {\n          clearInterval(interval);\n        }\n      } catch (error) {\n        console.error('Error polling job status:', error);\n        clearInterval(interval);\n      }\n    }, 2000);\n  };\n\n  // Reset everything\n  const handleReset = () => {\n    setCSVState({\n      file: null,\n      headers: [],\n      sampleRows: [],\n      error: null,\n    });\n    setColumnMapping({});\n    setBatchJob({\n      jobId: null,\n      status: 'idle',\n      progress: 0,\n      totalAssets: 0,\n      completedAssets: 0,\n      failedAssets: 0,\n      error: null,\n    });\n  };\n\n  return (\n    <div className={styles.container}>\n      {/* Header */}\n      <header className={styles.header}>\n        <h1 className={styles.title}>Batch Ad Generator</h1>\n        <p className={styles.subtitle}>Upload CSV and generate hundreds of ad creatives</p>\n      </header>\n\n      {/* Step 1: Upload CSV */}\n      <section className={styles.section}>\n        <div className={styles.sectionHeader}>\n          <h2 className={styles.sectionTitle}>\n            <span className={styles.stepNumber}>1</span>\n            Upload CSV File\n          </h2>\n        </div>\n        <div className={styles.uploadArea}>\n          <input\n            type=\"file\"\n            accept=\".csv\"\n            onChange={handleCSVUpload}\n            className={styles.fileInput}\n            id=\"csv-upload\"\n            disabled={batchJob.status === 'rendering'}\n          />\n          <label htmlFor=\"csv-upload\" className={styles.uploadLabel}>\n            {csvState.file ? (\n              <>\n                <span className={styles.fileName}>{csvState.file.name}</span>\n                <span className={styles.fileSize}>\n                  ({Math.round(csvState.file.size / 1024)} KB)\n                </span>\n              </>\n            ) : (\n              <>\n                <span className={styles.uploadIcon}>üìÅ</span>\n                <span>Choose CSV file or drag and drop</span>\n              </>\n            )}\n          </label>\n          {csvState.error && (\n            <div className={styles.error}>{csvState.error}</div>\n          )}\n        </div>\n      </section>\n\n      {/* Step 2: Select Template */}\n      {csvState.file && (\n        <section className={styles.section}>\n          <div className={styles.sectionHeader}>\n            <h2 className={styles.sectionTitle}>\n              <span className={styles.stepNumber}>2</span>\n              Select Template\n            </h2>\n          </div>\n          <select\n            value={selectedTemplate}\n            onChange={(e) => handleTemplateChange(e.target.value)}\n            className={styles.select}\n            disabled={batchJob.status === 'rendering'}\n          >\n            {STARTER_TEMPLATES.map((t) => (\n              <option key={t} value={t}>\n                {t.replace('example-', '').replace(/-/g, ' ')}\n              </option>\n            ))}\n          </select>\n        </section>\n      )}\n\n      {/* Step 3: Map Columns */}\n      {csvState.file && template && (\n        <section className={styles.section}>\n          <div className={styles.sectionHeader}>\n            <h2 className={styles.sectionTitle}>\n              <span className={styles.stepNumber}>3</span>\n              Map CSV Columns to Template Fields\n            </h2>\n          </div>\n          <ColumnMappingForm\n            headers={csvState.headers}\n            sampleRows={csvState.sampleRows}\n            template={template}\n            columnMapping={columnMapping}\n            onMappingUpdate={handleMappingUpdate}\n            disabled={batchJob.status === 'rendering'}\n          />\n        </section>\n      )}\n\n      {/* Actions */}\n      {csvState.file && template && (\n        <section className={styles.actions}>\n          <button\n            onClick={handleGeneratePreview}\n            className={styles.buttonSecondary}\n            disabled={batchJob.status === 'rendering'}\n          >\n            Generate Preview (3 rows)\n          </button>\n          <button\n            onClick={handleStartBatchRender}\n            className={styles.buttonPrimary}\n            disabled={batchJob.status === 'rendering'}\n          >\n            {batchJob.status === 'rendering'\n              ? 'Rendering...'\n              : 'Start Batch Render'}\n          </button>\n          <button\n            onClick={handleReset}\n            className={styles.buttonOutline}\n            disabled={batchJob.status === 'rendering'}\n          >\n            Reset\n          </button>\n        </section>\n      )}\n\n      {/* Job Status */}\n      {batchJob.status !== 'idle' && (\n        <section className={styles.section}>\n          <BatchJobStatus job={batchJob} />\n        </section>\n      )}\n\n      {/* Preview Grid */}\n      {batchJob.status === 'previewing' && (\n        <section className={styles.section}>\n          <h2 className={styles.sectionTitle}>Preview</h2>\n          <PreviewGrid jobId={batchJob.jobId} />\n        </section>\n      )}\n    </div>\n  );\n}\n","'use client';\n\n/**\n * Column Mapping Form Component\n * Maps CSV columns to template fields\n */\n\nimport { useState, useEffect } from 'react';\nimport { AdTemplate } from '../../../../types/adTemplate';\nimport { ColumnMapping } from '../../../../services/csvImport';\nimport styles from './ColumnMappingForm.module.css';\n\ninterface ColumnMappingFormProps {\n  headers: string[];\n  sampleRows: Record<string, string>[];\n  template: AdTemplate;\n  columnMapping: ColumnMapping;\n  onMappingUpdate: (mapping: ColumnMapping) => void;\n  disabled?: boolean;\n}\n\n// Template field definitions with descriptions\nconst TEMPLATE_FIELDS = [\n  {\n    key: 'headline',\n    label: 'Headline',\n    description: 'Main headline text',\n    required: false,\n  },\n  {\n    key: 'subheadline',\n    label: 'Subheadline',\n    description: 'Secondary headline text',\n    required: false,\n  },\n  {\n    key: 'body',\n    label: 'Body Text',\n    description: 'Main body content',\n    required: false,\n  },\n  {\n    key: 'cta',\n    label: 'Call-to-Action',\n    description: 'CTA button text',\n    required: false,\n  },\n  {\n    key: 'backgroundImage',\n    label: 'Background Image',\n    description: 'URL or path to background image',\n    required: false,\n  },\n  {\n    key: 'productImage',\n    label: 'Product Image',\n    description: 'URL or path to product/feature image',\n    required: false,\n  },\n  {\n    key: 'logo',\n    label: 'Logo',\n    description: 'URL or path to logo image',\n    required: false,\n  },\n  {\n    key: 'backgroundColor',\n    label: 'Background Color',\n    description: 'Hex color code (e.g., #3b82f6)',\n    required: false,\n  },\n  {\n    key: 'primaryColor',\n    label: 'Primary Color',\n    description: 'Hex color code for primary brand color',\n    required: false,\n  },\n  {\n    key: 'uniqueId',\n    label: 'Unique ID',\n    description: 'Unique identifier (SKU, product ID, etc.)',\n    required: false,\n  },\n] as const;\n\nexport default function ColumnMappingForm({\n  headers,\n  sampleRows,\n  template,\n  columnMapping,\n  onMappingUpdate,\n  disabled = false,\n}: ColumnMappingFormProps) {\n  const [localMapping, setLocalMapping] = useState<ColumnMapping>(columnMapping);\n  const [showSamples, setShowSamples] = useState(true);\n\n  // Update parent when local mapping changes\n  useEffect(() => {\n    onMappingUpdate(localMapping);\n  }, [localMapping, onMappingUpdate]);\n\n  // Auto-detect mappings based on column names\n  const autoDetectMappings = () => {\n    const newMapping: ColumnMapping = {};\n\n    TEMPLATE_FIELDS.forEach(field => {\n      // Look for exact match or similar column name\n      const matchingHeader = headers.find(header => {\n        const normalizedHeader = header.toLowerCase().replace(/[_\\s-]/g, '');\n        const normalizedField = field.key.toLowerCase().replace(/[_\\s-]/g, '');\n        return normalizedHeader === normalizedField ||\n               normalizedHeader.includes(normalizedField) ||\n               normalizedField.includes(normalizedHeader);\n      });\n\n      if (matchingHeader) {\n        (newMapping as any)[field.key] = matchingHeader;\n      }\n    });\n\n    setLocalMapping(newMapping);\n  };\n\n  // Handle mapping change\n  const handleMappingChange = (fieldKey: string, columnName: string) => {\n    setLocalMapping(prev => ({\n      ...prev,\n      [fieldKey]: columnName || undefined,\n    }));\n  };\n\n  // Clear mapping for a field\n  const handleClearMapping = (fieldKey: string) => {\n    setLocalMapping(prev => {\n      const updated = { ...prev };\n      delete updated[fieldKey as keyof ColumnMapping];\n      return updated;\n    });\n  };\n\n  // Clear all mappings\n  const clearAllMappings = () => {\n    setLocalMapping({});\n  };\n\n  // Get sample value for a mapping\n  const getSampleValue = (columnName: string | undefined): string => {\n    if (!columnName || sampleRows.length === 0) return '‚Äî';\n    return sampleRows[0][columnName] || '‚Äî';\n  };\n\n  // Get current template value for a field\n  const getTemplateValue = (fieldKey: string): string => {\n    if (fieldKey === 'primaryColor') {\n      return template.style.primaryColor || '‚Äî';\n    }\n    return (template.content as any)[fieldKey] || '‚Äî';\n  };\n\n  return (\n    <div className={styles.container}>\n      {/* Actions */}\n      <div className={styles.actions}>\n        <button\n          onClick={autoDetectMappings}\n          className={styles.buttonSmall}\n          disabled={disabled}\n        >\n          Auto-detect\n        </button>\n        <button\n          onClick={clearAllMappings}\n          className={styles.buttonSmall}\n          disabled={disabled}\n        >\n          Clear All\n        </button>\n        <button\n          onClick={() => setShowSamples(!showSamples)}\n          className={styles.buttonSmall}\n        >\n          {showSamples ? 'Hide' : 'Show'} Samples\n        </button>\n      </div>\n\n      {/* Mapping Table */}\n      <div className={styles.table}>\n        <div className={styles.tableHeader}>\n          <div className={styles.tableHeaderCell}>Template Field</div>\n          <div className={styles.tableHeaderCell}>CSV Column</div>\n          {showSamples && (\n            <>\n              <div className={styles.tableHeaderCell}>Sample Value</div>\n              <div className={styles.tableHeaderCell}>Current Default</div>\n            </>\n          )}\n          <div className={styles.tableHeaderCell}>Actions</div>\n        </div>\n\n        <div className={styles.tableBody}>\n          {TEMPLATE_FIELDS.map(field => {\n            const currentMapping = (localMapping as any)[field.key];\n            const isMapped = !!currentMapping;\n\n            return (\n              <div\n                key={field.key}\n                className={`${styles.tableRow} ${isMapped ? styles.tableRowMapped : ''}`}\n              >\n                {/* Field Name */}\n                <div className={styles.tableCell}>\n                  <div className={styles.fieldName}>{field.label}</div>\n                  <div className={styles.fieldDescription}>{field.description}</div>\n                </div>\n\n                {/* Column Selector */}\n                <div className={styles.tableCell}>\n                  <select\n                    value={currentMapping || ''}\n                    onChange={(e) => handleMappingChange(field.key, e.target.value)}\n                    className={styles.select}\n                    disabled={disabled}\n                  >\n                    <option value=\"\">‚Äî Not mapped ‚Äî</option>\n                    {headers.map(header => (\n                      <option key={header} value={header}>\n                        {header}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                {/* Sample Value */}\n                {showSamples && (\n                  <>\n                    <div className={styles.tableCell}>\n                      <div className={styles.sampleValue}>\n                        {getSampleValue(currentMapping)}\n                      </div>\n                    </div>\n\n                    {/* Template Default */}\n                    <div className={styles.tableCell}>\n                      <div className={styles.defaultValue}>\n                        {getTemplateValue(field.key)}\n                      </div>\n                    </div>\n                  </>\n                )}\n\n                {/* Actions */}\n                <div className={styles.tableCell}>\n                  {isMapped && (\n                    <button\n                      onClick={() => handleClearMapping(field.key)}\n                      className={styles.clearButton}\n                      disabled={disabled}\n                      title=\"Clear mapping\"\n                    >\n                      ‚úï\n                    </button>\n                  )}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Mapping Summary */}\n      <div className={styles.summary}>\n        <div className={styles.summaryItem}>\n          <strong>CSV Columns:</strong> {headers.length}\n        </div>\n        <div className={styles.summaryItem}>\n          <strong>Mapped Fields:</strong> {Object.keys(localMapping).length}\n        </div>\n        <div className={styles.summaryItem}>\n          <strong>Sample Rows:</strong> {sampleRows.length}\n        </div>\n      </div>\n\n      {/* Help Text */}\n      <div className={styles.helpText}>\n        <p>\n          üí° <strong>Tip:</strong> Click \"Auto-detect\" to automatically match column names to template fields.\n          Unmapped fields will use the template's default values.\n        </p>\n      </div>\n    </div>\n  );\n}\n","'use client';\n\n/**\n * Preview Grid Component\n * Display preview images from batch render\n */\n\nimport { useState, useEffect } from 'react';\nimport styles from './PreviewGrid.module.css';\n\ninterface PreviewAsset {\n  id: string;\n  rowIndex: number;\n  filePath: string;\n  status: 'completed' | 'failed';\n  error?: string;\n}\n\ninterface PreviewGridProps {\n  jobId: string | null;\n}\n\nexport default function PreviewGrid({ jobId }: PreviewGridProps) {\n  const [assets, setAssets] = useState<PreviewAsset[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (!jobId) {\n      setLoading(false);\n      return;\n    }\n\n    // Fetch preview assets\n    fetch(`/api/ads/batch/preview-assets/${jobId}`)\n      .then(res => res.json())\n      .then(data => {\n        setAssets(data.assets || []);\n        setLoading(false);\n      })\n      .catch(err => {\n        console.error('Error loading preview assets:', err);\n        setLoading(false);\n      });\n  }, [jobId]);\n\n  if (loading) {\n    return <div className={styles.loading}>Loading previews...</div>;\n  }\n\n  if (assets.length === 0) {\n    return (\n      <div className={styles.empty}>\n        No preview assets available. Generate a preview to see results.\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.grid}>\n      {assets.map(asset => (\n        <div key={asset.id} className={styles.card}>\n          {asset.status === 'completed' ? (\n            <>\n              <div className={styles.imageContainer}>\n                <img\n                  src={`/api/ads/batch/asset/${jobId}/${asset.filePath}`}\n                  alt={`Preview ${asset.rowIndex}`}\n                  className={styles.image}\n                />\n              </div>\n              <div className={styles.cardFooter}>\n                <span className={styles.rowLabel}>Row {asset.rowIndex}</span>\n              </div>\n            </>\n          ) : (\n            <div className={styles.error}>\n              <div className={styles.errorIcon}>‚úï</div>\n              <div className={styles.errorText}>\n                Failed to render row {asset.rowIndex}\n              </div>\n              {asset.error && (\n                <div className={styles.errorDetails}>{asset.error}</div>\n              )}\n            </div>\n          )}\n        </div>\n      ))}\n    </div>\n  );\n}\n","'use client';\n\n/**\n * Batch Job Status Component\n * Display batch rendering job status and progress\n */\n\nimport styles from './BatchJobStatus.module.css';\n\ninterface BatchJobStatusProps {\n  job: {\n    jobId: string | null;\n    status: 'idle' | 'mapping' | 'previewing' | 'rendering' | 'completed' | 'error';\n    progress: number;\n    totalAssets: number;\n    completedAssets: number;\n    failedAssets: number;\n    error: string | null;\n  };\n}\n\nexport default function BatchJobStatus({ job }: BatchJobStatusProps) {\n  const getStatusColor = () => {\n    switch (job.status) {\n      case 'completed':\n        return styles.statusSuccess;\n      case 'error':\n        return styles.statusError;\n      case 'rendering':\n        return styles.statusProcessing;\n      default:\n        return styles.statusDefault;\n    }\n  };\n\n  const getStatusIcon = () => {\n    switch (job.status) {\n      case 'completed':\n        return '‚úì';\n      case 'error':\n        return '‚úï';\n      case 'rendering':\n        return '‚ü≥';\n      case 'previewing':\n        return 'üëÅ';\n      case 'mapping':\n        return 'üó∫';\n      default:\n        return '‚óã';\n    }\n  };\n\n  const getStatusText = () => {\n    switch (job.status) {\n      case 'mapping':\n        return 'Mapping columns...';\n      case 'previewing':\n        return 'Generating preview...';\n      case 'rendering':\n        return 'Rendering ads...';\n      case 'completed':\n        return 'Batch complete!';\n      case 'error':\n        return 'Error occurred';\n      default:\n        return 'Ready';\n    }\n  };\n\n  return (\n    <div className={styles.container}>\n      <div className={`${styles.statusBadge} ${getStatusColor()}`}>\n        <span className={styles.statusIcon}>{getStatusIcon()}</span>\n        <span className={styles.statusText}>{getStatusText()}</span>\n      </div>\n\n      {job.status === 'rendering' && (\n        <div className={styles.progress}>\n          <div className={styles.progressBar}>\n            <div\n              className={styles.progressFill}\n              style={{ width: `${job.progress}%` }}\n            />\n          </div>\n          <div className={styles.progressText}>\n            {job.progress}% ({job.completedAssets} / {job.totalAssets})\n          </div>\n        </div>\n      )}\n\n      {(job.status === 'completed' || job.status === 'previewing') && (\n        <div className={styles.stats}>\n          <div className={styles.statItem}>\n            <div className={styles.statValue}>{job.totalAssets}</div>\n            <div className={styles.statLabel}>Total Assets</div>\n          </div>\n          <div className={styles.statItem}>\n            <div className={styles.statValue}>{job.completedAssets}</div>\n            <div className={styles.statLabel}>Completed</div>\n          </div>\n          {job.failedAssets > 0 && (\n            <div className={styles.statItem}>\n              <div className={`${styles.statValue} ${styles.statError}`}>\n                {job.failedAssets}\n              </div>\n              <div className={styles.statLabel}>Failed</div>\n            </div>\n          )}\n        </div>\n      )}\n\n      {job.error && (\n        <div className={styles.error}>\n          <strong>Error:</strong> {job.error}\n        </div>\n      )}\n\n      {job.jobId && job.status === 'completed' && (\n        <div className={styles.actions}>\n          <a\n            href={`/api/ads/batch/download/${job.jobId}`}\n            className={styles.downloadButton}\n            download\n          >\n            üì¶ Download ZIP\n          </a>\n          <a\n            href={`/api/ads/batch/manifest/${job.jobId}`}\n            className={styles.manifestButton}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            üìÑ View Manifest\n          </a>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}