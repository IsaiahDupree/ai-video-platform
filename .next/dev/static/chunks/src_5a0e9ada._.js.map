{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/isaiahdupree/Documents/Software/ai-video-platform/src/services/tracking.ts"],"sourcesContent":["import posthog from 'posthog-js';\nimport {\n  TrackingConfig,\n  UserProperties,\n  EventProperties,\n  TrackingEvent,\n  ITrackingService,\n} from '../types/tracking';\n\nclass ClientTrackingService implements ITrackingService {\n  private initialized = false;\n  private enabled = false;\n\n  constructor() {\n    if (typeof window === 'undefined') {\n      return;\n    }\n  }\n\n  initialize(config: TrackingConfig): void {\n    if (this.initialized) {\n      console.warn('Tracking service already initialized');\n      return;\n    }\n\n    if (!config.apiKey) {\n      console.warn('PostHog API key not provided. Tracking disabled.');\n      this.enabled = false;\n      return;\n    }\n\n    this.enabled = config.enabled !== false;\n\n    if (!this.enabled) {\n      console.info('Tracking is disabled');\n      return;\n    }\n\n    try {\n      posthog.init(config.apiKey, {\n        api_host: config.host || 'https://us.i.posthog.com',\n        loaded: (posthog) => {\n          if (process.env.NODE_ENV === 'development') {\n            posthog.debug();\n          }\n        },\n        capture_pageview: false,\n        capture_pageleave: true,\n        autocapture: false,\n        persistence: 'localStorage+cookie',\n      });\n\n      this.initialized = true;\n      console.info('PostHog tracking initialized');\n    } catch (error) {\n      console.error('Failed to initialize PostHog:', error);\n      this.enabled = false;\n    }\n  }\n\n  identify(userId: string, properties?: UserProperties): void {\n    if (!this.isEnabled()) return;\n\n    try {\n      posthog.identify(userId, properties);\n    } catch (error) {\n      console.error('Failed to identify user:', error);\n    }\n  }\n\n  track(event: TrackingEvent, properties?: EventProperties): void {\n    if (!this.isEnabled()) {\n      console.debug('Tracking disabled, skipping event:', event);\n      return;\n    }\n\n    try {\n      posthog.capture(event, properties);\n    } catch (error) {\n      console.error('Failed to track event:', error);\n    }\n  }\n\n  page(name?: string, properties?: EventProperties): void {\n    if (!this.isEnabled()) return;\n\n    try {\n      posthog.capture('$pageview', {\n        $current_url: window.location.href,\n        page_name: name,\n        ...properties,\n      });\n    } catch (error) {\n      console.error('Failed to track page view:', error);\n    }\n  }\n\n  reset(): void {\n    if (!this.isEnabled()) return;\n\n    try {\n      posthog.reset();\n    } catch (error) {\n      console.error('Failed to reset tracking:', error);\n    }\n  }\n\n  isEnabled(): boolean {\n    return this.initialized && this.enabled;\n  }\n}\n\nexport const tracking = new ClientTrackingService();\n"],"names":[],"mappings":";;;;AA0Cc;AA1Cd;;AASA,MAAM;IACI,cAAc,MAAM;IACpB,UAAU,MAAM;IAExB,aAAc;QACZ;;IAGF;IAEA,WAAW,MAAsB,EAAQ;QACvC,IAAI,IAAI,CAAC,WAAW,EAAE;YACpB,QAAQ,IAAI,CAAC;YACb;QACF;QAEA,IAAI,CAAC,OAAO,MAAM,EAAE;YAClB,QAAQ,IAAI,CAAC;YACb,IAAI,CAAC,OAAO,GAAG;YACf;QACF;QAEA,IAAI,CAAC,OAAO,GAAG,OAAO,OAAO,KAAK;QAElC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YACjB,QAAQ,IAAI,CAAC;YACb;QACF;QAEA,IAAI;YACF,6JAAO,CAAC,IAAI,CAAC,OAAO,MAAM,EAAE;gBAC1B,UAAU,OAAO,IAAI,IAAI;gBACzB,QAAQ,CAAC;oBACP,wCAA4C;wBAC1C,QAAQ,KAAK;oBACf;gBACF;gBACA,kBAAkB;gBAClB,mBAAmB;gBACnB,aAAa;gBACb,aAAa;YACf;YAEA,IAAI,CAAC,WAAW,GAAG;YACnB,QAAQ,IAAI,CAAC;QACf,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iCAAiC;YAC/C,IAAI,CAAC,OAAO,GAAG;QACjB;IACF;IAEA,SAAS,MAAc,EAAE,UAA2B,EAAQ;QAC1D,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI;QAEvB,IAAI;YACF,6JAAO,CAAC,QAAQ,CAAC,QAAQ;QAC3B,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4BAA4B;QAC5C;IACF;IAEA,MAAM,KAAoB,EAAE,UAA4B,EAAQ;QAC9D,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI;YACrB,QAAQ,KAAK,CAAC,sCAAsC;YACpD;QACF;QAEA,IAAI;YACF,6JAAO,CAAC,OAAO,CAAC,OAAO;QACzB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,0BAA0B;QAC1C;IACF;IAEA,KAAK,IAAa,EAAE,UAA4B,EAAQ;QACtD,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI;QAEvB,IAAI;YACF,6JAAO,CAAC,OAAO,CAAC,aAAa;gBAC3B,cAAc,OAAO,QAAQ,CAAC,IAAI;gBAClC,WAAW;gBACX,GAAG,UAAU;YACf;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,8BAA8B;QAC9C;IACF;IAEA,QAAc;QACZ,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI;QAEvB,IAAI;YACF,6JAAO,CAAC,KAAK;QACf,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,6BAA6B;QAC7C;IACF;IAEA,YAAqB;QACnB,OAAO,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,OAAO;IACzC;AACF;AAEO,MAAM,WAAW,IAAI"}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///Users/isaiahdupree/Documents/Software/ai-video-platform/src/services/retentionTracking.ts"],"sourcesContent":["/**\n * Retention Event Tracking\n *\n * Tracks user retention and feature discovery events:\n * - return_visit: When users return to the platform\n * - feature_discovery: When users discover/use features for the first time\n */\n\nimport { tracking } from './tracking';\n\nconst STORAGE_KEY_PREFIX = 'retention_tracking_';\nconst LAST_VISIT_KEY = `${STORAGE_KEY_PREFIX}last_visit`;\nconst DISCOVERED_FEATURES_KEY = `${STORAGE_KEY_PREFIX}discovered_features`;\nconst VISIT_COUNT_KEY = `${STORAGE_KEY_PREFIX}visit_count`;\nconst FIRST_VISIT_KEY = `${STORAGE_KEY_PREFIX}first_visit`;\n\n// Return visit threshold: 30 minutes (if they come back after 30 min, it's a new visit)\nconst RETURN_VISIT_THRESHOLD_MS = 30 * 60 * 1000; // 30 minutes\n\nexport type DiscoverableFeature =\n  | 'ad_editor'\n  | 'template_library'\n  | 'brand_kit'\n  | 'batch_render'\n  | 'campaign_generator'\n  | 'csv_import'\n  | 'screenshot_editor'\n  | 'device_frames'\n  | 'caption_overlay'\n  | 'screenshot_resize'\n  | 'locale_export'\n  | 'asset_library'\n  | 'custom_product_page'\n  | 'ppo_test'\n  | 'app_preview_generator'\n  | 'analytics_dashboard'\n  | 'voice_clone'\n  | 'text_to_video'\n  | 'image_generation'\n  | 'approval_workflow'\n  | 'ai_variants'\n  | 'localization'\n  | 'creative_qa';\n\ninterface RetentionData {\n  visitCount: number;\n  firstVisit: string;\n  lastVisit: string;\n  discoveredFeatures: DiscoverableFeature[];\n}\n\n/**\n * Check if browser environment (not SSR)\n */\nfunction isBrowser(): boolean {\n  return typeof window !== 'undefined' && typeof localStorage !== 'undefined';\n}\n\n/**\n * Get data from localStorage\n */\nfunction getLocalStorageItem(key: string): string | null {\n  if (!isBrowser()) return null;\n  try {\n    return localStorage.getItem(key);\n  } catch (error) {\n    console.error('Failed to read from localStorage:', error);\n    return null;\n  }\n}\n\n/**\n * Set data in localStorage\n */\nfunction setLocalStorageItem(key: string, value: string): void {\n  if (!isBrowser()) return;\n  try {\n    localStorage.setItem(key, value);\n  } catch (error) {\n    console.error('Failed to write to localStorage:', error);\n  }\n}\n\n/**\n * Get all retention data\n */\nfunction getRetentionData(): RetentionData {\n  const visitCount = parseInt(getLocalStorageItem(VISIT_COUNT_KEY) || '0', 10);\n  const firstVisit = getLocalStorageItem(FIRST_VISIT_KEY) || new Date().toISOString();\n  const lastVisit = getLocalStorageItem(LAST_VISIT_KEY) || '';\n  const discoveredFeaturesRaw = getLocalStorageItem(DISCOVERED_FEATURES_KEY) || '[]';\n\n  let discoveredFeatures: DiscoverableFeature[] = [];\n  try {\n    discoveredFeatures = JSON.parse(discoveredFeaturesRaw);\n  } catch (error) {\n    console.error('Failed to parse discovered features:', error);\n    discoveredFeatures = [];\n  }\n\n  return {\n    visitCount,\n    firstVisit,\n    lastVisit,\n    discoveredFeatures,\n  };\n}\n\n/**\n * Calculate days since first visit\n */\nfunction getDaysSinceFirstVisit(firstVisit: string): number {\n  if (!firstVisit) return 0;\n  const firstVisitDate = new Date(firstVisit);\n  const now = new Date();\n  const diffMs = now.getTime() - firstVisitDate.getTime();\n  return Math.floor(diffMs / (1000 * 60 * 60 * 24));\n}\n\n/**\n * Calculate hours since last visit\n */\nfunction getHoursSinceLastVisit(lastVisit: string): number | null {\n  if (!lastVisit) return null;\n  const lastVisitDate = new Date(lastVisit);\n  const now = new Date();\n  const diffMs = now.getTime() - lastVisitDate.getTime();\n  return Math.floor(diffMs / (1000 * 60 * 60));\n}\n\n/**\n * Track return visit\n * Call this when the user loads the app\n */\nexport function trackReturnVisit(): void {\n  if (!isBrowser()) return;\n\n  const now = new Date();\n  const nowISO = now.toISOString();\n\n  const data = getRetentionData();\n  const lastVisitDate = data.lastVisit ? new Date(data.lastVisit) : null;\n\n  // Calculate if this is a new visit (based on threshold)\n  const isNewVisit = !lastVisitDate ||\n    (now.getTime() - lastVisitDate.getTime()) > RETURN_VISIT_THRESHOLD_MS;\n\n  // If first visit, just record it\n  if (data.visitCount === 0) {\n    setLocalStorageItem(FIRST_VISIT_KEY, nowISO);\n    setLocalStorageItem(LAST_VISIT_KEY, nowISO);\n    setLocalStorageItem(VISIT_COUNT_KEY, '1');\n\n    // Don't track return_visit on first visit\n    return;\n  }\n\n  // If new visit (after threshold), track it\n  if (isNewVisit) {\n    const newVisitCount = data.visitCount + 1;\n    const daysSinceFirstVisit = getDaysSinceFirstVisit(data.firstVisit);\n    const hoursSinceLastVisit = getHoursSinceLastVisit(data.lastVisit);\n\n    // Track the return visit event\n    tracking.track('return_visit', {\n      visitCount: newVisitCount,\n      daysSinceFirstVisit,\n      hoursSinceLastVisit,\n      firstVisit: data.firstVisit,\n      lastVisit: data.lastVisit,\n      timestamp: nowISO,\n    });\n\n    // Update storage\n    setLocalStorageItem(LAST_VISIT_KEY, nowISO);\n    setLocalStorageItem(VISIT_COUNT_KEY, newVisitCount.toString());\n  }\n\n  // Always update last visit timestamp (even if not a \"new visit\")\n  setLocalStorageItem(LAST_VISIT_KEY, nowISO);\n}\n\n/**\n * Track feature discovery\n * Call this when a user uses a feature for the first time\n */\nexport function trackFeatureDiscovery(feature: DiscoverableFeature): void {\n  if (!isBrowser()) return;\n\n  const data = getRetentionData();\n\n  // Check if already discovered\n  if (data.discoveredFeatures.includes(feature)) {\n    return; // Already tracked\n  }\n\n  // Add to discovered features\n  const updatedFeatures = [...data.discoveredFeatures, feature];\n  setLocalStorageItem(DISCOVERED_FEATURES_KEY, JSON.stringify(updatedFeatures));\n\n  const daysSinceFirstVisit = getDaysSinceFirstVisit(data.firstVisit);\n  const totalDiscoveredCount = updatedFeatures.length;\n\n  // Track the feature discovery event\n  tracking.track('feature_discovery', {\n    feature,\n    totalDiscoveredCount,\n    visitCount: data.visitCount,\n    daysSinceFirstVisit,\n    timestamp: new Date().toISOString(),\n  });\n}\n\n/**\n * Check if a feature has been discovered\n */\nexport function hasDiscoveredFeature(feature: DiscoverableFeature): boolean {\n  if (!isBrowser()) return false;\n  const data = getRetentionData();\n  return data.discoveredFeatures.includes(feature);\n}\n\n/**\n * Get retention statistics\n */\nexport function getRetentionStats(): RetentionData & {\n  daysSinceFirstVisit: number;\n  hoursSinceLastVisit: number | null;\n} {\n  const data = getRetentionData();\n  return {\n    ...data,\n    daysSinceFirstVisit: getDaysSinceFirstVisit(data.firstVisit),\n    hoursSinceLastVisit: getHoursSinceLastVisit(data.lastVisit),\n  };\n}\n\n/**\n * Reset retention tracking (for testing)\n */\nexport function resetRetentionTracking(): void {\n  if (!isBrowser()) return;\n  try {\n    localStorage.removeItem(LAST_VISIT_KEY);\n    localStorage.removeItem(DISCOVERED_FEATURES_KEY);\n    localStorage.removeItem(VISIT_COUNT_KEY);\n    localStorage.removeItem(FIRST_VISIT_KEY);\n  } catch (error) {\n    console.error('Failed to reset retention tracking:', error);\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 288, "column": 0}, "map": {"version":3,"sources":["file:///Users/isaiahdupree/Documents/Software/ai-video-platform/src/components/TrackingProvider.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, createContext, useContext, ReactNode } from 'react';\nimport { tracking } from '../services/tracking';\nimport { ITrackingService } from '../types/tracking';\nimport { trackReturnVisit } from '../services/retentionTracking';\n\nconst TrackingContext = createContext<ITrackingService>(tracking);\n\nexport const useTracking = () => {\n  return useContext(TrackingContext);\n};\n\ninterface TrackingProviderProps {\n  children: ReactNode;\n  apiKey?: string;\n  host?: string;\n  enabled?: boolean;\n}\n\nexport function TrackingProvider({\n  children,\n  apiKey,\n  host,\n  enabled = true,\n}: TrackingProviderProps) {\n  useEffect(() => {\n    const key = apiKey || process.env.NEXT_PUBLIC_POSTHOG_KEY;\n    const hostUrl = host || process.env.NEXT_PUBLIC_POSTHOG_HOST;\n\n    if (key) {\n      tracking.initialize({\n        apiKey: key,\n        host: hostUrl,\n        enabled,\n      });\n    }\n\n    // Track return visit after a short delay (to ensure tracking is initialized)\n    const timer = setTimeout(() => {\n      trackReturnVisit();\n    }, 500);\n\n    return () => clearTimeout(timer);\n  }, [apiKey, host, enabled]);\n\n  return (\n    <TrackingContext.Provider value={tracking}>\n      {children}\n    </TrackingContext.Provider>\n  );\n}\n"],"names":[],"mappings":";;;;;;AA2B0B;;AAzB1B;AACA;AAEA;;;AALA;;;;AAOA,MAAM,gCAAkB,IAAA,8KAAa,EAAmB,0IAAQ;AAEzD,MAAM,cAAc;;IACzB,OAAO,IAAA,2KAAU,EAAC;AACpB;GAFa;AAWN,SAAS,iBAAiB,EAC/B,QAAQ,EACR,MAAM,EACN,IAAI,EACJ,UAAU,IAAI,EACQ;;IACtB,IAAA,0KAAS;sCAAC;YACR,MAAM,MAAM,UAAU,2KAAO,CAAC,GAAG,CAAC,uBAAuB;YACzD,MAAM,UAAU,QAAQ,2KAAO,CAAC,GAAG,CAAC,wBAAwB;YAE5D,IAAI,KAAK;gBACP,0IAAQ,CAAC,UAAU,CAAC;oBAClB,QAAQ;oBACR,MAAM;oBACN;gBACF;YACF;YAEA,6EAA6E;YAC7E,MAAM,QAAQ;oDAAW;oBACvB,IAAA,2JAAgB;gBAClB;mDAAG;YAEH;8CAAO,IAAM,aAAa;;QAC5B;qCAAG;QAAC;QAAQ;QAAM;KAAQ;IAE1B,qBACE,6LAAC,gBAAgB,QAAQ;QAAC,OAAO,0IAAQ;kBACtC;;;;;;AAGP;IA/BgB;KAAA"}},
    {"offset": {"line": 359, "column": 0}, "map": {"version":3,"sources":["file:///Users/isaiahdupree/Documents/Software/ai-video-platform/src/components/MetaPixel.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect } from 'react';\nimport { usePathname, useSearchParams } from 'next/navigation';\nimport Script from 'next/script';\n\ndeclare global {\n  interface Window {\n    fbq: any;\n    _fbq: any;\n  }\n}\n\ninterface MetaPixelProps {\n  pixelId: string;\n}\n\n/**\n * Meta Pixel component for Facebook/Instagram conversion tracking\n *\n * Loads the Meta Pixel base code on all pages and provides\n * tracking functionality through the window.fbq function.\n *\n * Features:\n * - Tracks PageView on initial page load\n * - Tracks PageView on client-side navigation (route changes)\n * - Initializes window.fbq for custom event tracking\n *\n * @param pixelId - Meta Pixel ID from Facebook Ads Manager\n */\nexport function MetaPixel({ pixelId }: MetaPixelProps) {\n  const pathname = usePathname();\n  const searchParams = useSearchParams();\n\n  // Initialize Meta Pixel on mount\n  useEffect(() => {\n    // Initialize fbq function if not already present\n    if (typeof window !== 'undefined' && !window.fbq) {\n      const fbq = function() {\n        // @ts-ignore\n        fbq.callMethod\n          ? // @ts-ignore\n            fbq.callMethod.apply(fbq, arguments)\n          : // @ts-ignore\n            fbq.queue.push(arguments);\n      };\n      if (!window.fbq) window.fbq = fbq;\n      // @ts-ignore\n      window.fbq.push = fbq;\n      // @ts-ignore\n      window.fbq.loaded = true;\n      // @ts-ignore\n      window.fbq.version = '2.0';\n      // @ts-ignore\n      window.fbq.queue = [];\n      window._fbq = window.fbq;\n    }\n\n    // Initialize pixel with ID\n    if (window.fbq) {\n      window.fbq('init', pixelId);\n    }\n  }, [pixelId]);\n\n  // Track PageView on pathname or search params change\n  useEffect(() => {\n    if (window.fbq && pixelId && pixelId !== 'your_meta_pixel_id_here') {\n      // Build full URL for tracking\n      const url = pathname + (searchParams?.toString() ? `?${searchParams.toString()}` : '');\n\n      // Track PageView with current URL\n      window.fbq('track', 'PageView');\n\n      if (process.env.NODE_ENV === 'development') {\n        console.log('Meta Pixel PageView tracked:', url);\n      }\n    }\n  }, [pathname, searchParams, pixelId]);\n\n  if (!pixelId || pixelId === 'your_meta_pixel_id_here') {\n    // Don't load pixel if not configured\n    console.warn('Meta Pixel ID not configured');\n    return null;\n  }\n\n  return (\n    <>\n      {/* Meta Pixel Code */}\n      <Script\n        id=\"meta-pixel\"\n        strategy=\"afterInteractive\"\n        dangerouslySetInnerHTML={{\n          __html: `\n            !function(f,b,e,v,n,t,s)\n            {if(f.fbq)return;n=f.fbq=function(){n.callMethod?\n            n.callMethod.apply(n,arguments):n.queue.push(arguments)};\n            if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';\n            n.queue=[];t=b.createElement(e);t.async=!0;\n            t.src=v;s=b.getElementsByTagName(e)[0];\n            s.parentNode.insertBefore(t,s)}(window, document,'script',\n            'https://connect.facebook.net/en_US/fbevents.js');\n            fbq('init', '${pixelId}');\n          `,\n        }}\n      />\n      {/* Meta Pixel NoScript fallback */}\n      <noscript>\n        <img\n          height=\"1\"\n          width=\"1\"\n          style={{ display: 'none' }}\n          src={`https://www.facebook.com/tr?id=${pixelId}&ev=PageView&noscript=1`}\n          alt=\"\"\n        />\n      </noscript>\n    </>\n  );\n}\n\n/**\n * Track a custom Meta Pixel event\n *\n * @param eventName - Name of the event (e.g., 'ViewContent', 'Lead', 'Purchase')\n * @param parameters - Event parameters (optional)\n */\nexport function trackMetaEvent(eventName: string, parameters?: Record<string, any>) {\n  if (typeof window !== 'undefined' && window.fbq) {\n    window.fbq('track', eventName, parameters);\n  } else {\n    console.warn('Meta Pixel not loaded, cannot track event:', eventName);\n  }\n}\n\n/**\n * Track a custom Meta Pixel event (non-standard events)\n *\n * @param eventName - Name of the custom event\n * @param parameters - Event parameters (optional)\n */\nexport function trackMetaCustomEvent(eventName: string, parameters?: Record<string, any>) {\n  if (typeof window !== 'undefined' && window.fbq) {\n    window.fbq('trackCustom', eventName, parameters);\n  } else {\n    console.warn('Meta Pixel not loaded, cannot track custom event:', eventName);\n  }\n}\n\n/**\n * Consent Management - Grant consent for Meta Pixel tracking\n */\nexport function grantMetaConsent() {\n  if (typeof window !== 'undefined' && window.fbq) {\n    window.fbq('consent', 'grant');\n  }\n}\n\n/**\n * Consent Management - Revoke consent for Meta Pixel tracking\n */\nexport function revokeMetaConsent() {\n  if (typeof window !== 'undefined' && window.fbq) {\n    window.fbq('consent', 'revoke');\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAyEU;;AAvEV;AACA;AACA;;;AAJA;;;;AA8BO,SAAS,UAAU,EAAE,OAAO,EAAkB;;IACnD,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,eAAe,IAAA,wJAAe;IAEpC,iCAAiC;IACjC,IAAA,0KAAS;+BAAC;YACR,iDAAiD;YACjD,IAAI,+CAAkB,eAAe,CAAC,OAAO,GAAG,EAAE;gBAChD,MAAM;+CAAM;wBACV,aAAa;wBACb,IAAI,UAAU,GAEV,IAAI,UAAU,CAAC,KAAK,CAAC,KAAK,aAE1B,IAAI,KAAK,CAAC,IAAI,CAAC;oBACrB;;gBACA,IAAI,CAAC,OAAO,GAAG,EAAE,OAAO,GAAG,GAAG;gBAC9B,aAAa;gBACb,OAAO,GAAG,CAAC,IAAI,GAAG;gBAClB,aAAa;gBACb,OAAO,GAAG,CAAC,MAAM,GAAG;gBACpB,aAAa;gBACb,OAAO,GAAG,CAAC,OAAO,GAAG;gBACrB,aAAa;gBACb,OAAO,GAAG,CAAC,KAAK,GAAG,EAAE;gBACrB,OAAO,IAAI,GAAG,OAAO,GAAG;YAC1B;YAEA,2BAA2B;YAC3B,IAAI,OAAO,GAAG,EAAE;gBACd,OAAO,GAAG,CAAC,QAAQ;YACrB;QACF;8BAAG;QAAC;KAAQ;IAEZ,qDAAqD;IACrD,IAAA,0KAAS;+BAAC;YACR,IAAI,OAAO,GAAG,IAAI,WAAW,YAAY,2BAA2B;gBAClE,8BAA8B;gBAC9B,MAAM,MAAM,WAAW,CAAC,cAAc,aAAa,CAAC,CAAC,EAAE,aAAa,QAAQ,IAAI,GAAG,EAAE;gBAErF,kCAAkC;gBAClC,OAAO,GAAG,CAAC,SAAS;gBAEpB,wCAA4C;oBAC1C,QAAQ,GAAG,CAAC,gCAAgC;gBAC9C;YACF;QACF;8BAAG;QAAC;QAAU;QAAc;KAAQ;IAEpC,IAAI,CAAC,WAAW,YAAY,2BAA2B;QACrD,qCAAqC;QACrC,QAAQ,IAAI,CAAC;QACb,OAAO;IACT;IAEA,qBACE;;0BAEE,6LAAC,4IAAM;gBACL,IAAG;gBACH,UAAS;gBACT,yBAAyB;oBACvB,QAAQ,CAAC;;;;;;;;;yBASM,EAAE,QAAQ;UACzB,CAAC;gBACH;;;;;;0BAGF,6LAAC;0BACC,cAAA,6LAAC;oBACC,QAAO;oBACP,OAAM;oBACN,OAAO;wBAAE,SAAS;oBAAO;oBACzB,KAAK,CAAC,+BAA+B,EAAE,QAAQ,uBAAuB,CAAC;oBACvE,KAAI;;;;;;;;;;;;;AAKd;GAvFgB;;QACG,oJAAW;QACP,wJAAe;;;KAFtB;AA+FT,SAAS,eAAe,SAAiB,EAAE,UAAgC;IAChF,IAAI,+CAAkB,eAAe,OAAO,GAAG,EAAE;QAC/C,OAAO,GAAG,CAAC,SAAS,WAAW;IACjC,OAAO;QACL,QAAQ,IAAI,CAAC,8CAA8C;IAC7D;AACF;AAQO,SAAS,qBAAqB,SAAiB,EAAE,UAAgC;IACtF,IAAI,+CAAkB,eAAe,OAAO,GAAG,EAAE;QAC/C,OAAO,GAAG,CAAC,eAAe,WAAW;IACvC,OAAO;QACL,QAAQ,IAAI,CAAC,qDAAqD;IACpE;AACF;AAKO,SAAS;IACd,IAAI,+CAAkB,eAAe,OAAO,GAAG,EAAE;QAC/C,OAAO,GAAG,CAAC,WAAW;IACxB;AACF;AAKO,SAAS;IACd,IAAI,+CAAkB,eAAe,OAAO,GAAG,EAAE;QAC/C,OAAO,GAAG,CAAC,WAAW;IACxB;AACF"}}]
}