(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,41066,e=>{e.v({actions:"list-module__vX8uWq__actions",badge:"list-module__vX8uWq__badge",badgeButton:"list-module__vX8uWq__badgeButton",badgeDefault:"list-module__vX8uWq__badgeDefault",badgeHidden:"list-module__vX8uWq__badgeHidden",badgeInfo:"list-module__vX8uWq__badgeInfo",badgeSecondary:"list-module__vX8uWq__badgeSecondary",badgeSuccess:"list-module__vX8uWq__badgeSuccess",badgeVisible:"list-module__vX8uWq__badgeVisible",badgeWarning:"list-module__vX8uWq__badgeWarning",buttonDelete:"list-module__vX8uWq__buttonDelete",buttonEdit:"list-module__vX8uWq__buttonEdit",buttonPrimary:"list-module__vX8uWq__buttonPrimary",buttonSecondary:"list-module__vX8uWq__buttonSecondary",container:"list-module__vX8uWq__container",content:"list-module__vX8uWq__content",emptyState:"list-module__vX8uWq__emptyState",error:"list-module__vX8uWq__error",filterGroup:"list-module__vX8uWq__filterGroup",filterSelect:"list-module__vX8uWq__filterSelect",filters:"list-module__vX8uWq__filters",footer:"list-module__vX8uWq__footer",header:"list-module__vX8uWq__header",link:"list-module__vX8uWq__link",loading:"list-module__vX8uWq__loading",muted:"list-module__vX8uWq__muted",searchBox:"list-module__vX8uWq__searchBox",searchInput:"list-module__vX8uWq__searchInput",subtitle:"list-module__vX8uWq__subtitle",success:"list-module__vX8uWq__success",table:"list-module__vX8uWq__table"})},198,e=>{"use strict";var t=e.i(43476),l=e.i(71645),s=e.i(18566),a=e.i(41066);function i(){let e=(0,s.useRouter)(),[i,d]=(0,l.useState)(!1),[u,r]=(0,l.useState)([]),[n,o]=(0,l.useState)([]),[c,_]=(0,l.useState)(""),[h,m]=(0,l.useState)("all"),[b,f]=(0,l.useState)(""),[g,p]=(0,l.useState)(null),[v,j]=(0,l.useState)(null),[x,S]=(0,l.useState)(null);(0,l.useEffect)(()=>{y()},[b]),(0,l.useEffect)(()=>{let e=u;if("all"!==h){let t="visible"===h;e=e.filter(e=>e.attributes?.visible===t)}if(c.trim()){let t=c.toLowerCase();e=e.filter(e=>{let l=e.attributes?.name?.toLowerCase()||"",s=e.attributes?.url?.toLowerCase()||"",a=e.attributes?.state?.toLowerCase()||"";return l.includes(t)||s.includes(t)||a.includes(t)})}o(e)},[u,c,h]);let y=async()=>{try{d(!0),p(null);let e=new URLSearchParams;b&&e.set("appId",b);let t=await fetch(`/api/cpp/list?${e}`),l=await t.json();l.success?r(l.data):p(l.error||"Failed to load custom product pages")}catch(e){p(e instanceof Error?e.message:"Failed to load custom product pages")}finally{d(!1)}},N=async(e,t)=>{if(confirm(`Are you sure you want to delete "${t}"? This action cannot be undone.`))try{S(e),p(null);let t=await fetch(`/api/cpp/${e}`,{method:"DELETE"}),l=await t.json();l.success?(j("Custom product page deleted successfully"),r(t=>t.filter(t=>t.id!==e)),setTimeout(()=>j(null),3e3)):p(l.error||"Failed to delete custom product page")}catch(e){p(e instanceof Error?e.message:"Failed to delete custom product page")}finally{S(null)}},W=async e=>{try{p(null);let t=!e.attributes?.visible,l=await fetch(`/api/cpp/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({visible:t})}),s=await l.json();s.success?(j(`Custom product page is now ${t?"visible":"hidden"}`),r(t=>t.map(t=>t.id===e.id?s.data:t)),setTimeout(()=>j(null),3e3)):p(s.error||"Failed to update visibility")}catch(e){p(e instanceof Error?e.message:"Failed to update visibility")}};return(0,t.jsxs)("div",{className:a.default.container,children:[(0,t.jsxs)("div",{className:a.default.header,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{children:"Custom Product Pages"}),(0,t.jsx)("p",{className:a.default.subtitle,children:"Manage your Custom Product Pages"})]}),(0,t.jsx)("button",{onClick:()=>e.push("/cpp"),className:a.default.buttonPrimary,children:"Create New CPP"})]}),(0,t.jsxs)("div",{className:a.default.filters,children:[(0,t.jsx)("div",{className:a.default.searchBox,children:(0,t.jsx)("input",{type:"text",placeholder:"Search by name, URL, or state...",value:c,onChange:e=>_(e.target.value),className:a.default.searchInput})}),(0,t.jsxs)("div",{className:a.default.filterGroup,children:[(0,t.jsx)("label",{children:"Visibility:"}),(0,t.jsxs)("select",{value:h,onChange:e=>m(e.target.value),className:a.default.filterSelect,children:[(0,t.jsx)("option",{value:"all",children:"All"}),(0,t.jsx)("option",{value:"visible",children:"Visible"}),(0,t.jsx)("option",{value:"hidden",children:"Hidden"})]})]}),(0,t.jsx)("button",{onClick:y,disabled:i,className:a.default.buttonSecondary,children:i?"Refreshing...":"Refresh"})]}),g&&(0,t.jsxs)("div",{className:a.default.error,children:[(0,t.jsx)("strong",{children:"Error:"})," ",g]}),v&&(0,t.jsxs)("div",{className:a.default.success,children:[(0,t.jsx)("strong",{children:"Success:"})," ",v]}),(0,t.jsx)("div",{className:a.default.content,children:i&&0===u.length?(0,t.jsx)("div",{className:a.default.loading,children:"Loading custom product pages..."}):0===n.length?(0,t.jsx)("div",{className:a.default.emptyState,children:c||"all"!==h?(0,t.jsx)("p",{children:"No custom product pages match your filters."}):(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"No custom product pages found."}),(0,t.jsx)("button",{onClick:()=>e.push("/cpp"),className:a.default.buttonPrimary,children:"Create First Custom Product Page"})]})}):(0,t.jsx)("div",{className:a.default.table,children:(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("th",{children:"State"}),(0,t.jsx)("th",{children:"Visibility"}),(0,t.jsx)("th",{children:"URL"}),(0,t.jsx)("th",{children:"Actions"})]})}),(0,t.jsx)("tbody",{children:n.map(l=>{var s;return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("strong",{children:l.attributes?.name||"Unnamed"})}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:`${a.default.badge} ${(e=>{switch(e){case"READY_FOR_DISTRIBUTION":return a.default.badgeSuccess;case"PREPARE_FOR_SUBMISSION":return a.default.badgeWarning;case"PROCESSING_FOR_DISTRIBUTION":return a.default.badgeInfo;case"REPLACED_WITH_NEW_VERSION":return a.default.badgeSecondary;default:return a.default.badgeDefault}})(l.attributes?.state)}`,children:(s=l.attributes?.state)?s.split("_").map(e=>e.charAt(0)+e.slice(1).toLowerCase()).join(" "):"Unknown"})}),(0,t.jsx)("td",{children:(0,t.jsx)("button",{onClick:()=>W(l),className:`${a.default.badgeButton} ${l.attributes?.visible?a.default.badgeVisible:a.default.badgeHidden}`,title:"Click to toggle visibility",children:l.attributes?.visible?"Visible":"Hidden"})}),(0,t.jsx)("td",{children:l.attributes?.url?(0,t.jsx)("a",{href:l.attributes.url,target:"_blank",rel:"noopener noreferrer",className:a.default.link,children:l.attributes.url.length>40?l.attributes.url.substring(0,40)+"...":l.attributes.url}):(0,t.jsx)("span",{className:a.default.muted,children:"â€”"})}),(0,t.jsx)("td",{children:(0,t.jsxs)("div",{className:a.default.actions,children:[(0,t.jsx)("button",{onClick:()=>{var t;return t=l.id,void e.push(`/cpp/edit/${t}`)},className:a.default.buttonEdit,title:"Edit",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>N(l.id,l.attributes?.name||"this page"),disabled:x===l.id,className:a.default.buttonDelete,title:"Delete",children:x===l.id?"Deleting...":"Delete"})]})})]},l.id)})})]})})}),n.length>0&&(0,t.jsxs)("div",{className:a.default.footer,children:["Showing ",n.length," of ",u.length," custom product page",1!==u.length?"s":""]})]})}e.s(["default",()=>i])}]);