(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,279275,t=>{"use strict";var e=t.i(545663);let i="retention_tracking_",r=`${i}last_visit`,n=`${i}discovered_features`,o=`${i}visit_count`,a=`${i}first_visit`;function s(){return"u">typeof localStorage}function u(t){if(!s())return null;try{return localStorage.getItem(t)}catch(t){return console.error("Failed to read from localStorage:",t),null}}function l(t,e){if(s())try{localStorage.setItem(t,e)}catch(t){console.error("Failed to write to localStorage:",t)}}function c(){let t=parseInt(u(o)||"0",10),e=u(a)||new Date().toISOString(),i=u(r)||"",s=u(n)||"[]",l=[];try{l=JSON.parse(s)}catch(t){console.error("Failed to parse discovered features:",t),l=[]}return{visitCount:t,firstVisit:e,lastVisit:i,discoveredFeatures:l}}function f(t){if(!t)return 0;let e=new Date(t);return Math.floor((new Date().getTime()-e.getTime())/864e5)}function g(){if(!s())return;let t=new Date,i=t.toISOString(),n=c(),u=n.lastVisit?new Date(n.lastVisit):null,g=!u||t.getTime()-u.getTime()>18e5;if(0===n.visitCount){l(a,i),l(r,i),l(o,"1");return}if(g){let t=n.visitCount+1,a=f(n.firstVisit),s=function(t){if(!t)return null;let e=new Date(t);return Math.floor((new Date().getTime()-e.getTime())/36e5)}(n.lastVisit);e.tracking.track("return_visit",{visitCount:t,daysSinceFirstVisit:a,hoursSinceLastVisit:s,firstVisit:n.firstVisit,lastVisit:n.lastVisit,timestamp:i}),l(r,i),l(o,t.toString())}l(r,i)}function v(t){if(!s())return;let i=c();if(i.discoveredFeatures.includes(t))return;let r=[...i.discoveredFeatures,t];l(n,JSON.stringify(r));let o=f(i.firstVisit),a=r.length;e.tracking.track("feature_discovery",{feature:t,totalDiscoveredCount:a,visitCount:i.visitCount,daysSinceFirstVisit:o,timestamp:new Date().toISOString()})}t.s(["trackFeatureDiscovery",()=>v,"trackReturnVisit",()=>g])},655235,t=>{"use strict";var e=t.i(247167),i=t.i(843476),r=t.i(271645),n=t.i(545663),o=t.i(279275);let a=(0,r.createContext)(n.tracking);function s({children:t,apiKey:s,host:u,enabled:l=!0}){return(0,r.useEffect)(()=>{let t=s||e.default.env.NEXT_PUBLIC_POSTHOG_KEY,i=u||e.default.env.NEXT_PUBLIC_POSTHOG_HOST;t&&n.tracking.initialize({apiKey:t,host:i,enabled:l});let r=setTimeout(()=>{(0,o.trackReturnVisit)()},500);return()=>clearTimeout(r)},[s,u,l]),(0,i.jsx)(a.Provider,{value:n.tracking,children:t})}t.s(["TrackingProvider",()=>s,"useTracking",0,()=>(0,r.useContext)(a)])}]);